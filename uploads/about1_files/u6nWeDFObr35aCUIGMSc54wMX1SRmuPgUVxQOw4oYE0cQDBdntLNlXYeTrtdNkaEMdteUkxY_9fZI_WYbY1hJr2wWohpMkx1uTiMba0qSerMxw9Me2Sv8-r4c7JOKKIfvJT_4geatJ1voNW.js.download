;/*FB_PKG_DELIM*/

__d("LSPlatformGraphQLLightspeedRequestForIGDQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"deviceId"},{defaultValue:null,kind:"LocalArgument",name:"requestId"},{defaultValue:null,kind:"LocalArgument",name:"requestPayload"},{defaultValue:null,kind:"LocalArgument",name:"requestType"}],b=[{alias:null,args:[{kind:"Variable",name:"device_id",variableName:"deviceId"},{kind:"Variable",name:"request_id",variableName:"requestId"},{kind:"Variable",name:"request_payload",variableName:"requestPayload"},{kind:"Variable",name:"request_type",variableName:"requestType"}],concreteType:"LightspeedWebResponse",kind:"LinkedField",name:"lightspeed_web_request_for_igd",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"payload",storageKey:null},{alias:null,args:null,concreteType:"LightspeedWebRequestDependency",kind:"LinkedField",name:"dependencies",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"experiments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"target",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"LSPlatformGraphQLLightspeedRequestForIGDQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"LSPlatformGraphQLLightspeedRequestForIGDQuery",selections:b},params:{id:"6195354443842040",metadata:{},name:"LSPlatformGraphQLLightspeedRequestForIGDQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("LSPlatformGraphQLLightspeedRequestForIGD",["CometRelay","CometRelayEnvironment","LSPlatformGraphQLLightspeedRequestForIGDQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,f,g){return d("CometRelay").fetchQuery(c("CometRelayEnvironment"),h!==void 0?h:h=b("LSPlatformGraphQLLightspeedRequestForIGDQuery.graphql"),{deviceId:a,requestId:e,requestPayload:f,requestType:g}).toPromise().then(function(a){return a==null?void 0:a.lightspeed_web_request_for_igd})}g["default"]=a}),98);
__d("MAWCondSetup.react",["cr:3921","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");f=c("gkx")("20836")?a.Fragment:(e=b("cr:3921"))!=null?e:a.Fragment;d=f;g["default"]=d}),98);
__d("MAWSetupWrapperOnce.react",["CometPlaceholder.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k=i.createContext(!1);function a(a){var b=a.children;a=a.setupComponent;var d=j(k);return d?b:i.jsxs(k.Provider,{value:!0,children:[b,i.jsx(c("CometPlaceholder.react"),{fallback:null,children:a})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDBadgeIconImpressionLoggingWrapper.react",["MessengerWebUXLogger","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var b=i(4);a=a.children;var d;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d={eventName:"visit_inbox"},b[0]=d):d=b[0];d=c("MessengerWebUXLogger").useImpressionLoggerRef(d);var e;b[1]!==d||b[2]!==a?(e=j.jsx("div",{ref:d,children:a}),b[1]=d,b[2]=a,b[3]=e):e=b[3];return e}g["default"]=a}),98);
__d("IGDUncaughtErrorState.react",["FBLogger","PolarisHttp500UnexpectedErrorPage.react","cr:8915","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;var j=e.useEffect,k=e.unstable_useMemoCache;function l(a){if(b("cr:8915")!=null&&a!=null&&a instanceof b("cr:8915").ReStoreDbVersionChange){c("FBLogger")("igd_web_on_msgr").info(a);return}c("FBLogger")("igd_web_on_msgr").catching(a).mustfix("Uncaught Error while loading chat: %s",a.toString())}function a(a){var b=k(7),d=a.description,e=a.error,f=a.header;a=a.onPress;var g,h;b[0]!==e?(g=function(){l(e)},h=[e],b[0]=e,b[1]=g,b[2]=h):(g=b[1],h=b[2]);j(g,h);h=(g=d)!=null?g:void 0;g=(d=f)!=null?d:void 0;b[3]!==h||b[4]!==g||b[5]!==a?(f=i.jsx(c("PolarisHttp500UnexpectedErrorPage.react"),{description:h,header:g,onClick:a}),b[3]=h,b[4]=g,b[5]=a,b[6]=f):f=b[6];return f}g["default"]=a}),98);
__d("IGDInboxErrorState.react",["IGDUncaughtErrorState.react","cr:8914","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;e.useMemo;var j=e.unstable_useMemoCache;function a(a){var d=j(7);a=a.error;var e;e=a;var f=e;if(b("cr:8914")!=null){d[0]!==f?(e=function(a,b,d){return i.jsx(c("IGDUncaughtErrorState.react"),{description:(b=b)!=null?b:void 0,error:f,header:(b=a)!=null?b:void 0,onPress:d})},d[0]=f,d[1]=e):e=d[1];var g;d[2]!==f||d[3]!==e?(g=i.jsx(b("cr:8914"),{error:f,children:e}),d[2]=f,d[3]=e,d[4]=g):g=d[4];return g}else{d[5]!==a?(e=i.jsx(c("IGDUncaughtErrorState.react"),{error:a}),d[5]=a,d[6]=e):e=d[6];return e}}g["default"]=a}),98);
__d("LSPlatformClientSingleton",[],(function(a,b,c,d,e,f){"use strict";var g={contents:void 0};function a(a){g.contents=a}f.saveInstance=a}),66);
__d("maybeSetupMAWMainThreadLogger",["MAWMICSafe","MessengerLogHistory","WALoggerDeferred","cr:6999","cr:7350","isArmadillo","isRegisterArmadilloOnIgEnabled"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] Beginning hardcoded init sync"]);h=function(){return a};return a}var i=d("MessengerLogHistory").getInstance("client_init"),j=(a=b("cr:6999"))!=null?a:b("cr:7350");e=function(){j!=null&&(c("isArmadillo")()||c("isRegisterArmadilloOnIgEnabled")())&&(i.debug("Starting MAW main thread logger setup..."),j.setupMainWaLogger(),i.debug("Starting MAW main thread logger setup success"),d("MAWMICSafe").markEvent("ls_init_start"),void d("WALoggerDeferred").LOG(h()))};g.maybeSetupMAWMainThreadLogger=e}),98);
__d("LSPlatformClientInstances",["FBLogger","LSPlatformClientSingleton","LSPlatformLsInitLog","LSSuspense","MAWMICSafe","MessengerLogHistory","PromiseAnnotate","asyncToGeneratorRuntime","getErrorSafe","maybeSetupMAWMainThreadLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("MessengerLogHistory").getInstance("client_init"),k=(i||(i=c("LSSuspense"))).makeCollection(),l=!1;function a(a,e,f){l||(l=!0,d("maybeSetupMAWMainThreadLogger").maybeSetupMAWMainThreadLogger());return(i||(i=c("LSSuspense"))).getFromCollection(k,a,function(){return(h||(h=d("PromiseAnnotate"))).setDisplayName(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("LSPlatformLsInitLog").addAnnotations({bool:{fromReact:f==null?void 0:f.fromReact}});j.debug("Messenger loading UI suspending");try{j.debug("Loading LSPlatformClient factory...");var b=(yield e());j.debug("Loading LSPlatformClient factory success.");j.debug("Initializing LSPlatformClient...");b=(yield b.make(a));yield b.start();j.debug("Initializing LSPlatformClient success");d("LSPlatformClientSingleton").saveInstance(b);return b}catch(a){b=c("getErrorSafe")(a);j.debug("Initializing LSPlatformClient failed");d("LSPlatformLsInitLog").fail("client_setup_failure",b);d("MAWMICSafe").fail("client_setup_failure",b);c("FBLogger")("mpf_web_foundations").catching(b).warn("LSPlatformClient initialization failure");throw b}finally{j.debug("Messenger loading UI unsuspending")}})(),"InitLSPlatformClient")})}e={getOrInit:a};g["default"]=e}),98);
__d("LSPlatformClientProviderAddons.react",["CometPlaceholder.react","cr:6495","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(){return i.jsx(c("CometPlaceholder.react"),{fallback:null,children:b("cr:6495")!=null&&i.jsx(b("cr:6495"),{})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSPlatformClientProviderUtils",["cr:7578","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("6746")}g.maybeSuspendOrThrowIfUsedInSSR=b("cr:7578");g.shouldInitialiseClientConcurrently=a}),98);
__d("LSPlatformConfigContext",["LSSuspense","err","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;d=e.createContext;var k=e.useContext;e=c("err")("LSPlatformConfig.NoLSPlatformProviderFound");e=(h||(h=c("LSSuspense"))).makeWithError(e);var l=d(e);function a(a){var b=a.children;a=a.config;return j.jsx(l.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";function b(){return(h||(h=c("LSSuspense"))).getOrSuspend(k(l))}g.LSPlatformConfigProvider=a;g.useOrSuspendLSPlatformConfig=b}),98);
__d("LSPlatformErrorsCatcher.react",["MetaConfig","cr:7070","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));e=h;var i=e.useEffect,j=e.useState;function a(a){var d=a.children;a=a.fallback;var e=j(null),f=e[0],g=e[1];i(function(){var a=b("cr:7070")&&b("cr:7070").subscribe(function(a){g(a)});return function(){a&&a()}},[]);e=(e=b("cr:7070")==null?void 0:b("cr:7070").lastError())!=null?e:f;if(c("MetaConfig")._("66")&&e!=null&&a!=null)return a(e);else return d}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWCondWrapper.react",["MAWCondSetup.react","MAWSetupWrapperOnce.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.children;return i.jsx(c("MAWSetupWrapperOnce.react"),{setupComponent:i.jsx(c("MAWCondSetup.react"),{}),children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSPlatformClientProvider.react",["CometPlaceholder.react","LSPlatformClientInstances","LSPlatformClientProviderAddons.react","LSPlatformClientProviderUtils","LSPlatformConfigContext","LSPlatformErrorsCatcher.react","MAWCondWrapper.react","ReStoreProvider.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function k(a){var b=d("LSPlatformConfigContext").useOrSuspendLSPlatformConfig();return c("LSPlatformClientInstances").getOrInit(b,a,{fromReact:!0})}function a(a){var b=a.children;a=a.loadLSPlatformClient;a=k(a);return j.jsx((i||(i=d("ReStoreProvider.react"))).ReStoreProvider,{db:a.db,children:b})}a.displayName=a.name+" [from "+f.id+"]";function l(a){a=a.loadLSPlatformClient;k(a);return null}function b(a){var b=a.children;a=a.loadLSPlatformClient;d("LSPlatformClientProviderUtils").maybeSuspendOrThrowIfUsedInSSR("Messenger is not enabled for SSR");return j.jsxs(j.Fragment,{children:[j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(l,{loadLSPlatformClient:a})}),b]})}b.displayName=b.name+" [from "+f.id+"]";var m=d("LSPlatformClientProviderUtils").shouldInitialiseClientConcurrently()?b:a;function e(a){var b=a.children,d=a.errorFallback,e=a.loadLSPlatformClient;a=a.placeholder;return j.jsx(c("LSPlatformErrorsCatcher.react"),{fallback:d,children:j.jsx(c("MAWCondWrapper.react"),{children:j.jsx(c("CometPlaceholder.react"),{fallback:a,children:j.jsxs(m,{loadLSPlatformClient:e,children:[j.jsx(c("LSPlatformClientProviderAddons.react"),{}),b]})})})})}e.displayName=e.name+" [from "+f.id+"]";g["default"]=e}),98);
__d("LSPlatformClientProviderWithDeferredLoadingStrategy.react",["LSPlatformClientProvider.react","PromiseAnnotate","cr:3159","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function k(){var a=b("cr:3159").load();c("promiseDone")((i||(i=d("PromiseAnnotate"))).setDisplayName(a,"loadLSPlatformClient"));return a}function a(a){var b=a.children,d=a.errorFallback;a=a.placeholder;return j.jsx(c("LSPlatformClientProvider.react"),{errorFallback:d,loadLSPlatformClient:k,placeholder:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSCometSSRDatabase",["LSJSInMemoryStorage","LSMetadata"],(function(a,b,c,d,e,f,g){"use strict";a=c("LSJSInMemoryStorage")(d("LSMetadata").metadata);g["default"]=a}),98);
__d("LSDatabaseProviderType",[],(function(a,b,c,d,e,f){"use strict";function a(a){return g(a.persistenceTypes)}function g(a){return a.includes("indexeddb")}f.isProviderPersisted=a;f.hasPersistentType=g}),66);
__d("LSClearEpochBeforeResumeSync",["Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return a.runInTransaction(function(a){var c;return(c=d("ReQL")).toArrayAsync(c.mergeJoin(c.fromTableAscending(a.sync_groups),c.fromTableAscending(a.network_requests).getKeyRange(""))).then(function(c){return(h||(h=b("Promise"))).all(c.map(function(b){b=b[1];return a.network_requests.put({epochId:void 0,failureCount:b.failureCount,lastDelayedRequestTimestampMs:b.lastDelayedRequestTimestampMs,lastSentTimestampMs:b.lastSentTimestampMs,lastSyncRequestTimestampMs:b.lastSyncRequestTimestampMs,networkTaskIdentifier:b.networkTaskIdentifier,syncDatabaseId:b.syncDatabaseId,taskQueueName:b.taskQueueName})}))}).then(function(){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.network_requests).filter(function(a){return a.taskQueueName!==""})).then(function(c){return(h||(h=b("Promise"))).all(c.map(function(b){return a.network_requests.put({epochId:void 0,failureCount:b.failureCount,lastDelayedRequestTimestampMs:b.lastDelayedRequestTimestampMs,lastSentTimestampMs:b.lastSentTimestampMs,lastSyncRequestTimestampMs:b.lastSyncRequestTimestampMs,networkTaskIdentifier:b.networkTaskIdentifier,syncDatabaseId:b.syncDatabaseId,taskQueueName:b.taskQueueName})}))})})},"readwrite","ui").then(function(){return(h||(h=b("Promise"))).resolve()})}g.call=a}),98);
__d("LSDataTraceFlushDeferred",["MetaConfig","Promise","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("LSDataTraceFlush").__setRef("LSDataTraceFlushDeferred");function a(a){if(!c("MetaConfig")._("62"))return(h||(h=b("Promise"))).resolve(function(){});else return i.load().then(function(b){return b.flushExpiredDataTraces(a)})}g.watchForExpiredTraces=a}),98);
__d("LSTruncateTableAndSetShowError",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(a){return b.forEach(b.db.table(115).fetch(),function(a){return a["delete"]()})},function(d){return c[0]=b.i64.of_float(Date.now()),b.db.table(115).add({statusId:b.i64.cast([0,0]),timestampMs:c[0],errorShouldBeShown:a[0]})}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSDeleteAllAndInsertConnectivityStatus",["LSTruncateTableAndSetShowError"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.forEach(c.db.table(114).fetch(),function(a){return a["delete"]()})},function(b){return d[0]=c.i64.of_float(Date.now()),c.db.table(114).add({statusId:void 0,timestampMs:d[0],internetConnectionState:a[0]})},function(d){return c.storedProcedure(b("LSTruncateTableAndSetShowError"),c.i64.neq(a[0],c.i64.cast([0,1])))}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSDeleteAllAndInsertConnectivityStatusStoredProcedure",["LSDeleteAllAndInsertConnectivityStatus","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.internetConnectionState;return c("LSDeleteAllAndInsertConnectivityStatus").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSPlatformArmadilloUtils",["MAWMICSafe","cr:6998","cr:7349"],(function(a,b,c,d,e,f,g){"use strict";var h=(f=b("cr:6998"))!=null?f:b("cr:7349");function a(){h==null?void 0:h.maybeEndOccamadilloThreadMapping()}function c(){d("MAWMICSafe").markEvent("ls_init_end")}function e(a){d("MAWMICSafe").fail("init_sync_failure",a)}g.maybeEndOccamadilloThreadMapping=a;g.reportInitEnd=c;g.reportInitSyncFailure=e}),98);
__d("LSPlatformGraphQLTransport",["FBLogger","I64","LSDynamicDependencies","LSProgramTarget","MessengerLogHistory","Promise","asyncToGeneratorRuntime","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j="LSPlatformGraphQLTransport.ServerError";function a(a,b,c,d,e){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,k){var l=d("MessengerLogHistory").getInstance("client_sync"),m=null;try{m=(yield k(a,e,g,(i||(i=d("I64"))).to_int32(f)))}catch(a){k=c("FBLogger")("messenger_web_product");a instanceof Error&&(l.error("Error sending Graphql Request. Type: "+(i||(i=d("I64"))).to_string(f)+" Message: "+(a.message!=null?a.message:"None")),k=k.catching(a),k.debug("Relay or Graphql Server error in LSPlatformGraphqlTransport"));throw k.mustfixThrow(j)}a=c("nullthrows")(m);e=a.dependencies;g=a.experiments;l=a.payload;var n=a.target;f=c("nullthrows")(l);k=e==null?(h||(h=b("Promise"))).resolve():d("LSDynamicDependencies").downloadRelayDependencies(e);m=Array.from(c("LSProgramTarget").members()).find(function(a){return c("LSProgramTarget").getName(a)===n});return[k,f,g,m]});return k.apply(this,arguments)}g.ServerError=j;g.publish=a}),98);
__d("LSPlatformHardcodedInitSync",["CurrentMessengerUser","FBLogger","I64","InteractionTracing.xplat","LSDatabaseProviderType","LSDict","LSIntEnum","LSJson","LSPlatformArmadilloUtils","LSPlatformGraphQLTransport","LSPlatformLsInitLog","MWPBumpEntityKey","MetaConfig","Promise","QuickPerformanceLogger","ReQL","asyncToGeneratorRuntime","getErrorSafe","gkx","isArmadillo","isInstamadillo","isRegisterArmadilloOnIgEnabled","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=c("isArmadillo")()||c("isRegisterArmadilloOnIgEnabled")()&&!c("isInstamadillo")(),m=d("CurrentMessengerUser").isWorkUser()?!c("gkx")("26385"):!c("gkx")("307");function n(a){return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return(k||(k=b("Promise"))).all([a.network_requests.put({epochId:void 0,failureCount:(i||(i=d("I64"))).zero,lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:i.zero,lastSyncRequestTimestampMs:i.zero,networkTaskIdentifier:void 0,syncDatabaseId:(j||(j=d("LSIntEnum"))).ofNumber(1),taskQueueName:""}),m?a.network_requests.put({epochId:void 0,failureCount:(i||(i=d("I64"))).zero,lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:(i||(i=d("I64"))).zero,lastSyncRequestTimestampMs:(i||(i=d("I64"))).zero,networkTaskIdentifier:void 0,syncDatabaseId:(j||(j=d("LSIntEnum"))).ofNumber(2),taskQueueName:""}):(k||(k=b("Promise"))).resolve(),l?a.network_requests.put({epochId:void 0,failureCount:(i||(i=d("I64"))).zero,lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:(i||(i=d("I64"))).zero,lastSyncRequestTimestampMs:(i||(i=d("I64"))).zero,networkTaskIdentifier:void 0,syncDatabaseId:(j||(j=d("LSIntEnum"))).ofNumber(95),taskQueueName:""}):(k||(k=b("Promise"))).resolve()])});return function(b){return a.apply(this,arguments)}}(),"readwrite").then(function(){return(k||(k=b("Promise"))).resolve()})}function o(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.network_requests).getKeyRange("",(j||(j=d("LSIntEnum"))).ofNumber(b)))}function p(a){return a.runInTransaction(function(a){return(k||(k=b("Promise"))).all([o(a,1),m?o(a,2):(k||(k=b("Promise"))).resolve(),l?o(a,95):(k||(k=b("Promise"))).resolve()]).then(function(c){var e=c[0],f=c[1];c=c[2];e=e!=null?a.network_requests.put({epochId:(i||(i=d("I64"))).zero,failureCount:e.failureCount,lastDelayedRequestTimestampMs:e.lastDelayedRequestTimestampMs,lastSentTimestampMs:e.lastSentTimestampMs,lastSyncRequestTimestampMs:e.lastSyncRequestTimestampMs,networkTaskIdentifier:e.networkTaskIdentifier,syncDatabaseId:e.syncDatabaseId,taskQueueName:e.taskQueueName}):(k||(k=b("Promise"))).resolve();f=m&&f!=null?a.network_requests.put({epochId:(i||(i=d("I64"))).zero,failureCount:f.failureCount,lastDelayedRequestTimestampMs:f.lastDelayedRequestTimestampMs,lastSentTimestampMs:f.lastSentTimestampMs,lastSyncRequestTimestampMs:f.lastSyncRequestTimestampMs,networkTaskIdentifier:f.networkTaskIdentifier,syncDatabaseId:f.syncDatabaseId,taskQueueName:f.taskQueueName}):(k||(k=b("Promise"))).resolve();c=l&&c!=null?a.network_requests.put({epochId:(i||(i=d("I64"))).zero,failureCount:c.failureCount,lastDelayedRequestTimestampMs:c.lastDelayedRequestTimestampMs,lastSentTimestampMs:c.lastSentTimestampMs,lastSyncRequestTimestampMs:c.lastSyncRequestTimestampMs,networkTaskIdentifier:c.networkTaskIdentifier,syncDatabaseId:c.syncDatabaseId,taskQueueName:c.taskQueueName}):(k||(k=b("Promise"))).resolve();return(k||(k=b("Promise"))).all([e,f,c]).then(function(){})})},"readwrite","ui")}function q(a){if(d("LSDatabaseProviderType").isProviderPersisted(a)&&c("MetaConfig")._("76"))return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield o(a,1));b!=null&&(yield a.network_requests.put({epochId:void 0,failureCount:b.failureCount,lastDelayedRequestTimestampMs:b.lastDelayedRequestTimestampMs,lastSentTimestampMs:b.lastSentTimestampMs,lastSyncRequestTimestampMs:b.lastSyncRequestTimestampMs,networkTaskIdentifier:b.networkTaskIdentifier,syncDatabaseId:b.syncDatabaseId,taskQueueName:b.taskQueueName}))});return function(b){return a.apply(this,arguments)}}(),"readwrite","ui");else return(k||(k=b("Promise"))).resolve()}function r(a){d("CurrentMessengerUser").isWorkUser()&&(h||(h=c("QuickPerformanceLogger"))).markerPoint(c("qpl")._(1036588047,"310"),a)}function a(a,b,c,d){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){try{var o,s=d("CurrentMessengerUser").isWorkUser();yield p(f);var u=(yield (k||(k=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.table("sync_groups")).getKeyRange((j||(j=d("LSIntEnum"))).ofNumber(1))),m?d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.table("sync_groups")).getKeyRange((j||(j=d("LSIntEnum"))).ofNumber(2))):(k||(k=b("Promise"))).resolve(),l?d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.table("sync_groups")).getKeyRange((j||(j=d("LSIntEnum"))).ofNumber(95))):(k||(k=b("Promise"))).resolve()])),v=u[0],w=u[1];u=u[2];v=v==null?void 0:v.currentCursor;w=w==null?void 0:w.currentCursor;u=u==null?void 0:u.currentCursor;var x=new(c("LSDict"))().set("database",j.ofNumber(1)).set("epoch_id",(i||(i=d("I64"))).zero).set("last_applied_cursor",v).set("sync_params",a.syncParams.mailbox).set("version",i.of_string(a.schemaVersion)),y=new(c("LSDict"))().set("database",j.ofNumber(2)).set("epoch_id",i.zero).set("last_applied_cursor",w).set("sync_params",a.syncParams.contact).set("version",i.of_string(a.schemaVersion));o=new(c("LSDict"))().set("database",j.ofNumber(95)).set("epoch_id",i.zero).set("last_applied_cursor",u).set("sync_params",(o=a.syncParams.e2ee)!=null?o:"{}").set("version",i.of_string(a.schemaVersion));var z={string:{contactsSync:m?w!=null?"resume":"init":"disabled",mailboxSync:v!=null?"resume":"init"}};s&&(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(c("qpl")._(1036588047,"310"),z);d("LSPlatformLsInitLog").addPoint("ls_sync_start",z);t("ls_sync_start");d("LSPlatformLsInitLog").addPoint("gql_fetch_start");t("gql_fetch_start");r("start_contact");r("start_mailbox");var A=function(){return[(k||(k=b("Promise"))).resolve(),"",void 0,void 0]};s=d("LSPlatformGraphQLTransport").publish(g,0,v!=null?(j||(j=d("LSIntEnum"))).ofNumber(2):(j||(j=d("LSIntEnum"))).ofNumber(1),d("LSJson").stringify(x),a.executeGraphQLLightSpeedRequest).then(function(a){r("mailbox_synced");d("LSPlatformLsInitLog").addPoint("gql_mailbox_fetch_end");t("gql_mailbox_fetch_end");return a})["catch"](function(a){c("FBLogger")("messenger_web_product").catching(a).mustfix("Failed to sync mailbox");return A()});z=m?d("LSPlatformGraphQLTransport").publish(g,1,w!=null?(j||(j=d("LSIntEnum"))).ofNumber(2):(j||(j=d("LSIntEnum"))).ofNumber(1),d("LSJson").stringify(y),a.executeGraphQLLightSpeedRequest).then(function(a){r("contact_synced");d("LSPlatformLsInitLog").addPoint("gql_contact_fetch_end");t("gql_contact_fetch_end");return a})["catch"](function(a){c("FBLogger")("messenger_web_product").catching(a).mustfix("Failed to sync contacts");return A()}):(k||(k=b("Promise"))).resolve(A());x=l?d("LSPlatformGraphQLTransport").publish(g,2,u!=null?(j||(j=d("LSIntEnum"))).ofNumber(2):(j||(j=d("LSIntEnum"))).ofNumber(1),d("LSJson").stringify(o),a.executeGraphQLLightSpeedRequest).then(function(a){d("LSPlatformLsInitLog").addPoint("gql_e2ee_fetch_end");t("gql_e2ee_fetch_end");return a})["catch"](function(a){c("FBLogger")("messenger_web_product").catching(a).mustfix("Failed to sync e2ee mailbox");return A()}):(k||(k=b("Promise"))).resolve(A());w=(yield k.all([s,z,x]));y=w[0];g=w[1];u=w[2];o=u[0];a=u[1];s=u[2];z=u[3];x=g[0];w=g[1];u=g[2];g=g[3];var B=y[0],C=y[1],D=y[2];y=y[3];d("LSPlatformLsInitLog").addPoint("gql_fetch_end");t("gql_fetch_end");d("LSPlatformLsInitLog").addPoint("gql_deps_start");t("gql_deps_start");yield k.all([o,x,B]);d("LSPlatformLsInitLog").addPoint("gql_deps_end");t("gql_deps_end");d("LSPlatformLsInitLog").addPoint("ls_sync_execute_start");t("ls_sync_execute_start");yield e({experiments:D,priority:"ui",syncScript:C,target:y});m&&(yield e({experiments:u,priority:"ui",syncScript:w,target:g}));l&&(yield e({experiments:s,priority:"ui",syncScript:a,target:z}));v!=null&&(yield q(f));r("sync_completed");d("LSPlatformArmadilloUtils").reportInitEnd();d("LSPlatformLsInitLog").addPoint("ls_sync_execute_end");t("ls_sync_execute_end");d("LSPlatformLsInitLog").addPoint("ls_sync_end");t("ls_sync_end");d("LSPlatformLsInitLog").endSuccess();l&&d("LSPlatformArmadilloUtils").maybeEndOccamadilloThreadMapping();d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_graphql","init_sync.success");d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_ls","init_sync.success")}catch(a){o=c("getErrorSafe")(a);d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_ls","init_sync.fail");r("sync_failed");d("LSPlatformLsInitLog").fail("init_sync_failure");try{d("LSPlatformArmadilloUtils").reportInitSyncFailure(o)}catch(a){}c("FBLogger")("messenger_web_product").catching(o).mustfix("Encountered an error while performining preloaded init sync request via graphql");return n(f)}});return s.apply(this,arguments)}function t(a){c("InteractionTracing.xplat").getPendingInteractions().forEach(function(b){b.addMarkerPoint(a,"AppTiming")})}g.sendHardcodedInitSync=a}),98);
__d("LSPlatformSyncSystemMaybeDeferred",["cr:6963"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:6963")}),98);
__d("LSSyncStoredProcedureUtils",["I64","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.pending_tasks.index("queueNameTaskId")).getKeyRange(b)));if(b==null)return;c=c!=null?(h||(h=d("I64"))).of_float(Date.now()+c):b.minTimeToSyncTimestampMs;yield a.pending_tasks.put(babelHelpers["extends"]({},b,{failureCount:(h||(h=d("I64"))).add(b.failureCount,h.one),minTimeToSyncTimestampMs:c}))});return i.apply(this,arguments)}function c(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield a.network_requests.get(b,c));if(b==null)return;yield a.network_requests.put(babelHelpers["extends"]({},b,{failureCount:(h||(h=d("I64"))).add(b==null?void 0:b.failureCount,h.one)}))});return j.apply(this,arguments)}function e(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield a.network_requests.get(b,c));if(b==null)return;yield a.network_requests.put(babelHelpers["extends"]({},b,{epochId:void 0,networkTaskIdentifier:void 0}))});return k.apply(this,arguments)}g.incrementPendingTasksTaskFailureCount=a;g.incrementNetworkRequestsTaskFailureCount=c;g.closeEpoch=e}),98);
__d("LSHandleTaskSendFailureForQueue2",["I64","LSSyncStoredProcedureUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){yield d("LSSyncStoredProcedureUtils").incrementPendingTasksTaskFailureCount(a,b,c),yield d("LSSyncStoredProcedureUtils").incrementNetworkRequestsTaskFailureCount(a,b,(h||(h=d("I64"))).neg_one),yield d("LSSyncStoredProcedureUtils").closeEpoch(a,b,h.neg_one)});return i.apply(this,arguments)}g["default"]=a}),98);
__d("LSHandleTaskSendSuccessForQueue2",["I64","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield a.network_requests.get(b,(h||(h=d("I64"))).neg_one));if(c==null||c.epochId==null)return;yield a.network_requests["delete"](b,h.neg_one)});return i.apply(this,arguments)}g["default"]=a}),98);
__d("LSPlatformRequestId",[],(function(a,b,c,d,e,f){"use strict";var g=4;function a(){var a=g;g+=1;return a}b={generate:a};f["default"]=b}),66);
__d("LSPlatformRequestScheduler",["clearTimeout","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.requests=new Map()}var b=a.prototype;b.schedule=function(a,b,d){var e=this.requests.get(b);e!=null&&c("clearTimeout")(e);this.requests.set(b,c("setTimeout")(a,d))};b.cleanup=function(){this.requests.forEach(function(a){return c("clearTimeout")(a)})};return a}();g["default"]=a}),98);
__d("LSPlatformServerResponseHandler",["FBLogger","Promise","asyncToGeneratorRuntime","clearTimeout","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){this.eval=a,this.currentlyRunning=(h||(h=b("Promise"))).resolve()}var d=a.prototype;d.evalWhenReady=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var d=[];try{var e=c("setTimeout")(function(){c("FBLogger")("messenger_web_product").mustfix("waited longer than 30 seconds to download dependencies")},3e4);d.push(e);yield a;c("clearTimeout")(e);a=c("setTimeout")(function(){c("FBLogger")("messenger_web_product").mustfix("waited longer than 30 seconds to eval sync script")},3e4);d.push(a);yield this.eval(b);c("clearTimeout")(a)}catch(a){d.forEach(function(a){return c("clearTimeout")(a)}),c("FBLogger")("messenger_web_product").catching(a).mustfix("syncscript execution failed "+(a==null?void 0:a.message))}});function d(b,c){return a.apply(this,arguments)}return d}();d.evalInOrderReceived=function(a,b){var c=this,d=this.currentlyRunning.then(function(){return c.evalWhenReady(a,babelHelpers["extends"]({},b,{priority:"sync_script"}))});this.currentlyRunning=d;return d};return a}();g["default"]=a}),98);
__d("LSBeginHandlingFireForgetTasksForQueue",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return c[0]=b.createArray(),b.forEach(b.filter(b.db.table(5).fetch(),function(b){return b.queueName===a[0]}),function(a){a=a.item;return c[3]=new b.Map(),c[3].set("label",a.context),c[3].set("payload",a.taskValue),c[3].set("queue_name",a.queueName),c[3].set("task_id",a.taskId),c[3].set("failure_count",b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))?void 0:b.i64.cast([0,0])),c[4]=(c[0].push(c[3]),c[0])})},function(e){return c[1]=new b.Map(),c[1].set("tasks",c[0]),c[1].set("epoch_id",void 0),c[2]=new b.Map(),c[2].set("queue_name",a[0]),c[2].set("next_sync_ms",void 0),c[2].set("work_item_type",b.i64.cast([0,5])),c[2].set("network_payload",c[1]),c[2].set("http_url_override",void 0),c[2].set("skip_realtime_gateway",!1),d[0]=c[2]}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSBeginHandlingFireForgetTasksForQueueStoredProcedure",["LSBeginHandlingFireForgetTasksForQueue","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.queueName;return c("LSBeginHandlingFireForgetTasksForQueue").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("MWPBeginHandlingPendingTasksForQueue",["FBLogger","I64","LSBeginHandlingFireForgetTasksForQueueStoredProcedure","LSFactory","LSIntEnum","LSShape","LSVec","asyncToGeneratorRuntime","cr:4064","cr:623","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=e.fireAndForgetTask,g=e.ignoreSoftDelay,j=e.queueName;if(b("cr:623")){var k;e=(yield a.runInTransaction(function(a){return b("cr:623")(a,j,g)},"readwrite"));return d("LSShape").ofRecord({network_payload:d("LSShape").ofRecord(babelHelpers["extends"]({},((k=e.networkPayload)==null?void 0:k.epochId)&&{epoch_id:(k=e.networkPayload)==null?void 0:k.epochId},{tasks:c("LSVec").ofArray(((k=(k=e.networkPayload)==null?void 0:k.tasks)!=null?k:[]).map(function(a){var b={payload:a.payload,queue_name:a.queueName,task_id:a.taskId};a.failureCount!=null&&(b.failure_count=(h||(h=d("I64"))).of_float(a.failureCount));a.label!=null&&(b.label=a.label);return d("LSShape").ofRecord(b)})),version_id:"local"})),next_sync_ms:(h||(h=d("I64"))).of_float((k=e.nextSyncMs)!=null?k:-1),queue_name:e.queueName,work_item_type:(i||(i=d("LSIntEnum"))).ofNumber(e.workItemType)})}if(b("cr:4064")==null){c("FBLogger")("messenger_web_product","begin_handling_pending_tasks_for_queue").mustfix("LSBeginHandlingPendingTasksForQueueStoredProcedure is null, unable to handle task");throw c("unrecoverableViolation")("LSBeginHandlingPendingTasksForQueueStoredProcedure is null","mpf_web_foundations")}k=(yield a.runInTransaction(function(a){return f===!0?c("LSBeginHandlingFireForgetTasksForQueueStoredProcedure")(c("LSFactory")(a),{queueName:j}):b("cr:4064")(c("LSFactory")(a),{ignoreSoftDelay:g,queueName:j})},"readwrite"));e=k[0];return e});return j.apply(this,arguments)}g["default"]=a}),98);
__d("LSPredefineTraceForTaskStoredProcedure",["LSPredefineTraceForTask","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.dataTraceId;d[1]=b.taskId;d[2]=b.taskLabel;d[3]=b.predefinedId;return c("LSPredefineTraceForTask").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSPlatformTraceTasks",["LSFactory","LSGenerateTraceId","LSPredefineTraceForTaskStoredProcedure","MetaConfig","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set();c("gkx")("26388")&&h.add("207");function i(a){return(a.dataTraceId==null||a.dataTraceId==="")&&h.has(a.context)}function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){for(b of b)if(i(b)){var d=c("LSGenerateTraceId")();if(d!=null){yield c("LSPredefineTraceForTaskStoredProcedure")(c("LSFactory")(a),{dataTraceId:d,predefinedId:"",taskId:b.taskId,taskLabel:(d=b.context)!=null?d:""})}}});return k.apply(this,arguments)}function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(c("MetaConfig")._("77")){var d=b.filter(i);if(d.length===0)return;yield a.runInTransaction(function(a){return j(a,d)},"readwrite","background")}});return l.apply(this,arguments)}d={startTraceForTaskIfEligible:j,traceTasksIfEligible:a};g["default"]=d}),98);
__d("MWPlatformTaskUtils",["FBLogger","I64","JSScheduler","LSPlatformTraceTasks","MetaConfig","Promise","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,e){function f(){return g.apply(this,arguments)}function g(){g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield a(e)}catch(a){c("FBLogger")("messenger_web_product").catching(a).warn("Failed to calculate work for task queue %s",e.queueName)}});return g.apply(this,arguments)}if((j||(j=d("I64"))).gt(e.priority,(j||(j=d("I64"))).zero)&&c("MetaConfig")._("78")){var h=function(){f()};(i||(i=c("JSScheduler"))).scheduleLoggingPriCallback(h)}else c("promiseDone")(f())}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{yield a(b)}catch(a){c("FBLogger")("messenger_web_product").catching(a).warn("Failed to calculate work for fire forget queue %s",b.queueName)}});return m.apply(this,arguments)}function a(a,e){var f=new Set(),g=[],h=[];h.push(a.table("pending_tasks").index("queueNameTaskId").subscribe(function(a,b){var c;if(b.operation==="delete"){f.add(a[0]);return}a=b.operation==="put"&&b.prevValue==null||b.operation==="add";c=b.operation==="put"&&(j||(j=d("I64"))).compare(b.value.failureCount,(c=(c=b.prevValue)==null?void 0:c.failureCount)!=null?c:(j||(j=d("I64"))).zero)>0;(a||c)&&f.add(b.value.queueName);(b.operation==="add"&&b.value.dataTraceId==null||b.value.dataTraceId==="")&&g.push(b.value)}));h.push(a.table("network_requests").subscribe(function(a,b){a=a[0];if(a==="")return;b.operation==="delete"?f.add(a):b.value.epochId==null&&f.add(a)}));h.push(a.subscribeToCommit(function(){var h=Array.from(f),i=g;f.clear();g=[];h.forEach(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("pending_tasks").index("queueNameTaskId")).bounds({gte:[b]})));b!=null&&k(e,b)});return function(a){return c.apply(this,arguments)}}());i.length>0&&c("promiseDone")(c("LSPlatformTraceTasks").traceTasksIfEligible(a,i))}));return h}function e(a,e){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("pending_tasks")))),c=new Set();for(b of b){if(c.has(b.queueName))continue;c.add(b.queueName);k(e,b)}})())}function n(a,e){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var f=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("pending_fire_and_forget_tasks"))));yield (h||(h=b("Promise"))).all(f.map(function(a){return l(e,a)}));c("promiseDone")(a.runInTransaction(function(a){return(h||(h=b("Promise"))).all(f.map(function(b){return a.pending_fire_and_forget_tasks["delete"](b.taskId)}))},"readwrite","background"))})())}function f(a,b){var c=!1,d=[];d.push(a.table("pending_fire_and_forget_tasks").subscribe(function(a,b){if(b.operation==="delete")return;a=b.operation==="put"&&b.prevValue==null||b.operation==="add";a&&(c=!0)}));d.push(a.subscribeToCommit(function(){c&&n(a,b),c=!1}));return d}g.checkQueuesWhenPendingTaskTableUpdates=a;g.checkAllPendingTasksForWork=e;g.checkAllFireForgetTasksForWork=n;g.checkQueuesWhenPendingFireForgetTaskTableUpdates=f}),98);
__d("LSPlatformTaskSystemTransport",["CurrentMessengerUser","FBLogger","I64","JSResourceForInteraction","JSScheduler","LSDatabaseProviderType","LSHandleTaskSendFailureForQueue2","LSHandleTaskSendSuccessForQueue2","LSJson","LSPlatformRealtimeTransport","LSPlatformRequestId","LSPlatformRequestScheduler","LSPlatformServerResponseHandler","LSShape","LSVec","MWPBeginHandlingPendingTasksForQueue","MWPBumpEntityKey","MWPlatformTaskUtils","Promise","ReQL","asyncToGeneratorRuntime","cr:6666","cr:6668","gkx","isInstamadillo","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("JSResourceForInteraction")("publishLSPlatformDeidentifiedPayload").__setRef("LSPlatformTaskSystemTransport"),l=new Set([632,765,60011].map(function(a){return a.toString()}));a=function(){function a(a,e,f,g){var h=this;this.key="ls";this.$8=!1;this.$18=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield c("MWPBeginHandlingPendingTasksForQueue")(h.$1,{ignoreSoftDelay:b,queueName:a}));yield h.$17(d("LSShape").toRecord(b))});return function(b,c){return a.apply(this,arguments)}}();this.$1=a;this.$2=e;this.$3=f;this.$4=g;this.$8=d("LSDatabaseProviderType").isProviderPersisted(a);this.$5=new(c("LSPlatformRequestScheduler"))();this.$6=new(c("LSPlatformServerResponseHandler"))(f);this.$7=this.$9();this.$10()}var e=a.prototype;e.$11=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!(c("gkx")("26392")||c("isInstamadillo")())){var d=(yield this.$2.publish(b));return d}d=a.filter(function(a){return a.label!=null&&l.has(a.label)});if(d.length<a.length){d.length>0&&c("FBLogger")("maw_ohai").mustfix("Deidentifed tasks label %s sent together with normal tasks",d[0].label);a=(yield this.$2.publish(b));return a}a=d[0];d=(yield k.load());d=(yield d(babelHelpers["extends"]({},b,{taskLabel:a.label})));return d});function d(b,c){return a.apply(this,arguments)}return d}();e.$12=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.$1.runInTransaction(function(b){return c("LSHandleTaskSendFailureForQueue2")(b,a)},"readwrite")});function d(b){return a.apply(this,arguments)}return d}();e.$13=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.$1.runInTransaction(function(b){return c("LSHandleTaskSendSuccessForQueue2")(b,a)},"readwrite","background")});function d(b){return a.apply(this,arguments)}return d}();e.$14=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=c("LSVec").toArray(a.tasks).slice(0).map(function(a){return d("LSShape").toRecord(a)});a=a[0];if(a==null)return;a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(this.$1.table("pending_tasks")).getKeyRange(a.task_id)));return a==null?void 0:a.dataTraceId});function e(b){return a.apply(this,arguments)}return e}();e.$15=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=this;if(a.network_payload==null)return;var g=d("LSShape").toRecord(a.network_payload);(j||(j=d("JSScheduler"))).scheduleLoggingPriCallback(function(){return g&&(b("cr:6668")==null?void 0:b("cr:6668").recordTaskSending(g.tasks))});var k=this.$4;try{yield (h||(h=b("Promise"))).all(c("LSVec").toArray(g.tasks).map(function(a){return d("LSShape").toRecord(a)}).map(function(b){var g=c("LSPlatformRequestId").generate();return f.$11([b],{payload:d("LSJson").stringify(d("LSShape").ofRecord({label:b.label,payload:b.payload,version:k})),queueName:a.queue_name,requestId:g,syncChannel:(i||(i=d("I64"))).of_int32(1),type_:i.of_int32(e)})}))}catch(a){}});function e(b,c){return a.apply(this,arguments)}return e}();e.$16=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(a.network_payload==null)return;var f=d("LSShape").toRecord(a.network_payload),g=c("LSVec").toArray(f.tasks).map(function(a){return d("LSShape").toRecord(a)}),h=(yield this.$14(f));(j||(j=d("JSScheduler"))).scheduleLoggingPriCallback(function(){return f&&(b("cr:6668")==null?void 0:b("cr:6668").recordTaskSending(f.tasks))});var k=c("LSPlatformRequestId").generate(),l;try{l=(yield this.$11(g,{payload:d("LSJson").stringify(d("LSShape").ofRecord(babelHelpers["extends"]({},f,{version_id:this.$4},h==null?{}:{data_trace_id:h}))),queueName:a.queue_name,requestId:k,syncChannel:(i||(i=d("I64"))).of_int32(1),type_:i.of_int32(e)}))}catch(b){b.RE_EXN_ID===d("LSPlatformRealtimeTransport").Timeout?d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_timeout"):b.RE_EXN_ID===d("LSPlatformRealtimeTransport").NotConnected?(d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_notconnected"),c("FBLogger")("messenger_web_product").warn("Publishing a task to the server not connected")):(d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_generic"),c("FBLogger")("messenger_web_product").warn("Error while publishing a task for request: %s, error %s",e,JSON.stringify(b))),yield this.$12(a.queue_name)}if(l!=null&&l.type==="taskresponse")try{h=l.downloadTask;var m=l.payload;k={experiments:m.ex,sp:m.sp,syncScript:m.payload,target:m.target,taskNames:g.map(function(a){return a.label}).filter(Boolean)};this.$8?yield this.$6.evalWhenReady(h,k):yield this.$3(k);yield this.$13(a.queue_name);(j||(j=d("JSScheduler"))).scheduleLoggingPriCallback(function(){return f&&(b("cr:6668")==null?void 0:b("cr:6668").recordTaskSent(f.tasks,m.payload))})}catch(b){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","handle_task_failure"),c("FBLogger")("messenger_web_product").catching(b).mustfix("Encountered an error while processing a task response via realtime transport"),yield this.$12(a.queue_name)}});function e(b,c){return a.apply(this,arguments)}return e}();e.decideWhatToDoWithTask=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){a=(yield c("MWPBeginHandlingPendingTasksForQueue")(a,{fireAndForgetTask:f,ignoreSoftDelay:!1,queueName:b,transportKey:e}));c("promiseDone")(this.$17(d("LSShape").toRecord(a)))});function e(b,c,d,e){return a.apply(this,arguments)}return e}();e.$17=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=this.$5,f=this.$18;function g(a,b){e.schedule(function(){c("promiseDone")(f(a,!1))},a,b)}var h=(i||(i=d("I64"))).to_int32(a.work_item_type);switch(h){case 1:yield this.$16(a,3);break;case 5:yield this.$15(a,4);break;case 3:g(a.queue_name,(i||(i=d("I64"))).to_float(a.next_sync_ms));break;case 2:if(b("cr:6666")==null){c("FBLogger")("messenger_web_product").mustfix("Native tasks not supported so far see gk mpf_web_native_tasks");c("FBLogger")("igd_web_on_msgr").mustfix("Native tasks not supported so far see gk igd_mpf_web_native_tasks");break}yield b("cr:6666").handleTask(this.$1,a,d("CurrentMessengerUser").getAccountID());break;case 4:break;default:c("FBLogger")("messenger_web_product").warn("Unknown Task type of %s",h)}});function e(b){return a.apply(this,arguments)}return e}();e.$9=function(){var a=this,e=this.$1;return this.$2.onReconnect(function(){c("promiseDone")(e.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.network_requests).bounds({gte:d("ReQL").key("")})));yield (h||(h=b("Promise"))).all(e.map(function(b){b=b.taskQueueName;return c("LSHandleTaskSendFailureForQueue2")(a,b)}))});return function(b){return a.apply(this,arguments)}}(),"readwrite")),a.$10()})};e.$10=function(){var a=this;d("MWPlatformTaskUtils").checkAllPendingTasksForWork(this.$1,function(b){b=b.queueName;return a.decideWhatToDoWithTask(a.$1,b)})};e.cleanup=function(){this.$7()};return a}();g["default"]=a}),98);
__d("MWPlatformTaskSystem",["LSPlatformRequestScheduler","MWPlatformTaskUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var e=this;this.$1=a;this.$2=b;this.$3=new(c("LSPlatformRequestScheduler"))();this.$4=d("MWPlatformTaskUtils").checkQueuesWhenPendingTaskTableUpdates(a,function(b){var c=b.queueName;b=b.transportKey;return e.$6(a,c,b,!1)});this.$5=d("MWPlatformTaskUtils").checkQueuesWhenPendingFireForgetTaskTableUpdates(a,function(b){var c=b.queueName;b=b.transportKey;return e.$6(a,c,b,!0)});this.$7()}var e=a.prototype;e.$6=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){yield this.$2.decideWhatToDoWithTask(a,b,c,d)});function c(b,c,d,e){return a.apply(this,arguments)}return c}();e.$7=function(){var a=this;d("MWPlatformTaskUtils").checkAllPendingTasksForWork(this.$1,function(b){b=b.queueName;return a.$6(a.$1,b)})};e.cleanup=function(){this.$4.forEach(function(a){return a()}),this.$5.forEach(function(a){return a()}),this.$2.cleanup()};return a}();g["default"]=a}),98);
__d("LSPlatformClientInit",["LSClearEpochBeforeResumeSync","LSDataTraceFlushDeferred","LSDeleteAllAndInsertConnectivityStatusStoredProcedure","LSFactory","LSIntEnum","LSInternetConnectionState","LSPlatformHardcodedInitSync","LSPlatformLsInitLog","LSPlatformRealtimeTransport","LSPlatformSyncSystemMaybeDeferred","LSPlatformTaskSystemTransport","MWPlatformTaskSystem","MessengerLogHistory","asyncToGeneratorRuntime","cr:3260","cr:3411","emptyFunction","gkx","promiseDone","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("MessengerLogHistory").getInstance("client_init");function j(a){var d=c("emptyFunction");b("cr:3260")!=null&&c("gkx")("23914")&&(d=b("cr:3260").listenForChangesToBackupState(a));return function(){d&&d()}}function k(a,b){var e=b==="Connected"?(h||(h=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").CONNECTED):(h||(h=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").NOT_CONNECTED);c("promiseDone")(a.runInTransaction(function(a){return c("LSDeleteAllAndInsertConnectivityStatusStoredProcedure")(c("LSFactory")(a),{internetConnectionState:e})},"readwrite"))}function a(a,b,c,d,e){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,h){var l;i.debug("Platform client sync starting...");(l=d("LSPlatformLsInitLog")).addPoint("onstart_callback");g();l.addPoint("onstart_callback_end");i.debug("Getting datascript evaluator...");l.addPoint("ds_eval_registration");g=(yield e.getEval());i.debug("Getting datascript evaluator success");var m;try{m=b("cr:3411")!=null?b("cr:3411").registerEval(g)()(a):g()(a)}catch(b){c("recoverableViolation")("fail to register datascriptEvaluator","messenger_web_product",{error:b}),m=g()(a)}d("LSPlatformLsInitLog").addPoint("ds_eval_registration_end");i.debug("Clearing epoch before resume sync...");yield d("LSClearEpochBeforeResumeSync").call(a);i.debug("Clearing epoch before resume sync success");d("LSPlatformLsInitLog").addPoint("create_client_end");e.sendHardcodedInitSync&&(i.debug("Starting hard-coded init sync..."),yield d("LSPlatformHardcodedInitSync").sendHardcodedInitSync(e,m,a,f),i.debug("Starting hard-coded init sync success"));i.debug("Starting realtime transport");var n=d("LSPlatformRealtimeTransport").LSPlatformRealtimeTransport(e.realtimeUnderylingTransport,e.appId,f);i.debug("Starting task system");var o=new(c("MWPlatformTaskSystem"))(a,new(c("LSPlatformTaskSystemTransport"))(a,n,m,e.schemaVersion));i.debug("Starting sync system");var p=null;c("promiseDone")(c("LSPlatformSyncSystemMaybeDeferred")(),function(b){p=b(a,n,m,e.schemaVersion,f,e.executeGraphQLLightSpeedRequest)});i.debug("Starting backup state listeners");var q=j(a),r;i.debug("Watching for expired traces");c("promiseDone")(d("LSDataTraceFlushDeferred").watchForExpiredTraces(a).then(function(a){r=a}));i.debug("Subscribing to mqtt sync status change events");n.onConnectionStatusChange(function(b){k(a,b)});i.debug("Platform client sync starting sucess");return{cleanup:function(){var b;h(a);o==null?void 0:o.cleanup();(b=p)==null?void 0:b.cleanup();n.cleanup();q();r==null?void 0:r()}}});return l.apply(this,arguments)}g.init=a}),98);
__d("LSPlatformDeviceId",["ChannelClientID","FBLogger","LSCookie","MqttWebDeviceID","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){if(c("gkx")("21118"))return c("MqttWebDeviceID").clientID;else return c("ChannelClientID").getID()}b=h();function a(a){a==null&&c("FBLogger")("messenger_browser_clients").info("Missed provider type for deviceId");return a==="persisted"?d("LSCookie").get().d:h()}g.deviceId=b;g.getDeviceIdForProviderType=a}),98);
__d("LSPlatformClient",["ExecutionEnvironment","FBLogger","LSCometSSRDatabase","LSDatabaseProviderType","LSPlatformClientInit","LSPlatformDeviceId","LSPlatformLsInitLog","MAWMICSafe","Promise","asyncToGeneratorRuntime","cr:7473","emptyFunction","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("emptyFunction").thatReturns((i||(i=b("Promise"))).resolve());function k(a,e){var f,g=function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=d("LSPlatformDeviceId").getDeviceIdForProviderType("ephemeral");f=(yield d("LSPlatformClientInit").init(a,e,b,c("emptyFunction"),c("emptyFunction")))});return function(){return g.apply(this,arguments)}}();return{cleanup:function(){var a;(a=f)==null?void 0:a.cleanup()},db:a,start:g}}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(b("cr:7473")==null)throw c("FBLogger")("messenger_web_product").mustfixThrow("LSPlatformClientWithLock is null for PDB enabled");e=(yield b("cr:7473").make(a,e));e.isTabWithoutClient()===!0&&(d("MAWMICSafe").markEvent("ls_init_end"),d("MAWMICSafe").markEvent("occamadillo_thread_mapping_end"),d("MAWMICSafe").addBoolAnnotation("LsInitSkipped",!0),d("LSPlatformLsInitLog").addPoint("no_ls_sync"),d("LSPlatformLsInitLog").endSuccess());return{cleanup:c("emptyFunction"),db:a,start:j}});return m.apply(this,arguments)}function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if((h||(h=c("ExecutionEnvironment"))).canUseDOM){var e=(yield a.getDb());d("LSPlatformLsInitLog").addPoint("create_client_start");if(d("LSDatabaseProviderType").isProviderPersisted(e)&&b("cr:7473")!==null)try{return l(e,a)}catch(a){d("LSPlatformLsInitLog").addAnnotations({string:{client_for_pdb_error:c("getErrorSafe")(a).message}});d("LSPlatformLsInitLog").fail("client_for_pdb_error");throw a}return k(e,a)}return{cleanup:c("emptyFunction"),db:c("LSCometSSRDatabase"),start:j}});return n.apply(this,arguments)}g.make=a}),98);
__d("LSPlatformClientProviderWithImmediateLoadingStrategy.react",["LSPlatformClient","LSPlatformClientProvider.react","Promise","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function k(){return(h||(h=b("Promise"))).resolve({make:d("LSPlatformClient").make})}function a(a){var b=a.children,d=a.errorFallback;a=a.placeholder;return j.jsx(c("LSPlatformClientProvider.react"),{errorFallback:d,loadLSPlatformClient:k,placeholder:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDOverLSMqttChannel",["CurrentUser","Env","MqttChannel","MqttEnv","MqttEnvInitializer","MqttWebConfig","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;c("MqttEnvInitializer").initialize();function j(a){d("MqttEnv").setIsUserLoggedInNow(c("CurrentUser").isLoggedIn);var b=c("CurrentUser").getAppID()==null?936619743392459:Number(c("CurrentUser").getAppID());return new(c("MqttChannel"))({appId:b,capabilities:c("MqttWebConfig").capabilities,chatVisibility:!0,clientCapabilities:c("MqttWebConfig").clientCapabilities,clientType:"cookie_auth",deviceId:a,endpoint:(i||(i=c("Env"))).ig_mqtt_wss_endpoint||"wss://edge-chat.instagram.com/chat",initialSubscribedTopics:c("MqttWebConfig").subscribedTopics,phpOverride:c("MqttWebConfig").hostNameOverride,pollingEndpoint:(i||(i=c("Env"))).ig_mqtt_polling_endpoint||"https://edge-chat.instagram.com/mqtt/pull",userFbid:c("CurrentUser").getPossiblyNonFacebookUserID()})}var k=null,l;function m(a){k==null&&(k=j(a));a=k;l==null?void 0:l(a);return a}function a(){return new(h||(h=b("Promise")))(function(a){k?a(m()):l=function(b){a(b)}})}function e(){k!=null&&(k.shutdown(),k=null)}g.getInstance=m;g.waitAndGetInstance=a;g.shutdownAndClear=e}),98);
__d("LSDatascriptEvaluatorMaybeDeferred",["cr:6586"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:6586")}),98);
__d("LSDedicatedMqttChannel",["FBMqttChannel","cr:1232"],(function(a,b,c,d,e,f,g){"use strict";function a(){b("cr:1232")!=null&&b("cr:1232").shutdownAndClear()}function d(a,d,e,f){return function(g){if(b("cr:1232")!=null)return b("cr:1232").getInstance(g,a,d,e,f);else return c("FBMqttChannel")}}g.shutdownAndClear=a;g.getInstance=d}),98);
__d("LSPlatformDefaultUnderlyingApi",["Promise","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return c("emptyFunction")}function d(){return(h||(h=b("Promise"))).resolve()}e={cleanup:c("emptyFunction"),onConnectionStatusChange:a,onReconnect:a,publish:d,subscribe:a};g["default"]=e}),98);
__d("shouldStubUnderlyingTransport",["ExecutionEnvironment"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return!(h||(h=c("ExecutionEnvironment"))).canUseDOM&&!(h||(h=c("ExecutionEnvironment"))).isInWorker}g["default"]=a}),98);
__d("LSPlatformMqttRealtimeTransport",["I64","LSDedicatedMqttChannel","LSIntEnum","LSPlatformDefaultUnderlyingApi","LSPlatformRealtimeTransport","Promise","promiseDone","shouldStubUnderlyingTransport"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a){return[{payload:JSON.stringify({ls_fdid:"",ls_sv:a}),qos:1,topic:"/ls_app_settings"}]}function l(a){var e={contents:a.getConnectionState()},f={contents:function(){}},g={contents:new(j||(j=b("Promise")))(function(a,b){f.contents=a})},k={onMQTTStateChanged:function(a){a==="Connected"?f.contents():a==="Disconnected"&&e.contents==="Connected"&&(g.contents=new(j||(j=b("Promise")))(function(a,b){f.contents=a})),e.contents=a}};e.contents==="Connected"&&f.contents();a.subscribeChannelEvents(k);return[function(){a.unsubscribeChannelEvents(k)},function(e,f){return g.contents.then(function(){return new(j||(j=b("Promise")))(function(b,g){c("promiseDone")(a.publish("/ls_req",e,{listener:{onEvent:function(a){if(a==="NOT_CONNECTED")return g({RE_EXN_ID:d("LSPlatformRealtimeTransport").NotConnected})}},qos:(h||(h=d("I64"))).equal(f,(i||(i=d("LSIntEnum"))).ofNumber(4))?0:1,skipBuffer:!1}),function(){return b()},function(a){if(a.message==="Publish Timed Out")return g({RE_EXN_ID:d("LSPlatformRealtimeTransport").Timeout});else return g(a)})})})}]}var m={contents:void 0};function a(a,b,e){if(c("shouldStubUnderlyingTransport")())return c("LSPlatformDefaultUnderlyingApi");var f=e(b),g={getPublishMessages:function(){return k(a)}};f.registerExtraConnectPayloadProvider(g);var h={onMQTTStateChanged:function(a){var b=m.contents;if(b!=null)return b(a)}};f.subscribeChannelEvents(h);var i=f.subscribe("/ls_foreground_state",function(){});e=l(f);var j=e[0];b=e[1];return{cleanup:function(){f.unregisterExtraConnectPayloadProvider(g),d("LSDedicatedMqttChannel").shutdownAndClear(),f.unsubscribeChannelEvents(h),i(),j()},onConnectionStatusChange:function(a){m.contents=a;return function(){m.contents=void 0}},onReconnect:function(a){var b={contents:f.getConnectionState()},c={contents:b.contents==="Connected"},d={onMQTTStateChanged:function(d){d==="Connected"&&(c.contents&&b.contents!=="Connected"&&a(),c.contents=!0),b.contents=d}};f.subscribeChannelEvents(d);return function(){f.unsubscribeChannelEvents(d)}},publish:b,subscribe:function(a){return f.subscribe("/ls_resp",function(b){return a(b)})}}}g["default"]=a}),98);
__d("LSVersion",[],(function(a,b,c,d,e,f){e.exports="7321406344563051"}),null);
__d("getMWLSRegion",["MessengerWebRegion","gkx","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("MessengerWebRegion").regionNullable;if(a==null){if(c("gkx")("26393"))throw c("unrecoverableViolation")("Tried to load mailbox for a user that does not have a mailbox","messenger_web_product");return""}return a}g["default"]=a}),98);
__d("LSPlatformInstagramConfig",["CurrentUser","IGDOverLSMqttChannel","LSDatabaseSingleton","LSDatascriptEvaluatorMaybeDeferred","LSPlatformGraphQLLightspeedRequestForIGD","LSPlatformMessengerSyncParams","LSPlatformMqttRealtimeTransport","LSSuspense","LSVersion","getMWLSRegion"],(function(a,b,c,d,e,f,g){"use strict";var h,i;f=c("CurrentUser").getAppID();var j=c("getMWLSRegion")();f=f==null?"1217981644879628":f;function a(){return(i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton}function b(a,b){return c("LSPlatformMqttRealtimeTransport")(c("LSVersion"),b,d("IGDOverLSMqttChannel").getInstance)}function e(){return c("LSDatascriptEvaluatorMaybeDeferred")()}f={appId:f,executeGraphQLLightSpeedRequest:c("LSPlatformGraphQLLightspeedRequestForIGD"),getDb:a,getEval:e,platformName:"Instagram",realtimeUnderylingTransport:b,region:j,schemaVersion:c("LSVersion"),sendHardcodedInitSync:!0,syncParams:c("LSPlatformMessengerSyncParams")};a=(h||(h=c("LSSuspense"))).makeWithValue(f);g.configEagerlyLoaded=a}),98);
__d("IGDPageSetup.react",["CometErrorBoundary.react","CometPlaceholder.react","CurrentUser","I64","IGDRouteProvider.react","LSPlatformClientProviderWithDeferredLoadingStrategy.react","LSPlatformClientProviderWithImmediateLoadingStrategy.react","LSPlatformConfigContext","LSPlatformInstagramConfig","MWLSThreadDisplayContext","MWPActor.react","cr:497","cr:7347","deferredLoadComponent","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));e=h;var k=e.Fragment,l=e.unstable_useMemoCache,m=(f=b("cr:497"))!=null?f:b("cr:7347"),n=c("deferredLoadComponent")(c("requireDeferred")("IGDInboxErrorState.react").__setRef("IGDPageSetup.react")),o=function(a){return a?void 0:function(a){return j.jsx(n,{error:a})}},p=(i||(i=d("I64"))).of_string(c("CurrentUser").getEIMU());function a(a){var b=l(14),e=a.children,f=a.disableRouteProvider,g=a.placeholder;a=a.shouldUseDeferredLoadingStrategy;f=f===void 0?!1:f;g=g===void 0?null:g;a=a===void 0?!1:a;var h=a?c("LSPlatformClientProviderWithDeferredLoadingStrategy.react"):c("LSPlatformClientProviderWithImmediateLoadingStrategy.react");f=f?k:d("IGDRouteProvider.react").IGDRouteProvider;var i;b[0]!==a?(i=o(a),b[0]=a,b[1]=i):i=b[1];b[2]!==e?(a=m==null?e:j.jsx(m,{children:e}),b[2]=e,b[3]=a):a=b[3];b[4]!==a?(e=j.jsx(d("MWLSThreadDisplayContext").MWLSThreadDisplayContextProvider,{value:"Inbox",children:a}),b[4]=a,b[5]=e):e=b[5];b[6]!==f||b[7]!==e?(a=j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(d("MWPActor.react").MWPActorProvider,{actorId:p,children:j.jsx(f,{children:e})})}),b[6]=f,b[7]=e,b[8]=a):a=b[8];b[9]!==h||b[10]!==i||b[11]!==g||b[12]!==a?(f=j.jsx(c("CometErrorBoundary.react"),{fallback:void 0,children:j.jsx(d("LSPlatformConfigContext").LSPlatformConfigProvider,{config:d("LSPlatformInstagramConfig").configEagerlyLoaded,children:j.jsx(h,{errorFallback:i,placeholder:g,children:a})})}),b[9]=h,b[10]=i,b[11]=g,b[12]=a,b[13]=f):f=b[13];return f}g["default"]=a}),98);
__d("LSPlatformClientDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";a=c("requireDeferred")("LSPlatformClient").__setRef("LSPlatformClientDeferred");b=a;g["default"]=b}),98);
__d("LSPlatformLogTooManyPendingTasksForS337085.react",["FBLogger","MWPBumpEntityKey","ReQL","clearTimeout","gkx","justknobx","promiseDone","react","setTimeout","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useEffect,k=b.useRef,l=c("justknobx")._("1134"),m=c("justknobx")._("1135"),n=c("gkx")("24156");function a(){var a=(h||(h=c("useReStore")))(),b=k(null),e=k(!1);j(function(){var f=a.table("pending_tasks").subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.pending_tasks).take(l)),function(a){var f=a.length;if(f===l){if(b.current!=null)return;b.current=c("setTimeout")(function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","tasks_table_above_threshold"),e.current=!0,n&&c("FBLogger")("lsplatform_tasks","tasks_table_above_threshold").warn("pending tasks table is above threshold. It has %s tasks after %s ms",f,m)},m)}else c("clearTimeout")(b.current),e.current&&n&&c("FBLogger")("lsplatform_tasks","tasks_table_cleared").warn("pending tasks table is now cleared"),e.current=!1})});return function(){f()}},[a]);return null}g["default"]=a}),98);
__d("XPlatReactVoprf.shared",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.message=b;return c}return b}(babelHelpers.wrapNativeSuper(Error));f.VoprfWasmError=a}),66);
__d("mapVoprfWasmError",["XPlatReactVoprf.shared"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case-1:return new h();case 1:return new i();case 2:return new j();case 3:return new k();case 4:return new l();default:return new m()}}var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Unknown error encountered by VOPRF WASM");a=b.call(this,a)||this;a.name="VoprfUnknownError";return a}return a}((b=d("XPlatReactVoprf.shared")).VoprfWasmError),i=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Incorrect buffer length encountered by VOPRF WASM");a=b.call(this,a)||this;a.name="VoprfBufferLengthError";return a}return a}(b.VoprfWasmError),j=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Error while performing curve operation by VOPRF WASM");a=b.call(this,a)||this;a.name="VoprfCurveOperationError";return a}return a}(b.VoprfWasmError),k=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Error while performing hash operation by VOPRF WASM");a=b.call(this,a)||this;a.name="VoprfHashOperationError";return a}return a}(b.VoprfWasmError),l=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Error while performing proof operation by VOPRF WASM");a=b.call(this,a)||this;a.name="VoprfProofError";return a}return a}(b.VoprfWasmError),m=function(b){babelHelpers.inheritsLoose(a,b);function a(a){a===void 0&&(a="Unknown error code received from WASM binary");a=b.call(this,a)||this;a.name="UnknownErrorCode";return a}return a}(b.VoprfWasmError);g.mapVoprfWasmError=a;g.VoprfUnknownError=h;g.VoprfBufferLengthError=i;g.VoprfCurveOperationError=j;g.VoprfHashOperationError=k;g.VoprfProofError=l;g.UnknownErrorCode=m}),98);
__d("VoprfWasmBuilder",["Promise","err","mapVoprfWasmError"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return function(c){return i({locateFile:a,wasmBinary:c},b)}}function i(a,e){return new(h||(h=b("Promise")))(function(b,f){e(a).then(function(a){var e=a._sodiumInit();e!==0&&f(c("err")("Failed to initialize Sodium!"));b({createCurveRistretto:function(){var b=a._curve_create();a._curve_init_ristretto(b);return b},freeCurve:function(b){a._curve_free(b)},createVoprfExpTwohashdh:function(b){var c=a._voprf_create();a._voprf_init_exp_twohashdh(c,b);return c},freeVoprf:function(b){a._voprf_free(b)},getCurveBytes:function(b){return a._get_curve_element_bytes(b.curvePtr)},getCurveScalarBytes:function(b){return a._get_curve_scalar_bytes(b.curvePtr)},blind:function(b,c){var e=a._get_curve_element_bytes(b.curvePtr),f=a._get_curve_scalar_bytes(b.curvePtr),g=a._malloc(e),h=a._malloc(f),i=k(a,c);b=a._blind(b.voprfPtr,g,e,h,f,i,c.length);if(b!==0)throw d("mapVoprfWasmError").mapVoprfWasmError(b);c=j(a,g,e);b=j(a,h,f);a._free(g);a._free(h);a._free(i);return{blindedElement:c,blindingFactor:b}},verifiableUnblind:function(b,c,e,f,g,h,i,l){var m=c?k(a,c):null,n=e?k(a,e):null,o=k(a,h),p=k(a,f),q=k(a,g),r=k(a,i),s=a._get_curve_element_bytes(b.curvePtr),t=a._malloc(s);b=a._verifiable_unblind(b.voprfPtr,t,s,m,c?c.length:0,n,e?e.length:0,p,f.length,q,g.length,o,h.length,r,i.length,+l);if(b!==0)throw d("mapVoprfWasmError").mapVoprfWasmError(b);c=j(a,t,s);m!==null&&a._free(m);n!==null&&a._free(n);a._free(o);a._free(p);a._free(q);a._free(r);a._free(t);return{unblindedElement:c}},clientFinalize:function(b,c,e){var f=k(a,c),g=k(a,e),h=a._get_voprf_final_evaluation_bytes(b.voprfPtr),i=a._malloc(h);b=a._voprf_client_finalize(b.voprfPtr,i,h,f,c.length,g,e.length);if(b!==0)throw d("mapVoprfWasmError").mapVoprfWasmError(b);c=j(a,i,h);a._free(f);a._free(g);a._free(i);return{finalEvaluation:c}},setup:function(b){var c=a._get_curve_scalar_bytes(b.curvePtr),e=a._get_curve_element_bytes(b.curvePtr),f=a._malloc(c),g=a._malloc(e);b=a._voprf_setup(b.voprfPtr,g,e,f,c);if(b!==0)throw d("mapVoprfWasmError").mapVoprfWasmError(b);b=j(a,g,e);e=j(a,f,c);a._free(f);a._free(g);return{sk:b,pk:e}},evaluate:function(b,c,e,f){var g=a._get_curve_element_bytes(b.curvePtr),h=a._malloc(g),i=f?a._get_curve_scalar_bytes(b.curvePtr):0,l=i>0?a._malloc(i):null,m=f?a._get_curve_scalar_bytes(b.curvePtr):0,n=m>0?a._malloc(m):null,o=k(a,e),p=k(a,c);b=a._voprf_evaluate(b.voprfPtr,h,g,l,i,n,m,p,c.length,o,e.length,+f);if(b!==0)throw d("mapVoprfWasmError").mapVoprfWasmError(b);c=l!==null?j(a,l,i):null;e=n!==null?j(a,n,m):null;f=j(a,h,g);a._free(h);a._free(p);l!==null&&a._free(l);n!==null&&a._free(n);a._free(o);return{proofC:c,proofS:e,evaluatedElement:f}},serverFinalize:function(b,c,e){var f=k(a,c),g=k(a,e),h=a._get_voprf_final_evaluation_bytes(b.voprfPtr),i=a._malloc(h);b=a._voprf_server_finalize(b.voprfPtr,i,h,f,c.length,g,e.length);if(b!==0)throw d("mapVoprfWasmError").mapVoprfWasmError(b);c=j(a,i,h);a._free(f);a._free(g);a._free(i);return{finalEvaluation:c}}})})["catch"](function(a){throw c("err")("Failed to initialize wasm module, "+a)})})}function j(a,b,c){var d=new Uint8Array(c);for(var e=0;e<c;++e)d[e]=a.getValue(e+b,"i8");return d}function k(a,b){var c=b.length;c=a._malloc(c);a.writeArrayToMemory(b,c);return c}g["default"]=a}),98);
__d("LSVoprfWasm",["VoprfWasmBuilder","bx","ls_voprf_utils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){return c("bx").getURL(c("bx")("11329"))};b=c("VoprfWasmBuilder")(a,c("ls_voprf_utils"));d=b;g["default"]=d}),98);
__d("TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE",["Env","TrustedTypes","err"],(function(a,b,c,d,e,f,g){"use strict";var h;d={createScript:function(a){for(var b=arguments.length,d=new Array(b>1?b-1:0),e=1;e<b;e++)d[e-1]=arguments[e];d.forEach(function(a){if(typeof window!=="undefined"&&typeof window.trustedTypes!=="undefined"&&!window.trustedTypes.isScript(a))throw c("err")("Trusted Function requires TrustedScripts args only.")});var f=d.slice(0,-1).join(","),g=d.pop().toString();return"(function anonymous(\n     "+f+"\n     ) {\n     "+g+"\n     })"}};var i=c("TrustedTypes").createPolicy("unsafe-function-do-not-use",d);function b(){for(var b=arguments.length,d=new Array(b),e=0;e<b;e++)d[e]=arguments[e];if(c("TrustedTypes").isSupportedNatively()&&(h||(h=c("Env"))).useTrustedTypes){var f=i.createScript.apply(i,[""].concat(d));return a.eval(f)}else return babelHelpers.construct(Function,d)}g.TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE=i;g.createTrustedFunction=b}),98);
/**
 * License: https://www.facebook.com/legal/license/ZMc_bSwzLKC/
 */
__d("ristretto255-0.1.1",["tweetnacl-1.0.3"],(function(a,b,c,d,e,f,g){var h=c("tweetnacl-1.0.3")();Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:function(a,b){return new Uint8Array(Array.prototype.slice.call(this,a,b))}});c={};var i=h.lowlevel,j=i.gf([1]);function k(){return[i.gf(),i.gf(),i.gf(),i.gf()]}var l=new Uint8Array([226,242,174,10,106,188,78,113,168,132,169,97,197,0,81,95,88,227,11,106,165,130,221,141,182,166,89,69,224,141,45,118]),m=new Float64Array([235,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function n(a,b,c){var d=new Float64Array(64);for(var e=0;e<32;e++)for(var f=0;f<32;f++)d[e+f]+=b[e]*c[f];i.modL(a,d)}function o(a,b){n(a,b,b)}function p(a,b){for(var c=0;c<32;c++)a[c]=b[c];for(c=251;c>=0;c--)o(a,a),(m[c>>3]>>(c&7)&1)!==0&&n(a,a,b)}var q=i.gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]),r=i.gf([11803,18811,63136,32407,21693,7032,36364,44957,53757,12789,64713,3900,18604,11139,12735,14185]),s=i.gf([16618,32861,64938,39368,29374,23105,5655,40239,55360,65025,31633,5826,64674,53167,35077,30828]),t=i.gf([49526,37983,2497,57980,13583,52574,41272,11393,57316,48752,43997,39316,57559,45747,29352,656]),u=i.gf([19744,17645,23210,12717,6553,45086,18988,53918,20203,21147,54063,19676,8769,63084,45946,22888]);function v(a){var b=new Uint8Array(32);i.pack25519(b,a);a=1;for(var c=0;c<32;c++)a&=b[c]===0;return a}function w(a,b,c){var d;c=-c;for(var e=0;e<16;e++)d=a[e]^b[e],d&=c,a[e]^=d}function x(a){var b=new Uint8Array(32);i.pack25519(b,a);return b[0]&1}function y(a,b){i.Z(a,i.gf(),b)}function z(a,b,c){var d=i.gf();y(d,b);i.set25519(a,b);w(a,d,c)}function A(a,b){z(a,b,x(b))}function B(a,b,c){var d=i.gf(),e=i.gf(),f=i.gf(),g=i.gf(),h=i.gf(),j=i.gf();i.S(d,c);i.M(d,d,c);i.S(a,d);i.M(a,a,c);i.M(a,a,b);i.pow2523(a,a);i.M(a,a,d);i.M(a,a,b);i.S(e,a);i.M(e,e,c);i.Z(f,e,b);i.A(g,e,b);i.M(h,b,q);i.A(h,e,h);d=v(f);c=v(g);b=v(h);i.M(j,a,q);w(a,j,c|b);A(a,a);return d|c}function C(a){var b=i.gf(),c=i.gf(),d=i.gf(),e=i.gf(),f=i.gf(),g=i.gf(),h=i.gf(),k=i.gf(),l=i.gf(),m=i.gf(),n=i.gf(),o=i.gf(),p=i.gf(),r=i.gf(),t=i.gf(),u=i.gf(),v=i.gf(),y=0,C=new Uint8Array(32);i.A(m,a[2],a[1]);i.Z(v,a[2],a[1]);i.M(m,m,v);i.M(n,a[0],a[1]);i.S(o,n);i.M(o,m,o);B(f,j,o);i.M(b,f,m);i.M(c,f,n);i.M(u,b,c);i.M(u,u,a[3]);i.M(g,a[0],q);i.M(h,a[1],q);i.M(e,b,s);i.M(l,a[3],u);y=x(l);p=i.gf(a[0]);r=i.gf(a[1]);d=i.gf(c);w(p,h,y);w(r,g,y);w(d,e,y);i.M(t,p,u);z(r,r,x(t));i.Z(k,a[2],r);i.M(k,d,k);A(k,k);i.pack25519(C,k);return C}function D(a){var b=a[31]&127^127;for(var c=30;c>0;c--)b|=a[c]^255;b=(b|0>>>0)-1>>8;c=237-1-(a[0]|0>>>0)>>8;return 1-((b&c|a[0])&1|(a[31]&255)>>7)}function E(a,b){var c=i.gf(),d=i.gf(),e=i.gf(),f=i.gf(),g=i.gf(),h=i.gf(),k=i.gf(),l=i.gf(),m=i.gf(),n=i.gf();if(D(b)===0)return-1;i.unpack25519(e,b);i.S(f,e);i.set25519(g,j);i.Z(g,g,f);i.S(k,g);i.set25519(h,j);i.A(h,h,f);i.S(l,h);i.M(m,i.D,k);y(m,m);i.Z(m,m,l);i.M(n,m,l);i.set25519(d,j);b=B(c,d,n);i.M(a[0],c,h);i.M(a[1],c,a[0]);i.M(a[1],a[1],m);i.M(a[0],a[0],e);i.A(a[0],a[0],a[0]);A(a[0],a[0]);i.M(a[1],g,a[1]);i.set25519(a[2],j);i.M(a[3],a[0],a[1]);return-(1-b|x(a[3])|v(a[1]))}function F(a,b){var c=i.gf(),d=i.gf(),e=i.gf(),f=i.gf(),g=i.gf(),h=i.gf(),k=i.gf(),l=i.gf(),m=i.gf(),n=i.gf(),o=i.gf(),p=i.gf(),s=i.gf(),v=i.gf();i.set25519(e,j);i.S(f,b);i.M(f,q,f);i.A(m,f,e);i.M(m,m,t);i.set25519(c,j);y(c,c);i.A(g,f,i.D);i.M(n,f,i.D);i.Z(n,c,n);i.M(n,n,g);g=1-B(h,m,n);i.M(k,h,b);A(k,k);y(k,k);w(h,k,g);w(c,f,g);i.Z(d,f,e);i.M(d,d,c);i.M(d,d,u);i.Z(d,d,n);i.A(o,h,h);i.M(o,o,n);i.M(p,d,r);i.S(l,h);i.Z(s,e,l);i.A(v,e,l);i.M(a[0],o,v);i.M(a[1],s,p);i.M(a[2],p,v);i.M(a[3],o,s)}function G(a){var b=i.gf(),c=i.gf(),d=k(),e=k();i.unpack25519(b,a.slice(0,32));i.unpack25519(c,a.slice(32,64));F(d,b);F(e,c);i.add(d,e);return d}function a(a){var b=k();i.scalarbase(b,a);return C(b)}function b(a,b){var c=k(),d=k();if(E(c,b)!==0)throw new Error("Invalid argument");i.scalarmult(d,c,a);return C(d)}function d(a){var b=k();return E(b,a)===-1?!1:!0}function H(a,b){var c=k(),d=k();if(E(c,a)===-1)throw new Error("Invalid argument");if(E(d,b)===-1)throw new Error("Invalid argument");return[c,d]}function e(a,b){a=H(a,b);b=a[0];a=a[1];i.add(b,a);return C(b)}function I(a,b){var c=i.gf();y(c,b[3]);var d=i.gf();y(d,b[0]);d=[d,b[1],b[2],c];i.add(a,d)}function g(a,b){a=H(a,b);b=a[0];a=a[1];I(b,a);return C(b)}function J(){var a=h.randomBytes(64);return G(a)}function K(a){return C(G(a))}function L(){return C(J())}function M(){var a;new Uint8Array(32);var b=0;do{a=h.randomBytes(32);a[31]&=31;var c=32,d=1;do c--,b|=a[c]-i.L[c]>>8&d,d&=(a[c]^i.L[c])-1>>8;while(c!==0)}while(b===0);return a}function N(a){var b=new Uint8Array(32);p(b,a);return b}function O(a){var b=new Float64Array(64);for(var c=0;c<32;c++)b[c]=-a[c];c=new Uint8Array(32);i.modL(c,b);return c}function P(a,b){var c=new Float64Array(64);for(var d=0;d<32;d++)c[d]=a[d]+b[d];d=new Uint8Array(32);i.modL(d,c);return d}function Q(a,b){return P(a,O(b))}function R(a,b){var c=new Uint8Array(32);n(c,a,b);return c}c.scalarMultBase=a;c.scalarMult=b;c.isValid=d;c.add=e;c.sub=g;c.fromHash=K;c.getRandom=L;c.basePoint=l;c.scalar={};c.scalar.getRandom=M;c.scalar.invert=N;c.scalar.negate=O;c.scalar.add=P;c.scalar.sub=Q;c.scalar.mul=R;c.unsafe={};c.unsafe.point={};c.unsafe.point.toBytes=C;c.unsafe.point.fromBytes=E;c.unsafe.point.fromHash=G;c.unsafe.point.sub=I;c.unsafe.point.add=i.add;c.unsafe.point.scalarMultBase=i.scalarbase;c.unsafe.point.scalarMult=i.scalarmult;c.unsafe.point.getRandom=J;c.unsafe.point.alloc=k;c.unsafe.constants={};c.unsafe.constants.LSub2=m;c.unsafe.constants.sqrtm1=q;c.unsafe.constants.sqrtadm1=r;c.unsafe.constants.invsqrtamd=s;c.unsafe.constants.onemsqd=t;c.unsafe.constants.sqdmone=u;f.exports=c}),34);
__d("ristretto255",["ristretto255-0.1.1"],(function(a,b,c,d,e,f){e.exports=b("ristretto255-0.1.1")}),null);
__d("LsDataTraceFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743851");b=d("FalcoLoggerInternal").create("ls_data_trace",a);e=b;g["default"]=e}),98);
__d("MebClientLogsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3226");b=d("FalcoLoggerInternal").create("meb_client_logs",a);e=b;g["default"]=e}),98);
__d("LSJSONOp",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({BLOCK:1,LOAD:2,STORE:3,STORE_ARRAY:4,CALL_STORED_PROCEDURE:5,CALL_NATIVE_TYPE_OPERATION:6,CALL_NATIVE_OPERATION:7,LIST:8,UNDEFINED:9,INFINITY:10,NAN:11,RETURN:12,BOOL_TO_STR:13,BLOBS_TO_STRING:14,BLOBS_OF_STRING:15,TO_BLOB:16,I64_OF_FLOAT:17,I64_TO_FLOAT:18,I64_FROM_STRING:19,I64_TO_STRING:20,READ_GK:21,READ_QE:22,IF:23,OR:24,AND:25,NOT:26,IS_NULL:27,ENFORCE_NOT_NULL:28,GENERIC_EQUAL:29,I64_EQUAL:30,BLOB_EQUAL:31,GENERIC_NOT_EQUAL:32,I64_NOT_EQUAL:33,BLOB_NOT_EQUAL:34,GENERIC_GREATER_THAN:35,I64_GREATER_THAN:36,BLOB_GREATER_THAN:37,GENERIC_GREATER_THAN_OR_EQUAL:38,I64_GREATER_THAN_OR_EQUAL:39,BLOB_GREATER_THAN_OR_EQUAL:40,GENERIC_LESS_THAN:41,I64_LESS_THAN:42,BLOB_LESS_THAN:43,GENERIC_LESS_THAN_OR_EQUAL:44,I64_LESS_THAN_OR_EQUAL:45,BLOB_LESS_THAN_OR_EQUAL:46,THROW:47,LOG_CONSOLE:48,LOGGER_LOG:49,NATIVE_OP_ARRAY_CREATE:50,NATIVE_OP_ARRAY_APPEND:51,NATIVE_OP_ARRAY_GET_SIZE:52,NATIVE_OP_MAP_CREATE:53,NATIVE_OP_MAP_GET:54,NATIVE_OP_MAP_SET:55,NATIVE_OP_MAP_KEYS:56,NATIVE_OP_MAP_DELETE:57,NATIVE_OP_MAP_HAS:58,NATIVE_OP_STR_JOIN:59,NATIVE_OP_CURRENT_TIME:60,NATIVE_OP_JSON_STRINGIFY:61,NATIVE_OP_RNG_NUM:62,NATIVE_OP_LOCALIZATION_SUPPORTED:63,NATIVE_OP_LOCALIZATION_SUPPORTED_V2:64,NATIVE_OP_RESOLVE_LOCALIZED:65,NATIVE_OP_RESOLVE_LOCALIZED_V2:66,ADD:68,I64_ADD:69,I64_CAST:70,READ_JUSTKNOB:71,READ_IGGK:72,GET_RUN_MODE:73,STR_TRIM:74,STR_REPLACE:75,JOIN:76,STR_LIKE:77,LENGTH:78,IN:79,IN_VEC:80,SUB:81,MUL:82,DIV:83,MOD:84,I64_SUB:85,I64_MUL:86,I64_DIV:87,I64_MOD:88,I64_IN:89,I64_IN_VEC:90,BITWISE_LEFT_SHIFT:91,BITWISE_RIGHT_SHIFT:92,ARITHMETIC_RIGHT_SHIFT:93,BITWISE_AND:94,BITWISE_OR:95,BITWISE_XOR:96,TERNARY:97,XOR:98,NULLISH_COALESE:99,READ_COLUMN:100,READ_COLUMN_REF:101,READ_GROUP_COUNT:102,COMMENT:103,IMPORT:104,LOOP:105,QUERY_COMPARISON_EQUAL:106,QUERY_COMPARISON_NOT_EQUAL:107,QUERY_COMPARISON_GREATER_THAN:108,QUERY_COMPARISON_GREATER_THAN_OR_EQUAL:109,QUERY_COMPARISON_LESS_THAN:110,QUERY_COMPARISON_LESS_THAN_OR_EQUAL:111,QUERY_MERGE_CONSTRAINTS:112,QUERY_FETCH_ROWS:113,QUERY_FILTER_ROWS:114,QUERY_SORT_ROWS_BY:115,QUERY_DELETE_ROWS:116,QUERY_SLICE_ROWS:117,QUERY_COUNT_ROWS:118,QUERY_PEEK_NEXT_ROW_ID:119,QUERY_UPDATE_ROWS:120,QUERY_INSERT_ROWS:121,QUERY_PUT_ROWS:122,QUERY_FOREACH_ROW:123,QUERY_SELECT_MATCH_ROW:124,QUERY_CURSOR_SLICE:125,QUERY_GROUP_BY:126,SUB_STRING:127});c=a;f["default"]=c}),66);
__d("LSSelectOrder",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["ASC","DESC"]);c=a;f["default"]=c}),66);
__d("LSACSExperimentCapability",[],(function(a,b,c,d,e,f){a=Object.freeze({RETRY_AFTER_TASK_SERIALIZATION_FAILURE_EXPONENTIAL_BACKOFF:0,BUMP_TOKEN_SYNC_TASK_AT_TASK_SERIALIZATION:1,INSERT_PENDING_TASK_PARENT_ROW_WHEN_NO_ACS_TOKENS_AT_TASK_INSERTION:2});f["default"]=a}),66);
__d("LSRemoveBlindedTokens",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(308).fetch(),function(b){return b.configId===a[0]}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSRemoveUsedTokens",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.forEach(b.filter(b.db.table(309).fetch(),function(a){return b.i64.le(a.redeemLimit,b.i64.cast([0,0]))}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSGetCurrentTokenPoolState",["LSArrayGetObjectAt","LSRemoveBlindedTokens","LSRemoveUsedTokens"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),d[1]=c.createArray(),c.count(c.filter(c.db.table(307).fetch(),function(b){return b.projectName===a[0]})).then(function(a){return d[2]=a})},function(b){return c.forEach(c.filter(c.db.table(307).fetch(),function(b){return b.projectName===a[0]}),function(a){a=a.item;return d[7]=a.configId,c.i64.gt(d[0],a.expirationTimestampMs)?c.forEach(c.db.table(307).fetch([[[d[7]]]]),function(a){return a["delete"]()}):c.resolve(d[8]=(d[1].push(d[7]),d[1]))})},function(a){return c.storedProcedure(b("LSRemoveUsedTokens"))},function(a){return d[3]=c.i64.cast([0,0]),d[4]=c.i64.of_int32(d[1].length),c.i64.gt(d[4],c.i64.cast([0,0]))?c.loopAsync(d[4],function(a){return d[7]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[1],d[7]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],a})},function(a){return c.count(c.filter(c.db.table(309).fetch(),function(a){return a.configId===d[8]})).then(function(a){return d[10]=a})},function(a){return d[3]=c.i64.add(d[10],d[3]),c.storedProcedure(b("LSRemoveBlindedTokens"),d[8])}])}):c.resolve()},function(a){return c.i64.gt(d[2],c.i64.cast([0,0]))?(d[7]=c.i64.of_int32(d[1].length),d[5]=c.i64.ge(d[7],c.i64.cast([0,1]))):d[5]=void 0,d[5]!==void 0?(d[5]?(c.i64.gt(d[3],c.i64.cast([0,0]))?d[8]=c.i64.cast([0,3]):d[8]=c.i64.cast([0,2]),d[7]=d[8]):d[7]=c.i64.cast([0,1]),d[6]=d[7]):d[6]=c.i64.cast([0,0]),a=[d[6],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSIssueNextSync",["LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.count(c.filter(c.db.table(310).fetch(),function(b){return b.projectName===a[1]})).then(function(a){return d[0]=a})},function(e){return c.i64.gt(d[0],c.i64.cast([0,0]))&&a[3]===!0?c.resolve(0):c.sequence([function(b){return c.forEach(c.filter(c.db.table(310).fetch(),function(b){return b.projectName===a[1]}),function(a){return a["delete"]()})},function(e){return c.i64.gt(a[2],c.i64.cast([0,0]))?(d[3]=c.i64.of_float(Date.now()),d[1]=c.i64.add(d[3],a[2])):d[1]=c.i64.cast([0,0]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),["acs_sync","_",a[1]].join(""),c.i64.cast([0,362]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[1],c.i64.cast([0,0])).then(function(a){return a=a,d[2]=a[0],a})},function(b){return c.db.table(310).add({taskId:d[2],projectName:a[1],maxClientTokenPoolSize:a[0]})}])}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("Base64Utils",["XPlatReactTextEncoder","base64Binary"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("base64Binary").encode(new(d("XPlatReactTextEncoder").TextEncoder)().encode(a))}function b(a){return d("base64Binary").encode(new Uint8Array(a))}function c(a){return d("base64Binary").decode(a).buffer}g.encodeUnicode=a;g.fromArrayBuffer=b;g.toArrayBuffer=c}),98);
__d("LSBase64Encode.nop",["Base64Utils","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f){return(h||(h=b("Promise"))).resolve(c("LSResult")(f?d("Base64Utils").fromArrayBuffer(f):void 0))};g["default"]=a}),98);
__d("XPlatReactVoprf",["asyncToGeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("LSVoprfWasm").__setRef("XPlatReactVoprf"),i=null;function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(i==null){var a=(yield h.load());a=(yield a());var b=a.createCurveRistretto(),c=a.createVoprfExpTwohashdh(b);i={voprfInfo:{curvePtr:b,voprfPtr:c},voprfWasm:a}}return i});return j.apply(this,arguments)}g.loadXPlatReactVoprf=a}),98);
__d("LSVoprfBlind.nop",["XPlatReactVoprf","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=(yield d("XPlatReactVoprf").loadXPlatReactVoprf());b=a.voprfInfo;a=a.voprfWasm;a=a.blind(b,new Uint8Array(c));return[a.blindedElement.buffer,a.blindingFactor.buffer]});function c(b,c,d){return a.apply(this,arguments)}return c}();g["default"]=a}),98);
__d("LSVoprfCreateNonce.nop",["XPlatReactCrypto","XPlatReactVoprf","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("XPlatReactVoprf").loadXPlatReactVoprf());b=a.voprfInfo;a=a.voprfWasm;a=a.getCurveBytes(b);b=new Uint8Array(a);d("XPlatReactCrypto").getRandomValues(b);return[b.buffer]});function c(b,c){return a.apply(this,arguments)}return c}();g["default"]=a}),98);
__d("LSTaskSerializerAcsIssueNextSync",["LSBase64Encode.nop","LSGetCurrentTokenPoolState","LSIssueNextSync","LSVoprfBlind.nop","LSVoprfCreateNonce.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.db.table(310).fetch([[[a[0]]]]).next().then(function(a,e){var f=a.done;a=a.value;return f?(function(a){c.logger(a).mustfix(a)}("Request context for the passed task_id was not found"),f=[void 0,void 0,void 0],d[0]=f[0],d[1]=f[1],d[2]=f[2],f):(e=a.item,c.sequence([function(a){return d[9]=e.projectName,d[10]=e.maxClientTokenPoolSize,c.storedProcedure(b("LSGetCurrentTokenPoolState"),d[9]).then(function(a){return a=a,d[4]=a[0],d[5]=a[1],a})},function(a){return c.i64.eq(d[4],c.i64.cast([0,0]))||c.i64.eq(d[4],c.i64.cast([0,1]))?c.resolve((d[11]=new c.Map(),d[11].set("project_name",d[9]),d[12]=c.toJSON(d[11]),a=[d[12],c.i64.cast([0,351]),void 0],d[6]=a[0],d[7]=a[1],d[8]=a[2],a)):c.sequence([function(a){return d[11]=c.i64.of_float(Date.now()),c.islc(c.sortBy(c.filter(c.db.table(307).fetch(),function(a){return a.projectName===d[9]&&c.i64.gt(a.expirationTimestampMs,d[11])}),[["expirationTimestampMs","DESC"]]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(e,f){var a=e.done;e=e.value;return a?(function(a){c.logger(a).mustfix(a)}("A config for the passed project name was not found"),d[16]=new c.Map(),d[16].set("project_name",d[9]),d[16].set("max_client_token_pool_size",d[10]),d[17]=c.toJSON(d[16]),a=[d[17],c.i64.cast([0,362]),void 0],d[12]=a[0],d[13]=a[1],d[14]=a[2],a):(f=e.item,c.sequence([function(a){return d[24]=f.configId,d[16]=f.maxEvals,d[26]=f.tokenPollFrequencyMs,d[25]=f.maxClientTokenPoolSize,d[17]=c.i64.sub(d[10],d[5]),d[23]=c.i64.lt(d[16],d[17])?d[16]:d[17],d[18]=c.createArray(),c.i64.gt(d[23],c.i64.cast([0,0]))?c.loopAsync(d[23],function(a){return d[27]=a,c.sequence([function(a){return c.nativeOperation(b("LSVoprfCreateNonce.nop")).then(function(a){return a=a,d[28]=a[0],a})},function(a){return c.blobs.neq(d[28],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSVoprfBlind.nop"),d[28]).then(function(a){return a=a,d[29]=a[0],d[30]=a[1],a})},function(a){return c.blobs.neq(d[29],void 0)?c.blobs.neq(d[30],void 0)?c.sequence([function(a){return d[31]=c.i64.cast([-1,4294967295]),c.db.table(308).peekNextAutoIncrementId().then(function(a){return d[31]=a})},function(a){return c.db.table(308).add({tokenId:void 0,blindedNonce:d[29],blindingFactor:d[30],nonce:d[28],configId:d[24]})},function(a){return c.db.table(308).fetch([[[d[31]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[32]=c.i64.cast([-1,4294967295]):(e=b.item,d[32]=e.tokenId)})},function(a){return c.i64.eq(d[32],c.i64.cast([-1,4294967295]))?c.sequence([function(a){return c.islc(c.db.table(308).fetchDesc([[[{gt:c.i64.cast([0,0])}]]]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(b,e){var a=b.done;b=b.value;return a?d[37]=c.i64.cast([-1,4294967295]):(e=b.item,d[37]=e.tokenId)})},function(a){return d[34]=d[37]}]):c.resolve(d[34]=d[32])},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[29]).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[36]=new c.Map(),d[36].set("id",d[34]),d[36].set("data",d[35]==null?"":d[35]),d[37]=(d[18].push(d[36]),d[18])}]):c.resolve():c.resolve()}]):c.resolve()}])}):c.resolve()},function(a){return d[19]=c.i64.of_int32(d[18].length),c.i64.gt(d[19],c.i64.cast([0,0]))?c.resolve((d[27]=new c.Map(),d[27].set("project_name",d[9]),d[27].set("config_id",d[24]),d[27].set("blinded_nonces",d[18]),d[28]=c.toJSON(d[27]),a=[d[28],c.i64.cast([0,354]),void 0],d[20]=a[0],d[21]=a[1],d[22]=a[2],a)):c.sequence([function(a){return c.i64.neq(d[26],void 0)?c.sequence([function(a){return c.i64.neq(d[25],void 0)?c.sequence([function(a){return function(a){c.logger(a).info(a)}(["Already have the max number of tokens. Scheduling next ACS token sync locally for project: ",d[9]].join("")),c.storedProcedure(b("LSIssueNextSync"),d[25],d[9],d[26],!1)},function(a){return a=[void 0,void 0,void 0],d[30]=a[0],d[31]=a[1],d[32]=a[2],a}]):c.resolve((function(a){c.logger(a).info(a)}(["token_poll_frequency is nonnull but max_client_token_pool_size is null. Already have the max number of tokens. Scheduling the next ACS token sync for project: ",d[9]].join("")),d[33]=new c.Map(),d[33].set("project_name",d[9]),d[33].set("max_client_token_pool_size",d[10]),d[34]=c.toJSON(d[33]),a=[d[34],c.i64.cast([0,362]),void 0],d[30]=a[0],d[31]=a[1],d[32]=a[2],a))},function(a){return a=[d[30],d[31],d[32]],d[27]=a[0],d[28]=a[1],d[29]=a[2],a}]):c.resolve((function(a){c.logger(a).info(a)}(["Already have the max number of tokens. Scheduling the next ACS token sync for project: ",d[9]].join("")),d[30]=new c.Map(),d[30].set("project_name",d[9]),d[30].set("max_client_token_pool_size",d[10]),d[31]=c.toJSON(d[30]),a=[d[31],c.i64.cast([0,362]),void 0],d[27]=a[0],d[28]=a[1],d[29]=a[2],a))},function(a){return a=[d[27],d[28],d[29]],d[20]=a[0],d[21]=a[1],d[22]=a[2],a}])},function(a){return a=[d[20],d[21],d[22]],d[12]=a[0],d[13]=a[1],d[14]=a[2],a}]))})},function(a){return a=[d[12],d[13],d[14]],d[6]=a[0],d[7]=a[1],d[8]=a[2],a}])},function(a){return a=[d[6],d[7],d[8]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}]))})},function(a){return a=[d[0],d[1],d[2]],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSIsExperimentCapabilityEnabled.nop",["LSACSExperimentCapability","LSIntEnum","MetaConfig","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("MetaConfig")._("87");a=function(a,e,f,g){switch((i||(i=d("LSIntEnum"))).toNumber(f)){case c("LSACSExperimentCapability").BUMP_TOKEN_SYNC_TASK_AT_TASK_SERIALIZATION:return(h||(h=b("Promise"))).resolve([!1]);case c("LSACSExperimentCapability").INSERT_PENDING_TASK_PARENT_ROW_WHEN_NO_ACS_TOKENS_AT_TASK_INSERTION:return(h||(h=b("Promise"))).resolve([!1]);case c("LSACSExperimentCapability").RETRY_AFTER_TASK_SERIALIZATION_FAILURE_EXPONENTIAL_BACKOFF:return(h||(h=b("Promise"))).resolve([j])}return(h||(h=b("Promise"))).resolve([!1])};g["default"]=a}),98);
__d("LSMailboxTaskCompletionApiOnTaskCompletion",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(233).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({success:a[1]})})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("ACSCipherSuiteModule",[],(function(a,b,c,d,e,f){"use strict";b={hash:"SHA-512",name:"HMAC"};c={curveName:"RISTRETTO",macAlgorithm:b,value:1};var g=new Map([[c.value,c]]);function a(a){return g.has(a)?g.get(a):null}f.VOPRF_RISTRETTO_HMACSHA512=c;f.getACSCipherSuiteByValue=a}),66);
__d("ACSTokenHmacUtil",["XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return h(a,b).then(function(a){return j(a,c)})}function h(a,b){return d("XPlatReactCrypto").subtleImportKey("raw",b,a,!1,["sign"]).then(function(b){return{algo:a,key:b}})}function i(a){return typeof a.hash==="string"?a.hash:a.hash.name}function j(a,b){var c=a.algo;a=a.key;c={hash:i(c),name:"HMAC"};return d("XPlatReactCrypto").subtleSign(c,a,b).then(function(a){return new Uint8Array(a)})}g.hmac=a}),98);
__d("LSVoprfHmac.nop",["ACSCipherSuiteModule","ACSTokenHmacUtil","Promise","XPlatReactTextEncoder","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){a=d("ACSCipherSuiteModule").getACSCipherSuiteByValue(d("ACSCipherSuiteModule").VOPRF_RISTRETTO_HMACSHA512.value);if(!a)return(h||(h=b("Promise"))).resolve([void 0]);c=(yield d("ACSTokenHmacUtil").hmac(a.macAlgorithm,new Uint8Array(f).slice(),new(d("XPlatReactTextEncoder").TextEncoder)().encode(e)));return(h||(h=b("Promise"))).resolve([c.buffer])});function c(b,c,d,e){return a.apply(this,arguments)}return c}();g["default"]=a}),98);
__d("LSTaskSerializerUnauthenticatedTask",["LSArrayGetObjectAt","LSBase64Encode.nop","LSIsExperimentCapabilityEnabled.nop","LSMailboxTaskCompletionApiOnTaskCompletion","LSRemoveUsedTokens","LSVoprfHmac.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return c.db.table(311).fetch([[[a[0]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=void 0:(b=a.item,d[0]=b.projectName)})},function(e){return d[0]!==void 0?c.sequence([function(e){return a[1]!==void 0?c.sequence([function(a){return d[9]=c.createArray(),d[10]=c.i64.of_float(Date.now()),c.forEach(c.filter(c.db.table(307).fetch(),function(a){return d[0]===a.projectName&&c.i64.gt(a.expirationTimestampMs,d[10])}),function(a){a=a.item;return d[16]=(d[9].push(a.configId),d[9])})},function(a){return c.sequence([function(a){return d[16]=c.createArray(),d[17]=c.i64.of_int32(d[9].length),c.i64.gt(d[17],c.i64.cast([0,0]))?c.loopAsync(d[17],function(a){return d[19]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[9],d[19]).then(function(a){return a=a,d[20]=a[0],d[21]=a[1],a})},function(a){return d[22]=(d[16].push(d[20]),d[16])}])}):c.resolve()},function(a){return d[18]=d[16].join(","),d[11]=d[18]}])},function(e){return c.filter(c.db.table(309).fetch(),function(a){return d[9].includes(a.configId)&&c.i64.gt(a.redeemLimit,c.i64.cast([0,0]))}).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(a){return c.nativeOperation(b("LSIsExperimentCapabilityEnabled.nop"),c.i64.cast([0,0]),d[0]).then(function(a){return a=a,d[16]=a[0],a})},function(e){return d[16]?c.sequence([function(b){return c.db.table(311).fetch([[[a[0]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[20]=c.i64.cast([0,0]):(e=b.item,d[20]=e.failureCount)})},function(b){return c.forEach(c.db.table(311).fetch([[[a[0]]]]),function(a){a=a.item;return c.forEach(c.db.table(311).fetch([[[a.taskId]]]),function(a){var b=a.update;a.item;return b({failureCount:c.i64.add(d[20],c.i64.cast([0,1]))})})})},function(a){return a=[void 0,void 0,c.i64.mul(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.mod_(d[20],c.i64.cast([0,7])))),c.i64.cast([0,500]))],d[17]=a[0],d[18]=a[1],d[19]=a[2],a}]):c.sequence([function(d){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskCompletion"),a[0],!1)},function(b){return d[20]=c.createArray(),d[21]=(d[20].push("Unauthenticated Task Serializer: no valid tokens"),d[20]),d[22]=(d[20].push(a[0]),d[20]),d[23]=(d[20].push(d[0]),d[20]),d[24]=c.toJSON(d[20]),function(a){c.logger(a).mustfix(a)}(d[24]),b=[void 0,void 0,void 0],d[17]=b[0],d[18]=b[1],d[19]=b[2],b}])},function(a){return a=[d[17],d[18],d[19]],d[12]=a[0],d[13]=a[1],d[14]=a[2],a}]):(f=e.item,c.sequence([function(e){return d[20]=f.tokenId,c.nativeOperation(b("LSVoprfHmac.nop"),a[2]==null?"":a[2],f.sharedSecret).then(function(a){return a=a,d[16]=a[0],a})},function(e){return c.blobs.neq(d[16],void 0)?c.sequence([function(a){return c.forEach(c.db.table(309).fetch([[[d[20]]]]),function(a){var b=a.update;a=a.item;return b({redeemLimit:c.i64.sub(a.redeemLimit,c.i64.cast([0,1]))})})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[16]).then(function(a){return a=a,d[21]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),f.nonce).then(function(a){return a=a,d[22]=a[0],a})},function(b){return d[23]=new c.Map(),d[23].set("config_id",f.configId),d[23].set("tag",d[21]==null?"":d[21]),d[23].set("aux",d[22]==null?"":d[22]),d[23].set("project_name",d[0]),d[24]=c.toJSON(d[23]),d[25]=new c.Map(),d[25].set("payload",a[2]==null?"":a[2]),d[25].set("token",d[24]),d[26]=c.toJSON(d[25]),b=[d[26],c.i64.from_string(a[1]),void 0],d[17]=b[0],d[18]=b[1],d[19]=b[2],b}]):c.sequence([function(a){return c.forEach(c.db.table(309).fetch([[[d[20]]]]),function(a){return a["delete"]()})},function(d){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskCompletion"),a[0],!1)},function(b){return d[21]=c.createArray(),d[22]=(d[21].push("Unauthenticated Task Serializer: hmac failed"),d[21]),d[23]=(d[21].push(a[0]),d[21]),d[24]=c.toJSON(d[21]),function(a){c.logger(a).mustfix(a)}(d[24]),b=[void 0,void 0,void 0],d[17]=b[0],d[18]=b[1],d[19]=b[2],b}])},function(a){return a=[d[17],d[18],d[19]],d[12]=a[0],d[13]=a[1],d[14]=a[2],a}]))})},function(a){return a=[d[12],d[13],d[14]],d[6]=a[0],d[7]=a[1],d[8]=a[2],a}]):c.sequence([function(d){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskCompletion"),a[0],!1)},function(b){return d[9]=c.createArray(),d[10]=(d[9].push("Unauthenticated Task Serializer: task has no write label"),d[9]),d[11]=(d[9].push(a[0]),d[9]),d[12]=c.toJSON(d[9]),function(a){c.logger(a).mustfix(a)}(d[12]),b=[void 0,void 0,void 0],d[6]=b[0],d[7]=b[1],d[8]=b[2],b}])},function(a){return a=[d[6],d[7],d[8]],d[2]=a[0],d[3]=a[1],d[4]=a[2],a}]):c.sequence([function(d){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskCompletion"),a[0],!1)},function(b){return d[6]=c.createArray(),d[7]=(d[6].push("Unauthenticated Task Serializer: anonymous_task_context row not found"),d[6]),d[8]=(d[6].push(a[0]),d[6]),d[9]=c.toJSON(d[6]),function(a){c.logger(a).mustfix(a)}(d[9]),b=[void 0,void 0,void 0],d[2]=b[0],d[3]=b[1],d[4]=b[2],b}])},function(a){return c.storedProcedure(b("LSRemoveUsedTokens"))},function(a){return d[0]!==void 0?d[5]=void 0:d[5]=void 0,a=[d[2],d[3],d[4]],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSForceTaskExecutionImmediately",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.db.table(2).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?0:(e=d.item,c[1]=b.i64.of_float(Date.now()),b.i64.lt(c[1],e.minTimeToSyncTimestampMs)?b.forEach(b.db.table(2).fetch([[[a[0]]]]),function(a){var c=a.update;a.item;return c({minTimeToSyncTimestampMs:b.i64.cast([0,0])})}):b.resolve())})},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSTaskSerializerE2eeMessageIntegrityCheckV2",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,c.i64.cast([0,705]),void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],a,c.resolve(d)}e.exports=a}),null);
__d("LSTaskSerializerE2eeMetadataThreadIntegrityCheck",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,c.i64.cast([0,700]),void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],a,c.resolve(d)}e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupAction",[],(function(a,b,c,d,e,f){function a(){var a,b=arguments,c=b[b.length-1],d=[];return a=[void 0,c.i64.cast([0,319]),void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],a,c.resolve(d)}e.exports=a}),null);
__d("LSLogMebClientEvent.nop",["I64","LSVec","MebClientLogsFalcoEvent","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f,g,j,k){c("MebClientLogsFalcoEvent").log(function(){return{calling_class:f,device_family_id:void 0,device_registration_id:void 0,log_level:(i||(i=d("I64"))).to_string(k),msg:g,trace_ids:c("LSVec").toArray(j)}});return(h||(h=b("Promise"))).resolve()};g["default"]=a}),98);
__d("LSTaskSerializerEncryptedBackupsLoopingUpload",["LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(a){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][taskSerializerEncryptedBackupsLoopingUpload] Beginning execution."),d[1]=c.i64.of_float(Date.now()),function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure] LSEncryptedBackupsLoopingUploadPayloadsTable table not found"),d[2]=c.createArray(),void 0!==void 0?d[9]=(d[2].push(void 0),d[2]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsTaskSerializerEncryptedBackupsLoopingUploadStoredProcedure","LSEncryptedBackupsLoopingUploadPayloadsTable table not found",d[2],c.i64.cast([0,3]))},function(a){return d[3]=c.i64.of_float(Date.now()),d[4]=c.i64.random(),d[6]="Finishing execution. Execution time: ",d[7]=c.i64.to_string(c.i64.sub(d[3],d[0])),d[8]=" ms",d[5]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][taskSerializerEncryptedBackupsLoopingUpload] ",d[5],d[6],d[5],d[7],d[5],d[8]].join("")),c.i64.eq(c.i64.mod_(d[4],c.i64.cast([0,100])),c.i64.cast([0,0]))?(d[9]=",",d[10]=c.createArray(),void 0!==void 0?d[11]=(d[10].push(void 0),d[10]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsLoopingUpload",[d[6],d[9],d[7],d[9],d[8]].join(""),d[10],c.i64.cast([0,4]))):c.resolve()},function(a){return a=['{"request_id":"unknown","upload_type":"FBN","payload":{"error_code":2,"operation":"","error_message":"","__typename":"MPSUploadFailurePayload"}}',c.i64.cast([0,50043]),void 0],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("CryptoLogger",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("FBLogger")("labyrinth_web","crypto."+a)}function b(a,b){return b instanceof Error?a.catching(b):a}g.CryptoLogger=a;g.captureError=b}),98);
__d("LSGetBlobFromString.nop",["CryptoLogger","LSResult","Promise","XPlatReactTextEncoder"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f){a=new(d("XPlatReactTextEncoder").TextEncoder)();try{e=a.encode(f).buffer;return(h||(h=b("Promise"))).resolve(c("LSResult")(e))}catch(g){e=d("CryptoLogger").CryptoLogger("get_blob_from_string");e.catching(g).mustfix(g.message?g.message:"Error in get blob from string.");e=a.encode(f).buffer;return(h||(h=b("Promise"))).resolve(c("LSResult")(e))}};g["default"]=a}),98);
__d("LSIsReverbDBEnabled.nop",["LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,d){return(h||(h=b("Promise"))).resolve(c("LSResult")(!0))};g["default"]=a}),98);
__d("LSQueryLocalPersistenceStoreForBackup.nop",["Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){c=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableDescending(a.local_message_persistence_store).filter(function(a){var b=a.offlineThreadingId;a=a.threadId;return a===e&&f===b})));if(c.length===0)return(h||(h=b("Promise"))).resolve([void 0,void 0,!1]);a=c[0];return(h||(h=b("Promise"))).resolve([a.messagePayload,a.messageTimestampMs,!1])});function c(b,c,d,e){return a.apply(this,arguments)}return c}();g["default"]=a}),98);
__d("LSQueryLocalPersistenceStoreSupplementalForBackup.nop",["Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g){c=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.local_message_persistence_store_supplemental).filter(function(a){var b=a.supplementalKey,c=a.threadId;a=a.toplevelOfflineThreadingId;return c===e&&a===f&&b===g})));return c==null?(h||(h=b("Promise"))).resolve([void 0,void 0]):(h||(h=b("Promise"))).resolve([c.messagePayload,c.messageTimestampMs])});function c(b,c,d,e,f){return a.apply(this,arguments)}return c}();g["default"]=a}),98);
__d("LSQueryLocalPersistenceStoreTagsForBackup.nop",["LSVec","Promise","ReQL","asyncToGeneratorRuntime","isInstamadilloEB","isInstamadilloOpenEB"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){e=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.local_message_persistence_store).filter(function(a){var b=a.offlineThreadingId;a=a.threadId;return a===f&&g===b})));if(c("isInstamadilloEB")()||c("isInstamadilloOpenEB")()){a="PERMANENT";if(e==null)return(h||(h=b("Promise"))).resolve([c("LSVec").ofArray([a])]);e=e.tags;a=e===void 0?a:e;return(h||(h=b("Promise"))).resolve([c("LSVec").ofArray([a])])}return(h||(h=b("Promise"))).resolve([c("LSVec").ofArray([])])});function e(b,c,d,e){return a.apply(this,arguments)}return e}();g["default"]=a}),98);
__d("LSLoadUnencryptedProtobufWithInputs",["LSBase64Encode.nop","LSGetBlobFromString.nop","LSIsReverbDBEnabled.nop","LSLogMebClientEvent.nop","LSQueryLocalPersistenceStoreForBackup.nop","LSQueryLocalPersistenceStoreSupplementalForBackup.nop","LSQueryLocalPersistenceStoreTagsForBackup.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadUnencryptedProtobufWithInputs] Beginning execution."),d[1]=c.i64.of_float(Date.now()),!1===!0?c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error REQUIRED_COLUMN_NOT_PRESENT_ON_CLIENT"),d[10]=new c.Map(),d[10].set("error_code",c.i64.cast([-1,4294967293])),d[10].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[10].set("error_message",""),e=[void 0,d[10]],d[2]=e[0],d[3]=e[1],e)):c.sequence([function(a){return c.nativeOperation(b("LSIsReverbDBEnabled.nop")).then(function(a){return a=a,d[10]=a[0],a})},function(e){return!1===d[10]?c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error REVERB_DB_NOT_ENABLED_FOR_INSTAMADILLO"),d[13]=new c.Map(),d[13].set("error_code",c.i64.cast([0,206])),d[13].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[13].set("error_message",""),e=[void 0,d[13]],d[11]=e[0],d[12]=e[1],e)):c.sequence([function(e){return c.i64.eq(a[0],c.i64.cast([0,1]))?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[15]=a[0],d[16]=a[1],d[17]=a[2],a})},function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,d[18]=a[0],a})},function(e){return c.blobs.neq(d[15],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[15]).then(function(a){return a=a,d[21]=a[0],a})},function(b){return d[21]!==void 0?(d[18]!==void 0?(d[26]=new c.Map(),d[26].set("message_tags",d[18]),d[27]=c.toJSON(d[26]),d[24]=d[27]):d[24]=void 0,d[25]=new c.Map(),d[25].set("backup_action",a[0]),d[25].set("protobuf_encrypted",d[21]),d[25].set("supplemental_data_encrypted",void 0),d[25].set("timestamp_ms",a[4]),d[25].set("message_tags",d[24]),b=[d[25],void 0],d[22]=b[0],d[23]=b[1],b):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_FORMATTING_FAILED"),d[24]=new c.Map(),d[24].set("error_code",c.i64.cast([0,68])),d[24].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[24].set("error_message",""),b=[void 0,d[24]],d[22]=b[0],d[23]=b[1],b),b=[d[22],d[23]],d[19]=b[0],d[20]=b[1],b}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),d[21]=new c.Map(),d[21].set("error_code",c.i64.cast([0,63])),d[21].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[21].set("error_message",""),e=[void 0,d[21]],d[19]=e[0],d[20]=e[1],e))},function(a){return a=[d[19],d[20]],d[13]=a[0],d[14]=a[1],a}]):c.sequence([function(e){return c.i64.eq(a[0],c.i64.cast([0,2]))?c.sequence([function(e){return a[3]!==void 0?c.sequence([function(e){return c.nativeOperation(b("LSQueryLocalPersistenceStoreSupplementalForBackup.nop"),a[1],a[2],a[3]).then(function(a){return a=a,d[19]=a[0],d[20]=a[1],a})},function(e){return c.blobs.neq(d[19],void 0)?c.sequence([function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[3]).then(function(a){return a=a,d[23]=a[0],a})},function(e){return c.blobs.neq(d[23],void 0)?c.sequence([function(a){return d[26]=new c.Map(),d[26].set("sk_ciphertext",d[23]),d[26].set("sk_hash",d[23]),c.nativeOperation(b("LSBase64Encode.nop"),d[19]).then(function(a){return a=a,d[27]=a[0],a})},function(b){return d[27]!==void 0?(d[30]=new c.Map(),d[30].set("backup_action",a[0]),d[30].set("protobuf_encrypted",d[27]),d[30].set("supplemental_data_encrypted",d[26]),d[30].set("timestamp_ms",a[4]),d[30].set("message_tags",void 0),b=[d[30],void 0],d[28]=b[0],d[29]=b[1],b):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_FORMATTING_FAILED"),d[30]=new c.Map(),d[30].set("error_code",c.i64.cast([0,68])),d[30].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[30].set("error_message",""),b=[void 0,d[30]],d[28]=b[0],d[29]=b[1],b),b=[d[28],d[29]],d[24]=b[0],d[25]=b[1],b}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error SUPPLEMENTAL_FORMATTING_FAILED"),d[26]=new c.Map(),d[26].set("error_code",c.i64.cast([0,69])),d[26].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[26].set("error_message",""),e=[void 0,d[26]],d[24]=e[0],d[25]=e[1],e))},function(a){return a=[d[24],d[25]],d[21]=a[0],d[22]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_SUPPLEMENTAL_TABLE"),d[23]=new c.Map(),d[23].set("error_code",c.i64.cast([0,64])),d[23].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[23].set("error_message",""),e=[void 0,d[23]],d[21]=e[0],d[22]=e[1],e))},function(a){return a=[d[21],d[22]],d[17]=a[0],d[18]=a[1],a}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),d[19]=new c.Map(),d[19].set("error_code",c.i64.cast([0,65])),d[19].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[19].set("error_message",""),e=[void 0,d[19]],d[17]=e[0],d[18]=e[1],e))},function(a){return a=[d[17],d[18]],d[15]=a[0],d[16]=a[1],a}]):c.resolve((c.i64.eq(a[0],c.i64.cast([0,3]))?(d[19]=new c.Map(),d[19].set("backup_action",a[0]),d[19].set("protobuf_encrypted",void 0),d[19].set("supplemental_data_encrypted",void 0),d[19].set("timestamp_ms",a[4]),d[19].set("message_tags",void 0),e=[d[19],void 0],d[17]=e[0],d[18]=e[1],e):(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure] Returning error INVALID_BACKUP_OPERATION"),d[19]=new c.Map(),d[19].set("error_code",c.i64.cast([-1,4294967289])),d[19].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufWithInputsStoredProcedure"),d[19].set("error_message",""),e=[void 0,d[19]],d[17]=e[0],d[18]=e[1],e),e=[d[17],d[18]],d[15]=e[0],d[16]=e[1],e))},function(a){return a=[d[15],d[16]],d[13]=a[0],d[14]=a[1],a}])},function(a){return a=[d[13],d[14]],d[11]=a[0],d[12]=a[1],a}])},function(a){return a=[d[11],d[12]],d[2]=a[0],d[3]=a[1],a}])},function(a){return d[4]=c.i64.of_float(Date.now()),d[5]=c.i64.random(),d[7]="Finishing execution. Execution time: ",d[8]=c.i64.to_string(c.i64.sub(d[4],d[0])),d[9]=" ms",d[6]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadUnencryptedProtobufWithInputs] ",d[6],d[7],d[6],d[8],d[6],d[9]].join("")),c.i64.eq(c.i64.mod_(d[5],c.i64.cast([0,100])),c.i64.cast([0,0]))?(d[10]=",",d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadUnencryptedProtobufWithInputs",[d[7],d[10],d[8],d[10],d[9]].join(""),d[11],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[2],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSLoadUnencryptedProtobufBackupSerializedPayloadData",["LSLoadUnencryptedProtobufWithInputs","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadUnencryptedProtobufBackupSerializedPayloadData] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[19]=c.i64.mul(d[1],c.i64.cast([0,1e6])),c.db.table(2).fetch([[[a[0]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?(d[23]=c.i64.of_float(Date.now()),f=[a[0],void 0,void 0,void 0,void 0,c.i64.sub(c.i64.mul(d[23],c.i64.cast([0,1e6])),d[19]),void 0],d[2]=f[0],d[3]=f[1],d[4]=f[2],d[5]=f[3],d[6]=f[4],d[7]=f[5],d[8]=f[6],f):(e=b.item,d[23]=c.i64.of_float(Date.now()),f=[a[0],e.queueName,e.enqueueTimestampMs,e.priority,e.firstExecutedTimestampMs,c.i64.sub(c.i64.mul(d[23],c.i64.cast([0,1e6])),d[19]),void 0],d[2]=f[0],d[3]=f[1],d[4]=f[2],d[5]=f[3],d[6]=f[4],d[7]=f[5],d[8]=f[6],f)})},function(e){return d[10]=new c.Map(),d[10].set("task_id",d[2]),d[10].set("queue_name",d[3]),d[10].set("enqueue_timestamp_ms",d[4]),d[10].set("priority",d[5]),d[10].set("first_executed_timestamp_ms",d[6]),d[10].set("execution_time_ns",d[7]),d[10].set("echo_encoding_execution_time_ns",d[8]),d[11]=new c.Map(),d[11].set("task_metadata",d[10]),d[11].set("action_type",void 0),d[11].set("content_type",void 0),d[11].set("identifiers",void 0),d[11].set("task_creation_source",void 0),d[11].set("message_payload_source",c.i64.cast([0,2])),c.filter(c.db.table(305).fetch(),function(b){return c.i64.eq(b.pendingBackupTaskId,a[0])}).next().then(function(e,f){var g=e.done;e=e.value;return g?(d[23]=new c.Map(),d[23].set("error_code",c.i64.cast([0,5])),d[23].set("stored_procedure","LSEncryptedBackupsLoadUnencryptedProtobufBackupSerializedPayloadDataStoredProcedure"),d[23].set("error_message",""),g=[void 0,d[23],d[11]],d[12]=g[0],d[13]=g[1],d[14]=g[2],g):(f=e.item,c.sequence([function(b){return d[40]=f.actThreadId,d[41]=f.toplevelOfflineThreadingId,d[34]=f.messageTimestampMs,d[23]=new c.Map(),d[23].set("backup_id","openEbUploadGenericBackupId"),d[23].set("act_thread_id",d[40]),d[23].set("server_thread_id",d[40]),d[23].set("timestamp",c.i64.to_string(d[34])),d[23].set("otid",d[41]),c.db.table(2).fetch([[[a[0]]]]).next().then(function(e,f){var b=e.done;e=e.value;return b?(d[42]=c.i64.of_float(Date.now()),b=[a[0],void 0,void 0,void 0,void 0,c.i64.sub(c.i64.mul(d[42],c.i64.cast([0,1e6])),d[19]),void 0],d[24]=b[0],d[25]=b[1],d[26]=b[2],d[27]=b[3],d[28]=b[4],d[29]=b[5],d[30]=b[6],b):(f=e.item,d[42]=c.i64.of_float(Date.now()),b=[a[0],f.queueName,f.enqueueTimestampMs,f.priority,f.firstExecutedTimestampMs,c.i64.sub(c.i64.mul(d[42],c.i64.cast([0,1e6])),d[19]),void 0],d[24]=b[0],d[25]=b[1],d[26]=b[2],d[27]=b[3],d[28]=b[4],d[29]=b[5],d[30]=b[6],b)})},function(a){return d[32]=new c.Map(),d[32].set("task_id",d[24]),d[32].set("queue_name",d[25]),d[32].set("enqueue_timestamp_ms",d[26]),d[32].set("priority",d[27]),d[32].set("first_executed_timestamp_ms",d[28]),d[32].set("execution_time_ns",d[29]),d[32].set("echo_encoding_execution_time_ns",d[30]),d[33]=new c.Map(),d[33].set("task_metadata",d[32]),d[33].set("action_type",void 0),d[33].set("content_type",void 0),d[33].set("identifiers",d[23]),d[33].set("task_creation_source",void 0),d[33].set("message_payload_source",c.i64.cast([0,2])),c.storedProcedure(b("LSLoadUnencryptedProtobufWithInputs"),f.backupAction,d[40],d[41],f.supplementalKey,d[34],d[23]).then(function(a){return a=a,d[35]=a[0],d[36]=a[1],a})},function(a){return d[35]!==void 0?(d[42]=new c.Map(),d[42].set("unencrypted_protobuf_backup_payload",d[35]),d[42].set("message_identifiers",d[23]),d[42].set("attachment_backup_payload",f.attachmentPayload),d[42].set("sender_id",f.senderId),a=[d[42],void 0,d[33]],d[37]=a[0],d[38]=a[1],d[39]=a[2],a):(a=[void 0,d[36],d[33]],d[37]=a[0],d[38]=a[1],d[39]=a[2],a),a=[d[37],d[38],d[39]],d[12]=a[0],d[13]=a[1],d[14]=a[2],a}]))})},function(a){return d[16]=c.i64.of_float(Date.now()),d[17]=c.i64.random(),d[20]="Finishing execution. Execution time: ",d[21]=c.i64.to_string(c.i64.sub(d[16],d[0])),d[22]=" ms",d[18]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadUnencryptedProtobufBackupSerializedPayloadData] ",d[18],d[20],d[18],d[21],d[18],d[22]].join("")),c.i64.eq(c.i64.mod_(d[17],c.i64.cast([0,100])),c.i64.cast([0,0]))?(d[23]=",",d[24]=c.createArray(),void 0!==void 0?d[25]=(d[24].push(void 0),d[24]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadUnencryptedProtobufBackupSerializedPayloadData",[d[20],d[23],d[21],d[23],d[22]].join(""),d[24],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[12],d[13],d[14]],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsOpenUpload",["LSBase64Encode.nop","LSLoadUnencryptedProtobufBackupSerializedPayloadData","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][taskSerializerEncryptedBackupsOpenUpload] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSLoadUnencryptedProtobufBackupSerializedPayloadData"),a[0]).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],d[4]=a[2],a})},function(a){return d[2]!==void 0?c.sequence([function(a){return d[15]=d[2].get("message_identifiers"),d[2],d[16]=d[2].get("unencrypted_protobuf_backup_payload"),d[2],d[17]=d[15].get("server_thread_id"),d[15],d[18]=d[15].get("timestamp"),d[15],d[19]=d[15].get("otid"),d[15],d[20]=d[15].get("act_thread_id"),d[15],d[21]=new c.Map(),d[21].set("server_thread_key",d[17]),d[21].set("timestamp",d[18]),d[21].set("otid",d[19]),d[21].set("wa_thread_id",c.i64.from_string(d[20])),d[22]=new c.Map(),d[22].set("message_identifiers",d[21]),d[23]=d[16].get("supplemental_data_encrypted"),d[16],d[23]!==void 0?c.sequence([function(a){return d[28]=d[16].get("protobuf_encrypted"),d[16],d[29]=d[16].get("backup_action"),d[16],d[30]=d[16].get("timestamp_ms"),d[16],d[31]=d[23].get("sk_ciphertext"),d[23],c.nativeOperation(b("LSBase64Encode.nop"),d[31]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=d[23].get("sk_hash"),d[23],c.nativeOperation(b("LSBase64Encode.nop"),d[33]).then(function(a){return a=a,d[34]=a[0],a})},function(a){return d[35]=d[16].get("message_tags"),d[16],d[36]=new c.Map(),d[36].set("supplementary_data_key",void 0),d[36].set("encrypted_protobuf",d[28]),d[36].set("key_value_backup_action",d[29]),d[36].set("protobuf_ts_ms",d[30]),d[36].set("supplemental_key_ciphertext",d[32]),d[36].set("supplemental_key_hash",d[34]),d[36].set("message_tags",d[35]),d[24]=d[36]}]):c.resolve((d[28]=d[16].get("protobuf_encrypted"),d[16],d[29]=d[16].get("backup_action"),d[16],d[30]=d[16].get("timestamp_ms"),d[16],d[31]=d[16].get("message_tags"),d[16],d[32]=new c.Map(),d[32].set("supplementary_data_key",void 0),d[32].set("encrypted_protobuf",d[28]),d[32].set("key_value_backup_action",d[29]),d[32].set("protobuf_ts_ms",d[30]),d[32].set("message_tags",d[31]),d[24]=d[32]))},function(a){return d[22].set("key_value_backup_unencrypted_payload",d[24]),d[25]=d[2].get("sender_id"),d[2],d[22].set("sender_id",d[25]),d[26]=d[2].get("attachment_backup_payload"),d[2],d[26]!==void 0?d[22].set("attachment_backup_payload",d[26]):0,d[27]=c.toJSON(d[22]),a=[d[27],void 0,d[4]],d[5]=a[0],d[6]=a[1],d[7]=a[2],a}]):c.resolve((d[3]?d[15]=!1:d[15]=!0,d[15]?(a=[void 0,void 0,d[4]],d[16]=a[0],d[17]=a[1],d[18]=a[2],a):(a=[void 0,d[3],d[4]],d[16]=a[0],d[17]=a[1],d[18]=a[2],a),a=[d[16],d[17],d[18]],d[5]=a[0],d[6]=a[1],d[7]=a[2],a))},function(a){return d[15]=new c.Map(),d[16]=d[15].set("success",d[5]),d[17]=d[15].set("failure",d[6]),d[18]=d[15].set("context",d[7]),d[19]=c.toJSON(d[15]),d[8]=d[19],d[9]=c.i64.of_float(Date.now()),d[10]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[9],d[0])),d[14]=" ms",d[11]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][taskSerializerEncryptedBackupsOpenUpload] ",d[11],d[12],d[11],d[13],d[11],d[14]].join("")),c.i64.eq(c.i64.mod_(d[10],c.i64.cast([0,100])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsOpenUpload",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[8],c.i64.cast([0,50048]),void 0],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSCreateDataTrace",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return c[0]=b.i64.of_float(Date.now()),b.db.table(153).add({traceId:a[0],initTimestampMs:c[0],traceType:a[4],shouldFlush:!1,contextOne:a[1],contextTwo:a[2],contextThree:a[3]})},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSCreateDataTraceID.nop",["LSRequestId","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,d){return(h||(h=b("Promise"))).resolve(c("LSResult")(c("LSRequestId").generate()))};g["default"]=a}),98);
__d("LSFlushDataTrace.nop",["MetaConfig","Promise","ReQL","updateAndFlushLSDataTrace"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f){return!c("MetaConfig")._("62")?(h||(h=b("Promise"))).resolve():d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.data_trace_meta).getKeyRange(f)).then(function(d){if(d!=null)return c("updateAndFlushLSDataTrace")(a,f);else return(h||(h=b("Promise"))).resolve()})};g["default"]=a}),98);
__d("LSIsMobileClient",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return c[0]=!1,b.resolve(c)}e.exports=a}),null);
__d("LSDeleteBackupOnClient",["LSAppendDataTraceAddon","LSFlushDataTrace.nop","LSIsMobileClient","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] Beginning execution."),d[1]="Beginning deleteBackupOnClient stored procedure",function(a){c.logger(a).info(a)}(["[EncryptedBackups][deleteBackupOnClient] ","",d[1]].join("")),d[2]=c.createArray(),void 0!==void 0?d[11]=(d[2].push(void 0),d[2]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"deleteBackupOnClient",[d[1]].join(""),d[2],c.i64.cast([0,4]))},function(d){return a[3]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[3],c.i64.cast([0,1423]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[3]=a[0],a})},function(a){return d[3]?d[4]=!0:d[4]=!1,d[4]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[11],c.i64.cast([0,3]))):c.resolve()},function(b){return c.i64.neq(a[0],void 0)?c.forEach(c.db.table(168).fetch([[[a[0]]]]),function(a){return a["delete"]()}):c.forEach(c.db.table(168).fetch(),function(a){return a["delete"]()})},function(b){return c.i64.neq(a[0],void 0)?c.forEach(c.db.table(169).fetch([[[a[0]]],"fk_secure_encrypted_backups_client_state"]),function(a){return a["delete"]()}):c.forEach(c.db.table(169).fetch(),function(a){return a["delete"]()})},function(a){return c.forEach(c.db.table(190).fetch(),function(a){return a["delete"]()})},function(a){return c.forEach(c.db.table(174).fetch(),function(a){return a["delete"]()})},function(b){return a[1]==="fetch_virtual_device"?c.db.table(178).put({pk:c.i64.cast([0,1]),recoveryCodeStatus:c.i64.cast([0,4])}):c.resolve()},function(e){return a[2]?c.sequence([function(a){return d[11]="Clearing backups tables",function(a){c.logger(a).info(a)}(["[EncryptedBackups][deleteBackupOnClient] ","",d[11]].join("")),d[12]=c.createArray(),void 0!==void 0?d[19]=(d[12].push(void 0),d[12]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"deleteBackupOnClient",[d[11]].join(""),d[12],c.i64.cast([0,4]))},function(d){return a[3]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[3],c.i64.cast([0,1891]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return d[13]?d[14]=!0:d[14]=!1,d[14]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[19]=c.createArray(),void 0!==void 0?d[20]=(d[19].push(void 0),d[19]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[19],c.i64.cast([0,3]))):c.resolve()},function(a){return c.forEach(c.db.table(172).fetch([[[c.i64.cast([0,1])]]]),function(a){var b=a.update;a.item;return b({backupId:void 0})})},function(d){return a[3]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[3],c.i64.cast([0,1892]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[15]=a[0],a})},function(a){return d[15]?d[16]=!0:d[16]=!1,d[16]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[19]=c.createArray(),void 0!==void 0?d[20]=(d[19].push(void 0),d[19]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[19],c.i64.cast([0,3]))):c.resolve()},function(b){return c.i64.neq(a[0],void 0)?c.forEach(c.filter(c.db.table(184).fetch(),function(b){return c.i64.eq(b.backupId,a[0])}),function(a){return a["delete"]()}):c.forEach(c.db.table(184).fetch(),function(a){return a["delete"]()})},function(d){return a[3]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[3],c.i64.cast([0,1893]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[17]=a[0],a})},function(a){return d[17]?d[18]=!0:d[18]=!1,d[18]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[19]=c.createArray(),void 0!==void 0?d[20]=(d[19].push(void 0),d[19]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[19],c.i64.cast([0,3]))):c.resolve()},function(b){return c.i64.neq(a[0],void 0)?c.forEach(c.db.table(196).fetch([[[a[0]]]]),function(a){return a["delete"]()}):c.forEach(c.db.table(196).fetch(),function(a){return a["delete"]()})}]):c.resolve()},function(e){return a[5]?c.sequence([function(e){return a[5]?c.sequence([function(d){return a[3]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[3],c.i64.cast([0,84]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return d[13]?d[14]=!0:d[14]=!1,d[14]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[15]=c.createArray(),void 0!==void 0?d[16]=(d[15].push(void 0),d[15]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[15],c.i64.cast([0,3]))):c.resolve()}]):a[3]!==void 0?c.sequence([function(d){return a[3]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[3],c.i64.cast([0,85]),c.i64.cast([0,2]),"The flow did not succeed",void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return d[13]?d[14]=!0:d[14]=!1,d[14]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[15]=c.createArray(),void 0!==void 0?d[16]=(d[15].push(void 0),d[15]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[15],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(d){return a[3]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),a[3]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[11]=a[0],a})},function(a){return d[11]?d[12]=!0:d[12]=!1,d[12]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[13]=c.createArray(),void 0!==void 0?d[14]=(d[13].push(void 0),d[13]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[13],c.i64.cast([0,3]))):c.resolve()}]):a[4]!==void 0?c.sequence([function(e){return d[14]=["[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] ","",a[4]].join(""),function(a){c.logger(a).mustfix(a)}(d[14]),d[11]=c.createArray(),a[3]!==void 0?d[15]=(d[11].push(a[3]),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",a[4],d[11],c.i64.cast([0,3]))},function(e){return a[3]!==void 0?c.sequence([function(e){return a[3]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[3],c.i64.cast([0,85]),c.i64.cast([0,2]),d[14],void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[15]=a[0],a})},function(a){return d[15]?d[16]=!0:d[16]=!1,d[16]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[17]=c.createArray(),void 0!==void 0?d[18]=(d[17].push(void 0),d[17]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[17],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(d){return a[3]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),a[3]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[12]=a[0],a})},function(a){return d[12]?d[13]=!0:d[13]=!1,d[13]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[15]=c.createArray(),void 0!==void 0?d[16]=(d[15].push(void 0),d[15]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[15],c.i64.cast([0,3]))):c.resolve()}]):c.sequence([function(e){return a[3]!==void 0?c.sequence([function(d){return a[3]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[3],c.i64.cast([0,85]),c.i64.cast([0,2]),["[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] ","",""].join(""),void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return d[13]?d[14]=!0:d[14]=!1,d[14]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[15]=c.createArray(),void 0!==void 0?d[16]=(d[15].push(void 0),d[15]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[15],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(d){return a[3]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),a[3]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[11]=a[0],a})},function(a){return d[11]?d[12]=!0:d[12]=!1,d[12]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[13]=c.createArray(),void 0!==void 0?d[14]=(d[13].push(void 0),d[13]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[13],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[5]=c.i64.of_float(Date.now()),d[6]=c.i64.random(),d[8]="Finishing execution. Execution time: ",d[9]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[10]=" ms",d[7]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] ",d[7],d[8],d[7],d[9],d[7],d[10]].join("")),c.i64.eq(c.i64.mod_(d[6],c.i64.cast([0,100])),c.i64.cast([0,0]))?(d[11]=",",d[12]=c.createArray(),void 0!==void 0?d[13]=(d[12].push(void 0),d[12]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",[d[8],d[11],d[9],d[11],d[10]].join(""),d[12],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSGetOpenEpochKeys",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSCreateDataTrace","LSCreateDataTraceID.nop","LSDeleteBackupOnClient","LSIsMobileClient","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsGetOpenEpochKeysStoredProcedure] Beginning execution."),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))&&c.i64.eq(a.backupTenancy,c.i64.cast([0,2]))}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){b=a.done;a=a.value;return b?d[1]=!1:(a.item,d[1]=!0)})},function(a){return d[1]?d[3]=c.i64.or_(c.i64.cast([0,90]),c.i64.cast([0,128])):d[3]=c.i64.cast([0,90]),c.nativeOperation(b("LSCreateDataTraceID.nop")).then(function(a){return a=a,d[4]=a[0],a})},function(a){return d[22]="EncryptedBackups MCD Trace ID",d[23]=c.i64.to_string(d[3]),d[5]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBTraceUtils] ",d[5],d[22],d[5],d[23]].join("")),c.resolve()},function(a){return c.storedProcedure(b("LSCreateDataTrace"),d[4],void 0,void 0,"get_open_epoch_keys",d[3])},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[6]=a[0],a})},function(a){return d[6]?d[7]=!0:d[7]=!1,d[7]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[29]=c.createArray(),void 0!==void 0?d[30]=(d[29].push(void 0),d[29]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[29],c.i64.cast([0,3]))):c.resolve()},function(b){return d[24]="Querying latest epoch keys with authority level: ",a[0]?d[8]="OPTIMISTIC":d[8]="AUTHORITATIVE",d[9]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsGetOpenEpochKeysStoredProcedure] ",d[9],d[24],d[9],d[8]].join("")),c.resolve()},function(e){return a[0]?d[10]="OPTIMISTIC":d[10]="AUTHORITATIVE",d[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[4],c.i64.cast([0,2842]),c.i64.cast([0,2]),void 0,d[10]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[11]=a[0],a})},function(a){return d[11]?d[12]=!0:d[12]=!1,d[12]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[29]=c.createArray(),void 0!==void 0?d[30]=(d[29].push(void 0),d[29]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[29],c.i64.cast([0,3]))):c.resolve()},function(a){return d[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[4],c.i64.cast([0,2844]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return d[13]?d[14]=!0:d[14]=!1,d[14]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[29]=c.createArray(),void 0!==void 0?d[30]=(d[29].push(void 0),d[29]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[29],c.i64.cast([0,3]))):c.resolve()},function(b){return d[15]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(b){return a[0]||c.i64.eq(b.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[29]=(d[15].push(c.blobs.to_string(a.epochAnonIdBlob)),d[15])})},function(a){return d[16]=c.i64.of_int32(d[15].length),c.i64.gt(d[16],c.i64.cast([0,0]))?c.sequence([function(a){return d[29]=c.i64.of_int32(d[15].length),d[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[4],c.i64.cast([0,2845]),c.i64.cast([0,2]),void 0,c.i64.to_string(d[29])):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return d[30]?d[31]=!0:d[31]=!1,d[31]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[36]=c.createArray(),void 0!==void 0?d[37]=(d[36].push(void 0),d[36]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[36],c.i64.cast([0,3]))):c.resolve()},function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[15],c.i64.cast([0,0])).then(function(a){return a=a,d[32]=a[0],d[33]=a[1],a})},function(a){return d[34]=d[32],d[35]=c.i64.of_int32(d[15].length),c.i64.gt(d[35],c.i64.cast([0,0]))?c.loopAsync(d[35],function(a){return d[36]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[15],d[36]).then(function(a){return a=a,d[37]=a[0],d[38]=a[1],a})},function(a){return c.i64.eq([0,d[34].length],[0,d[37].length])?(d[34]===d[37]?d[40]=d[34]:(d[34]>d[37]?d[41]=d[34]:d[41]=d[37],d[40]=d[41]),d[39]=d[40]):(c.i64.gt([0,d[34].length],[0,d[37].length])?d[40]=d[34]:d[40]=d[37],d[39]=d[40]),d[34]=d[39]}])}):c.resolve()},function(a){return d[17]=d[34]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsGetOpenEpochKeysStoredProcedure] Epoch anon ID list is empty."),d[29]=c.createArray(),void 0!==void 0?d[32]=(d[29].push(void 0),d[29]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsGetOpenEpochKeysStoredProcedure","Epoch anon ID list is empty.",d[29],c.i64.cast([0,3]))},function(a){return d[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[4],c.i64.cast([0,2846]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return d[30]?d[31]=!0:d[31]=!1,d[31]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[32]=c.createArray(),void 0!==void 0?d[33]=(d[32].push(void 0),d[32]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[32],c.i64.cast([0,3]))):c.resolve()},function(a){return d[17]=void 0}])},function(a){return d[17]!==void 0?c.sequence([function(a){return d[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[4],c.i64.cast([0,2863]),c.i64.cast([0,2]),void 0,d[17]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[29]=a[0],a})},function(a){return d[29]?d[30]=!0:d[30]=!1,d[30]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[31]=c.createArray(),void 0!==void 0?d[32]=(d[31].push(void 0),d[31]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[31],c.i64.cast([0,3]))):c.resolve()}]):c.sequence([function(a){return d[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[4],c.i64.cast([0,2864]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[29]=a[0],a})},function(a){return d[29]?d[30]=!0:d[30]=!1,d[30]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[31]=c.createArray(),void 0!==void 0?d[32]=(d[31].push(void 0),d[31]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[31],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[25]=c.blobs.of_string(d[17]),c.blobs.neq(d[25],void 0)?c.sequence([function(a){return d[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[4],c.i64.cast([0,2847]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[29]=a[0],a})},function(a){return d[29]?d[30]=!0:d[30]=!1,d[30]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[33]=c.createArray(),void 0!==void 0?d[34]=(d[33].push(void 0),d[33]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[33],c.i64.cast([0,3]))):c.resolve()},function(a){return c.filter(c.db.table(169).fetch(),function(a){return c.blobs.eq(a.epochAnonIdBlob,d[25])}).next().then(function(a,e){var f=a.done;a=a.value;return f?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsGetOpenEpochKeysStoredProcedure] Found a most recent epoch anon ID, but unable to locate it again in the table. This can really only happen if the tablesomehow changed in the middle of our transaction."),d[33]=c.createArray(),void 0!==void 0?d[36]=(d[33].push(void 0),d[33]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsGetOpenEpochKeysStoredProcedure","Found a most recent epoch anon ID, but unable to locate it again in the table. This can really only happen if the tablesomehow changed in the middle of our transaction.",d[33],c.i64.cast([0,3]))},function(a){return d[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[4],c.i64.cast([0,2848]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[34]=a[0],a})},function(a){return d[34]?d[35]=!0:d[35]=!1,d[35]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[36]=c.createArray(),void 0!==void 0?d[37]=(d[36].push(void 0),d[36]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[36],c.i64.cast([0,3]))):c.resolve()},function(a){return d[31]=void 0}]):(e=a.item,c.sequence([function(a){return d[37]=e.epochAnonIdBlob,d[35]="Using latest epoch: ",d[36]=c.blobs.to_string(d[37]),d[33]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsGetOpenEpochKeysStoredProcedure] ",d[33],d[35],d[33],d[36]].join("")),c.resolve()},function(a){return d[34]=new c.Map(),d[34].set("epoch_id",e.epochId),d[34].set("epoch_root_key",e.epochRootKeyBlob),d[34].set("epoch_anon_id",d[37]),d[31]=d[34]}]))})},function(a){return d[18]=d[31]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsGetOpenEpochKeysStoredProcedure] No epochs whatsoever on client! This should absolutely never happen. Deleting backup from client."),d[29]=c.createArray(),void 0!==void 0?d[32]=(d[29].push(void 0),d[29]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsGetOpenEpochKeysStoredProcedure","No epochs whatsoever on client! This should absolutely never happen. Deleting backup from client.",d[29],c.i64.cast([0,3]))},function(a){return d[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[4],c.i64.cast([0,2843]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return d[30]?d[31]=!0:d[31]=!1,d[31]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[32]=c.createArray(),void 0!==void 0?d[33]=(d[32].push(void 0),d[32]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[32],c.i64.cast([0,3]))):c.resolve()},function(a){return c.storedProcedure(b("LSDeleteBackupOnClient"),void 0,"get_open_epoch_keys",!0,d[4],"Attempted to fetch epoch keys when there are no epochs on the client.",!1)},function(a){return d[18]=void 0}])},function(a){return d[19]=c.i64.of_float(Date.now()),d[20]=c.i64.random(),d[26]="Finishing execution. Execution time: ",d[27]=c.i64.to_string(c.i64.sub(d[19],d[0])),d[28]=" ms",d[21]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsGetOpenEpochKeysStoredProcedure] ",d[21],d[26],d[21],d[27],d[21],d[28]].join("")),c.i64.eq(c.i64.mod_(d[20],c.i64.cast([0,100])),c.i64.cast([0,0]))?(d[29]=",",d[30]=c.createArray(),void 0!==void 0?d[31]=(d[30].push(void 0),d[30]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsGetOpenEpochKeysStoredProcedure",[d[26],d[29],d[27],d[29],d[28]].join(""),d[30],c.i64.cast([0,4]))):c.resolve()},function(a){return e[0]=d[18]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsRestoreWithSerializer",["LSAppendDataTraceAddon","LSBase64Encode.nop","LSGetOpenEpochKeys","LSIsMobileClient","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure] Beginning execution."),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure] Fetching locally available epochs on client from epochs table"),d[1]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[16]=(d[1].push(a.epochId),d[1])})},function(a){return d[11]="Queried locally available epochs. Count: ",d[2]=c.i64.of_int32(d[1].length),d[12]=c.i64.to_string(d[2]),d[3]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[3],d[11],d[3],d[12]].join("")),c.resolve()},function(e){return c.db.table(168).fetch().next().then(function(e,f){var g=e.done;e=e.value;return g?(g=[void 0,void 0,void 0],d[4]=g[0],d[5]=g[1],d[6]=g[2],g):(f=e.item,c.sequence([function(e){return d[19]=f.deviceId,c.i64.neq(d[19],void 0)?c.sequence([function(e){return c.db.table(190).fetch([[[a[0]]]]).next().then(function(e,h){var a=e.done;e=e.value;return a?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure] No restore payload context found."),d[24]=c.createArray(),void 0!==void 0?d[25]=(d[24].push(void 0),d[24]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure","No restore payload context found.",d[24],c.i64.cast([0,3]))},function(a){return a=[void 0,void 0,void 0],d[20]=a[0],d[21]=a[1],d[22]=a[2],a}]):(h=e.item,c.sequence([function(a){return d[34]=h.traceId,d[34]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),d[34],c.i64.cast([0,3603]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[24]=a[0],a})},function(a){return d[24]?d[25]=!0:d[25]=!1,d[25]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[35]=c.createArray(),void 0!==void 0?d[36]=(d[35].push(void 0),d[35]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[35],c.i64.cast([0,3]))):c.resolve()},function(a){return d[26]=new c.Map(),d[26].set("server_thread_key",h.serverThreadKey),d[26].set("otid",h.messageId),d[26].set("timestamp",h.unencryptedSortKey),d[26].set("wa_thread_id",h.waThreadId),c.nativeOperation(b("LSBase64Encode.nop"),f.ocmfClientStateBlob).then(function(a){return a=a,d[27]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),f.mailboxRootKeyBlob).then(function(a){return a=a,d[28]=a[0],a})},function(a){return d[29]=new c.Map(),d[29].set("ocmf_client_state_blob",d[27]==null?"":d[27]),d[29].set("mailbox_root_key",d[28]==null?"":d[28]),c.storedProcedure(b("LSGetOpenEpochKeys"),!1).then(function(a){return a=a,d[30]=a[0],a})},function(a){return d[30]!==void 0?(d[35]=d[30].get("epoch_id"),d[30],d[31]=d[35]):d[31]=void 0,d[32]=new c.Map(),d[32].set("content_type",h.contentType),d[32].set("device_id",d[19]),d[32].set("epoch_id",d[31]),d[32].set("list_id",h.listId),d[32].set("num_items",h.numItems),d[32].set("start_sort_key",h.startSortKey),d[32].set("mailbox_partial_id",h.mailboxPartialId),d[32].set("trace_id",d[34]),d[32].set("message_partial_id",h.messagePartialId),d[32].set("newer_num_items",h.newerNumItems),d[32].set("locally_available_epochs",d[1]),d[32].set("raw_identifiers",d[26]),d[32].set("raw_tokens",d[29]),d[33]=c.toJSON(d[32]),a=[d[33],c.i64.cast([0,50015]),void 0],d[20]=a[0],d[21]=a[1],d[22]=a[2],a}]))})},function(a){return a=[d[20],d[21],d[22]],d[16]=a[0],d[17]=a[1],d[18]=a[2],a}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure] Unexpected error: Device ID is null."),d[20]=c.createArray(),void 0!==void 0?d[21]=(d[20].push(void 0),d[20]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure","Unexpected error: Device ID is null.",d[20],c.i64.cast([0,3]))},function(a){return a=[void 0,void 0,void 0],d[16]=a[0],d[17]=a[1],d[18]=a[2],a}])},function(a){return a=[d[16],d[17],d[18]],d[4]=a[0],d[5]=a[1],d[6]=a[2],a}]))})},function(a){return d[8]=c.i64.of_float(Date.now()),d[9]=c.i64.random(),d[13]="Finishing execution. Execution time: ",d[14]=c.i64.to_string(c.i64.sub(d[8],d[0])),d[15]=" ms",d[10]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure] ",d[10],d[13],d[10],d[14],d[10],d[15]].join("")),c.i64.eq(c.i64.mod_(d[9],c.i64.cast([0,100])),c.i64.cast([0,0]))?(d[16]=",",d[17]=c.createArray(),void 0!==void 0?d[18]=(d[17].push(void 0),d[17]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsTaskSerializerEncryptedBackupsRestoreWithSerializerStoredProcedure",[d[13],d[16],d[14],d[16],d[15]].join(""),d[17],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[4],d[5],d[6]],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSMaxInt32",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("I64")).of_int32(2147483647);g["default"]=a}),98);
__d("RetUtil",["LSResult"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("LSResult")(a)}g.getNullableRetResult=a}),98);
__d("LSCreateDerivedKeys.nop",["CryptoLogger","I64","LSMaxInt32","LSVec","Promise","RetUtil","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f,g,j,k){var l=d("CryptoLogger").CryptoLogger("create_derived_keys");a=c("LSVec").toArray(k);if(a.length<1||a.some(function(a){return(i||(i=d("I64"))).gt(a,c("LSMaxInt32"))})){l.mustfix("Invalid key lengths for derive keys");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(void 0))}var m=a.map((i||(i=d("I64"))).to_int32),n=a.map(i.to_int32).reduce(function(a,b){return a+b},0)*8;return d("XPlatReactCrypto").subtleImportKey("raw",j,"HKDF",!1,["deriveBits"]).then(function(a){var b;return d("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:f,name:"HKDF",salt:(b=g)!=null?b:new Uint8Array(10).buffer},a,n)}).then(function(a){a=new Uint8Array(a);var b=[],e=0;for(var f=0,g=m.length;f<g;++f){var h=e+m[f];b.push(a.slice(e,h).buffer);e=h}return d("RetUtil").getNullableRetResult(c("LSVec").ofArray(b))})["catch"](function(a){l.catching(a).mustfix("Failed to create derived keys");return d("RetUtil").getNullableRetResult()})};g["default"]=a}),98);
__d("LSBinaryToHex.nop",["LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,d,e){a=Array.from(new Uint8Array(e));d=a.map(function(a){return a.toString(16).padStart(2,"0")});e=d.join("").toUpperCase();return(h||(h=b("Promise"))).resolve(c("LSResult")(e))};g["default"]=a}),98);
__d("LSGetBlobFromInt64BE.nop",["I64","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f){var g=new Uint8Array(8);g.reduceRight(function(a,b,c){b=(i||(i=d("I64"))).to_int32(i.mod_(a,i.of_string("256")));g[c]=b;return i.div(a,i.of_string("256"))},f);return(h||(h=b("Promise"))).resolve(c("LSResult")(g.buffer))};g["default"]=a}),98);
__d("LSHmac_v2.nop",["CryptoLogger","LSResult","Promise","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f,g){return d("XPlatReactCrypto").subtleImportKey("raw",f,{hash:"SHA-256",name:"HMAC"},!1,["sign"]).then(function(a){return d("XPlatReactCrypto").subtleSign("HMAC",a,g)}).then(function(a){return(h||(h=b("Promise"))).resolve(c("LSResult")(a))})["catch"](function(a){d("CryptoLogger").captureError(d("CryptoLogger").CryptoLogger("hmac_v2"),a).mustfix("Crypto signing failed");throw a})};g["default"]=a}),98);
__d("LSOcmfClientMap.nop",["CryptoLogger","LSResult","Promise","XPlatReactCrypto","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("ristretto255").__setRef("LSOcmfClientMap.nop");a=function(a,e,f,g){return(h||(h=b("Promise"))).all([d("XPlatReactCrypto").subtleDigest("SHA-512",g),i.load()]).then(function(a){var b=a[0];a=a[1];b=a.fromHash(new Uint8Array(b));a=a.scalarMult(new Uint8Array(f),b);return c("LSResult")(a.buffer)})["catch"](function(a){d("CryptoLogger").captureError(d("CryptoLogger").CryptoLogger("ocmf_client_map"),a).mustfix("Failed OcmfClientMap.");throw a})};g["default"]=a}),98);
__d("LSCryptoUtils",["FBLogger","XPlatReactTextDecoder","XPlatReactTextEncoder"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new Uint8Array(a)}function h(a){var b=new(d("XPlatReactTextEncoder").TextEncoder)();return b.encode(a)}function i(a){var b=new(d("XPlatReactTextDecoder").TextDecoder)();return b.decode(a)}function b(a){return i(new Uint8Array(a))}function e(a){return h(a).buffer}function f(a,b){var d=a.byteLength,e=b.byteLength;if(d!==e)throw c("FBLogger")("mpf_web_foundations").mustfixThrow("Mismatched lengths for modAdd, %d != %d",d,e);var f=new Uint8Array(d);new Uint8Array(d).reduceRight(function(c,d,e){d=a[e];var g=b[e];d=d+g+c;g=d>255?[d-256,1]:[d,0];f[e]=g[0];return g[1]},0);return f}g.bufToUint8=a;g.strToUint8=h;g.uint8ToStr=i;g.bufToStr=b;g.strToBuf=e;g.modAddBytes=f}),98);
__d("UInt8Array",["XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.length;if(!(b>0&&b%2===0&&/^[\da-f]+$/gi.test(a)))return;var c=[];for(var d=0,b=b/2|0;d<b;++d){var e=parseInt(a.substring(d<<1,(d<<1)+2|0),16);c.push(e)}return new Uint8Array(c)}function b(a){return d("XPlatReactCrypto").getRandomValues(new Uint8Array(a)).buffer}function c(a){a=a.filter(function(a){return a.byteLength!==0});var b=a.reduce(function(a,b){return a+b.byteLength|0},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(b,a);return a+b.byteLength|0},0);return c}g.fromHexString=a;g.getBufferWithRandomValuesFromLength=b;g.concatBytes=c}),98);
__d("OrderPreservingEncryption",["FBLogger","LSCryptoUtils","Promise","UInt8Array","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return d("XPlatReactCrypto").getRandomValues(new Uint8Array(32)).buffer}function i(a){var b=a.length;return b%2!==0?"0"+a:a}function j(a){a=BigInt(a);var b=i(a.toString(16));a=b.length;a=a/2;var c=[];for(var d=0;d<a;++d)c.push(d*2);return new Uint8Array(c.map(function(a){var c=a+2;return b.slice(a,c)}).map(function(a){return parseInt(a,16)}))}function k(a){a=a.map(function(a){return a._0});return{_0:d("UInt8Array").concatBytes(a)}}function l(a){return"OPE key has length "+String(a)+", expected  "+String(32)}function m(a,b,c){return d("XPlatReactCrypto").subtleImportKey("raw",a.buffer,"HKDF",!1,["deriveKey","deriveBits"]).then(function(a){var e=new ArrayBuffer(0);return d("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:b.buffer,name:"HKDF",salt:e},a,c*8)}).then(function(a){return{_0:d("LSCryptoUtils").bufToUint8(a)}})}function n(a,b){return{_0:d("LSCryptoUtils").modAddBytes(a._0,b)}}function o(a,e,f,g){var i=f.byteLength;if(i!==32)throw c("FBLogger")("labyrinth_web").mustfixThrow(l(i));var j=g.byteLength,o=function(a,b){var c=new Uint8Array(1+j),d=new Uint8Array(j-b).fill(0);c.set([b]);c.set(a.subarray(0,b),1);c.set(d,b+1);return c};if(j>=255)throw c("FBLogger")("labyrinth_web").mustfixThrow("Input is too large");return(h||(h=b("Promise"))).all(Array.from(g).map(function(b,c){c=o(g,c);var e=new Uint8Array(a);e[a-1]=b;b=d("LSCryptoUtils").bufToUint8(f);return m(b,c,a).then(function(a){return n(a,e)})})).then(function(a){return d("UInt8Array").concatBytes([new Uint8Array([e]),k(a)._0])})}function e(a,b,c,d){d=j(d);return o(a,b,c,d)}g.keyGen=a;g.intStringToBEBytes=j;g.buildKeyLengthErrorMsg=l;g.encryptBigEndianBytes=o;g.encryptIntString=e}),98);
__d("LSOpeEncrypt.nop",["CryptoLogger","I64","LSResult","OrderPreservingEncryption","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f,g,j){var k=d("CryptoLogger").CryptoLogger("ope_encrypt");return d("OrderPreservingEncryption").encryptBigEndianBytes((i||(i=d("I64"))).to_int32(j),1,f,new Uint8Array(g)).then(function(a){return(h||(h=b("Promise"))).resolve(c("LSResult")(a.buffer))})["catch"](function(a){d("CryptoLogger").captureError(k,a).mustfix("OpeEncrypt_impl failed");throw a})};g["default"]=a}),98);
__d("LSTruncateSortKey.nop",["CryptoLogger","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("CryptoLogger").CryptoLogger("truncate_sort_key");a=function(a,d,e){if(e.byteLength!==8)throw i.mustfixThrow("Bad length on sort key for truncation");a=new Uint8Array(e);d=a.subarray(0,2);if(d.some(function(a){return a!==0}))throw i.mustfixThrow("Bad prefix on sort key for truncation");return(h||(h=b("Promise"))).resolve(c("LSResult")(e.slice(2)))};g["default"]=a}),98);
__d("LSEncryptIdentifiersV2",["LSBase64Encode.nop","LSBinaryToHex.nop","LSGetBlobFromInt64BE.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSOpeEncrypt.nop","LSTruncateSortKey.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][encryptIdentifiersV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]=a[6].get("ocmf_shared_key"),a[6],c.nativeOperation(b("LSGetBlobFromString.nop"),a[2]).then(function(a){return a=a,d[3]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWFpbGJveF9pZF9zY29wZQ=="),d[3]).then(function(a){return a=a,d[4]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[2],d[4]).then(function(a){return a=a,d[5]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[5]).then(function(a){return a=a,d[6]=a[0],a})},function(e){return c.i64.eq(a[0],c.i64.cast([0,2]))&&c.i64.eq(a[1],c.i64.cast([0,2]))?d[7]=a[5]:d[7]=a[3],d[8]=a[6].get("ocmf_shared_key"),a[6],c.nativeOperation(b("LSGetBlobFromString.nop"),d[7]).then(function(a){return a=a,d[9]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("dGhyZWFkX2lkX3Njb3Bl"),d[9]).then(function(a){return a=a,d[10]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[8],d[10]).then(function(a){return a=a,d[11]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[11]).then(function(a){return a=a,d[12]=a[0],a})},function(e){return d[13]=a[6].get("ope_key"),a[6],c.nativeOperation(b("LSGetBlobFromInt64BE.nop"),a[4]).then(function(a){return a=a,d[14]=a[0],a})},function(a){return c.nativeOperation(b("LSTruncateSortKey.nop"),d[14]).then(function(a){return a=a,d[15]=a[0],a})},function(a){return c.nativeOperation(b("LSOpeEncrypt.nop"),d[13],d[15],c.i64.cast([0,16])).then(function(a){return a=a,d[16]=a[0],a})},function(a){return c.nativeOperation(b("LSBinaryToHex.nop"),d[16]).then(function(a){return a=a,d[17]=a[0],a})},function(e){return d[18]=a[6].get("ocmf_shared_key"),a[6],c.nativeOperation(b("LSGetBlobFromString.nop"),a[5]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),c.blob("bWVzc2FnZV9pZF9zY29wZQ=="),d[19]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return c.nativeOperation(b("LSOcmfClientMap.nop"),d[18],d[20]).then(function(a){return a=a,d[21]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[21]).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[23]=new c.Map(),d[23].set("backup_id_ocmf_partial",d[6]==null?"":d[6]),d[23].set("act_thread_id_ocmf_partial",d[12]==null?"":d[12]),d[23].set("timestamp_encrypted",d[17]==null?"":d[17]),d[23].set("otid_ocmf_partial",d[22]==null?"":d[22]),d[24]=c.i64.of_float(Date.now()),d[25]=c.i64.random(),d[27]="Finishing execution. Execution time: ",d[28]=c.i64.to_string(c.i64.sub(d[24],d[0])),d[29]=" ms",d[26]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][encryptIdentifiersV2] ",d[26],d[27],d[26],d[28],d[26],d[29]].join("")),c.i64.eq(c.i64.mod_(d[25],c.i64.cast([0,100])),c.i64.cast([0,0]))?(d[30]=",",d[31]=c.createArray(),void 0!==void 0?d[32]=(d[31].push(void 0),d[31]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"encryptIdentifiersV2",[d[27],d[30],d[28],d[30],d[29]].join(""),d[31],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[23],void 0],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("EncryptedBackupsSymmetricEncryptionUtils",[],(function(a,b,c,d,e,f){"use strict";a=16;b=28;c=16;d=128;f.hChaCha20SubKeyNonceLengthInBytes=a;f.totalNonceLengthInBytes=b;f.aesGcmTagLengthInBytes=c;f.aesGcmTagLength=d}),66);
__d("HChaCha20",["err"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}a.fromHexString=function(a){var b=a.match(/[A-Fa-f0-9]{1,2}/g);if(a.length===0||a.length%2!==0||b==null)throw c("err")('The string "'+a+'" is not valid hex.');return new Uint8Array(b.map(function(a){return parseInt(a,16)}))};a.bufferToUint32Array=function(a){var b=new DataView(a),c=[];a=a.byteLength/4;for(var d=0;d<a;d++)c.push(new DataView(b.buffer.slice(d*4,d*4+4)).getInt32(0));return Uint32Array.from(c)};a.rotate=function(a,b){a=a&4294967295;b=b&31;return(a<<b|a>>>32-b)>>>0};a.quarterRound=function(b,c,d,e){b=b;c=c;d=d;e=e;b=b+c&4294967295;e=a.rotate(e^b,16);d=d+e&4294967295;c=a.rotate(c^d,12);b=b+c&4294967295;e=a.rotate(e^b,8);d=d+e&4294967295;c=a.rotate(c^d,7);return[b>>>0,c>>>0,d>>>0,e>>>0]};var b=a.prototype;b.createHCtx=function(b,d){var e=new Uint32Array(16),f=a.fromHexString("657870616e642033322d62797465206b");if(f.byteLength!==16)throw c("err")("Could not create context. Invalid constant buffer length of "+f.byteLength+". Expected a length of 16");else if(b.byteLength!==32)throw c("err")("Could not create context. Invalid key buffer length of "+b.byteLength+". Expected a length of 32");else if(d.byteLength!==16)throw c("err")("Could not create context. Invalid nonce buffer length of "+d.byteLength+". Expected a length of 16");f=a.bufferToUint32Array(f.buffer);b=a.bufferToUint32Array(b);d=a.bufferToUint32Array(d);e.set(f);e.set(b,f.length);e.set(d,f.length+b.length);return e.buffer};b.hChaCha20Bytes=function(b,c){c=new DataView(this.createHCtx(c,b));b=c.getInt32(0);var d=c.getInt32(1<<2),e=c.getInt32(2<<2),f=c.getInt32(3<<2),g=c.getInt32(4<<2),h=c.getInt32(5<<2),i=c.getInt32(6<<2),j=c.getInt32(7<<2),k=c.getInt32(8<<2),l=c.getInt32(9<<2),m=c.getInt32(10<<2),n=c.getInt32(11<<2),o=c.getInt32(12<<2),p=c.getInt32(13<<2),q=c.getInt32(14<<2);c=c.getInt32(15<<2);for(var r=0;r<10;r++){var s=a.quarterRound(b,g,k,o);b=s[0];g=s[1];k=s[2];o=s[3];s=a.quarterRound(d,h,l,p);d=s[0];h=s[1];l=s[2];p=s[3];s=a.quarterRound(e,i,m,q);e=s[0];i=s[1];m=s[2];q=s[3];s=a.quarterRound(f,j,n,c);f=s[0];j=s[1];n=s[2];c=s[3];s=a.quarterRound(b,h,m,c);b=s[0];h=s[1];m=s[2];c=s[3];s=a.quarterRound(d,i,n,o);d=s[0];i=s[1];n=s[2];o=s[3];s=a.quarterRound(e,j,k,p);e=s[0];j=s[1];k=s[2];p=s[3];s=a.quarterRound(f,g,l,q);f=s[0];g=s[1];l=s[2];q=s[3]}return Uint32Array.from([b,d,e,f,o,p,q,c]).buffer};return a}();g.HChaCha20=a}),98);
__d("SymmetricEncryptionPaddingUtils",["XPlatReactTextEncoder"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a<10)return 10-a;var b=Math.floor(Math.log2(a)),c=Math.floor(Math.log2(b))+1;b=b-c;c=(1<<b)-1;b=a+c&(c^-1);return b-a}function i(a){var b=Uint32Array.BYTES_PER_ELEMENT,c=a.byteLength,d=h(c);d=b+c+d;d=new DataView(new ArrayBuffer(d));d.setUint32(0,c);c=new Uint8Array(d.buffer);c.set(new Uint8Array(a),b);return c.buffer}function a(a){var b=new(d("XPlatReactTextEncoder").TextEncoder)();b=b.encode(a).buffer;return i(b)}function b(a){var b=Uint32Array.BYTES_PER_ELEMENT,c=new DataView(a);if(c.byteLength<b)return;var d=a.byteLength;c=c.getUint32(0);d=d-b;if(c>=0&&c<=d)return a.slice(b,b+c)}g.getPaddingLength=h;g.padData=i;g.pad=a;g.stripPadding=b}),98);
__d("LSSymmetricEncryptionCreateEncryptedData.nop",["CryptoLogger","EncryptedBackupsSymmetricEncryptionUtils","HChaCha20","Promise","RetUtil","SymmetricEncryptionPaddingUtils","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,c,e,f,g){var i=d("CryptoLogger").CryptoLogger("symmetric_encryption_create_encrypted_data"),j=d("SymmetricEncryptionPaddingUtils").padData(g),k=d("XPlatReactCrypto").getRandomValues(new Uint8Array(d("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes));a=new(d("HChaCha20").HChaCha20)();c=a.hChaCha20Bytes(k.slice(0,d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer,e);return d("XPlatReactCrypto").subtleImportKey("raw",c,"AES-GCM",!1,["encrypt"]).then(function(a){return d("XPlatReactCrypto").subtleEncrypt({additionalData:f,iv:new Uint8Array(k.slice(d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer),name:"AES-GCM",tagLength:d("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLength},a,j)}).then(function(a){var c=k.byteLength+a.byteLength;c=new Uint8Array(c);c.set(k);c.set(new Uint8Array(a),d("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes);return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(c.buffer))})["catch"](function(a){d("CryptoLogger").captureError(i,a).mustfix("symmetric data encryption failed");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult())})};g["default"]=a}),98);
__d("LSSymmetricEncryptionCreateEncryptedString.nop",["Base64Utils","CryptoLogger","LSCryptoUtils","LSSymmetricEncryptionCreateEncryptedData.nop","Promise","RetUtil"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f,g,i){var j=d("CryptoLogger").CryptoLogger("symmetric_encryption_create_encrypted_string");return c("LSSymmetricEncryptionCreateEncryptedData.nop")(a,e,f,g,d("LSCryptoUtils").strToBuf(i)).then(function(a){return a[0]}).then(function(a){return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(a?d("Base64Utils").fromArrayBuffer(a):void 0))})["catch"](function(a){d("CryptoLogger").captureError(j,a).mustfix("symmetric string encryption failed");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult())})};g["default"]=a}),98);
__d("LSEncryptMessagePayloadV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSLogMebClientEvent.nop","LSSymmetricEncryptionCreateEncryptedString.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][encryptMessagePayloadV2] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]=a[2].get("message_payload_encryption_keys"),a[2],d[3]=d[2].get("payload_key"),d[2],c.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedString.nop"),d[3],c.blobs.of_string(["message_thread","_",a[1]].join("")),a[3]).then(function(a){return a=a,d[4]=a[0],a})},function(e){return d[4]!==void 0?c.sequence([function(a){return d[13]=d[2].get("encryption_version"),d[2],d[14]=d[2].get("epoch_anon_id"),d[2],d[15]=d[2].get("epoch_root_key"),d[2],d[16]=d[2].get("payload_key"),d[2],d[17]=d[2].get("payload_fallback_key"),d[2],d[18]=c.createArray(),d[46]=(d[18].push(c.i64.cast([0,6])),d[18]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_anon_id_debug").then(function(a){return a=a,d[19]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[19],void 0,d[14],d[18]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[20]?d[21]=!1:d[21]=!0,d[21]?c.resolve(d[22]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[20],c.i64.cast([0,0])).then(function(a){return a=a,d[46]=a[0],d[47]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[46]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return d[22]=d[48]==null?"":d[48]}])},function(a){return d[23]=c.createArray(),d[46]=(d[23].push(c.i64.cast([0,6])),d[23]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_debug").then(function(a){return a=a,d[24]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[24],void 0,d[15],d[23]).then(function(a){return a=a,d[25]=a[0],a})},function(a){return d[25]?d[26]=!1:d[26]=!0,d[26]?c.resolve(d[27]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[25],c.i64.cast([0,0])).then(function(a){return a=a,d[46]=a[0],d[47]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[46]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return d[27]=d[48]==null?"":d[48]}])},function(a){return d[28]=c.createArray(),d[46]=(d[28].push(c.i64.cast([0,6])),d[28]),c.nativeOperation(b("LSGetBlobFromString.nop"),"message_key_debug").then(function(a){return a=a,d[29]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[29],void 0,d[16],d[28]).then(function(a){return a=a,d[30]=a[0],a})},function(a){return d[30]?d[31]=!1:d[31]=!0,d[31]?c.resolve(d[32]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[30],c.i64.cast([0,0])).then(function(a){return a=a,d[46]=a[0],d[47]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[46]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return d[32]=d[48]==null?"":d[48]}])},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[15]).then(function(a){return a=a,d[33]=a[0],a})},function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),[d[33]==null?"":d[33],a[1]].join("")).then(function(a){return a=a,d[34]=a[0],a})},function(a){return d[35]=c.createArray(),d[46]=(d[35].push(c.i64.cast([0,6])),d[35]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_thread_id_debug").then(function(a){return a=a,d[36]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[36],void 0,d[34],d[35]).then(function(a){return a=a,d[37]=a[0],a})},function(a){return d[37]?d[38]=!1:d[38]=!0,d[38]?c.resolve(d[39]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[37],c.i64.cast([0,0])).then(function(a){return a=a,d[46]=a[0],d[47]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[46]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return d[39]=d[48]==null?"":d[48]}])},function(a){return d[40]=":",c.blobs.neq(d[15],void 0)?c.sequence([function(a){return d[46]=c.createArray(),d[52]=(d[46].push(c.i64.cast([0,18])),d[46]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[15],d[46]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[47]!==void 0?c.sequence([function(a){return d[52]=c.i64.of_int32(d[47].length),c.i64.ge(d[52],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[47],c.i64.cast([0,0])).then(function(a){return a=a,d[54]=a[0],d[55]=a[1],a})},function(a){return d[53]=d[54]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[54]=c.createArray(),void 0!==void 0?d[55]=(d[54].push(void 0),d[54]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",d[54],c.i64.cast([0,3]))},function(a){return d[53]=void 0}])},function(a){return d[48]=d[53]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[52]=c.createArray(),void 0!==void 0?d[53]=(d[52].push(void 0),d[52]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",d[52],c.i64.cast([0,3]))},function(a){return d[48]=void 0}])},function(a){return c.blobs.neq(d[48],void 0)?d[49]=!0:d[49]=!1,d[49]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.nativeOperation(b("LSBase64Encode.nop"),d[48]).then(function(a){return a=a,d[50]=a[0],a})},function(a){return d[50]!==void 0?d[51]=d[50]:d[51]="encodingfailed",d[41]=d[51]}]):c.resolve(d[41]="null")},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[14]).then(function(a){return a=a,d[42]=a[0],a})},function(b){return d[43]=new c.Map(),d[43].set("encryption_version",d[13]),d[43].set("epoch_anon_id",d[42]==null?"":d[42]),d[43].set("message_encryption_values",[d[22],d[40],d[27],d[40],d[32],d[40],d[39]].join("")),d[43].set("root_key_fingerprint",d[41]),d[43].set("backup_id",a[0]),d[44]=c.toJSON(d[43]),d[45]=new c.Map(),d[45].set("encrypted_message_payload",d[4]),d[45].set("value_secret_ref",d[44]),b=[d[45],void 0],d[5]=b[0],d[6]=b[1],b}]):c.resolve((d[13]=new c.Map(),d[13].set("error_code",c.i64.cast([0,40])),d[13].set("stored_procedure","LSEncryptedBackupsEncryptMessagePayloadV2StoredProcedure"),d[13].set("error_message",""),e=[void 0,d[13]],d[5]=e[0],d[6]=e[1],e))},function(a){return d[7]=c.i64.of_float(Date.now()),d[8]=c.i64.random(),d[10]="Finishing execution. Execution time: ",d[11]=c.i64.to_string(c.i64.sub(d[7],d[0])),d[12]=" ms",d[9]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][encryptMessagePayloadV2] ",d[9],d[10],d[9],d[11],d[9],d[12]].join("")),c.i64.eq(c.i64.mod_(d[8],c.i64.cast([0,100])),c.i64.cast([0,0]))?(d[13]=",",d[14]=c.createArray(),void 0!==void 0?d[15]=(d[14].push(void 0),d[14]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"encryptMessagePayloadV2",[d[10],d[13],d[11],d[13],d[12]].join(""),d[14],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[5],d[6]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSGetLatestEpochKeys",["LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][getLatestEpochKeys] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[2]="",d[3]=void 0,d[4]=void 0,a[0]?c.resolve(0):c.i64.neq(void 0,void 0)?c.db.table(169).fetch([[[void 0]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?0:(b=a.item,d[2]=c.blobs.to_string(b.epochAnonIdBlob),d[3]=b.epochId,d[4]=b.epochRootKeyBlob)}):c.resolve()},function(b){return c.i64.neq(d[3],void 0)?c.resolve(0):c.forEach(c.filter(c.db.table(169).fetch(),function(b){return a[0]||c.i64.eq(b.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[15]=c.blobs.to_string(a.epochAnonIdBlob),c.i64.eq([0,d[15].length],[0,d[2].length])?d[14]=d[15]>d[2]:d[14]=c.i64.gt([0,d[15].length],[0,d[2].length]),d[14]?(d[2]=d[15],d[3]=a.epochId,d[4]=a.epochRootKeyBlob):0})},function(a){return d[10]=c.blobs.of_string(d[2]),c.i64.neq(d[3],void 0)?(c.blobs.neq(d[10],void 0)?(c.blobs.neq(d[4],void 0)?(d[18]=new c.Map(),d[18].set("epoch_id",d[3]),d[18].set("epoch_root_key",d[4]),d[18].set("epoch_anon_id",d[10]),d[19]=new c.Map(),d[19].set("epoch_keys",d[18]),a=[d[19],void 0],d[16]=a[0],d[17]=a[1],a):(d[18]=new c.Map(),d[18].set("error_code",c.i64.cast([0,402])),d[18].set("error_message","failed to query latest epoch"),d[18].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,d[18]],d[16]=a[0],d[17]=a[1],a),a=[d[16],d[17]],d[14]=a[0],d[15]=a[1],a):(d[16]=new c.Map(),d[16].set("error_code",c.i64.cast([0,403])),d[16].set("error_message","failed to query latest epoch"),d[16].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,d[16]],d[14]=a[0],d[15]=a[1],a),a=[d[14],d[15]],d[5]=a[0],d[6]=a[1],a):(d[14]=new c.Map(),d[14].set("error_code",c.i64.cast([0,400])),d[14].set("error_message","failed to query latest epoch"),d[14].set("stored_procedure","LSEncryptedBackupsGetLatestEpochKeysStoredProcedure"),a=[void 0,d[14]],d[5]=a[0],d[6]=a[1],a),d[7]=c.i64.of_float(Date.now()),d[8]=c.i64.random(),d[11]="Finishing execution. Execution time: ",d[12]=c.i64.to_string(c.i64.sub(d[7],d[0])),d[13]=" ms",d[9]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][getLatestEpochKeys] ",d[9],d[11],d[9],d[12],d[9],d[13]].join("")),c.i64.eq(c.i64.mod_(d[8],c.i64.cast([0,100])),c.i64.cast([0,0]))?(d[14]=",",d[15]=c.createArray(),void 0!==void 0?d[16]=(d[15].push(void 0),d[15]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"getLatestEpochKeys",[d[11],d[14],d[12],d[14],d[13]].join(""),d[15],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[5],d[6]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSIsEncryptionVersionSecure",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.i64.eq(a[0],b.i64.cast([0,4]))?c[0]=!1:(b.i64.eq(a[0],b.i64.cast([0,3]))?c[1]=!0:(b.i64.eq(a[0],b.i64.cast([0,2]))?c[2]=!0:(b.i64.eq(a[0],b.i64.cast([0,0]))?c[3]=!0:(b.i64.eq(a[0],b.i64.cast([0,99]))?c[4]=!1:c[4]=!1,c[3]=c[4]),c[2]=c[3]),c[1]=c[2]),c[0]=c[1]),d[0]=c[0],b.resolve(d)}e.exports=a}),null);
__d("LSLoadAndEncryptProtobufWithInputsV2",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSLogMebClientEvent.nop","LSQueryLocalPersistenceStoreForBackup.nop","LSQueryLocalPersistenceStoreSupplementalForBackup.nop","LSQueryLocalPersistenceStoreTagsForBackup.nop","LSSymmetricEncryptionCreateEncryptedData.nop","gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1],e=[],f=[];return d.sequence([function(g){return d.sequence([function(f){return e[0]=d.i64.of_float(Date.now()),function(a){d.logger(a).info(a)}("[EncryptedBackups][loadAndEncryptProtobufWithInputsV2] Beginning execution."),e[1]=d.i64.of_float(Date.now()),(c("gkx")("23657")||c("gkx")("26375"))&&(c("gkx")("26377")||c("gkx")("687"))?d.sequence([function(c){return d.i64.eq(a[0],d.i64.cast([0,1]))?d.sequence([function(c){return d.nativeOperation(b("LSQueryLocalPersistenceStoreForBackup.nop"),a[1],a[2]).then(function(a){return a=a,e[12]=a[0],e[13]=a[1],e[14]=a[2],a})},function(c){return d.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,e[15]=a[0],a})},function(c){return d.blobs.neq(e[12],void 0)?d.sequence([function(c){return e[18]=a[5].get("message_payload_encryption_keys"),a[5],e[19]=e[18].get("payload_key"),e[18],d.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),e[19],d.blobs.of_string(["message_thread","_",a[1]].join("")),e[12]).then(function(a){return a=a,e[20]=a[0],a})},function(a){return d.blobs.neq(e[20],void 0)?d.sequence([function(a){return d.nativeOperation(b("LSBase64Encode.nop"),e[20]).then(function(a){return a=a,e[24]=a[0],a})},function(a){return e[21]=e[24]}]):d.resolve(e[21]=void 0)},function(b){return e[21]!==void 0?(e[15]!==void 0?(e[26]=new d.Map(),e[26].set("message_tags",e[15]),e[27]=d.toJSON(e[26]),e[24]=e[27]):e[24]=void 0,e[25]=new d.Map(),e[25].set("backup_action",a[0]),e[25].set("protobuf_encrypted",e[21]),e[25].set("supplemental_data_encrypted",void 0),e[25].set("timestamp_ms",a[4]),e[25].set("message_tags",e[24]),b=[e[25],void 0],e[22]=b[0],e[23]=b[1],b):(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),e[24]=new d.Map(),e[24].set("error_code",d.i64.cast([0,62])),e[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[24].set("error_message",""),b=[void 0,e[24]],e[22]=b[0],e[23]=b[1],b),b=[e[22],e[23]],e[16]=b[0],e[17]=b[1],b}]):d.resolve((e[14]?(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),e[20]=new d.Map(),e[20].set("error_code",d.i64.cast([0,70])),e[20].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[20].set("error_message",""),c=[void 0,e[20]],e[18]=c[0],e[19]=c[1],c):(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),e[20]=new d.Map(),e[20].set("error_code",d.i64.cast([0,63])),e[20].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[20].set("error_message",""),c=[void 0,e[20]],e[18]=c[0],e[19]=c[1],c),c=[e[18],e[19]],e[16]=c[0],e[17]=c[1],c))},function(a){return a=[e[16],e[17]],e[10]=a[0],e[11]=a[1],a}]):d.sequence([function(c){return d.i64.eq(a[0],d.i64.cast([0,2]))?d.sequence([function(c){return a[3]!==void 0?d.sequence([function(c){return d.nativeOperation(b("LSQueryLocalPersistenceStoreSupplementalForBackup.nop"),a[1],a[2],a[3]).then(function(a){return a=a,e[16]=a[0],e[17]=a[1],a})},function(c){return d.blobs.neq(e[16],void 0)?d.sequence([function(c){return e[20]=a[5].get("mailbox_root_key_v2"),a[5],d.blobs.neq(e[20],void 0)?d.sequence([function(c){return e[23]=a[5].get("message_payload_encryption_keys"),a[5],e[24]=e[23].get("epoch_root_key"),e[23],e[25]=d.createArray(),e[38]=(e[25].push(d.i64.cast([0,32])),e[25]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5zdXBwbGVtZW50YWxfcHJmX2tleQ=="),void 0,e[20],e[25]).then(function(a){return a=a,e[26]=a[0],a})},function(a){return e[26]!==void 0?d.sequence([function(a){return e[38]=d.i64.of_int32(e[26].length),d.i64.ge(e[38],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[26],d.i64.cast([0,0])).then(function(a){return a=a,e[40]=a[0],e[41]=a[1],a})},function(a){return e[39]=e[40]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[40]=d.createArray(),void 0!==void 0?e[41]=(e[40].push(void 0),e[40]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",e[40],d.i64.cast([0,3]))},function(a){return e[39]=void 0}])},function(a){return e[27]=e[39]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[38]=d.createArray(),void 0!==void 0?e[39]=(e[38].push(void 0),e[38]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",e[38],d.i64.cast([0,3]))},function(a){return e[27]=void 0}])},function(a){return d.blobs.neq(e[27],void 0)?e[28]=!0:e[28]=!1,e[28]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),e[29]=d.createArray(),e[38]=(e[29].push(d.i64.cast([0,32])),e[29]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5zdXBwbGVtZW50YWxfZW5jX2tleQ=="),void 0,e[24],e[29]).then(function(a){return a=a,e[30]=a[0],a})},function(a){return e[30]!==void 0?d.sequence([function(a){return e[38]=d.i64.of_int32(e[30].length),d.i64.ge(e[38],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[30],d.i64.cast([0,0])).then(function(a){return a=a,e[40]=a[0],e[41]=a[1],a})},function(a){return e[39]=e[40]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[40]=d.createArray(),void 0!==void 0?e[41]=(e[40].push(void 0),e[40]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",e[40],d.i64.cast([0,3]))},function(a){return e[39]=void 0}])},function(a){return e[31]=e[39]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[38]=d.createArray(),void 0!==void 0?e[39]=(e[38].push(void 0),e[38]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",e[38],d.i64.cast([0,3]))},function(a){return e[31]=void 0}])},function(c){return d.blobs.neq(e[31],void 0)?e[32]=!0:e[32]=!1,e[32]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),d.nativeOperation(b("LSGetBlobFromString.nop"),a[3]).then(function(a){return a=a,e[33]=a[0],a})},function(a){return d.nativeOperation(b("LSHmac_v2.nop"),e[27],e[33]).then(function(a){return a=a,e[34]=a[0],a})},function(a){return d.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),e[31],d.blob("c3VwcGxlbWVudGFsX2VuY19hYWQ="),e[33]).then(function(a){return a=a,e[35]=a[0],a})},function(c){return d.blobs.neq(e[35],void 0)?d.sequence([function(c){return e[38]=new d.Map(),e[38].set("sk_ciphertext",e[35]),e[38].set("sk_hash",e[34]),e[39]=a[5].get("message_payload_encryption_keys"),a[5],e[40]=e[39].get("payload_key"),e[39],d.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),e[40],d.blobs.of_string(["message_thread","_",a[1]].join("")),e[16]).then(function(a){return a=a,e[41]=a[0],a})},function(a){return d.blobs.neq(e[41],void 0)?d.sequence([function(a){return d.nativeOperation(b("LSBase64Encode.nop"),e[41]).then(function(a){return a=a,e[45]=a[0],a})},function(a){return e[42]=e[45]}]):d.resolve(e[42]=void 0)},function(b){return e[42]!==void 0?(e[45]=new d.Map(),e[45].set("backup_action",a[0]),e[45].set("protobuf_encrypted",e[42]),e[45].set("supplemental_data_encrypted",e[38]),e[45].set("timestamp_ms",a[4]),e[45].set("message_tags",void 0),b=[e[45],void 0],e[43]=b[0],e[44]=b[1],b):(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),e[45]=new d.Map(),e[45].set("error_code",d.i64.cast([0,62])),e[45].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[45].set("error_message",""),b=[void 0,e[45]],e[43]=b[0],e[44]=b[1],b),b=[e[43],e[44]],e[36]=b[0],e[37]=b[1],b}]):d.resolve((function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_ENCRYPTION_FAILED"),e[38]=new d.Map(),e[38].set("error_code",d.i64.cast([0,66])),e[38].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[38].set("error_message",""),c=[void 0,e[38]],e[36]=c[0],e[37]=c[1],c))},function(a){return a=[e[36],e[37]],e[21]=a[0],e[22]=a[1],a}]):d.resolve((function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error NULL_MAILBOX_ROOT_KEY_V2"),e[23]=new d.Map(),e[23].set("error_code",d.i64.cast([0,27])),e[23].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[23].set("error_message",""),c=[void 0,e[23]],e[21]=c[0],e[22]=c[1],c))},function(a){return a=[e[21],e[22]],e[18]=a[0],e[19]=a[1],a}]):d.resolve((function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_SUPPLEMENTAL_TABLE"),e[20]=new d.Map(),e[20].set("error_code",d.i64.cast([0,64])),e[20].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[20].set("error_message",""),c=[void 0,e[20]],e[18]=c[0],e[19]=c[1],c))},function(a){return a=[e[18],e[19]],e[14]=a[0],e[15]=a[1],a}]):d.resolve((function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE"),e[16]=new d.Map(),e[16].set("error_code",d.i64.cast([0,65])),e[16].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[16].set("error_message",""),c=[void 0,e[16]],e[14]=c[0],e[15]=c[1],c))},function(a){return a=[e[14],e[15]],e[12]=a[0],e[13]=a[1],a}]):d.sequence([function(c){return d.i64.eq(a[0],d.i64.cast([0,4]))?d.sequence([function(c){return d.nativeOperation(b("LSQueryLocalPersistenceStoreForBackup.nop"),a[1],a[2]).then(function(a){return a=a,e[16]=a[0],e[17]=a[1],e[18]=a[2],a})},function(c){return d.nativeOperation(b("LSQueryLocalPersistenceStoreTagsForBackup.nop"),a[1],a[2]).then(function(a){return a=a,e[19]=a[0],a})},function(c){return d.blobs.neq(e[16],void 0)?d.sequence([function(c){return e[22]=a[5].get("message_payload_encryption_keys"),a[5],e[23]=e[22].get("payload_key"),e[22],d.nativeOperation(b("LSSymmetricEncryptionCreateEncryptedData.nop"),e[23],d.blobs.of_string(["message_thread","_",a[1]].join("")),e[16]).then(function(a){return a=a,e[24]=a[0],a})},function(a){return d.blobs.neq(e[24],void 0)?d.sequence([function(a){return d.nativeOperation(b("LSBase64Encode.nop"),e[24]).then(function(a){return a=a,e[28]=a[0],a})},function(a){return e[25]=e[28]}]):d.resolve(e[25]=void 0)},function(b){return e[25]!==void 0?(e[19]!==void 0?(e[30]=new d.Map(),e[30].set("message_tags",e[19]),e[31]=d.toJSON(e[30]),e[28]=e[31]):e[28]=void 0,e[29]=new d.Map(),e[29].set("backup_action",a[0]),e[29].set("protobuf_encrypted",e[25]),e[29].set("supplemental_data_encrypted",void 0),e[29].set("timestamp_ms",a[4]),e[29].set("message_tags",e[28]),b=[e[29],void 0],e[26]=b[0],e[27]=b[1],b):(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ENCRYPTION_FAILED"),e[28]=new d.Map(),e[28].set("error_code",d.i64.cast([0,62])),e[28].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[28].set("error_message",""),b=[void 0,e[28]],e[26]=b[0],e[27]=b[1],b),b=[e[26],e[27]],e[20]=b[0],e[21]=b[1],b}]):d.resolve((e[18]?(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_ALREADY_DELETED"),e[24]=new d.Map(),e[24].set("error_code",d.i64.cast([0,70])),e[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[24].set("error_message",""),c=[void 0,e[24]],e[22]=c[0],e[23]=c[1],c):(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE"),e[24]=new d.Map(),e[24].set("error_code",d.i64.cast([0,63])),e[24].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[24].set("error_message",""),c=[void 0,e[24]],e[22]=c[0],e[23]=c[1],c),c=[e[22],e[23]],e[20]=c[0],e[21]=c[1],c))},function(a){return a=[e[20],e[21]],e[14]=a[0],e[15]=a[1],a}]):d.resolve((d.i64.eq(a[0],d.i64.cast([0,3]))?(e[18]=new d.Map(),e[18].set("backup_action",a[0]),e[18].set("protobuf_encrypted",void 0),e[18].set("supplemental_data_encrypted",void 0),e[18].set("timestamp_ms",a[4]),e[18].set("message_tags",void 0),c=[e[18],void 0],e[16]=c[0],e[17]=c[1],c):(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error UNKNOWN"),e[18]=new d.Map(),e[18].set("error_code",d.i64.cast([0,603])),e[18].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[18].set("error_message",""),c=[void 0,e[18]],e[16]=c[0],e[17]=c[1],c),c=[e[16],e[17]],e[14]=c[0],e[15]=c[1],c))},function(a){return a=[e[14],e[15]],e[12]=a[0],e[13]=a[1],a}])},function(a){return a=[e[12],e[13]],e[10]=a[0],e[11]=a[1],a}])},function(a){return a=[e[10],e[11]],e[2]=a[0],e[3]=a[1],a}]):d.resolve((function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure] Returning error NOT_SUPPORTED_ON_WEB"),e[10]=new d.Map(),e[10].set("error_code",d.i64.cast([0,7])),e[10].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufWithInputsV2StoredProcedure"),e[10].set("error_message",""),f=[void 0,e[10]],e[2]=f[0],e[3]=f[1],f))},function(a){return e[4]=d.i64.of_float(Date.now()),e[5]=d.i64.random(),e[7]="Finishing execution. Execution time: ",e[8]=d.i64.to_string(d.i64.sub(e[4],e[0])),e[9]=" ms",e[6]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][loadAndEncryptProtobufWithInputsV2] ",e[6],e[7],e[6],e[8],e[6],e[9]].join("")),d.i64.eq(d.i64.mod_(e[5],d.i64.cast([0,100])),d.i64.cast([0,0]))?(e[10]=",",e[11]=d.createArray(),void 0!==void 0?e[12]=(e[11].push(void 0),e[11]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"loadAndEncryptProtobufWithInputsV2",[e[7],e[10],e[8],e[10],e[9]].join(""),e[11],d.i64.cast([0,4]))):d.resolve()},function(a){return a=[e[2],e[3]],f[0]=a[0],f[1]=a[1],a}])},function(a){return d.resolve(f)}])}d=a;g["default"]=d}),98);
__d("LSLoadAndEncryptProtobufV2",["LSLoadAndEncryptProtobufWithInputsV2","LSLogMebClientEvent.nop","gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1],e=[],f=[];return d.sequence([function(g){return d.sequence([function(f){return e[0]=d.i64.of_float(Date.now()),function(a){d.logger(a).info(a)}("[EncryptedBackups][loadAndEncryptProtobufV2] Beginning execution."),e[1]=d.i64.of_float(Date.now()),(c("gkx")("23657")||c("gkx")("26375"))&&(c("gkx")("26377")||c("gkx")("687"))?d.sequence([function(c){return d.filter(d.db.table(305).fetch(),function(b){return d.i64.eq(b.pendingBackupTaskId,a[0])}).next().then(function(c,f){var g=c.done;c=c.value;return g?(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure] Returning error PROTOBUF_CONTEXT_ROW_NOT_FOUND"),e[13]=new d.Map(),e[13].set("error_code",d.i64.cast([0,67])),e[13].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure"),e[13].set("error_message",""),g=[void 0,e[13]],e[10]=g[0],e[11]=g[1],g):(f=c.item,d.sequence([function(c){return d.storedProcedure(b("LSLoadAndEncryptProtobufWithInputsV2"),f.backupAction,a[2],f.toplevelOfflineThreadingId,f.supplementalKey,f.messageTimestampMs,a[1]).then(function(a){return a=a,e[13]=a[0],e[14]=a[1],a})},function(a){return a=[e[13],e[14]],e[10]=a[0],e[11]=a[1],a}]))})},function(a){return a=[e[10],e[11]],e[2]=a[0],e[3]=a[1],a}]):d.resolve((function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure] Returning error NOT_SUPPORTED_ON_WEB"),e[10]=new d.Map(),e[10].set("error_code",d.i64.cast([0,7])),e[10].set("stored_procedure","LSEncryptedBackupsLoadAndEncryptProtobufV2StoredProcedure"),e[10].set("error_message",""),f=[void 0,e[10]],e[2]=f[0],e[3]=f[1],f))},function(a){return e[4]=d.i64.of_float(Date.now()),e[5]=d.i64.random(),e[7]="Finishing execution. Execution time: ",e[8]=d.i64.to_string(d.i64.sub(e[4],e[0])),e[9]=" ms",e[6]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][loadAndEncryptProtobufV2] ",e[6],e[7],e[6],e[8],e[6],e[9]].join("")),d.i64.eq(d.i64.mod_(e[5],d.i64.cast([0,100])),d.i64.cast([0,0]))?(e[10]=",",e[11]=d.createArray(),void 0!==void 0?e[12]=(e[11].push(void 0),e[11]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"loadAndEncryptProtobufV2",[e[7],e[10],e[8],e[10],e[9]].join(""),e[11],d.i64.cast([0,4]))):d.resolve()},function(a){return a=[e[2],e[3]],f[0]=a[0],f[1]=a[1],a}])},function(a){return d.resolve(f)}])}d=a;g["default"]=d}),98);
__d("LSSerializeBackupPayloadV2",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSEncryptIdentifiersV2","LSEncryptMessagePayloadV2","LSGetBlobFromString.nop","LSGetLatestEpochKeys","LSIsEncryptionVersionSecure","LSIsMobileClient","LSLoadAndEncryptProtobufV2","LSLogMebClientEvent.nop","gkx","justknobx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1],e=[],f=[];return d.sequence([function(g){return d.sequence([function(f){return e[0]=d.i64.of_float(Date.now()),function(a){d.logger(a).info(a)}("[EncryptedBackups][serializeBackupPayloadV2] Beginning execution."),e[1]=d.i64.of_float(Date.now()),e[9]=d.i64.mul(e[1],d.i64.cast([0,1e6])),(c("gkx")("23657")||c("gkx")("26375"))&&c("justknobx")._("1071")?d.sequence([function(c){return d.islc(d.filter(d.db.table(168).fetch(),function(a){return d.i64.eq(a.authorityLevel,d.i64.cast([0,80]))||!1}),0,d.i64.to_float(d.i64.cast([0,1]))).next().then(function(c,f){var g=c.done;c=c.value;return g?d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[30]=d.i64.of_float(Date.now()),b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[30],d.i64.cast([0,1e6])),e[9]),void 0],e[18]=b[0],e[19]=b[1],e[20]=b[2],e[21]=b[3],e[22]=b[4],e[23]=b[5],e[24]=b[6],b):(f=c.item,e[30]=d.i64.of_float(Date.now()),b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[30],d.i64.cast([0,1e6])),e[9]),void 0],e[18]=b[0],e[19]=b[1],e[20]=b[2],e[21]=b[3],e[22]=b[4],e[23]=b[5],e[24]=b[6],b)})},function(a){return e[26]=new d.Map(),e[26].set("task_id",e[18]),e[26].set("queue_name",e[19]),e[26].set("enqueue_timestamp_ms",e[20]),e[26].set("priority",e[21]),e[26].set("first_executed_timestamp_ms",e[22]),e[26].set("execution_time_ns",e[23]),e[26].set("echo_encoding_execution_time_ns",e[24]),e[27]=new d.Map(),e[27].set("task_metadata",e[26]),e[27].set("action_type",void 0),e[27].set("content_type",void 0),e[27].set("identifiers",void 0),e[27].set("task_creation_source",void 0),e[27].set("message_payload_source",d.i64.cast([0,2])),e[28]=new d.Map(),e[28].set("error_code",d.i64.cast([0,1])),e[28].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[28].set("error_message",""),e[29]=d.createArray(),a=[void 0,e[28],e[27],e[29]],e[13]=a[0],e[14]=a[1],e[15]=a[2],e[16]=a[3],a}]):(f=c.item,d.sequence([function(a){return e[27]=f.mailboxRootKeyBlob,e[28]=f.deviceId,e[26]=f.backupTenancy,e[25]=f.encryptionVersion,d.i64.neq(void 0,void 0)?d.resolve(e[18]=void 0):d.sequence([function(a){return e[29]=d.createArray(),d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,0])).then(function(a){return a=a,e[30]=a[0],a})},function(a){return e[30]?e[39]=(e[29].push(d.i64.cast([0,0])),e[29]):0,d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,2])).then(function(a){return a=a,e[31]=a[0],a})},function(a){return e[31]?e[39]=(e[29].push(d.i64.cast([0,2])),e[29]):0,d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,3])).then(function(a){return a=a,e[32]=a[0],a})},function(a){return e[32]?e[39]=(e[29].push(d.i64.cast([0,3])),e[29]):0,d.storedProcedure(b("LSIsEncryptionVersionSecure"),d.i64.cast([0,4])).then(function(a){return a=a,e[33]=a[0],a})},function(a){return e[33]?e[39]=(e[29].push(d.i64.cast([0,4])),e[29]):0,e[34]=d.createArray(),e[35]=d.i64.of_int32(e[29].length),d.i64.gt(e[35],d.i64.cast([0,0]))?d.loopAsync(e[35],function(a){return e[39]=a,d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[29],e[39]).then(function(a){return a=a,e[40]=a[0],e[41]=a[1],a})},function(a){return e[42]=(e[34].push(e[40]),e[34])}])}):d.resolve()},function(a){return d.sequence([function(a){return e[39]=d.createArray(),e[40]=d.i64.of_int32(e[34].length),d.i64.gt(e[40],d.i64.cast([0,0]))?d.loopAsync(e[40],function(a){return e[42]=a,d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[34],e[42]).then(function(a){return a=a,e[43]=a[0],e[44]=a[1],a})},function(a){return e[45]=(e[39].push(d.i64.to_string(e[43])),e[39])}])}):d.resolve()},function(a){return e[41]=e[39].join(","),e[36]=e[41]}])},function(a){return e[34].some(function(a){return d.i64.eq(e[25],a)})?e[37]=e[25]:e[37]=void 0,d.i64.neq(e[37],void 0)?e[38]=e[37]:e[38]=void 0,e[18]=e[38]}])},function(c){return d.i64.neq(e[18],void 0)?e[19]=e[18]:e[19]=d.i64.cast([0,0]),d.i64.neq(e[26],void 0)?e[20]=e[26]:e[20]=d.i64.cast([0,1]),d.i64.neq(e[28],void 0)?d.sequence([function(c){return d.db.table(177).fetch([[[a[0]]],"fk_pending_tasks"]).next().then(function(g,h){var c=g.done;g=g.value;return c?d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[46]=d.i64.of_float(Date.now()),b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[46],d.i64.cast([0,1e6])),e[9]),void 0],e[34]=b[0],e[35]=b[1],e[36]=b[2],e[37]=b[3],e[38]=b[4],e[39]=b[5],e[40]=b[6],b):(f=c.item,e[46]=d.i64.of_float(Date.now()),b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[46],d.i64.cast([0,1e6])),e[9]),void 0],e[34]=b[0],e[35]=b[1],e[36]=b[2],e[37]=b[3],e[38]=b[4],e[39]=b[5],e[40]=b[6],b)})},function(a){return e[42]=new d.Map(),e[42].set("task_id",e[34]),e[42].set("queue_name",e[35]),e[42].set("enqueue_timestamp_ms",e[36]),e[42].set("priority",e[37]),e[42].set("first_executed_timestamp_ms",e[38]),e[42].set("execution_time_ns",e[39]),e[42].set("echo_encoding_execution_time_ns",e[40]),e[43]=new d.Map(),e[43].set("task_metadata",e[42]),e[43].set("action_type",void 0),e[43].set("content_type",void 0),e[43].set("identifiers",void 0),e[43].set("task_creation_source",void 0),e[43].set("message_payload_source",d.i64.cast([0,2])),e[44]=new d.Map(),e[44].set("error_code",d.i64.cast([0,5])),e[44].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[44].set("error_message","Pending backup context row not found"),e[45]=d.createArray(),a=[void 0,e[44],e[43],e[45]],e[29]=a[0],e[30]=a[1],e[31]=a[2],e[32]=a[3],a}]):(h=g.item,d.sequence([function(a){return e[42]=h.actionType,e[41]=h.contentType,e[40]=h.listKey,e[43]=h.echoContent,e[44]=h.lsTraceId,e[45]=h.echoEncodingLatencyNs,d.i64.eq(e[42],d.i64.cast([0,2]))&&d.i64.eq(e[41],d.i64.cast([0,2]))?d.resolve(e[34]=""):d.sequence([function(a){return d.db.table(173).fetch([[[d.i64.from_string(e[40])]],"jid"]).next().then(function(b,c){var a=b.done;b=b.value;return a?e[47]="":(c=b.item,e[47]=d.i64.to_string(c.serverThreadKey))})},function(a){return e[34]=e[47]}])},function(c){return e[35]=new d.Map(),e[35].set("backup_id",d.i64.to_string(f.backupId)),e[35].set("act_thread_id",e[40]),e[35].set("server_thread_id",e[34]),e[35].set("timestamp",h.sortKey),e[35].set("otid",h.uniqueKey),e[46]=h.error==null?d.i64.cast([0,0]):h.error,d.i64.eq(e[46],d.i64.cast([0,0]))?d.sequence([function(a){return e[47]=e[35].get("act_thread_id"),e[35],e[48]=e[35].get("otid"),e[35],d.storedProcedure(b("LSGetLatestEpochKeys"),!1).then(function(a){return a=a,e[49]=a[0],e[50]=a[1],a})},function(a){return e[49]!==void 0?d.sequence([function(a){return d.i64.eq(e[41],d.i64.cast([0,1]))?d.sequence([function(a){return e[60]=d.createArray(),e[65]=(e[60].push(d.i64.cast([0,32])),e[60]),d.nativeOperation(b("LSGetBlobFromString.nop"),["thread_ope_key","_",e[47]].join("")).then(function(a){return a=a,e[61]=a[0],a})},function(a){return d.nativeOperation(b("LSCreateDerivedKeys.nop"),e[61],void 0,e[27],e[60]).then(function(a){return a=a,e[62]=a[0],a})},function(a){return e[62]?e[63]=!1:e[63]=!0,e[63]?d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),e[65]=d.createArray(),void 0!==void 0?e[66]=(e[65].push(void 0),e[65]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","Got null keys while deriving message list OPE key. Returning null blobish",e[65],d.i64.cast([0,3]))},function(a){return e[64]=void 0}]):d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[62],d.i64.cast([0,0])).then(function(a){return a=a,e[65]=a[0],e[66]=a[1],a})},function(a){return e[64]=e[65]}])},function(a){return e[57]=e[64]}]):d.sequence([function(a){return d.i64.eq(e[42],d.i64.cast([0,2]))?d.sequence([function(a){return e[61]=d.createArray(),e[66]=(e[61].push(d.i64.cast([0,32])),e[61]),d.nativeOperation(b("LSGetBlobFromString.nop"),["thread_ope_key","_",e[48]].join("")).then(function(a){return a=a,e[62]=a[0],a})},function(a){return d.nativeOperation(b("LSCreateDerivedKeys.nop"),e[62],void 0,e[27],e[61]).then(function(a){return a=a,e[63]=a[0],a})},function(a){return e[63]?e[64]=!1:e[64]=!0,e[64]?d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),e[66]=d.createArray(),void 0!==void 0?e[67]=(e[66].push(void 0),e[66]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","Got null keys while deriving message list OPE key. Returning null blobish",e[66],d.i64.cast([0,3]))},function(a){return e[65]=void 0}]):d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[63],d.i64.cast([0,0])).then(function(a){return a=a,e[66]=a[0],e[67]=a[1],a})},function(a){return e[65]=e[66]}])},function(a){return e[60]=e[65]}]):d.resolve(e[60]=void 0)},function(a){return e[57]=e[60]}])},function(a){return d.blobs.neq(e[57],void 0)?d.sequence([function(a){return e[60]=e[49].get("epoch_keys"),e[49],e[61]=e[60].get("epoch_anon_id"),e[60],e[62]=e[60].get("epoch_root_key"),e[60],e[63]=d.createArray(),e[74]=(e[63].push(d.i64.cast([0,32])),e[63]),d.i64.ge(e[19],d.i64.cast([0,3]))?d.resolve(e[64]=void 0):d.sequence([function(a){return d.nativeOperation(b("LSGetBlobFromString.nop"),e[47]).then(function(a){return a=a,e[74]=a[0],a})},function(a){return e[64]=e[74]}])},function(a){return d.i64.ge(e[19],d.i64.cast([0,4]))?(e[74]="_",e[65]=["message_key_in_epoch",e[74],d.blobs.to_string(e[61]),e[74],"cipher_version",e[74],d.i64.to_string(e[19]),e[74],"thread",e[74],e[47]==null?"":e[47]].join("")):(d.i64.ge(e[19],d.i64.cast([0,3]))?(e[75]="_",e[74]=["message_key_in_epoch",e[75],d.blobs.to_string(e[61]),e[75],"cipher_version",e[75],d.i64.to_string(e[19]),e[75],"thread",e[75],e[47]==null?"":e[47]].join("")):(d.i64.ge(e[19],d.i64.cast([0,2]))?(e[76]="_",e[75]=["message_key_in_epoch",e[76],d.blobs.to_string(e[61]),e[76],"cipher_version",e[76],d.i64.to_string(e[19])].join("")):e[75]=["message_key_in_epoch","_",d.blobs.to_string(e[61])].join(""),e[74]=e[75]),e[65]=e[74]),d.nativeOperation(b("LSGetBlobFromString.nop"),e[65]).then(function(a){return a=a,e[66]=a[0],a})},function(a){return d.nativeOperation(b("LSCreateDerivedKeys.nop"),e[66],e[64],e[62],e[63]).then(function(a){return a=a,e[67]=a[0],a})},function(a){return e[67]?e[68]=!1:e[68]=!0,e[68]?d.resolve(e[69]=void 0):d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[67],d.i64.cast([0,0])).then(function(a){return a=a,e[74]=a[0],e[75]=a[1],a})},function(a){return e[69]=e[74]}])},function(a){return d.filter(d.db.table(169).fetch(),function(a){return d.blobs.eq(a.epochAnonIdBlob,d.blob("MA=="))}).next().then(function(c,f){var a=c.done;c=c.value;return a?d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTableUtils] Failed to get mailbox_root_key_v2: epoch 0 is not available."),e[74]=d.createArray(),void 0!==void 0?e[75]=(e[74].push(void 0),e[74]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTableUtils","Failed to get mailbox_root_key_v2: epoch 0 is not available.",e[74],d.i64.cast([0,3]))},function(a){return e[70]=void 0}]):(f=c.item,d.sequence([function(a){return e[74]=d.createArray(),e[82]=(e[74].push(d.i64.cast([0,32])),e[74]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5zYWx0X21haWxib3hfcm9vdF9rZXlfdjI="),void 0,e[27],e[74]).then(function(a){return a=a,e[75]=a[0],a})},function(a){return e[75]!==void 0?d.sequence([function(a){return e[82]=d.i64.of_int32(e[75].length),d.i64.ge(e[82],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[75],d.i64.cast([0,0])).then(function(a){return a=a,e[84]=a[0],e[85]=a[1],a})},function(a){return e[83]=e[84]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[84]=d.createArray(),void 0!==void 0?e[85]=(e[84].push(void 0),e[84]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",e[84],d.i64.cast([0,3]))},function(a){return e[83]=void 0}])},function(a){return e[76]=e[83]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[82]=d.createArray(),void 0!==void 0?e[83]=(e[82].push(void 0),e[82]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",e[82],d.i64.cast([0,3]))},function(a){return e[76]=void 0}])},function(a){return d.blobs.neq(e[76],void 0)?e[77]=!0:e[77]=!1,e[77]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),e[78]=d.createArray(),e[82]=(e[78].push(d.i64.cast([0,32])),e[78]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5tYWlsYm94X3Jvb3Rfa2V5X3Yy"),e[76],f.epochRootKeyBlob,e[78]).then(function(a){return a=a,e[79]=a[0],a})},function(a){return e[79]!==void 0?d.sequence([function(a){return e[82]=d.i64.of_int32(e[79].length),d.i64.ge(e[82],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[79],d.i64.cast([0,0])).then(function(a){return a=a,e[84]=a[0],e[85]=a[1],a})},function(a){return e[83]=e[84]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[84]=d.createArray(),void 0!==void 0?e[85]=(e[84].push(void 0),e[84]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",e[84],d.i64.cast([0,3]))},function(a){return e[83]=void 0}])},function(a){return e[80]=e[83]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[82]=d.createArray(),void 0!==void 0?e[83]=(e[82].push(void 0),e[82]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",e[82],d.i64.cast([0,3]))},function(a){return e[80]=void 0}])},function(a){return d.blobs.neq(e[80],void 0)?e[81]=!0:e[81]=!1,e[81]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),e[70]=e[80]}]))})},function(a){return d.blobs.neq(e[69],void 0)?d.sequence([function(a){return d.blobs.neq(e[70],void 0)?d.sequence([function(a){return e[80]=d.createArray(),e[84]=(e[80].push(d.i64.cast([0,32])),e[80]),d.nativeOperation(b("LSCreateDerivedKeys.nop"),d.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5mYWxsYmFja19rZXk="),void 0,e[70],e[80]).then(function(a){return a=a,e[81]=a[0],a})},function(a){return e[81]!==void 0?d.sequence([function(a){return e[84]=d.i64.of_int32(e[81].length),d.i64.ge(e[84],d.i64.cast([0,1]))?d.sequence([function(a){return d.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),e[81],d.i64.cast([0,0])).then(function(a){return a=a,e[86]=a[0],e[87]=a[1],a})},function(a){return e[85]=e[86]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),e[86]=d.createArray(),void 0!==void 0?e[87]=(e[86].push(void 0),e[86]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",e[86],d.i64.cast([0,3]))},function(a){return e[85]=void 0}])},function(a){return e[82]=e[85]}]):d.sequence([function(a){return function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),e[84]=d.createArray(),void 0!==void 0?e[85]=(e[84].push(void 0),e[84]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",e[84],d.i64.cast([0,3]))},function(a){return e[82]=void 0}])},function(a){return d.blobs.neq(e[82],void 0)?e[83]=!0:e[83]=!1,e[83]?0:(function(a){d.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),d["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),e[74]=e[82]}]):d.resolve(e[74]=void 0)},function(a){return e[75]=e[60].get("epoch_root_key"),e[60],e[76]=e[60].get("epoch_anon_id"),e[60],e[77]=e[60].get("epoch_id"),e[60],e[78]=new d.Map(),e[78].set("payload_key",e[69]),e[78].set("payload_fallback_key",e[74]),e[78].set("encryption_version",e[19]),e[78].set("epoch_root_key",e[75]),e[78].set("epoch_anon_id",e[76]),e[78].set("epoch_id",e[77]),e[79]=new d.Map(),e[79].set("ope_key",e[57]),e[79].set("message_payload_encryption_keys",e[78]),e[79].set("ocmf_shared_key",f.ocmfClientStateBlob),e[79].set("mailbox_base_salt",e[27]),e[79].set("mailbox_root_key_v2",e[70]),a=[e[79],void 0],e[72]=a[0],e[73]=a[1],a}]):d.resolve((e[74]=new d.Map(),e[74].set("error_code",d.i64.cast([0,26])),e[74].set("stored_procedure","MEBKeyDeriver"),e[74].set("error_message",""),a=[void 0,e[74]],e[72]=a[0],e[73]=a[1],a))},function(a){return a=[e[72],e[73]],e[58]=a[0],e[59]=a[1],a}]):d.resolve((e[60]=new d.Map(),e[60].set("error_code",d.i64.cast([0,25])),e[60].set("stored_procedure","MEBKeyDeriver"),e[60].set("error_message",""),a=[void 0,e[60]],e[58]=a[0],e[59]=a[1],a))},function(a){return a=[e[58],e[59]],e[51]=a[0],e[52]=a[1],a}]):d.resolve((a=[void 0,e[50]],e[51]=a[0],e[52]=a[1],a))},function(c){return e[51]!==void 0?d.sequence([function(a){return e[57]=e[35].get("backup_id"),e[35],e[58]=e[35].get("act_thread_id"),e[35],e[59]=e[35].get("timestamp"),e[35],e[60]=e[35].get("otid"),e[35],d.storedProcedure(b("LSEncryptIdentifiersV2"),e[42],e[41],e[57],e[58],d.i64.from_string(e[59]),e[60],e[51]).then(function(a){return a=a,e[61]=a[0],e[62]=a[1],a})},function(c){return e[61]!==void 0?d.sequence([function(c){return d.i64.eq(e[42],d.i64.cast([0,1]))?(e[75]=e[43]===""?void 0:e[43],e[75]!==void 0?(c=[e[75],void 0],e[73]=c[0],e[74]=c[1],c):(e[76]=new d.Map(),e[76].set("error_code",d.i64.cast([0,30])),e[76].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[76].set("error_message",""),c=[void 0,e[76]],e[73]=c[0],e[74]=c[1],c),c=[e[73],e[74]],e[67]=c[0],e[68]=c[1],c):(c=["",void 0],e[67]=c[0],e[68]=c[1],c),e[67]!==void 0?d.sequence([function(a){return d.i64.eq(e[42],d.i64.cast([0,1]))?d.sequence([function(a){return e[79]=e[35].get("backup_id"),e[35],e[80]=e[35].get("act_thread_id"),e[35],d.storedProcedure(b("LSEncryptMessagePayloadV2"),e[79],e[80],e[51],e[67]).then(function(a){return a=a,e[81]=a[0],e[82]=a[1],a})},function(a){return a=[e[81],e[82]],e[73]=a[0],e[74]=a[1],a}]):d.resolve((e[79]=new d.Map(),e[79].set("encrypted_message_payload",""),e[79].set("value_secret_ref",""),a=[e[79],void 0],e[73]=a[0],e[74]=a[1],a))},function(c){return e[73]!==void 0?d.sequence([function(c){return e[79]=e[35].get("act_thread_id"),e[35],d.storedProcedure(b("LSLoadAndEncryptProtobufV2"),a[0],e[51],e[79]).then(function(a){return a=a,e[80]=a[0],e[81]=a[1],a})},function(a){return e[82]=e[61].get("act_thread_id_ocmf_partial"),e[61],e[83]=e[61].get("otid_ocmf_partial"),e[61],e[84]=e[61].get("timestamp_encrypted"),e[61],e[85]=new d.Map(),e[85].set("list_key",e[82]),e[85].set("unique_key",e[83]),e[85].set("sort_key",e[84]),e[86]=e[73].get("encrypted_message_payload"),e[73],e[87]=e[73].get("value_secret_ref"),e[73],e[88]=new d.Map(),e[88].set("value",e[86]),e[88].set("value_secret_ref",e[87]),e[89]=new d.Map(),e[89].set("list_item_id",e[85]),e[89].set("list_item",e[88]),e[89].set("action_type",e[42]),e[90]=e[35].get("server_thread_id"),e[35],e[91]=e[35].get("timestamp"),e[35],e[92]=e[35].get("otid"),e[35],e[93]=e[35].get("act_thread_id"),e[35],e[94]=new d.Map(),e[94].set("server_thread_key",e[90]),e[94].set("timestamp",e[91]),e[94].set("otid",e[92]),e[94].set("wa_thread_id",d.i64.from_string(e[93])),e[95]=e[51].get("mailbox_base_salt"),e[51],d.nativeOperation(b("LSBase64Encode.nop"),e[95]).then(function(a){return a=a,e[96]=a[0],a})},function(a){return e[97]=e[51].get("ocmf_shared_key"),e[51],d.nativeOperation(b("LSBase64Encode.nop"),e[97]).then(function(a){return a=a,e[98]=a[0],a})},function(a){return e[99]=new d.Map(),e[99].set("mailbox_root_key",e[96]==null?"":e[96]),e[99].set("ocmf_client_state_blob",e[98]==null?"":e[98]),e[100]=e[61].get("backup_id_ocmf_partial"),e[61],e[101]=e[51].get("message_payload_encryption_keys"),e[51],e[102]=e[101].get("epoch_id"),e[101],e[103]=e[51].get("message_payload_encryption_keys"),e[51],e[104]=e[103].get("encryption_version"),e[103],e[105]=new d.Map(),e[105].set("mailbox_partial_id",e[100]),e[105].set("action",e[89]),e[105].set("device_id",e[28]),e[105].set("echo_version",d.i64.cast([0,0])),e[105].set("epoch_id",e[102]),e[105].set("trace_id",void 0),e[105].set("encryption_version",e[104]),e[105].set("is_thread",d.i64.eq(e[41],d.i64.cast([0,2]))),e[105].set("raw_identifiers",e[94]),e[105].set("raw_tokens",e[99]),e[105].set("request_id",e[44]==null?"":e[44]),e[105].set("tam_thread_subtype",d.i64.cast([0,0])),e[105].set("is_instamadillo",!1),e[80]!==void 0?d.sequence([function(a){return e[121]=e[80].get("supplemental_data_encrypted"),e[80],e[121]!==void 0?d.sequence([function(a){return e[123]=e[80].get("protobuf_encrypted"),e[80],e[124]=e[80].get("backup_action"),e[80],e[125]=e[80].get("timestamp_ms"),e[80],e[126]=e[121].get("sk_ciphertext"),e[121],d.nativeOperation(b("LSBase64Encode.nop"),e[126]).then(function(a){return a=a,e[127]=a[0],a})},function(a){return e[128]=e[121].get("sk_hash"),e[121],d.nativeOperation(b("LSBase64Encode.nop"),e[128]).then(function(a){return a=a,e[129]=a[0],a})},function(a){return e[130]=e[80].get("message_tags"),e[80],e[131]=new d.Map(),e[131].set("supplementary_data_key",void 0),e[131].set("encrypted_protobuf",e[123]),e[131].set("key_value_backup_action",e[124]),e[131].set("protobuf_ts_ms",e[125]),e[131].set("supplemental_key_ciphertext",e[127]),e[131].set("supplemental_key_hash",e[129]),e[131].set("message_tags",e[130]),e[122]=e[131]}]):d.resolve((e[123]=e[80].get("protobuf_encrypted"),e[80],e[124]=e[80].get("backup_action"),e[80],e[125]=e[80].get("timestamp_ms"),e[80],e[126]=e[80].get("message_tags"),e[80],e[127]=new d.Map(),e[127].set("supplementary_data_key",void 0),e[127].set("encrypted_protobuf",e[123]),e[127].set("key_value_backup_action",e[124]),e[127].set("protobuf_ts_ms",e[125]),e[127].set("message_tags",e[126]),e[122]=e[127]))},function(a){return e[105].set("key_value_backup_payload",e[122])}]):d.resolve()},function(a){return d.resolve(function(a){d.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure] Skip processing attachments as not enabled."))},function(a){return e[44]!==void 0?d.storedProcedure(b("LSAppendDataTraceAddon"),e[44],d.i64.cast([0,1463]),d.i64.cast([0,2]),void 0,void 0):d.resolve()},function(a){return d.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,e[106]=a[0],a})},function(a){return e[106]?e[107]=!0:e[107]=!1,e[107]?(function(a){d.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),e[121]=d.createArray(),void 0!==void 0?e[122]=(e[121].push(void 0),e[121]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",e[121],d.i64.cast([0,3]))):d.resolve()},function(b){return e[108]=d.toJSON(e[105]),d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[121]=d.i64.of_float(Date.now()),d.i64.eq(e[45],d.i64.cast([0,0]))||d.i64.eq(e[45],void 0)?e[122]=void 0:e[122]=e[45],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[121],d.i64.cast([0,1e6])),e[9]),e[122]],e[109]=b[0],e[110]=b[1],e[111]=b[2],e[112]=b[3],e[113]=b[4],e[114]=b[5],e[115]=b[6],b):(f=c.item,e[121]=d.i64.of_float(Date.now()),d.i64.eq(e[45],d.i64.cast([0,0]))||d.i64.eq(e[45],void 0)?e[122]=void 0:e[122]=e[45],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[121],d.i64.cast([0,1e6])),e[9]),e[122]],e[109]=b[0],e[110]=b[1],e[111]=b[2],e[112]=b[3],e[113]=b[4],e[114]=b[5],e[115]=b[6],b)})},function(a){return e[117]=new d.Map(),e[117].set("task_id",e[109]),e[117].set("queue_name",e[110]),e[117].set("enqueue_timestamp_ms",e[111]),e[117].set("priority",e[112]),e[117].set("first_executed_timestamp_ms",e[113]),e[117].set("execution_time_ns",e[114]),e[117].set("echo_encoding_execution_time_ns",e[115]),e[118]=new d.Map(),e[118].set("task_metadata",e[117]),e[118].set("action_type",e[42]),e[118].set("content_type",e[41]),e[118].set("identifiers",e[35]),e[118].set("task_creation_source",void 0),e[118].set("message_payload_source",d.i64.cast([0,2])),e[119]=new d.Map(),e[119].set("payload",e[108]),e[120]=d.createArray(),e[121]=(e[120].push(e[81]),e[120]),a=[e[119],void 0,e[118],e[120]],e[75]=a[0],e[76]=a[1],e[77]=a[2],e[78]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[90]=d.i64.of_float(Date.now()),d.i64.eq(e[45],d.i64.cast([0,0]))||d.i64.eq(e[45],void 0)?e[91]=void 0:e[91]=e[45],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[90],d.i64.cast([0,1e6])),e[9]),e[91]],e[79]=b[0],e[80]=b[1],e[81]=b[2],e[82]=b[3],e[83]=b[4],e[84]=b[5],e[85]=b[6],b):(f=c.item,e[90]=d.i64.of_float(Date.now()),d.i64.eq(e[45],d.i64.cast([0,0]))||d.i64.eq(e[45],void 0)?e[91]=void 0:e[91]=e[45],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[90],d.i64.cast([0,1e6])),e[9]),e[91]],e[79]=b[0],e[80]=b[1],e[81]=b[2],e[82]=b[3],e[83]=b[4],e[84]=b[5],e[85]=b[6],b)})},function(a){return e[87]=new d.Map(),e[87].set("task_id",e[79]),e[87].set("queue_name",e[80]),e[87].set("enqueue_timestamp_ms",e[81]),e[87].set("priority",e[82]),e[87].set("first_executed_timestamp_ms",e[83]),e[87].set("execution_time_ns",e[84]),e[87].set("echo_encoding_execution_time_ns",e[85]),e[88]=new d.Map(),e[88].set("task_metadata",e[87]),e[88].set("action_type",e[42]),e[88].set("content_type",e[41]),e[88].set("identifiers",e[35]),e[88].set("task_creation_source",void 0),e[88].set("message_payload_source",d.i64.cast([0,2])),e[89]=d.createArray(),a=[void 0,e[74],e[88],e[89]],e[75]=a[0],e[76]=a[1],e[77]=a[2],e[78]=a[3],a}])},function(a){return a=[e[75],e[76],e[77],e[78]],e[69]=a[0],e[70]=a[1],e[71]=a[2],e[72]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[84]=d.i64.of_float(Date.now()),d.i64.eq(e[45],d.i64.cast([0,0]))||d.i64.eq(e[45],void 0)?e[85]=void 0:e[85]=e[45],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[84],d.i64.cast([0,1e6])),e[9]),e[85]],e[73]=b[0],e[74]=b[1],e[75]=b[2],e[76]=b[3],e[77]=b[4],e[78]=b[5],e[79]=b[6],b):(f=c.item,e[84]=d.i64.of_float(Date.now()),d.i64.eq(e[45],d.i64.cast([0,0]))||d.i64.eq(e[45],void 0)?e[85]=void 0:e[85]=e[45],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[84],d.i64.cast([0,1e6])),e[9]),e[85]],e[73]=b[0],e[74]=b[1],e[75]=b[2],e[76]=b[3],e[77]=b[4],e[78]=b[5],e[79]=b[6],b)})},function(a){return e[81]=new d.Map(),e[81].set("task_id",e[73]),e[81].set("queue_name",e[74]),e[81].set("enqueue_timestamp_ms",e[75]),e[81].set("priority",e[76]),e[81].set("first_executed_timestamp_ms",e[77]),e[81].set("execution_time_ns",e[78]),e[81].set("echo_encoding_execution_time_ns",e[79]),e[82]=new d.Map(),e[82].set("task_metadata",e[81]),e[82].set("action_type",e[42]),e[82].set("content_type",e[41]),e[82].set("identifiers",e[35]),e[82].set("task_creation_source",void 0),e[82].set("message_payload_source",d.i64.cast([0,2])),e[83]=d.createArray(),a=[void 0,e[68],e[82],e[83]],e[69]=a[0],e[70]=a[1],e[71]=a[2],e[72]=a[3],a}])},function(a){return a=[e[69],e[70],e[71],e[72]],e[63]=a[0],e[64]=a[1],e[65]=a[2],e[66]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[78]=d.i64.of_float(Date.now()),d.i64.eq(e[45],d.i64.cast([0,0]))||d.i64.eq(e[45],void 0)?e[79]=void 0:e[79]=e[45],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[78],d.i64.cast([0,1e6])),e[9]),e[79]],e[67]=b[0],e[68]=b[1],e[69]=b[2],e[70]=b[3],e[71]=b[4],e[72]=b[5],e[73]=b[6],b):(f=c.item,e[78]=d.i64.of_float(Date.now()),d.i64.eq(e[45],d.i64.cast([0,0]))||d.i64.eq(e[45],void 0)?e[79]=void 0:e[79]=e[45],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[78],d.i64.cast([0,1e6])),e[9]),e[79]],e[67]=b[0],e[68]=b[1],e[69]=b[2],e[70]=b[3],e[71]=b[4],e[72]=b[5],e[73]=b[6],b)})},function(a){return e[75]=new d.Map(),e[75].set("task_id",e[67]),e[75].set("queue_name",e[68]),e[75].set("enqueue_timestamp_ms",e[69]),e[75].set("priority",e[70]),e[75].set("first_executed_timestamp_ms",e[71]),e[75].set("execution_time_ns",e[72]),e[75].set("echo_encoding_execution_time_ns",e[73]),e[76]=new d.Map(),e[76].set("task_metadata",e[75]),e[76].set("action_type",e[42]),e[76].set("content_type",e[41]),e[76].set("identifiers",e[35]),e[76].set("task_creation_source",void 0),e[76].set("message_payload_source",d.i64.cast([0,2])),e[77]=d.createArray(),a=[void 0,e[62],e[76],e[77]],e[63]=a[0],e[64]=a[1],e[65]=a[2],e[66]=a[3],a}])},function(a){return a=[e[63],e[64],e[65],e[66]],e[53]=a[0],e[54]=a[1],e[55]=a[2],e[56]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[68]=d.i64.of_float(Date.now()),d.i64.eq(e[45],d.i64.cast([0,0]))||d.i64.eq(e[45],void 0)?e[69]=void 0:e[69]=e[45],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[68],d.i64.cast([0,1e6])),e[9]),e[69]],e[57]=b[0],e[58]=b[1],e[59]=b[2],e[60]=b[3],e[61]=b[4],e[62]=b[5],e[63]=b[6],b):(f=c.item,e[68]=d.i64.of_float(Date.now()),d.i64.eq(e[45],d.i64.cast([0,0]))||d.i64.eq(e[45],void 0)?e[69]=void 0:e[69]=e[45],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[68],d.i64.cast([0,1e6])),e[9]),e[69]],e[57]=b[0],e[58]=b[1],e[59]=b[2],e[60]=b[3],e[61]=b[4],e[62]=b[5],e[63]=b[6],b)})},function(a){return e[65]=new d.Map(),e[65].set("task_id",e[57]),e[65].set("queue_name",e[58]),e[65].set("enqueue_timestamp_ms",e[59]),e[65].set("priority",e[60]),e[65].set("first_executed_timestamp_ms",e[61]),e[65].set("execution_time_ns",e[62]),e[65].set("echo_encoding_execution_time_ns",e[63]),e[66]=new d.Map(),e[66].set("task_metadata",e[65]),e[66].set("action_type",e[42]),e[66].set("content_type",e[41]),e[66].set("identifiers",e[35]),e[66].set("task_creation_source",void 0),e[66].set("message_payload_source",d.i64.cast([0,2])),e[67]=d.createArray(),a=[void 0,e[52],e[66],e[67]],e[53]=a[0],e[54]=a[1],e[55]=a[2],e[56]=a[3],a}])},function(a){return a=[e[53],e[54],e[55],e[56]],e[36]=a[0],e[37]=a[1],e[38]=a[2],e[39]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[59]=d.i64.of_float(Date.now()),d.i64.eq(e[45],d.i64.cast([0,0]))||d.i64.eq(e[45],void 0)?e[60]=void 0:e[60]=e[45],b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[59],d.i64.cast([0,1e6])),e[9]),e[60]],e[47]=b[0],e[48]=b[1],e[49]=b[2],e[50]=b[3],e[51]=b[4],e[52]=b[5],e[53]=b[6],b):(f=c.item,e[59]=d.i64.of_float(Date.now()),d.i64.eq(e[45],d.i64.cast([0,0]))||d.i64.eq(e[45],void 0)?e[60]=void 0:e[60]=e[45],b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[59],d.i64.cast([0,1e6])),e[9]),e[60]],e[47]=b[0],e[48]=b[1],e[49]=b[2],e[50]=b[3],e[51]=b[4],e[52]=b[5],e[53]=b[6],b)})},function(a){return e[55]=new d.Map(),e[55].set("task_id",e[47]),e[55].set("queue_name",e[48]),e[55].set("enqueue_timestamp_ms",e[49]),e[55].set("priority",e[50]),e[55].set("first_executed_timestamp_ms",e[51]),e[55].set("execution_time_ns",e[52]),e[55].set("echo_encoding_execution_time_ns",e[53]),e[56]=new d.Map(),e[56].set("task_metadata",e[55]),e[56].set("action_type",e[42]),e[56].set("content_type",e[41]),e[56].set("identifiers",e[35]),e[56].set("task_creation_source",void 0),e[56].set("message_payload_source",d.i64.cast([0,2])),e[57]=new d.Map(),e[57].set("error_code",e[46]),e[57].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[57].set("error_message",""),e[58]=d.createArray(),a=[void 0,e[57],e[56],e[58]],e[36]=a[0],e[37]=a[1],e[38]=a[2],e[39]=a[3],a}])},function(a){return a=[e[36],e[37],e[38],e[39]],e[29]=a[0],e[30]=a[1],e[31]=a[2],e[32]=a[3],a}]))})},function(a){return a=[e[29],e[30],e[31],e[32]],e[21]=a[0],e[22]=a[1],e[23]=a[2],e[24]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(c,f){var b=c.done;c=c.value;return b?(e[41]=d.i64.of_float(Date.now()),b=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[41],d.i64.cast([0,1e6])),e[9]),void 0],e[29]=b[0],e[30]=b[1],e[31]=b[2],e[32]=b[3],e[33]=b[4],e[34]=b[5],e[35]=b[6],b):(f=c.item,e[41]=d.i64.of_float(Date.now()),b=[a[0],f.queueName,f.enqueueTimestampMs,void 0,f.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[41],d.i64.cast([0,1e6])),e[9]),void 0],e[29]=b[0],e[30]=b[1],e[31]=b[2],e[32]=b[3],e[33]=b[4],e[34]=b[5],e[35]=b[6],b)})},function(a){return e[37]=new d.Map(),e[37].set("task_id",e[29]),e[37].set("queue_name",e[30]),e[37].set("enqueue_timestamp_ms",e[31]),e[37].set("priority",e[32]),e[37].set("first_executed_timestamp_ms",e[33]),e[37].set("execution_time_ns",e[34]),e[37].set("echo_encoding_execution_time_ns",e[35]),e[38]=new d.Map(),e[38].set("task_metadata",e[37]),e[38].set("action_type",void 0),e[38].set("content_type",void 0),e[38].set("identifiers",void 0),e[38].set("task_creation_source",void 0),e[38].set("message_payload_source",d.i64.cast([0,2])),e[39]=new d.Map(),e[39].set("error_code",d.i64.cast([0,24])),e[39].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[39].set("error_message",""),e[40]=d.createArray(),a=[void 0,e[39],e[38],e[40]],e[21]=a[0],e[22]=a[1],e[23]=a[2],e[24]=a[3],a}])},function(a){return a=[e[21],e[22],e[23],e[24]],e[13]=a[0],e[14]=a[1],e[15]=a[2],e[16]=a[3],a}]))})},function(a){return a=[e[13],e[14],e[15],e[16]],e[2]=a[0],e[3]=a[1],e[4]=a[2],e[5]=a[3],a}]):d.sequence([function(b){return d.db.table(2).fetch([[[a[0]]]]).next().then(function(b,c){var f=b.done;b=b.value;return f?(e[25]=d.i64.of_float(Date.now()),f=[a[0],void 0,void 0,void 0,void 0,d.i64.sub(d.i64.mul(e[25],d.i64.cast([0,1e6])),e[9]),void 0],e[13]=f[0],e[14]=f[1],e[15]=f[2],e[16]=f[3],e[17]=f[4],e[18]=f[5],e[19]=f[6],f):(c=b.item,e[25]=d.i64.of_float(Date.now()),f=[a[0],c.queueName,c.enqueueTimestampMs,void 0,c.firstExecutedTimestampMs,d.i64.sub(d.i64.mul(e[25],d.i64.cast([0,1e6])),e[9]),void 0],e[13]=f[0],e[14]=f[1],e[15]=f[2],e[16]=f[3],e[17]=f[4],e[18]=f[5],e[19]=f[6],f)})},function(a){return e[21]=new d.Map(),e[21].set("task_id",e[13]),e[21].set("queue_name",e[14]),e[21].set("enqueue_timestamp_ms",e[15]),e[21].set("priority",e[16]),e[21].set("first_executed_timestamp_ms",e[17]),e[21].set("execution_time_ns",e[18]),e[21].set("echo_encoding_execution_time_ns",e[19]),e[22]=new d.Map(),e[22].set("task_metadata",e[21]),e[22].set("action_type",void 0),e[22].set("content_type",void 0),e[22].set("identifiers",void 0),e[22].set("task_creation_source",void 0),e[22].set("message_payload_source",d.i64.cast([0,2])),e[23]=new d.Map(),e[23].set("error_code",d.i64.cast([0,4])),e[23].set("stored_procedure","LSEncryptedBackupsSerializeBackupPayloadV2StoredProcedure"),e[23].set("error_message",""),e[24]=d.createArray(),a=[void 0,e[23],e[22],e[24]],e[2]=a[0],e[3]=a[1],e[4]=a[2],e[5]=a[3],a}])},function(a){return e[6]=d.i64.of_float(Date.now()),e[7]=d.i64.random(),e[10]="Finishing execution. Execution time: ",e[11]=d.i64.to_string(d.i64.sub(e[6],e[0])),e[12]=" ms",e[8]="",function(a){d.logger(a).info(a)}(["[EncryptedBackups][serializeBackupPayloadV2] ",e[8],e[10],e[8],e[11],e[8],e[12]].join("")),d.i64.eq(d.i64.mod_(e[7],d.i64.cast([0,100])),d.i64.cast([0,0]))?(e[13]=",",e[14]=d.createArray(),void 0!==void 0?e[15]=(e[14].push(void 0),e[14]):0,d.nativeOperation(b("LSLogMebClientEvent.nop"),"serializeBackupPayloadV2",[e[10],e[13],e[11],e[13],e[12]].join(""),e[14],d.i64.cast([0,4]))):d.resolve()},function(a){return a=[e[2],e[3],e[4],e[5]],f[0]=a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3],a}])},function(a){return d.resolve(f)}])}d=a;g["default"]=d}),98);
__d("LSTaskSerializerEncryptedBackupsUpload",["LSArrayGetObjectAt","LSLogMebClientEvent.nop","LSSerializeBackupPayloadV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][taskSerializerEncryptedBackupsUpload] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.forEach(c.db.table(177).fetch([[[a[0]]],"fk_pending_tasks"]),function(a){var b=a.update;a.item;return b({backupStatus:c.i64.cast([0,2])})})},function(e){return c.storedProcedure(b("LSSerializeBackupPayloadV2"),a[0]).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],d[4]=a[2],d[5]=a[3],a})},function(a){return d[6]=c.i64.of_int32(d[5].length),c.i64.gt(d[6],c.i64.cast([0,0]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[5],c.i64.cast([0,0])).then(function(a){return a=a,d[20]=a[0],d[21]=a[1],a})},function(a){return d[7]=d[20]}]):c.resolve(d[7]=void 0)},function(a){return d[2]?d[8]=!1:d[8]=!0,d[8]?(d[3]?d[20]=!1:d[20]=!0,d[20]?(a=[void 0,void 0,d[7],d[4]],d[21]=a[0],d[22]=a[1],d[23]=a[2],d[24]=a[3],a):(a=[void 0,d[3],d[7],d[4]],d[21]=a[0],d[22]=a[1],d[23]=a[2],d[24]=a[3],a),a=[d[21],d[22],d[23],d[24]],d[9]=a[0],d[10]=a[1],d[11]=a[2],d[12]=a[3],a):(d[20]=d[2].get("payload"),d[2],a=[d[20],void 0,d[7],d[4]],d[9]=a[0],d[10]=a[1],d[11]=a[2],d[12]=a[3],a),d[20]=new c.Map(),d[21]=d[20].set("success",d[9]),d[22]=d[20].set("failure",d[10]),d[23]=d[20].set("protobuf_failure",d[11]),d[24]=d[20].set("context",d[12]),d[25]=c.toJSON(d[20]),d[13]=d[25],d[14]=c.i64.of_float(Date.now()),d[15]=c.i64.random(),d[17]="Finishing execution. Execution time: ",d[18]=c.i64.to_string(c.i64.sub(d[14],d[0])),d[19]=" ms",d[16]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][taskSerializerEncryptedBackupsUpload] ",d[16],d[17],d[16],d[18],d[16],d[19]].join("")),c.i64.eq(c.i64.mod_(d[15],c.i64.cast([0,100])),c.i64.cast([0,0]))?(d[20]=",",d[21]=c.createArray(),void 0!==void 0?d[22]=(d[21].push(void 0),d[21]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsUpload",[d[17],d[20],d[18],d[20],d[19]].join(""),d[21],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[13],c.i64.cast([0,50026])],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSLoadProtobufBackupSerializedPayloadData",["LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDerivedKeys.nop","LSEncryptIdentifiersV2","LSGetBlobFromString.nop","LSGetLatestEpochKeys","LSIsEncryptionVersionSecure","LSLoadAndEncryptProtobufV2","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadProtobufBackupSerializedPayloadData] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[19]=c.i64.mul(d[1],c.i64.cast([0,1e6])),c.db.table(2).fetch([[[a[0]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?(d[23]=c.i64.of_float(Date.now()),f=[a[0],void 0,void 0,void 0,void 0,c.i64.sub(c.i64.mul(d[23],c.i64.cast([0,1e6])),d[19]),void 0],d[2]=f[0],d[3]=f[1],d[4]=f[2],d[5]=f[3],d[6]=f[4],d[7]=f[5],d[8]=f[6],f):(e=b.item,d[23]=c.i64.of_float(Date.now()),f=[a[0],e.queueName,e.enqueueTimestampMs,e.priority,e.firstExecutedTimestampMs,c.i64.sub(c.i64.mul(d[23],c.i64.cast([0,1e6])),d[19]),void 0],d[2]=f[0],d[3]=f[1],d[4]=f[2],d[5]=f[3],d[6]=f[4],d[7]=f[5],d[8]=f[6],f)})},function(e){return d[10]=new c.Map(),d[10].set("task_id",d[2]),d[10].set("queue_name",d[3]),d[10].set("enqueue_timestamp_ms",d[4]),d[10].set("priority",d[5]),d[10].set("first_executed_timestamp_ms",d[6]),d[10].set("execution_time_ns",d[7]),d[10].set("echo_encoding_execution_time_ns",d[8]),d[11]=new c.Map(),d[11].set("task_metadata",d[10]),d[11].set("action_type",void 0),d[11].set("content_type",void 0),d[11].set("identifiers",void 0),d[11].set("task_creation_source",void 0),d[11].set("message_payload_source",c.i64.cast([0,2])),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(e,f){var g=e.done;e=e.value;return g?(d[23]=new c.Map(),d[23].set("error_code",c.i64.cast([0,1])),d[23].set("stored_procedure","LSEncryptedBackupsLoadProtobufBackupSerializedPayloadDataStoredProcedure"),d[23].set("error_message",""),g=[void 0,d[23],d[11]],d[12]=g[0],d[13]=g[1],d[14]=g[2],g):(f=e.item,c.sequence([function(a){return d[31]=f.mailboxRootKeyBlob,d[32]=f.deviceId,d[30]=f.backupTenancy,d[29]=f.encryptionVersion,c.i64.neq(void 0,void 0)?c.resolve(d[23]=void 0):c.sequence([function(a){return d[33]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[34]=a[0],a})},function(a){return d[34]?d[43]=(d[33].push(c.i64.cast([0,0])),d[33]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[35]?d[43]=(d[33].push(c.i64.cast([0,2])),d[33]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[36]?d[43]=(d[33].push(c.i64.cast([0,3])),d[33]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[37]=a[0],a})},function(a){return d[37]?d[43]=(d[33].push(c.i64.cast([0,4])),d[33]):0,d[38]=c.createArray(),d[39]=c.i64.of_int32(d[33].length),c.i64.gt(d[39],c.i64.cast([0,0]))?c.loopAsync(d[39],function(a){return d[43]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[33],d[43]).then(function(a){return a=a,d[44]=a[0],d[45]=a[1],a})},function(a){return d[46]=(d[38].push(d[44]),d[38])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[43]=c.createArray(),d[44]=c.i64.of_int32(d[38].length),c.i64.gt(d[44],c.i64.cast([0,0]))?c.loopAsync(d[44],function(a){return d[46]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[38],d[46]).then(function(a){return a=a,d[47]=a[0],d[48]=a[1],a})},function(a){return d[49]=(d[43].push(c.i64.to_string(d[47])),d[43])}])}):c.resolve()},function(a){return d[45]=d[43].join(","),d[40]=d[45]}])},function(a){return d[38].some(function(a){return c.i64.eq(d[29],a)})?d[41]=d[29]:d[41]=void 0,c.i64.neq(d[41],void 0)?d[42]=d[41]:d[42]=void 0,d[23]=d[42]}])},function(e){return c.i64.neq(d[23],void 0)?d[24]=d[23]:d[24]=c.i64.cast([0,0]),c.i64.neq(d[30],void 0)?d[25]=d[30]:d[25]=c.i64.cast([0,1]),c.i64.neq(d[32],void 0)?c.sequence([function(e){return c.filter(c.db.table(305).fetch(),function(b){return c.i64.eq(b.pendingBackupTaskId,a[0])}).next().then(function(h,i){var e=h.done;h=h.value;return e?(d[37]=new c.Map(),d[37].set("error_code",c.i64.cast([0,5])),d[37].set("stored_procedure","LSEncryptedBackupsLoadProtobufBackupSerializedPayloadDataStoredProcedure"),d[37].set("error_message",""),e=[void 0,d[37],d[11]],d[33]=e[0],d[34]=e[1],d[35]=e[2],e):(i=h.item,c.sequence([function(b){return d[57]=i.actThreadId,d[37]=new c.Map(),d[37].set("backup_id",c.i64.to_string(f.backupId)),d[37].set("act_thread_id",d[57]),d[37].set("server_thread_id",d[57]),d[37].set("timestamp",c.i64.to_string(i.messageTimestampMs)),d[37].set("otid",i.toplevelOfflineThreadingId),c.db.table(2).fetch([[[a[0]]]]).next().then(function(e,f){var b=e.done;e=e.value;return b?(d[58]=c.i64.of_float(Date.now()),b=[a[0],void 0,void 0,void 0,void 0,c.i64.sub(c.i64.mul(d[58],c.i64.cast([0,1e6])),d[19]),void 0],d[38]=b[0],d[39]=b[1],d[40]=b[2],d[41]=b[3],d[42]=b[4],d[43]=b[5],d[44]=b[6],b):(f=e.item,d[58]=c.i64.of_float(Date.now()),b=[a[0],f.queueName,f.enqueueTimestampMs,f.priority,f.firstExecutedTimestampMs,c.i64.sub(c.i64.mul(d[58],c.i64.cast([0,1e6])),d[19]),void 0],d[38]=b[0],d[39]=b[1],d[40]=b[2],d[41]=b[3],d[42]=b[4],d[43]=b[5],d[44]=b[6],b)})},function(a){return d[46]=new c.Map(),d[46].set("task_id",d[38]),d[46].set("queue_name",d[39]),d[46].set("enqueue_timestamp_ms",d[40]),d[46].set("priority",d[41]),d[46].set("first_executed_timestamp_ms",d[42]),d[46].set("execution_time_ns",d[43]),d[46].set("echo_encoding_execution_time_ns",d[44]),d[47]=new c.Map(),d[47].set("task_metadata",d[46]),d[47].set("action_type",c.i64.cast([0,1])),d[47].set("content_type",c.i64.cast([0,1])),d[47].set("identifiers",d[37]),d[47].set("task_creation_source",void 0),d[47].set("message_payload_source",c.i64.cast([0,2])),d[48]=d[37].get("act_thread_id"),d[37],d[49]=d[37].get("otid"),d[37],c.storedProcedure(b("LSGetLatestEpochKeys"),!1).then(function(a){return a=a,d[50]=a[0],d[51]=a[1],a})},function(a){return d[50]!==void 0?c.sequence([function(a){return c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))?c.sequence([function(a){return d[61]=c.createArray(),d[66]=(d[61].push(c.i64.cast([0,32])),d[61]),c.nativeOperation(b("LSGetBlobFromString.nop"),["thread_ope_key","_",d[48]].join("")).then(function(a){return a=a,d[62]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[62],void 0,d[31],d[61]).then(function(a){return a=a,d[63]=a[0],a})},function(a){return d[63]?d[64]=!1:d[64]=!0,d[64]?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),d[66]=c.createArray(),void 0!==void 0?d[67]=(d[66].push(void 0),d[66]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","Got null keys while deriving message list OPE key. Returning null blobish",d[66],c.i64.cast([0,3]))},function(a){return d[65]=void 0}]):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[63],c.i64.cast([0,0])).then(function(a){return a=a,d[66]=a[0],d[67]=a[1],a})},function(a){return d[65]=d[66]}])},function(a){return d[58]=d[65]}]):c.sequence([function(a){return c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,2]))?c.sequence([function(a){return d[62]=c.createArray(),d[67]=(d[62].push(c.i64.cast([0,32])),d[62]),c.nativeOperation(b("LSGetBlobFromString.nop"),["thread_ope_key","_",d[49]].join("")).then(function(a){return a=a,d[63]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[63],void 0,d[31],d[62]).then(function(a){return a=a,d[64]=a[0],a})},function(a){return d[64]?d[65]=!1:d[65]=!0,d[65]?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] Got null keys while deriving message list OPE key. Returning null blobish"),d[67]=c.createArray(),void 0!==void 0?d[68]=(d[67].push(void 0),d[67]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","Got null keys while deriving message list OPE key. Returning null blobish",d[67],c.i64.cast([0,3]))},function(a){return d[66]=void 0}]):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[64],c.i64.cast([0,0])).then(function(a){return a=a,d[67]=a[0],d[68]=a[1],a})},function(a){return d[66]=d[67]}])},function(a){return d[61]=d[66]}]):c.resolve(d[61]=void 0)},function(a){return d[58]=d[61]}])},function(a){return c.blobs.neq(d[58],void 0)?c.sequence([function(a){return d[61]=d[50].get("epoch_keys"),d[50],d[62]=d[61].get("epoch_anon_id"),d[61],d[63]=d[61].get("epoch_root_key"),d[61],d[64]=c.createArray(),d[75]=(d[64].push(c.i64.cast([0,32])),d[64]),c.i64.ge(d[24],c.i64.cast([0,3]))?c.resolve(d[65]=void 0):c.sequence([function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),d[48]).then(function(a){return a=a,d[75]=a[0],a})},function(a){return d[65]=d[75]}])},function(a){return c.i64.ge(d[24],c.i64.cast([0,4]))?(d[75]="_",d[66]=["message_key_in_epoch",d[75],c.blobs.to_string(d[62]),d[75],"cipher_version",d[75],c.i64.to_string(d[24]),d[75],"thread",d[75],d[48]==null?"":d[48]].join("")):(c.i64.ge(d[24],c.i64.cast([0,3]))?(d[76]="_",d[75]=["message_key_in_epoch",d[76],c.blobs.to_string(d[62]),d[76],"cipher_version",d[76],c.i64.to_string(d[24]),d[76],"thread",d[76],d[48]==null?"":d[48]].join("")):(c.i64.ge(d[24],c.i64.cast([0,2]))?(d[77]="_",d[76]=["message_key_in_epoch",d[77],c.blobs.to_string(d[62]),d[77],"cipher_version",d[77],c.i64.to_string(d[24])].join("")):d[76]=["message_key_in_epoch","_",c.blobs.to_string(d[62])].join(""),d[75]=d[76]),d[66]=d[75]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[66]).then(function(a){return a=a,d[67]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[67],d[65],d[63],d[64]).then(function(a){return a=a,d[68]=a[0],a})},function(a){return d[68]?d[69]=!1:d[69]=!0,d[69]?c.resolve(d[70]=void 0):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[68],c.i64.cast([0,0])).then(function(a){return a=a,d[75]=a[0],d[76]=a[1],a})},function(a){return d[70]=d[75]}])},function(a){return c.filter(c.db.table(169).fetch(),function(a){return c.blobs.eq(a.epochAnonIdBlob,c.blob("MA=="))}).next().then(function(e,f){var a=e.done;e=e.value;return a?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTableUtils] Failed to get mailbox_root_key_v2: epoch 0 is not available."),d[75]=c.createArray(),void 0!==void 0?d[76]=(d[75].push(void 0),d[75]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTableUtils","Failed to get mailbox_root_key_v2: epoch 0 is not available.",d[75],c.i64.cast([0,3]))},function(a){return d[71]=void 0}]):(f=e.item,c.sequence([function(a){return d[75]=c.createArray(),d[83]=(d[75].push(c.i64.cast([0,32])),d[75]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5zYWx0X21haWxib3hfcm9vdF9rZXlfdjI="),void 0,d[31],d[75]).then(function(a){return a=a,d[76]=a[0],a})},function(a){return d[76]!==void 0?c.sequence([function(a){return d[83]=c.i64.of_int32(d[76].length),c.i64.ge(d[83],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[76],c.i64.cast([0,0])).then(function(a){return a=a,d[85]=a[0],d[86]=a[1],a})},function(a){return d[84]=d[85]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[85]=c.createArray(),void 0!==void 0?d[86]=(d[85].push(void 0),d[85]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",d[85],c.i64.cast([0,3]))},function(a){return d[84]=void 0}])},function(a){return d[77]=d[84]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[83]=c.createArray(),void 0!==void 0?d[84]=(d[83].push(void 0),d[83]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",d[83],c.i64.cast([0,3]))},function(a){return d[77]=void 0}])},function(a){return c.blobs.neq(d[77],void 0)?d[78]=!0:d[78]=!1,d[78]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),d[79]=c.createArray(),d[83]=(d[79].push(c.i64.cast([0,32])),d[79]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleT5tYWlsYm94X3Jvb3Rfa2V5X3Yy"),d[77],f.epochRootKeyBlob,d[79]).then(function(a){return a=a,d[80]=a[0],a})},function(a){return d[80]!==void 0?c.sequence([function(a){return d[83]=c.i64.of_int32(d[80].length),c.i64.ge(d[83],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[80],c.i64.cast([0,0])).then(function(a){return a=a,d[85]=a[0],d[86]=a[1],a})},function(a){return d[84]=d[85]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[85]=c.createArray(),void 0!==void 0?d[86]=(d[85].push(void 0),d[85]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",d[85],c.i64.cast([0,3]))},function(a){return d[84]=void 0}])},function(a){return d[81]=d[84]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[83]=c.createArray(),void 0!==void 0?d[84]=(d[83].push(void 0),d[83]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",d[83],c.i64.cast([0,3]))},function(a){return d[81]=void 0}])},function(a){return c.blobs.neq(d[81],void 0)?d[82]=!0:d[82]=!1,d[82]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),d[71]=d[81]}]))})},function(a){return c.blobs.neq(d[70],void 0)?c.sequence([function(a){return c.blobs.neq(d[71],void 0)?c.sequence([function(a){return d[81]=c.createArray(),d[85]=(d[81].push(c.i64.cast([0,32])),d[81]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("a2RmX2luZm86bWFpbGJveF9yb290X2tleV92Mj5mYWxsYmFja19rZXk="),void 0,d[71],d[81]).then(function(a){return a=a,d[82]=a[0],a})},function(a){return d[82]!==void 0?c.sequence([function(a){return d[85]=c.i64.of_int32(d[82].length),c.i64.ge(d[85],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[82],c.i64.cast([0,0])).then(function(a){return a=a,d[87]=a[0],d[88]=a[1],a})},function(a){return d[86]=d[87]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[87]=c.createArray(),void 0!==void 0?d[88]=(d[87].push(void 0),d[87]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",d[87],c.i64.cast([0,3]))},function(a){return d[86]=void 0}])},function(a){return d[83]=d[86]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoUtils] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[85]=c.createArray(),void 0!==void 0?d[86]=(d[85].push(void 0),d[85]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoUtils","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",d[85],c.i64.cast([0,3]))},function(a){return d[83]=void 0}])},function(a){return c.blobs.neq(d[83],void 0)?d[84]=!0:d[84]=!1,d[84]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),d[75]=d[83]}]):c.resolve(d[75]=void 0)},function(a){return d[76]=d[61].get("epoch_root_key"),d[61],d[77]=d[61].get("epoch_anon_id"),d[61],d[78]=d[61].get("epoch_id"),d[61],d[79]=new c.Map(),d[79].set("payload_key",d[70]),d[79].set("payload_fallback_key",d[75]),d[79].set("encryption_version",d[24]),d[79].set("epoch_root_key",d[76]),d[79].set("epoch_anon_id",d[77]),d[79].set("epoch_id",d[78]),d[80]=new c.Map(),d[80].set("ope_key",d[58]),d[80].set("message_payload_encryption_keys",d[79]),d[80].set("ocmf_shared_key",f.ocmfClientStateBlob),d[80].set("mailbox_base_salt",d[31]),d[80].set("mailbox_root_key_v2",d[71]),a=[d[80],void 0],d[73]=a[0],d[74]=a[1],a}]):c.resolve((d[75]=new c.Map(),d[75].set("error_code",c.i64.cast([0,26])),d[75].set("stored_procedure","MEBKeyDeriver"),d[75].set("error_message",""),a=[void 0,d[75]],d[73]=a[0],d[74]=a[1],a))},function(a){return a=[d[73],d[74]],d[59]=a[0],d[60]=a[1],a}]):c.resolve((d[61]=new c.Map(),d[61].set("error_code",c.i64.cast([0,25])),d[61].set("stored_procedure","MEBKeyDeriver"),d[61].set("error_message",""),a=[void 0,d[61]],d[59]=a[0],d[60]=a[1],a))},function(a){return a=[d[59],d[60]],d[52]=a[0],d[53]=a[1],a}]):c.resolve((a=[void 0,d[51]],d[52]=a[0],d[53]=a[1],a))},function(e){return d[52]!==void 0?c.sequence([function(a){return d[58]=d[37].get("backup_id"),d[37],d[59]=d[37].get("act_thread_id"),d[37],d[60]=d[37].get("timestamp"),d[37],d[61]=d[37].get("otid"),d[37],c.storedProcedure(b("LSEncryptIdentifiersV2"),c.i64.cast([0,1]),c.i64.cast([0,1]),d[58],d[59],c.i64.from_string(d[60]),d[61],d[52]).then(function(a){return a=a,d[62]=a[0],d[63]=a[1],a})},function(a){return d[64]=d[52].get("message_payload_encryption_keys"),d[52],d[65]=d[64].get("encryption_version"),d[64],d[66]=d[64].get("epoch_anon_id"),d[64],d[67]=d[64].get("epoch_root_key"),d[64],d[68]=d[37].get("act_thread_id"),d[37],d[69]=d[64].get("payload_key"),d[64],d[70]=d[37].get("backup_id"),d[37],d[71]=d[64].get("payload_fallback_key"),d[64],d[72]=c.createArray(),d[102]=(d[72].push(c.i64.cast([0,6])),d[72]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_anon_id_debug").then(function(a){return a=a,d[73]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[73],void 0,d[66],d[72]).then(function(a){return a=a,d[74]=a[0],a})},function(a){return d[74]?d[75]=!1:d[75]=!0,d[75]?c.resolve(d[76]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[74],c.i64.cast([0,0])).then(function(a){return a=a,d[102]=a[0],d[103]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[102]).then(function(a){return a=a,d[104]=a[0],a})},function(a){return d[76]=d[104]==null?"":d[104]}])},function(a){return d[77]=c.createArray(),d[102]=(d[77].push(c.i64.cast([0,6])),d[77]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_debug").then(function(a){return a=a,d[78]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[78],void 0,d[67],d[77]).then(function(a){return a=a,d[79]=a[0],a})},function(a){return d[79]?d[80]=!1:d[80]=!0,d[80]?c.resolve(d[81]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[79],c.i64.cast([0,0])).then(function(a){return a=a,d[102]=a[0],d[103]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[102]).then(function(a){return a=a,d[104]=a[0],a})},function(a){return d[81]=d[104]==null?"":d[104]}])},function(a){return d[82]=c.createArray(),d[102]=(d[82].push(c.i64.cast([0,6])),d[82]),c.nativeOperation(b("LSGetBlobFromString.nop"),"message_key_debug").then(function(a){return a=a,d[83]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[83],void 0,d[69],d[82]).then(function(a){return a=a,d[84]=a[0],a})},function(a){return d[84]?d[85]=!1:d[85]=!0,d[85]?c.resolve(d[86]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[84],c.i64.cast([0,0])).then(function(a){return a=a,d[102]=a[0],d[103]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[102]).then(function(a){return a=a,d[104]=a[0],a})},function(a){return d[86]=d[104]==null?"":d[104]}])},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[67]).then(function(a){return a=a,d[87]=a[0],a})},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),[d[87]==null?"":d[87],d[68]].join("")).then(function(a){return a=a,d[88]=a[0],a})},function(a){return d[89]=c.createArray(),d[102]=(d[89].push(c.i64.cast([0,6])),d[89]),c.nativeOperation(b("LSGetBlobFromString.nop"),"epoch_root_key_thread_id_debug").then(function(a){return a=a,d[90]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[90],void 0,d[88],d[89]).then(function(a){return a=a,d[91]=a[0],a})},function(a){return d[91]?d[92]=!1:d[92]=!0,d[92]?c.resolve(d[93]=""):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[91],c.i64.cast([0,0])).then(function(a){return a=a,d[102]=a[0],d[103]=a[1],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[102]).then(function(a){return a=a,d[104]=a[0],a})},function(a){return d[93]=d[104]==null?"":d[104]}])},function(a){return d[94]=":",c.blobs.neq(d[67],void 0)?c.sequence([function(a){return d[102]=c.createArray(),d[108]=(d[102].push(c.i64.cast([0,18])),d[102]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[67],d[102]).then(function(a){return a=a,d[103]=a[0],a})},function(a){return d[103]!==void 0?c.sequence([function(a){return d[108]=c.i64.of_int32(d[103].length),c.i64.ge(d[108],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[103],c.i64.cast([0,0])).then(function(a){return a=a,d[110]=a[0],d[111]=a[1],a})},function(a){return d[109]=d[110]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[110]=c.createArray(),void 0!==void 0?d[111]=(d[110].push(void 0),d[110]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint","CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",d[110],c.i64.cast([0,3]))},function(a){return d[109]=void 0}])},function(a){return d[104]=d[109]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[108]=c.createArray(),void 0!==void 0?d[109]=(d[108].push(void 0),d[108]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint","CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",d[108],c.i64.cast([0,3]))},function(a){return d[104]=void 0}])},function(a){return c.blobs.neq(d[104],void 0)?d[105]=!0:d[105]=!1,d[105]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.nativeOperation(b("LSBase64Encode.nop"),d[104]).then(function(a){return a=a,d[106]=a[0],a})},function(a){return d[106]!==void 0?d[107]=d[106]:d[107]="encodingfailed",d[95]=d[107]}]):c.resolve(d[95]="null")},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[66]).then(function(a){return a=a,d[96]=a[0],a})},function(e){return d[97]=new c.Map(),d[97].set("encryption_version",d[65]),d[97].set("epoch_anon_id",d[96]==null?"":d[96]),d[97].set("message_encryption_values",[d[76],d[94],d[81],d[94],d[86],d[94],d[93]].join("")),d[97].set("root_key_fingerprint",d[95]),d[97].set("backup_id",d[70]),d[98]=c.toJSON(d[97]),d[62]!==void 0?c.sequence([function(e){return d[102]=d[37].get("act_thread_id"),d[37],c.storedProcedure(b("LSLoadAndEncryptProtobufV2"),a[0],d[52],d[102]).then(function(a){return a=a,d[103]=a[0],d[104]=a[1],a})},function(a){return d[103]!==void 0?(d[108]=new c.Map(),d[108].set("protobuf_backup_payload",d[103]),d[108].set("encrypted_identifiers",d[62]),d[108].set("device_id",d[32]),d[108].set("identifiers",d[37]),d[108].set("encryption_keys",d[52]),d[108].set("content_type",c.i64.cast([0,1])),d[108].set("action_type",c.i64.cast([0,1])),d[108].set("value_secret_ref",d[98]),d[108].set("attachment_backup_payload",i.attachmentPayload),a=[d[108],void 0,d[47]],d[105]=a[0],d[106]=a[1],d[107]=a[2],a):(a=[void 0,d[104],d[47]],d[105]=a[0],d[106]=a[1],d[107]=a[2],a),a=[d[105],d[106],d[107]],d[99]=a[0],d[100]=a[1],d[101]=a[2],a}]):c.resolve((e=[void 0,d[63],d[47]],d[99]=e[0],d[100]=e[1],d[101]=e[2],e))},function(a){return a=[d[99],d[100],d[101]],d[54]=a[0],d[55]=a[1],d[56]=a[2],a}]):c.resolve((e=[void 0,d[53],d[47]],d[54]=e[0],d[55]=e[1],d[56]=e[2],e))},function(a){return a=[d[54],d[55],d[56]],d[33]=a[0],d[34]=a[1],d[35]=a[2],a}]))})},function(a){return a=[d[33],d[34],d[35]],d[26]=a[0],d[27]=a[1],d[28]=a[2],a}]):c.resolve((d[33]=new c.Map(),d[33].set("error_code",c.i64.cast([0,24])),d[33].set("stored_procedure","LSEncryptedBackupsLoadProtobufBackupSerializedPayloadDataStoredProcedure"),d[33].set("error_message",""),e=[void 0,d[33],d[11]],d[26]=e[0],d[27]=e[1],d[28]=e[2],e))},function(a){return a=[d[26],d[27],d[28]],d[12]=a[0],d[13]=a[1],d[14]=a[2],a}]))})},function(a){return d[16]=c.i64.of_float(Date.now()),d[17]=c.i64.random(),d[20]="Finishing execution. Execution time: ",d[21]=c.i64.to_string(c.i64.sub(d[16],d[0])),d[22]=" ms",d[18]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadProtobufBackupSerializedPayloadData] ",d[18],d[20],d[18],d[21],d[18],d[22]].join("")),c.i64.eq(c.i64.mod_(d[17],c.i64.cast([0,100])),c.i64.cast([0,0]))?(d[23]=",",d[24]=c.createArray(),void 0!==void 0?d[25]=(d[24].push(void 0),d[24]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadProtobufBackupSerializedPayloadData",[d[20],d[23],d[21],d[23],d[22]].join(""),d[24],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[12],d[13],d[14]],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSTaskSerializerEncryptedBackupsUploadProtobufOnly",["LSBase64Encode.nop","LSLoadProtobufBackupSerializedPayloadData","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][taskSerializerEncryptedBackupsUploadProtobufOnly] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSLoadProtobufBackupSerializedPayloadData"),a[0]).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],d[4]=a[2],a})},function(a){return d[2]!==void 0?c.sequence([function(a){return d[15]=d[2].get("encrypted_identifiers"),d[2],d[16]=d[2].get("identifiers"),d[2],d[17]=d[2].get("encryption_keys"),d[2],d[18]=d[2].get("protobuf_backup_payload"),d[2],d[19]=d[15].get("act_thread_id_ocmf_partial"),d[15],d[20]=d[15].get("otid_ocmf_partial"),d[15],d[21]=d[15].get("timestamp_encrypted"),d[15],d[22]=new c.Map(),d[22].set("list_key",d[19]),d[22].set("unique_key",d[20]),d[22].set("sort_key",d[21]),d[23]=d[2].get("value_secret_ref"),d[2],d[24]=new c.Map(),d[24].set("value",""),d[24].set("value_secret_ref",d[23]),d[25]=d[2].get("action_type"),d[2],d[26]=new c.Map(),d[26].set("list_item_id",d[22]),d[26].set("list_item",d[24]),d[26].set("action_type",d[25]),d[27]=d[16].get("server_thread_id"),d[16],d[28]=d[16].get("timestamp"),d[16],d[29]=d[16].get("otid"),d[16],d[30]=d[16].get("act_thread_id"),d[16],d[31]=new c.Map(),d[31].set("server_thread_key",d[27]),d[31].set("timestamp",d[28]),d[31].set("otid",d[29]),d[31].set("wa_thread_id",c.i64.from_string(d[30])),d[32]=d[17].get("mailbox_base_salt"),d[17],c.nativeOperation(b("LSBase64Encode.nop"),d[32]).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[34]=d[17].get("ocmf_shared_key"),d[17],c.nativeOperation(b("LSBase64Encode.nop"),d[34]).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[36]=new c.Map(),d[36].set("mailbox_root_key",d[33]==null?"":d[33]),d[36].set("ocmf_client_state_blob",d[35]==null?"":d[35]),d[37]=d[15].get("backup_id_ocmf_partial"),d[15],d[38]=d[2].get("device_id"),d[2],d[39]=d[17].get("message_payload_encryption_keys"),d[17],d[40]=d[39].get("epoch_id"),d[39],d[41]=d[17].get("message_payload_encryption_keys"),d[17],d[42]=d[41].get("encryption_version"),d[41],d[43]=d[2].get("content_type"),d[2],d[44]=new c.Map(),d[44].set("mailbox_partial_id",d[37]),d[44].set("action",d[26]),d[44].set("device_id",d[38]),d[44].set("echo_version",c.i64.cast([0,0])),d[44].set("epoch_id",d[40]),d[44].set("trace_id",void 0),d[44].set("encryption_version",d[42]),d[44].set("is_thread",c.i64.eq(d[43],c.i64.cast([0,2]))),d[44].set("raw_identifiers",d[31]),d[44].set("raw_tokens",d[36]),d[44].set("request_id",""),d[44].set("is_instamadillo",!0),d[45]=d[18].get("supplemental_data_encrypted"),d[18],d[45]!==void 0?c.sequence([function(a){return d[49]=d[18].get("protobuf_encrypted"),d[18],d[50]=d[18].get("backup_action"),d[18],d[51]=d[18].get("timestamp_ms"),d[18],d[52]=d[45].get("sk_ciphertext"),d[45],c.nativeOperation(b("LSBase64Encode.nop"),d[52]).then(function(a){return a=a,d[53]=a[0],a})},function(a){return d[54]=d[45].get("sk_hash"),d[45],c.nativeOperation(b("LSBase64Encode.nop"),d[54]).then(function(a){return a=a,d[55]=a[0],a})},function(a){return d[56]=d[18].get("message_tags"),d[18],d[57]=new c.Map(),d[57].set("supplementary_data_key",void 0),d[57].set("encrypted_protobuf",d[49]),d[57].set("key_value_backup_action",d[50]),d[57].set("protobuf_ts_ms",d[51]),d[57].set("supplemental_key_ciphertext",d[53]),d[57].set("supplemental_key_hash",d[55]),d[57].set("message_tags",d[56]),d[46]=d[57]}]):c.resolve((d[49]=d[18].get("protobuf_encrypted"),d[18],d[50]=d[18].get("backup_action"),d[18],d[51]=d[18].get("timestamp_ms"),d[18],d[52]=d[18].get("message_tags"),d[18],d[53]=new c.Map(),d[53].set("supplementary_data_key",void 0),d[53].set("encrypted_protobuf",d[49]),d[53].set("key_value_backup_action",d[50]),d[53].set("protobuf_ts_ms",d[51]),d[53].set("message_tags",d[52]),d[46]=d[53]))},function(a){return d[44].set("key_value_backup_payload",d[46]),d[47]=d[2].get("attachment_backup_payload"),d[2],d[47]!==void 0?d[44].set("attachment_backup_payload",d[47]):0,d[48]=c.toJSON(d[44]),a=[d[48],void 0,d[4]],d[5]=a[0],d[6]=a[1],d[7]=a[2],a}]):c.resolve((d[3]?d[15]=!1:d[15]=!0,d[15]?(a=[void 0,void 0,d[4]],d[16]=a[0],d[17]=a[1],d[18]=a[2],a):(a=[void 0,d[3],d[4]],d[16]=a[0],d[17]=a[1],d[18]=a[2],a),a=[d[16],d[17],d[18]],d[5]=a[0],d[6]=a[1],d[7]=a[2],a))},function(a){return d[15]=new c.Map(),d[16]=d[15].set("success",d[5]),d[17]=d[15].set("failure",d[6]),d[18]=d[15].set("context",d[7]),d[19]=c.toJSON(d[15]),d[8]=d[19],d[9]=c.i64.of_float(Date.now()),d[10]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[9],d[0])),d[14]=" ms",d[11]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][taskSerializerEncryptedBackupsUploadProtobufOnly] ",d[11],d[12],d[11],d[13],d[11],d[14]].join("")),c.i64.eq(c.i64.mod_(d[10],c.i64.cast([0,100])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"taskSerializerEncryptedBackupsUploadProtobufOnly",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[8],c.i64.cast([0,50042]),void 0],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSTaskSerializerMuteThreadV2",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(32).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("TaskSerializerMuteThreadV2: Task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2],f):(e=d.item,b.sequence([function(a){return c[8]=e.threadKey,b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?(c[9]=b.createArray(),c[10]=(c[9].push("TaskSerializerMuteThreadV2: Thread not found"),c[9]),c[11]=(c[9].push(c[8]),c[9]),c[12]=b.toJSON(c[9]),function(a){b.logger(a).mustfix(a)}(c[12]),a=[void 0,void 0,void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2],a):(e=d.item,b.sequence([function(a){return b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?c[9]=b.i64.cast([0,1]):(e=d.item,c[14]=e.syncGroup,b.i64.neq(c[14],void 0)?c[13]=c[14]:c[13]=b.i64.cast([0,1]),c[9]=c[13])})},function(a){return c[11]=new b.Map(),c[11].set("thread_key",c[8]),c[11].set("mailbox_type",b.i64.cast([0,0])),c[11].set("mute_expire_time_ms",e.muteExpireTimeMs),c[11].set("sync_group",c[9]),c[12]=b.toJSON(c[11]),a=[c[12],b.i64.cast([0,144]),void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2],a}]))})},function(a){return a=[c[4],c[5],c[6]],c[0]=a[0],c[1]=a[1],c[2]=a[2],a}]))})},function(a){return a=[c[0],c[1]],d[0]=a[0],d[1]=a[1],a}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSTaskSerializerRemoveThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(32).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("TaskSerializerRemoveThreadV2: Task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2],f):(e=d.item,c[7]=e.removeType,b.i64.neq(c[7],void 0)?(c[8]=new b.Map(),c[8].set("thread_key",e.threadKey),c[8].set("remove_type",c[7]),c[8].set("sync_group",e.syncGroup==null?b.i64.cast([0,1]):e.syncGroup),c[9]=b.toJSON(c[8]),f=[c[9],b.i64.cast([0,146]),void 0],c[4]=f[0],c[5]=f[1],c[6]=f[2],f):(d=[void 0,void 0,void 0],c[4]=d[0],c[5]=d[1],c[6]=d[2],d),e=[c[4],c[5],c[6]],c[0]=e[0],c[1]=e[1],c[2]=e[2],e)})},function(a){return a=[c[0],c[1]],d[0]=a[0],d[1]=a[1],a}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSTaskSerializerSendMessageV2",["LSSymmetricEncryptionCreateEncryptedString.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(31).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2],f):(e=d.item,b.sequence([function(d){return c[11]=e.offlineThreadingId,c[12]=e.messageId,c[20]=e.threadAttributionSource,c[9]=e.platformRef,c[10]=e.platformToken,c[8]=e.replySourceId,c[13]=e.replySourceType,c[19]=e.sendType,c[21]=e.markThreadRead,c[14]=e.initiatingSource,c[15]=e.skipUrlPreviewGen,c[17]=e.textHasLinks,c[18]=e.multitabEnv,c[16]=e.richTextFormatType,b.db.table(12).fetch([[[c[11]]],"optimistic"]).next().then(function(e,f){var d=e.done;e=e.value;return d?(c[22]=b.createArray(),c[23]=(c[22].push("OTID not found"),c[22]),c[24]=(c[22].push(c[11]),c[22]),c[25]=b.toJSON(c[22]),function(a){b.logger(a).mustfix(a)}(c[25]),d=[void 0,void 0,void 0],c[4]=d[0],c[5]=d[1],c[6]=d[2],d):(f=e.item,b.sequence([function(d){return c[29]=f.text,c[26]=f.threadKey,c[30]=f.messageId,c[28]=f.stickerId,c[32]=f.mentionOffsets,c[33]=f.mentionLengths,c[27]=f.mentionIds,c[34]=f.mentionTypes,c[37]=f.replyType,c[35]=f.isForwarded,c[31]=f.forwardScore,c[36]=f.hotEmojiSize,b.db.table(9).fetch([[[c[26]]]]).next().then(function(e,g){var d=e.done;e=e.value;return d?(c[38]=b.createArray(),c[39]=(c[38].push("thread not found"),c[38]),c[40]=(c[38].push(c[26]),c[38]),c[41]=b.toJSON(c[38]),function(a){b.logger(a).mustfix(a)}(c[41]),d=[void 0,void 0,void 0],c[22]=d[0],c[23]=d[1],c[24]=d[2],d):(g=e.item,b.sequence([function(d){return c[44]=g.threadName,c[38]=g.threadType,b.db.table(2).fetch([[[a[0]]]]).next().then(function(e,f){var d=e.done;e=e.value;return d?c[39]=!1:(f=e.item,b.sequence([function(d){return b.islc(b.db.table(2).fetch([[[f.queueName]],"queueNameTaskId"]),0,b.i64.to_float(b.i64.cast([0,1]))).next().then(function(e,f){var d=e.done;e=e.value;return d?c[45]=!1:(f=e.item,c[45]=b.i64.eq(f.taskId,a[0]))})},function(a){return c[39]=c[45]}]))})},function(a){return b.i64.eq(g.authorityLevel,b.i64.cast([0,20]))&&(b.i64.eq(c[38],b.i64.cast([0,2]))||b.i64.eq(c[38],b.i64.cast([0,5]))||b.i64.eq(c[38],b.i64.cast([0,26])))&&c[39]?b.sequence([function(a){return c[48]=c[19]==null?b.i64.cast([0,1]):c[19],b.db.table(9).fetch([[[c[26]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?c[45]=b.i64.cast([0,1]):(e=d.item,c[61]=e.syncGroup,b.i64.neq(c[61],void 0)?c[60]=c[61]:c[60]=b.i64.cast([0,1]),c[45]=c[60])})},function(a){return c[47]=new b.Map(),c[47].set("thread_id",c[26]),c[47].set("otid",c[11]),c[47].set("source",c[20]==null?b.i64.cast([0,0]):c[20]),c[47].set("send_type",b.i64.cast([0,1])),c[47].set("sync_group",c[45]),c[47].set("mark_thread_read",c[21]),b.i64.eq(c[48],b.i64.cast([0,1]))?b.resolve(c[47].set("text",c[29])):b.i64.eq(c[48],b.i64.cast([0,2]))?b.resolve(b.i64.neq(c[28],void 0)?(c[47].set("sticker_id",c[28]),c[47].set("send_type",c[48])):0):b.i64.eq(c[48],b.i64.cast([0,7]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[26],c[30]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[60]=a[0],c[61]=a[1],a):(d=b.item,a=[d.filename,d.attributionAppId],c[60]=a[0],c[61]=a[1],a)})},function(a){return c[60]!==void 0?b.i64.neq(c[61],void 0)?(c[47].set("url",c[60]),c[47].set("attribution_app_id",c[61]),c[47].set("send_type",c[48])):0:0}]):b.i64.eq(c[48],b.i64.cast([0,3]))?b.sequence([function(a){return c[47].set("text",c[29]),c[60]=b.createArray(),c[61]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[c[26],c[30]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return c[62]=a.offlineAttachmentId,c[63]=(c[60].push(b.i64.from_string(a.attachmentFbid)),c[60]),c[62]!==void 0?c[63]=(c[61].push(c[62]),c[61]):0})},function(a){return c[47].set("attachment_fbids",c[60]),b.i64.eq(c[48],b.i64.cast([0,9]))?c[47].set("offline_attachment_ids",c[61]):0,c[47].set("send_type",c[48])}]):b.i64.eq(c[48],b.i64.cast([0,9]))?b.sequence([function(a){return c[47].set("text",c[29]),c[60]=b.createArray(),c[61]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[c[26],c[30]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return c[62]=a.offlineAttachmentId,c[63]=(c[60].push(b.i64.from_string(a.attachmentFbid)),c[60]),c[62]!==void 0?c[63]=(c[61].push(c[62]),c[61]):0})},function(a){return c[47].set("attachment_fbids",c[60]),b.i64.eq(c[48],b.i64.cast([0,9]))?c[47].set("offline_attachment_ids",c[61]):0,c[47].set("send_type",c[48])}]):b.i64.eq(c[48],b.i64.cast([0,10]))?b.sequence([function(a){return c[47].set("text",c[29]),c[60]=b.createArray(),c[61]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[c[26],c[30]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return c[62]=a.offlineAttachmentId,c[63]=(c[60].push(b.i64.from_string(a.attachmentFbid)),c[60]),c[62]!==void 0?c[63]=(c[61].push(c[62]),c[61]):0})},function(a){return c[47].set("attachment_fbids",c[60]),b.i64.eq(c[48],b.i64.cast([0,9]))?c[47].set("offline_attachment_ids",c[61]):0,c[47].set("send_type",c[48])}]):b.i64.eq(c[48],b.i64.cast([0,4]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[26],c[30]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?c[60]=void 0:(d=b.item,c[60]=d.attachmentFbid)})},function(a){return b.db.table(16).fetch([[[c[26],c[30]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?c[62]=void 0:(d=b.item,c[62]=d.actionUrl)})},function(a){return c[60]!==void 0?(c[47].set("text",c[29]),c[62]!==void 0?c[47].set("url",c[62]):0,c[47].set("forwarded_share_id",c[60]),c[47].set("send_type",c[48])):0}]):b.i64.eq(c[48],b.i64.cast([0,5]))?b.resolve(c[12]!==void 0?(c[47].set("forwarded_msg_id",c[12]),c[47].set("send_type",c[48]),b.i64.neq(c[31],void 0)?c[47].set("forward_score",c[31]):0,c[47].set("strip_forwarded_msg_caption",!1)):0):b.i64.eq(c[48],b.i64.cast([0,6]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[26],c[30]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[60]=a[0],c[61]=a[1],a):(d=b.item,a=[d.filename,d.attributionAppId],c[60]=a[0],c[61]=a[1],a)})},function(a){return c[60]!==void 0?(c[47].set("url",c[60]),c[47].set("text",c[29]),c[47].set("send_type",c[48])):0}]):b.i64.eq(c[48],b.i64.cast([0,11]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[26],c[30]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[60]=a[0],c[61]=a[1],a):(d=b.item,a=[d.actionUrl,d.attributionAppId],c[60]=a[0],c[61]=a[1],a)})},function(a){return c[60]!==void 0?(c[47].set("url",c[60]),c[47].set("send_type",c[48])):0}]):b.resolve(0)},function(a){return c[56]=c[8]===""?void 0:c[8],c[56]!==void 0?b.i64.neq(c[13],void 0)?(c[60]=new b.Map(),c[60].set("reply_source_id",c[56]),c[60].set("reply_source_type",c[13]),c[60].set("reply_type",c[37]==null?b.i64.cast([0,0]):c[37]),c[47].set("reply_metadata",c[60])):0:0,c[57]=c[27]===""?void 0:c[27],c[57]!==void 0?(c[60]=c[32]===""?void 0:c[32],c[60]!==void 0?(c[61]=c[33]===""?void 0:c[33],c[61]!==void 0?(c[62]=new b.Map(),c[62].set("mention_ids",c[57]),c[62].set("mention_offsets",c[60]),c[62].set("mention_lengths",c[61]),c[62].set("mention_types",c[34]===""?void 0:c[34]),c[47].set("mention_data",c[62])):0):0):0,c[35]!==void 0?c[47].set("is_forwarded",c[35]):0,c[58]=c[9]===""?void 0:c[9],c[58]!==void 0?c[47].set("platform_ref",c[58]):0,c[59]=c[10]===""?void 0:c[10],c[59]!==void 0?c[47].set("platform_token",c[59]):0,[b.i64.cast([0,1]),b.i64.cast([0,2])].some(function(a){return b.i64.eq(c[48],a)})?b.i64.neq(c[36],void 0)?c[47].set("hot_emoji_size",c[36]):0:0,b.i64.neq(c[14],void 0)?c[47].set("initiating_source",c[14]):0,c[15]!==void 0?c[47].set("skip_url_preview_gen",c[15]):0,b.i64.neq(c[16],void 0)?c[47].set("rich_text_format_type",c[16]):0,b.resolve()},function(a){return c[17]!==void 0?c[47].set("text_has_links",c[17]):0,c[18]!==void 0?c[47].set("multitab_env",c[18]):0,c[49]=b.createArray(),b.forEach(b.db.table(14).fetch([[[c[26]]]]),function(a){a=a.item;return c[60]=(c[49].push(a.contactId),c[49])})},function(a){return c[50]=new b.Map(),c[50].set("participants",c[49]),c[50].set("send_payload",c[47]),c[44]!==void 0?c[50].set("thread_name",c[44]):0,b.db.table(312).fetch([[[c[26]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?c[51]=void 0:(d=b.item,c[51]=d.metadata)})},function(a){return c[50].set("thread_metadata",c[51]),b.forEach(b.db.table(9).fetch([[[g.threadKey]]]),function(a){var b=a.update;a.item;return b({otidOfFirstMessage:f.offlineThreadingId})})},function(a){return c[51]===void 0||!1?(b.i64.eq(c[38],b.i64.cast([0,5]))||b.i64.eq(c[38],b.i64.cast([0,26]))?(function(a){b.logger(a).mustfix(a)}("For Marketplace & community chat subthreads, thread metadata cannot be null"),a=[void 0,void 0,void 0],c[60]=a[0],c[61]=a[1],c[62]=a[2],a):(c[63]=b.toJSON(c[50]),a=[c[63],b.i64.cast([0,130]),void 0],c[60]=a[0],c[61]=a[1],c[62]=a[2],a),a=[c[60],c[61],c[62]],c[53]=a[0],c[54]=a[1],c[55]=a[2],a):(b.i64.eq(c[38],b.i64.cast([0,5]))?(c[63]=b.toJSON(c[50]),a=[c[63],b.i64.cast([0,645]),void 0],c[60]=a[0],c[61]=a[1],c[62]=a[2],a):(b.i64.eq(c[38],b.i64.cast([0,26]))?(c[66]=b.toJSON(c[50]),a=[c[66],b.i64.cast([0,696]),void 0],c[63]=a[0],c[64]=a[1],c[65]=a[2],a):(b.i64.eq(c[38],b.i64.cast([0,2]))?(c[69]=b.toJSON(c[50]),a=[c[69],b.i64.cast([0,787]),void 0],c[66]=a[0],c[67]=a[1],c[68]=a[2],a):(c[69]=b.toJSON(c[50]),a=[c[69],b.i64.cast([0,645]),void 0],c[66]=a[0],c[67]=a[1],c[68]=a[2],a),a=[c[66],c[67],c[68]],c[63]=a[0],c[64]=a[1],c[65]=a[2],a),a=[c[63],c[64],c[65]],c[60]=a[0],c[61]=a[1],c[62]=a[2],a),a=[c[60],c[61],c[62]],c[53]=a[0],c[54]=a[1],c[55]=a[2],a),a=[c[53],c[54],c[55]],c[41]=a[0],c[42]=a[1],c[43]=a[2],a}]):b.sequence([function(a){return c[48]=c[19]==null?b.i64.cast([0,1]):c[19],b.db.table(9).fetch([[[c[26]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?c[45]=b.i64.cast([0,1]):(e=d.item,c[55]=e.syncGroup,b.i64.neq(c[55],void 0)?c[54]=c[55]:c[54]=b.i64.cast([0,1]),c[45]=c[54])})},function(a){return c[47]=new b.Map(),c[47].set("thread_id",c[26]),c[47].set("otid",c[11]),c[47].set("source",c[20]==null?b.i64.cast([0,0]):c[20]),c[47].set("send_type",b.i64.cast([0,1])),c[47].set("sync_group",c[45]),c[47].set("mark_thread_read",c[21]),b.i64.eq(c[48],b.i64.cast([0,1]))?b.resolve(c[47].set("text",c[29])):b.i64.eq(c[48],b.i64.cast([0,2]))?b.resolve(b.i64.neq(c[28],void 0)?(c[47].set("sticker_id",c[28]),c[47].set("send_type",c[48])):0):b.i64.eq(c[48],b.i64.cast([0,7]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[26],c[30]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[54]=a[0],c[55]=a[1],a):(d=b.item,a=[d.filename,d.attributionAppId],c[54]=a[0],c[55]=a[1],a)})},function(a){return c[54]!==void 0?b.i64.neq(c[55],void 0)?(c[47].set("url",c[54]),c[47].set("attribution_app_id",c[55]),c[47].set("send_type",c[48])):0:0}]):b.i64.eq(c[48],b.i64.cast([0,3]))?b.sequence([function(a){return c[47].set("text",c[29]),c[54]=b.createArray(),c[55]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[c[26],c[30]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return c[56]=a.offlineAttachmentId,c[57]=(c[54].push(b.i64.from_string(a.attachmentFbid)),c[54]),c[56]!==void 0?c[57]=(c[55].push(c[56]),c[55]):0})},function(a){return c[47].set("attachment_fbids",c[54]),b.i64.eq(c[48],b.i64.cast([0,9]))?c[47].set("offline_attachment_ids",c[55]):0,c[47].set("send_type",c[48])}]):b.i64.eq(c[48],b.i64.cast([0,9]))?b.sequence([function(a){return c[47].set("text",c[29]),c[54]=b.createArray(),c[55]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[c[26],c[30]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return c[56]=a.offlineAttachmentId,c[57]=(c[54].push(b.i64.from_string(a.attachmentFbid)),c[54]),c[56]!==void 0?c[57]=(c[55].push(c[56]),c[55]):0})},function(a){return c[47].set("attachment_fbids",c[54]),b.i64.eq(c[48],b.i64.cast([0,9]))?c[47].set("offline_attachment_ids",c[55]):0,c[47].set("send_type",c[48])}]):b.i64.eq(c[48],b.i64.cast([0,10]))?b.sequence([function(a){return c[47].set("text",c[29]),c[54]=b.createArray(),c[55]=b.createArray(),b.forEach(b.sortBy(b.db.table(16).fetch([[[c[26],c[30]]]]),[["attachmentIndex","ASC"]]),function(a){a=a.item;return c[56]=a.offlineAttachmentId,c[57]=(c[54].push(b.i64.from_string(a.attachmentFbid)),c[54]),c[56]!==void 0?c[57]=(c[55].push(c[56]),c[55]):0})},function(a){return c[47].set("attachment_fbids",c[54]),b.i64.eq(c[48],b.i64.cast([0,9]))?c[47].set("offline_attachment_ids",c[55]):0,c[47].set("send_type",c[48])}]):b.i64.eq(c[48],b.i64.cast([0,4]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[26],c[30]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?c[54]=void 0:(d=b.item,c[54]=d.attachmentFbid)})},function(a){return b.db.table(16).fetch([[[c[26],c[30]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?c[56]=void 0:(d=b.item,c[56]=d.actionUrl)})},function(a){return c[54]!==void 0?(c[47].set("text",c[29]),c[56]!==void 0?c[47].set("url",c[56]):0,c[47].set("forwarded_share_id",c[54]),c[47].set("send_type",c[48])):0}]):b.i64.eq(c[48],b.i64.cast([0,5]))?b.resolve(c[12]!==void 0?(c[47].set("forwarded_msg_id",c[12]),c[47].set("send_type",c[48]),b.i64.neq(c[31],void 0)?c[47].set("forward_score",c[31]):0,c[47].set("strip_forwarded_msg_caption",!1)):0):b.i64.eq(c[48],b.i64.cast([0,6]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[26],c[30]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[54]=a[0],c[55]=a[1],a):(d=b.item,a=[d.filename,d.attributionAppId],c[54]=a[0],c[55]=a[1],a)})},function(a){return c[54]!==void 0?(c[47].set("url",c[54]),c[47].set("text",c[29]),c[47].set("send_type",c[48])):0}]):b.i64.eq(c[48],b.i64.cast([0,11]))?b.sequence([function(a){return b.db.table(16).fetch([[[c[26],c[30]]]]).next().then(function(b,d){var a=b.done;b=b.value;return a?(a=[void 0,void 0],c[54]=a[0],c[55]=a[1],a):(d=b.item,a=[d.actionUrl,d.attributionAppId],c[54]=a[0],c[55]=a[1],a)})},function(a){return c[54]!==void 0?(c[47].set("url",c[54]),c[47].set("send_type",c[48])):0}]):b.resolve(0)},function(a){return c[50]=c[8]===""?void 0:c[8],c[50]!==void 0?b.i64.neq(c[13],void 0)?(c[54]=new b.Map(),c[54].set("reply_source_id",c[50]),c[54].set("reply_source_type",c[13]),c[54].set("reply_type",c[37]==null?b.i64.cast([0,0]):c[37]),c[47].set("reply_metadata",c[54])):0:0,c[51]=c[27]===""?void 0:c[27],c[51]!==void 0?(c[54]=c[32]===""?void 0:c[32],c[54]!==void 0?(c[55]=c[33]===""?void 0:c[33],c[55]!==void 0?(c[56]=new b.Map(),c[56].set("mention_ids",c[51]),c[56].set("mention_offsets",c[54]),c[56].set("mention_lengths",c[55]),c[56].set("mention_types",c[34]===""?void 0:c[34]),c[47].set("mention_data",c[56])):0):0):0,c[35]!==void 0?c[47].set("is_forwarded",c[35]):0,c[52]=c[9]===""?void 0:c[9],c[52]!==void 0?c[47].set("platform_ref",c[52]):0,c[53]=c[10]===""?void 0:c[10],c[53]!==void 0?c[47].set("platform_token",c[53]):0,[b.i64.cast([0,1]),b.i64.cast([0,2])].some(function(a){return b.i64.eq(c[48],a)})?b.i64.neq(c[36],void 0)?c[47].set("hot_emoji_size",c[36]):0:0,b.i64.neq(c[14],void 0)?c[47].set("initiating_source",c[14]):0,c[15]!==void 0?c[47].set("skip_url_preview_gen",c[15]):0,b.i64.neq(c[16],void 0)?c[47].set("rich_text_format_type",c[16]):0,b.resolve()},function(a){return c[17]!==void 0?c[47].set("text_has_links",c[17]):0,c[18]!==void 0?c[47].set("multitab_env",c[18]):0,c[49]=b.toJSON(c[47]),a=[c[49],b.i64.cast([0,46]),void 0],c[41]=a[0],c[42]=a[1],c[43]=a[2],a}])},function(a){return a=[c[41],c[42],c[43]],c[22]=a[0],c[23]=a[1],c[24]=a[2],a}]))})},function(a){return a=[c[22],c[23],c[24]],c[4]=a[0],c[5]=a[1],c[6]=a[2],a}]))})},function(a){return a=[c[4],c[5],c[6]],c[0]=a[0],c[1]=a[1],c[2]=a[2],a}]))})},function(a){return a=[c[0],c[1]],d[0]=a[0],d[1]=a[1],a}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSTaskSerializerUpdateThreadName",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(32).fetch([[[a[0]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?(c[4]=b.createArray(),c[5]=(c[4].push("taskSerializerUpdateThreadName: Task ID not found"),c[4]),c[6]=(c[4].push(a[0]),c[4]),c[7]=b.toJSON(c[4]),function(a){b.logger(a).mustfix(a)}(c[7]),f=[void 0,void 0,void 0],c[0]=f[0],c[1]=f[1],c[2]=f[2],f):(e=d.item,b.sequence([function(a){return c[8]=e.threadKey,b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?(c[9]=b.createArray(),c[10]=(c[9].push("taskSerializerUpdateThreadName: Thread not found"),c[9]),c[11]=(c[9].push(c[8]),c[9]),c[12]=b.toJSON(c[9]),function(a){b.logger(a).mustfix(a)}(c[12]),a=[void 0,void 0,void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2],a):(e=d.item,b.sequence([function(a){return b.db.table(9).fetch([[[c[8]]]]).next().then(function(d,e){var a=d.done;d=d.value;return a?c[9]=b.i64.cast([0,1]):(e=d.item,c[14]=e.syncGroup,b.i64.neq(c[14],void 0)?c[13]=c[14]:c[13]=b.i64.cast([0,1]),c[9]=c[13])})},function(a){return c[11]=new b.Map(),c[11].set("thread_key",c[8]),c[11].set("thread_name",e.threadName==null?"":e.threadName),c[11].set("sync_group",c[9]),c[12]=b.toJSON(c[11]),a=[c[12],b.i64.cast([0,32]),void 0],c[4]=a[0],c[5]=a[1],c[6]=a[2],a}]))})},function(a){return a=[c[4],c[5],c[6]],c[0]=a[0],c[1]=a[1],c[2]=a[2],a}]))})},function(a){return a=[c[0],c[1],c[2]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSSerializeTask",["LSForceTaskExecutionImmediately","LSTaskSerializerAcsIssueNextSync","LSTaskSerializerE2eeMessageIntegrityCheckV2","LSTaskSerializerE2eeMetadataThreadIntegrityCheck","LSTaskSerializerEncryptedBackupAction","LSTaskSerializerEncryptedBackupsLoopingUpload","LSTaskSerializerEncryptedBackupsOpenUpload","LSTaskSerializerEncryptedBackupsRestoreWithSerializer","LSTaskSerializerEncryptedBackupsUpload","LSTaskSerializerEncryptedBackupsUploadProtobufOnly","LSTaskSerializerMuteThreadV2","LSTaskSerializerRemoveThread","LSTaskSerializerSendMessageV2","LSTaskSerializerUnauthenticatedTask","LSTaskSerializerUpdateThreadName"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return a[1]==="46"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerSendMessageV2"),a[0]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],a})},function(a){return a=[d[8],c.i64.to_string(d[9]),void 0,void 0],d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],a}]):c.sequence([function(e){return a[1]==="144"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerMuteThreadV2"),a[0]).then(function(a){return a=a,d[12]=a[0],d[13]=a[1],a})},function(a){return a=[d[12],c.i64.to_string(d[13]),void 0,void 0],d[8]=a[0],d[9]=a[1],d[10]=a[2],d[11]=a[3],a}]):c.sequence([function(e){return a[1]==="146"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerRemoveThread"),a[0]).then(function(a){return a=a,d[16]=a[0],d[17]=a[1],a})},function(a){return a=[d[16],c.i64.to_string(d[17]),void 0,void 0],d[12]=a[0],d[13]=a[1],d[14]=a[2],d[15]=a[3],a}]):c.sequence([function(e){return a[1]==="32"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerUpdateThreadName"),a[0]).then(function(a){return a=a,d[20]=a[0],d[21]=a[1],d[22]=a[2],a})},function(a){return a=[d[20],c.i64.to_string(d[21]),void 0,void 0],d[16]=a[0],d[17]=a[1],d[18]=a[2],d[19]=a[3],a}]):c.sequence([function(e){return a[1]==="362"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerAcsIssueNextSync"),a[0]).then(function(a){return a=a,d[24]=a[0],d[25]=a[1],d[26]=a[2],a})},function(a){return a=[d[24],c.i64.to_string(d[25]),void 0,void 0],d[20]=a[0],d[21]=a[1],d[22]=a[2],d[23]=a[3],a}]):c.sequence([function(e){return a[1]==="50015"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsRestoreWithSerializer"),a[0]).then(function(a){return a=a,d[28]=a[0],d[29]=a[1],d[30]=a[2],a})},function(a){return a=[d[28],c.i64.to_string(d[29]),void 0,void 0],d[24]=a[0],d[25]=a[1],d[26]=a[2],d[27]=a[3],a}]):c.sequence([function(e){return a[1]==="319"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupAction"),a[0]).then(function(a){return a=a,d[32]=a[0],d[33]=a[1],d[34]=a[2],a})},function(a){return a=[d[32],c.i64.to_string(d[33]),void 0,void 0],d[28]=a[0],d[29]=a[1],d[30]=a[2],d[31]=a[3],a}]):c.sequence([function(e){return a[1]==="50026"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsUpload"),a[0]).then(function(a){return a=a,d[36]=a[0],d[37]=a[1],a})},function(a){return a=[d[36],c.i64.to_string(d[37]),void 0,void 0],d[32]=a[0],d[33]=a[1],d[34]=a[2],d[35]=a[3],a}]):c.sequence([function(e){return a[1]==="50042"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsUploadProtobufOnly"),a[0]).then(function(a){return a=a,d[40]=a[0],d[41]=a[1],d[42]=a[2],a})},function(a){return a=[d[40],c.i64.to_string(d[41]),void 0,void 0],d[36]=a[0],d[37]=a[1],d[38]=a[2],d[39]=a[3],a}]):c.sequence([function(e){return a[1]==="700"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerE2eeMetadataThreadIntegrityCheck"),a[0]).then(function(a){return a=a,d[44]=a[0],d[45]=a[1],d[46]=a[2],a})},function(a){return a=[d[44],c.i64.to_string(d[45]),void 0,void 0],d[40]=a[0],d[41]=a[1],d[42]=a[2],d[43]=a[3],a}]):c.sequence([function(e){return a[1]==="705"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerE2eeMessageIntegrityCheckV2"),a[0]).then(function(a){return a=a,d[48]=a[0],d[49]=a[1],d[50]=a[2],a})},function(a){return a=[d[48],c.i64.to_string(d[49]),void 0,void 0],d[44]=a[0],d[45]=a[1],d[46]=a[2],d[47]=a[3],a}]):c.sequence([function(e){return a[1]==="50043"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsLoopingUpload"),a[0]).then(function(a){return a=a,d[52]=a[0],d[53]=a[1],d[54]=a[2],a})},function(a){return a=[d[52],c.i64.to_string(d[53]),void 0,void 0],d[48]=a[0],d[49]=a[1],d[50]=a[2],d[51]=a[3],a}]):c.sequence([function(e){return a[1]==="50048"?c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerEncryptedBackupsOpenUpload"),a[0]).then(function(a){return a=a,d[56]=a[0],d[57]=a[1],d[58]=a[2],a})},function(a){return a=[d[56],c.i64.to_string(d[57]),void 0,void 0],d[52]=a[0],d[53]=a[1],d[54]=a[2],d[55]=a[3],a}]):c.resolve((e=[a[2],a[1],void 0,void 0],d[52]=e[0],d[53]=e[1],d[54]=e[2],d[55]=e[3],e))},function(a){return a=[d[52],d[53],d[54],d[55]],d[48]=a[0],d[49]=a[1],d[50]=a[2],d[51]=a[3],a}])},function(a){return a=[d[48],d[49],d[50],d[51]],d[44]=a[0],d[45]=a[1],d[46]=a[2],d[47]=a[3],a}])},function(a){return a=[d[44],d[45],d[46],d[47]],d[40]=a[0],d[41]=a[1],d[42]=a[2],d[43]=a[3],a}])},function(a){return a=[d[40],d[41],d[42],d[43]],d[36]=a[0],d[37]=a[1],d[38]=a[2],d[39]=a[3],a}])},function(a){return a=[d[36],d[37],d[38],d[39]],d[32]=a[0],d[33]=a[1],d[34]=a[2],d[35]=a[3],a}])},function(a){return a=[d[32],d[33],d[34],d[35]],d[28]=a[0],d[29]=a[1],d[30]=a[2],d[31]=a[3],a}])},function(a){return a=[d[28],d[29],d[30],d[31]],d[24]=a[0],d[25]=a[1],d[26]=a[2],d[27]=a[3],a}])},function(a){return a=[d[24],d[25],d[26],d[27]],d[20]=a[0],d[21]=a[1],d[22]=a[2],d[23]=a[3],a}])},function(a){return a=[d[20],d[21],d[22],d[23]],d[16]=a[0],d[17]=a[1],d[18]=a[2],d[19]=a[3],a}])},function(a){return a=[d[16],d[17],d[18],d[19]],d[12]=a[0],d[13]=a[1],d[14]=a[2],d[15]=a[3],a}])},function(a){return a=[d[12],d[13],d[14],d[15]],d[8]=a[0],d[9]=a[1],d[10]=a[2],d[11]=a[3],a}])},function(a){return a=[d[8],d[9],d[10],d[11]],d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],a}])},function(e){return a[3]?c.resolve((d[1]==="60009"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","60009"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[8]=e[0],d[9]=e[1],d[10]=e[2],d[11]=e[3],e):(d[1]==="60006"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","60006"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[12]=e[0],d[13]=e[1],d[14]=e[2],d[15]=e[3],e):(d[1]==="60008"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","60008"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[16]=e[0],d[17]=e[1],d[18]=e[2],d[19]=e[3],e):(d[1]==="60011"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","60011"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[20]=e[0],d[21]=e[1],d[22]=e[2],d[23]=e[3],e):(d[1]==="765"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","765"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[24]=e[0],d[25]=e[1],d[26]=e[2],d[27]=e[3],e):(d[1]==="1006"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","1006"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[28]=e[0],d[29]=e[1],d[30]=e[2],d[31]=e[3],e):(d[1]==="160009"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","160009"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[32]=e[0],d[33]=e[1],d[34]=e[2],d[35]=e[3],e):(d[1]==="761"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","761"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[36]=e[0],d[37]=e[1],d[38]=e[2],d[39]=e[3],e):(d[1]==="632"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","632"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[40]=e[0],d[41]=e[1],d[42]=e[2],d[43]=e[3],e):(d[1]==="384"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","384"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[44]=e[0],d[45]=e[1],d[46]=e[2],d[47]=e[3],e):(d[1]==="384"?(function(a){c.logger(a).mustfix(a)}(["Deidentified task with label ","384"," is being executed through the 'identified' path. This should never happen!"].join("")),e=[void 0,void 0,void 0,void 0],d[48]=e[0],d[49]=e[1],d[50]=e[2],d[51]=e[3],e):(e=[d[0],d[1],d[2],d[3]],d[48]=e[0],d[49]=e[1],d[50]=e[2],d[51]=e[3],e),e=[d[48],d[49],d[50],d[51]],d[44]=e[0],d[45]=e[1],d[46]=e[2],d[47]=e[3],e),e=[d[44],d[45],d[46],d[47]],d[40]=e[0],d[41]=e[1],d[42]=e[2],d[43]=e[3],e),e=[d[40],d[41],d[42],d[43]],d[36]=e[0],d[37]=e[1],d[38]=e[2],d[39]=e[3],e),e=[d[36],d[37],d[38],d[39]],d[32]=e[0],d[33]=e[1],d[34]=e[2],d[35]=e[3],e),e=[d[32],d[33],d[34],d[35]],d[28]=e[0],d[29]=e[1],d[30]=e[2],d[31]=e[3],e),e=[d[28],d[29],d[30],d[31]],d[24]=e[0],d[25]=e[1],d[26]=e[2],d[27]=e[3],e),e=[d[24],d[25],d[26],d[27]],d[20]=e[0],d[21]=e[1],d[22]=e[2],d[23]=e[3],e),e=[d[20],d[21],d[22],d[23]],d[16]=e[0],d[17]=e[1],d[18]=e[2],d[19]=e[3],e),e=[d[16],d[17],d[18],d[19]],d[12]=e[0],d[13]=e[1],d[14]=e[2],d[15]=e[3],e),e=[d[12],d[13],d[14],d[15]],d[8]=e[0],d[9]=e[1],d[10]=e[2],d[11]=e[3],e),e=[d[8],d[9],d[10],d[11]],d[4]=e[0],d[5]=e[1],d[6]=e[2],d[7]=e[3],e)):c.sequence([function(e){return c.storedProcedure(b("LSTaskSerializerUnauthenticatedTask"),a[0],d[1],d[0]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],d[10]=a[2],a})},function(a){return c.i64.neq(void 0,void 0)?c.storedProcedure(b("LSForceTaskExecutionImmediately"),void 0):c.resolve()},function(a){return a=[d[8],c.i64.to_string(d[9]),void 0,d[10]],d[4]=a[0],d[5]=a[1],d[6]=a[2],d[7]=a[3],a}])},function(a){return a=[d[4],d[5],d[6],d[7]],e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],a}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSBeginHandlingPendingTasksForQueue",["LSSerializeTask","gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,d=a[a.length-1],e=[],f=[];return d.sequence([function(g){return d.sequence([function(b){return d.filter(d.db.table(3).fetch([[[a[0]]]]),function(b){return d.i64.neq(b.epochId,void 0)&&b.taskQueueName===a[0]}).next().then(function(a,b){b=a.done;a=a.value;return b?e[0]=!1:(a.item,e[0]=!0)})},function(f){return e[2]=new d.Map(),e[2].set("queue_name",a[0]),e[2].set("next_sync_ms",void 0),e[2].set("work_item_type",d.i64.cast([0,4])),e[2].set("network_payload",void 0),e[2].set("http_url_override",void 0),e[2].set("skip_realtime_gateway",!1),e[3]=e[2],e[0]?d.resolve():d.sequence([function(b){return d.islc(d.db.table(2).fetch([[[a[0]]],"queueNameTaskId"]),0,d.i64.to_float(d.i64.cast([0,1]))).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=["",d.i64.cast([-1,4294967295]),d.i64.cast([0,0]),d.i64.cast([-1,4294967295]),void 0,void 0],e[4]=c[0],e[5]=c[1],e[6]=c[2],e[7]=c[3],e[8]=c[4],e[9]=c[5],c):(b=a.item,c=[b.queueName,b.minTimeToSyncTimestampMs,b.pluginType,b.failureCount,b.context,b.httpUrlOverride],e[4]=c[0],e[5]=c[1],e[6]=c[2],e[7]=c[3],e[8]=c[4],e[9]=c[5],c)})},function(b){return d.db.table(3).fetch([[[a[0]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?e[11]=d.i64.cast([0,0]):(b=a.item,e[11]=b.lastSyncRequestTimestampMs)})},function(f){return e[13]=d.i64.of_float(Date.now()),e[15]=d.i64.sub(e[5],e[13]),d.i64.le(e[15],d.i64.cast([0,0]))?(d.i64.eq(e[7],d.i64.cast([0,0]))||a[1]?e[16]=d.i64.cast([0,0]):(d.i64.gt(e[7],d.i64.cast([0,7]))?e[19]=d.i64.sub(e[7],d.i64.cast([0,7])):e[19]=e[7],e[20]=d.i64.sub(e[19],d.i64.cast([0,1])),e[21]=d.i64.mul(d.i64.lsl_(d.i64.cast([0,1]),d.i64.to_int32(d.i64.lt(e[20],d.i64.cast([0,7]))?e[20]:d.i64.cast([0,7]))),d.i64.cast([0,500])),e[16]=d.i64.lt(e[21],d.i64.cast([0,3e4]))?e[21]:d.i64.cast([0,3e4])),e[17]=d.i64.of_float(Date.now()),e[18]=d.i64.sub(d.i64.add(e[11],e[16]),e[17]),e[14]=d.i64.gt(e[18],d.i64.cast([0,0]))?e[18]:d.i64.cast([0,0])):e[14]=e[15],d.i64.neq(e[14],d.i64.cast([0,0]))?d.resolve((e[16]=new d.Map(),e[16].set("queue_name",a[0]),e[16].set("next_sync_ms",e[14]),e[16].set("work_item_type",d.i64.cast([0,3])),e[16].set("network_payload",void 0),e[16].set("http_url_override",void 0),e[16].set("skip_realtime_gateway",!1),e[3]=e[16])):d.sequence([function(a){return d.i64.neq(e[6],d.i64.cast([0,0]))||e[8]==="16"||e[8]==="4"?d.resolve((a=[e[4],void 0,d.i64.cast([0,2]),void 0,void 0,!1],e[16]=a[0],e[17]=a[1],e[18]=a[2],e[19]=a[3],e[20]=a[4],e[21]=a[5],a)):d.sequence([function(a){return e[23]=d.createArray(),e[24]=!0,d.islc(d.db.table(2).fetch([[[e[4]]],"queueNameTaskId"]),0,d.i64.to_float(d.i64.cast([0,1]))).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=["",d.i64.cast([-1,4294967295]),d.i64.cast([0,0]),d.i64.cast([-1,4294967295]),void 0,void 0],e[25]=c[0],e[26]=c[1],e[27]=c[2],e[28]=c[3],e[29]=c[4],e[30]=c[5],c):(b=a.item,c=[b.queueName,b.minTimeToSyncTimestampMs,b.pluginType,b.failureCount,b.context,b.httpUrlOverride],e[25]=c[0],e[26]=c[1],e[27]=c[2],e[28]=c[3],e[29]=c[4],e[30]=c[5],c)})},function(a){return d.db.table(2).fetch([[[e[4]]],"queueNameTaskId"]).next().then(function(a,b){var c=a.done;a=a.value;return c?e[32]=!0:(b=a.item,d.sequence([function(a){return d.db.table(306).fetch([[[b.taskId]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?e[41]=!0:(c=b.item,e[41]=c.requiresAuthentication)})},function(a){return e[32]=e[41]}]))})},function(a){return d.forEach(d.db.table(2).fetch([[[e[4]]],"queueNameTaskId"]),function(a){var f=a.item;return d.sequence([function(a){return e[41]=f.taskId,e[42]=f.context,e[44]=f.failureCount,e[43]=f.timeoutTimestampMs,d.i64.eq(f.firstExecutedTimestampMs,d.i64.cast([0,0]))?(e[45]=d.i64.of_float(Date.now()),d.forEach(d.db.table(2).fetch([[[e[41]]]]),function(a){var b=a.update;a.item;return b({firstExecutedTimestampMs:e[45]})})):d.resolve()},function(a){return d.sequence([function(a){return d.db.table(306).fetch([[[e[41]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?e[45]=!0:(b=a.item,e[45]=b.requiresAuthentication)})},function(a){return e[24]=f.httpUrlOverride===e[30]&&e[45]===e[32]&&e[24],e[24]?d.sequence([function(a){return e[42]===void 0?d.sequence([function(a){return d.forEach(d.db.table(2).fetch([[[e[41]]]]),function(a){return a["delete"]()})},function(a){return a=[void 0,void 0],e[47]=a[0],e[48]=a[1],a}]):d.sequence([function(a){return d.i64.neq(e[43],void 0)?(e[56]=d.i64.of_float(Date.now()),e[53]=d.i64.ge(e[56],e[43])):e[53]=!1,e[53]?d.sequence([function(a){return d.forEach(d.db.table(2).fetch([[[e[41]]]]),function(a){return a["delete"]()})},function(a){return a=[void 0,void 0],e[54]=a[0],e[55]=a[1],a}]):d.sequence([function(a){return d.storedProcedure(b("LSSerializeTask"),e[41],e[42],f.taskValue,e[32]).then(function(a){return a=a,e[56]=a[0],e[57]=a[1],e[58]=a[2],e[59]=a[3],a})},function(a){return e[56]!==void 0?(e[62]=new d.Map(),e[62].set("label",e[57]),e[62].set("payload",e[56]),e[62].set("queue_name",f.queueName),e[62].set("task_id",e[41]),e[62].set("failure_count",d.i64.eq(e[44],d.i64.cast([0,0]))?void 0:e[44]),a=[e[62],void 0],e[60]=a[0],e[61]=a[1],a):(d.i64.neq(e[59],void 0)?(a=[void 0,e[59]],e[62]=a[0],e[63]=a[1],a):(a=[void 0,void 0],e[62]=a[0],e[63]=a[1],a),a=[e[62],e[63]],e[60]=a[0],e[61]=a[1],a),a=[e[60],e[61]],e[54]=a[0],e[55]=a[1],a}])},function(a){return a=[e[54],e[55]],e[47]=a[0],e[48]=a[1],a}])},function(a){return e[47]?e[49]=!1:e[49]=!0,e[49]?d.i64.neq(e[48],void 0)?d.forEach(d.db.table(2).fetch([[[e[41]]]]),function(a){var b=a.item;return e[53]=d.i64.of_float(Date.now()),d.forEach(d.db.table(2).fetch([[[b.taskId]]]),function(a){var c=a.update;a.item;return c({minTimeToSyncTimestampMs:d.i64.add(e[53],e[48]),failureCount:d.i64.add(b.failureCount,d.i64.cast([0,1]))})})}):d.forEach(d.db.table(2).fetch([[[e[41]]]]),function(a){return a["delete"]()}):d.resolve(e[53]=(e[23].push(e[47]),e[23]))},function(a){return e[50]=d.i64.of_int32(e[23].length),c("gkx")("26373")&&e[42]==="207"?e[51]=d.i64.cast([0,50]):e[51]=d.i64.cast([0,5]),e[42]!==void 0?e[52]=["90","130","153"].includes(e[42]):e[52]=!1,e[24]=!(d.i64.ge(e[50],e[51])||e[52])}]):d.resolve()}])}])})},function(a){return e[34]=d.i64.of_int32(e[23].length),d.i64.eq(e[34],d.i64.cast([0,0]))?d.resolve((a=[e[4],void 0,d.i64.cast([0,4]),void 0,void 0,!1],e[35]=a[0],e[36]=a[1],e[37]=a[2],e[38]=a[3],e[39]=a[4],e[40]=a[5],a)):d.sequence([function(a){return e[41]=d.i64.of_float(Date.now()),e[42]=d.i64.random(),e[52]=d.i64.and_(d.i64.or_(d.i64.lsl_(e[41],d.i64.to_int32(d.i64.cast([0,22]))),d.i64.and_(e[42],d.i64.cast([0,4194303]))),d.i64.cast([2147483647,4294967295])),d.db.table(3).fetch([[[e[4],d.i64.cast([-1,4294967295])]]]).next().then(function(a,b){b=a.done;a=a.value;return b?(e[53]=d.i64.of_float(Date.now()),d.db.table(3).add({syncDatabaseId:d.i64.cast([-1,4294967295]),taskQueueName:e[4],failureCount:d.i64.cast([0,0]),lastSentTimestampMs:d.i64.cast([0,0]),lastSyncRequestTimestampMs:e[53],epochId:e[52]})):(a.item,e[53]=d.i64.of_float(Date.now()),d.forEach(d.db.table(3).fetch([[[e[4],d.i64.cast([-1,4294967295])]]]),function(a){var b=a.update;a.item;return b({epochId:e[52],lastSyncRequestTimestampMs:e[53]})}))})},function(a){return d.islc(d.db.table(2).fetch([[[e[4]]],"queueNameTaskId"]),0,d.i64.to_float(d.i64.cast([0,1]))).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=["",d.i64.cast([-1,4294967295]),d.i64.cast([0,0]),d.i64.cast([-1,4294967295]),void 0,void 0],e[44]=c[0],e[45]=c[1],e[46]=c[2],e[47]=c[3],e[48]=c[4],e[49]=c[5],c):(b=a.item,c=[b.queueName,b.minTimeToSyncTimestampMs,b.pluginType,b.failureCount,b.context,b.httpUrlOverride],e[44]=c[0],e[45]=c[1],e[46]=c[2],e[47]=c[3],e[48]=c[4],e[49]=c[5],c)})},function(a){return e[51]=new d.Map(),e[51].set("tasks",e[23]),e[51].set("epoch_id",e[52]),a=[e[4],void 0,d.i64.cast([0,1]),e[51],e[49],!(e[49]===void 0)||d.i64.gt(e[47],d.i64.cast([0,7]))],e[35]=a[0],e[36]=a[1],e[37]=a[2],e[38]=a[3],e[39]=a[4],e[40]=a[5],a}])},function(a){return a=[e[35],e[36],e[37],e[38],e[39],e[40]],e[16]=a[0],e[17]=a[1],e[18]=a[2],e[19]=a[3],e[20]=a[4],e[21]=a[5],a}])},function(a){return e[22]=new d.Map(),e[22].set("queue_name",e[16]),e[22].set("next_sync_ms",e[17]),e[22].set("work_item_type",e[18]),e[22].set("network_payload",e[19]),e[22].set("http_url_override",e[20]),e[22].set("skip_realtime_gateway",e[21]),e[3]=e[22]}])}])},function(a){return f[0]=e[3]}])},function(a){return d.resolve(f)}])}d=a;g["default"]=d}),98);
__d("LSBeginHandlingPendingTasksForQueueStoredProcedure",["LSBeginHandlingPendingTasksForQueue","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.queueName;d[1]=b.ignoreSoftDelay;return c("LSBeginHandlingPendingTasksForQueue").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSBeginHandlingSyncForSyncGroup",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(1).fetch([[[a[0]]]]).next().then(function(a,d){var e=a.done;a=a.value;return e?c[0]=void 0:(d=a.item,c[9]=new b.Map(),c[9].set("group_id",d.groupId),c[9].set("current_cursor",d.currentCursor),c[9].set("sync_status",d.syncStatus),c[9].set("sync_params",d.syncParams),c[9].set("send_sync_params",d.sendSyncParams),c[9].set("min_time_to_sync_timestamp_ms",d.minTimeToSyncTimestampMs),c[9].set("can_ignore_timestamp",d.canIgnoreTimestamp),c[9].set("sync_channel",d.syncChannel),c[9].set("last_sync_request_timestamp_ms",d.lastSyncRequestTimestampMs),c[0]=c[9])})},function(d){return c[0]?c[2]=!1:c[2]=!0,c[2]?b.resolve((d=[a[0],void 0,b.i64.cast([0,4]),void 0,!1],c[3]=d[0],c[4]=d[1],c[5]=d[2],c[6]=d[3],c[7]=d[4],d)):b.sequence([function(a){return c[9]=c[0].get("group_id"),c[0],b.filter(b.db.table(3).fetch(),function(a){return b.i64.neq(a.epochId,void 0)&&b.i64.eq(a.syncDatabaseId,c[9])}).next().then(function(a,b){b=a.done;a=a.value;return b?c[10]=!1:(a.item,c[10]=!0)})},function(d){return c[10]?b.resolve((c[17]=c[0].get("group_id"),c[0],d=[c[17],void 0,b.i64.cast([0,4]),void 0,!1],c[12]=d[0],c[13]=d[1],c[14]=d[2],c[15]=d[3],c[16]=d[4],d)):b.sequence([function(d){return c[17]=b.i64.of_float(Date.now()),c[18]=c[0].get("min_time_to_sync_timestamp_ms"),c[0],c[19]=c[0].get("last_sync_request_timestamp_ms"),c[0],c[20]=c[0].get("can_ignore_timestamp"),c[0],c[20]&&a[1]||b.i64.ge(c[17],c[18])?b.sequence([function(d){return a[1]?b.resolve(c[28]=b.i64.cast([0,0])):b.sequence([function(a){return c[29]=c[0].get("group_id"),c[0],b.db.table(3).fetch([[["",c[29]]]]).next().then(function(a,d){var e=a.done;a=a.value;return e?c[30]=b.i64.cast([0,0]):(d=a.item,c[30]=d.failureCount)})},function(a){return c[32]=b.i64.mul(b.i64.sub(b.i64.lsl_(b.i64.cast([0,1]),b.i64.to_int32(b.i64.lt(b.i64.cast([0,15]),c[30])?b.i64.cast([0,15]):c[30])),b.i64.cast([0,1])),b.i64.cast([0,500])),c[33]=b.i64.sub(b.i64.add(c[19]==null?b.i64.cast([0,0]):c[19],b.i64.lt(c[32],b.i64.cast([0,3e4]))?c[32]:b.i64.cast([0,3e4])),c[17]),c[28]=b.i64.gt(c[33],b.i64.cast([0,0]))?c[33]:b.i64.cast([0,0])}])},function(a){return c[21]=c[28]}]):b.resolve(c[21]=b.i64.sub(c[18],c[17]))},function(a){return c[22]=c[0].get("group_id"),c[0],b.i64.gt(c[21],b.i64.cast([0,0]))?b.sequence([function(a){return c[28]=b.i64.of_float(Date.now()),b.forEach(b.filter(b.db.table(3).fetch(),function(a){return b.i64.eq(a.syncDatabaseId,c[22])}),function(a){var b=a.update;a.item;return b({lastDelayedRequestTimestampMs:c[28]})})},function(a){return a=[c[22],c[21],b.i64.cast([0,3]),void 0,!1],c[23]=a[0],c[24]=a[1],c[25]=a[2],c[26]=a[3],c[27]=a[4],a}]):b.sequence([function(a){return c[28]=b.i64.of_float(Date.now()),b.forEach(b.db.table(1).fetch([[[c[22]]]]),function(a){var b=a.update;a.item;return b({lastSyncRequestTimestampMs:c[28]})})},function(a){return c[29]=b.i64.of_float(Date.now()),b.forEach(b.filter(b.db.table(3).fetch(),function(a){return b.i64.eq(a.syncDatabaseId,c[22])}),function(a){var b=a.update;a.item;return b({lastSyncRequestTimestampMs:c[29]})})},function(a){return c[30]=c[0].get("group_id"),c[0],c[31]=b.i64.of_float(Date.now()),c[32]=b.i64.random(),c[45]=b.i64.and_(b.i64.or_(b.i64.lsl_(c[31],b.i64.to_int32(b.i64.cast([0,22]))),b.i64.and_(c[32],b.i64.cast([0,4194303]))),b.i64.cast([2147483647,4294967295])),b.db.table(3).fetch([[["",c[30]]]]).next().then(function(a,d){d=a.done;a=a.value;return d?b.db.table(3).add({syncDatabaseId:c[30],taskQueueName:"",failureCount:b.i64.cast([0,0]),lastSentTimestampMs:b.i64.cast([0,0]),lastSyncRequestTimestampMs:b.i64.cast([0,0]),epochId:c[45]}):(a.item,b.forEach(b.db.table(3).fetch([[["",c[30]]]]),function(a){var b=a.update;a.item;return b({epochId:c[45]})}))})},function(a){return c[34]=c[0].get("group_id"),c[0],b.db.table(3).fetch([[["",c[34]]]]).next().then(function(a,d){var e=a.done;a=a.value;return e?c[35]=b.i64.cast([0,0]):(d=a.item,c[35]=d.failureCount)})},function(a){return c[37]=c[0].get("send_sync_params"),c[0],c[38]=c[0].get("sync_params"),c[0],c[39]=c[0].get("current_cursor"),c[0],c[40]=new b.Map(),c[40].set("database",c[34]),c[40].set("version",b.i64.cast([-1,4294967295])),c[40].set("epoch_id",c[45]),c[40].set("last_applied_cursor",c[39]),c[40].set("sync_params",c[37]?c[38]:void 0),c[40].set("failure_count",b.i64.gt(c[35],b.i64.cast([0,0]))?c[35]:void 0),c[41]=c[0].get("current_cursor"),c[0],void 0===c[41]?c[42]=b.i64.cast([0,1]):c[42]=b.i64.cast([0,2]),c[43]=new b.Map(),c[43].set("type",c[42]),c[43].set("request_payload",c[40]),c[44]=c[0].get("sync_channel"),c[0],a=[c[30],void 0,b.i64.cast([0,1]),c[43],b.i64.eq(c[44],b.i64.cast([0,2]))],c[23]=a[0],c[24]=a[1],c[25]=a[2],c[26]=a[3],c[27]=a[4],a}])},function(a){return a=[c[23],c[24],c[25],c[26],c[27]],c[12]=a[0],c[13]=a[1],c[14]=a[2],c[15]=a[3],c[16]=a[4],a}])},function(a){return a=[c[12],c[13],c[14],c[15],c[16]],c[3]=a[0],c[4]=a[1],c[5]=a[2],c[6]=a[3],c[7]=a[4],a}])},function(a){return c[8]=new b.Map(),c[8].set("sync_group_id",c[3]),c[8].set("next_sync_ms",c[4]),c[8].set("work_item_type",c[5]),c[8].set("network_payload",c[6]),c[8].set("skip_realtime_gateway",c[7]),d[0]=c[8]}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSBeginHandlingSyncForSyncGroupStoredProcedure",["LSBeginHandlingSyncForSyncGroup","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.syncGroupId;d[1]=b.ignoreSoftDelay;return c("LSBeginHandlingSyncForSyncGroup").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSBeginHandlingSync",["LSBeginHandlingSyncForSyncGroup"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.createArray(),c.forEach(c.db.table(1).fetch(),function(e){var f=e.item;return c.sequence([function(e){return c.storedProcedure(b("LSBeginHandlingSyncForSyncGroup"),f.groupId,a[0]).then(function(a){return a=a,d[1]=a[0],a})},function(a){return d[2]=(d[0].push(d[1]),d[0])}])})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSBeginHandlingSyncStoredProcedure",["LSBeginHandlingSync","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.ignoreSoftDelay;return c("LSBeginHandlingSync").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSHandleTaskSendSuccessForQueue",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(3).fetch([[[a[0],b.i64.cast([-1,4294967295])]]]),function(c){return c.taskQueueName===a[0]&&b.i64.eq(c.syncDatabaseId,b.i64.cast([-1,4294967295]))&&!b.i64.eq(c.epochId,void 0)}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSHandleTaskSendSuccessForQueueStoredProcedure",["LSHandleTaskSendSuccessForQueue","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.queueName;return c("LSHandleTaskSendSuccessForQueue").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSDatascriptJSONEval",["FBLogger","LS","isPromise"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["2"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["0"]);j=function(){return a};return a}function k(a,b,d){if((h||(h=c("isPromise")))(a))return a.then(b,d);try{return b(a)}catch(a){if(d)return d(a);else throw a}}a=function(){function a(a,b,d,e){var f=this;e===void 0&&(e=[]);this.$4={};this.$5=[];this.$6=null;this.$7=function(a){return k(f.$8(a),function(a){return a},function(b){c("FBLogger")("messenger_web_product").catching(b).mustfix("Error evaluating step op: %s",Array.isArray(a)?a[0]:"<primitive value>");throw b})};this.$1=b;this.$2=a;this.$3=d;for(b=0;b<e.length;b++)this.$4[b]=e[b]}var d=a.prototype;d.eval=function(){return this.$2==null?this.$1.resolve([]):this.$1.resolve(this.$7(this.$2.step))};d.$8=function(a){var d=this;if(!Array.isArray(a))return a;var e=a[0];a=a.slice(1);var f=a;switch(e){case 8:return f.map(this.$7);case 2:return this.$4[f[0]];case 3:return k(this.$7(f[1]),function(a){return d.$4[f[0]]=a});case 4:return k(this.$7(f[2]),function(a){var b=f[0],c=f[1];for(var e=0;e<c;e++,b++)d.$4[b]=a[e];return a});case 12:a=f[0];e=f[1];var g=[];for(a=a;a<e;a++)g[a]=this.$4[a];return g;case 1:var h;a=function(a){h=k(h,function(){return d.$7(f[a])})};for(e=0;e<f.length;e++)a(e);return h;case 5:return(g=this.$1).storedProcedure.apply(g,f.map(this.$7));case 6:return(e=this.$1).nativeTypeOperation.apply(e,f.map(this.$7));case 7:return(a=this.$1).nativeOperation.apply(a,f.map(this.$7));case 9:return;case 10:return Infinity;case 11:return NaN;case 13:return this.$7(f[0])?"1":"0";case 14:return this.$1.blobs.to_string(this.$7(f[0]));case 15:return this.$1.blobs.of_string(this.$7(f[0]));case 16:return this.$1.blob(this.$7(f[0]));case 17:return this.$1.i64.of_float(this.$7(f[0]));case 18:g=this.$7(f[0]);return g!=null?this.$1.i64.to_float(g):void 0;case 19:return this.$1.i64.from_string(this.$7(f[0]));case 70:return this.$1.i64.cast(this.$7(f[0]));case 20:return this.$1.i64.to_string(this.$7(f[0]));case 21:return(e=this.$3)==null?void 0:(a=e.gk)==null?void 0:a[f[0]];case 22:var l;g=f[0];e=f[1];a=f[2];var m=f[3];l=(l=this.$3)==null?void 0:(l=l.qe)==null?void 0:(l=l[g])==null?void 0:(g=l[e])==null?void 0:g[a];if(l==null)return l;switch(m){case"BOOL":case"STR":return l;case"I64":if(typeof l!=="object")throw c("FBLogger")("messenger_web_product").mustfixThrow("Cannot convert value to string");return this.$1.i64.from_string(l.toString())}return;case 23:if(this.$7(f[0]))return this.$7(f[1]);else if(f[2]!=null)return this.$7(f[2]);return;case 24:return this.$7(f[0])||this.$7(f[1]);case 25:return this.$7(f[0])&&this.$7(f[1]);case 26:return!this.$7(f[0]);case 27:return this.$7(f[0])==null;case 28:return this.$1.notnull(this.$7(f[0]));case 29:return this.$7(f[0])===this.$7(f[1]);case 30:return this.$1.i64.eq(this.$7(f[0]),this.$7(f[1]));case 31:return this.$1.blobs.eq(this.$7(f[0]),this.$7(f[1]));case 32:return this.$7(f[0])!==this.$7(f[1]);case 33:return this.$1.i64.neq(this.$7(f[0]),this.$7(f[1]));case 34:return this.$1.blobs.neq(this.$7(f[0]),this.$7(f[1]));case 35:return this.$7(f[0])>this.$7(f[1]);case 36:return this.$1.i64.gt(this.$7(f[0]),this.$7(f[1]));case 37:return this.$1.blobs.gt(this.$7(f[0]),this.$7(f[1]));case 38:return this.$7(f[0])>=this.$7(f[1]);case 39:return this.$1.i64.ge(this.$7(f[0]),this.$7(f[1]));case 40:return this.$1.blobs.ge(this.$7(f[0]),this.$7(f[1]));case 41:return this.$7(f[0])<this.$7(f[1]);case 42:return this.$1.i64.lt(this.$7(f[0]),this.$7(f[1]));case 43:return this.$1.blobs.lt(this.$7(f[0]),this.$7(f[1]));case 44:return this.$7(f[0])<=this.$7(f[1]);case 45:return this.$1.i64.le(this.$7(f[0]),this.$7(f[1]));case 46:return this.$1.blobs.le(this.$7(f[0]),this.$7(f[1]));case 47:return this.$1["throw"](f[0]);case 48:return this.$1.print(this.$7(f[0]));case 49:e=this.$7(f[0]);g=f[1];a=this.$1.logger(e);switch(g){case"mustfix":return a.mustfix(e);case"info":return a.info(e);case"warn":return a.warn(e);case"debug":return a.debug(e);default:throw c("FBLogger")("messenger_web_product").mustfixThrow("Invalid logger level %s",g)}case 50:return f.length===0?this.$1.createArray():(m=this.$1).createArrayWithElements.apply(m,this.$7(f[0]));case 51:l=this.$7(f[0]);l.push(this.$7(f[1]));return l;case 52:return this.$1.i64.of_int32(this.$7(f[0]).length);case 53:return new this.$1.Map();case 54:return this.$7(f[0]).get(this.$7(f[1]));case 55:return this.$7(f[0]).set(this.$7(f[1]),this.$7(f[2]));case 56:return this.$7(f[0]).keys();case 57:return this.$7(f[0])["delete"](this.$7(f[1]));case 58:return this.$7(f[0]).has(this.$7(f[1]));case 59:return this.$7(f[0]).join(this.$7(f[1])||"");case 60:return this.$1.i64.of_float(Date.now());case 61:return this.$1.toJSON(this.$7(f[0]));case 62:return this.$1.i64.random();case 63:case 64:return!0;case 65:return this.$1.localizeAsync(this.$7(f[0]),this.$7(f[1]));case 66:return this.$1.localizeV2Async(this.$7(f[0]),this.$7(f[1]));case 68:return this.$7(f[0])+this.$7(f[1]);case 69:return this.$1.i64.add(this.$7(f[0]),this.$7(f[1]));case 71:return(a=this.$3)==null?void 0:(e=a.justknob)==null?void 0:e[f[0]];case 72:return(g=this.$3)==null?void 0:(m=g.iggk)==null?void 0:m[f[0]];case 100:return this.$5[f[0]][f[1]];case 101:if(this.$6==null)throw c("FBLogger")("messenger_web_product").mustfixThrow("Attempting to read column ref when none exist!");return this.$6[f[0]];case 102:return this.$5[this.$7(f[0])].group_count;case 73:return this.$1.rm;case 74:return this.$7(f[0]).trim();case 75:return this.$7(f[0]).split(this.$7(f[1])).join(this.$7(f[2]));case 76:return f.map(this.$7).join("");case 77:return this.$1.like(this.$7(f[0]),this.$7(f[1]));case 78:return[0,this.$7(f[0]).length];case 79:l=f.map(this.$7);a=l[0];e=l.slice(1);return e.includes(a);case 80:return this.$7(f[1]).includes(this.$7(f[0]));case 81:return this.$7(f[0])-this.$7(f[1]);case 82:return this.$7(f[0])*this.$7(f[1]);case 83:return this.$7(f[0])/this.$7(f[1]);case 84:return this.$7(f[0])%this.$7(f[1]);case 91:return this.$1.i64.lsl_(this.$7(f[0]),this.$1.i64.to_int32(this.$7(f[1])));case 92:return this.$1.i64.lsr_(this.$7(f[0]),this.$1.i64.to_int32(this.$7(f[1])));case 93:return this.$1.i64.asr_(this.$7(f[0]),this.$1.i64.to_int32(this.$7(f[1])));case 94:return this.$1.i64.and_(this.$7(f[0]),this.$7(f[1]));case 95:return this.$1.i64.or_(this.$7(f[0]),this.$7(f[1]));case 96:return this.$1.i64.xor(this.$7(f[0]),this.$7(f[1]));case 85:return this.$1.i64.sub(this.$7(f[0]),this.$7(f[1]));case 86:return this.$1.i64.mul(this.$7(f[0]),this.$7(f[1]));case 87:return this.$1.i64.div(this.$7(f[0]),this.$7(f[1]));case 88:return this.$1.i64.mod_(this.$7(f[0]),this.$7(f[1]));case 89:g=f.map(this.$7);var n=g[0];m=g.slice(1);return m.some(function(a){return d.$1.i64.eq(n,a)});case 90:var o=this.$7(f[0]);return this.$7(f[1]).some(function(a){return d.$1.i64.eq(o,a)});case 97:return this.$7(f[0])?this.$7(f[1]):this.$7(f[2]);case 98:l=this.$7(f[0]);e=this.$7(f[1]);return(l||e)&&!(l&&e);case 99:return(a=this.$7(f[0]))!=null?a:this.$7(f[1]);case 103:return;case 104:return b.call(null,f[0]);case 105:g=function(){var b=d.$7(f[0]),e=f[1],g=c("LS").n,a,h=function(b){a=k(a,function(){d.$4[e]=b;return d.$7(f[2])})};for(var l=g(j());d.$1.i64.lt(l,b);l=d.$1.i64.add(l,g(i())))h(l);return{v:a}}();if(typeof g==="object")return g.v;case 106:return this.$7(f[0]);case 107:throw c("FBLogger")("messenger_web_product").mustfixThrow("not equal query comparison operator not supported");case 108:return{gt:this.$7(f[0])};case 109:return{gte:this.$7(f[0])};case 110:return{lt:this.$7(f[0])};case 111:return{lte:this.$7(f[0])};case 112:return f.length===1?this.$7(f[0]):(m=this.$1).merge.apply(m,f.map(this.$7));case 113:l=f[0];e=f[1];a=f.slice(2);g=a.map(this.$7);switch(e){case"ASC":return(m=this.$1.db.table(l)).fetch.apply(m,g);case"DESC":return(a=this.$1.db.table(l)).fetchDesc.apply(a,g)}return;case 114:return this.$1.filter(this.$7(f[0]),function(a){d.$6=a;a=d.$7(f[1]);d.$6=null;return a});case 115:return(e=this.$1).sortBy.apply(e,f.map(this.$7));case 116:return this.$1.forEach(this.$7(f[0]),function(a){return a["delete"]()});case 117:return this.$1.islc(this.$7(f[0]),0,this.$7(f[1]));case 118:return this.$1.count(this.$7(f[0]));case 119:return this.$1.db.table(f[0]).peekNextAutoIncrementId();case 120:return this.$1.forEach(this.$7(f[0]),function(a){var b=a.item;a=a.update;var c={};d.$6=b;for(b=1;b<f.length;b+=2)c[f[b]]=d.$7(f[b+1]);d.$6=null;return a(c)});case 121:m=f[0];l={};for(a=1;a<f.length;a+=2)l[f[a]]=this.$7(f[a+1]);return this.$1.db.table(m).add(l);case 122:g=f[0];e={};for(a=1;a<f.length;a+=2)e[f[a]]=this.$7(f[a+1]);return this.$1.db.table(g).put(e);case 123:return this.$1.forEach(this.$7(f[0]),function(a){a=a.item;d.$5[f[1]]=a;return d.$7(f[2])});case 124:return this.$7(f[0]).next().then(function(a){var b=a.done;a=a.value;if(b)return d.$7(f[3]);else{b=f[1];if(b!=null){d.$5[b]=a.item;return d.$7(f[2])}}return 0});case 125:return this.$7(f[0]).slice(0,this.$7(f[1]));case 126:return this.$1.groupBy(this.$7(f[0]),f[1]).forEach(function(a){d.$5[f[2]]=a;return d.$7(f[3])});case 127:return this.$7(f[0]).substr(this.$1.i64.to_int32(this.$7(f[1])),this.$1.i64.to_int32(this.$7(f[2])))}};return a}();g["default"]=a}),98);
__d("LSDatascriptEvaluator",["FBLogger","LSDatascriptJSONEval","LSFactory","MWPBumpEntityKey","TrustedTypesNoOpPolicy_DO_NOT_USE","TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var e=function(b){return function(c,d){var e;return a==null?void 0:(e=a.qe)==null?void 0:(e=e[c])==null?void 0:(c=e[b])==null?void 0:c[d]}},f=new Proxy({getBool:e("fb"),getNumber:e("fb"),getString:e("fb")},{get:function(a,b){return b in a?a[b]:{getBool:e(b),getNumber:e(b),getString:e(b)}}}),g=function(b){var c;return a==null?void 0:(c=a.gk)==null?void 0:c[b]};g.ig=function(b){var c;return a==null?void 0:(c=a.iggk)==null?void 0:c[b]};var h={getBool:function(b){var c;return a==null?void 0:(c=a.justknob)==null?void 0:c[b]}};return function(a){var e;e=d("TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE").createTrustedFunction((e=c("TrustedTypesNoOpPolicy_DO_NOT_USE")).createScript("gkx"),e.createScript("qex"),e.createScript("justknobx"),e.createScript("return "+b));return e(g,f,h)(c("LSFactory")(a,{dynamic:!0}))}}function i(a,b){var d=JSON.parse(b),e=(b=a)!=null?b:{gk:{},iggk:{},justknob:{},qe:{}};return function(a){return new(c("LSDatascriptJSONEval"))(d,c("LSFactory")(a,{dynamic:!0}),e).eval()}}function j(a,b,d){if(d==null){c("FBLogger")("lightspeed","null_target").mustfix("Received <null> target field for sync script!");return h(a,b)}switch(d){case 3:return i(a,b);case 2:return h(a,b);case 1:throw c("FBLogger")("messenger_web_product","invalid_sync_script_target").mustfixThrow("Received a sync script with LSProgramTarget of DASM, this should never happen!")}}function a(a){return function(b){if(b==null)throw c("FBLogger")("messenger_comet").mustfixThrow("Error creating eval function, db is undefined. This is likely a currying error in the definition for LSDatascriptEvaluator");return function(e){var f=e.experiments,g=e.priority,h=e.syncScript,i=e.target;e=e.taskNames;f=f!=null?JSON.parse(f):null;try{var k=j(f,h,i);return b.runInTransaction(function(b){a&&a();return k(b)},"readwrite",g,{taskNames:e,type:"sync_script"})}catch(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform","eval_datascript_failure");c("FBLogger")("messenger_web_product").catching(a).mustfix("Error executing sync script");throw a}}}}a.__debugModuleName="LSDatascriptEvaluator";g.default=a}),98);
__d("LSDatascriptEvaluatorEager",["LSDatascriptEvaluator","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return(h||(h=b("Promise"))).resolve(c("LSDatascriptEvaluator"))}g["default"]=a}),98);
__d("LSDataTraceFlush",["ArmadilloDataTraceType","I64","LSDataTraceType","LSIntEnum","LsDataTraceFalcoEvent","ODS","Promise","ReQL","asyncToGeneratorRuntime","clearTimeout","gkx","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(i||(i=d("I64"))).of_string("120000"),m=i.of_string("600000"),n=new Set(["encrypted_backups_upload","encrypted_backups_media_backup"]);function o(a,b,c){var e=a.length;if(e===0)return[(i||(i=d("I64"))).neg_one,i.neg_one,void 0,void 0,void 0];e=a.find(function(a){return a.errorMessage!=null});e=e==null?void 0:e.errorMessage;a=a[a.length-1|0];var f=(i||(i=d("I64"))).of_float(Date.now()),g=a.timestampMs,h=i.compare(i.sub(f,c),l)>=0;return!b&&h?[(i||(i=d("I64"))).sub(f,c),a.checkPointId,g,e,"trace expired"]:[i.sub(g,c),a.checkPointId,g,e,e]}function p(a){return a.reduce(function(a,b,c){var e,f=(i||(i=d("I64"))).to_string(b.checkPointId),g=b.timestampMs;e=i.to_string((e=b.syncChannel)!=null?e:(i||(i=d("I64"))).neg_one);b=b.tags;b=b!=null?","+b:"";if(c===0)a.pointsList="".concat("(",f,",",e,b,")");else{c=String((i||(i=d("I64"))).to_int32(i.sub(g,a.lastCheckPointTimestamp)));a.pointsList=a.pointsList.concat("-",c,"-(",f,",",e,b,")")}a.lastCheckPointTimestamp=g;return a},{lastCheckPointTimestamp:(i||(i=d("I64"))).zero,pointsList:""}).pointsList}var q=i.of_string("2");function r(a){var b=a.traceType;b=(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").TASK))?"send":(i||(i=d("I64"))).equal(b,d("ArmadilloDataTraceType").armadilloMessageSend)?"armadillo send":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_INIT))?"encrypted_backups_init":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_ADD_DEVICE))?"encrypted_backups_add_device":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_UPLOAD))?"encrypted_backups_upload":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_RESTORE))?"encrypted_backups_restore":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_MEDIA_BACKUP))?"encrypted_backups_media_backup":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SYNC_EPOCHS))?"encrypted_backups_sync_epochs":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").SAP_VESTA_LOGIN))?"sap_vesta_login":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").SAP_VESTA_REGISTRATION))?"sap_vesta_registration":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_OPT_OUT_OF_BACKUP))?"encrypted_backups_opt_out_of_backup":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_FETCH_BACKUPS_METADATA))?"encrypted_backups_fetch_backups_metadata":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_CREATE_EXTRA_VIRTUAL_DEVICE))?"encrypted_backups_create_extra_virtual_device":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_FETCH_BACKUP_STATUS))?"encrypted_backups_fetch_backup_status":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_THIRD_PARTY_ID_GENERATION))?"encrypted_backups_third_party_id_generation":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_MEDIA_RESTORE))?"encrypted_backups_media_restore":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_DELETE_BACKUP))?"encrypted_backups_delete_backup":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_INIT))?"shadow_encrypted_backups_init":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_ADD_DEVICE))?"shadow_encrypted_backups_add_device":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_UPLOAD))?"shadow_encrypted_backups_upload":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_RESTORE))?"shadow_encrypted_backups_restore":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_DELETE_BACKUP))?"shadow_encrypted_backups_delete_backup":a.contextTwo;return b}function s(a,b){var e=b.traceId,f=b.shouldFlush,g=r(b),h=b.traceType,j=(i||(i=d("I64"))).equal(h,d("ArmadilloDataTraceType").armadilloMessageSend)?"tam_message_send":b.contextOne,k=(i||(i=d("I64"))).equal(b.traceType,q)?void 0:b.predefinedId,l=b.initTimestampMs;return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.data_trace_addon.index("traceIdAddonId")).getKeyRange(e)).then(function(a){var b=o(a,f,l),h=b[0],m=b[1],n=b[3],q=b[4],r=a.length,s=p(a);c("LsDataTraceFalcoEvent").log(function(){var a;return{check_point_count:(i||(i=d("I64"))).to_string(i.of_int32(r)),check_point_list:s,client_event_ts:i.to_string(i.of_float(Date.now())),cold_start_time:void 0,data_trace_id:e,database_id:j,delivered_messages:void 0,error_message:q,first_error_message:n,has_backgrounded:!1,last_check_point:i.to_string(m),latency:i.to_string(h),media_type:void 0,num_of_attachments:void 0,persisted_metadata:void 0,predefined_id:k,sent_rich_media_messages:void 0,sent_text_messages:void 0,start_time:i.to_string(l),trace_flow:(a=g)!=null?a:""}})}).then(function(){return a.data_trace_meta["delete"](e)})}function a(a,c){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.data_trace_meta).getKeyRange(c)).then(function(c){if(c!=null)return s(a,c);else return(h||(h=b("Promise"))).resolve()})}var t={contents:void 0};function u(a){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.data_trace_meta.index("shouldFlushInitTimestampMsTraceId")).getKeyRange(!1).bounds({lt:d("ReQL").key((i||(i=d("I64"))).sub(i.of_float(Date.now()),l))})).then(function(a){if(c("gkx")("23914")){var b=(i||(i=d("I64"))).of_float(Date.now());return a.filter(function(a){var c=r(a);if(c!=null&&n.has(c)){c=(i||(i=d("I64"))).compare(i.sub(b,a.initTimestampMs),m)>=0;return c}return!0})}return a})}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield u(a.tables));if(c.length===0)return;return a.runInTransaction(function(a){return u(a).then(function(c){return(h||(h=b("Promise"))).all(c.map(function(b){return s(a,b)}))})},"readwrite")});return w.apply(this,arguments)}function x(){var a=t.contents;if(a!=null){c("clearTimeout")(a);return}}function y(a){c("promiseDone")(v(a),function(){x();var b=c("setTimeout")(function(){y(a)},6e4);t.contents=b},function(){x(),(j||(j=d("ODS"))).bumpEntityKey(3185,"mw_trace","error")});return x}e=a;f=y;a={flush:e,flushExpiredDataTraces:f};g["default"]=a}),98);
__d("LSPlatformSyncSystem",["FBLogger","I64","LSBeginHandlingSyncForSyncGroupStoredProcedure","LSBeginHandlingSyncStoredProcedure","LSDatabaseProviderType","LSFactory","LSIntEnum","LSJson","LSPlatformGraphQLTransport","LSPlatformRealtimeTransport","LSPlatformRequestId","LSPlatformRequestScheduler","LSPlatformServerResponseHandler","LSShape","LSVec","MWPBumpEntityKey","MessengerLogHistory","Promise","ReQL","asyncToGeneratorRuntime","gkx","promiseDone","recoverableViolation","throttle"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,e,f,g,k,l){var m=d("MessengerLogHistory").getInstance("client_sync"),n=new(c("LSPlatformServerResponseHandler"))(f),o=d("LSDatabaseProviderType").isProviderPersisted(a),p=function(c){return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.network_requests).getKeyRange("",c)));b!=null&&(yield a.network_requests.put({epochId:void 0,failureCount:(i||(i=d("I64"))).add(b.failureCount,i.one),lastDelayedRequestTimestampMs:b.lastDelayedRequestTimestampMs,lastSentTimestampMs:b.lastSentTimestampMs,lastSyncRequestTimestampMs:b.lastSyncRequestTimestampMs,networkTaskIdentifier:b.networkTaskIdentifier,syncDatabaseId:b.syncDatabaseId,taskQueueName:b.taskQueueName}))});return function(b){return a.apply(this,arguments)}}(),"readwrite")},q=new(c("LSPlatformRequestScheduler"))(),r=function(){var m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(m,p){p=d("LSShape").toRecord(p);var q=d("LSShape").toRecord(p.request_payload);p=p.type;var r=c("LSPlatformRequestId").generate();q=d("LSJson").stringify(d("LSShape").ofRecord({database:q.database,epoch_id:q.epoch_id,failure_count:q.failure_count,last_applied_cursor:q.last_applied_cursor,sync_params:q.sync_params,version:(i||(i=d("I64"))).of_string(g)}));var s=(i||(i=d("I64"))).equal(m.sync_group_id,(j||(j=d("LSIntEnum"))).ofNumber(1))&&c("gkx")("26386")===!0;if(!s&&m.skip_realtime_gateway){s=(yield d("LSPlatformGraphQLTransport").publish(k,r,p,q,l));var t=s[0],u=s[1],v=s[2];s=s[3];v={experiments:v,syncScript:u,target:s};return o?n.evalInOrderReceived(t,v):f(v)}else{u=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("sync_groups")).getKeyRange(m.sync_group_id)));s=u!=null?u.syncChannel:(j||(j=d("LSIntEnum"))).ofNumber(1);return e.publish({payload:q,queueName:void 0,requestId:r,syncChannel:s,type_:p}).then(function(){return(h||(h=b("Promise"))).resolve()})}});return function(a,b){return m.apply(this,arguments)}}(),s=function e(f){var g=function(b){return a.runInTransaction(function(a){return c("LSBeginHandlingSyncForSyncGroupStoredProcedure")(c("LSFactory")(a),{ignoreSoftDelay:!1,syncGroupId:b})},"readwrite").then(function(a){return e(a[0])})},k=function(a,b){q.schedule(function(){c("promiseDone")(g(a))},(i||(i=d("I64"))).to_string(a),i.to_float(b))},l=d("LSShape").toRecord(f);f=l.work_item_type;if((i||(i=d("I64"))).equal(f,(j||(j=d("LSIntEnum"))).ofNumber(1))||(i||(i=d("I64"))).equal(f,(j||(j=d("LSIntEnum"))).ofNumber(5))){var n=l.network_payload;if(n!=null)return r(l,n)["catch"](function(a){if(a.message===d("LSPlatformGraphQLTransport").ServerError)d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","send_sync_request_graphql_error");else if(a.RE_EXN_ID===d("LSPlatformRealtimeTransport").Timeout||a.RE_EXN_ID===d("LSPlatformRealtimeTransport").NotConnected)d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","send_sync_request_timeout_or_disc"),m.debug("Publish timed out");else{d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","send_sync_request_other_error");if(a instanceof Error)c("FBLogger")("messenger_web_product").catching(a).mustfix("Encountered an JS error while publishing a LS sync request");else{var b="";try{b=JSON.stringify(a)}catch(a){}c("FBLogger")("messenger_web_product").mustfix("Encountered an JS error while publishing a LS sync request %s",b)}}return p(l.sync_group_id).then(function(){return g(l.sync_group_id)})});else{c("recoverableViolation")("Expected networkpayload for sync request but didn't get any","messenger_web_product");return(h||(h=b("Promise"))).resolve()}}if(!(i||(i=d("I64"))).equal(f,(j||(j=d("LSIntEnum"))).ofNumber(3)))if((i||(i=d("I64"))).equal(f,(j||(j=d("LSIntEnum"))).ofNumber(4))||!(i||(i=d("I64"))).equal(f,(j||(j=d("LSIntEnum"))).ofNumber(2)))return(h||(h=b("Promise"))).resolve();else{c("recoverableViolation")("Native handling for sync group not implemented yet","messenger_web_product");return(h||(h=b("Promise"))).resolve()}n=l.next_sync_ms;if(n!=null){k(l.sync_group_id,n);return(h||(h=b("Promise"))).resolve()}else{c("recoverableViolation")("Expected delay for delayed sync request but didn't get any","messenger_web_product");return(h||(h=b("Promise"))).resolve()}},t=function(a){return(h||(h=b("Promise"))).all(c("LSVec").toArray(a[0]).map(function(a){return s(a)}))},u=function(){c("promiseDone")(a.runInTransaction(function(a){return c("LSBeginHandlingSyncStoredProcedure")(c("LSFactory")(a),{ignoreSoftDelay:!1})},"readwrite").then(t))},v=c("throttle")(u,500);u=function(){return d("ReQL").fromTableAscending(a.table("sync_groups")).subscribe(function(){return v()})};var w=function(){return e.subscribeToNonTaskResponses(function(a,b){var e=b.ex,g=b.payload;e={experiments:e,sp:b.sp,syncScript:g,target:b.target};c("promiseDone")(o?n.evalInOrderReceived(a,e):f(e),function(){return v()},function(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","handle_sync_response_failure");if(a instanceof Error)c("FBLogger")("messenger_web_product").catching(a).mustfix("JS error encountered handling response from MQTT (pdb=%s): %s",o,a.message);else{var b="";try{b=JSON.stringify(a)}catch(a){}c("FBLogger")("messenger_web_product").mustfix("JS error encountered handling response from MQTT (pdb=%s): %s",o,b)}})})},x=function(){return e.onReconnect(function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","resume_sync_reconnect"),m.debug("Sync System reconnecting"),c("promiseDone")(a.runInTransaction(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var f;f=(yield (f=d("ReQL")).toArrayAsync(f.mergeJoin(f.fromTableAscending(a.table("sync_groups")),f.fromTableAscending(a.table("network_requests")).getKeyRange(""))));yield (h||(h=b("Promise"))).all(f.map(function(a){a=a[1];return e.network_requests.put({epochId:void 0,failureCount:a.failureCount,lastDelayedRequestTimestampMs:a.lastDelayedRequestTimestampMs,lastSentTimestampMs:a.lastSentTimestampMs,lastSyncRequestTimestampMs:a.lastSyncRequestTimestampMs,networkTaskIdentifier:a.networkTaskIdentifier,syncDatabaseId:a.syncDatabaseId,taskQueueName:a.taskQueueName})}));return c("LSBeginHandlingSyncStoredProcedure")(c("LSFactory")(e),{ignoreSoftDelay:!1})});return function(a){return e.apply(this,arguments)}}(),"readwrite").then(t))})},y=u(),z=w(),A=x();v();return{cleanup:function(){y(),A(),z()}}}g["default"]=a}),98);
__d("LSPlatformSyncSystemEager",["LSPlatformSyncSystem","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return(h||(h=b("Promise"))).resolve(c("LSPlatformSyncSystem"))}g["default"]=a}),98);
__d("MWPHandleNativeTask",["FBLogger","I64","LSFactory","LSHandleTaskSendFailureForQueue2","LSHandleTaskSendSuccessForQueueStoredProcedure","LSJson","QuickPerformanceLogger","ReQL","asyncToGeneratorRuntime","executeTask.xplat","qpl","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=e.queue_name,h=(yield a.runInTransaction(function(a){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.pending_tasks.index("queueNameTaskId")).bounds({gte:d("ReQL").key(g)}))},"readonly"));if(h==null){c("FBLogger")("mpf_web_foundations").mustfix("Error cannot find a pending task for queue: %s",g);throw c("unrecoverableViolation")("Error cannot find a pending task for queue","mpf_web_foundations")}e=k(h,f);if(e===null)throw c("unrecoverableViolation")("Error parsing native task payload for queue: "+g,"mpf_web_foundations");f=e.context;var j=e.name;e=e.payload;var l=c("qpl")._(164763515,"1216");try{(i||(i=c("QuickPerformanceLogger"))).markerStart(l),i.markerAnnotate(l,{string:{type:j}}),yield c("executeTask.xplat")(e,babelHelpers["extends"]({},f,{event:l}),j),yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield c("LSHandleTaskSendSuccessForQueueStoredProcedure")(c("LSFactory")(a),{queueName:g});return a.pending_tasks["delete"](h.taskId)});return function(b){return a.apply(this,arguments)}}(),"readwrite","background"),i.markerEnd(l,2)}catch(b){(i||(i=c("QuickPerformanceLogger"))).markerEnd(l,3);c("FBLogger")("mpf_web_foundations").blameToPreviousFrame().catching(b).mustfix("Error handling native task for context %s.",h==null?void 0:h.context);try{yield a.runInTransaction(function(a){return c("LSHandleTaskSendFailureForQueue2")(a,g)},"readwrite")}catch(a){c("FBLogger")("mpf_web_foundations").catching(a).mustfix("Error bumping failure cound for task")}}});return j.apply(this,arguments)}function k(a,b){if((a==null?void 0:a.context)==null)return null;var e=a.context,f;if(a.taskValue===""||a.taskValue==null)f=null;else try{f=d("LSJson").parse(a.taskValue)}catch(b){c("FBLogger")("mpf_web_foundations").catching(b).mustfix(" Error parsing native task payload for queue: %s, falling back to null payload",a.queueName),f=null}b={actorID:b,taskID:(h||(h=d("I64"))).to_float(a.taskId)};return{context:b,name:e,payload:f}}e={handleTask:a};g["default"]=e}),98);/*FB_PKG_DELIM*/
__d("oz-player/shims/ozReportUnexpectedError",["oz-player/shims/www/ozReportUnexpectedErrorWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/ozReportUnexpectedErrorWWW")}),98);
__d("oz-player/loggings/OzLoggingUtils",["oz-player/shims/ozReportUnexpectedError"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){a=a.getOperationLogger(b).start();try{return c(a)}catch(b){a.setError(b);throw b}finally{a.log()}}function b(a,b,d,e,f){e===void 0&&(e=function(){});f===void 0&&(f=function(){});var g=b.getOperationLogger(d).start();e(g);a.then(function(a){f(g),g.log()},function(a){f(g),g.setError(a),g.log()})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,d+" logger")})}g.executeOperationAndLog=a;g.monitorPromiseAndLogOperation=b}),98);
__d("oz-player/loggings/OzOperationLoggerBase",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$52=new Map(),this.$1=a}var b=a.prototype;b.start=function(){var a=Date.now();this.setClientTimeBegin(a);this.setClientTimeEnd(null);this.setClientTimeDuration(null);return this};b.log=function(){var a=Date.now(),b=this.getClientTimeBegin(),c=this.getClientTimeEnd();(b==null||b===0)&&(b=a,this.setClientTimeBegin(b));(c==null||c===0)&&(c=a,this.setClientTimeEnd(c));this.setClientTimeDuration(c-b)};b.setError=function(a){this.$2=a;return this};b.setPerSessionSampleRate=function(a){this.$3=a;return this};b.setAppendTarget=function(a){this.$47=a;return this};b.setOneObserved=function(a){this.$44=a;return this};b.setOneReqWave=function(a){this.$45=a;return this};b.setOneResWave=function(a){this.$46=a;return this};b.setIsP2pPlayback=function(a){this.$43=a;return this};b.setResult=function(a){this.$4=a;return this};b.setType=function(a){this.$5=a;return this};b.setClientTimeBegin=function(a){this.$6=a;return this};b.setClientTimeDuration=function(a){this.$7=a;return this};b.setClientTimeEnd=function(a){this.$8=a;return this};b.setSegmentCount=function(a){this.$15=a;return this};b.setTimeToFirstByte=function(a){this.$9=a;return this};b.setTimeToLastByte=function(a){this.$10=a;return this};b.setTimeToRequestStart=function(a){this.$11=a;return this};b.setTimeToRequestSent=function(a){this.$12=a;return this};b.setReason=function(a){this.$13=a;return this};b.setResource=function(a){this.$14=a;return this};b.setSegmentStartTime=function(a){this.$16=a;return this};b.setSegmentEndTime=function(a){this.$17=a;return this};b.setLength=function(a){this.$18=a;return this};b.setLiveheadPosition=function(a){this.$19=a;return this};b.setLiveheadSeqNumHeader=function(a){this.$20=a;return this};b.setLiveheadSeqNumMpd=function(a){this.$21=a;return this};b.setManifestType=function(a){this.$22=a;return this};b.setMediaSourceNewDuration=function(a){this.$23=a;return this};b.setMediaSourcePreviousDuration=function(a){this.$24=a;return this};b.setPriorityFloat=function(a){this.$25=a;return this};b.setAppendedBufferMs=function(a){this.$26=a;return this};b.setInitiator=function(a){this.$27=a;return this};b.setPreloadTime=function(a){this.$28=a;return this};b.setConcluder=function(a){this.$29=a;return this};b.setPreviousRepresentationID=function(a){this.$30=a;return this};b.setRepresentationID=function(a){this.$31=a;return this};b.setStreamSwitchReason=function(a){this.$32=a;return this};b.setState=function(a){this.$33=a;return this};b.setContentLengthHeader=function(a){this.$34=a;return this};b.setOriginHitHeader=function(a){this.$36=a;return this};b.setEdgeHitHeader=function(a){this.$37=a;return this};b.setFNAHitHeader=function(a){this.$38=a;return this};b.setCode=function(a){this.$35=a;return this};b.setResponseTimeMsHeader=function(a){this.$39=a;return this};b.setIsTemplatedManifest=function(a){this.$40=a;return this};b.setIsLatencyCachupEnabled=function(a){this.$41=a;return this};b.setPlayerFormat=function(a){this.$42=a;return this};b.setIsRingBufferSample=function(a){this.$48=a;return this};b.setIsOnline=function(a){this.$49=a;return this};b.setProxyStatusHeader=function(a){this.$50=a;return this};b.setPlaybackFbmsParam=function(a){return this};b.setPreferredEdgeLatency=function(a){this.$51=a;return this};b.setUserInfo=function(a){return this};b.setDynamicStatusHeader=function(a){return this};b.getPerSessionSampleRate=function(){return this.$3};b.setMediaSourceSourceBuffer=function(a,b){this.$52.set(a,b);return this};b.unsetMediaSourceSourceBuffers=function(){this.$52.clear();return this};b.getError=function(){return this.$2};b.getResult=function(){return this.$4};b.getType=function(){return this.$5};b.getClientTimeBegin=function(){return this.$6};b.getClientTimeEnd=function(){return this.$7!=null?this.$6!=null?this.$6+this.$7:null:this.$8};b.getTimeToRequestStart=function(){return this.$11};b.getTimeToRequestSent=function(){return this.$12};b.getReason=function(){return this.$13};b.getResource=function(){return this.$14};b.getOperationName=function(){return this.$1};b.getSegmentStartTime=function(){return this.$16};b.getSegmentEndTime=function(){return this.$17};b.getLength=function(){return this.$18};b.getLiveheadPosition=function(){return this.$19};b.getManifestType=function(){return this.$22};b.getPriorityFloat=function(){return this.$25};b.getAppendedBufferMs=function(){return this.$26};b.getInitiator=function(){return this.$27};b.getPreloadTime=function(){return this.$28};b.getConcluder=function(){return this.$29};b.getContentLengthHeader=function(){return this.$34};b.getOriginHitHeader=function(){return this.$36};b.getEdgeHitHeader=function(){return this.$37};b.getFNAHitHeader=function(){return this.$38};b.getCode=function(){return this.$35};b.getResponseTimeMsHeader=function(){return this.$39};b.getIsTemplatedManifest=function(){return this.$40};b.getOneObserved=function(){return this.$44};b.getOneReqWave=function(){return this.$45};b.getOneResWave=function(){return this.$46};b.getAppendTarget=function(){return this.$47};b.getIsRingBufferSample=function(){return this.$48};b.getIsOnline=function(){return this.$49};b.getProxyStatusHeader=function(){return this.$50};b.getMediaSourceSourceBuffers=function(){return this.$52};return a}();f["default"]=a}),66);
__d("oz-player/shims/www/OzMaybeNativePromiseWWW",["cr:3014"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:3014")}),98);
__d("oz-player/shims/OzMaybeNativePromise",["oz-player/shims/www/OzMaybeNativePromiseWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzMaybeNativePromiseWWW")}),98);
__d("oz-player/utils/OzErrorEmitter",["oz-player/shims/OzEventEmitter","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;b===void 0&&(b=!1);d=a.call(this)||this;d.$OzErrorEmitter$p_1=!1;d.$OzErrorEmitter$p_2=!1;d.$OzErrorEmitter$p_3=[];d.emitError=function(a){!d.$OzErrorEmitter$p_1?d.$OzErrorEmitter$p_2?d.$OzErrorEmitter$p_3.push(a):d.$OzErrorEmitter$p_1||c("oz-player/shims/ozvariant")(0,14038):d.emit("error",a)};d.$OzErrorEmitter$p_2=b;return d}var d=b.prototype;d.onError=function(a){this.$OzErrorEmitter$p_1=!0;a=this.addListener("error",a);this.$OzErrorEmitter$p_2&&this.$OzErrorEmitter$p_3.length>0&&this.$OzErrorEmitter$p_3.forEach(this.emitError);return a};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/drm/OzDrmManager",["oz-player/drm/OzDrmUtils","oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzOperationLoggerBase","oz-player/shims/OzDOMEventListener","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e){var f=this;e===void 0&&(e=null);this.$1=null;this.$2=new Map();this.$4=!1;this.$6=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$7=new(c("oz-player/utils/OzErrorEmitter"))();this.$8=!1;this.$9=null;this.$10=0;this.$11=[];this.$12=[];this.$22=function(a,b){a instanceof c("oz-player/loggings/OzOperationLoggerBase")&&a.getError()&&a.setResult("failed"),b!=null&&a.setReason(b)};this.$19=function(a){if(f.$4)return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"OzDrmManager destroyed before call to mediaKeySystemAccess.createMediaKeys()."}));var b=f.$5.mediaKeys!=null?c("oz-player/shims/OzMaybeNativePromise").resolve(f.$5.mediaKeys):a.createMediaKeys();b=b.then(function(b){return{mediaKeySystemAccess:a,mediaKeys:b}});d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,f.$3,"drm_create_media_keys",function(){},f.$22);return b};this.$20=function(a){if(f.$4)return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"OzDrmManager destroyed before call to setMediaKeys()"}));var b=a.mediaKeySystemAccess,e=a.mediaKeys;if(!e)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"No mediaKeys for mediaKeySystemAccess"});a=f.$5.setMediaKeys(e).then(function(){if(f.$4)return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"OzDrmManager destroyed after setMediaKeys() called."}));var a=Array.from(f.$2.values()).find(function(a){return a.getKeySystem()===b.keySystem});if(!a)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"Can't find OzDrmProvider for keySystem "+b.keySystem});var g=a.getServerCertificate();return g?e.setServerCertificate(g).then(function(){return{mediaKeys:e,provider:a}}):{mediaKeys:e,provider:a}});d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,f.$3,"drm_set_media_keys",function(){},f.$22);return a};this.$21=function(a){var b=a.mediaKeys,e=a.provider;a=e.getInitDatas();if(a.length===0){f.$6.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(f.$5,"encrypted",function(a){f.$23(b,e,a)["catch"](function(a){f.$14(d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{type:"OZ_DRM_MANAGER",description:"DRM encrypted rejection"}))})}));return c("oz-player/shims/OzMaybeNativePromise").resolve([])}a=a.map(function(a){return f.$23(b,e,{initData:a.data,initDataType:a.type})});a=c("oz-player/shims/OzMaybeNativePromise").all(a);d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,f.$3,"drm_request_license",function(){},f.$22);return a};this.$5=b;this.$1=e;this.$3=a.cloneContext().setType("drm_manager")}var b=a.prototype;b.hasContentProtections=function(){return this.$9};b.onError=function(a){return this.$7.onError(a)};b.$13=function(a){this.$7.emitError(a)};b.$14=function(a){var b;b=(b=(b=this.$1)==null?void 0:b.maxStartEMEAttempts)!=null?b:-1;this.$10<b?this.$15():this.$13(a)};b.addProvider=function(a){this.$2.set(a.getSchemeId(),a)};b.getProviderForSchemeId=function(a){return this.$2.get(a)};b.$16=function(a){if(!a)return null;var b=[];for(var c=0;c<a.length;c++){var e=a[c],f=e.$.schemeIdUri;f=this.getProviderForSchemeId(f);if(f){var g=f.getInitDatas();if(g.length==0&&e["cenc:pssh"]&&e["cenc:pssh"].length===1){e=(e=e["cenc:pssh"][0]._)!=null?e:"";e=d("oz-player/drm/OzDrmUtils").base64ToUint8Array(e.replace(/-/g,"+").replace(/_/g,"/"));g=[{data:e,type:"cenc"}];f.setInitDatas(g)}b.push({provider:f,initDatas:g})}}return b};b.$15=function(){try{this.$8=!1,this.startEME(this.$11,this.$12)}catch(b){var a=b;this.$13(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"Restart EME failed with: "+String(a),extra:{}}))}};b.startEME=function(a,b){var c=this;if(this.$8)return;this.$8=!0;this.$10+=1;this.$11=a;this.$12=b;var e=new Map();this.$17(b,e,"audio");this.$17(a,e,"video");var f;e.forEach(function(a,b){!f?f=c.$18(b,a):f=f["catch"](function(){return c.$18(b,a)})});if(!f){this.$9=!1;return}this.$9=!0;var g=this.$3.getOperationLogger("drm_setup").start();f.then(this.$19).then(this.$20).then(this.$21).then(function(){return g.log()},function(a){a=d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{type:"OZ_DRM_MANAGER",description:"DRM keyPromiseChain rejection"});c.$13(a);g.setResult("failed").setError(a).log()})};b.$17=function(a,b,c){var d=this;a.forEach(function(a){var e=d.$16(a.getContentProtectionXml()),f=a.getMimeCodecs();e!=null&&e.forEach(function(a){a=a.provider;var d=a.getKeySystem(),e=b.get(d);e||(e={audioCapabilities:new Map(),videoCapabilities:new Map(),distinctiveIdentifier:a.getRequireDistinctiveIdentifier(),persistentState:a.getRequirePersistentState(),sessionTypes:a.getDrmSessionTypes(),initDataTypes:a.getInitDataTypes()},b.set(d,e));c==="audio"&&!e.audioCapabilities.has(f)&&e.audioCapabilities.set(f,{contentType:f,robustness:a.getAudioRobustness()});c==="video"&&!e.videoCapabilities.has(f)&&e.videoCapabilities.set(f,{contentType:f,robustness:a.getVideoRobustness()})})})};b.destroy=function(){this.$6.release(),this.$4=!0};b.$18=function(a,b){var e=this,f={audioCapabilities:Array.from(b.audioCapabilities.values()),videoCapabilities:Array.from(b.videoCapabilities.values()),distinctiveIdentifier:b.distinctiveIdentifier,persistentState:b.persistentState,sessionTypes:b.sessionTypes,initDataTypes:b.initDataTypes};b=window.navigator.requestMediaKeySystemAccess(a,[f]);d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,this.$3,"drm_request_media_key_system_access",function(){},function(b){var d=null;b instanceof c("oz-player/loggings/OzOperationLoggerBase")&&b.getError()&&(d="keySystem: "+a+";domConfig: "+JSON.stringify(f));return e.$22(b,d)});return b};b.$23=function(a,b,e){var f=this,g=a.createSession();this.$6.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g,"message",function(a){f.$24(g,b,a)["catch"](function(a){f.$14(d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{type:"OZ_DRM_MANAGER",description:"DRM message rejection"}))})}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(g,"keystatuseschange",function(a){f.$25(g)["catch"](function(a){f.$14(d("oz-player/utils/OzErrorUtils").convertPromiseRejectionReasonToOzError(a,{type:"OZ_DRM_MANAGER",description:"DRM keystatuseschange rejection"}))})}));return g.generateRequest(e.initDataType,e.initData)};b.$24=function(a,b,c){var e=this;c=b.getLicenseRequestInfo(c.message.slice(0));var f=this.$3.getOperationLogger("drm_fetch_license").setResource(c.url).start();return window.fetch(c.url,c).then(function(c){c.ok?f.setResult("success").setCode(c.status).log():f.setResult("failed").setCode(c.status).setError(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"DRM license fetch HTTP status not OK ("+c.status+")",extra:{code:c.status.toString()}})).log();return c.arrayBuffer().then(function(f){var g=new Uint8Array(f);g=b.parseLicenseResponse(g);if(g==null||g.byteLength===0){var h=g==null?"License is null or undefined.":"License is 0 bytes.";!c.ok?h+=" HTTP status not OK ("+c.status+")":f.byteLength===0&&(h+=" HTTP status OK ("+c.status+"), but response body is 0 bytes");f=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DRM_MANAGER",description:"No license for "+b.getKeySystem()+" - "+h,extra:{code:c.status.toString(),headers:c.headers,url:c.url}});h=(h=(h=e.$1)==null?void 0:h.throwNoLicenseError)!=null?h:!1;if(h)throw f;else e.$13(f)}else a.update(g)})})};b.$25=function(a){return a.expiration<Date.now()?a.close():c("oz-player/shims/OzMaybeNativePromise").resolve()};return a}();g.OzDrmManager=a}),98);
__d("oz-player/loggings/OzPerfLoggerProviderBase",["oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.cloneContext=function(){var a=this.createLoggerProvider();this.$11(a);return a};b.setType=function(a){this.$1=a;return this};b.setInitiator=function(a){this.$2=a;return this};b.setResource=function(a){this.$4=a;return this};b.setRepresentationID=function(a){this.$3=a;return this};b.setSegmentStartTime=function(a){this.$5=a;return this};b.setSegmentEndTime=function(a){this.$6=a;return this};b.setStreamSwitchReason=function(a){this.$7=a;return this};b.setIsP2pPlayback=function(a){this.$8=a;return this};b.setIsRingBufferSample=function(a){this.$9=a;return this};b.setPerSessionSampleRate=function(a){this.$10=a;return this};b.getType=function(){return this.$1};b.getInitiator=function(){return this.$2};b.getRepresentationID=function(){return this.$3};b.getStreamSwitchReason=function(){return this.$7};b.getResource=function(){return this.$4};b.getSegmentStartTime=function(){return this.$5};b.getSegmentEndTime=function(){return this.$6};b.getIsP2pPlayback=function(){return this.$8};b.getIsRingBufferSample=function(){return this.$9};b.getOperationLogger=function(a){a=this.createOperationLogger(a);return this.setOperationContext(a)};b.setOperationContext=function(a){this.$11(a);return a};b.createOperationLogger=function(a){throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NOT_IMPLEMENTED_ERROR",description:"Not implemented: createOperationLogger"})};b.createLoggerProvider=function(){throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NOT_IMPLEMENTED_ERROR",description:"Not implemented: createLoggerProvider"})};b.$11=function(a){this.getType()&&a.setType(this.getType()),this.getInitiator()&&a.setInitiator(this.getInitiator()),this.getResource()&&a.setResource(this.getResource()),this.getRepresentationID()&&a.setRepresentationID(this.getRepresentationID()),this.getStreamSwitchReason()&&a.setStreamSwitchReason(this.getStreamSwitchReason()),typeof this.getSegmentStartTime()==="number"&&a.setSegmentStartTime(this.getSegmentStartTime()),typeof this.getSegmentEndTime()==="number"&&a.setSegmentEndTime(this.getSegmentEndTime()),typeof this.getIsP2pPlayback()==="boolean"&&a.setIsP2pPlayback(this.getIsP2pPlayback()),typeof this.getIsRingBufferSample()==="boolean"&&a.setIsRingBufferSample(this.getIsRingBufferSample())};return a}();g["default"]=a}),98);
__d("oz-player/loggings/OzDevConsolePerfLogger",["oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a;for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];(a=console).debug.apply(a,["[oz]"].concat(c))}function i(){var a;for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];(a=console).error.apply(a,["[oz]"].concat(c))}function j(a,b){return Math.floor(a).toString().padStart(b,"0")}function k(a,b){b===void 0&&(b=null);var c=function(a){return j(a.getHours(),2)+":"+j(a.getMinutes(),2)+":"+j(a.getSeconds(),2)+" "+j(a.getMilliseconds(),3)},d=b?b-a:0;return"["+c(a)+(b?" - "+c(b):"")+" ("+d+" ms)]"}function l(a){return a==="failed"?i:h}function m(a){return a==null||a===0?null:a.toFixed(2)}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.createOperationLogger=function(a){return new n(a)};c.createLoggerProvider=function(){return new b()};return b}(c("oz-player/loggings/OzPerfLoggerProviderBase"));var n=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.log=function(){b.prototype.log.call(this);var a=this.getClientTimeBegin()||0,c=this.getClientTimeEnd();c=c!=null&&c!==0?new Date(c):null;var d=this.getResult()||"success",e=this.getType(),f=this.getInitiator(),g=this.getResource(),h=m(this.getSegmentStartTime()),i=m(this.getSegmentEndTime());l(d)("["+d+"]",this.getOperationName()+": "+k(new Date(a),c),e!=null&&e!==""?"["+e+"]":"",h!=null&&h!==""&&i!=null&&i!==""?"[segment time range: "+h+" - "+i+"]":"",f||"",g||"")};return a}(c("oz-player/loggings/OzOperationLoggerBase"));g.OzDevConsolePerfLoggerProvider=a;g.OzDevConsoleOperationLogger=n}),98);
__d("oz-player/loggings/OzMultiDestinationPerfLogger",["oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$OzMultiDestinationPerfLoggerProvider$p_1=b;return c}var c=b.prototype;c.createOperationLogger=function(a){return new h(a,this.$OzMultiDestinationPerfLoggerProvider$p_1.map(function(b){return b.getOperationLogger(a)}))};c.createLoggerProvider=function(){return new b(this.$OzMultiDestinationPerfLoggerProvider$p_1)};return b}(c("oz-player/loggings/OzPerfLoggerProviderBase"));var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.$OzMultiDestinationOperationLogger$p_1=c;return a}var c=a.prototype;c.start=function(){b.prototype.start.call(this);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.start()});return this};c.setPerSessionSampleRate=function(a){b.prototype.setPerSessionSampleRate.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPerSessionSampleRate(a)});return this};c.setResult=function(a){b.prototype.setResult.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setResult(a)});return this};c.setError=function(a){b.prototype.setError.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setError(a)});return this};c.setType=function(a){b.prototype.setType.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setType(a)});return this};c.setMediaSourcePreviousDuration=function(a){b.prototype.setMediaSourcePreviousDuration.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setMediaSourcePreviousDuration(a)});return this};c.setMediaSourceNewDuration=function(a){b.prototype.setMediaSourceNewDuration.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setMediaSourceNewDuration(a)});return this};c.setClientTimeBegin=function(a){b.prototype.setClientTimeBegin.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setClientTimeBegin(a)});return this};c.setClientTimeDuration=function(a){b.prototype.setClientTimeDuration.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setClientTimeDuration(a)});return this};c.setClientTimeEnd=function(a){b.prototype.setClientTimeEnd.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setClientTimeEnd(a)});return this};c.setSegmentCount=function(a){b.prototype.setSegmentCount.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setSegmentCount(a)});return this};c.setTimeToFirstByte=function(a){b.prototype.setTimeToFirstByte.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setTimeToFirstByte(a)});return this};c.setTimeToLastByte=function(a){b.prototype.setTimeToLastByte.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setTimeToLastByte(a)});return this};c.setTimeToRequestStart=function(a){b.prototype.setTimeToRequestStart.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setTimeToRequestStart(a)});return this};c.setTimeToRequestSent=function(a){b.prototype.setTimeToRequestSent.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setTimeToRequestSent(a)});return this};c.setReason=function(a){b.prototype.setReason.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setReason(a)});return this};c.setResource=function(a){b.prototype.setResource.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setResource(a)});return this};c.setSegmentStartTime=function(a){b.prototype.setSegmentStartTime.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setSegmentStartTime(a)});return this};c.setSegmentEndTime=function(a){b.prototype.setSegmentEndTime.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setSegmentEndTime(a)});return this};c.setAppendedBufferMs=function(a){b.prototype.setAppendedBufferMs.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setAppendedBufferMs(a)});return this};c.setLength=function(a){b.prototype.setLength.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setLength(a)});return this};c.setLiveheadPosition=function(a){b.prototype.setLiveheadPosition.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setLiveheadPosition(a)});return this};c.setLiveheadSeqNumHeader=function(a){b.prototype.setLiveheadSeqNumHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setLiveheadSeqNumHeader(a)});return this};c.setLiveheadSeqNumMpd=function(a){b.prototype.setLiveheadSeqNumMpd.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setLiveheadSeqNumMpd(a)});return this};c.setManifestType=function(a){b.prototype.setManifestType.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setManifestType(a)});return this};c.setPriorityFloat=function(a){b.prototype.setPriorityFloat.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPriorityFloat(a)});return this};c.setInitiator=function(a){b.prototype.setInitiator.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setInitiator(a)});return this};c.setPreloadTime=function(a){b.prototype.setPreloadTime.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPreloadTime(a)});return this};c.setConcluder=function(a){b.prototype.setConcluder.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setConcluder(a)});return this};c.setPreviousRepresentationID=function(a){b.prototype.setPreviousRepresentationID.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPreviousRepresentationID(a)});return this};c.setRepresentationID=function(a){b.prototype.setRepresentationID.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setRepresentationID(a)});return this};c.setState=function(a){b.prototype.setState.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setState(a)});return this};c.setContentLengthHeader=function(a){b.prototype.setContentLengthHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setContentLengthHeader(a)});return this};c.setEdgeHitHeader=function(a){b.prototype.setEdgeHitHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setEdgeHitHeader(a)});return this};c.setFNAHitHeader=function(a){b.prototype.setFNAHitHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setFNAHitHeader(a)});return this};c.setOriginHitHeader=function(a){b.prototype.setOriginHitHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setOriginHitHeader(a)});return this};c.setCode=function(a){b.prototype.setCode.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setCode(a)});return this};c.setResponseTimeMsHeader=function(a){b.prototype.setResponseTimeMsHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setResponseTimeMsHeader(a)});return this};c.setIsTemplatedManifest=function(a){b.prototype.setIsTemplatedManifest.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsTemplatedManifest(a)});return this};c.setIsLatencyCachupEnabled=function(a){b.prototype.setIsLatencyCachupEnabled.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsLatencyCachupEnabled(a)});return this};c.setPlayerFormat=function(a){b.prototype.setPlayerFormat.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPlayerFormat(a)});return this};c.setIsP2pPlayback=function(a){b.prototype.setIsP2pPlayback.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsP2pPlayback(a)});return this};c.setOneObserved=function(a){b.prototype.setOneObserved.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setOneObserved(a)});return this};c.setOneReqWave=function(a){b.prototype.setOneReqWave.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setOneReqWave(a)});return this};c.setOneResWave=function(a){b.prototype.setOneResWave.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setOneResWave(a)});return this};c.setAppendTarget=function(a){b.prototype.setAppendTarget.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setAppendTarget(a)});return this};c.setIsRingBufferSample=function(a){b.prototype.setIsRingBufferSample.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsRingBufferSample(a)});return this};c.setIsOnline=function(a){b.prototype.setIsOnline.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setIsOnline(a)});return this};c.setProxyStatusHeader=function(a){b.prototype.setProxyStatusHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setProxyStatusHeader(a)});return this};c.setPlaybackFbmsParam=function(a){b.prototype.setPlaybackFbmsParam.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPlaybackFbmsParam(a)});return this};c.setPreferredEdgeLatency=function(a){b.prototype.setPreferredEdgeLatency.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setPreferredEdgeLatency(a)});return this};c.setUserInfo=function(a){b.prototype.setUserInfo.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setUserInfo(a)});return this};c.setDynamicStatusHeader=function(a){b.prototype.setDynamicStatusHeader.call(this,a);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setDynamicStatusHeader(a)});return this};c.setMediaSourceSourceBuffer=function(a,c){b.prototype.setMediaSourceSourceBuffer.call(this,a,c);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(b){return b.setMediaSourceSourceBuffer(a,c)});return this};c.unsetMediaSourceSourceBuffers=function(){b.prototype.unsetMediaSourceSourceBuffers.call(this);this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.unsetMediaSourceSourceBuffers()});return this};c.log=function(){b.prototype.log.call(this),this.$OzMultiDestinationOperationLogger$p_1.forEach(function(a){return a.log()})};return a}(c("oz-player/loggings/OzOperationLoggerBase"));g.OzMultiDestinationPerfLoggerProvider=a}),98);
__d("oz-player/loggings/OzOperationLoggerObserver",["oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=new(c("oz-player/shims/OzSubscriptionsHandler"))()}var b=a.prototype;b.observe=function(a,b){var c;a=a.map(function(a){var c=a.setOperationLoggedListener(function(a){var c=a.getClientTimeBegin()||0,d=a.getClientTimeEnd()||0;b.getOperationLogger(a.getOperationName()).setClientTimeBegin(c).setClientTimeDuration(d-c).setClientTimeEnd(d).setLength(a.getLength()).setResult(a.getResult()||"success").setInitiator(a.getInitiator()).setType(a.getType()).log()});a.activate();return c});(c=this.$1).addSubscriptions.apply(c,a)};b.destroy=function(){this.$1.release()};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/OzNetworkDiagnosticsWWW",["VideoPlayerOzWWWGlobalConfig"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){if(!a)return null;a=parseInt(a.get(b),10);return!isNaN(a)&&isFinite(a)?a:null}function i(a,b,c){if(!a||b===""||c==="")return null;b=(a=a.get(b))!=null?a:"";a=b.split(";");for(b=0;b<a.length;b++){var d=a[b].split(":");if(d.length===2&&d[0]===c){d=parseInt(d[1],10);return isFinite(d)?d:null}}return null}a={getNextValidSegmentId:function(a){return h(a,"x-fb-next-valid-segment-id")},getResponseTimeMs:function(a){return h(a,"x-fb-response-time-ms")},getDvlSegmentPTS:function(a){return h(a,"x-fb-segment-pts-start")},getDvlStatus:function(a){return a==null?void 0:a.get("x-fb-dynamic-status")},getUsableResponseSizeForBandwidthEstimation:function(a){return h(a,"x-fb-dynamic-predictive-response-chunk-size")},getBandwidthMeanEstimate:function(a){var b=c("VideoPlayerOzWWWGlobalConfig").getString("bandwidth_estimate_header_key",""),d=c("VideoPlayerOzWWWGlobalConfig").getString("bandwidth_estimate_key","");return i(a,b,d)},getBandwidthStandardDeviationEstimate:function(a){return h(a,"x-bwe-std-dev")},getTimeToFirstByteMsEstimate:function(a){return h(a,"x-mrtt-ms")}};b=a;g["default"]=b}),98);
__d("oz-player/shims/OzNetworkDiagnostics",["oz-player/shims/www/OzNetworkDiagnosticsWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzNetworkDiagnosticsWWW")}),98);
__d("oz-player/manifests/OzDynamicVideoLibrary",["oz-player/shims/OzNetworkDiagnostics"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$4=null;this.$5=null;this.$6=new RegExp(/(.*)\.(m4v|m4a)(\?|$)/);this.$7={m4a:{time:0},m4v:{time:0}};this.$8={audio:"m4a",video:"m4v"};this.$9={};a=a.config;this.$3=a}var b=a.prototype;b.getLastSegmentStartPTS=function(){return this.$1};b.getLast200RequestedTime=function(){return this.$5};b.getLast200RequestedUrlDecisionMinTime=function(){var a=[];for(var b in this.$7)a.push(this.$7[b].time);return Math.min.apply(Math,a)};b.getLast200RequestedUrlDecisionTimeByMimeType=function(a){return(a=this.$7[this.$8[a]])==null?void 0:a.time};b.updateWithResponse=function(a,b,d,e){var f;if(!e.headers||e.status!=200)return;this.$5=b;this.$1=(f=c("oz-player/shims/OzNetworkDiagnostics").getDvlSegmentPTS(e.headers))!=null?f:this.$1;this.$2=c("oz-player/shims/OzNetworkDiagnostics").getDvlStatus(e.headers);this.$10(a,d);(this.$2!=null||this.$2==="200")&&(this.$4=b)};b.$10=function(a,b){a=this.$6.exec(a);if(a!=null){a=a[2];b!=null&&(this.$7[a]={time:b})}};b.shouldRequestDynamicInfo=function(a){if(a!=="video")return!1;this.$11(a);a=this.$12(a);return a!=null&&a<=this.$3.getNumber("dvl_initial_segment_ignore_count")?!1:this.$3.getNumber("dvl_update_interval_ms")==0||this.$4==null||this.$4+this.$3.getNumber("dvl_update_interval_ms")<=Date.now()};b.$11=function(a){this.$9[a]==null&&(this.$9[a]={segmentCount:0});return this.$9[a].segmentCount=this.$9[a].segmentCount!=null?this.$9[a].segmentCount+1:0};b.$12=function(a){return this.$9[a].segmentCount};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzRepresentationBase",["oz-player/parsers/getMIMECodecs","oz-player/shims/ozvariant","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){this.$1=a,this.$2=b,this.$10=c,this.$5=f,this.$3=d,this.$4=e,this.$6=g,this.$7=h,this.$8=i,this.$9=j,this.$11=k,this.$12=l}var b=a.prototype;b.getContentProtectionXml=function(){return this.$2};b.getID=function(){return this.$10};b.getBandwidth=function(){return this.$9};b.getMimeCodecs=function(){return c("oz-player/parsers/getMIMECodecs")(this.$3,this.$4)};b.getMimeType=function(){return this.$3};b.getCodecs=function(){return this.$4};b.getLang=function(){return this.$5};b.getRole=function(){return this.$6};b.getDisplayLabel=function(){return this.$10};b.getInitSegment=function(){return this.$7};b.getCustomFieldFirstSegment=function(){return this.$11};b.getCustomField=function(a){if(this.$12==null||!this.$12[a])throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Custom field "+a+" is not specified by caller",extra:{code:"OZ_RP-8"}});a=this.$12[a];try{return a(this.$1)}catch(a){return null}};b.updateWith=function(b){b instanceof a||c("oz-player/shims/ozvariant")(0,229),this.$8.updateWith(b.$8)};b.getSegmentByTime=function(a){return this.$8.getSegmentByTime(a)};b.getSegment=function(a){return this.$8.getSegment(a)};b.getPredictedSegmentAfter=function(a){return this.$8.getPredictedSegmentAfter(a)};b.canPredict=function(){return this.$8.canPredict()};b.canApproximateId=function(){return this.$8.canApproximateId()};b.getSegmentAfter=function(a){return this.$8.getSegmentAfter(a)};b.isEndingSegment=function(a){return this.$8.isEndingSegment(a)};b.addUpdateListener=function(a){return this.$8.addUpdateListener(a)};b.getTimeRanges=function(){return this.$8.getTimeRanges()};b.blockTimeRange=function(a){this.$8.blockTimeRange(a)};b.getEndingSegment=function(){return this.$8.getEndingSegment()};b.getMaxGopSec=function(){return this.$8.getMaxGopSec()};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzVideoRepresentation",["oz-player/manifests/OzRepresentationBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o){c=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m)||this;c.$OzVideoRepresentation$p_5=null;c.$OzVideoRepresentation$p_6=null;c.$OzVideoRepresentation$p_7=null;c.$OzVideoRepresentation$p_1=n;c.$OzVideoRepresentation$p_2=o;c.$OzVideoRepresentation$p_4=m;c.$OzVideoRepresentation$p_3=b;if(m!=null){if(m.playbackResolutionMos!=null){d=c.getCustomField("playbackResolutionMos");c.$OzVideoRepresentation$p_7=d!=null?String(d):null}if(m.playbackResolutionCsvqm!=null){e=c.getCustomField("playbackResolutionCsvqm");c.$OzVideoRepresentation$p_6=e!=null?String(e):null}}return c}var c=b.prototype;c.getQualityScore=function(a){if(a==="csvqm")return this.$OzVideoRepresentation$p_6;else return this.$OzVideoRepresentation$p_7};c.getWidth=function(){return this.$OzVideoRepresentation$p_1};c.getHeight=function(){return this.$OzVideoRepresentation$p_2};c.getDisplayLabel=function(){if(this.$OzVideoRepresentation$p_5!=null)return this.$OzVideoRepresentation$p_5;var a=this.$OzVideoRepresentation$p_4?this.$OzVideoRepresentation$p_4.qualityLabel:null;a&&(this.$OzVideoRepresentation$p_5=a(this.$OzVideoRepresentation$p_3));(this.$OzVideoRepresentation$p_5==null||this.$OzVideoRepresentation$p_5=="")&&(this.$OzVideoRepresentation$p_5=this.getHeight().toString()+"p");return this.$OzVideoRepresentation$p_5||""};return b}(c("oz-player/manifests/OzRepresentationBase"));g["default"]=a}),98);
__d("oz-player/utils/OzMimeUtil",[],(function(a,b,c,d,e,f){"use strict";function a(a){return(a.split("/")[0]||"").trim()}function b(a){a=(a.split(";")[0]||"").trim();a=(a.split("/")[1]||"").trim();return a}function c(a){a=a.split('codecs="').pop();return a.split(".")[0].trim()}f.getMimeType=a;f.getContainerType=b;f.getParsedCodecFamily=c}),66);
__d("oz-player/media_source/OzMSESourceBufferImpl",["oz-player/shims/OzDOMEventListener","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c){this.$1=a,this.$2=c,this.$3=b}var b=a.prototype;b.registerOnUpdateStartListener=function(a){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"updatestart",a)};b.registerOnUpdateEndListener=function(a){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"updateend",a)};b.registerOnUpdateListener=function(a){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"update",a)};b.registerOnErrorListener=function(a){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"error",a)};b.getIsUpdating=function(){return this.$1.updating};b.getBuffered=function(){return this.$1.buffered};b.setAppendWindowEnd=function(a){this.$1.appendWindowEnd=a};b.appendBuffer=function(a,b){var c=this.$2.getBool("mcm_in_play_codec_switch");if(c){var e=(c=d("oz-player/utils/OzMimeUtil")).getMimeType(b)!==c.getMimeType(this.$3),f=c.getContainerType(b)!==c.getContainerType(this.$3);c=c.getParsedCodecFamily(b)!==c.getParsedCodecFamily(this.$3);if(e||f||c)try{this.$1.changeType(b),this.$3=b}catch(a){throw d("oz-player/utils/OzErrorUtils").createOzError({description:'SourceBufferChangeTypeError: Failed to changeType("'+b+'"): '+String(a)+" current MIME Codecs: "+this.$3,type:"OZ_SOURCE_BUFFER_CHANGE_TYPE"})}}this.$1.appendBuffer(a)};b.abort=function(){this.$1.abort()};b.remove=function(a,b){this.$1.remove(a,b)};return a}();g["default"]=a}),98);
__d("oz-player/media_source/OzMediaErrorProvider",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.hasError=function(){return this.$1.error!==null};b.getMediaErrorName=function(){var a=this.$1.error;return a&&a.message?this.$2(a.message):null};b.getErrorCode=function(){var a=this.$1.error;return a&&a.code?a.code:null};b.getVideoNode=function(){return this.$1};b.$2=function(a){return a.replace(/([0-9]{2,})/g,function(a){var b="";while(b.length<a.length)b+="#";return b})};return a}();f["default"]=a}),66);
__d("oz-player/utils/OzSourceBufferUtil",["oz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=0;for(var c=0;c<a.getBuffered().length;c++)b+=a.getBuffered().end(c)-a.getBuffered().start(c);return b}function b(a){return a.reduce(function(a,b){return a+(b.endTime-b.startTime)},0)}function c(a){return a.getBuffered().length==0?0:a.getBuffered().start(0)}function e(a){var b=null;try{b=a.getBuffered()}catch(a){return 0}return b.length==0?0:b.end(b.length-1)}function f(a){var b=[];for(var c=0;c<a.length;c++)b.push({startTime:a.start(c),endTime:a.end(c)});return b}function h(a,b,c){c=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,b,a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));b=c>=0?parseFloat((a[c].endTime-b).toFixed(3)):0;a=c>=0?a.length-1-c:-1;return{bufferAheadSec:b,bufferedOffset:a}}function i(a,b,c){var e=a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});c=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,b,e);e=parseFloat(e.reduce(function(a,c){var e=c.rangeEnd;return e==null?a:a+(d("oz-player/utils/OzNumericalRangeUtil").isWithin(b,c)?e-b:d("oz-player/utils/OzNumericalRangeUtil").isLargerThan(c.rangeStart,b)?e-c.rangeStart:0)},0).toFixed(3));a=c>=0?a.length-1-c:-1;return{bufferAheadSec:e,bufferedOffset:a}}g.getTotalBufferedTime=a;g.getTotalInBufferedRanges=b;g.getStartBufferedTime=c;g.getEndBufferedTime=e;g.convertToBufferedTimeRangeArray=f;g.getBufferAheadInBufferedRanges=h;g.getTotalBufferAheadOfPosition=i}),98);
__d("oz-player/media_source/SourceBufferManagerUtils",["oz-player/utils/OzSourceBufferUtil"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){var e=d("oz-player/utils/OzSourceBufferUtil").getEndBufferedTime(b);return function(){var a=d("oz-player/utils/OzSourceBufferUtil").getEndBufferedTime(b);return{startTime:e,endTime:a}}}g.startMeasuringAppendedBuffer=a}),98);
__d("oz-player/shims/www/OzDeferredWWW",["Deferred"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("Deferred")}),98);
__d("oz-player/shims/OzDeferred",["oz-player/shims/www/OzDeferredWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzDeferredWWW")}),98);
__d("oz-player/utils/OzFakeEventTarget",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var b=a.prototype;b.dispatchEvent=function(a){if(this.$1[a]==null)return;this.$1[a].forEach(function(a){return a()})};b.addEventListener=function(a,b){var c=this;this.$1[a]===void 0&&(this.$1[a]=new Set());this.$1[a].add(b);return{remove:function(){c.removeEventListener(a,b)}}};b.removeEventListener=function(a,b){if(!this.$1[a])return;this.$1[a]["delete"](b)};b.destroy=function(){this.$1={}};return a}();f["default"]=a}),66);
__d("oz-player/states/OzObservedSourceBufferState",["oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzFakeEventTarget"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzObservedSourceBufferState$p_2=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzObservedSourceBufferState$p_3=[];e.$OzObservedSourceBufferState$p_6=function(){var a;try{a=e.$OzObservedSourceBufferState$p_1.getBuffered()}catch(a){if(a.name==="InvalidStateError"){e.$OzObservedSourceBufferState$p_3=[];return}else throw a}var b=[];for(var c=0;c<a.length;c++)b.push({startTime:a.start(c),endTime:a.end(c)});e.$OzObservedSourceBufferState$p_3=b};e.$OzObservedSourceBufferState$p_1=b;e.$OzObservedSourceBufferState$p_4=d;e.$OzObservedSourceBufferState$p_5();return e}var d=b.prototype;d.$OzObservedSourceBufferState$p_5=function(){var a=this;this.$OzObservedSourceBufferState$p_2.release();this.$OzObservedSourceBufferState$p_2=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$OzObservedSourceBufferState$p_2.addSubscriptions(this.$OzObservedSourceBufferState$p_1.registerOnUpdateEndListener(function(){a.$OzObservedSourceBufferState$p_6(),a.dispatchEvent("buffer_updated")}),this.$OzObservedSourceBufferState$p_1.registerOnErrorListener(this.$OzObservedSourceBufferState$p_6))};d.setSourceBuffer=function(a){this.$OzObservedSourceBufferState$p_1=a,this.$OzObservedSourceBufferState$p_5(),this.$OzObservedSourceBufferState$p_6()};d.getBufferedRanges=function(){return this.$OzObservedSourceBufferState$p_3};d.destroy=function(){a.prototype.destroy.call(this),this.$OzObservedSourceBufferState$p_2.release(),this.$OzObservedSourceBufferState$p_2.engage()};return b}(c("oz-player/utils/OzFakeEventTarget"));g["default"]=a}),98);
__d("oz-player/utils/OzCustomErrorCode",[],(function(a,b,c,d,e,f){"use strict";a={APPEND_BUFFER_UNKNOWN_ERROR:"21539",APPEND_BUFFER_INVALID_STATE_ERROR_SOURCE_BUFFER_HAS_BEEN_REMOVED:"21540",APPEND_BUFFER_MEDIA_ERROR_ATTRIBUTE_NOT_NULL:"21541",APPEND_BUFFER_SOURCE_BUFFER_UPDATING_ATTRIBUTE_IS_TRUE:"21542",SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR:"21543",SOURCE_BUFFER_MANAGER_CREATE_ERROR:"21544",SETUP_STREAMS_PROMISE_REJECTION:"21545",APPEND_BUFFER_QUOTA_EXCEEDED_ERROR:"21546",APPEND_BUFFER_INVALID_STATE_ERROR:"21547",SOURCE_BUFFER_MANAGER_UPDATEEND_UNKNOWN_ERROR:"21548",NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR:"21549",STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR:"21550",SOURCE_BUFFER_MANAGER_CLEAR_RANGE_FAILED:"21551",WEBVTT_CAPTION_PARSE_ERROR:"21552"};b=a;f["default"]=b}),66);
__d("oz-player/media_source/SourceBufferManager",["Promise","oz-player/loggings/OzLoggingUtils","oz-player/media_source/SourceBufferManagerUtils","oz-player/shims/OzDOMEventListener","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzStreams","oz-player/shims/OzSubscriptionsHandler","oz-player/states/OzObservedSourceBufferState","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorUtils","oz-player/utils/ozConcatUint8Arrays"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b,e,f,g,h){var i=this;h===void 0&&(h=null);this.$4=null;this.$5=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$7=!1;this.$8=[];this.$12=!1;this.$13=!1;this.$14=0;this.$26=function(){if(i.$10.hasError()){i.$13=!1;i.$12=!1;var a=i.$10.getMediaErrorName();a=a!=null?a:"An unknown source buffer error occurred.";var b=i.$10.getErrorCode();b=b!=null?String(b):c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_UPDATEEND_UNKNOWN_ERROR;a=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:a,extra:{code:b}});i.$4&&i.$4.reject(a);i.$4=null;i.cancelOperationAndCleanQueue()}else if(!i.$13){i.$13=!0;b=i.$10.getVideoNode();a=i.$26;b=c("oz-player/shims/OzDOMEventListener").listenDOMEvent(b,"error",a);i.$5.addSubscriptions(b)}};this.$17=function(){var a=i.$2;if(a!=null){a.getOperationLogger("source_buffer_updateend").setError((a=i.$10.getMediaErrorName())!=null?a:void 0).setCode(i.$10.getErrorCode()).setResult(i.$12?"failed":"success").log()}a=i.$4;a&&(i.$12?i.$26():(a.resolve(),i.$4&&(i.$4=null)))};this.$18=function(){var a=i.$2;if(a!=null){a.getOperationLogger("source_buffer_error").setError((a=i.$10.getMediaErrorName())!=null?a:void 0).setCode(i.$10.getErrorCode()).setResult("failed").log()}i.$12=!0};this.$1=a;this.$2=h;this.$3=b;this.$11=e;this.$16();this.$9=new(c("oz-player/states/OzObservedSourceBufferState"))(this.$3,this.$11);this.$10=f;this.$15=g}var e=a.prototype;e.$16=function(){this.$5.release(),this.$5=new(c("oz-player/shims/OzSubscriptionsHandler"))(),this.$5.addSubscriptions(this.$3.registerOnUpdateEndListener(this.$17),this.$3.registerOnErrorListener(this.$18))};e.setSourceBuffer=function(a){if(a==null)return;this.cancelOperationAndCleanQueue();this.$3=a;this.$16();this.$9.setSourceBuffer(a)};e.queueData=function(a,b,d,e,f){e===void 0&&(e=null);f===void 0&&(f=0);var g=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$8.push({data:a,deferred:g,loggerProvider:e,appendTarget:f,mimeCodecs:b,clearSourceBufferRange:d});a=g.getPromise();this.$7||this.$19()["catch"](function(a){});return a};e.cancelOperationAndCleanQueue=function(a){a===void 0&&(a=null);a&&a.cloneContext().getOperationLogger("source_buffer_cancel_and_clean").log();var b=d("oz-player/utils/OzErrorUtils").createOzCancelledError("SBM cancel and clean");this.$8.forEach(function(a){a=a.deferred;a.reject(b)});this.$8=[];try{this.$11.getBool("enable_alternative_audio_tracks")?this.$15()==="open"&&(this.$10.hasError()||this.$3.abort()):this.$15()!=="closed"&&!0&&(this.$10.hasError()||this.$3.abort())}catch(b){var c=b;a&&a.cloneContext().getOperationLogger("cancel_operation_abort_failed").setError(c).setReason(this.$15?this.$15():null).log()}a=this.$4;a&&a.reject(b);this.$6&&(this.$6.reject(b),this.$6=null)};e.getSourceBufferState=function(){return this.$9};e.$20=function(a,b){a=Math.max(a,0);b>0&&b>a&&this.$3.remove(a,b)};e.$21=function(a,b){a=Math.max(a,0);if(b>0&&b>a){var d=this.$22();this.$20(a,b);return d}return c("oz-player/shims/OzMaybeNativePromise").resolve()};e.clearRangeWithWait=function(a){var c=this;this.cancelOperationAndCleanQueue();return a.reduce(function(a,b){var d=b.fromTime,e=b.toTime;return a.then(function(){return c.$21(d,e)})},(h||(h=b("Promise"))).resolve())};e.$22=function(a){var b=this.$4=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));b=b.getPromise();a&&d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,a,"wait_for_source_buffer");return b};e.$23=function(a,b,e,f){var g=this,h=function(){var h=g.$4=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),i=!1,j=!0;try{j=!!g.$3.getBuffered()}catch(a){j=!1}try{i=g.$3.getIsUpdating();if(j)g.$3.appendBuffer(a,b);else{h.resolve();return h.getPromise()}}catch(a){j=a;var k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_UNKNOWN_ERROR,l=j.name,m=j.message;l==="QuotaExceededError"?k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_QUOTA_EXCEEDED_ERROR:g.$10.hasError()?k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_MEDIA_ERROR_ATTRIBUTE_NOT_NULL:i?k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_SOURCE_BUFFER_UPDATING_ATTRIBUTE_IS_TRUE:l==="InvalidStateError"&&typeof m==="string"&&/SourceBuffer has been removed/.test(m)?k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_INVALID_STATE_ERROR_SOURCE_BUFFER_HAS_BEEN_REMOVED:l==="InvalidStateError"&&(k=c("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_INVALID_STATE_ERROR);i=d("oz-player/utils/OzErrorUtils").createOzError({type:g.$11.getBool("emit_caption_parse_errors_as_warning")&&d("oz-player/utils/OzErrorUtils").isOzError(j)?j.getType():l==="QuotaExceededError"?"OZ_SOURCE_BUFFER_QUOTA_EXCEEDED":l==="OZ_SOURCE_BUFFER_CHANGE_TYPE"?"OZ_SOURCE_BUFFER_CHANGE_TYPE":"OZ_SOURCE_BUFFER",description:"SBM#"+g.$1+" appendBuffer("+b+") failed: "+String(m),extra:g.$11.getBool("emit_caption_parse_errors_as_warning")&&d("oz-player/utils/OzErrorUtils").isOzError(j)?j.getExtra():{originalError:j,code:k}});g.$4=null;h.reject(i)}l=h.getPromise();e&&d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(l,e,"append",function(b){var c;b.setLength(a.byteLength);c=(c=f==null?void 0:f.appendTarget)!=null?c:null;b.setAppendTarget(c)});return l};if(this.$3.getIsUpdating())return this.$22(e).then(h)["catch"](function(a){throw a});this.$14+=a.byteLength;return h()};e.$19=function(){var a=this;if(this.$7)return c("oz-player/shims/OzMaybeNativePromise").reject(this.$24("Another unit of queued data is being appended."));var b=this.$8.shift();if(!b){this.$7=!1;return c("oz-player/shims/OzMaybeNativePromise").resolve()}var e=b.data,f=b.mimeCodecs,g=b.deferred,h=b.loggerProvider,i=b.appendTarget,j=b.clearSourceBufferRange;this.$7=!0;var k;b=function(){return e instanceof d("oz-player/shims/OzStreams").OzReadableStream?a.$25(e,f,h,i):a.$23(e,f,h,{appendTarget:i})};j?(k=this.$3.getIsUpdating()?this.$22(h):c("oz-player/shims/OzMaybeNativePromise").resolve(),k=k.then(function(){return a.clearRangeWithWait([{fromTime:j[0],toTime:j[1]}])}).then(b)):k=b();var l=d("oz-player/media_source/SourceBufferManagerUtils").startMeasuringAppendedBuffer(this.$11,this.$3,this.$9);return k["catch"](function(a){g.reject(a)}).then(function(){var b=l(),c=b.startTime;b=b.endTime;g.resolve({startTime_UNSAFE:c,endTime_UNSAFE:b,appendedSec:b-c});a.$7=!1;a.$19()["catch"](function(a){})})};e.$25=function(a,b,d,e){var f=this,g=[],h=0,i=a.getReader();a=function a(){var j=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));f.$6=j;i.read().then(function(a){j.resolve(a),f.$6=null})["catch"](function(a){j.reject(a),f.$6=null});return j.getPromise().then(function(i){if(i.done){var j=c("oz-player/utils/ozConcatUint8Arrays")(g);j=j.buffer;g.length=0;h=0;return j.byteLength>0?f.$23(j,b,d,{appendTarget:e}):c("oz-player/shims/OzMaybeNativePromise").resolve()}j=i.value;i=j;if(e>0){j=j instanceof Uint8Array?j:new Uint8Array(j);g.push(j);h+=j.byteLength;if(h>=e){j=c("oz-player/utils/ozConcatUint8Arrays")(g);j=j.buffer;g.length=0;h=0;i=j}}return i&&i.byteLength>=e?f.$23(i,b,d,{appendTarget:e}).then(function(){return a()}):a()},function(a){if(f.$11.getBool("enable_alternative_audio_tracks"))try{f.$15()==="open"&&(f.$10.hasError()||f.$3.abort())}catch(a){a}else f.$3.abort();return c("oz-player/shims/OzMaybeNativePromise").reject(a)})};return a()};e.$24=function(a){var b=this.$2;b!=null&&b.getOperationLogger("source_buffer_invariant").setError(a).setResult("failed").log();return d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:"SBM invariant: "+a})};e.destroy=function(){var a=this,b=this.$2;b&&b.cloneContext().getOperationLogger("source_buffer_destroy").log();b=this.$4;b&&(!this.$13?(b.reject(d("oz-player/utils/OzErrorUtils").createOzCancelledError("SBM destroyed")),this.$4=null,this.$5.release(),this.$5=new(c("oz-player/shims/OzSubscriptionsHandler"))()):b.getPromise()["catch"](function(){a.$4=null,a.$5.release(),a.$5=new(c("oz-player/shims/OzSubscriptionsHandler"))()}));this.$9.destroy()};e.getDebug=function(){return{SourceBuffer:this.$3}};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";var h=c("JSResourceForInteraction")("OzVTTSourceBufferImpl").__setRef("oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW");function a(){return h.load()}g["default"]=a}),98);
__d("oz-player/shims/www/getOzVTTSourceBufferImplWWW",["oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW")}),98);
__d("oz-player/shims/getOzVTTSourceBufferImpl",["oz-player/shims/www/getOzVTTSourceBufferImplWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/getOzVTTSourceBufferImplWWW")}),98);
__d("oz-player/shims/www/ozClearTimeoutWWW",["clearTimeout"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("clearTimeout")}),98);
__d("oz-player/shims/ozClearTimeout",["oz-player/shims/www/ozClearTimeoutWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/ozClearTimeoutWWW")}),98);
__d("oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW",["setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("setTimeoutAcrossTransitions")}),98);
__d("oz-player/shims/ozSetTimeoutAcrossTransitions",["oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW")}),98);
__d("oz-player/utils/ozGetErrorNameFromMediaErrorCode",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:}return"MEDIA_ERR_UNKNOWN"}f["default"]=a}),66);
__d("oz-player/media_source/MediaSourceManager",["oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/media_source/OzMSESourceBufferImpl","oz-player/media_source/OzMediaErrorProvider","oz-player/media_source/SourceBufferManager","oz-player/shims/OzDOMEventListener","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/getOzVTTSourceBufferImpl","oz-player/shims/ozClearTimeout","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozThrottle","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil","oz-player/utils/ozGetErrorNameFromMediaErrorCode"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this,e=a.videoNode,f=a.config,g=a.perfLoggerProvider;g=g===void 0?new(d("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)([]):g;var h=a.handleVttCaptionsUpdated,i=a.onClearVideoNodeError;a=a.onRetryVideoElementError;this.$3=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$6=[];this.$7=new Map();this.$8=[];this.$10=!1;this.$12=!1;this.$13=!1;this.$14=!1;this.$15=!1;this.$18=null;this.$19=null;this.$20=new(c("oz-player/utils/OzErrorEmitter"))();this.$22="undetected";this.$28=function(){b.$31()||(b.$10=!1);if(!b.$32())return;var a=b.$8.shift();a&&(a(b.$2),b.$10=!0)};this.$5=g;this.$11=f;this.$1=e;this.$21=h;this.$16=i;this.$17=a;this.$9=new(c("oz-player/media_source/OzMediaErrorProvider"))(this.$1);this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"error",function(){var a;b.$5.getOperationLogger("media_element_error").setError((a=b.$9.getMediaErrorName())!=null?a:void 0).setCode(b.$9.getErrorCode()).setResult("failed").setUserInfo({av1HardwareSupport:b.$22}).log();b.$8=[];b.$6=[];b.$4.release();b.$4=new(c("oz-player/shims/OzSubscriptionsHandler"))();b.$15=b.$15||b.$14||b.$13;a=b.$1.error;var e=(a==null?void 0:a.code)||0,f=d("oz-player/utils/OzErrorUtils").createOzError({type:c("oz-player/utils/ozGetErrorNameFromMediaErrorCode")(e),description:(a==null?void 0:a.message)!=null?a.message:"",extra:{originalError:a,code:String(e)}});if(b.$19!=null){b.$5.getOperationLogger("media_element_error").setError(a).setCode(e).setReason("mitigation_failed").setResult("failed").setUserInfo({av1HardwareSupport:b.$22}).log();b.$20.emitError(f);return}b.$19=b.$1.currentTime;b.$18==null&&(b.$18=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){b.$18=null,b.$11.getBool("retry_video_element_error")&&(b.$17!=null&&b.$17(f),b.$23())},0))}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"play",function(){b.$14=!0}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"playing",function(){b.$14=!1,b.$15=!1,b.$19=null,b.$13=!0}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"pause",function(){b.$14=!1,b.$13=!1,b.$15=!!b.$1.error}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"ended",function(){b.$14=!1,b.$13=!1}));this.$2=new MediaSource();this.$5.getOperationLogger("media_source_new").log();this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){b.$5.getOperationLogger("media_source_open").log()}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceended",function(){b.$5.getOperationLogger("media_source_ended").log()}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceclose",function(){b.$5.getOperationLogger("media_source_close").log()}));this.$24(this.$2)}var b=a.prototype;b.$24=function(a){var b=this.$1,c=b.src;c!==""&&URL.revokeObjectURL(c);a?b.src=URL.createObjectURL(a):(b.removeAttribute("src"),b.removeAttribute("srcObject"))};b.$23=function(){var a=this;this.$7.forEach(function(a){a.cancelOperationAndCleanQueue()});this.$2=new MediaSource();this.$24(this.$2);this.$7.forEach(function(a,b){a.setSourceBuffer(null)});var b=this.$25().then(function(){var b=[];a.$7.forEach(function(c,d){var e=a.$26(d).then(function(b){c.setSourceBuffer(b),a.$27(b,d)});b.push(e)});return c("oz-player/shims/OzMaybeNativePromise").all(b)});b.then(function(){a.$16&&a.$16();a.$19!=null&&(a.$1.currentTime=a.$19);if(a.$15){var b=a.$1.play();return b==null?void 0:b["catch"](function(){})}})["catch"](function(b){a.$20.emitError(b)})};b.$25=function(){var a=this;if(this.$11.getBool("msm_refactor_wait_for_sourceopen")){if(this.$2.readyState==="open")return c("oz-player/shims/OzMaybeNativePromise").resolve();var b=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),d=c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){d.remove(),b.resolve()});this.$3.addSubscriptions(d);return b.getPromise()}else{if(this.$2.readyState==="open")return c("oz-player/shims/OzMaybeNativePromise").resolve();var e=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){e.resolve(),a.$28()}));return e.getPromise()}};b.$26=function(a){var b=this;if(this.$11.getBool("msm_refactor_wait_for_sourceopen"))return c("oz-player/shims/OzMaybeNativePromise").resolve().then(function(){return b.$29(a)})["catch"](function(b){b=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:'Failed to addSourceBuffer("'+a+'"): '+String(b),extra:{originalError:b,code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR.toString()}});throw b});else try{return this.$29(a)}catch(b){var e=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:'Failed to addSourceBuffer("'+a+'"): '+(b.message||String(b)),extra:{originalError:b,code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR.toString()}});throw e}};b.$29=function(a){var b=this,e;a.includes("vtt")?e=this.$30(a):e=this.$25().then(function(){return new(c("oz-player/media_source/OzMSESourceBufferImpl"))(b.$2.addSourceBuffer(a),a,b.$11)});return e.then(function(c){b.$6.push(c);c.registerOnUpdateListener(function(){b.$5.cloneContext().getOperationLogger("source_buffer_update_start").setType(d("oz-player/utils/OzMimeUtil").getMimeType(a)).setMediaSourceSourceBuffer(d("oz-player/utils/OzMimeUtil").getMimeType(a),c).setType(d("oz-player/utils/OzMimeUtil").getMimeType(a)).log()});b.$5.getOperationLogger("add_source_buffer").setMediaSourceSourceBuffer(d("oz-player/utils/OzMimeUtil").getMimeType(a),c).log();return c})};b.$27=function(a,b){var c=this;this.$4.addSubscriptions(a.registerOnUpdateEndListener(function(){c.$28()}))};b.$30=function(a){var b=this;return c("oz-player/shims/getOzVTTSourceBufferImpl")().then(function(e){if(b.$21!=null){var f=new e({onCaptionsChanged:b.$21,config:b.$11}),g=c("oz-player/shims/ozThrottle")(function(){f.setCurrentVideoTime(b.$1.currentTime)},200);b.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(b.$1,"timeupdate",function(){g()}),{remove:function(){g=function(){}}});return f}else throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:'Failed to addSourceBuffer("'+a+'"): No handleVttCaptionsUpdated callback provided',extra:{code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR.toString()}})})};b.createSourceBufferManager=function(a,b,e,f){var g=this;return(this.$11.getBool("msm_refactor_wait_for_sourceopen")?this.$26(b).then(function(a){return[void 0,a]}):c("oz-player/shims/OzMaybeNativePromise").all([this.$25(),this.$26(b)])).then(function(e){e[0];e=e[1];var f=new(c("oz-player/media_source/SourceBufferManager"))(a,e,g.$11,g.$9,function(){return g.$2.readyState},g.$5.cloneContext().setType(d("oz-player/utils/OzMimeUtil").getMimeType(b)));g.$27(e,b);g.$7.set(b,f);return f})["catch"](function(b){var e=d("oz-player/utils/OzErrorUtils").isOzError(b)?b.getExtra():void 0,f=e==null?void 0:e.code;f=d("oz-player/utils/OzErrorUtils").isOzError(b)?""+b.getType()+(f!=null?"#"+f:"")+": "+b.getDescription():String(b);f=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:"Failed to create SBM#"+a+": "+f+", support AAC-LC="+(MediaSource.isTypeSupported("audio/mp4; codecs=mp4a.40.2")?"true":"false")+", readyState="+g.$2.readyState,extra:babelHelpers["extends"]({},e,{originalError:b,code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_CREATE_ERROR.toString()})});throw f})};b.getReadyState=function(){return this.$2.readyState};b.getMediaSource=function(){return this.$2};b.notifyEndOfStream=function(a,b){var d=this,e=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$3.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceended",function(){e.resolve()}));this.$8.push(function(c){if(c.readyState==="open"){var e=d.$5.getOperationLogger("end_of_stream");e.setInitiator(a).setReason(b);e.log();c.endOfStream()}});this.$28();return e.getPromise()};b.updateDuration=function(a,b){var e=this,f=this.$2.duration;if(Number.isFinite(f)&&(!b||f>=a))return;this.$8.push(function(b){b.duration!==f&&!(isNaN(b.duration)&&isNaN(f))&&c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:"mediaSource duration discrepancy: "+b.duration+" != "+f}),"MediaSourceManager updateDuration","warn");if(a<b.duration)return;e.$5.getOperationLogger("media_source_update_duration").setMediaSourcePreviousDuration(b.duration).setMediaSourceNewDuration(a).log();b.duration=a});this.$28();return};b.detach=function(){this.$18&&(c("oz-player/shims/ozClearTimeout")(this.$18),this.$18=null);this.$5.getOperationLogger("source_buffer_detach").unsetMediaSourceSourceBuffers();this.$24(null);for(var a=0;a<this.$2.sourceBuffers.length;a++){var b=this.$2.sourceBuffers[a];this.$2.removeSourceBuffer(b)}this.$3.release();this.$3.engage();this.$4.release();this.$4.engage();this.$8=[];this.$10=!1;this.$12=!0};b.$32=function(){return!this.$31()&&this.$2.readyState==="open"&&!this.$10&&!this.$12};b.$31=function(){return this.$6.some(function(a){return a.getIsUpdating()})};b.onError=function(a){return this.$20.onError(a)};return a}();g["default"]=a}),98);
__d("oz-player/media_source/OzMediaSeekableRangeManager",["oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var d=this;this.$5=function(a){a===void 0&&(a=!0);var b=d.$2;if(!b)return;b=b.getTimeRanges();if(!b.length)return;b=b[b.length-1];d.$1.updateDuration(b.endTime,a)};this.$1=a;this.$3=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=b}var b=a.prototype;b.setTimeRangeProvider=function(a){this.$3.release(),this.$3.engage(),this.$3.addSubscriptions(a.addUpdateListener(this.$5)),this.$2=a};b.listenToMediaStreamInitAppended=function(a){var b=this;return a.addListener("initAppended",function(){b.$5(!1)})};b.destroy=function(){this.$3.release()};return a}();g["default"]=a}),98);
__d("oz-player/networks/OzCreateErrorStream",["oz-player/shims/OzStreams"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new(d("oz-player/shims/OzStreams").OzReadableStream)({pull:function(b){b.error(a)}})}g["default"]=a}),98);
__d("oz-player/shims/OzFetchAPI",[],(function(a,b,c,d,e,f){"use strict";b=function(b,c){return a.fetch(b,c)};c=function(b,c){return new a.Response(b,c)};f.fetch=b;f.Response=c}),66);
__d("oz-player/networks/FetchWithTimeout",["oz-player/shims/OzFetchAPI","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";function b(b,e,f,g){if(!d("oz-player/shims/OzFetchAPI").fetch)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"fetch api is missing"});var h=null;if("AbortController"in a&&f!=null&&f!=0){var i=new AbortController();h=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){return i.abort()},f);f={credentials:e,signal:i.signal}}else f={credentials:e};g!=null&&(f=babelHelpers["extends"]({},f,{referrer:g}));return d("oz-player/shims/OzFetchAPI").fetch(b,f).then(function(a){c("oz-player/shims/ozClearTimeout")(h);return a})}g["default"]=b}),98);
__d("oz-player/networks/OzHTTPHeaders",["oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";d=function(){function a(){this.$1=new Map()}var b=a.prototype;b.append=function(a,b){a=a.toLowerCase();var c=this.$1.get(a);c!=null?this.$1.set(a,c+", "+b):this.$1.set(a,b)};b.get=function(a){a=a.toLowerCase();a=this.$1.get(a);return(a=a)!=null?a:null};b.entries=function(){return this.$1.entries()};b.has=function(a){return this.get(a)!==null};return a}();e=a.Headers;f=e&&e.prototype;var h=e&&f&&typeof f.append==="function"&&typeof f.entries==="function"&&typeof f.get==="function"&&typeof f.has==="function"?e:d;function b(a){if(a==null)return null;if(typeof a==="object"&&typeof a.append==="function"&&typeof a.get==="function"&&typeof a.has==="function")if(typeof a.entries==="function")return a;else if(typeof a.forEach==="function"){var b=new h();a.forEach(function(a,c){b.append(c,a)});return b}c("oz-player/shims/ozvariant")(!1,"Malformed Headers object: %s %s",typeof a,String(a));return null}g.OzHTTPHeaders=h;g.maybeConvertHeadersToOzHTTPHeaders=b}),98);
__d("oz-player/utils/arrayBuffer2OzReadableStream",["oz-player/shims/OzStreams"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new(d("oz-player/shims/OzStreams").OzReadableStream)({start:function(b){var c=new Uint8Array(a);b.enqueue(c);b.close()}})}g["default"]=a}),98);
__d("oz-player/utils/maybeConvertReadableStreamToOzReadableStream",["asyncToGeneratorRuntime","oz-player/shims/OzStreams"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(!d("oz-player/shims/OzStreams").OzReadableStreamIsPolyfilled)return a;var c=a.getReader();return new(d("oz-player/shims/OzStreams").OzReadableStream)({start:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){while(!0){var b=(yield c.read());if(b.done)break;a.enqueue(b.value)}a.close()});function d(b){return a.apply(this,arguments)}return d}()})}g["default"]=a}),98);
__d("oz-player/utils/processFetchResponse",["oz-player/networks/OzHTTPHeaders","oz-player/shims/OzMaybeNativePromise","oz-player/utils/arrayBuffer2OzReadableStream","oz-player/utils/maybeConvertReadableStreamToOzReadableStream"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.body,e=a.ok,f=a.status,g=a.headers;return b!=null?c("oz-player/shims/OzMaybeNativePromise").resolve({ok:e,status:f,headers:d("oz-player/networks/OzHTTPHeaders").maybeConvertHeadersToOzHTTPHeaders(g),body:c("oz-player/utils/maybeConvertReadableStreamToOzReadableStream")(b),arrayBuffer:function(){return a.arrayBuffer()}}):a.arrayBuffer().then(function(a){return{ok:e,status:f,headers:d("oz-player/networks/OzHTTPHeaders").maybeConvertHeadersToOzHTTPHeaders(g),body:c("oz-player/utils/arrayBuffer2OzReadableStream")(a),arrayBuffer:function(){return c("oz-player/shims/OzMaybeNativePromise").resolve(a)}}})}g["default"]=a}),98);
__d("oz-player/networks/OzFetchRequestImplementation",["oz-player/networks/FetchWithTimeout","oz-player/utils/processFetchResponse"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e,f,g,h,i){f=d?d.networkTimeoutMs:null;g=c("oz-player/networks/FetchWithTimeout")(a,b.credentials,f);return g.then(function(a){var b=a.ok,d=a.status,f=a.headers;return e!=null&&!b&&typeof a.text==="function"?a.text().then(function(c){return{ok:b,status:d,headers:f,body:c,arrayBuffer:function(){return a.arrayBuffer()}}}):c("oz-player/utils/processFetchResponse")(a)})}b=a;d=b;g["default"]=d}),98);
__d("oz-player/networks/withRetries",["Promise","asyncToGeneratorRuntime","oz-player/shims/ozSetTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,d,e){return new(h||(h=b("Promise")))(function(f,g){function h(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){try{f(yield a())}catch(a){if(b>0){var i=typeof e==="function"?e(d-b):e;c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){h(b-1)},i)}else g(a)}});return i.apply(this,arguments)}h(d)})}g["default"]=a}),98);
__d("oz-player/networks/OzFetchWithCache",["oz-player/networks/OzFetchRequestImplementation","oz-player/networks/withRetries","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzErrorUtils","oz-player/utils/arrayBuffer2OzReadableStream","oz-player/utils/processFetchResponse"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.config,e=a.url,f=a.http,g=a.overrideOzRequestImplementation,h=a.options,i=a.prefetchCache,j=a.mediaStreamType,k=a.onPerfEntryAvailable,l=a.dataAppendedCallback,m=a.dataAppendedErrorCallback,n=g!=null?function(){return g.apply(void 0,arguments)}:c("oz-player/networks/OzFetchRequestImplementation");a=i?i.getCacheValue(e):null;i=a;a=!1;if(i)a=!0,i=i.then(function(a){if(a.initiator==="FETCH"){var b=a.response,e=b.ok,f=b.status,g=b.headers;return!e&&typeof a.response.text==="function"?a.response.text().then(function(b){return{ok:!1,status:f,headers:g,body:b,arrayBuffer:function(){return a.response.arrayBuffer()}}}):c("oz-player/utils/processFetchResponse")(a.response)}else if(a.initiator==="XHR_REQUEST"){b=c("oz-player/utils/arrayBuffer2OzReadableStream")(a.response);return{body:b,status:200,headers:null,ok:!0,arrayBuffer:function(){return c("oz-player/shims/OzMaybeNativePromise").resolve(a.response)}}}else throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_UNEXPECTED_CACHE_INITIATOR",description:"Unable to handle request initiator: "+a.initiator})})["catch"](function(a){return n(e,f,null,null,j,k,l,m)});else{var o;o=(o=h==null?void 0:h.retryAttempts_SIDX_USE_ONLY)!=null?o:0;if(o>0){var p;p=(p=h==null?void 0:h.retryTimeoutMs_SIDX_USE_ONLY)!=null?p:100;i=c("oz-player/networks/withRetries")(function(){return n(e,f,h,b,j,k,l,m)},o,p)}else i=n(e,f,h,b,j,k,l,m)}return{promise:i,retrievedFromCache:a}}g["default"]=a}),98);
__d("oz-player/networks/OzNetworkRequestStream",["oz-player/networks/OzCreateErrorStream","oz-player/networks/OzFetchWithCache","oz-player/shims/ozvariant","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorUtils","oz-player/utils/OzResourceTimingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$8=!1;var b=a.debugName,c=a.config,d=a.baseUri,e=a.baseUriDecisionTime,f=a.options,g=a.requestParamCreator,h=a.networkRequestStreamHandlers,i=a.overrideOzRequestImplementation,j=a.prefetchCache,k=a.networkRequestStreamRetryHandler,l=a.dynamicVideoLibrary,m=a.mediaStreamType,n=a.dataAppendedCallback;a=a.dataAppendedErrorCallback;this.$1=b;this.$2=d;this.$3=f;this.$4=g;this.$10=(b=h)!=null?b:[];this.$11=k;this.$9=i;this.$12=j;this.$13=c;this.$14=l;this.$15=e;this.$16=m;this.$17=n;this.$18=a}var b=a.prototype;b.$19=function(a){var b=this;a=this.$4.createRequestParam(this.$2,a);var d=a.uri;a=a.http;d=d.toString();this.$5=d;a=c("oz-player/networks/OzFetchWithCache")({config:this.$13,url:d,http:a,overrideOzRequestImplementation:this.$9,options:this.$3,prefetchCache:this.$12,mediaStreamType:this.$16,onPerfEntryAvailable:function(a){b.$20(a)},dataAppendedCallback:this.$17,dataAppendedErrorCallback:this.$18});var e=a.promise;a=a.retrievedFromCache;this.$8=a;return{requestPromise:e,requestUrl:d}};b.startStream=function(a){var b=this,e=this.$19(a),f=e.requestPromise,g=e.requestUrl,h=g,i=Date.now();return f.then(function(e){var f;(f=b.$14)==null?void 0:f.updateWithResponse(g,i,b.$15,e);b.$7=e;if(b.$11!=null&&e.ok===!1)return b.$11(e,function(){var d=b.$19(a),c=d.requestPromise;d=d.requestUrl;h=d;return c},h)["catch"](function(a){throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR",description:String(a),extra:{originalError:a,code:c("oz-player/utils/OzCustomErrorCode").NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR,url:h}})});else return e}).then(function(a){var e=[];for(var f=0;f<b.$10.length;f++)try{var g=b.$10[f].onResponse(a,h);g&&e.push(g)}catch(a){g=a;return c("oz-player/networks/OzCreateErrorStream")(g)}g=a.body;f=a.headers;var i=a.ok;a=a.status;if(!i)return c("oz-player/networks/OzCreateErrorStream")(d("oz-player/utils/OzErrorUtils").createOzNetworkError({description:"OzNetworkRequestStream("+b.$1+") HTTP status not OK",responseStatus:a,responseHeaders:f,requestUrl:h,responseBody:typeof g==="string"?g:void 0}));typeof g!=="string"&&typeof g.getReader==="function"||c("oz-player/shims/ozvariant")(0,3287);i=g;for(a=0;a<e.length;a++)i=i.pipeThrough(e[a]);return i},function(a){var e=[];for(var f=0;f<b.$10.length;f++)try{var g=b.$10[f].onError(a,h);g&&e.push(g)}catch(a){g=a;return c("oz-player/networks/OzCreateErrorStream")(g)}if(a instanceof TypeError){g=c("oz-player/networks/OzCreateErrorStream")(d("oz-player/utils/OzErrorUtils").createOzNetworkError({description:"OzNetworkRequestStream("+b.$1+") TypeError: "+a.message,responseStatus:0,responseHeaders:null,requestUrl:h}));for(f=0;f<e.length;f++)g=g.pipeThrough(e[f]);return g}throw a})["catch"](function(a){if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR")throw a;if(a.name==="AbortError"){var b=a.message;return c("oz-player/networks/OzCreateErrorStream")({type:a.name,status:a.code,url:h,message:b})}return c("oz-player/networks/OzCreateErrorStream")({type:"stream_processing",status:0,url:h,message:"Stream processing error. "+a})})};b.$20=function(a){this.$6=a};b.getLastPerformanceEntry=function(){if(this.$6!=null)return this.$6;return this.$5==null?null:d("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(this.$5)};b.getLastRequestUrl=function(){return this.$5};b.getLastResponse=function(){return this.$7};b.retrievedFromCache=function(){return this.$8};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzByteRange",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.startByte===b.startByte}function b(a,b){return b.endByte===null?!1:a.startByte===b.endByte+1}function c(a,b){return a.startByte<b.startByte?!1:b.endByte==null||b.endByte>=a.startByte}function d(a,b){a=a;b=b;if(b.startByte<a.startByte){var c=a;a=b;b=c}if(a.endByte==null)return{startByte:a.startByte,endByte:null};if(b.startByte>a.endByte+1)return null;c=b.endByte==null||b.endByte>a.endByte?b.endByte:a.endByte;return{startByte:a.startByte,endByte:c}}function e(a,b){if(b.endByte==null)return null;if(a.startByte>b.endByte)return{startByte:a.startByte,endByte:a.endByte};return a.endByte!=null&&a.endByte<=b.endByte?null:{startByte:b.endByte+1,endByte:a.endByte}}function g(a){return a.endByte==null?null:a.endByte-a.startByte+1}f.startsAtSame=a;f.startsImmediateAfter=b;f.startsDuring=c;f.union=d;f.disjoinAfter=e;f.getLength=g}),66);
__d("oz-player/networks/OzProducerInterruptedError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(babelHelpers.wrapNativeSuper(Error));f["default"]=a}),66);
__d("oz-player/networks/OzDeferredBuffer",["oz-player/networks/OzProducerInterruptedError","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){a===void 0&&(a={});this.$2=[];this.$3=!1;this.$5=0;a=a;a=a.disableArrayShift;this.$1=!!a}var b=a.prototype;b.produce=function(a){this.$6(a)};b.signalProducerInterruption=function(){this.$6(new(c("oz-player/networks/OzProducerInterruptedError"))("producer interrupted"))};b.consume=function(a){var b=this;if(this.$3)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DEFERRED_BUFFER",description:"A buffer can only be consumed by one client at a time"});this.$3=!0;var e=c("oz-player/shims/OzMaybeNativePromise").resolve();this.isEmpty()&&(this.$4=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),e=this.$4.getPromise());return e.then(function(){if(b.$1){if(b.$2[b.$5]===void 0)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DEFERRED_BUFFER",description:"buffer has no value at position "+b.$5})}else if(b.$2.length===0)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_DEFERRED_BUFFER",description:"buffer length must not be 0"});b.$4=null;b.$3=!1;var c=b.$1?b.$7(a):b.$8(a);if(c instanceof Uint8Array)return c;throw c})};b.$6=function(a){this.$2.push(a),this.$4&&this.$4.resolve()};b.$7=function(a){var b=this.$2[this.$5];if(b===void 0)return new Uint8Array([]);b=b;if(!(b instanceof Uint8Array)){this.$2[this.$5]=void 0;this.$5++;return b}if(a!==void 0&&b.length>a){var c=b.slice(a);b=b.slice(0,a);this.$2[this.$5]=c}else this.$2[this.$5]=void 0,this.$5++;return b};b.$8=function(a){if(this.$2.length===0)return new Uint8Array([]);var b=this.$2[0];if(!(b instanceof Uint8Array)){this.$2.shift();return b}if(a!==void 0&&b.length>a){var c=b.slice(a);b=b.slice(0,a);this.$2[0]=c}else this.$2.shift();return b};b.isEmpty=function(){return this.$1?this.$2[this.$5]===void 0:this.$2.length===0};return a}();g["default"]=a}),98);
__d("oz-player/utils/ozPipeErrorTo",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){try{a==null?void 0:a.error(b)}catch(a){}}f["default"]=a}),66);
__d("oz-player/networks/OzPausableRangeStream",["oz-player/manifests/OzByteRange","oz-player/networks/OzDeferredBuffer","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzErrorUtils","oz-player/utils/ozPipeErrorTo"],(function(a,b,c,d,e,f,g){"use strict";function h(){return d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAM",description:"Upstream has an inconsistent range"})}var i=function(){function a(){this.$1=0}var b=a.prototype;b.setBytesToSkip=function(a){this.$1=a};b.setBytesSkipped=function(a){this.$1-=a};b.getBytesToSkip=function(){return this.$1};b.hasMoreBytesToSkip=function(){return this.$1>0};return a}();a=function(){function a(b,d,e,f,g){var j=this;this.$5=!1;this.$7=0;this.$8=0;this.$13=!1;this.$14=new i();this.$15=!1;this.$16=!1;this.$17=!1;this.startStream=function(){j.$13=!0;var b={startByte:j.$1.startByte,endByte:j.$1.endByte};!j.$15?b.startByte+=j.$8:j.$8&&(j.$3.produce("skip_buffered_bytes"),j.$8=0);var d=j.$4;return j.$2.startStream(b).then(function(b){b.pipeTo(j.$16?d:j.$4).then(function(){j.$12&&j.$12.resolve("stream_done")})["catch"](function(b){j.$12&&!j.$12.isSettled()&&(j.$16&&b===a.STREAM_PAUSED?j.$12.resolve("stream_paused"):j.$12.reject(b))});j.$12=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));return{statusPromise:j.$12.getPromise()}})};this.$18=b;this.$19=d;this.$1=e;this.$2=f;b=g||{};d=b.fixStreamingUndefinedEndByte;e=b.disableDeferredBufferArrayShift;f=b.enablePausableStreamResumeFromStartDangerously;g=b.fixPausePreReadableStream;b=b.throwErrorWhenAborted;this.$11=!!d;this.$15=!!f;this.$16=!!g;this.$17=!!b;this.$3=new(c("oz-player/networks/OzDeferredBuffer"))({disableArrayShift:!!e});this.$6=new this.$18({start:function(a){j.$10=a},pull:function(a){if((j.$11&&j.$1.endByte===null&&j.$5||j.$7===j.$20())&&j.$3.isEmpty()){a.close();return c("oz-player/shims/OzMaybeNativePromise").resolve()}var b=function b(){var d=j.$14.hasMoreBytesToSkip()?j.$14.getBytesToSkip():void 0;return j.$3.consume(d).then(function(d){if(j.$14.hasMoreBytesToSkip()){j.$14.setBytesSkipped(d.length);return b()}j.$7+=d.length;var e=j.$20();e!==null&&j.$7>(e||0)&&c("oz-player/utils/ozPipeErrorTo")(j.$10,h());a.enqueue(d)})["catch"](function(a){if(a==="skip_buffered_bytes"){j.$14.setBytesToSkip(j.$7);return b()}throw a})};return b()},cancel:function(a){j.$12&&j.$12.resolve("stream_cancelled"),c("oz-player/utils/ozPipeErrorTo")(j.$9,a)}});this.$4=this.$21()}var b=a.prototype;b.$20=function(){var a=this.$1,b=a.startByte;a=a.endByte;return a!=null?a-b+1:null};b.$21=function(){var a=this;return new this.$19({start:function(b){a.$9=b},write:function(b){a.$3.produce(b),a.$8+=b.length},close:function(){a.$5=!0;var b=a.$1,d=b.endByte;b=b.startByte;a.$11&&d===null&&a.$3.produce(new Uint8Array([]));d!==null&&a.$8!==(d||0)-b+1&&c("oz-player/utils/ozPipeErrorTo")(a.$10,h())},abort:function(b){a.$12&&(a.$17?a.$12.reject(b):a.$12.resolve("stream_aborted")),c("oz-player/utils/ozPipeErrorTo")(a.$10,b)}})};b.getStream=function(){return this.$6};b.pauseStream=function(){c("oz-player/utils/ozPipeErrorTo")(this.$9,a.STREAM_PAUSED),this.$12&&this.$12.resolve("stream_paused"),this.$4=this.$21()};b.getByteRange=function(){return this.$1};b.getBytesStreamed=function(){return this.$7};b.tryConcatByteRange=function(a){if(this.$13||!d("oz-player/manifests/OzByteRange").startsImmediateAfter(a,this.$1))return!1;this.$1={startByte:this.$1.startByte,endByte:a.endByte};return!0};return a}();a.STREAM_PAUSED="streamPaused";g["default"]=a}),98);
__d("oz-player/networks/RequestParamCreator",["oz-player/shims/OzURI"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b){var d=this;this.createRequestParam=function(a,b){var e=new(c("oz-player/shims/OzURI"))(a.toString());if(b){a=b.startByte;var f=b.endByte;a===0&&f==null||(e.addQueryData({bytestart:b.startByte}),f!=null&&e.addQueryData({byteend:f}))}if(d.$2){var g=d.$2(e);g&&Object.keys(g).forEach(function(a){var b=g[a];e.addQueryData(a,b)})}a=d.$1&&d.$1(e)?"include":"same-origin";return{uri:e,http:{credentials:a}}};this.$1=a;this.$2=b};g["default"]=a}),98);
__d("oz-player/networks/getOzSegmentStreamableRange",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(!a.length)return null;var b=a[0].getURI().toString(),c=a[0].getByteRange();if(!c)return null;var d=c;for(var e=1;e<a.length;e++){var f=a[e];if(f.getURI().toString()!==b)return null;f=f.getByteRange();if(!d||!f)return null;if(d.endByte===null||f.startByte!==d.endByte+1)return null;d=f}return{startByte:c.startByte,endByte:d.endByte}}f["default"]=a}),66);
__d("oz-player/utils/OzNetworkRequestLoggingUtils",["oz-player/shims/OzNetworkDiagnostics","oz-player/utils/OzResourceTimingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){return a?parseInt(a.get("content-length"),10):null},i=function(a){return a?a.get("x-fb-fna-hit"):null},j=function(a){return a?a.get("x-fb-edge-hit"):null},k=function(a){return a?a.get("x-fb-origin-hit"):null},l=function(a){return a?parseInt(a.get("x-fb-dynamic-latest-segment-id"),10):null},m=function(a,b){b=d("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(b);b&&a.setTimeToFirstByte(Math.round(b.responseStart-b.startTime)).setTimeToLastByte(Math.round(b.responseEnd-b.startTime)).setTimeToRequestStart(Math.round(b.requestStart-b.startTime))};a=function(a,b,d,e,f,g){d.length&&a.setSegmentCount(d.length),b!=null&&b!==""&&m(a,String(b)),a.setResource(b!=null&&b!==""?b:null).setInitiator("fetch").setTimeToRequestSent(Math.round(Math.floor(e))).setLiveheadSeqNumHeader(l(g==null?void 0:g.headers)).setContentLengthHeader(h(g==null?void 0:g.headers)).setEdgeHitHeader(j(g==null?void 0:g.headers)).setOriginHitHeader(k(g==null?void 0:g.headers)).setFNAHitHeader(i(g==null?void 0:g.headers)).setResponseTimeMsHeader(c("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(g==null?void 0:g.headers)).setUserInfo({segmentPTSHeader:String(c("oz-player/shims/OzNetworkDiagnostics").getDvlSegmentPTS(g==null?void 0:g.headers))}).setCode(g==null?void 0:g.status).setLength(f)};b=function(a,b,d,e,f,g,i){b!=null&&b!==""&&m(a,String(b)),a.setResource(b!=null&&b!==""?b:null).setLiveheadSeqNumHeader(l(e==null?void 0:e.headers)).setContentLengthHeader(h(e==null?void 0:e.headers)).setEdgeHitHeader(j(e==null?void 0:e.headers)).setOriginHitHeader(k(e==null?void 0:e.headers)).setResponseTimeMsHeader(c("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(e==null?void 0:e.headers)).setCode(e==null?void 0:e.status).setLength(d).setClientTimeBegin(f).setClientTimeDuration(g-f).setClientTimeEnd(g).setUserInfo(i!=null&&i>0?{chunkSize:String(i)}:null)};g.setPerformanceLoggingAttributes=m;g.setFetchStreamLoggingAttributes=a;g.setBandwidthSampledLoggingAttributes=b}),98);
__d("oz-player/networks/OzNetworkManager",["oz-player/loggings/OzLoggingUtils","oz-player/networks/OzNetworkRequestStream","oz-player/networks/OzPausableRangeStream","oz-player/networks/RequestParamCreator","oz-player/networks/getOzSegmentStreamableRange","oz-player/shims/OzStreams","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzNetworkRequestLoggingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$9=null;var b=a.config,d=a.prefetchCache,e=a.networkRequestStreamHandlers,f=a.getOverrideOzRequestImplementation,g=a.getShouldIncludeCredentials,h=a.getCustomRequestParametersForURI,i=a.networkRequestStreamRetryHandler,j=a.setCustomFetchStreamLoggingAttributes,k=a.dynamicVideoLibrary,l=a.configureCustomRequestParametersForSegment;a=a.onResourceTimingBufferFull;this.$2=b;this.$7=g;this.$8=h;this.$1=new(c("oz-player/networks/RequestParamCreator"))(this.$7,this.$8);this.$3=d;this.$4=e;this.$5=i;this.$6=f;this.$9=j;this.$10=k;this.$11=l;this.$12=a}var b=a.prototype;b.destroy=function(){};b.request=function(a){var b=a.debugName,d=a.segments,e=a.pipeThroughRangeStreamProviders,f=a.loggerProvider,g=a.requestOptions,h=a.mediaStreamType,i=a.dataAppendedCallback;a=a.dataAppendedErrorCallback;d.length>0||c("oz-player/shims/ozvariant")(0,212);var j=c("oz-player/networks/getOzSegmentStreamableRange")(d)||{startByte:0,endByte:null},k=this.$6?this.$6():null,l=this.$13(d[0]);b=new(c("oz-player/networks/OzNetworkRequestStream"))({debugName:b,config:this.$2,baseUri:l,baseUriDecisionTime:null,options:g,requestParamCreator:this.$1,networkRequestStreamHandlers:this.$4,overrideOzRequestImplementation:k,prefetchCache:this.$3,networkRequestStreamRetryHandler:this.$5,mediaStreamType:h,dataAppendedCallback:i,dataAppendedErrorCallback:a});return this.$14(j,b,e,f,d)};b.createPausableStream=function(a){var b=a.debugName,d=a.segments,e=a.pipeThroughRangeStreamProviders,f=a.loggerProvider,g=a.mediaStreamType,h=a.dataAppendedCallback;a=a.dataAppendedErrorCallback;d.length>0||c("oz-player/shims/ozvariant")(0,212);var i=c("oz-player/networks/getOzSegmentStreamableRange")(d)||{startByte:0,endByte:null},j=null,k=this.$2.getNumber("network_seg_timeout_ms");k>0&&(j={networkTimeoutMs:k});k=this.$6?this.$6():null;var l=new(c("oz-player/networks/OzNetworkRequestStream"))({debugName:b,config:this.$2,baseUri:this.$13(d[0]),baseUriDecisionTime:d[0].getOptions().getSegmentNumDecisionTime(),options:j,requestParamCreator:this.$1,networkRequestStreamHandlers:this.$4,overrideOzRequestImplementation:k,prefetchCache:this.$3,networkRequestStreamRetryHandler:this.$5,dynamicVideoLibrary:this.$10,mediaStreamType:g,dataAppendedCallback:h,dataAppendedErrorCallback:a});return{pausableStream:this.$15(i,l,e||null,f),loggingPayloads:{getRequestUrl:function(){return l.getLastRequestUrl()||null},segments:d,getResponse:function(){return l.getLastResponse()}}}};b.requestRawUrl=function(a){var b=a.debugName,d=a.url,e=a.options;a=a.loggerProvider;var f=this.$6?this.$6():null;b=new(c("oz-player/networks/OzNetworkRequestStream"))({debugName:b,config:this.$2,baseUri:new(c("oz-player/shims/OzURI"))(d),baseUriDecisionTime:null,options:e,requestParamCreator:this.$1,networkRequestStreamHandlers:this.$4,overrideOzRequestImplementation:f,prefetchCache:this.$3,networkRequestStreamRetryHandler:this.$5,dynamicVideoLibrary:this.$10,mediaStreamType:null,dataAppendedCallback:null,dataAppendedErrorCallback:null});d={startByte:0,endByte:null};return this.$14(d,b,[],a)};b.$15=function(a,b,e,f){b=b;if(e!=null)for(var g=0;g<e.length;g++){var h=e[g];b=h(this.$2,b,f,this.$12)}return new(c("oz-player/networks/OzPausableRangeStream"))(d("oz-player/shims/OzStreams").OzReadableStream,d("oz-player/shims/OzStreams").OzWritableStream,a,b,{fixStreamingUndefinedEndByte:!0,enablePausableStreamResumeFromStartDangerously:!0,fixPausePreReadableStream:!0,throwErrorWhenAborted:!0})};b.$14=function(a,b,c,e,f){var g=this;f===void 0&&(f=[]);var h=this.$15(a,b,c,e);a=h.startStream();var i=this.$16(a);if(e){c=function(a){d("oz-player/utils/OzNetworkRequestLoggingUtils").setFetchStreamLoggingAttributes(a,b.getLastRequestUrl(),f,0,h.getBytesStreamed(),b.getLastResponse());var c=g.$9;c&&c(a,b.getLastRequestUrl(),b.getLastResponse())};d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(i,e,"fetch_stream",c,c)}return{getStream:function(){return h.getStream()},cancel:function(){return h.pauseStream()},getStatusChangePromise:function(){return i}}};b.$16=function(a){return a.then(function(a){a=a.statusPromise;return a.then(function(a){return"done"})})};b.$13=function(a){var b=this.$11,d=new(c("oz-player/shims/OzURI"))(a.getURI().toString());if(b){var e=b(a);e&&Object.keys(e).forEach(function(a){var b=e[a];d.addQueryData(a,b)})}return d};a.getStreamableSegmentsRange=function(a){if(!a.length)return[];return!c("oz-player/networks/getOzSegmentStreamableRange")(a)?[a[0]]:a.slice(0)};return a}();g["default"]=a}),98);
__d("oz-player/manifests/Mpd",["oz-player/shims/OzEventEmitter","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i){var j;j=a.call(this)||this;j.$Mpd$p_9=!1;j.$Mpd$p_1=b;j.$Mpd$p_5=g;j.$Mpd$p_2=c;j.$Mpd$p_3=d;j.$Mpd$p_4=e;j.$Mpd$p_6=f;j.$Mpd$p_7=h;j.$Mpd$p_8=i;return j}var c=b.prototype;c.markRefreshed=function(){this.$Mpd$p_10=Date.now()};c.getRefreshDate=function(){return this.$Mpd$p_10};c.updateLocation=function(a){this.$Mpd$p_6=a,this.$Mpd$p_9=!0,this.emit("locationUpdated")};c.getLocation=function(){return this.$Mpd$p_6};c.getMinimumUpdatePeriod=function(){return this.$Mpd$p_5};c.getVideoRepresentations=function(){return this.$Mpd$p_2};c.getVideoRepresentationsByLang=function(a){var b=a==null?this.$Mpd$p_2.filter(function(a){return a.getLang()==null}):this.$Mpd$p_2.filter(function(b){return b.getLang()===a});return b.length>0?b:null};c.getAudioRepresentations=function(){return this.$Mpd$p_3};c.getApplicationRepresentations=function(){return this.$Mpd$p_4};c.getCustomField=function(a){var b=this.$Mpd$p_7.get(a);if(!b)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_MPD_PARSER",description:"Custom parser not specified for field "+a});try{return b(this.$Mpd$p_1)}catch(a){return null}};c.isStaticMpd=function(){return this.$Mpd$p_8};c.updateWith=function(a){this.$Mpd$p_9&&(this.$Mpd$p_9=!1,this.$Mpd$p_2.splice(0,this.$Mpd$p_2.length),this.$Mpd$p_3.splice(0,this.$Mpd$p_3.length),this.$Mpd$p_4.splice(0,this.$Mpd$p_4.length)),this.$Mpd$p_1=a.$Mpd$p_1,this.$Mpd$p_11(this.$Mpd$p_2,a.getVideoRepresentations()),this.$Mpd$p_11(this.$Mpd$p_3,a.getAudioRepresentations()),this.$Mpd$p_11(this.$Mpd$p_4,a.getApplicationRepresentations()),this.$Mpd$p_8=a.isStaticMpd(),this.$Mpd$p_5=a.getMinimumUpdatePeriod(),this.emit("updated")};c.blockTimeRange=function(a){this.$Mpd$p_2.forEach(function(b){return b.blockTimeRange(a)}),this.$Mpd$p_3.forEach(function(b){return b.blockTimeRange(a)}),this.$Mpd$p_4.forEach(function(b){return b.blockTimeRange(a)})};c.unblockTimeRange=function(){this.blockTimeRange({startTime:0,endTime:0})};c.$Mpd$p_11=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=!1;for(var f=0;f<a.length;f++){var g=a[f];if(d.getID()===g.getID()){g.updateWith(d);e=!0;break}}e||a.push(d)}};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/manifests/OzApplicationRepresentation",["oz-player/manifests/OzRepresentationBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c("oz-player/manifests/OzRepresentationBase"));g["default"]=a}),98);
__d("oz-player/parsers/OzSegmentTemplateParser",["oz-player/manifests/OzSegmentOptions","oz-player/parsers/OzDefaultSegmentTimelineParser","oz-player/shims/OzURI","oz-player/utils/OzUrlHelper"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a,b){this.$3=new(c("oz-player/manifests/OzSegmentOptions"))(),this.$2=a,this.$1=b}var b=a.prototype;b.getData=function(){return this.$1};b.getTimeRange=function(){return{startTime:0,endTime:0}};b.getByteRange=function(){return null};b.getURI=function(){return this.$2};b.getSequenceNumber=function(){return null};b.getOptions=function(){return this.$3};return a}();a=function(){function a(a,b,d,e,f){this.$2=d,this.$1=b,this.$3=a,e?this.$4=e:this.$4=new(c("oz-player/parsers/OzDefaultSegmentTimelineParser"))(),this.$5=f}var b=a.prototype;b.parseInitializationSegment=function(){var a=d("oz-player/utils/OzUrlHelper").joinUrlPaths(this.$2.baseUrl,this.$1.$.initialization);return new h(new(c("oz-player/shims/OzURI"))(a),this.$5)};b.parseSegmentsContainer=function(){return this.$4.parseSegmentsContainer(this.$3,this.$2,this.$1)};return a}();g["default"]=a}),98);
__d("oz-player/manifests/OzZeroTimeRangeSegment",["oz-player/manifests/OzSegmentOptions"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){this.$4=new(c("oz-player/manifests/OzSegmentOptions"))(),this.$1=a,this.$2=b,this.$3=d}var b=a.prototype;b.getData=function(){return null};b.getURI=function(){return this.$1};b.getTimeRange=function(){return{startTime:0,endTime:0}};b.getByteRange=function(){return{startByte:this.$2,endByte:this.$3}};b.getSequenceNumber=function(){return null};b.getOptions=function(){return this.$4};return a}();g["default"]=a}),98);
__d("oz-player/networks/OzNetworkRequestStreamBandwidthReporter",["oz-player/networks/OzTransformStream","oz-player/shims/OzNetworkDiagnostics","oz-player/utils/OzNetworkRequestLoggingUtils"],(function(a,b,c,d,e,f,g){"use strict";b=function(){function b(b){var d=this;this.$8=Date.now();this.$9=Date.now();this.$10=0;this.$11=0;this.$12=function(){};this.$13=function(){};this.$14=function(){};this.$16=new(c("oz-player/networks/OzTransformStream"))();this.$19=!1;this.$20=!1;this.$21=null;this.$22=function(a){d.$25();a.length!=null&&(d.$11+=a.length);d.$26();if(d.$18)return;d.$27()};this.$23=function(){if(d.$21!=null&&d.$21>0)return;var b=Date.now()-d.$8,c=d.$1.getLastPerformanceEntry();c&&d.$13(c.responseStart-c.requestStart,c.responseEnd-c.requestStart,d.$11);!c&&a.__isresourcetimingbufferfull&&d.$15&&d.$15();d.$3>0&&b>0&&d.$10===0&&d.$11>=d.$3&&d.$28(d.$11,b)};var e=b.stream,f=b.loggerProvider,g=b.byteCountPerSample,h=b.minimumBytesToSampleOnClose,i=b.minimumSampleDuration,j=b.maximumSampleBandwidth,k=b.useResponseTimeMs,l=b.responseTimeHandicapMs,m=b.ignoreOnStreamWriteSamples;b=b.onResourceTimingBufferFull;this.$1=e;this.$17=f;this.$2=g;this.$3=h;this.$4=i;this.$5=j;this.$6=k;this.$7=l;this.$18=m;this.$16.addListener("writableWrite",this.$22);this.$16.addListener("writableClose",this.$23);this.$15=b}var e=b.prototype;e.getTransformStream=function(){return this.$16};e.onBandwidthSample=function(a){this.$12=a};e.onNavigationTimingSample=function(a){this.$13=a};e.onEstimateFromHeaders=function(a){this.$14=a};e.$24=function(a,b,c){b=b-c;c=this.$17?this.$17.getOperationLogger("bandwidth_sampled"):null;if(c){var e=Date.now(),f=e-b;d("oz-player/utils/OzNetworkRequestLoggingUtils").setBandwidthSampledLoggingAttributes(c,this.$1.getLastRequestUrl(),a,this.$1.getLastResponse(),f,e,this.$21);c.log()}this.$12(a,b)};e.$29=function(a,b,c){if(b-c<=0)return!0;c=a*8/(b/1e3);return b<this.$4&&c>this.$5};e.$28=function(a,b){var d=this.$1.getLastResponse();d=this.$6?c("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(d==null?void 0:d.headers)||0:0;this.$29(a,b,d)||this.$24(a,b,Math.max(d-this.$7,0))};e.$25=function(){var a;a=(a=this.$1.getLastResponse())==null?void 0:a.headers;if(this.$20||a==null)return;this.$20=!0;a=c("oz-player/shims/OzNetworkDiagnostics").getBandwidthMeanEstimate(a);a!=null&&this.$14(a)};e.$26=function(){if(this.$19)return;if(this.$21==null){var a=this.$1.getLastResponse();this.$21=c("oz-player/shims/OzNetworkDiagnostics").getUsableResponseSizeForBandwidthEstimation(a==null?void 0:a.headers)||0}this.$21!=null&&this.$21>0&&this.$11>=this.$21&&(this.$19=!0,this.$28(this.$11,Date.now()-this.$9))};e.$27=function(){var a=Date.now(),b=a-this.$8;this.$2>0&&this.$11>=this.$10+this.$2&&!this.$29(this.$11,b,0)&&(this.$24(this.$11-this.$10,b,0),this.$8=a,this.$10=this.$11)};return b}();g["default"]=b}),98);
__d("oz-player/networks/bandwidth/pipeStreamThroughBandwidthEstimator",["oz-player/networks/OzNetworkRequestStreamBandwidthReporter"],(function(a,b,c,d,e,f,g){"use strict";var h=2e5;function a(a,b,d,e,f){return{startStream:function(g){var i=new(c("oz-player/networks/OzNetworkRequestStreamBandwidthReporter"))({stream:b,loggerProvider:d,byteCountPerSample:a.getNumber("byte_count_per_sample",h),minimumBytesToSampleOnClose:a.getNumber("minimum_bytes_to_sample_on_close",25e3),minimumSampleDuration:a.getNumber("minimum_bandwidth_sample_duration",10),maximumSampleBandwidth:a.getNumber("maximum_bandwidth_sample_bandwidth",1e8),useResponseTimeMs:a.getBool("bandwidth_use_response_time_adjustment",!1),responseTimeHandicapMs:a.getNumber("bandwidth_response_time_handicap",0),ignoreOnStreamWriteSamples:a.getBool("bandwidth_ignore_on_stream_write_samples",!1),onResourceTimingBufferFull:f});i.onBandwidthSample(function(a,b){e.addBandwidthSample(a,b)});i.onNavigationTimingSample(function(b,c,d){var f=a.getNumber("time_to_first_byte_ignore_above_threshold_ms",0);(f===0||b<=f)&&e.addNavigationTimingSample(b,c,d)});i.onEstimateFromHeaders(function(a){e.setBandwidthEstimateFromHeaders({meanEstimate:a})});return b.startStream(g).then(function(a){return b.retrievedFromCache()?a:a.pipeThrough(i.getTransformStream())})}}}g.pipeStreamThroughBandwidthEstimator=a}),98);
__d("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter",["oz-player/networks/OzBandwidthEstimator","oz-player/networks/OzNetworkRequestStream","oz-player/networks/bandwidth/pipeStreamThroughBandwidthEstimator"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return function(b,e,f,g){var h=a==="video";return e instanceof c("oz-player/networks/OzNetworkRequestStream")&&h?d("oz-player/networks/bandwidth/pipeStreamThroughBandwidthEstimator").pipeStreamThroughBandwidthEstimator(b.getLegacyConfig(),e,f,c("oz-player/networks/OzBandwidthEstimator"),g):e}}g["default"]=a}),98);
__d("oz-player/manifests/OzDataSegment",["oz-player/manifests/OzSegmentOptions"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f){this.$6=new(c("oz-player/manifests/OzSegmentOptions"))(),this.$1=a,this.$2=b,this.$3=d,this.$4=e,this.$5=f}var b=a.prototype;b.getData=function(){return null};b.getURI=function(){return this.$1};b.getTimeRange=function(){return{startTime:this.$2,endTime:this.$3}};b.getByteRange=function(){return{startByte:this.$4,endByte:this.$5}};b.getSequenceNumber=function(){return null};b.getOptions=function(){return this.$6};return a}();g["default"]=a}),98);
__d("oz-player/shims/www/OzDataViewReaderWWW",["DataViewReader"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("DataViewReader")}),98);
__d("oz-player/shims/OzDataViewReader",["oz-player/shims/www/OzDataViewReaderWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzDataViewReaderWWW")}),98);
/**
 * License: https://www.facebook.com/legal/license/Vkd8AdLnKqZ/
 */
__d("oz-player/parsers/OzMp4SidxParser",["oz-player/manifests/OzDataSegment","oz-player/manifests/OzSegmentOptions","oz-player/shims/OzDataViewReader","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=1936286840;function a(a,b,e,f){var g=new(c("oz-player/shims/OzDataViewReader"))(new DataView(f.buffer));f=g.readUint32();var i=g.readUint32();if(i!==h)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SIDX_PARSER",description:'Invalid box type, expected "sidx".'});f==1&&(f=g.readUint64());i=g.readUint8();g.skip(3);g.skip(4);var j=g.readUint32();if(!j)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SIDX_PARSER",description:"Invalid timescale."});var k;i==0?(i=g.readUint32(),k=g.readUint32()):(i=g.readUint64(),k=g.readUint64());g.skip(2);var l=g.readUint16(),m=i,n=e+f+k,o=0,p=a.getBool("sidx_parser_memory_optimization"),q=[];i=function(a){var e=g.readUint32(),f=(e&2147483648)>>>31;e=e&2147483647;var h=g.readUint32();g.readUint32();if(f==1)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SIDX_PARSER",description:"Heirarchical SIDXs are not supported."});var i=m/j,k=(m+h)/j;a===0&&(o=i);var l=n,r=l+e-1,s=new(c("oz-player/manifests/OzSegmentOptions"))();q.push(p?new(c("oz-player/manifests/OzDataSegment"))(b,i-o,k-o,l,r):{getData:function(){return null},getURI:function(){return b},getTimeRange:function(){return{startTime:i-o,endTime:k-o}},getByteRange:function(){return{startByte:l,endByte:r}},getSequenceNumber:function(){return null},getOptions:function(){return s}});m+=h;n+=e};for(e=0;e<l;e++)i(e);return q}g.parse=a}),98);
__d("oz-player/parsers/OzSidxSegmentsContainer",["oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.getSegmentByTime=function(a){var b=this.$1();for(var c=0;c<b.length;c++){var d=b[c],e=d.getTimeRange();if(e.startTime<=a&&e.endTime>a)return d}return null};b.getSegmentAfter=function(a){var b=this.$1(),c=b.findIndex(function(b){return b.getTimeRange().startTime===a.getTimeRange().startTime&&b.getTimeRange().endTime===a.getTimeRange().endTime});return c>=0&&c+1<b.length?b[c+1]:null};b.getPredictedSegmentAfter=function(a){return null};b.canPredict=function(){return!1};b.canApproximateId=function(){return!1};b.isEndingSegment=function(a){var b=this.$1();if(!b||!b.length)return!1;b=b[b.length-1].getTimeRange();a=a.getTimeRange();return b.startTime===a.startTime&&b.endTime===a.endTime};b.getSegment=function(a){return this.$1()[a]||null};b.updateWith=function(a){throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NOT_IMPLEMENTED_ERROR",description:"Not implemented: updatedWith"})};b.addUpdateListener=function(a){return this.$2.addListener("segment_updated",a)};b.getTimeRanges=function(){var a=this.$1();if(a.length===0)return[];else{var b=a[0];a=a[a.length-1];return[{startTime:b.getTimeRange().startTime,endTime:a.getTimeRange().endTime}]}};b.blockTimeRange=function(){};b.getEndingSegment=function(){var a=this.$1();return a.length>0?a[a.length-1]:null};b.getMaxGopSec=function(){return null};return a}();g["default"]=a}),98);
/**
 * License: https://www.facebook.com/legal/license/Vkd8AdLnKqZ/
 */
__d("oz-player/parsers/OzWebmSidxParser",["oz-player/manifests/OzDataSegment","oz-player/shims/OzDataViewReader","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";var h=440786851,i=408125543,j=357149030,k=2807729,l=17545,m=475249515,n=187,o=179,p=183,q=241,r=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])];function s(a,b){if(!a&&!b)return!0;if(!a||!b)return!1;if(a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0}var t=function(){function a(a,b){this.id=a,this.$1=b}var b=a.prototype;b.getOffset=function(){return this.$1.byteOffset};b.createParser=function(){return new u(this.$1)};b.getUint=function(){if(this.$1.byteLength>8)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(this.$1.byteLength==8&&this.$1.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");var a=0;for(var b=0;b<this.$1.byteLength;b++){var c=this.$1.getUint8(b);a=256*a+c}return a};b.getFloat=function(){if(this.$1.byteLength==4)return this.$1.getFloat32(0);else if(this.$1.byteLength==8)return this.$1.getFloat64(0);else throw new RangeError("EbmlElement: floating point numbers must be 4 or 8 bytes.")};return a}(),u=function(){function a(a){this.$1=a,this.$2=new(c("oz-player/shims/OzDataViewReader"))(this.$1)}var b=a.prototype;b.hasMoreData=function(){return this.$2.hasMoreData()};b.parseElement=function(){var b=this.$3(),c=this.$4(),d;a.$5(c)?d=this.$1.byteLength-this.$2.getCursor():d=a.$6(c);c=this.$2.getCursor()+d<=this.$1.byteLength?d:this.$1.byteLength-this.$2.getCursor();d=new DataView(this.$1.buffer,this.$1.byteOffset+this.$2.getCursor(),c);this.$2.skip(c);return new t(b,d)};b.$3=function(){var a=this.$4();if(a.length>7)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");var b=0;for(var c=0;c<a.length;c++)b=256*b+a[c];return b};b.$4=function(){var a=this.$2.readUint8(),b;for(b=1;b<=8;b++){var c=1<<8-b;if(a&c)break}if(b>8)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");c=new Uint8Array(b);c[0]=a;for(a=1;a<b;a++)c[a]=this.$2.readUint8();return c};a.$6=function(a){if(a.length==8&&a[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");var b=1<<8-a.length;b=a[0]&b-1;for(var c=1;c<a.length;c++)b=256*b+a[c];return b};a.$5=function(a){for(var b=0;b<r.length;b++)if(s(a,r[b]))return!0;return!1};return a}();function v(a){a=a.createParser();var b=1e6,c=null;while(a.hasMoreData()){var d=a.parseElement();d.id==k?b=d.getUint():d.id==l&&(c=d.getFloat())}if(c==null)return null;d=b/1e9;a=c*d;return{timecodeScale:d,duration:a}}function w(a,b,d,e,f,g){a=[];b=b.createParser();var h=-1,i=-1;while(b.hasMoreData()){var j=b.parseElement();if(j.id!=n)continue;j=x(j);if(!j)continue;var k=e*j.unscaledTime;j=d+j.relativeOffset;h>=0&&(i>=0||c("oz-player/shims/ozvariant")(0,4010),a.push(new(c("oz-player/manifests/OzDataSegment"))(g,h,k,i,j-1)));h=k;i=j}if(h>=0){i>=0||c("oz-player/shims/ozvariant")(0,4010);k=f;a.push(new(c("oz-player/manifests/OzDataSegment"))(g,h,k,i,null))}return a}function x(a){a=a.createParser();var b=a.parseElement();if(b.id!=o)return null;b=b.getUint();a=a.parseElement();if(a.id!=p)return null;a=a.createParser();var c=0;while(a.hasMoreData()){var d=a.parseElement();if(d.id!=q)continue;c=d.getUint();break}return{unscaledTime:b,relativeOffset:c}}function y(a){a=a.createParser();var b=null;while(a.hasMoreData()){var c=a.parseElement();if(c.id!=j)continue;b=c;break}return!b?null:v(b)}function z(a){a=new u(a);var b=a.parseElement();if(b.id!=h)return null;b=a.parseElement();if(b.id!=i)return null;a=b.getOffset();b=y(b);return!b?null:{segmentOffset:a,timecodeScale:b.timecodeScale,duration:b.duration}}function a(a,b,c,d){d=new DataView(d.buffer);c=new DataView(c.buffer);d=z(d);if(!d)return[];c=new u(c);c=c.parseElement();return c.id!=m?[]:w(a,c,d.segmentOffset,d.timecodeScale,d.duration,b)}g.parse=a}),98);
__d("oz-player/parsers/OzSidxSegmentsParser",["oz-player/loggings/OzLoggingUtils","oz-player/manifests/OzSegmentOptions","oz-player/manifests/OzZeroTimeRangeSegment","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/parsers/OzMp4SidxParser","oz-player/parsers/OzSidxSegmentsContainer","oz-player/parsers/OzWebmSidxParser","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzURI","oz-player/utils/OzErrorEmitter","oz-player/utils/OzReadableStreamUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=a.split("-");return{startByte:Number.parseInt(a[0],10),endByte:Number.parseInt(a[1],10)}}a=function(){function a(a,b,d,e,f,g,h){this.$6=new(c("oz-player/utils/OzErrorEmitter"))(),this.$7=[],this.$9=new(c("oz-player/shims/OzEventEmitter"))(),this.$1=b,this.$2=new(c("oz-player/shims/OzURI"))(d),this.$3=e,this.$5=f,this.$4=g,this.$8=h.cloneContext().setType(f==="video"||f==="audio"?f+";sidx":"sidx"),this.$10=a}var b=a.prototype;b.onError=function(a){return this.$6.onError(a)};b.parseInitializationSegment=function(){var a=this,b=this.$1.Initialization[0].$.range,d=h(b),e=new(c("oz-player/manifests/OzSegmentOptions"))();return this.$10.getBool("sidx_parser_memory_optimization")?new(c("oz-player/manifests/OzZeroTimeRangeSegment"))(this.$2,d.startByte,d.endByte):{getData:function(){return null},getURI:function(){return a.$2},getTimeRange:function(){return{startTime:0,endTime:0}},getByteRange:function(){return d},getSequenceNumber:function(){return null},getOptions:function(){return e}}};b.parseSegmentsContainer=function(){var a=this,b=this.$11();d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,this.$8,"process_sidx");b["catch"](function(b){a.$6.emitError(b)});return new(c("oz-player/parsers/OzSidxSegmentsContainer"))(function(){return a.$7},this.$9)};b.$12=function(a,b,e){a=new(c("oz-player/manifests/OzZeroTimeRangeSegment"))(a,b.startByte,b.endByte);b=this.$5+";sidx";a=this.$4.request({debugName:"OzSidxSegmentsParser/sidx/"+this.$5,segments:[a],pipeThroughRangeStreamProviders:[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(b)],loggerProvider:this.$8,requestOptions:{networkTimeoutMs:null,retryAttempts_SIDX_USE_ONLY:this.$10.getNumber("sidx_segment_retry_attempts"),retryTimeoutMs_SIDX_USE_ONLY:this.$10.getNumber("sidx_segment_retry_interval_ms")},mediaStreamType:e});b=a.getStream().getReader();return d("oz-player/utils/OzReadableStreamUtils").pumpAllData(b)};b.$11=function(){var a=this,b=this.$1.$.indexRange,e=h(b);b=[this.$12(this.$2,e,null)];if(this.$3==="webm"){var f=h(this.$1.Initialization[0].$.range);b.push(this.$12(this.$2,f,null));f=c("oz-player/shims/OzMaybeNativePromise").all(b).then(function(b){var c=b[0];b=b[1];a.$7=d("oz-player/parsers/OzWebmSidxParser").parse(a.$10,a.$2,c,b)})}else f=b[0].then(function(b){a.$7=d("oz-player/parsers/OzMp4SidxParser").parse(a.$10,a.$2,e.startByte,b)});return f.then(function(){a.$9.emit("segment_updated")})};return a}();g["default"]=a}),98);
__d("oz-player/parsers/OzVideoContainerType",[],(function(a,b,c,d,e,f){"use strict";function a(a){return(a.split("/")[1]||"").trim()}f.parse=a}),66);
__d("oz-player/parsers/OzRepresentationParserBase",["oz-player/manifests/OzRepresentationBase","oz-player/parsers/OzSegmentTemplateParser","oz-player/parsers/OzSidxSegmentsParser","oz-player/parsers/OzVideoContainerType","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f,g,h,i,j,k,l,m,n,o){this.$8=new(c("oz-player/utils/OzErrorEmitter"))();this.$1=b;this.$2=d;this.$9=f;this.$10=g;this.$12=e;this.$13=a;this.$14=h;this.$3=i;this.$4=j;this.$5=k;this.$6=l;this.$7=m;this.$15=n;this.$16=o;try{this.$10=this.$10.cloneContext().setRepresentationID(this.parseID())}catch(a){}}var b=a.prototype;b.$17=function(){var a=this,b=this.$11;if(b)return b;if(this.$1.SegmentBase){var e=this.$1.SegmentBase[0],f=this.$1.BaseURL[0]._;if(typeof f!=="string")throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Missing representation BaseURL",extra:{code:"OZ_RP-9"}});b=new(c("oz-player/parsers/OzSidxSegmentsParser"))(this.$13,e,f,d("oz-player/parsers/OzVideoContainerType").parse(this.$1.$.mimeType),d("oz-player/utils/OzMimeUtil").getMimeType(this.$1.$.mimeType),this.$9,this.$10);b.onError(function(b){var c;if((c=a.$16)==null?void 0:c.handleError(a.parseID(),b))return;return a.$8.emitError(b)})}else if(this.$1.SegmentTemplate)b=this.$18(this.$1.SegmentTemplate[0],{isShared:!1});else if(this.$3)b=this.$18(this.$3[0],{isShared:!0});else throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Unrecognized representation type",extra:{code:"OZ_RP-7"}});this.$11=b;return b};b.$18=function(a,b){var e;a=a;b.isShared&&(a=babelHelpers["extends"]({},a,{$:babelHelpers["extends"]({},a.$,{initialization:a.$.initialization.replace("$RepresentationID$",this.$1.$.id),media:a.$.media.replace("$RepresentationID$",this.$1.$.id)})}));b=this.$12.mpdUrl;var f=this.$1.BaseURL&&this.$1.BaseURL[0]?this.$1.BaseURL[0]._:null;f=f!=null?f:b;if(f==null)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_REPRESENTATION_PARSER",description:"Missing mpd url for template manifest",extra:{code:"OZ_RP-6"}});var g=this.$12.customSegmentTimelineParser;e=(e=this.$12.customRepresentationParsers)==null?void 0:e.initializationBinary;e=e?e(this.$1):null;return new(c("oz-player/parsers/OzSegmentTemplateParser"))(this.$13,a,{baseUrl:f,mpdUrl:b,isStaticMpd:this.$14.manifestType==="static",isTemplatedMpd:this.$14.manifestIsTemplated},g,e)};b.onError=function(a){return this.$8.onError(a)};b.parseInitSegment=function(){return this.$17().parseInitializationSegment()};b.parseBandwidth=function(){return Number(this.$1.$.bandwidth)};b.parseMimeType=function(){var a;return(a=(a=this.$1.$.mimeType)!=null?a:this.$4)!=null?a:""};b.parseCodecs=function(){var a;return(a=(a=this.$1.$.codecs)!=null?a:this.$5)!=null?a:""};b.parseLang=function(){return this.$6};b.parseRole=function(){return this.$7};b.parseSegmentsContainer=function(){return this.$17().parseSegmentsContainer()};b.parseID=function(){return""+this.$1.$.id};b.parseCustomFieldFirstSegment=function(){var a=this.$12.customRepresentationParsers?this.$12.customRepresentationParsers.firstSegmentParser:null;return a?a(this.$1):null};b.parse=function(){return new(c("oz-player/manifests/OzRepresentationBase"))(this.$1,this.$2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),this.$12.customRepresentationParsers)};return a}();g["default"]=a}),98);
__d("oz-player/parsers/OzApplicationRepresentationParser",["oz-player/manifests/OzApplicationRepresentation","oz-player/parsers/OzRepresentationParserBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k,l,m,n){b=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n)||this;b.$OzApplicationRepresentationParser$p_1=c;b.$OzApplicationRepresentationParser$p_3=e;return b}var d=b.prototype;d.parse=function(){var a=this.$OzApplicationRepresentationParser$p_3.customRepresentationParsers;return new(c("oz-player/manifests/OzApplicationRepresentation"))(this.$OzApplicationRepresentationParser$p_1,this.$OzApplicationRepresentationParser$p_2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),a)};return b}(c("oz-player/parsers/OzRepresentationParserBase"));g["default"]=a}),98);
__d("oz-player/manifests/OzAudioRepresentation",["oz-player/manifests/OzRepresentationBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k,l,m){b=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m)||this;b.$OzAudioRepresentation$p_1=d;b.$OzAudioRepresentation$p_2=k;return b}var c=b.prototype;c.getBitrateKbps=function(){var a=1024;return(this.$OzAudioRepresentation$p_2/a).toFixed(1)+"Kbps"};c.getDisplayLabel=function(){var b=a.prototype.getLang.call(this),c=a.prototype.getRole.call(this);b=b==null?"Default":b;return c==null?b:b+" - "+c};return b}(c("oz-player/manifests/OzRepresentationBase"));g["default"]=a}),98);
__d("oz-player/parsers/OzAudioRepresentationParser",["oz-player/manifests/OzAudioRepresentation","oz-player/parsers/OzRepresentationParserBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k,l,m,n){b=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n)||this;b.$OzAudioRepresentationParser$p_1=c;b.$OzAudioRepresentationParser$p_3=e;return b}var d=b.prototype;d.parse=function(){var a=this.$OzAudioRepresentationParser$p_3.customRepresentationParsers;return new(c("oz-player/manifests/OzAudioRepresentation"))(this.$OzAudioRepresentationParser$p_1,this.$OzAudioRepresentationParser$p_2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),a)};return b}(c("oz-player/parsers/OzRepresentationParserBase"));g["default"]=a}),98);
__d("oz-player/parsers/OzVideoRepresentationParser",["oz-player/manifests/OzVideoRepresentation","oz-player/parsers/OzRepresentationParserBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o){b=a.call(this,b,c,d,e,f,g,h,i,j,k,l,m,n,o)||this;b.$OzVideoRepresentationParser$p_1=c;b.$OzVideoRepresentationParser$p_2=d;b.$OzVideoRepresentationParser$p_3=e;return b}var d=b.prototype;d.parse=function(){var a=Number.parseInt(this.$OzVideoRepresentationParser$p_1.$.height,10),b=Number.parseInt(this.$OzVideoRepresentationParser$p_1.$.width,10),d=this.$OzVideoRepresentationParser$p_3.customRepresentationParsers;return new(c("oz-player/manifests/OzVideoRepresentation"))(this.$OzVideoRepresentationParser$p_1,this.$OzVideoRepresentationParser$p_2,this.parseID(),this.parseMimeType(),this.parseCodecs(),this.parseLang(),this.parseRole(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),d,b,a)};return b}(c("oz-player/parsers/OzRepresentationParserBase"));g["default"]=a}),98);
__d("oz-player/utils/OzIbrUtils",["oz-player/networks/OzBandwidthEstimator"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,d){var e=c("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(b.getLegacyConfig());a=a.slice(0);a.sort(function(a,b){return a.getBandwidth()-b.getBandwidth()});b=b.getNumber("live_audio_ibr_bandwidth_percentage");b=e*b;for(var f=a.length-1;f>=0;f--)if(a[f].getBandwidth()<=b){d.getOperationLogger("audio_ibr_success").setRepresentationID(a[f].getID()).setReason(e.toString()).log();return a[f]}d.getOperationLogger("audio_ibr_no_op").setReason(e.toString()).log();return null};g.getInitialAudioRepresentation=a}),98);
__d("oz-player/parsers/OzMpdParser",["oz-player/manifests/Mpd","oz-player/parsers/OzApplicationRepresentationParser","oz-player/parsers/OzAudioRepresentationParser","oz-player/parsers/OzVideoRepresentationParser","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzIbrUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.blockedRepresentationsManager,d=a.config,e=a.drmManager,f=a.enableAlternativeAudioTracks,g=a.initialRepresentationIDs,h=a.networkManager,i=a.ozParserContext;a=a.perfLoggerProvider;this.$2=new(c("oz-player/utils/OzErrorEmitter"))();this.$5=d;this.$1=h;this.$3=a;this.$4=i;this.$6=e;this.$7=(d=g)!=null?d:[];this.$8=(h=b)!=null?h:null;this.$9=f;this.$10=!0}var b=a.prototype;b.onError=function(a){return this.$2.onError(a)};b.parse=function(a){var b=this,e=[];a=a;var f=this.$4.createXmlParser().parse(a);f=f.MPD&&f.MPD.length>0?f.MPD[0]:null;if(!f){var g=2e3;throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_MPD_PARSER",description:"parsed manifest XML missing MPD node; truncated xml ("+Math.min(g,a.length)+"/"+a.length+"): "+a.substring(0,g)})}g=f.Period&&f.Period.length>0?f.Period[0]:null;if(!g){var h=2e3;throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_MPD_PARSER",description:"parsed manifest XML missing Period node; truncated xml ("+Math.min(h,a.length)+"/"+a.length+"): "+a.substring(0,h)})}a=g.AdaptationSet||[];h=this.$11(f);this.$10=h==="static";g=this.$12(f);var i=this.$13(this.$14(a,"video"),{manifestType:h,manifestIsTemplated:g},e).sort(function(a,b){return a.getHeight()-b.getHeight()}),j;this.$9?j=this.$15(this.$14(a,"audio"),{manifestType:h,manifestIsTemplated:g},e).sort(function(a,b){return a.getBandwidth()-b.getBandwidth()}):j=this.$16(this.$17(a,"audio"),c("oz-player/parsers/OzAudioRepresentationParser"),{manifestType:h,manifestIsTemplated:g}).sort(function(a,b){return a.getBandwidth()-b.getBandwidth()});var k=[];if(this.$5.getBool("vtt_caption_representation")){a=this.$14(a,"application");k=this.$16(a[0],c("oz-player/parsers/OzApplicationRepresentationParser"),{manifestType:h,manifestIsTemplated:g})}a=this.$4.mpdUrl;h=new(c("oz-player/manifests/Mpd"))(f,i,j,k,a,this.$18(f),this.$4.customParsers||new Map(),this.$10);if(this.$6){g=this.$6;g.startEME(i,j)}e.forEach(function(a){a.onError(b.$2.emitError)});return h};b.$18=function(a){a=a.$.minimumUpdatePeriod||"";a=/\d+/g.exec(a);if(a&&a.length){a=a[0];return a?Number.parseInt(a,10):null}return null};b.$11=function(a){return a.$.type||"static"};b.$12=function(a){var b;b=(b=this.$4.customParsers)==null?void 0:b.get("isLiveTemplated");if(!b)return!1;b=b(a);return typeof b==="boolean"&&b};b.$17=function(a,b){return a.find(this.$19(b))};b.$14=function(a,b){return a.filter(this.$19(b))};b.$19=function(a){return function(b){if(b.$.mimeType!=null)return b.$.mimeType.indexOf(a)!==-1;b=b.Representation;return b&&b.length>0&&b[0].$.mimeType.indexOf(a)!==-1}};b.$16=function(a,b,c){var d=this;if(!a)return[];var e=a.Role;e=(e=e)!=null?e:[];e=e[0];var f=e?e.$.value:null;return a.Representation.map(function(e){e=new b(d.$5,e,(e=e.ContentProtection)!=null?e:a.ContentProtection,d.$4,d.$1,d.$3,c,a.SegmentTemplate,a.$.mimeType,a.$.codecs,a.$.lang,f,d.$7,d.$8);return e.parse()})};b.$13=function(a,b,d){var e=this,f=this.$5.getBool("mcm_in_play_codec_switch"),g=[],h=new Set(),i=0;a.filter(Boolean).forEach(function(a,j,k){j=j===k.length-1;k=i;for(var l=a.Representation,m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o,p;if(m){if(n>=l.length)break;p=l[n++]}else{n=l.next();if(n.done)break;p=n.value}p=p;var q=parseInt(p.$.height,10);if(!f&&q<=i)continue;if(((o=p.$.FBAbrPolicyTags)==null?void 0:o.includes("avoid_on_abr"))&&!j)continue;o=a.Role;o=(o=o)!=null?o:[];o=o[0];o=o?o.$.value:null;p=new(c("oz-player/parsers/OzVideoRepresentationParser"))(e.$5,p,(p=p.ContentProtection)!=null?p:a.ContentProtection,e.$4,e.$1,e.$3,b,a.SegmentTemplate,a.$.mimeType,a.$.codecs,a.$.lang,o,e.$7,e.$8);o=p.parse();d.push(p);if(!MediaSource.isTypeSupported(o.getMimeCodecs())){h.add(o.getMimeCodecs());continue}g.push(o);k=Math.max(q,k)}i=k});return g.filter(Boolean)};b.$15=function(a,b,e){var f=this,g=[],h=new Set();a=a.filter(Boolean).map(function(a){var d=a.Role;d=(d=d)!=null?d:[];d=d[0];d=d?d.$.value:null;var g=[];for(var i=a.Representation,j=Array.isArray(i),k=0,i=j?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(j){if(k>=i.length)break;l=i[k++]}else{k=i.next();if(k.done)break;l=k.value}l=l;l=new(c("oz-player/parsers/OzAudioRepresentationParser"))(f.$5,l,(l=l.ContentProtection)!=null?l:a.ContentProtection,f.$4,f.$1,f.$3,b,a.SegmentTemplate,a.$.mimeType,a.$.codecs,a.$.lang,d,f.$7);var m=l.parse();e.push(l);if(!MediaSource.isTypeSupported(m.getMimeCodecs())){h.add(m.getMimeCodecs());continue}g.push(m)}return g});a.forEach(function(a){if(a.length>1){var b=d("oz-player/utils/OzIbrUtils").getInitialAudioRepresentation(a,f.$5,f.$3);g.push((b=b)!=null?b:a[0])}else g.push.apply(g,a)});return g.filter(Boolean)};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzMpdUtils",[],(function(a,b,c,d,e,f){"use strict";function g(a){var b=null;a.forEach(function(a){if(a){var c=a.endTime;c<((c=(c=b)==null?void 0:c.endTime)!=null?c:Infinity)&&(b=a)}});return b}function a(a,b){b=[];b.push.apply(b,a.getVideoRepresentations().concat(a.getAudioRepresentations()));if(b.length){a=b.map(function(a){a=a.getEndingSegment();return a?a.getTimeRange():null});return g(a)}return null}function b(a){var b=[];b.push.apply(b,a.getVideoRepresentations().concat(a.getAudioRepresentations()));if(b.length){a=b[0].getEndingSegment();if(a)return a.getSequenceNumber()}return null}f.getLeastEndTimeTimeRange=g;f.getMpdLastTimeRange=a;f.getMpdLastSequenceNumber=b}),66);
__d("oz-player/utils/OzStreamInterruptChecker",["oz-player/shims/OzEventEmitter","oz-player/utils/OzMpdUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this)||this;d.$OzStreamInterruptChecker$p_4=0;d.$OzStreamInterruptChecker$p_5=null;d.$OzStreamInterruptChecker$p_6=!1;d.$OzStreamInterruptChecker$p_2=b;d.$OzStreamInterruptChecker$p_3=c;d.$OzStreamInterruptChecker$p_1=d.$OzStreamInterruptChecker$p_3.getNumber("live_numerical_error_epsilon");return d}var c=b.prototype;c.notifyMpdUpdated=function(){var a=d("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(this.$OzStreamInterruptChecker$p_2,this.$OzStreamInterruptChecker$p_3),b=a?a.endTime:null,c=!1;b!==null&&(c=b===this.$OzStreamInterruptChecker$p_5);c?this.$OzStreamInterruptChecker$p_4++:(this.$OzStreamInterruptChecker$p_4=0,this.$OzStreamInterruptChecker$p_6&&this.$OzStreamInterruptChecker$p_5!==null&&this.$OzStreamInterruptChecker$p_5!==void 0&&a!==null&&a!==void 0&&this.emit("streamResumedAt",a.startTime),this.$OzStreamInterruptChecker$p_6=!1);c=this.$OzStreamInterruptChecker$p_3.getNumber("stream_interrupt_check_mpd_stale_count_threshold");!this.$OzStreamInterruptChecker$p_6&&c>0&&this.$OzStreamInterruptChecker$p_4>=c&&b!==null&&b!==void 0&&(this.emit("streamInterruptAt",b),this.$OzStreamInterruptChecker$p_6=!0);this.$OzStreamInterruptChecker$p_5=b};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/parsers/OzMpdUpdater",["oz-player/parsers/OzMpdParser","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/OzURI","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMpdUtils","oz-player/utils/OzReadableStreamUtils","oz-player/utils/OzStreamInterruptChecker"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e,f,g,h,i,j,k){var l;l=a.call(this)||this;l.$OzMpdUpdater$p_8=new(c("oz-player/utils/OzErrorEmitter"))();l.$OzMpdUpdater$p_10=new(c("oz-player/shims/OzSubscriptionsHandler"))();l.$OzMpdUpdater$p_11=!1;l.$OzMpdUpdater$p_16=0;l.$OzMpdUpdater$p_18=0;l.$OzMpdUpdater$p_19=null;l.$OzMpdUpdater$p_21=!0;l.$OzMpdUpdater$p_22=0;l.$OzMpdUpdater$p_25=function(){var a,b=l.$OzMpdUpdater$p_2.getLocation();l.$OzMpdUpdater$p_21=!1;if(b==null||b==="")return;var e=new(c("oz-player/shims/OzURI"))(b),f=String((a=(a=e.getQueryData().ms)!=null?a:e.getQueryData().msdev)!=null?a:e.getQueryData().mstest);if(!l.$OzMpdUpdater$p_12.isPlaying()){l.setupUpdateLoop();return}var g=l.$OzMpdUpdater$p_5.getOperationLogger("update_manifest").start();l.$OzMpdUpdater$p_27(b).then(function(a){var e;l.$OzMpdUpdater$p_18=0;l.$OzMpdUpdater$p_28();l.$OzMpdUpdater$p_7=0;if(l.$OzMpdUpdater$p_21)return;var h=babelHelpers["extends"]({},l.$OzMpdUpdater$p_13,{mpdUrl:b});h=new(c("oz-player/parsers/OzMpdParser"))({config:l.$OzMpdUpdater$p_6,ozParserContext:h,networkManager:l.$OzMpdUpdater$p_1,perfLoggerProvider:l.$OzMpdUpdater$p_5,drmManager:l.$OzMpdUpdater$p_14,initialRepresentationIDs:[],blockedRepresentationsManager:null,enableAlternativeAudioTracks:!1});h.onError(function(a){l.$OzMpdUpdater$p_8.emitError(a),g.setError(a).log()});h=h.parse(a);a=l.$OzMpdUpdater$p_2.isStaticMpd();l.$OzMpdUpdater$p_2.updateWith(h);l.$OzMpdUpdater$p_2.markRefreshed();h.isStaticMpd()&&!a&&l.emit("streamTransitionToStatic");h=d("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(l.$OzMpdUpdater$p_2,l.$OzMpdUpdater$p_6);a=h&&h.endTime!=0?h.endTime:null;h=String((h=(h=l.$OzMpdUpdater$p_2)==null?void 0:h.getCustomField("currentServerTimeMs"))!=null?h:"");e=String((e=(e=l.$OzMpdUpdater$p_2)==null?void 0:e.getCustomField("lastVideoFrameTs"))!=null?e:"");h={currentServerTimeMs:h,ingestLastVideoFrameTs:e,nowMs:String(Date.now())};g.setLiveheadPosition(a).setLiveheadSeqNumMpd(d("oz-player/utils/OzMpdUtils").getMpdLastSequenceNumber(l.$OzMpdUpdater$p_2)).setManifestType(l.$OzMpdUpdater$p_2.isStaticMpd()?"static":"dynamic").setIsTemplatedManifest(Boolean(l.$OzMpdUpdater$p_2.getCustomField("isLiveTemplated"))).setPlaybackFbmsParam(f).setUserInfo(h).log();l.$OzMpdUpdater$p_9.notifyMpdUpdated();l.setupUpdateLoop()})["catch"](function(a){l.$OzMpdUpdater$p_28();g.setError(a).log();var c=null;if(d("oz-player/utils/OzErrorUtils").isOzError(a))c=a;else{var e,f=null,h="Caught an unknown error when fetching the manifest.";if(a!=null)if(l.$OzMpdUpdater$p_6.getBool("normalize_mpd_fetch_errors")){var i=d("oz-player/utils/OzErrorUtils").getNormalizedErrorAndCode(a),j=i[0];i[1];c=j}else e=a,f=e.code!=null?String(e.code):null,h=e.name+"; "+e.message+"; "+e.description+";";if(c==null){i={originalError:e,url:b};f!==null&&(i.code=f);c=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NETWORK",description:h,extra:i})}}l.$OzMpdUpdater$p_26(c,b)})};var m=e.getMinimumUpdatePeriod();l.$OzMpdUpdater$p_7=0;l.$OzMpdUpdater$p_1=f;l.$OzMpdUpdater$p_2=e;l.$OzMpdUpdater$p_12=g;l.$OzMpdUpdater$p_3=m;l.$OzMpdUpdater$p_5=h.cloneContext().setType("manifest");l.$OzMpdUpdater$p_6=b;l.$OzMpdUpdater$p_13=i;l.$OzMpdUpdater$p_14=j;l.$OzMpdUpdater$p_15=k;l.$OzMpdUpdater$p_2.addListener("locationUpdated",function(){l.$OzMpdUpdater$p_23(),l.setupUpdateLoop()});l.$OzMpdUpdater$p_9=new(c("oz-player/utils/OzStreamInterruptChecker"))(l.$OzMpdUpdater$p_2,l.$OzMpdUpdater$p_6);l.$OzMpdUpdater$p_10.addSubscriptions(l.$OzMpdUpdater$p_9.addListener("streamResumedAt",function(a){l.emit("streamResumedAt",a)}),l.$OzMpdUpdater$p_9.addListener("streamInterruptAt",function(a){l.emit("streamInterruptAt",a)}));return l}var e=b.prototype;e.$OzMpdUpdater$p_23=function(){c("oz-player/shims/ozClearTimeout")(this.$OzMpdUpdater$p_4),this.$OzMpdUpdater$p_4=null,this.$OzMpdUpdater$p_24(),this.$OzMpdUpdater$p_21=!0};e.setupUpdateLoop=function(){var a,b=!this.$OzMpdUpdater$p_11;b&&(b=!this.$OzMpdUpdater$p_2.isStaticMpd(),this.$OzMpdUpdater$p_3=this.$OzMpdUpdater$p_2.getMinimumUpdatePeriod());a=this.$OzMpdUpdater$p_17==null&&this.$OzMpdUpdater$p_6.getNumber("manifest_initial_update_delay_ms")>0?this.$OzMpdUpdater$p_6.getNumber("manifest_initial_update_delay_ms"):this.$OzMpdUpdater$p_6.getNumber("manifest_update_frequency_ms")||((a=this.$OzMpdUpdater$p_3)!=null?a:0)*1e3;b&&a&&this.$OzMpdUpdater$p_2.getLocation()&&(this.$OzMpdUpdater$p_4=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(this.$OzMpdUpdater$p_25,a))};e.onError=function(a){return this.$OzMpdUpdater$p_8.onError(a)};e.$OzMpdUpdater$p_26=function(a,b){var c=this;b=!0;var d=this.$OzMpdUpdater$p_18-1,e=a.getExtra().code;this.$OzMpdUpdater$p_19!==e?(this.$OzMpdUpdater$p_19=e,this.$OzMpdUpdater$p_16=1):this.$OzMpdUpdater$p_16++;var f=function(){b=!1};e={endStream:function(){f(),c.$OzMpdUpdater$p_11=!0,c.emit("streamGone")},consecutiveFailuresForErrorCode:this.$OzMpdUpdater$p_16,error:a,isInitialRequest:!1,retry:function(b){c.emit("manifestFetchErrorRetry",a),f(),c.setupUpdateLoop()},retryAttemptCount:d};this.emit("manifestFetchError",e);b&&this.$OzMpdUpdater$p_8.emitError(a)};e.$OzMpdUpdater$p_29=function(a,b){a=new(c("oz-player/shims/OzURI"))(a);a.addQueryData("_nc_expid",b);return a.toString()};e.$OzMpdUpdater$p_30=function(a){if(!this.$OzMpdUpdater$p_15)return a;a=new(c("oz-player/shims/OzURI"))(a);a.addQueryData("_nc_tsid","mpd-"+this.$OzMpdUpdater$p_22++);return a.toString()};e.$OzMpdUpdater$p_27=function(a){this.$OzMpdUpdater$p_24();this.$OzMpdUpdater$p_18++;var b=this.$OzMpdUpdater$p_6.getString("cdn_experiment_id");a=b.length===0?a:this.$OzMpdUpdater$p_29(a,b);a=this.$OzMpdUpdater$p_30(a);b=this.$OzMpdUpdater$p_1.requestRawUrl({debugName:"OzMpdUpdater/requestMpd/mpd",url:a,options:{networkTimeoutMs:this.$OzMpdUpdater$p_6.getNumber("mpd_updater_network_request_timeout_ms")},loggerProvider:this.$OzMpdUpdater$p_5});this.$OzMpdUpdater$p_17=Date.now();this.$OzMpdUpdater$p_20=b;a=b.getStream().getReader();return d("oz-player/utils/OzReadableStreamUtils").pumpString(a)};e.$OzMpdUpdater$p_24=function(){this.$OzMpdUpdater$p_20&&(this.$OzMpdUpdater$p_20.cancel(),this.$OzMpdUpdater$p_18=0),this.$OzMpdUpdater$p_28()};e.$OzMpdUpdater$p_28=function(){this.$OzMpdUpdater$p_20=null};e.destroy=function(){this.$OzMpdUpdater$p_4&&c("oz-player/shims/ozClearTimeout")(this.$OzMpdUpdater$p_4),this.$OzMpdUpdater$p_10.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/shims/www/OzXmlParserTrustedTypesHTMLPolicyWWW",["TrustedTypes","err"],(function(a,b,c,d,e,f,g){"use strict";b={createHTML:function(a){if(a.startsWith('<?xml version="1.0"?>\n<')||a.startsWith('<?xml version="1.0" encoding="UTF-8"?>\n<')||a.startsWith('\n<MPD xmlns="urn:mpeg:dash:schema:mpd:2011"'))return a;throw c("err")("Violating Trusted Type policies. Only works for XML.")}};var h=c("TrustedTypes").createPolicy("oz-player-xml",b);function a(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return h.createHTML.apply(h,[a].concat(c))}g.createTrustedHTMLForDOMParser=a}),98);
__d("oz-player/shims/OzXmlParserTrustedTypesHTMLPolicy",["oz-player/shims/www/OzXmlParserTrustedTypesHTMLPolicyWWW"],(function(a,b,c,d,e,f,g){"use strict";g.createTrustedHTMLForDOMParser=d("oz-player/shims/www/OzXmlParserTrustedTypesHTMLPolicyWWW").createTrustedHTMLForDOMParser}),98);
__d("oz-player/parsers/OzXmlParserImplDOMParser",["oz-player/shims/OzXmlParserTrustedTypesHTMLPolicy","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){function h(){return{$:{}}}function i(a){var b=h();for(var c=a.attributes,d=0;d<c.length;++d){var e=c[d];b.$[e.name]=e.value}for(e=a.childNodes,c=0;c<e.length;++c){d=e[c];if(d instanceof Element){a=d.nodeName;Object.prototype.hasOwnProperty.call(b,a)||(b[a]=[]);b[a].push(i(d))}else{a=d.nodeValue.trim();a&&(b._=a)}}return b}a=function(){function a(){this.$1=new DOMParser()}var b=a.prototype;b.parse=function(a){try{var b=h(),c=d("oz-player/shims/OzXmlParserTrustedTypesHTMLPolicy").createTrustedHTMLForDOMParser(a);c=this.$1.parseFromString(c,"application/xml");var e=c.querySelector("parsererror");if(e){var f=e.querySelector("h3");f=f?f.nextElementSibling:null;f=f?f.innerHTML:e.innerHTML;e=2e3;throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_XML_PARSER",description:"DOMParser parsererror: "+String(f).trim()+"; truncated xml ("+Math.min(e,a.length)+"/"+a.length+"): "+a.substring(0,e),extra:{}})}f=c.documentElement;f!=null&&(b[f.nodeName]=[i(f)]);return b}catch(b){if(d("oz-player/utils/OzErrorUtils").isOzError(b))throw b;else{e=2e3;throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_XML_PARSER",description:"XML parse exception: "+String(b)+"; truncated xml ("+Math.min(e,a.length)+"/"+a.length+"): "+a.substring(0,e),extra:{originalError:b}})}}};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzClearSourceBufferOnSeekManager",["oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e){e===void 0&&(e=null),this.$3=new(c("oz-player/utils/OzErrorEmitter"))(),this.$4=new Map(),this.$5=!1,this.$6=!1,this.$7=!1,this.$8=null,this.$9=[],this.$10=null,this.$11=null,this.$1=a,this.$2=b,this.$4=d,this.$11=e}var b=a.prototype;b.$12=function(a){var b;this.$5=!0;return(b=this.$8)!=null?b:a.call(this.$1)};b.$13=function(a,b){this.$6=!0,this.$9.push({t:b}),this.$8=b,this.$9.length===1&&this.$14(a)};b.$15=function(a){this.$7=!0;return this.$8!=null?!0:a.call(this.$1)};b.$16=function(a,b){var d=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),e=[];this.$4.forEach(function(c,d){d=c.clearSourceBufferRange(a,b);e.push(d)});var f=c("oz-player/shims/OzMaybeNativePromise").all(e);f.then(function(){d.resolve()})["catch"](function(a){d.reject(a)});return d.getPromise()};b.$14=function(a){var b=this,e=this.$9.length>0?this.$9[0]:null,f=this.$2.getNumber("clear_buffer_on_seek_epsilon_s");if(e){var g=e.t;e=this.$1.buffered;var h=e.length,i=e.length<=0,j=-1,k=!1;for(var l=0;j<0&&l<h;++l)j=g-f>=e.start(l)&&g+f<e.end(l)?l:j,k=g<e.start(l)-f;l=j>-1;var m=this.$2.getNumber("clear_buffer_on_seek_nudge_s");l&&j>=0&&j<h&&m>0&&(g=Math.min(g,e.end(j)-m),g=Math.max(g,e.start(j)+m));if(i||l||!k)this.$11&&this.$11.getOperationLogger("seek_to_next_time").setLength(Math.round(g*1e3)).setInitiator("no_clear").log(),a.call(this.$1,g),this.$9.shift(),this.$14(a);else{var n=null;this.$11&&(n=this.$11.getOperationLogger("clear_buffer_before_seek").setLength(Math.round(g*1e3)).setUserInfo({bufferRangesLength:String(h),nudgeSec:String(m)}).start());j=this.$16(Math.max(g-f,0),e.end(h-1)+f);j.then(function(){n&&n.log(),b.$11&&b.$11.getOperationLogger("seek_to_next_time").setLength(Math.round(g*1e3)).setInitiator("after_clear").log(),a.call(b.$1,g),b.$9.shift(),b.$14(a)})["catch"](function(a){n&&n.setError(a).log(),b.$3.emitError(d("oz-player/utils/OzErrorUtils").isOzError(a)?a:d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_SOURCE_BUFFER",description:a?a.name+": "+a.message:"Unknown error while clearing the buffer.",extra:{code:c("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_CLEAR_RANGE_FAILED,originalError:a}}))})}}else this.$8=null};b.maybeOverwriteVideoCurrentTimeProperty=function(){var a,b,c=this,d=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(this.$1,"currentTime");d=(a=d)!=null?a:Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"currentTime");a=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(this.$1,"seeking");a=(b=a)!=null?b:Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"seeking");var e=d&&typeof d.get==="function"?d.get:null,f=d&&typeof d.set==="function"?d.set:null,g=a&&typeof a.get==="function"?a.get:null;if(e&&f&&g&&Object.defineProperty){try{Object.defineProperty(this.$1,"currentTime",{get:function(){return c.$12(e)},set:function(a){c.$13(f,a)},configurable:!0,enumerable:!0});Object.defineProperty(this.$1,"seeking",{get:function(){return c.$15(g)},configurable:!0,enumerable:!0});b=this.$1.currentTime;this.$1.currentTime=b;this.$1.seeking}catch(a){}this.$17(function(){c.getCurrentTimePropertyOverwriteSuccess()&&Object.defineProperty(c.$1,"currentTime",{get:e,set:f,configurable:!0,enumerable:!0}),c.getSeekingPropertyOverwriteSuccess()&&Object.defineProperty(c.$1,"seeking",{get:g,configurable:!0,enumerable:!0})})}};b.getCurrentTimePropertyOverwriteSuccess=function(){return this.$5&&this.$6};b.getSeekingPropertyOverwriteSuccess=function(){return this.$7};b.$17=function(a){this.$10=a};b.onError=function(a){return this.$3.onError(a)};b.destroy=function(){try{this.$10&&this.$10()}catch(a){}};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzSteadyStateManager",["oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=[],this.$2=a,this.$3=b}var b=a.prototype;b.addSample=function(a){var b,c=Math.floor(Date.now()/(1e3*this.$3)),d=c%this.$2;((b=this.$1[d])==null?void 0:b.bucketNumber)!=c&&(this.$1[d]={bucketNumber:0,val:null});this.$1[d]={bucketNumber:c,val:Math.min(a,(b=this.$1[d].val)!=null?b:a)}};b.min=function(){var a=this,b=Date.now(),d=this.$1.filter(function(c){return c!=null&&c.val!=null&&b-a.$2*1e3*a.$3<c.bucketNumber*1e3*a.$3});if(d.length<this.$2)return null;d=d.reduce(function(a,b){if(a==null)return b;var d=b.val;d!=null||c("oz-player/shims/ozvariant")(0,56011);var e=a.val;e!=null||c("oz-player/shims/ozvariant")(0,56011);return d<e?b:a},null);return d==null?void 0:d.val};b.reset=function(){this.$1=[]};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzLiveLatencyManager",["oz-player/playback_controls/OzSteadyStateManager","oz-player/shims/OzDOMEventListener","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/utils/OzSourceBufferUtil"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$8=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$9=null;this.$10=!1;this.$11=null;this.$12=null;this.$13=null;this.$14=!0;var d=a.config,e=a.mpd,f=a.playbackState,g=a.bufferingDetector,h=a.video,i=a.loggerProvider;a=a.getUserSelectedPlaybackRate;this.$1=d;this.$2=e;this.$3=f;this.$15=a;d.getNumber("steadystate_minbuffer_buckets")>0&&(this.$7=new(c("oz-player/playback_controls/OzSteadyStateManager"))(this.$1.getNumber("steadystate_minbuffer_buckets"),this.$1.getNumber("steadystate_minbuffer_buckets_sec")));g!=null&&(this.$8.addSubscriptions(g.addListener("enterBuffering",function(a){if(a==="in_play"){b.$9=0;(a=b.$7)==null?void 0:a.reset()}b.$10=!1;(a=b.$6)==null?void 0:a.log();b.$6=null})),this.$8.addSubscriptions(g.addListener("leaveBuffering",function(){b.$9===0&&(b.$9=Date.now()),b.$10=!1})));this.$4=h;this.$5=i;if(this.$16()){this.$8.addSubscriptions((e=c("oz-player/shims/OzDOMEventListener")).listenDOMEvent(this.$4,"timeupdate",c("oz-player/shims/ozThrottle")(function(){b.$17(),b.$18()},this.$1.getNumber("playhead_manager_timeupdate_throttle_ms"))),e.listenDOMEvent(this.$4,"waiting",function(){b.$17()}),e.listenDOMEvent(this.$4,"durationchange",function(){b.$17()}),e.listenDOMEvent(this.$4,"seeking",function(){var a;b.$13=Date.now();b.$11=null;(a=b.$7)==null?void 0:a.reset()}),e.listenDOMEvent(this.$4,"playing",function(){b.$13=Date.now(),b.$11=null}),e.listenDOMEvent(h,"pause",function(){var a;return(a=b.$7)==null?void 0:a.reset()}))}}var b=a.prototype;b.enabled=function(){var a=this.$1.getNumber("catchup_timeout_after_buffering_sec");return a===0||this.$9==null||this.$9!==0&&this.$9+a*1e3<=Date.now()};b.isBehindPreferredLiveHeadLatencyWithTolerance=function(){return this.$3.getCurrentTime()<this.getInitialPlayHeadPosition()-this.getPreferredLiveHeadLatencyToleranceSec()};b.$19=function(){return this.$3.getCurrentTime()<this.getInitialPlayHeadPosition()};b.$20=function(){var a;a=(a=this.$7)==null?void 0:a.min();return!this.$21()&&a!=null&&a>this.$1.getNumber("steadystate_minbuffer_sec")};b.getInitialPlayHeadPosition=function(){return this.getLiveHeadTimeSec()-this.getPreferredLiveHeadLatencySec()};b.getLiveHeadTimeSec=function(){var a=this.$22();return(a==null?void 0:(a=a.getEndingSegment())==null?void 0:a.getTimeRange().endTime)||0};b.$21=function(){return this.$9!=null&&this.$1.getBool("latencymanager_stalled_edgelatency_sec_on")};b.getPreferredLiveHeadLatencySec=function(){var a=this.$21()?this.$1.getNumber("latencymanager_stalled_edgelatency_sec"):this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec");a=this.$23(a);this.$5.getOperationLogger("latency_manager").setPreferredEdgeLatency(a*1e3);return a};b.getPreferredLiveHeadLatencyToleranceSec=function(){return this.$1.getNumber("pdash_download_cursor_catchup_tolerance_sec")};b.shouldEnableManifestTimeRangeCatchup=function(){return!this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")};b.shouldEnableCursorBasedCatchup=function(){var a=this.$2.getVideoRepresentations()[0];a=a&&a.canPredict();return a&&this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")>0};b.setEnableCatchup=function(a){var b=this.$14;!this.$14&&a===!0&&(this.$9=null);this.$14=a;this.$1.getBool("fix_live_rewind_user_selected_playback_speed")&&a!==b&&this.$18()};b.$24=function(a,b,c){var d=this.$1.getNumber("playback_speed_min_sharpness_factor");c=a*2/(1+Math.pow(Math.E,-(c-b)*d));return 1-a+c};b.$16=function(){return!this.$1.getBool("playback_speed_latency_adjustment_disabled")&&(this.$1.getNumber("playback_speed_latency_adjustment_rate")>0||this.$1.getNumber("playback_speed_latency_slowdown_adjustment_rate")>0||this.$1.getNumber("playback_speed_latency_speedup_adjustment_rate")>0)};b.$17=function(){var a,b=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(d("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$4.buffered),this.$3.getCurrentTime(),this.$1).bufferAheadSec;(a=this.$7)==null?void 0:a.addSample(b)};b.$18=function(){var a=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(d("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$4.buffered),this.$3.getCurrentTime(),this.$1),b=a.bufferAheadSec;a=a.bufferedOffset;this.$25(b,a)};b.$25=function(a,b){var c=this.$1.getNumber("playback_speed_enabled_delay_sec"),d=this.$1.getNumber("playback_speed_min_buffer_sec");a>d&&(this.$10=!0);var e=this.$1.getNumber("playback_speed_min_duration_sec"),f=this.$1.getNumber("playback_speed_restore_min_duration_sec"),g=this.$1.getNumber("playback_speed_latency_adjustment_rate"),h=this.$1.getNumber("playback_speed_latency_slowdown_adjustment_rate"),i=this.$1.getNumber("playback_speed_latency_speedup_adjustment_rate");if(this.$4.playbackRate===0){var j;(j=this.$6)==null?void 0:j.log();this.$6=null}else if(this.$14&&this.$10&&a<d&&(g>0||h>0)&&b===0&&(c===0||this.$13!=null&&this.$13+c*1e3<Date.now())){j=h>0?1-h:this.$24(g,d,a);this.$6==null&&(this.$6=this.$5.getOperationLogger("latency_manager").start().setInitiator("speed_adjustment").setReason("slow").setUserInfo({newPlaybackRate:String(j),oldPlaybackRate:String(this.$4.playbackRate)}));this.$26(j)}else if(this.$14&&this.$10&&(this.$19()||this.$20())&&i>0&&b===0&&(this.$12==null||this.$12+f*1e3<Date.now())&&(c===0||this.$13!=null&&this.$13+c*1e3<Date.now())){h=1+i;this.$6==null&&(this.$6=this.$5.getOperationLogger("latency_manager").start().setInitiator("speed_adjustment").setReason("fast").setUserInfo({newPlaybackRate:String(h),oldPlaybackRate:String(this.$4.playbackRate)}));this.$26(h)}else if(this.$14===!1||this.$11==null||this.$11+e*1e3<Date.now()){g=this.$4.playbackRate;this.$1.getBool("fix_live_rewind_user_selected_playback_speed")?this.$4.playbackRate=this.$14===!1?this.$15():1:this.$4.playbackRate=1;(d=this.$6)==null?void 0:d.log();this.$6=null;g!==this.$4.playbackRate&&(this.$12=Date.now())}};b.$26=function(a){try{this.$4.playbackRate=a,this.$11=Date.now()}catch(b){(a=this.$6)==null?void 0:a.setError(b).setResult("failed").log();this.$6=null}};b.$22=function(){var a=this.$2.getVideoRepresentations().concat(this.$2.getAudioRepresentations());return a.length===0?null:a.reduce(function(a,b){var c;return(((c=a.getEndingSegment())==null?void 0:c.getTimeRange().endTime)||0)>(((c=b.getEndingSegment())==null?void 0:c.getTimeRange().endTime)||0)?a:b})};b.$23=function(a){var b;if(a<=0)return a;var c=this.$22();b=c==null?void 0:(b=c.getEndingSegment())==null?void 0:b.getTimeRange();if(!b)return a;c=c==null?void 0:(c=c.getSegmentByTime((b==null?void 0:b.endTime)-a))==null?void 0:c.getTimeRange();return!c?a:(b==null?void 0:b.endTime)-(c==null?void 0:c.startTime)};b.destroy=function(){this.$8.release()};return a}();g["default"]=a}),98);
__d("oz-player/playback_controls/OzPlaybackTimeRangeManager",["oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$4=null;this.$5=0;this.$6=0;this.$7=!0;this.$8=0;this.$9=0;this.$10=!1;this.$12=0;this.$13=0;this.$15=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$17=function(){b.$10!=b.$14.isPlaying()&&(b.$14.isPlaying()&&(b.$11=Date.now()),b.$10=b.$14.isPlaying())};var d=a.video,e=a.config,f=a.mpd,g=a.liveheadFallBehindBlockThreshold,h=a.liveheadFallBehindBlockMargin,i=a.playbackState;a=a.perfLoggerProvider;this.$1=e;this.$2=d;this.$3=f;this.$8=g;this.$9=h;this.$14=i;this.$16=a;this.$1.getNumber("catchup_timeout_after_play_sec")!==0&&this.$15.addSubscriptions(this.$14.addEventListener("play",this.$17),this.$14.addEventListener("pause",this.$17))}var b=a.prototype;b.setTimelineBlockingEnabled=function(a){this.$7=a,this.$7||this.$3.unblockTimeRange()};b.setTimeRangeProvider=function(a){var b=this;this.$4!=null&&this.$4.remove();this.$4=a.addUpdateListener(function(){var c=a.getTimeRanges(),d=0;if(c.length!==0){c=c[c.length-1];d=c.endTime}b.$18(d)})};b.$18=function(a){var b;if(!this.$7)return;if(this.$5===a)return;this.$5=a;if(this.$2.currentTime<=this.$6)return;a=this.$1.getBool("catchup_use_timeline_range_end_time_as_end")?a:this.$2.duration;var c=this.$1.getNumber("overwrite_livehead_fall_behind_block_threshold")!==0?this.$1.getNumber("overwrite_livehead_fall_behind_block_threshold"):this.$8,e=this.$1.getNumber("overwrite_live_time_range_block_margin")!==0?this.$1.getNumber("overwrite_live_time_range_block_margin"):this.$9;this.$17();this.$1.getBool("reset_catchup_timeout_after_play_sec_on_overwrite")&&(this.$13!=e||this.$12!=c)&&(this.$13=e,this.$12=c,this.$11=Date.now());b=this.$1.getNumber("catchup_timeout_after_play_sec")===0||Date.now()-((b=this.$11)!=null?b:0)<this.$1.getNumber("catchup_timeout_after_play_sec")*1e3;if(b&&this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")===0&&e!==0&&c!==0&&a-this.$2.currentTime>c){b=[];for(c=0;c<this.$2.buffered.length;c++)b.push({startTime:this.$2.buffered.start(c),endTime:this.$2.buffered.end(c)});c=d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(this.$2.currentTime,b);this.$6=this.$2.currentTime+Math.min(c,e);b={startTime:this.$6,endTime:a-e};this.$16.getOperationLogger("latency_manager").setInitiator("time_range_manager").setReason("blocked_range").setLength(b.endTime-b.startTime).setUserInfo({blockedRangeStart:String(b.startTime),blockedRangeEnd:String(b.endTime)}).log();this.$3.blockTimeRange(b)}};b.destroy=function(){this.$4!=null&&(this.$4.remove(),this.$4=null),this.$15.release()};return a}();g["default"]=a}),98);
__d("oz-player/strategies/LiveheadSeekaheadStrategy",[],(function(a,b,c,d,e,f){"use strict";var g=.05;function a(a,b){b=Math.max.apply(Math,b.map(function(a){return a.startTime}));return b-a>0?b-a+g:0}f.computeSeekAhead=a}),66);
__d("oz-player/utils/OzTimelineGapUtil",["oz-player/utils/OzNumericalHelper","oz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f,g){"use strict";var h=1.5;function a(a,b,c,e){b=b.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});return d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,a,b,e)===-1}function b(a,b,c,e,f){f===void 0&&(f=h);var g=b.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});c=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(c,a,g,e);if(c!==-1){g=b[c];return d("oz-player/utils/OzNumericalHelper").lessThanOrEqual(a,g.endTime)&&g.endTime-a<f}return!1}g.isInGap=a;g.isNearGap=b}),98);
__d("oz-player/playback_controls/OzPlayheadManager",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/shims/ozvariant","oz-player/strategies/LiveheadSeekaheadStrategy","oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzSourceBufferUtil","oz-player/utils/OzTimelineGapUtil"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a){this.$1=a.perfLoggerProvider,this.$2=a.video,this.$4=a.config}var b=a.prototype;b.markState=function(a,b){var c=d("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$2.buffered),e=this.$3;if(e==null){this.$3=c;return}var f=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(c,b.getCurrentTime(),this.$4);e=d("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(e,b.getCurrentTime(),this.$4);e.bufferedOffset!==-1&&f.bufferedOffset===-1&&this.$1.getOperationLogger("playhead_adjustment").setError("buffer_deleted").setResult("failed").setUserInfo({vidSeeking:String(this.$2.seeking),vidErrCode:this.$2.error?String(this.$2.error.code):null}).setInitiator(a).log();this.$3=c};return a}(),i=function(){function a(a){this.$5=!1,this.$6={},this.$1=a.perfLoggerProvider,this.$2=a.video}var b=a.prototype;b.markState=function(a,b){var c=this;if(this.$2.paused){this.$3=null;this.$4=null;this.$5=!1;this.$6={};return}(this.$3==null||this.$2.currentTime>this.$3)&&(this.$4=Date.now(),this.$3=this.$2.currentTime,this.$5=!1,this.$6={});this.$6[a]=this.$6[a]==null?1:this.$6[a]+1;var d=this.$4;if(!this.$5&&!this.$2.paused&&d!=null&&d+1e4<Date.now()){this.$5=!0;var e={};Object.keys(this.$6).forEach(function(a){e[a]=String(c.$6[a])});this.$1.getOperationLogger("playhead_adjustment").setError("not_advancing").setResult("failed").setLength(Date.now()-d).setUserInfo(babelHelpers["extends"]({},e,b,{lastCurrentTime:String(this.$3),lastCurrentTimeChanged:String(d-Date.now()),vidSeeking:String(this.$2.seeking),vidErrCode:this.$2.error?String(this.$2.error.code):null})).setInitiator(a).log()}};return a}();a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;e=a.call(this)||this;e.$OzPlayheadManager$p_2=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPlayheadManager$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPlayheadManager$p_4=new Set();e.$OzPlayheadManager$p_10=new Set();e.$OzPlayheadManager$p_12=function(a){e.$OzPlayheadManager$p_1.currentTime=a};e.$OzPlayheadManager$p_14=!1;e.$OzPlayheadManager$p_15=!1;e.$OzPlayheadManager$p_16=!0;e.$OzPlayheadManager$p_17=!1;e.$OzPlayheadManager$p_23=function(a,b){b===void 0&&(b=null);if(e.$OzPlayheadManager$p_20!=null?!e.$OzPlayheadManager$p_20.shouldEnableManifestTimeRangeCatchup():!1)return;var c=e.$OzPlayheadManager$p_9;if(c&&c.isEnabled(e.$OzPlayheadManager$p_1,e.$OzPlayheadManager$p_8)){c=c.computeNewPlayheadPosition(e.$OzPlayheadManager$p_1,e.$OzPlayheadManager$p_8);if(typeof c==="number"){e.$OzPlayheadManager$p_27(c,"live_catch_up_strategy",a,b);return}}c=e.$OzPlayheadManager$p_6.getNumber("auto_seek_playhead_slack");if(c===0)return;var f=e.$OzPlayheadManager$p_5;if(!f)return;var g=e.$OzPlayheadManager$p_7.getCurrentTime(),h=f.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}),i=d("oz-player/utils/OzNumericalRangeUtil").findNextRangeIndex(g,h);if((d("oz-player/utils/OzTimelineGapUtil").isNearGap(g,f.getTimeRanges(),e.$OzPlayheadManager$p_6)||d("oz-player/utils/OzTimelineGapUtil").isInGap(g,f.getTimeRanges(),e.$OzPlayheadManager$p_6))&&i!==-1){g=h[i];e.$OzPlayheadManager$p_27(g.rangeStart+c,"jump_over_timeline_gap",a,b)}};var f=b.video,g=b.mpd,j=b.playheadCatchup,k=b.playbackState,l=b.config,m=b.perfLoggerProvider,n=b.seekHandler,o=b.initialPlaybackPosition,p=b.canSupportSkipVideobufferGaps,q=b.liveLatencyManager;b=b.dynamicVideoLibrary;e.$OzPlayheadManager$p_1=f;e.$OzPlayheadManager$p_6=l;e.$OzPlayheadManager$p_7=k;e.$OzPlayheadManager$p_8=g;e.$OzPlayheadManager$p_9=j;e.$OzPlayheadManager$p_11=m;n&&(e.$OzPlayheadManager$p_12=n);e.$OzPlayheadManager$p_17=p;e.$OzPlayheadManager$p_20=q;e.$OzPlayheadManager$p_13=o;e.$OzPlayheadManager$p_21=b;e.$OzPlayheadManager$p_18=new i({video:f,perfLoggerProvider:m});e.$OzPlayheadManager$p_19=new h({video:f,perfLoggerProvider:m,config:l});e.$OzPlayheadManager$p_2.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"durationchange",function(){e.setPlaybackPositionOnFirstDurationChange("durationchange",e.$OzPlayheadManager$p_1.duration),e.$OzPlayheadManager$p_23("durationchange"),e.$OzPlayheadManager$p_24("durationchange")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"pause",function(){e.$OzPlayheadManager$p_23("pause")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"play",function(){e.$OzPlayheadManager$p_23("play")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"playing",function(){e.$OzPlayheadManager$p_23("playing")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"waiting",function(){e.$OzPlayheadManager$p_23.bind(babelHelpers.assertThisInitialized(e),"waiting"),e.$OzPlayheadManager$p_24("waiting")}),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"timeupdate",c("oz-player/shims/ozThrottle")(function(){e.$OzPlayheadManager$p_23("timeupdate"),e.$OzPlayheadManager$p_6.getBool("playhead_manager_buffered_timerange_update_on_timeupdate")&&e.$OzPlayheadManager$p_24("timeupdate")},e.$OzPlayheadManager$p_6.getNumber("playhead_manager_timeupdate_throttle_ms"))),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager$p_1,"seeking",function(){e.$OzPlayheadManager$p_22=Date.now()}));return e}var e=b.prototype;e.$OzPlayheadManager$p_25=function(){return this.$OzPlayheadManager$p_1.playbackRate===0};e.observeSourceBufferState=function(a,b){var d=this;this.$OzPlayheadManager$p_4.has(a)&&c("oz-player/shims/ozvariant")(0,4179);this.$OzPlayheadManager$p_4.add(a);this.$OzPlayheadManager$p_2.addSubscriptions(a.addEventListener("buffer_updated",function(){d.$OzPlayheadManager$p_26(a,b),d.$OzPlayheadManager$p_6.getBool("skip_videobuffer_gaps_on_buffer_updated")&&d.$OzPlayheadManager$p_17&&d.$OzPlayheadManager$p_24("buffer_updated")}))};e.$OzPlayheadManager$p_26=function(a,b){var c=[];this.$OzPlayheadManager$p_4.forEach(function(a){a=a.getBufferedRanges();a.length&&c.push(a[0])});c.length>0&&this.$OzPlayheadManager$p_10.add(a);a=this.$OzPlayheadManager$p_1.currentTime;a=d("oz-player/strategies/LiveheadSeekaheadStrategy").computeSeekAhead(a,c);var e=this.$OzPlayheadManager$p_6.getNumber("timeline_offset_threshold");a>0&&(e===0||a<e)&&this.$OzPlayheadManager$p_27(this.$OzPlayheadManager$p_1.currentTime+a,"first_available_buffer","source_buffer",b)};e.setTimeRangeProvider=function(a){var b=this;this.$OzPlayheadManager$p_3.release();this.$OzPlayheadManager$p_3.engage();this.$OzPlayheadManager$p_3.addSubscriptions(a.addUpdateListener(function(){b.$OzPlayheadManager$p_23("time_range_updated")}));this.$OzPlayheadManager$p_5=a;this.$OzPlayheadManager$p_23("time_range_set")};e.resetCurrentTime=function(){this.$OzPlayheadManager$p_15=!1,this.setPlaybackPositionOnFirstDurationChange("reset",this.$OzPlayheadManager$p_1.duration)};e.setPlaybackPositionOnFirstDurationChange=function(a,b){if(this.$OzPlayheadManager$p_13!==0&&!this.$OzPlayheadManager$p_15&&!isNaN(b)&&b!==Infinity){b=this.$OzPlayheadManager$p_13>0?this.$OzPlayheadManager$p_13:b+this.$OzPlayheadManager$p_13;if(this.$OzPlayheadManager$p_20!=null){var c;b=(c=this.$OzPlayheadManager$p_20)==null?void 0:c.getInitialPlayHeadPosition()}this.$OzPlayheadManager$p_15=!0;if(this.$OzPlayheadManager$p_6.getBool("playhead_manager_clamp_initial_playback_position")){c=(c=this.$OzPlayheadManager$p_5)==null?void 0:c.getTimeRanges();c!=null&&c.length>0&&c[0].startTime>b&&(b=c[0].startTime)}this.$OzPlayheadManager$p_27(b,"initial_playback_position",a);this.emit("initialPlaybackPositionSet",b)}};e.$OzPlayheadManager$p_24=function(a){var b,c,e=this;if(!this.$OzPlayheadManager$p_6.getBool("skip_videobuffer_gaps"))return;if(!this.$OzPlayheadManager$p_17)return;var f=this.$OzPlayheadManager$p_6.getNumber("playhead_manager_buffered_auto_seek_playhead_slack");if(f===0)return;var g=this.$OzPlayheadManager$p_7.getCurrentTime(),h=[];for(var i=0;i<this.$OzPlayheadManager$p_1.buffered.length;i++)h.push({startTime:this.$OzPlayheadManager$p_1.buffered.start(i),endTime:this.$OzPlayheadManager$p_1.buffered.end(i)});i=h.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});this.$OzPlayheadManager$p_19&&this.$OzPlayheadManager$p_19.markState(a,this.$OzPlayheadManager$p_7);var j=d("oz-player/utils/OzNumericalRangeUtil").findNextRangeIndex(g,i),k=d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(this.$OzPlayheadManager$p_6,g,i),l=this.$OzPlayheadManager$p_16?0:this.$OzPlayheadManager$p_6.getNumber("skip_videobuffer_gaps_max_gap_size_sec"),m=this.$OzPlayheadManager$p_6.getNumber("playhead_manager_buffered_is_near_gap_threshold"),n=this.$OzPlayheadManager$p_6.getNumber("playhead_manager_buffered_numerical_error");b=(b=this.$OzPlayheadManager$p_21)==null?void 0:b.getLastSegmentStartPTS();var o=b!=null?b/1e3:null,p=(c=this.$OzPlayheadManager$p_21)==null?void 0:c.getLast200RequestedUrlDecisionMinTime();c=o!=null?d("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(this.$OzPlayheadManager$p_6,o,i):-1;var q=c>=0?i[c]:null,r=function(b){var c=e.$OzPlayheadManager$p_22==null||p==null||e.$OzPlayheadManager$p_22<p;!c&&b!=null&&e.$OzPlayheadManager$p_11.getOperationLogger("playhead_adjustment").setError("ignore_before_seek_main_"+b).setResult("failed").setInitiator(a).setUserInfo({last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(e.$OzPlayheadManager$p_22)}).log();return c};if(o!=null&&this.$OzPlayheadManager$p_25()&&this.$OzPlayheadManager$p_16==!1&&r("buf")){if(o<g&&q!=null&&q.rangeStart<=o&&q.rangeEnd!=null&&q.rangeEnd>o){this.$OzPlayheadManager$p_27(o,"reverse_jump_over_buffer_gap",a,null,{lastSegmentStartPTS:String(b),last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(this.$OzPlayheadManager$p_22)});return}if(q!=null&&c!=k){this.$OzPlayheadManager$p_27(q.rangeStart,"jump_over_buffer_gap_last_dl_range",a,null,{lastSegmentStartPTS:String(b),last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(this.$OzPlayheadManager$p_22)});return}}if((d("oz-player/utils/OzTimelineGapUtil").isNearGap(g,h,this.$OzPlayheadManager$p_6,n,m)||d("oz-player/utils/OzTimelineGapUtil").isInGap(g,h,this.$OzPlayheadManager$p_6,n))&&j!==-1&&(l===0||i[j].rangeStart-g<l)&&(this.$OzPlayheadManager$p_16==!0||r("main"))){o=i[j];this.$OzPlayheadManager$p_6.getBool("enable_alternative_audio_tracks")&&this.$OzPlayheadManager$p_8.isStaticMpd()&&o.rangeStart!==0&&o.rangeEnd===this.$OzPlayheadManager$p_7.getDuration()?this.$OzPlayheadManager$p_27(0,"do_not_jump_over_buffer_gap",a,null,{lastSegmentStartPTS:String(b),last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(this.$OzPlayheadManager$p_22)}):this.$OzPlayheadManager$p_27(o.rangeStart+f,"jump_over_buffer_gap",a,null,{lastSegmentStartPTS:String(b),last200RequestedUrlDecisionMinTime:String(p),lastSeekTime:String(this.$OzPlayheadManager$p_22)});return}this.$OzPlayheadManager$p_18&&this.$OzPlayheadManager$p_18.markState(a,{nextBufferedRangeIndex:String(j),limitMaxGapSize:String(l),rangeStart:j!==-1?String(i[j].rangeStart):null,isNearGapThreshold:String(m),numericalError:String(n)})};e.setEnableLiveheadCatchup=function(a){this.$OzPlayheadManager$p_16=a};e.destroy=function(){this.$OzPlayheadManager$p_2.release(),this.$OzPlayheadManager$p_3.release(),this.$OzPlayheadManager$p_4.clear()};e.$OzPlayheadManager$p_27=function(a,b,c,d,e){var f=a-this.$OzPlayheadManager$p_1.currentTime,g=this.$OzPlayheadManager$p_6.getNumber("seek_ahead_epsilon");if(g>0&&Math.abs(f)<=g)return;this.$OzPlayheadManager$p_11.getOperationLogger("playhead_adjustment").setLength(Math.round(a*1e3)).setReason(b).setInitiator(c).setType(d).setUserInfo(babelHelpers["extends"]({},e,{seekAdjustment:String(Math.round(f*1e3))})).log();this.$OzPlayheadManager$p_12(a);b==="initial_playback_position"&&(this.$OzPlayheadManager$p_14=!0)};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/shims/www/OzUuidWWW",["uuidv4"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("uuidv4")}),98);
__d("oz-player/shims/OzUuid",["oz-player/shims/www/OzUuidWWW"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/shims/www/OzUuidWWW")}),98);
__d("oz-player/states/OzObservedPlaybackState",["oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/shims/OzDOMEventListener","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e){var f=this;e===void 0&&(e=new(d("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)([]));this.$2=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=function(){f.$3.getOperationLogger("pause").setState("paused").log()};this.$5=function(){f.$3.getOperationLogger("playing").setState("playing").log()};this.$1=b;this.$3=e;this.$2.addSubscriptions(c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"pause",this.$4),c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"playing",this.$5))}var b=a.prototype;b.isPlaying=function(){return!this.$1.paused};b.getCurrentTime=function(){return this.$1.currentTime};b.getCurrentTimeUpdateTime=function(){return Date.now()};b.getDuration=function(){return this.$1.duration};b.addEventListener=function(a,b){return c("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,a,b)};b.destroy=function(){this.$2.release()};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzPositionToViewportUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){b=b.filter(function(a){a=a.position;if(a==null)return!1;var b=a.y-window.scrollY;return b>=0||(a.height+b)/a.height>c}).sort(function(a,b){return a.position==null||b.position==null?0:a.position.y-b.position.y});return b.findIndex(function(b){return b.video===a})}function b(a){return a.isIntersecting!=null?a.isIntersecting:a.intersectionRatio>0||a.intersectionRect&&(a.intersectionRect.height>0||a.intersectionRect.width>0)}f.determinePositionIndexOfVideoFromViewportVertically=a;f.intersectionObserverEntryIsIntersecting=b}),66);
__d("oz-player/states/OzPositionToViewportTracker",["oz-player/shims/OzEventEmitter","oz-player/utils/OzPositionToViewportUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=.5;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$OzPositionToViewportTracker$p_1=[];c.$OzPositionToViewportTracker$p_5=function(a){a.forEach(function(a){var b=c.$OzPositionToViewportTracker$p_1.find(function(b){return a.target===b.video});b!=null&&(d("oz-player/utils/OzPositionToViewportUtils").intersectionObserverEntryIsIntersecting(a)?b.position=c.$OzPositionToViewportTracker$p_7(a):c.$OzPositionToViewportTracker$p_1.map(function(b){a.target===b.video&&(b.position=null)}));c.$OzPositionToViewportTracker$p_1.forEach(function(a){a.positionIndexToViewportVertically=c.$OzPositionToViewportTracker$p_6(a.video)})}),c.emit("state_changed")};c.$OzPositionToViewportTracker$p_2=b;return c}var c=b.prototype;c.$OzPositionToViewportTracker$p_4=function(){if(this.$OzPositionToViewportTracker$p_3!=null)return;this.$OzPositionToViewportTracker$p_3=new IntersectionObserver(this.$OzPositionToViewportTracker$p_5,{rootMargin:this.$OzPositionToViewportTracker$p_2.getNumber("pixels_above_viewport_to_observe")+"px 0px "+this.$OzPositionToViewportTracker$p_2.getNumber("pixels_below_viewport_to_observe")+"px 0px",threshold:0})};c.registerVideo=function(a){this.$OzPositionToViewportTracker$p_1.push({video:a,position:null,positionIndexToViewportVertically:-1}),this.$OzPositionToViewportTracker$p_4(),this.$OzPositionToViewportTracker$p_3!=null&&this.$OzPositionToViewportTracker$p_3.observe(a)};c.getPositionIndexOfVideoFromViewportVertically=function(a){var b=this.$OzPositionToViewportTracker$p_1.find(function(b){return b.video===a});return b!=null?b.positionIndexToViewportVertically:-1};c.$OzPositionToViewportTracker$p_6=function(a){return d("oz-player/utils/OzPositionToViewportUtils").determinePositionIndexOfVideoFromViewportVertically(a,this.$OzPositionToViewportTracker$p_1,i)};c.$OzPositionToViewportTracker$p_7=function(a){a=a.boundingClientRect;return{x:a.x+window.scrollX,y:a.y+window.scrollY,width:a.width,height:a.height}};b.getInstance=function(a){h==null&&(h=new b(a));return h};c.unregisterVideo=function(a){var b=this,c=[];this.$OzPositionToViewportTracker$p_1.forEach(function(d){d.video===a&&b.$OzPositionToViewportTracker$p_3!=null?b.$OzPositionToViewportTracker$p_3.unobserve(a):c.push(d)});this.$OzPositionToViewportTracker$p_1=c;this.$OzPositionToViewportTracker$p_1.length===0&&this.$OzPositionToViewportTracker$p_3!=null&&(this.$OzPositionToViewportTracker$p_3.disconnect(),this.$OzPositionToViewportTracker$p_3=null)};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/states/OzPositionToViewport",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/states/OzPositionToViewportTracker"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzPositionToViewport$p_1=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPositionToViewport$p_3=b;e.$OzPositionToViewport$p_2=c("oz-player/states/OzPositionToViewportTracker").getInstance(d);e.$OzPositionToViewport$p_2.registerVideo(b);e.$OzPositionToViewport$p_1.addSubscriptions(e.$OzPositionToViewport$p_2.addListener("state_changed",function(){e.emit("state_changed")}));return e}var d=b.prototype;d.getPositionIndexOfVideoFromViewportVertically=function(){return this.$OzPositionToViewport$p_3!=null?this.$OzPositionToViewport$p_2.getPositionIndexOfVideoFromViewportVertically(this.$OzPositionToViewport$p_3):-1};d.destroy=function(){this.$OzPositionToViewport$p_3!=null&&this.$OzPositionToViewport$p_2.unregisterVideo(this.$OzPositionToViewport$p_3),this.$OzPositionToViewport$p_3=null};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPlaybackConfidenceUtils",[],(function(a,b,c,d,e,f){"use strict";var g=.8;function a(a,b,c,d,e,f){f=Math.min(1,c/d);c=1+(1-f)*e;d=a.getBandwidth()*c;return d>b?g*(b/d):1-(1-g)*d/b}f.getPlaybackConfidence=a}),66);
__d("oz-player/strategies/OzAbrManager",["oz-player/networks/OzBandwidthEstimator","oz-player/strategies/OzPlaybackConfidenceUtils","oz-player/utils/OzAbrUtils","oz-player/utils/OzBufferingUtils","oz-player/utils/OzPlaybackRestrictionsUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d,e,f,g,h,i){this.$2=0,this.$3=Date.now(),this.$4=!1,this.$10=null,this.$1=a,this.$5=b,this.$6=this.$15(b,c),this.$7=d,this.$8=e,this.$11=f,this.$12=g,this.$13=h,this.$14=i,this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_initialized").setResult("success").setUserInfo({newRepresentationIds:c.map(function(a){return a.getID()}).join(","),newCodecs:c.map(function(a){return a.getCodecs()}).join("|"),newDisplayLabels:c.map(function(a){return a.getDisplayLabel()}).join(",")}).setRepresentationID(b.getID()).setType("video").setInitiator("OzAbrManager").log()}var b=a.prototype;b.setSourceBuffer=function(a){this.$9=a};b.$15=function(a,b){var c=this.$1.getNumber("abr_restrict_from_index"),d=this.$1.getNumber("abr_restrict_to_index");if(d===0&&c===0)return b;var e=b.findIndex(function(b){return a.getID()===b.getID()});return e===-1?b:b.filter(function(a,b){return b-e>=c&&b-e<=d})};b.$16=function(a){a=d("oz-player/utils/OzAbrUtils").excludeLargeRepresentations(a,this.$12(),this.$11,{resolutionConstraintFactor:this.$1.getNumber("resolution_constraint_factor")});a=d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$7,this.$12(),a);return a};b.getBestRepresentation=function(a){var b;a=(a=a==null?void 0:a.length)!=null?a:null;b=(b=(b=this.$9)==null?void 0:b.getSourceBufferState().getBufferedRanges())!=null?b:null;var e=this.$8.getCurrentTime();e=d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(e,b);b=d("oz-player/utils/OzAbrUtils").getReasonToPreventEvaluation(this.$1,this.$4,e,c("oz-player/networks/OzBandwidthEstimator").getSampleCount(),this.$2,this.$3);if(b!=null){this.$10=b;this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_best_representation_selected").setResult("failed").setReason(this.$10).setType("video").setInitiator("OzAbrManager").log();return this.$5}b=Date.now();this.$2=b;var f=c("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(this.$1.getLegacyConfig()),g=this.$16(this.$6);f=this.$17(g,f,e,a);a=g[0];f=f||a;if(this.$18(e,f)){this.$10="high_buffer";this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_best_representation_selected").setResult("failed").setUserInfo({filteredRepresentationIds:g.map(function(a){return a.getID()}).join(",")}).setPreviousRepresentationID(this.$5.getID()).setReason(this.$10).setType("video").setInitiator("OzAbrManager").log();return this.$5}a=this.$5;a!==f&&(this.$4=!0,this.$3=b,this.$5=f);this.$10="bandwidth";this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_best_representation_selected").setResult("success").setUserInfo({filteredRepresentationIds:g.map(function(a){return a.getID()}).join(",")}).setRepresentationID(f.getID()).setPreviousRepresentationID(a==null?void 0:a.getID()).setReason(this.$10).setType("video").setInitiator("OzAbrManager").log();return f};b.$17=function(a,b,c,e){e===void 0&&(e=null);var f=null;for(var g=0;g<a.length;g++){var h=d("oz-player/strategies/OzPlaybackConfidenceUtils").getPlaybackConfidence(a[g],b,c,this.$1.getNumber("low_buffer_bandwidth_target_threshold"),this.$1.getNumber("low_buffer_bandwidth_target_increase_factor"),e);h>this.$1.getNumber("abr_confidence_threshold")&&(!f||f.getBandwidth()<a[g].getBandwidth())&&(f=a[g])}return f};b.$18=function(a,b){var c=this.$1.getNumber("abr_prevent_down_switch_buffer_threshold");return c>0&&a>=c&&this.$5.getBandwidth()>b.getBandwidth()?!0:!1};b.getLastEvaluationReason=function(){return this.$10};b.updateRepresentations=function(a){var b=this,c=this.$6;this.$6=a;var d=this.$6.find(function(a){return a.getDisplayLabel()===b.$5.getDisplayLabel()}),e=this.$5;this.$5=(d=d)!=null?d:this.$6[0];this.$1.getBool("enable_abr_logging")&&this.$14.getOperationLogger("abr_representations_updated").setResult("success").setUserInfo({previousRepresentationIds:c.map(function(a){return a.getID()}).join(","),newRepresentationIds:a.map(function(a){return a.getID()}).join(","),newCodecs:a.map(function(a){return a.getCodecs()}).join("|"),newDisplayLabels:a.map(function(a){return a.getDisplayLabel()}).join(",")}).setRepresentationID(this.$5.getID()).setPreviousRepresentationID(e==null?void 0:e.getID()).setReason(this.$10).setType("video").setInitiator("OzAbrManager").log()};return a}();g["default"]=a}),98);
__d("oz-player/strategies/getSegmentsCount",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){var e=0,f=a.getTimeRange().startTime;a=a;var g=a.getTimeRange().startTime;while(a!==null&&g<c+f){var h=g;e++;a=b.getSegmentAfter(a);if(a)g=a.getTimeRange().startTime;else break;if(g<=h)return d}return Math.max(e,1)}f["default"]=a}),66);
__d("oz-player/strategies/OzStaticStreamSegmentsStrategy",["oz-player/strategies/getSegmentsCount"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.isActive=function(){return!0};b.getSegmentsCount=function(a,b,d){a=this.$1.getNumber("seconds_to_stream");var e=this.$1.getNumber("segments_to_stream");a>0&&(e=c("oz-player/strategies/getSegmentsCount")(b,d,a,e));return e};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy",["oz-player/networks/OzBandwidthEstimator","oz-player/strategies/OzStaticStreamSegmentsStrategy","oz-player/strategies/getSegmentsCount"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b,this.$3=new(c("oz-player/strategies/OzStaticStreamSegmentsStrategy"))(a)}var b=a.prototype;b.isActive=function(a){return!0};b.getSegmentsCount=function(a,b,d){var e=c("oz-player/networks/OzBandwidthEstimator").getBandwidth(this.$1.getLegacyConfig()),f=c("oz-player/networks/OzBandwidthEstimator").getStandardDeviationOfBandwidth(),g=this.$1.getNumber("bandwidth_boundary_standard_deviation_factor"),h=this.$2.some(function(a){a=a.getBandwidth();return Math.abs(a-e)<f*g});h=h?this.$4(a,b,d):this.$3.getSegmentsCount(a,b,d);a=this.$5(b,e);return Math.min(h,a)};b.$4=function(a,b,d){a=this.$1.getNumber("seconds_to_stream_near_bandwidth_boundary");var e=this.$1.getNumber("segments_to_stream_near_bandwidth_boundary");a>0&&(e=c("oz-player/strategies/getSegmentsCount")(b,d,a,e));return e};b.$5=function(a,b){var c=Infinity;a=a.getByteRange();if(a){var d=a.endByte;if(d!=null){var e=this.$1.getNumber("per_stream_duration_target");d=d-a.startByte;e>1e-5&&d!==0&&(c=Math.ceil(e*b/(d*8)))}}return c};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzBlockedRepresentationsManager",["oz-player/shims/OzEventEmitter","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$2=new Map(),this.$3=new Set(),this.$4=new Set(),this.$5=new(c("oz-player/shims/OzEventEmitter"))(),this.$6(a),this.$7(a)}var b=a.prototype;b.isBlocked=function(a){return this.$3.has(a)};b.handleError=function(a,b){if(this.$1!=null&&this.$3.size===this.$1-1)return!1;if(d("oz-player/utils/OzErrorUtils").isOzError(b)&&b.getType()==="OZ_NETWORK"){b=Number(b.getExtra().code);if(!isNaN(b)&&this.$2.has(b)){this.$3.has(a)||this.$8(a,b);return!0}}return!1};b.$8=function(a,b){var d,e=this;this.$3.add(a);(d=this.$5)==null?void 0:d.emit("representation_blocked",a);d=this.$2.get(b)||0;if(d>0){var f=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){e.$3["delete"](a),e.$4["delete"](f)},d);this.$4.add(f)}};b.applyRestriction=function(a){var b=this;return a.filter(function(a){return!b.$3.has(a.getID())})};b.onRepresentationBlocked=function(a){return this.$5?this.$5.addListener("representation_blocked",a):{remove:function(){}}};b.setAvailableRepresentationsCount=function(a){this.$1=a};b.destroy=function(){var a;(a=this.$5)==null?void 0:a.removeAllListeners();this.$5=null;for(var a=this.$4,b=Array.isArray(a),d=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(b){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;c("oz-player/shims/ozClearTimeout")(e)}this.$4.clear()};b.$6=function(a){var b=this;try{a=JSON.parse(a.getString("block_representation_status_codes_json"));Array.isArray(a)&&a.forEach(function(a){a=parseInt(a,10);isNaN(a)||b.$2.set(a,-1)})}catch(a){}};b.$7=function(a){var b=this;try{a=JSON.parse(a.getString("block_representation_status_codes_temporarily_json"));Object.entries(a).forEach(function(a){var c=a[0];a=a[1];c=parseInt(c,10);a=parseInt(a,10);!isNaN(c)&&!isNaN(a)&&b.$2.set(c,a)})}catch(a){}};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzBufferAheadPriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=6,i=1e3;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzBufferAheadPriorityStrategy$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzBufferAheadPriorityStrategy$p_5=function(){e.emit("state_changed")};e.$OzBufferAheadPriorityStrategy$p_4=b;e.$OzBufferAheadPriorityStrategy$p_1=d;e.$OzBufferAheadPriorityStrategy$p_3.addSubscriptions(e.$OzBufferAheadPriorityStrategy$p_1.addEventListener("progress",c("oz-player/shims/ozThrottle")(e.$OzBufferAheadPriorityStrategy$p_5,i)),e.$OzBufferAheadPriorityStrategy$p_1.addEventListener("timeupdate",c("oz-player/shims/ozThrottle")(e.$OzBufferAheadPriorityStrategy$p_5,i)));return e}var e=b.prototype;e.getName=function(){return"buffer_ahead"};e.setSourceBufferState=function(a){if(this.$OzBufferAheadPriorityStrategy$p_2)return;this.$OzBufferAheadPriorityStrategy$p_2=a;this.$OzBufferAheadPriorityStrategy$p_3.addSubscriptions(a.addEventListener("buffer_updated",c("oz-player/shims/ozThrottle")(this.$OzBufferAheadPriorityStrategy$p_5,i)))};e.isActive=function(){return!0};e.getPriority=function(){var a=this.$OzBufferAheadPriorityStrategy$p_2;if(!a)return 1;var b=this.$OzBufferAheadPriorityStrategy$p_1.getCurrentTime();a=a.getBufferedRanges();b=d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(b,a);return b>=h?0:1};e.destroy=function(){this.$OzBufferAheadPriorityStrategy$p_3.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzBufferAheadTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.isActive=function(){return!0};b.getBufferTarget=function(){return this.$1.getNumber("buffer_ahead_target")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferEndLimitStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.isActive=function(){return!0};b.getBufferTarget=function(){var a=this.$3();return this.$2>=a?this.$2-a:0};b.$3=function(){return this.$1.buffered.length===0?0:this.$1.buffered.end(0)};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.isActive=function(a){return!a.isPlaying()};b.getSegmentsCount=function(a,b,c){a=a.getCurrentTime();var d=this.$1.computeBufferTarget(),e=1,f=b;b=b.getTimeRange().startTime;while(f!==null&&b<d+a){f=c.getSegmentAfter(f);if(!f)break;b=f.getTimeRange().startTime;e++}return e};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferTargetCalculator",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=0,this.$2=a,this.$3=b}var b=a.prototype;b.computeBufferTarget=function(){var a=this.$1;for(var b=this.$2,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;if(e.isActive()){a=e.getBufferTarget();break}}for(e=this.$3,d=Array.isArray(e),c=0,e=d?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(d){if(c>=e.length)break;b=e[c++]}else{c=e.next();if(c.done)break;b=c.value}b=b;a=b.adjustBufferTargetInSeconds(a)}this.$1=a;return a};b.handleEvent=function(a){for(var b=this.$3,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.handleEvent(a)}};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){var b=a.config;a=a.minimumBufferTargetSec;this.$2=1;this.$1=b;this.$3=a}var b=a.prototype;b.adjustBufferTargetInSeconds=function(a){var b;return Math.max((b=this.$3)!=null?b:this.$1.getNumber("buffer_target_constraint_minimum_sec"),a*this.$2)};b.handleEvent=function(a){var b=this.$2;switch(a){case"append_succeeded":b=Math.max(0,Math.min(1,b+this.$1.getNumber("buffer_target_constraint_append_succeeded_reward")));break;case"append_quota_exceeded":b=Math.max(0,Math.min(1,b-this.$1.getNumber("buffer_target_constraint_quota_exceeded_penalty")));break;default:a}this.$2=b};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzDenseLaneSingleRepresentationRestriction",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var b=a.prototype;b.applyRestriction=function(a){if(a.length<=0)return a.slice();var b=new Map();for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f=e.getDisplayLabel();if(b.has(f))continue;b.set(f,e)}return Array.from(b.values())};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzPausedStreamSegmentsCountStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.isActive=function(){return!this.$1.isPlaying()};b.getSegmentsCount=function(a,b,c){return this.$2.getNumber("paused_stream_segments_count")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzPlayheadAtInterruptionDetector",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";var h=1;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzPlayheadAtInterruptionDetector$p_2=null;e.$OzPlayheadAtInterruptionDetector$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPlayheadAtInterruptionDetector$p_4=null;e.$OzPlayheadAtInterruptionDetector$p_1=b;b=d?d.addListener("enterBuffering",function(){e.$OzPlayheadAtInterruptionDetector$p_5()}):c("oz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadAtInterruptionDetector$p_1,"waiting",function(){e.$OzPlayheadAtInterruptionDetector$p_5()});e.$OzPlayheadAtInterruptionDetector$p_3.addSubscriptions(b);e.$OzPlayheadAtInterruptionDetector$p_4=d;return e}var d=b.prototype;d.notifyStreamInterrupted=function(a){this.$OzPlayheadAtInterruptionDetector$p_2=a,this.$OzPlayheadAtInterruptionDetector$p_5()};d.notifyStreamResumed=function(){this.$OzPlayheadAtInterruptionDetector$p_2=null};d.$OzPlayheadAtInterruptionDetector$p_5=function(){if(this.$OzPlayheadAtInterruptionDetector$p_2!=null){var a=this.$OzPlayheadAtInterruptionDetector$p_2||0;Math.abs(this.$OzPlayheadAtInterruptionDetector$p_1.currentTime-a)<h&&this.emit("playheadAtInterruption",a)}};d.destroy=function(){this.$OzPlayheadAtInterruptionDetector$p_3.release(),this.$OzPlayheadAtInterruptionDetector$p_4=null};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPlayingStatePriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;d=a.call(this)||this;d.$OzPlayingStatePriorityStrategy$p_1=new(c("oz-player/shims/OzSubscriptionsHandler"))();d.$OzPlayingStatePriorityStrategy$p_3=function(){d.emit("state_changed")};d.$OzPlayingStatePriorityStrategy$p_2=b;d.$OzPlayingStatePriorityStrategy$p_1.addSubscriptions(d.$OzPlayingStatePriorityStrategy$p_2.addEventListener("playing",d.$OzPlayingStatePriorityStrategy$p_3),d.$OzPlayingStatePriorityStrategy$p_2.addEventListener("play",d.$OzPlayingStatePriorityStrategy$p_3),d.$OzPlayingStatePriorityStrategy$p_2.addEventListener("pause",d.$OzPlayingStatePriorityStrategy$p_3));return d}var d=b.prototype;d.isActive=function(){return!0};d.getName=function(){return"playing_state"};d.setSourceBufferState=function(a){};d.getPriority=function(){return this.$OzPlayingStatePriorityStrategy$p_2.isPlaying()?1:0};d.destroy=function(){this.$OzPlayingStatePriorityStrategy$p_1.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPositionToViewportPriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzPositionToViewportPriorityStrategy$p_3=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzPositionToViewportPriorityStrategy$p_4=function(){e.emit("state_changed")};e.$OzPositionToViewportPriorityStrategy$p_2=b;e.$OzPositionToViewportPriorityStrategy$p_1=d;e.$OzPositionToViewportPriorityStrategy$p_3.addSubscriptions(b.addListener("state_changed",e.$OzPositionToViewportPriorityStrategy$p_4));return e}var d=b.prototype;d.isActive=function(){return!0};d.getName=function(){return"position_to_viewport"};d.setSourceBufferState=function(a){};d.getPriority=function(){var a=this.$OzPositionToViewportPriorityStrategy$p_1.getNumber("prioritize_by_viewport_static_penalty"),b=this.$OzPositionToViewportPriorityStrategy$p_2.getPositionIndexOfVideoFromViewportVertically();return a>0?b===-1?a*-1:0:b===-1?-Infinity:-1*b};d.destroy=function(){this.$OzPositionToViewportPriorityStrategy$p_3.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzPriorityCalculator",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;d=a.call(this)||this;d.$OzPriorityCalculator$p_2=new(c("oz-player/shims/OzSubscriptionsHandler"))();d.$OzPriorityCalculator$p_1=b;(b=d.$OzPriorityCalculator$p_2).addSubscriptions.apply(b,d.$OzPriorityCalculator$p_1.map(function(a){return a.addListener("state_changed",function(){d.emit("state_changed",d.compute(),a.getName())})}));return d}var d=b.prototype;d.setSourceBufferState=function(a){this.$OzPriorityCalculator$p_1.forEach(function(b){return b.setSourceBufferState(a)}),this.emit("state_changed",this.compute(),"source_buffer")};d.compute=function(){var a=this.$OzPriorityCalculator$p_1.reduce(function(a,b){b=b.isActive()?b.getPriority():0;return a+b},0);return Math.max(a,0)};d.destroy=function(){this.$OzPriorityCalculator$p_2.release()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/strategies/OzSingleCodecRestriction",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var b=a.prototype;b.applyRestriction=function(a){if(a.length<=0)return a.slice();var b=new Set(a.map(function(a){return g(a)})),c="av01",d=b.has(c)?c:b.values().next().value;return d==null?a.slice():a.filter(function(a){return g(a)===d})};return a}();function g(a){return a.getMimeCodecs().replace(/\..*$/,"")}f["default"]=a}),66);
__d("oz-player/strategies/OzStaleManifestBufferTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=b,this.$2=a}var b=a.prototype;b.isActive=function(){return this.$2.getRefreshDate()==null&&this.$1.getNumber("stale_mpd_buffer_ahead_target")>0};b.getBufferTarget=function(){return this.$1.getNumber("stale_mpd_buffer_ahead_target")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzStartupBufferTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$3=b}var b=a.prototype;b.isActive=function(){var a=this.$1.isPlaying();a&&(this.$2=!0);return!this.$2};b.getBufferTarget=function(){return this.$3.getNumber("pre_start_buffer_ahead_target")};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzStreamSegmentsCountCalculator",[],(function(a,b,c,d,e,f){"use strict";var g=1;a=function(){function a(a){this.$1=a}var b=a.prototype;b.computeMin=function(a,b,c){var d=Number.MAX_VALUE;for(var e=this.$1,f=Array.isArray(e),h=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(h>=e.length)break;i=e[h++]}else{h=e.next();if(h.done)break;i=h.value}i=i;i.isActive(a)&&(d=Math.min(d,i.getSegmentsCount(a,b,c)))}return d===Number.MAX_VALUE?g:Math.max(d,g)};return a}();f["default"]=a}),66);
__d("oz-player/strategies/OzSupportedMimeCodecsRestriction",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var b=a.prototype;b.applyRestriction=function(a){return a.filter(function(a){a=MediaSource.isTypeSupported(a.getMimeCodecs());return!!a})};return a}();f["default"]=a}),66);
__d("oz-player/streams/OzEndOfStreamWatcher",["oz-player/manifests/OzAudioRepresentation","oz-player/shims/OzEventEmitter","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this)||this;d.$OzEndOfStreamWatcher$p_1=new Map();d.$OzEndOfStreamWatcher$p_4=!1;d.$OzEndOfStreamWatcher$p_2=b;d.$OzEndOfStreamWatcher$p_3=c;return d}var d=b.prototype;d.registerMediaStream=function(a){this.$OzEndOfStreamWatcher$p_1.has(a)&&c("oz-player/shims/ozvariant")(0,5191),this.$OzEndOfStreamWatcher$p_1.set(a,!1)};d.notifyRepresentationSwitched=function(a,b){this.$OzEndOfStreamWatcher$p_1.has(a)||c("oz-player/shims/ozvariant")(0,5192),(this.$OzEndOfStreamWatcher$p_3.getBool("mcm_in_play_codec_switch")||this.$OzEndOfStreamWatcher$p_3.getBool("enable_alternative_audio_tracks")&&b&&a.getCurrentRepresentation()instanceof c("oz-player/manifests/OzAudioRepresentation"))&&this.$OzEndOfStreamWatcher$p_1.set(a,!1),this.$OzEndOfStreamWatcher$p_5("end_of_stream_watcher","representation_switched")};d.notifyMediaStreamEnded=function(a,b){this.$OzEndOfStreamWatcher$p_1.has(a)||c("oz-player/shims/ozvariant")(0,5192),this.$OzEndOfStreamWatcher$p_1.set(a,!0),this.$OzEndOfStreamWatcher$p_5("end_of_stream_watcher","media_stream_ended:"+b)};d.$OzEndOfStreamWatcher$p_5=function(a,b){var c=this;if(this.$OzEndOfStreamWatcher$p_3.getBool("do_not_end_stream")){!this.$OzEndOfStreamWatcher$p_4&&this.$OzEndOfStreamWatcher$p_6()&&(this.$OzEndOfStreamWatcher$p_4=!0,this.emit("streamEnd"));return}var d=this.$OzEndOfStreamWatcher$p_2.getReadyState();d==="open"&&this.$OzEndOfStreamWatcher$p_6()&&this.$OzEndOfStreamWatcher$p_2.notifyEndOfStream(a,b).then(function(){c.emit("streamEnd")})["catch"](function(){c.emit("streamEnd")})};d.$OzEndOfStreamWatcher$p_6=function(){if(this.$OzEndOfStreamWatcher$p_1.size===0)return!1;for(var a=this.$OzEndOfStreamWatcher$p_1.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;if(!d)return!1}return!0};d.destroy=function(){this.$OzEndOfStreamWatcher$p_1.clear()};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/streams/OzHandleUserRepresentationSwitch",["oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozReportUnexpectedError","oz-player/utils/OzErrorEmitter"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f,g){var h=this;this.$2=new(c("oz-player/utils/OzErrorEmitter"))();this.$5=null;this.$6=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$1=a;this.$3=b;this.$4=d;this.$7=e;this.$8=g;f.then(function(a){h.$5=a},function(){})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzHandleUserRepresentationSwitch SBM promise then - create")});this.$6.addSubscriptions(e.addListener("switchRepresentation",function(a,b){h.$9(a,b)}))}var b=a.prototype;b.destroy=function(){this.$6.release(),this.$6.engage()};b.onError=function(a){return this.$2.onError(a)};b.$9=function(a,b){if(a!=="user")return;a=this.$5;if(a==null)return;var d=this.$7.getRepresentationIDAtTime(this.$3.getCurrentTime()),e;for(var f=0;f<this.$4.length;f++)this.$4[f].getID()===d&&(e=this.$4[f]);if(e&&b&&(this.$8||e.getBandwidth()<b.getBandwidth())){d=e.getSegmentByTime(this.$3.getCurrentTime());d&&a.clearRangeWithWait([{fromTime:this.$3.getCurrentTime(),toTime:this.$3.getDuration()}])["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzHandleUserRepresentationSwitch clearRangeWithWait catch")})}};return a}();g["default"]=a}),98);
__d("oz-player/manifests/IOzSegment",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return((a==null?void 0:a.getSequenceNumber())||0)===((b==null?void 0:b.getSequenceNumber())||0)}function b(a,b){return((a==null?void 0:a.getSequenceNumber())||0)>=((b==null?void 0:b.getSequenceNumber())||0)}f.isSequenceNumberEqual=a;f.isSequenceNumberGreaterOrEqual=b}),66);
__d("oz-player/networks/OzReadableStreamDataReader",["oz-player/networks/OzTransformStream","oz-player/utils/ozConcatUint8Arrays"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$OzReadableStreamDataReader$p_1=[];c.$OzReadableStreamDataReader$p_2=b;return c}var d=b.prototype;d.onDataWritten=function(a){this.$OzReadableStreamDataReader$p_1.push(a)};d.onClose=function(){var a=this.$OzReadableStreamDataReader$p_1,b=c("oz-player/utils/ozConcatUint8Arrays")(a);b=b.buffer;a.length=0;this.$OzReadableStreamDataReader$p_2(b)};return b}(c("oz-player/networks/OzTransformStream"));g["default"]=a}),98);
__d("oz-player/networks/OzStreamingTask",["oz-player/loggings/OzLoggingUtils","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzPerformance","oz-player/utils/OzErrorUtils","oz-player/utils/OzNetworkRequestLoggingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){this.$3=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),this.$5=!1,this.$9=null,this.$1=this.$2=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),this.$6=c("oz-player/shims/OzPerformance").now(),this.$7=b,this.$8=a,this.$9=d}var b=a.prototype;b.run=function(){var a=this.$3.getPromise(),b=this.$7;if(b){var e=c("oz-player/shims/OzPerformance").now()-this.$6;d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,b,"streaming_task",function(){},function(a){a.setTimeToRequestSent(Math.floor(e))})}this.$2.resolve();return a};b.getPromise=function(){return this.$3.getPromise()};b.cancel=function(){this.$3.getPromise()["catch"](function(){}),this.$3.reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAMING_TASK",description:"task cancelled",extra:{code:"OZ_ST-1"}})),this.$5=!0};b.finish=function(){this.$3.resolve()};b.isCancelled=function(){return this.$5};b.addStreamDeferred=function(a,b){var d=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),e=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));this.$10({createStreamResult:a,changeStatusDeferred:d,createStreamDeferred:e,loggerProviderWithStreamContext:b});b=function(){return e.getPromise()};return{genStream:b,cancel:function(){if(a){var b=a.pausableStream;return b.pauseStream()}},getStatusChangePromise:function(){return d.getPromise()}}};b.$10=function(a){var b=this,e=a.createStreamResult,f=a.changeStatusDeferred,g=a.createStreamDeferred,h=a.loggerProviderWithStreamContext,i=a.loggingPayloads;a=this.$1.getPromise();var j=c("oz-player/shims/OzPerformance").now(),k=this.$1=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));k.getPromise()["catch"](function(){});a.then(function(){if(e){var a=e.pausableStream;e.loggingPayloads&&(i=e.loggingPayloads);g.resolve(a.getStream());b.$4=a;var f=c("oz-player/shims/OzPerformance").now(),k=b.$11(a.startStream());if(h){var l=function(c){var e=i;if(e){d("oz-player/utils/OzNetworkRequestLoggingUtils").setFetchStreamLoggingAttributes(c,e.getRequestUrl(),e.segments,f-j,a.getBytesStreamed(),e.getResponse());var g=b.$9;g&&g(c,e.getRequestUrl(),e.getResponse())}};d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(k,h,"fetch_stream",l,l)}return k}return null}).then(function(a){b.$4=null,k.resolve(),f.resolve(a||"cancelled")})["catch"](function(a){b.$4=null,b.$3.reject(a),k.reject(a),f.reject(a)})};b.$11=function(a){return a.then(function(a){a=a.statusPromise;return a.then(function(a){return a==="stream_done"?"done":"error"})})};return a}();g["default"]=a}),98);
__d("oz-player/scheduling/OzRoundRobinPriorityTaskQueue",["oz-player/shims/ozReportUnexpectedError"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){b===void 0&&(b=-1),this.$3=function(){},this.$4=[],this.$5=new Map(),this.$1=a,this.$2=b}var b=a.prototype;b.getHighestPriority=function(){return Math.max.apply(Math,this.$4.map(function(a){return a.queue.length?a.priority:-Infinity}))};b.enqueue=function(a,b){var d=this;b=b;b=this.$6(b);var e=this.$5.get(a);if(e===b)return;this.$5.has(a)&&this.remove(a);e=this.$7(b);var f=this.$4[e];f&&f.priority===b||(f={priority:b,queue:[]},this.$4.splice(e,0,f));this.$5.set(a,b);f.queue.push(a);a.getPromise().then(function(){d.remove(a)},function(){d.remove(a)})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzRoundRobinPriorityTaskQueue remove after task run")});this.$3(a,b>=this.$1?"immediate":"normal")};b.updatePriority=function(a,b){if(!this.$5.has(a))return;this.enqueue(a,b)};b.dequeue=function(){for(var a=0;a<this.$4.length;a++){var b=this.$4[a];if(b.queue.length){b=b.queue.shift();this.$5["delete"](b);return b}}return null};b.remove=function(a){var b=this.$5.get(a);if(b!==void 0){b=this.$7(b);b=this.$4[b];if(b&&b.queue){var c=b.queue.findIndex(function(b){return b===a});c>-1&&b.queue.splice(c,1)}this.$5["delete"](a)}};b.setOnTaskUpdated=function(a){this.$3=a};b.clearOnTaskUpdated=function(){this.setOnTaskUpdated(function(){})};b.getLength=function(){return this.$5.size};b.test_isEmpty=function(){return this.$5.size===0&&this.$4.every(function(a){return a.queue.length===0})};b.$7=function(a){a=a;a=this.$6(a);var b;for(b=0;b<this.$4.length;b++)if(a>=this.$4[b].priority)return b;return b};b.$6=function(a){a=a;this.$2>=0&&(a=Number.parseFloat(a.toFixed(this.$2)));return a};return a}();g["default"]=a}),98);
__d("oz-player/scheduling/OzSequentialTaskScheduler",["oz-player/shims/OzMaybeNativePromise","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$3=0;this.$1=a;a=b||{};b=a.taskTimeout;this.$4=b||0}var b=a.prototype;b.start=function(){this.$1.setOnTaskUpdated(this.$5.bind(this));var a=this.$1.dequeue();a&&this.$6(a,"immediate")};b.destroy=function(){this.$2&&this.$2.cancel(),this.$1.clearOnTaskUpdated()};b.$5=function(a,b){b=this.$6(a,b);b&&this.$1.remove(a)};b.$6=function(a,b){var d=this;if(this.$2&&b!=="immediate")return!1;this.$2&&this.$2.cancel();b=a.run()["catch"](function(a){});this.$4>0&&(b=c("oz-player/shims/OzMaybeNativePromise").race([b,new(c("oz-player/shims/OzMaybeNativePromise"))(function(a,b){c("oz-player/shims/ozSetTimeoutAcrossTransitions")(a,d.$4)})]));this.$3++;this.$2=a;b=b.then(function(){d.$3--;d.$2===a&&(d.$2=null);if(d.$3===0){var b=d.$1.dequeue();b&&d.$6(b,"immediate")}});b["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzSequentialTaskScheduler task complete")});return!0};return a}();g["default"]=a}),98);
__d("oz-player/networks/OzStreamingTaskQueueProvider",["oz-player/scheduling/OzRoundRobinPriorityTaskQueue","oz-player/scheduling/OzSequentialTaskScheduler"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=new Map(),j=2,k=2,l=6e4;function a(a){var b=h.get(a);if(!b){b=new(c("oz-player/scheduling/OzRoundRobinPriorityTaskQueue"))(j,k);var d=new(c("oz-player/scheduling/OzSequentialTaskScheduler"))(b,{taskTimeout:l});h.set(a,b);i.set(a,d);d.start()}return b}g.OZ_QUEUE_MAX_PRIORITY=j;g.getQueue=a}),98);
__d("oz-player/networks/OzStreamingTaskStateManager",["Promise","oz-player/networks/OzStreamingTask","oz-player/networks/OzStreamingTaskQueueProvider","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){var b=this;this.$3=new(c("oz-player/shims/OzSubscriptionsHandler"))();this.$4=0;this.$9=!1;this.$10=null;var e=a.mimeType,f=a.priorityCalculator,g=a.loggerProvider,h=a.setCustomFetchStreamLoggingAttributes;a=a.config;this.$5=e;this.$1=f;this.$6=d("oz-player/networks/OzStreamingTaskQueueProvider").getQueue(this.$5);this.$7=g;this.$8=a;this.$10=h;this.$3.addSubscriptions(this.$1.addListener("state_changed",function(a,c){b.$11(a,c),b.$2&&b.$6.updatePriority(b.$2,b.$4)}))}var e=a.prototype;e.$12=function(){var a=[];a.push(c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$5));return a};e.startStreamDeferred=function(a){var b=a.debugName,c=a.segments,d=a.networkManager,e=a.segmentsLoggerProvider,f=a.mediaStreamType,g=a.dataAppendedCallback;a=a.dataAppendedErrorCallback;var h=this.$13(e),i=this.$12();c.length>0?d=d.createPausableStream({debugName:b,segments:c,pipeThroughRangeStreamProviders:i,loggerProvider:e,mediaStreamType:f,dataAppendedCallback:g,dataAppendedErrorCallback:a}):d=null;this.$9=!0;b=h.addStreamDeferred(d,e);return{genStream:b.genStream,cancel:b.cancel,getStatusChangePromise:this.$14(b.getStatusChangePromise)}};e.$13=function(a){var b=this.$2;this.$11(this.$1.compute(),"start_stream");!b||b.isCancelled()?(b=this.$2=new(c("oz-player/networks/OzStreamingTask"))(this.$8,a,this.$10),this.$6.enqueue(b,this.$4)):this.$6.updatePriority(b,this.$4);return b};e.$14=function(a){var c=this;return function(){return a().then(function(a){c.$15();return a})["catch"](function(a){c.$15();return(h||(h=b("Promise"))).reject(a)})}};e.finishTaskIfNoOngoingStream=function(){this.$9||this.$16()};e.destroy=function(){this.$3.release();var a=this.$2;this.$2=null;a&&this.$6.remove(a)};e.$15=function(){this.$9=!1,this.$11(this.$1.compute(),"end_stream"),this.$4<d("oz-player/networks/OzStreamingTaskQueueProvider").OZ_QUEUE_MAX_PRIORITY&&this.$16()};e.$16=function(){this.$2&&(this.$2.finish(),this.$2=null)};e.$11=function(a,b){if(a===this.$4)return;this.$4=a;this.$7&&this.$7.getOperationLogger("priority_changed").setPriorityFloat(this.$4).setInitiator(b).log()};return a}();g["default"]=a}),98);
__d("oz-player/strategies/OzStreamLengthStrategy",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d,e){b=b;e=e;var f=a.getNumber("segments_to_stream_under_playhead_threshold");a=a.getNumber("low_segment_stream_playhead_threshold");f>0&&d.getCurrentTime()<a&&(b=f);d=[];d.push(e);for(a=1;a<b;a++){f=c.getSegmentAfter(e);if(!f)break;e=f;d.push(e)}return d}f.getStreamingSegments=a}),66);
__d("oz-player/streams/OzMediaStreamLoopDriver",["oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzErrorUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var d=this;this.$2=null;this.$3=!1;this.$6=function(){var a;d.$7();if(d.$3)return;(a=d.$5)==null?void 0:a.start();a=d.$1.execute();var b=d.$1.getLoopInterval();b&&(d.$2=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){d.$6()},b));a&&a.then(d.$6)["catch"](function(b){d.$7();var a=d.$1.handleError(b);if(a)d.$2=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(d.$6,a);else{(a=d.$5)==null?void 0:a.setError(b);(a=d.$5)==null?void 0:a.log();d.$5=null;d.$3=!0}})};this.$1=a;this.$4=b}var b=a.prototype;b.start=function(){if(this.$3)throw d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_NOT_IMPLEMENTED_ERROR",description:"restart is not implemented"});this.$5=this.$4.getOperationLogger("media_stream").start();this.$6()};b.stop=function(){var a;this.$7();this.$3=!0;(a=this.$5)==null?void 0:a.log();this.$5=null};b.$7=function(){this.$2&&(c("oz-player/shims/ozClearTimeout")(this.$2),this.$2=null)};return a}();g["default"]=a}),98);
__d("oz-player/utils/OzRangeUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b=b.filter(function(b){return b.startTime<=a&&b.endTime>=a});return b!=null&&b.length>0?b[0]:null}f.getRangeForTime=a}),66);
__d("oz-player/streams/OzSegmentLocator",["oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzRangeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.getEndingSegment();return a!=null&&a.getSequenceNumber()!=null?a.getSequenceNumber():0}var h=function(a,b){a=a.getCurrentTime();return b?d("oz-player/utils/OzRangeUtils").getRangeForTime(a,b.getBufferedRanges()):null},i=function(a,b,c){b=h(a,b);c=c?c.getTimeRange().endTime:0;a=a.getCurrentTime()||0;c?a=c:b&&(a=b.endTime);return a};b=function(a,b,c,e,f,g,h,j){h=a.getPredictedSegmentAfter(g);if(h&&b.isPlaying())return h;j=i(b,e,g);h=f.getTimeRanges();e=d("oz-player/utils/OzNumericalRangeUtil").findDiffCoveredByRanges(b.getCurrentTime(),j,h.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));if(e>c)return null;g=a.getSegment(0);g&&g.getTimeRange().startTime>j&&(j=g.getTimeRange().startTime);return a.getSegmentByTime(j)};g.getEndingSequenceNumber=a;g.getTimeToQuery=i;g.getSegment=b}),98);
__d("oz-player/streams/OzSegmentUtils",["oz-player/manifests/OzSegmentOptions","oz-player/shims/OzURI"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.reduce(function(a,b){var c;return((c=b==null?void 0:b.getSequenceNumber())!=null?c:0)>((c=a==null?void 0:a.getSequenceNumber())!=null?c:0)?b:a})}function b(a,b){var d=new(c("oz-player/manifests/OzSegmentOptions"))();return a.getPredictedSegmentAfter({getData:function(){return null},getByteRange:function(){return null},getSequenceNumber:function(){return b-1},getTimeRange:function(){return{endTime:0,startTime:0}},getURI:function(){return new(c("oz-player/shims/OzURI"))("")},getOptions:function(){return d}})}function d(a){a.getOptions().setSegmentNumDecisionTime(Date.now());return a}g.getMaxSegment=a;g.getSegmentForSequenceNumber=b;g.markSegmentCreateTime=d}),98);
__d("oz-player/utils/OzTaggedTimeRanges",[],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=[],this.$2=0,this.$3=0,this.$4=a?a:function(a,b){return a===b}}var b=a.prototype;b.add=function(a,b,c){if(b<a)return;if(b===a)return;if(this.$1.length===0){this.$1.push({startTime:a,endTime:b,tag:c});return}var d=0,e=0;for(var f=0;f<this.$1.length;f++){if(a===this.$1[f].startTime&&b===this.$1[f].endTime){d=f;e=f+1;break}a>=this.$1[f].startTime&&(d=f+1);b<=this.$1[f].endTime&&(e=f);if(b<this.$1[f].startTime)break}this.$1.splice(d,e-d,{startTime:a,endTime:b,tag:c});this.$5(d)};b.$5=function(a){a=a;var b=this.$1[a],c=null;a!==0&&(c=this.$1[a-1]);c!==null&&(this.$4(c.tag,b.tag)?c.endTime>=b.startTime&&(this.$1.splice(a-1,2,{startTime:c.startTime,endTime:Math.max(b.endTime,c.endTime),tag:b.tag}),a--):(c.endTime>b.startTime&&c.startTime===b.startTime?(this.$1.splice(a-1,1),a--):c.endTime>b.startTime&&this.$1.splice(a-1,1,{startTime:c.startTime,endTime:b.startTime,tag:c.tag}),c.endTime>b.endTime&&this.$1.splice(a+1,0,{startTime:b.endTime,endTime:c.endTime,tag:c.tag})));c=null;a!==this.$1.length-1&&(c=this.$1[a+1]);c&&(this.$4(c.tag,b.tag)?c.startTime<=b.endTime&&this.$1.splice(a,2,{startTime:b.startTime,endTime:Math.max(c.endTime,b.endTime),tag:b.tag}):c.startTime<=b.endTime&&(c.endTime<b.endTime?(this.$1.splice(a,1,{startTime:b.startTime,endTime:c.startTime,tag:b.tag}),this.$1.push({startTime:c.endTime,endTime:b.endTime,tag:b.tag})):this.$1.splice(a+1,1,{startTime:b.endTime,endTime:c.endTime,tag:c.tag})))};b.get=function(a){var b=a>=this.$3?this.$2:0,c=null;for(b=b;b<this.$1.length;b++)if(this.$1[b].startTime<=a&&a<this.$1[b].endTime){c=b;break}this.$2=c===null?0:c;this.$3=a;return c===null?null:this.$1[c].tag};b.getLength=function(){return this.$1.length};return a}();f["default"]=a}),66);
__d("oz-player/streams/OzMediaStream",["oz-player/manifests/IOzSegment","oz-player/networks/OzNetworkManager","oz-player/networks/OzReadableStreamDataReader","oz-player/networks/OzStreamingTaskStateManager","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/shims/OzDeferred","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzNetworkDiagnostics","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozClearTimeout","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozvariant","oz-player/strategies/OzStreamLengthStrategy","oz-player/streams/OzMediaStreamLoopDriver","oz-player/streams/OzSegmentLocator","oz-player/streams/OzSegmentUtils","oz-player/utils/OzBufferingUtils","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil","oz-player/utils/OzTaggedTimeRanges"],(function(a,b,c,d,e,f,g){"use strict";var h=1e3,i=.2,j={AUDIO:1,CAPTION:3,VIDEO:0};a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;e=a.call(this)||this;e.$OzMediaStream$p_2=0;e.$OzMediaStream$p_3=0;e.$OzMediaStream$p_4=null;e.$OzMediaStream$p_13=null;e.$OzMediaStream$p_15=!1;e.$OzMediaStream$p_16=null;e.$OzMediaStream$p_17=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$OzMediaStream$p_19=[];e.$OzMediaStream$p_22=0;e.$OzMediaStream$p_29=!0;e.$OzMediaStream$p_31=!1;e.$OzMediaStream$p_32=null;e.$OzMediaStream$p_33=new(c("oz-player/utils/OzErrorEmitter"))();e.$OzMediaStream$p_35=!0;e.$OzMediaStream$p_38=0;e.$OzMediaStream$p_39=null;e.$OzMediaStream$p_40=null;var f=b.config,g=b.sourceBufferManagerPromise,h=b.networkManager,i=b.playbackState,j=b.endOfStreamWatcher,k=b.bufferTargetCalculator,l=b.priorityCalculator,m=b.streamSegmentsCountCalculator,n=b.abrManager,o=b.representation,p=b.loggerProvider,q=b.segmentLocator,r=b.setCustomFetchStreamLoggingAttributes,s=b.blockedRepresentationsManager,t=b.dynamicVideoLibrary,u=b.shouldAppendOncePerStream,v=b.mediaStreamType,w=b.warningEmitter;b=b.mpd;e.$OzMediaStream$p_1=f;e.$OzMediaStream$p_5=g;e.$OzMediaStream$p_5.then(function(a){e.$OzMediaStream$p_6=a,e.$OzMediaStream$p_16&&e.$OzMediaStream$p_16.setSourceBuffer(a),e.$OzMediaStream$p_27.setSourceBufferState(a.getSourceBufferState()),e.$OzMediaStream$p_47()},function(){})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzMediaStream SBM promise then - create")});e.$OzMediaStream$p_12=h;e.$OzMediaStream$p_7=i;e.$OzMediaStream$p_14=j;(f=e.$OzMediaStream$p_14)==null?void 0:f.registerMediaStream(babelHelpers.assertThisInitialized(e));e.$OzMediaStream$p_26=k;e.$OzMediaStream$p_27=l;e.$OzMediaStream$p_28=m;e.$OzMediaStream$p_16=n;e.$OzMediaStream$p_18=p.cloneContext();e.$OzMediaStream$p_36=q;e.$OzMediaStream$p_25=new(c("oz-player/utils/OzTaggedTimeRanges"))(function(a,b){return a.id===b.id});e.$OzMediaStream$p_39=r;e.$OzMediaStream$p_40=s;e.$OzMediaStream$p_42=t;e.$OzMediaStream$p_43=u;e.$OzMediaStream$p_44=v;e.$OzMediaStream$p_45=w;e.$OzMediaStream$p_46=b;e.$OzMediaStream$p_17.addSubscriptions(e.$OzMediaStream$p_7.addEventListener("seeking",function(){var a=i.getCurrentTime(),b=null;e.$OzMediaStream$p_1.getBool("ignore_reset_after_seek_if_bufferahead")&&e.$OzMediaStream$p_8.canPredict()&&(e.$OzMediaStream$p_6?d("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(a,e.$OzMediaStream$p_6.getSourceBufferState().getBufferedRanges())>0:!1)?b="no_reset_anchor":(b="reset_anchor",e.$OzMediaStream$p_41=Date.now(),e.$OzMediaStream$p_9!=null&&(e.$OzMediaStream$p_48(),e.$OzMediaStream$p_31=!1,e.$OzMediaStream$p_24&&e.$OzMediaStream$p_24.resolve()));e.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_element_event").setInitiator("seeking").setLength(a*1e3).setReason(b).setUserInfo({streamAnchorSegmentNumber:String((a=e.$OzMediaStream$p_9)==null?void 0:a.getSequenceNumber())}).log()}));e.$OzMediaStream$p_40!=null&&e.$OzMediaStream$p_17.addSubscriptions(e.$OzMediaStream$p_40.onRepresentationBlocked(function(a){return e.$OzMediaStream$p_49(a)}));e.$OzMediaStream$p_21=d("oz-player/utils/OzMimeUtil").getMimeType(o.getMimeCodecs());e.$OzMediaStream$p_30=new(c("oz-player/networks/OzStreamingTaskStateManager"))({mimeType:e.$OzMediaStream$p_21,priorityCalculator:e.$OzMediaStream$p_27,loggerProvider:e.$OzMediaStream$p_18,setCustomFetchStreamLoggingAttributes:e.$OzMediaStream$p_39,config:e.$OzMediaStream$p_1});e.$OzMediaStream$p_23=new(c("oz-player/streams/OzMediaStreamLoopDriver"))(babelHelpers.assertThisInitialized(e),e.$OzMediaStream$p_18);e.$OzMediaStream$p_50(o);return e}var e=b.prototype;e.start=function(){this.$OzMediaStream$p_23.start()};e.getCurrentRepresentation=function(){return this.$OzMediaStream$p_8};e.switchRepresentation=function(a,b){b===void 0&&(b=null),this.$OzMediaStream$p_50(a,"user",b)};e.onError=function(a){return this.$OzMediaStream$p_33.onError(a)};e.updateRunTimeConfigs=function(a){var b=a.streamDataHandler;a=a.resetStreamAnchor;b!==void 0&&(this.$OzMediaStream$p_34=b);a===!0&&this.$OzMediaStream$p_8.canApproximateId()&&(this.$OzMediaStream$p_48(),this.$OzMediaStream$p_10=null)};e.$OzMediaStream$p_50=function(a,b,d){var e,f=this;b===void 0&&(b="internal");d===void 0&&(d=null);b==="user"&&this.$OzMediaStream$p_48();(e=this.$OzMediaStream$p_20)==null?void 0:e.remove();this.$OzMediaStream$p_20=null;e=this.$OzMediaStream$p_18.cloneContext().setType(this.$OzMediaStream$p_21+";init");var g=e.cloneContext().setRepresentationID(a.getID()),h=a.getInitSegment(),i=h.getData(),j=e.getOperationLogger("stream_switch").setPreviousRepresentationID(this.$OzMediaStream$p_8?this.$OzMediaStream$p_8.getID():null).setInitiator(b).setRepresentationID(a.getID()).setReason(b==="internal"?this.$OzMediaStream$p_16&&this.$OzMediaStream$p_16.getLastEvaluationReason():b).start();this.$OzMediaStream$p_8=a;e=function(){var a;j.log();f.$OzMediaStream$p_26.handleEvent("append_succeeded");f.emit("initAppended");(a=f.$OzMediaStream$p_14)==null?void 0:a.notifyRepresentationSwitched(f,f.$OzMediaStream$p_46.isStaticMpd())};var k=function(b){var c;j.setError(b).log();f.$OzMediaStream$p_51(b);(c=f.$OzMediaStream$p_40)==null?void 0:c.handleError(a.getID(),b);if(a.getID()!==f.$OzMediaStream$p_8.getID()){(c=f.$OzMediaStream$p_24)==null?void 0:c.resolve()}};if(i==null){h=this.$OzMediaStream$p_12.request({debugName:"OzMediaStream/init/"+this.$OzMediaStream$p_44,segments:[h],pipeThroughRangeStreamProviders:[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream$p_21)],loggerProvider:g,requestOptions:null,mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:e,dataAppendedErrorCallback:k});i=h.getStream()}this.emit("switchRepresentation",b,a);this.$OzMediaStream$p_52({data:i,mimeCodecs:a.getMimeCodecs(),clearSourceBufferRange:d,dataAppendedCallback:e,dataAppendedErrorCallback:k,loggerProvider:g.cloneContext(),appendTarget:0});if(d){h=a.getSegmentByTime(d[0]);if(h){b=this.$OzMediaStream$p_12.request({debugName:"OzMediaStream/startingSegment/"+this.$OzMediaStream$p_44,segments:[h],pipeThroughRangeStreamProviders:[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream$p_21)],loggerProvider:g,requestOptions:null,mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:e,dataAppendedErrorCallback:k});i=b.getStream();this.$OzMediaStream$p_52({data:i,mimeCodecs:a.getMimeCodecs(),clearSourceBufferRange:null,dataAppendedCallback:e,dataAppendedErrorCallback:k,loggerProvider:g.cloneContext(),appendTarget:1})}}};e.getLoopInterval=function(){return this.$OzMediaStream$p_22};e.execute=function(){var a=this.$OzMediaStream$p_53();if(a){var b=this.$OzMediaStream$p_24=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise"));a.then(function(){return b.resolve()})["catch"](function(a){return b.reject(a)});return b.getPromise()}return null};e.$OzMediaStream$p_54=function(a){if(this.$OzMediaStream$p_16&&this.$OzMediaStream$p_29&&this.$OzMediaStream$p_15){a=this.$OzMediaStream$p_16.getBestRepresentation(a);if(this.$OzMediaStream$p_8!==a)return a}return null};e.$OzMediaStream$p_55=function(a){var b=this.$OzMediaStream$p_6?this.$OzMediaStream$p_6.getSourceBufferState():null,c=this.$OzMediaStream$p_26.computeBufferTarget();if(c<=0)return null;var e=null;a&&(e=this.$OzMediaStream$p_8.getCustomFieldFirstSegment());if(!e&&this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_36!=null){a=this.$OzMediaStream$p_35&&this.$OzMediaStream$p_7.isPlaying();return this.$OzMediaStream$p_36.getSegment(this.$OzMediaStream$p_8,this.$OzMediaStream$p_7,c,b,this.$OzMediaStream$p_9,this.$OzMediaStream$p_10,this.$OzMediaStream$p_1,a,this.$OzMediaStream$p_21)}else{e||(e=d("oz-player/streams/OzSegmentLocator").getSegment(this.$OzMediaStream$p_8,this.$OzMediaStream$p_7,c,b,this.$OzMediaStream$p_8,this.$OzMediaStream$p_9,this.$OzMediaStream$p_1,this.$OzMediaStream$p_32));if(this.$OzMediaStream$p_8.canPredict()){a=this.$OzMediaStream$p_10&&this.$OzMediaStream$p_10.getSequenceNumber()||0;c=e&&e.getSequenceNumber()||0;if(e&&this.$OzMediaStream$p_10&&a>=c){c=d("oz-player/streams/OzSegmentLocator").getEndingSequenceNumber(this.$OzMediaStream$p_8);return(c||0)>=a?this.$OzMediaStream$p_10:null}}}if(!e&&!this.$OzMediaStream$p_56()){c=this.$OzMediaStream$p_8.getEndingSegment();if(c&&this.$OzMediaStream$p_8.isEndingSegment(c)){a=c.getTimeRange().endTime;b=d("oz-player/streams/OzSegmentLocator").getTimeToQuery(this.$OzMediaStream$p_7,b,this.$OzMediaStream$p_9);b>=a&&!this.$OzMediaStream$p_56()&&(e=c)}}return e};e.$OzMediaStream$p_57=function(){return!this.$OzMediaStream$p_15};e.$OzMediaStream$p_58=function(a,b){var e;e=(e=b.fetchSingleSegment)!=null?e:!1;b=(b=b.preventRepresentationSwitch)!=null?b:!1;var f=[];if(e)f=[a];else{e=this.$OzMediaStream$p_28.computeMin(this.$OzMediaStream$p_7,a,this.$OzMediaStream$p_8);f=d("oz-player/strategies/OzStreamLengthStrategy").getStreamingSegments(this.$OzMediaStream$p_1,e,this.$OzMediaStream$p_8,this.$OzMediaStream$p_7,a);f=c("oz-player/networks/OzNetworkManager").getStreamableSegmentsRange(f);if(!b){e=this.$OzMediaStream$p_54(f);if(e){this.$OzMediaStream$p_50(e);a=this.$OzMediaStream$p_55(!1);if(!a)return[];else return this.$OzMediaStream$p_58(a,{fetchSingleSegment:!1,preventRepresentationSwitch:!0})}}}return f};e.$OzMediaStream$p_59=function(){var a=this,b=function(b){b==null?void 0:b.remove(),a.$OzMediaStream$p_20===b&&(a.$OzMediaStream$p_20=null)};b(this.$OzMediaStream$p_20);var d=null;return new(c("oz-player/shims/OzMaybeNativePromise"))(function(c,e){d=a.getCurrentRepresentation().addUpdateListener(function(){b(d),c()}),a.$OzMediaStream$p_20=d})["catch"](function(a){b(d);throw a})};e.$OzMediaStream$p_53=function(){var a=this,b=this.$OzMediaStream$p_6?this.$OzMediaStream$p_6.getSourceBufferState():null;if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_10&&this.$OzMediaStream$p_8.isEndingSegment(this.$OzMediaStream$p_10)){this.endStream("pdash_ending_segment_had_error");this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("end1").setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return}if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_9&&this.$OzMediaStream$p_8.isEndingSegment(this.$OzMediaStream$p_9)){this.endStream("pdash_anchor_segment_is_ending_segment");this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("end2").setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return}var e=this.$OzMediaStream$p_57(),f=this.$OzMediaStream$p_55(e);if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_11!=null&&d("oz-player/manifests/IOzSegment").isSequenceNumberGreaterOrEqual(f,this.$OzMediaStream$p_11)){this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("segment_end").setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return}d("oz-player/manifests/IOzSegment").isSequenceNumberEqual(f,this.$OzMediaStream$p_37)?this.$OzMediaStream$p_38++:this.$OzMediaStream$p_38=0;this.$OzMediaStream$p_37=f;this.$OzMediaStream$p_7.isPlaying()&&this.$OzMediaStream$p_38>0&&this.$OzMediaStream$p_18.cloneContext().getOperationLogger("get_segment_to_stream_same_segment").setReason((f==null?void 0:f.getSequenceNumber())!=null?String(f==null?void 0:f.getSequenceNumber()):null).setLength(this.$OzMediaStream$p_38).setRepresentationID(this.$OzMediaStream$p_8.getID()).setSegmentStartTime(f==null?void 0:f.getTimeRange().startTime).setSegmentEndTime(f==null?void 0:f.getTimeRange().endTime).log();if(this.$OzMediaStream$p_31){var g;this.$OzMediaStream$p_22=h;this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("ongoing_stream").setReason(((g=this.$OzMediaStream$p_9)==null?void 0:g.getSequenceNumber())!=null?String((g=this.$OzMediaStream$p_9)==null?void 0:g.getSequenceNumber()):null).setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return null}if(!f||this.$OzMediaStream$p_31){if(this.$OzMediaStream$p_8.canPredict()&&this.$OzMediaStream$p_1.getBool("ms_promise_for_null")){var i=this.$OzMediaStream$p_1.getNumber("ms_promise_for_null_ms");return new(c("oz-player/shims/OzMaybeNativePromise"))(function(b,d){var e=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){c("oz-player/shims/ozClearTimeout")(e),b()},i?i:(a.$OzMediaStream$p_8.getMaxGopSec()||1)*1e3)})}this.$OzMediaStream$p_22=h;this.$OzMediaStream$p_31||this.$OzMediaStream$p_30.finishTaskIfNoOngoingStream();return this.$OzMediaStream$p_59()}this.$OzMediaStream$p_22=0;var j=this.$OzMediaStream$p_58(f,{fetchSingleSegment:e});if(j.length===0){this.$OzMediaStream$p_18.cloneContext().getOperationLogger("media_loop_end").setInitiator("no_stream_segments").setReason(((g=this.$OzMediaStream$p_9)==null?void 0:g.getSequenceNumber())!=null?String((f=this.$OzMediaStream$p_9)==null?void 0:f.getSequenceNumber()):null).setRepresentationID(this.$OzMediaStream$p_8.getID()).log();return this.$OzMediaStream$p_59()}this.$OzMediaStream$p_15=!0;var k=j[j.length-1]||null,l=this.$OzMediaStream$p_8,m=function(){return l.isEndingSegment(k)};j.length!==0||c("oz-player/shims/ozvariant")(0,23148);g=j[0];f=g.getTimeRange().startTime;var n=k.getTimeRange().endTime,o={startTime:f,endTime:n,tag:{id:this.$OzMediaStream$p_8.getID()}},p=function(b){v.setAppendedBufferMs(Math.round(b.appendedSec*1e3)),v.log(),a.$OzMediaStream$p_26.handleEvent("append_succeeded"),j.forEach(function(b){a.emit("SegmentAppended",a.$OzMediaStream$p_60(b,o))}),m()&&a.endStream("appended_ending_segment"),a.$OzMediaStream$p_61(o,b)},q=function(b){v.setError(b).log();var c=t||s;c&&c.cancel();a.$OzMediaStream$p_51(b)},r=this.$OzMediaStream$p_18.cloneContext();r.setRepresentationID(this.$OzMediaStream$p_8.getID());r.setSegmentStartTime(f).setSegmentEndTime(n);var s,t;!e?(t=this.$OzMediaStream$p_30.startStreamDeferred({debugName:"OzMediaStream/streamableSegments/"+this.$OzMediaStream$p_44,segments:j,networkManager:this.$OzMediaStream$p_12,sourceBufferState:b,playbackState:this.$OzMediaStream$p_7,segmentsLoggerProvider:r.cloneContext(),mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:p,dataAppendedErrorCallback:q}),this.$OzMediaStream$p_13=s):(s=this.$OzMediaStream$p_12.request({debugName:"OzMediaStream/streamableSegments/"+this.$OzMediaStream$p_44+"/prefetch",segments:j,pipeThroughRangeStreamProviders:[c("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream$p_21)],loggerProvider:r.cloneContext(),requestOptions:null,mediaStreamType:this.$OzMediaStream$p_44,dataAppendedCallback:p,dataAppendedErrorCallback:q}),this.$OzMediaStream$p_13=s);this.$OzMediaStream$p_31=!0;var u=this.$OzMediaStream$p_62(g,k,j.length),v=r.getOperationLogger("queued_append");v.start().setReason(this.$OzMediaStream$p_16&&this.$OzMediaStream$p_16.getLastEvaluationReason());var w=function(c,b){a.$OzMediaStream$p_52({data:c,mimeCodecs:b,clearSourceBufferRange:null,dataAppendedCallback:p,dataAppendedErrorCallback:q,loggerProvider:r.cloneContext(),appendTarget:u})},x;!!t||!!s||c("oz-player/shims/ozvariant")(0,23147);var y=this.$OzMediaStream$p_8.getMimeCodecs();t?(t.genStream().then(function(a){return w(a,y)})["catch"](function(b){return a.$OzMediaStream$p_33.emitError(b)}),x=t.getStatusChangePromise()):s&&(w(s.getStream(),y),x=s.getStatusChangePromise());!x&&c("oz-player/shims/ozvariant")(0,51928);f=x.then(function(b){a.$OzMediaStream$p_63(b,k);return a.$OzMediaStream$p_64()}).then(function(){a.$OzMediaStream$p_2=0});return f["catch"](function(b){var c,d=a.$OzMediaStream$p_9;a.$OzMediaStream$p_65(k);(c=a.$OzMediaStream$p_40)==null?void 0:c.handleError(l.getID(),b);return a.$OzMediaStream$p_66(b,k,d)})};e.handleError=function(a){var b=this.$OzMediaStream$p_18.getOperationLogger("media_stream_loop_error");b.setError(a).setResult("failed").log();return this.$OzMediaStream$p_1.getNumber("loop_body_handle_error_interval_ms")};e.$OzMediaStream$p_66=function(a,b,e){var f=this;this.$OzMediaStream$p_31=!1;var g=new(c("oz-player/shims/OzDeferred"))(c("oz-player/shims/OzMaybeNativePromise")),h=d("oz-player/utils/OzErrorUtils").getNormalizedErrorAndCode(a),i=h[0],j=h[1],k=d("oz-player/utils/OzErrorUtils").getOzErrorWithMIMEType(i,this.$OzMediaStream$p_21),l=function(b){f.$OzMediaStream$p_2++;f.$OzMediaStream$p_18.getOperationLogger("media_stream").setInitiator("fetch_stream_"+(b.behavior!=null?b.behavior:"default")).setLength(b.timeoutMs).setReason(""+k.getDescription()).setError(k).setCode(j.length>0?Number.parseInt(j,10):null).setType(f.$OzMediaStream$p_21).log();if(b.behavior==="retry_failed_request")f.$OzMediaStream$p_9=e;else if(b.behavior==="recover_failed_request"&&d("oz-player/utils/OzErrorUtils").isOzError(a)){var h;h=(h=a.getExtra())==null?void 0:h.headers;h=c("oz-player/shims/OzNetworkDiagnostics").getNextValidSegmentId(h);h!=null&&(f.$OzMediaStream$p_9=d("oz-player/streams/OzSegmentUtils").getSegmentForSequenceNumber(f.$OzMediaStream$p_8,h-1))}c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){f.emit("streamErrorRetry",k);return g.resolve()},b.timeoutMs)};this.$OzMediaStream$p_4!==j?(this.$OzMediaStream$p_4=j,this.$OzMediaStream$p_3=1):this.$OzMediaStream$p_3++;h=!0;var m=function(){h=!1};i={consecutiveFailuresForErrorCode:this.$OzMediaStream$p_3,endStream:function(){m(),f.$OzMediaStream$p_10=b,f.$OzMediaStream$p_11=b,f.endStream("streamError_event_object"),g.resolve()},error:k,isInitialRequest:!1,retry:function(a){var b;m();l({timeoutMs:(b=a==null?void 0:a.waitMs)!=null?b:0,behavior:a==null?void 0:a.behavior})},retryAttemptCount:this.$OzMediaStream$p_2};this.emit("streamError",i);h&&(this.$OzMediaStream$p_33.emitError(k),this.$OzMediaStream$p_2=0,g.resolve());return g.getPromise()};e.$OzMediaStream$p_65=function(a){this.$OzMediaStream$p_48();this.$OzMediaStream$p_10=a;this.$OzMediaStream$p_30.finishTaskIfNoOngoingStream();a=this.$OzMediaStream$p_6;a&&a.cancelOperationAndCleanQueue(this.$OzMediaStream$p_18)};e.$OzMediaStream$p_63=function(a,b){a==="done"&&(this.$OzMediaStream$p_9=b)};e.$OzMediaStream$p_64=function(){this.$OzMediaStream$p_31=!1};e.$OzMediaStream$p_52=function(a){this.$OzMediaStream$p_19.push(a),this.$OzMediaStream$p_6&&this.$OzMediaStream$p_47()};e.$OzMediaStream$p_61=function(a,b){if(a==null)return;this.$OzMediaStream$p_8.canPredict()&&b.startTime_UNSAFE&&b.endTime_UNSAFE?this.$OzMediaStream$p_25.add(b.startTime_UNSAFE,b.endTime_UNSAFE,a.tag):this.$OzMediaStream$p_25.add(a.startTime,a.endTime,a.tag)};e.$OzMediaStream$p_47=function(){var a=this;this.$OzMediaStream$p_19.forEach(function(b){var d=b.data,e=b.mimeCodecs,f=b.clearSourceBufferRange,g=b.dataAppendedCallback,h=b.dataAppendedErrorCallback,i=b.loggerProvider;b=b.appendTarget;d=d instanceof Uint8Array||a.$OzMediaStream$p_34==null?d:d.pipeThrough(new(c("oz-player/networks/OzReadableStreamDataReader"))(a.$OzMediaStream$p_34.bind(a,a.$OzMediaStream$p_8)));a.$OzMediaStream$p_6&&a.$OzMediaStream$p_6.queueData(d,e,f,i,b).then(function(a){if(!a)return;g(a)})["catch"](function(a){h(a)})});this.$OzMediaStream$p_19=[]};e.$OzMediaStream$p_67=function(){var a=this.$OzMediaStream$p_6;if(!a)return c("oz-player/shims/OzMaybeNativePromise").resolve();var b=this.$OzMediaStream$p_7.getCurrentTime(),d=[{fromTime:0,toTime:b}],e=this.$OzMediaStream$p_1.getNumber("clear_buffer_around_playhead_boundary_ms");if(e>0){e=e/1e3;var f=a.getSourceBufferState();f=f.getBufferedRanges();f=f.length>=1?f[f.length-1].endTime:b;d=[{fromTime:0,toTime:Math.max(0,b-e)}];b+e<f&&d.push({fromTime:b+e,toTime:f})}return a.clearRangeWithWait(d)};e.$OzMediaStream$p_68=function(a){return!1};e.$OzMediaStream$p_51=function(a){var b=this;if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_SOURCE_BUFFER_QUOTA_EXCEEDED"){this.emit("streamErrorRetry",d("oz-player/utils/OzErrorUtils").getOzErrorWithMIMEType(a,this.$OzMediaStream$p_21));this.$OzMediaStream$p_26.handleEvent("append_quota_exceeded");var e=this.$OzMediaStream$p_67();e.then(function(){b.restartLoopBody()})["catch"](function(a){a=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR",description:"Stream append quota exceeded: "+String(a),extra:{originalError:a,code:c("oz-player/utils/OzCustomErrorCode").STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR}});b.$OzMediaStream$p_33.emitError(a)})}else if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_CANCELLED")return;else if(d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_SOURCE_BUFFER_CHANGE_TYPE"&&this.$OzMediaStream$p_1.getBool("mcm_in_play_codec_switch"))this.$OzMediaStream$p_33.emitError(a);else if(this.$OzMediaStream$p_1.getBool("emit_caption_parse_errors_as_warning")&&d("oz-player/utils/OzErrorUtils").isOzError(a)&&a.getType()==="OZ_WEBVTT_CAPTION_PARSE_ERROR"){c("oz-player/shims/ozReportUnexpectedError")(a,"OzMediaStream append error callback: OZ_WEBVTT_CAPTION_PARSE_ERROR branch","warn");(e=this.$OzMediaStream$p_45)==null?void 0:e.emitError(a)}else c("oz-player/shims/ozReportUnexpectedError")(a,"OzMediaStream append error callback","warn"),this.$OzMediaStream$p_68(a)&&this.$OzMediaStream$p_33.emitError(a)};e.$OzMediaStream$p_62=function(a,b,c){var d=0;if(this.$OzMediaStream$p_43)return Infinity;var e=this.$OzMediaStream$p_1.getNumber("appends_per_segment");if(e>0){a=a.getByteRange();b=b.getByteRange();a&&b&&b.endByte!=null&&(d=Math.ceil((b.endByte-a.startByte+1)/(c*e)))}d===0&&(d=this.$OzMediaStream$p_1.getNumber("append_byte_target_without_range"));return d};e.getIsAdaptationEnabled=function(){return this.$OzMediaStream$p_29};e.enableAdaptation=function(){this.$OzMediaStream$p_29=!0};e.disableAdaptation=function(){this.$OzMediaStream$p_29=!1};e.destroy=function(){this.$OzMediaStream$p_23.stop(),this.$OzMediaStream$p_5.then(function(a){a.destroy()},function(){})["catch"](function(a){c("oz-player/shims/ozReportUnexpectedError")(a,"OzMediaStream SBM promise then - destroy")}),this.$OzMediaStream$p_30.destroy(),this.$OzMediaStream$p_17.release(),this.$OzMediaStream$p_17.engage(),this.removeAllListeners(),this.$OzMediaStream$p_20&&(this.$OzMediaStream$p_20.remove(),this.$OzMediaStream$p_20=null)};e.getRepresentationIDAtTime=function(a){var b=this.$OzMediaStream$p_25.get(a);if(!b){var c=this.$OzMediaStream$p_8.getTimeRanges();c=c[c.length-1];var d=.001;c&&a>=c.endTime&&a<=this.$OzMediaStream$p_7.getDuration()+d&&(b=this.$OzMediaStream$p_25.get(c.endTime-d))}return b?b.id:null};e.endStream=function(a){var b;(b=this.$OzMediaStream$p_14)==null?void 0:b.notifyMediaStreamEnded(this,a);this.$OzMediaStream$p_69()};e.endStreamIfBufferedToEndTime=function(){var a=this.$OzMediaStream$p_8.getTimeRanges();if(a.length>0){a=a[a.length-1].endTime;if(this.$OzMediaStream$p_6){var b=this.$OzMediaStream$p_6.getSourceBufferState().getBufferedRanges();b.length>0&&(Math.abs(b[b.length-1].endTime-a)<i&&this.endStream("buffered_to_end_time"))}}};e.$OzMediaStream$p_60=function(a,b){return{type:this.$OzMediaStream$p_21.indexOf("audio")===0?j.AUDIO:this.$OzMediaStream$p_21.indexOf("video")===0?j.VIDEO:j.CAPTION,segment:a,sourceBuffer:(a=(a=this.$OzMediaStream$p_6)==null?void 0:(a=a.getDebug())==null?void 0:a.SourceBuffer)!=null?a:null,timeRange:b}};e.$OzMediaStream$p_48=function(){this.$OzMediaStream$p_9=null};e.restartLoopBody=function(){this.$OzMediaStream$p_48(),this.$OzMediaStream$p_31=!1,this.$OzMediaStream$p_13&&this.$OzMediaStream$p_13.cancel(),this.$OzMediaStream$p_22!==0&&this.$OzMediaStream$p_24&&this.$OzMediaStream$p_24.resolve()};e.$OzMediaStream$p_69=function(){if(this.$OzMediaStream$p_6){var a=this.$OzMediaStream$p_6.getSourceBufferState().getBufferedRanges();a.length>0&&(this.$OzMediaStream$p_32=a[a.length-1].endTime)}};e.$OzMediaStream$p_56=function(){return this.$OzMediaStream$p_32!==null};e.$OzMediaStream$p_49=function(a){this.$OzMediaStream$p_8.getID()===a&&this.$OzMediaStream$p_16!=null&&this.$OzMediaStream$p_50(this.$OzMediaStream$p_16.getBestRepresentation())};e.setEnableLiveheadCatchup=function(a){this.$OzMediaStream$p_35=a};e.clearSourceBufferRange=function(a,b){var d=this.$OzMediaStream$p_6;return d?d.clearRangeWithWait([{fromTime:a,toTime:b}]):c("oz-player/shims/OzMaybeNativePromise").resolve()};e.getDebug=function(){return{SourceBufferManager:this.$OzMediaStream$p_6,MediaStreamAbrManager:this.$OzMediaStream$p_16}};return b}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player/streams/OzPredictedSegmentLocator",["oz-player/streams/OzSegmentLocator","oz-player/streams/OzSegmentUtils","oz-player/utils/OzSourceBufferUtil"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c=0;for(var d in a){var e;if(d===b)continue;c=Math.max(c,(e=a[d].lastSkippedToSegmentNumber)!=null?e:0)}return c}function i(a,b){var c=null;for(var d in a){if(d===b)continue;a[d].inBufferAheadTimeSince!=null&&(c=c!=null?Math.min(c,a[d].inBufferAheadTimeSince):a[d].inBufferAheadTimeSince)}return c}a=function(){function a(a){this.$5={};var b=a.videoNode,c=a.liveLatencyManager,d=a.loggerProvider;a=a.dynamicVideoLibrary;this.$1=b;this.$2=c;this.$3=d;this.$4=a}var b=a.prototype;b.getSegment=function(a,b,c,d,e,f,g,h,i){var j;this.$5[i]==null&&(this.$5[i]={lastSkippedToSegmentNumber:null,inBufferAheadTimeSince:null});(j=this.$2)==null?void 0:j.setEnableCatchup(h);j=this.$6(a,b,c,d,e,f,g,h,i);(a=j.segment)==null?void 0:a.getOptions().setSegmentNumDecisionTime(Date.now());j.segment===null&&this.$3.getOperationLogger("segment_locator").setInitiator(j.initiator).setReason(j.reason).setType(i).setUserInfo(j.userInfo).log();b=this.$4;if(j.segment&&b!=null){c=j.segment.getOptions();c.setIsDVLEnabled(b.shouldRequestDynamicInfo(i))}return j.segment};b.$6=function(a,b,c,e,f,g,j,k,l){var m,n=b.getCurrentTime(),o=this.$2==null?!1:this.$2.shouldEnableCursorBasedCatchup(),p=e!=null?d("oz-player/utils/OzSourceBufferUtil").getTotalBufferAheadOfPosition(e.getBufferedRanges(),b.getCurrentTime(),j):{bufferAheadSec:0,bufferedOffset:0},q=p.bufferAheadSec;p=p.bufferedOffset;var r=null,s=null,t=this.$2?this.$2.enabled():!0,u=a.getPredictedSegmentAfter(f),v=d("oz-player/streams/OzSegmentUtils").getSegmentForSequenceNumber(a,j.getNumber("pdash_download_cursor_between_catchups_seg")>0?h(this.$5):h(this.$5,l)),w=!0,x=null;if(o&&k&&((m=u)==null?void 0:m.getSequenceNumber())!=null&&((m=(m=u)==null?void 0:m.getSequenceNumber())!=null?m:0)<=((m=v==null?void 0:v.getSequenceNumber())!=null?m:0)){u=v;r="paired_catchup";this.$3.getOperationLogger("segment_locator").setInitiator(r).setUserInfo({bufferAheadSec:String(q),bufferedOffset:String(p)}).setLength(((m=v==null?void 0:v.getSequenceNumber())!=null?m:0)-((m=(m=u)==null?void 0:m.getSequenceNumber())!=null?m:0)).setType(l).log();w=!1;x=r}else if(o&&k&&t&&u!=null&&((m=this.$2)==null?void 0:m.isBehindPreferredLiveHeadLatencyWithTolerance())){if(this.$2&&q>this.$2.getPreferredLiveHeadLatencySec()&&p==0)return{segment:null,initiator:"catchup_pause",userInfo:{bufferAheadSec:String(q),bufferedOffset:String(p)}};o=a.getEndingSegment();k=d("oz-player/streams/OzSegmentUtils").getMaxSegment([o,u]);m=j.getNumber("pdash_download_cursor_between_catchups_seg")===0||((m=v==null?void 0:v.getSequenceNumber())!=null?m:0)+j.getNumber("pdash_download_cursor_between_catchups_seg")<((v=o==null?void 0:o.getSequenceNumber())!=null?v:0);if(m){if(((o=k==null?void 0:k.getSequenceNumber())!=null?o:0)>((m=(v=u)==null?void 0:v.getSequenceNumber())!=null?m:0)){this.$5[l].lastSkippedToSegmentNumber=(o=k==null?void 0:k.getSequenceNumber())!=null?o:0;this.$3.getOperationLogger("segment_locator").setInitiator("catchup").setUserInfo({bufferAheadSec:String(q),bufferedOffset:String(p)}).setLength(((v=k==null?void 0:k.getSequenceNumber())!=null?v:0)-((o=(m=u)==null?void 0:m.getSequenceNumber())!=null?o:0)).setType(l).log()}u=k;r="catchup";w=!1;x=r}}else if(f==null){u=a.getSegmentByTime(n);r="1st_run";v=a.getTimeRanges();s={approx:String(a.canApproximateId()),ranges:String(v.length),mpdStartTime:v.length>0?String(v[v.length-1].startTime):null,mpdEndTime:v.length>0?String(v[v.length-1].endTime):null};this.$5[l].lastSkippedToSegmentNumber=(o=(m=u)==null?void 0:m.getSequenceNumber())!=null?o:0}w&&(w=t,x="stream_state");if(w&&q>c){this.$5[l].inBufferAheadTimeSince==null&&(this.$5[l].inBufferAheadTimeSince=Date.now());return{segment:null,initiator:"buffer_ahead_rule",userInfo:{bufferAheadSec:String(q),bufferedOffset:String(p),lastMaxSegNum:String(h(this.$5,l)),segment:u?String(u.getSequenceNumber()):null,computedBufferAheadTarget:String(c)}}}else!w&&q>c&&this.$3.getOperationLogger("segment_locator").setUserInfo({bufferAheadSec:String(q),bufferedOffset:String(p),computedBufferAheadTarget:String(c)}).setReason("disabled_buffer_ahead_rule:"+(x||"")).setType(l).log();k=g&&g.getSequenceNumber()||0;f=u&&u.getSequenceNumber()||0;if(u&&g&&k>=f){n=d("oz-player/streams/OzSegmentLocator").getEndingSequenceNumber(a);return(n||0)>=k?{segment:g}:{segment:null,initiator:"mpd_refresh",userInfo:{leSegNum:String(k)}}}v=e?d("oz-player/utils/OzSourceBufferUtil").getTotalInBufferedRanges(e.getBufferedRanges()):0;m=e?d("oz-player/utils/OzSourceBufferUtil").getTotalBufferAheadOfPosition(e.getBufferedRanges(),b.getCurrentTime(),j).bufferAheadSec:0;o=i(this.$5,l);t=Date.now();if(j.getNumber("download_cursor_total_buffer_max_sec")!=0&&j.getNumber("download_cursor_total_buffer_max_sec")<m||j.getNumber("download_cursor_buffer_ahead_time_max_sec")!=0&&o!=null&&j.getNumber("download_cursor_buffer_ahead_time_max_sec")<(t-o)/1e3){this.$5[l].lastSkippedToSegmentNumber=(x=(w=u)==null?void 0:w.getSequenceNumber())!=null?x:0;this.$3.getOperationLogger("segment_locator").setUserInfo({bufferAheadSec:String(q),bufferedOffset:String(p),totalBufferedSec:String(v),computedBufferAheadTarget:String(c),inBufferAheadElapsedTime:String((t-((f=o)!=null?f:0))/1e3)}).setReason("force_paired_catchup").setType(l).log()}this.$5[l].inBufferAheadTimeSince=null;return{segment:u,initiator:r?r:void 0,userInfo:s?s:void 0}};return a}();g.OzPredictedSegmentLocator=a}),98);
__d("oz-player/utils/getRepresentationInCache",["oz-player/networks/RequestParamCreator"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("oz-player/networks/RequestParamCreator"))();function a(a,b){b===void 0&&(b=null);return a.find(function(a){a=a.getInitSegment();var c=a&&a.getByteRange();return a&&c&&b?b.hasCacheValue(h.createRequestParam(a.getURI(),c).uri.toString()):!1})||null}g["default"]=a}),98);
__d("oz-player/Player",["Promise","oz-player/configs/OzPlayerConfig","oz-player/drm/OzDrmManager","oz-player/loggings/OzDevConsolePerfLogger","oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/loggings/OzOperationLoggerObserver","oz-player/manifests/OzDynamicVideoLibrary","oz-player/manifests/OzVideoRepresentation","oz-player/media_source/MediaSourceManager","oz-player/media_source/OzMediaSeekableRangeManager","oz-player/networks/OzClientClock","oz-player/networks/OzNetworkManager","oz-player/parsers/OzMpdParser","oz-player/parsers/OzMpdUpdater","oz-player/parsers/OzXmlParserImplDOMParser","oz-player/playback_controls/OzClearSourceBufferOnSeekManager","oz-player/playback_controls/OzLiveLatencyManager","oz-player/playback_controls/OzPlaybackTimeRangeManager","oz-player/playback_controls/OzPlayheadManager","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzPerformance","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/OzUuid","oz-player/shims/ozClearTimeout","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozvariant","oz-player/states/OzObservedPlaybackState","oz-player/states/OzPositionToViewport","oz-player/strategies/OzAbrManager","oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy","oz-player/strategies/OzBlockedRepresentationsManager","oz-player/strategies/OzBufferAheadPriorityStrategy","oz-player/strategies/OzBufferAheadTargetStrategy","oz-player/strategies/OzBufferEndLimitStrategy","oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy","oz-player/strategies/OzBufferTargetCalculator","oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint","oz-player/strategies/OzBufferingDetector","oz-player/strategies/OzDenseLaneSingleRepresentationRestriction","oz-player/strategies/OzPausedStreamSegmentsCountStrategy","oz-player/strategies/OzPlayheadAtInterruptionDetector","oz-player/strategies/OzPlayingStatePriorityStrategy","oz-player/strategies/OzPositionToViewportPriorityStrategy","oz-player/strategies/OzPriorityCalculator","oz-player/strategies/OzSingleCodecRestriction","oz-player/strategies/OzStaleManifestBufferTargetStrategy","oz-player/strategies/OzStartupBufferTargetStrategy","oz-player/strategies/OzStaticStreamSegmentsStrategy","oz-player/strategies/OzStreamSegmentsCountCalculator","oz-player/strategies/OzSupportedMimeCodecsRestriction","oz-player/streams/OzEndOfStreamWatcher","oz-player/streams/OzHandleUserRepresentationSwitch","oz-player/streams/OzMediaStream","oz-player/streams/OzPredictedSegmentLocator","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil","oz-player/utils/OzMpdUtils","oz-player/utils/OzPlaybackRestrictionsUtils","oz-player/utils/OzReadableStreamUtils","oz-player/utils/getRepresentationInCache"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){a||c("oz-player/shims/ozvariant")(0,21876);return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(b){var e;e=a.call(this)||this;e.$Player$p_5=new Map();e.$Player$p_6=new Map();e.$Player$p_9=void 0;e.$Player$p_10=new(c("oz-player/shims/OzSubscriptionsHandler"))();e.$Player$p_11=new(c("oz-player/utils/OzErrorEmitter"))();e.$Player$p_12=new(c("oz-player/utils/OzErrorEmitter"))();e.$Player$p_19=void 0;e.$Player$p_25=[];e.$Player$p_26=void 0;e.$Player$p_27=void 0;e.$Player$p_32=null;e.$Player$p_33=null;e.$Player$p_43=null;e.$Player$p_51=!1;e.$Player$p_54=0;e.$Player$p_55=null;e.$Player$p_56=null;e.$Player$p_57=0;e.$Player$p_58=null;e.$Player$p_59=null;e.$Player$p_60=!1;e.$Player$p_63=null;e.$Player$p_64=null;e.$Player$p_70=!1;e.$Player$p_71=!1;e.$Player$p_84=function(){var a=new(c("oz-player/parsers/OzXmlParserImplDOMParser"))();return a};e.$Player$p_86=function(){e.$Player$p_5.forEach(function(a){return a.endStreamIfBufferedToEndTime()})};e.$Player$p_87=function(){e.$Player$p_5.forEach(function(a){return a.endStream("streamGone")})};var f=b.audioOnly;f=f===void 0?!1:f;var g=b.bufferingDetector,h=b.videoNode,i=b.config,j=b.configMap,k=b.rawMpdXml,l=b.mpdUrl;l=l===void 0?null:l;var m=b.loggerConfig;m=m===void 0?{perfLoggerProviders:[],observedOperationLoggers:[],isOzDevConsoleEnabled:!1}:m;var n=b.customVTTBufferTargetStrategies;n=n===void 0?null:n;var o=b.prefetchCache;o=o===void 0?null:o;var p=b.getOverrideOzRequestImplementation;p=p===void 0?null:p;var q=b.getUserSelectedPlaybackRate,r=b.networkRequestStreamHandlers,s=b.networkRequestStreamRetryHandler,t=b.getShouldIncludeCredentials;t=t===void 0?null:t;var u=b.getCustomRequestParametersForURI;u=u===void 0?null:u;var v=b.initialRepresentationIDs;v=v===void 0?[]:v;var w=b.debugCreateInitiator;w=w===void 0?null:w;var x=b.customParsers;x=x===void 0?new Map():x;var y=b.videoPlaybackRestrictions;y=y===void 0?[]:y;var z=b.customSegmentTimelineParser;z=z===void 0?null:z;var A=b.customRepresentationParsers;A=A===void 0?{}:A;var B=b.videoAbrManagerFactory;B=B===void 0?null:B;var C=b.seekHandler;C=C===void 0?null:C;var D=b.initialPlaybackPositionForDynamicMpd;D=D===void 0?-20:D;var E=b.liveheadFallBehindBlockThreshold;E=E===void 0?30:E;var F=b.liveheadFallBehindBlockMargin;F=F===void 0?5.9:F;var G=b.startTimeStamp;G=G===void 0?0:G;var H=b.drmProviders;H=H===void 0?[]:H;var I=b.getVideoDimensions;I=I===void 0?null:I;var J=b.setCustomFetchStreamLoggingAttributes;J=J===void 0?null:J;var K=b.bufferEndLimit;K=K===void 0?null:K;var L=b.configureCustomRequestParametersForSegment;L=L===void 0?null:L;var M=b.isClientTriggeredTraceEnabled;M=M===void 0?!1:M;var N=b.enableImmediateQualityDownSwitch;N=N===void 0?!1:N;b=b.userPreferenceLang;b=b===void 0?"":b;e.$Player$p_1=n;e.$Player$p_49=w;n=m.perfLoggerProviders;w=m.observedOperationLoggers;m=m.isOzDevConsoleEnabled;e.$Player$p_17=m||!1;e.$Player$p_16=new(d("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)(e.$Player$p_74().concat(n));e.$Player$p_2=f;e.$Player$p_4=(m=i)!=null?m:new(c("oz-player/configs/OzPlayerConfig"))((n=j)!=null?n:{});e.$Player$p_12.onError(function(){});e.$Player$p_22=new(c("oz-player/loggings/OzOperationLoggerObserver"))();e.$Player$p_22.observe(w,e.$Player$p_16);e.$Player$p_16.getOperationLogger("player_initialization").setInitiator("player-"+c("oz-player/shims/OzUuid")()).log();e.$Player$p_53=p;e.$Player$p_28=x;e.$Player$p_67=new(c("oz-player/strategies/OzBlockedRepresentationsManager"))(e.$Player$p_4);e.$Player$p_10.addSubscriptions(e.$Player$p_67.onRepresentationBlocked(function(a){e.emit("representationBlocked",a)}));e.$Player$p_31=[e.$Player$p_67,new(c("oz-player/strategies/OzSupportedMimeCodecsRestriction"))()].concat(y);!e.$Player$p_4.getBool("mcm_in_play_codec_switch")?e.$Player$p_31.push(new(c("oz-player/strategies/OzSingleCodecRestriction"))()):e.$Player$p_31.push(new(c("oz-player/strategies/OzDenseLaneSingleRepresentationRestriction"))());e.$Player$p_29=A;e.$Player$p_30=z;e.$Player$p_35=B;e.$Player$p_36=C;e.$Player$p_37=G;e.$Player$p_38=D;e.$Player$p_41=(f=q)!=null?f:function(){return 1};e.$Player$p_39=E;e.$Player$p_42=F;e.$Player$p_66=K;e.$Player$p_69=M;e.$Player$p_71=N;e.$Player$p_47=H;e.$Player$p_63=J;e.$Player$p_3=h;e.$Player$p_7=new(c("oz-player/media_source/MediaSourceManager"))({videoNode:e.$Player$p_3,config:e.$Player$p_4,perfLoggerProvider:e.$Player$p_16,handleVttCaptionsUpdated:function(a){var b;b=(b=e.$Player$p_5.get("caption"))==null?void 0:(b=b.getCurrentRepresentation())==null?void 0:b.getLang();e.emit("vttCaptionsUpdated",a,b)},onClearVideoNodeError:function(){e.$Player$p_75()},onRetryVideoElementError:function(a){e.emit("videoNodeErrorRetry",a)}});e.$Player$p_7.onError(function(a){e.$Player$p_11.emitError(a)});if(e.$Player$p_4.getBool("clear_on_seek")){i=new(c("oz-player/playback_controls/OzClearSourceBufferOnSeekManager"))(e.$Player$p_3,e.$Player$p_4,e.$Player$p_5,e.$Player$p_16);i.maybeOverwriteVideoCurrentTimeProperty();e.$Player$p_10.addSubscriptions(i.onError(e.$Player$p_11.emitError));e.$Player$p_64=i}e.$Player$p_24=o;m=e.$Player$p_24&&e.$Player$p_24.getCachedRepresentations();e.$Player$p_25=m||v;e.$Player$p_65=new(c("oz-player/manifests/OzDynamicVideoLibrary"))({config:e.$Player$p_4});e.$Player$p_44=r;e.$Player$p_45=t;e.$Player$p_46=u;e.$Player$p_68=L;e.$Player$p_13=new(c("oz-player/networks/OzNetworkManager"))({config:e.$Player$p_4,prefetchCache:e.$Player$p_24,networkRequestStreamHandlers:e.$Player$p_44,getOverrideOzRequestImplementation:e.$Player$p_53,getShouldIncludeCredentials:e.$Player$p_45,getCustomRequestParametersForURI:e.$Player$p_46,networkRequestStreamRetryHandler:s,setCustomFetchStreamLoggingAttributes:e.$Player$p_63,dynamicVideoLibrary:e.$Player$p_65,configureCustomRequestParametersForSegment:e.$Player$p_68,onResourceTimingBufferFull:function(){e.$Player$p_76()}});e.$Player$p_18=l;e.$Player$p_8=k;e.$Player$p_14=new(c("oz-player/states/OzObservedPlaybackState"))(e.$Player$p_4,e.$Player$p_3,e.$Player$p_16);e.$Player$p_52=I;e.$Player$p_15=new(c("oz-player/streams/OzEndOfStreamWatcher"))(e.$Player$p_7,e.$Player$p_4);e.$Player$p_10.addSubscriptions(e.$Player$p_15.addListener("streamEnd",function(){e.$Player$p_51=!0,e.emit("streamEnd")}));e.$Player$p_50=(j=g)!=null?j:e.$Player$p_77();e.$Player$p_4.getNumber("pixels_below_viewport_to_observe")>0&&(e.$Player$p_61=new(c("oz-player/states/OzPositionToViewport"))(e.$Player$p_3,e.$Player$p_4));e.$Player$p_72=b;e.$Player$p_73=null;return e}var f=e.prototype;f.$Player$p_76=function(){if(this.$Player$p_70)return;c("oz-player/shims/ozReportUnexpectedError")(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_JAVASCRIPT_NATIVE",description:"ResourceTiming buffer is full"}),"ResourceTiming buffer is full","warn");this.$Player$p_70=!0};f.$Player$p_78=function(a){var b=this;this.$Player$p_79();var c=d("oz-player/loggings/OzLoggingUtils").executeOperationAndLog(this.$Player$p_16.cloneContext().setInitiator(this.$Player$p_49),"parse_manifest",function(e){var f,g,c=b.$Player$p_80(a);f=String((f=c.getCustomField("currentServerTimeMs"))!=null?f:"");g=String((g=c.getCustomField("lastVideoFrameTs"))!=null?g:"");f={currentServerTimeMs:f,ingestLastVideoFrameTs:g,nowMs:String(Date.now())};g=d("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(c,b.$Player$p_4);g=g&&g.endTime!=0?g.endTime:null;e.setLiveheadPosition(g).setLiveheadSeqNumMpd(d("oz-player/utils/OzMpdUtils").getMpdLastSequenceNumber(c)).setManifestType(c.isStaticMpd()?"static":"dynamic").setIsTemplatedManifest(Boolean(c.getCustomField("isLiveTemplated"))).setUserInfo(f);return c});this.$Player$p_81(c)};f.$Player$p_81=function(a){var b=this;this.$Player$p_9=i(a);this.$Player$p_4.getBool("player_emit_mpdparsed_early")&&this.emit("mpdParsed",a);this.$Player$p_26=this.$Player$p_82();this.$Player$p_27=this.$Player$p_83();this.$Player$p_67.setAvailableRepresentationsCount(a.getVideoRepresentations().length);if(this.$Player$p_18!=null){var e=new(c("oz-player/parsers/OzMpdUpdater"))(this.$Player$p_4,a,this.$Player$p_13,this.$Player$p_14,this.$Player$p_16,{mpdUrl:null,createXmlParser:this.$Player$p_84,customParsers:this.$Player$p_28,customRepresentationParsers:this.$Player$p_29,customSegmentTimelineParser:this.$Player$p_30},this.$Player$p_48,this.$Player$p_69);this.$Player$p_85(e);this.$Player$p_10.addSubscriptions(e.onError(this.$Player$p_11.emitError),e.addListener("manifestFetchError",function(a){return b.emit("manifestFetchError",a)}),e.addListener("manifestFetchErrorRetry",function(a){return b.emit("manifestFetchErrorRetry",a)}),e.addListener("streamTransitionToStatic",this.$Player$p_86),e.addListener("streamGone",this.$Player$p_87));e.setupUpdateLoop();this.$Player$p_21=e}this.$Player$p_4.getBool("use_live_latency_manager")?!a.isStaticMpd()?(this.$Player$p_40=new(c("oz-player/playback_controls/OzLiveLatencyManager"))({config:this.$Player$p_4,mpd:a,playbackState:this.$Player$p_14,bufferingDetector:this.$Player$p_50,video:this.$Player$p_3,loggerProvider:this.$Player$p_16,getUserSelectedPlaybackRate:this.$Player$p_41}),this.$Player$p_37=this.$Player$p_40.getPreferredLiveHeadLatencySec()*-1):this.$Player$p_37=this.$Player$p_37:this.$Player$p_37=a.isStaticMpd()?this.$Player$p_37:this.$Player$p_88(a);this.$Player$p_19=new(c("oz-player/playback_controls/OzPlayheadManager"))({video:this.$Player$p_3,mpd:a,dynamicVideoLibrary:this.$Player$p_65,playheadCatchup:this.$Player$p_34,playbackState:this.$Player$p_14,config:this.$Player$p_4,perfLoggerProvider:this.$Player$p_16,seekHandler:this.$Player$p_36,initialPlaybackPosition:this.$Player$p_37,canSupportSkipVideobufferGaps:(e=(e=this.$Player$p_64)==null?void 0:e.getCurrentTimePropertyOverwriteSuccess())!=null?e:!1,liveLatencyManager:this.$Player$p_40});this.$Player$p_20=new(c("oz-player/playback_controls/OzPlaybackTimeRangeManager"))({config:this.$Player$p_4,video:this.$Player$p_3,mpd:a,liveheadFallBehindBlockThreshold:this.$Player$p_39,liveheadFallBehindBlockMargin:this.$Player$p_42,playbackState:this.$Player$p_14,perfLoggerProvider:this.$Player$p_16});this.$Player$p_89()["catch"](function(a){var e=d("oz-player/utils/OzErrorUtils").isOzError(a)?a:null;b.$Player$p_11.emitError(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Failed to setup streams: "+String(a),extra:babelHelpers["extends"]({},e==null?void 0:e.getExtra(),{originalError:a,code:c("oz-player/utils/OzCustomErrorCode").SETUP_STREAMS_PROMISE_REJECTION.toString()})}))});this.emit("mpdReady",a)};f.load=function(a){var b=this;this.$Player$p_18=a;try{var c=this.$Player$p_8;c!=null?this.$Player$p_78(c):a!=null?this.$Player$p_90(a).then(function(a){if(b.$Player$p_60){b.$Player$p_60=!1;b.load(b.$Player$p_18);return}b.$Player$p_8=a;b.$Player$p_54=0;b.$Player$p_78(a)})["catch"](function(c){if(b.$Player$p_60){b.$Player$p_60=!1;b.load(b.$Player$p_18);return}var e=d("oz-player/utils/OzErrorUtils").isOzError(c)?c:null;e=d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Failed to setup player with fetched MPD: "+String(c),extra:babelHelpers["extends"]({},e==null?void 0:e.getExtra(),{originalError:c,url:a})});b.$Player$p_91(e,a)}):this.$Player$p_11.emitError(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Cannot start Oz without a raw mpd xml or mpd url"}))}catch(a){c=d("oz-player/utils/OzErrorUtils").isOzError(a)?a:null;this.$Player$p_11.emitError(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Failed to setup player: "+String(a),extra:babelHelpers["extends"]({},c==null?void 0:c.getExtra(),{originalError:a})}))}};f.$Player$p_88=function(a){var b;b=(b=a.getVideoRepresentations()[0].getMaxGopSec())!=null?b:0;a=(a=a.getVideoRepresentations()[0].getEndingSegment())==null?void 0:a.getTimeRange();a=a!=null?a.endTime-a.startTime:0;a>0&&(b=a);return Math.min(this.$Player$p_38+this.$Player$p_4.getNumber("dynamic_mpd_initial_playback_position_offset_modifier"),-1*b*this.$Player$p_4.getNumber("pdash_download_cursor_catchup_threshold_gop_multiplier"))};f.$Player$p_90=function(a){this.$Player$p_54++;a=this.$Player$p_13.requestRawUrl({debugName:"OzPlayer/fetchMpdXml/mpd",url:a,options:null,loggerProvider:this.$Player$p_16});a=a.getStream().getReader();return d("oz-player/utils/OzReadableStreamUtils").pumpString(a)};f.$Player$p_92=function(){this.$Player$p_55!=null&&(c("oz-player/shims/ozClearTimeout")(this.$Player$p_55),this.$Player$p_55=null)};f.$Player$p_91=function(a,b){var d=this,e=!0,f=this.$Player$p_54-1,g=a.getExtra().code;this.$Player$p_56!==g?(this.$Player$p_56=g,this.$Player$p_57=1):this.$Player$p_57++;var h=function(){e=!1};g={endStream:function(){h(),d.$Player$p_51=!0,d.emit("streamGoneBeforeStart")},consecutiveFailuresForErrorCode:this.$Player$p_57,error:a,isInitialRequest:!0,retry:function(a){h(),d.$Player$p_92(),d.$Player$p_55=c("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){d.$Player$p_92(),d.load(b)},(a==null?void 0:a.waitMs)!=null?a==null?void 0:a.waitMs:1e3)},retryAttemptCount:f};this.$Player$p_4.getNumber("initial_manifest_request_retry_count")>0&&this.emit("manifestFetchError",g);e&&this.$Player$p_11.emitError(a)};f.updatePlayerRunTimeConfig=function(a){var b=a.manifestUrl,c=a.audioStreamDataHandler,d=a.videoStreamDataHandler,e=a.applicationStreamDataHandler;a=a.resetStreamAnchor;if(d!==void 0){var f=this.$Player$p_5.get("video");f&&f.updateRunTimeConfigs({streamDataHandler:d})}if(a!==void 0){f=this.$Player$p_5.get("video");f&&f.updateRunTimeConfigs({resetStreamAnchor:a});d=this.$Player$p_5.get("audio");d&&d.updateRunTimeConfigs({resetStreamAnchor:a});(f=this.$Player$p_19)==null?void 0:f.resetCurrentTime()}if(c!==void 0){d=this.$Player$p_5.get("audio");d&&d.updateRunTimeConfigs({streamDataHandler:c})}if(e!==void 0){f=this.$Player$p_5.get("caption");f&&f.updateRunTimeConfigs({streamDataHandler:e,resetStreamAnchor:a})}b!=null&&b!==""&&this.$Player$p_93(b)};f.$Player$p_94=function(a,b){var c=this,e=a.getMimeCodecs();e=this.$Player$p_7.createSourceBufferManager(b+"/"+a.getMimeType()+"/"+a.getCodecs(),e,b,a.getInitSegment().getData());this.$Player$p_95(e,b,a);a=e.then(function(a){c.$Player$p_50&&b!=="caption"&&c.$Player$p_50.setSourceBufferState(b,a.getSourceBufferState());return a});d("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,this.$Player$p_16,"source_attach",function(a){a.setType(b)});return a.then(function(a){if(b!=="caption"){var d;(d=c.$Player$p_19)==null?void 0:d.observeSourceBufferState(a.getSourceBufferState(),b)}})};f.isDrm=function(){var a=this.$Player$p_48;if(a!=null){a=a.hasContentProtections();return a!=null?a:!1}return!1};f.$Player$p_79=function(){var a=this.$Player$p_47;if(a.length>0){var b=this.$Player$p_48=new(d("oz-player/drm/OzDrmManager").OzDrmManager)(this.$Player$p_16,this.$Player$p_3,{maxStartEMEAttempts:this.$Player$p_4.getNumber("max_start_eme_attempts"),throwNoLicenseError:!0});a.forEach(function(a){b.addProvider(a)});this.$Player$p_10.addSubscriptions(b.onError(this.$Player$p_11.emitError))}};f.$Player$p_96=function(a){var b=this,d=i(this.$Player$p_9);a=[this.$Player$p_4,a,this.$Player$p_97(),this.$Player$p_31,this.$Player$p_14,window.devicePixelRatio||1,function(){return b.$Player$p_98()},d.isStaticMpd()?"static":"dynamic",this.$Player$p_16];d=this.$Player$p_35&&this.$Player$p_35.apply(this,a);return(d=d)!=null?d:babelHelpers.construct(c("oz-player/strategies/OzAbrManager"),a)};f.$Player$p_99=function(a){return a==="caption"?!0:!1};f.$Player$p_95=function(a,b,e){var f=this,g=i(this.$Player$p_9),h=this.$Player$p_6.get(b),j=new(c("oz-player/streams/OzMediaStream"))({config:this.$Player$p_4,sourceBufferManagerPromise:a,networkManager:this.$Player$p_13,playbackState:this.$Player$p_14,endOfStreamWatcher:b!=="caption"?this.$Player$p_15:null,bufferTargetCalculator:this.$Player$p_100(b),priorityCalculator:this.$Player$p_101(),streamSegmentsCountCalculator:this.$Player$p_102(b),abrManager:h,representation:e,loggerProvider:this.$Player$p_16.cloneContext().setType(b),segmentLocator:this.$Player$p_62,setCustomFetchStreamLoggingAttributes:this.$Player$p_63,blockedRepresentationsManager:this.$Player$p_67,dynamicVideoLibrary:this.$Player$p_65,shouldAppendOncePerStream:this.$Player$p_99(b),mediaStreamType:b,warningEmitter:this.$Player$p_12,mpd:g});this.$Player$p_37===0?j.start():(i(this.$Player$p_9),this.$Player$p_19&&this.$Player$p_10.addSubscriptions(this.$Player$p_19.addListener("initialPlaybackPositionSet",function(){j.start()})));this.$Player$p_10.addSubscriptions(j.onError(this.$Player$p_11.emitError));this.$Player$p_23&&this.$Player$p_10.addSubscriptions(this.$Player$p_23.listenToMediaStreamInitAppended(j));b==="video"&&(this.$Player$p_33=new(c("oz-player/streams/OzHandleUserRepresentationSwitch"))(this.$Player$p_4,this.$Player$p_14,d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_98(),this.$Player$p_97()),j,a,this.$Player$p_71),this.$Player$p_10.addSubscriptions(this.$Player$p_33.onError(this.$Player$p_11.emitError)));this.$Player$p_5.set(b,j);this.$Player$p_10.addSubscriptions(j.addListener("switchRepresentation",function(){var c,a=j.getCurrentRepresentation();(c=f.$Player$p_23)==null?void 0:c.setTimeRangeProvider(a);(c=f.$Player$p_19)==null?void 0:c.setTimeRangeProvider(a);(c=f.$Player$p_20)==null?void 0:c.setTimeRangeProvider(a);b==="video"&&f.emit("switchVideoRepresentation")}),j.addListener("SegmentAppended",function(a){f.$Player$p_103("SegmentAppended",a)}),j.addListener("streamError",function(a){f.emit("streamError",a)}),j.addListener("streamErrorRetry",function(a){f.emit("streamErrorRetry",a)}))};f.$Player$p_104=function(){if(this.$Player$p_66!=null)return[new(c("oz-player/strategies/OzBufferEndLimitStrategy"))(this.$Player$p_3,this.$Player$p_66)];else return[new(c("oz-player/strategies/OzStaleManifestBufferTargetStrategy"))(i(this.$Player$p_9),this.$Player$p_4),new(c("oz-player/strategies/OzStartupBufferTargetStrategy"))(this.$Player$p_14,this.$Player$p_4),new(c("oz-player/strategies/OzBufferAheadTargetStrategy"))(this.$Player$p_4)]};f.$Player$p_105=function(){return this.$Player$p_66==null?[new(c("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint"))({config:this.$Player$p_4,minimumBufferTargetSec:this.$Player$p_4.getNumber("buffer_target_constraint_minimum_sec")})]:[]};f.$Player$p_106=function(){return this.$Player$p_66==null?[new(c("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint"))({config:this.$Player$p_4,minimumBufferTargetSec:0})]:[]};f.$Player$p_82=function(){return new(c("oz-player/strategies/OzBufferTargetCalculator"))(this.$Player$p_104(),this.$Player$p_105())};f.$Player$p_83=function(){return this.$Player$p_1!=null?new(c("oz-player/strategies/OzBufferTargetCalculator"))([].concat(this.$Player$p_1,this.$Player$p_104()),this.$Player$p_106()):this.$Player$p_82()};f.$Player$p_100=function(a){var b=a==="caption"?this.$Player$p_27:this.$Player$p_26;b||c("oz-player/shims/ozvariant")(0,76764,a);return b};f.$Player$p_85=function(a){var b=this;if(this.$Player$p_4.getNumber("stream_interrupt_check_mpd_stale_count_threshold")>0){var d=this.$Player$p_50,e=new(c("oz-player/strategies/OzPlayheadAtInterruptionDetector"))(this.$Player$p_3,d);this.$Player$p_10.addSubscriptions(e.addListener("playheadAtInterruption",function(a){b.$Player$p_16.getOperationLogger("stream_interrupted").log(),b.emit("streamInterruptAt",a)}),a.addListener("streamInterruptAt",function(a){var c;(c=b.$Player$p_50)==null?void 0:c.notifyStreamInterrupted();e.notifyStreamInterrupted(a)}),a.addListener("streamResumedAt",function(a){var c;b.$Player$p_16.getOperationLogger("stream_resumed").log();(c=b.$Player$p_50)==null?void 0:c.notifyStreamResumed();e.notifyStreamResumed();b.emit("streamResumedAt",a)}));this.$Player$p_32=e}};f.$Player$p_101=function(){var a=[new(c("oz-player/strategies/OzPlayingStatePriorityStrategy"))(this.$Player$p_14),new(c("oz-player/strategies/OzBufferAheadPriorityStrategy"))(this.$Player$p_4,this.$Player$p_14)].concat(this.$Player$p_4.getNumber("pixels_below_viewport_to_observe")>0&&this.$Player$p_61!=null?new(c("oz-player/strategies/OzPositionToViewportPriorityStrategy"))(this.$Player$p_61,this.$Player$p_4):[]);return new(c("oz-player/strategies/OzPriorityCalculator"))(a)};f.$Player$p_102=function(a){var b=[new(c("oz-player/strategies/OzStaticStreamSegmentsStrategy"))(this.$Player$p_4),new(c("oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy"))(this.$Player$p_100(a),this.$Player$p_4)];this.$Player$p_4.getNumber("paused_stream_segments_count")!==0&&b.push(new(c("oz-player/strategies/OzPausedStreamSegmentsCountStrategy"))(this.$Player$p_14,this.$Player$p_4));a==="video"&&b.push(new(c("oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy"))(this.$Player$p_4,this.$Player$p_97()));return new(c("oz-player/strategies/OzStreamSegmentsCountCalculator"))(b)};f.onError=function(a){return this.$Player$p_11.onError(a)};f.onWarning=function(a){return this.$Player$p_12.onError(a)};f.getSelectedVideoQuality=function(){var a=this.$Player$p_9;if(!a||this.$Player$p_2)return"";a=this.$Player$p_5.get("video");a=a&&a.getCurrentRepresentation();if(a instanceof c("oz-player/manifests/OzVideoRepresentation"))return a.getDisplayLabel();a=this.$Player$p_97();a=a[0];if(a)return a.getDisplayLabel();a||c("oz-player/shims/ozvariant")(0,19857);return""};f.getSelectedAudioTrackID=function(){var a=this.$Player$p_9;if(!a)return null;var b=this.$Player$p_5.get("audio");b=b&&b.getCurrentRepresentation();if(b)return b.getID();b=a.getAudioRepresentations();a=b[0];return a?a.getID():null};f.switchToVideoQuality=function(a){var b=this.$Player$p_97().find(function(b){return b.getDisplayLabel()===a});if(b){var c=this.$Player$p_5.get("video");c&&(c.switchRepresentation(b),c.disableAdaptation())}};f.switchToAudioTrack=function(a){var b=i(this.$Player$p_9);b=b.getAudioRepresentations().find(function(b){return b.getID()===a});if(b){var c=this.$Player$p_5.get("audio");c&&(c.switchRepresentation(b,[0,this.$Player$p_14.getDuration()]),c.disableAdaptation(),this.$Player$p_73=b.getLang(),this.$Player$p_4.getBool("enable_lip_sync_abr_select_quality")&&this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&this.$Player$p_4.getBool("mcm_in_play_codec_switch")&&this.$Player$p_107())}};f.$Player$p_107=function(){var a=this.$Player$p_5.get("video");if(!a)return;var b=a.getCurrentRepresentation();if(b.getLang()==null&&this.$Player$p_73==null||b.getLang()===this.$Player$p_73)return;b=this.$Player$p_6.get("video");b?(b.updateRepresentations(this.$Player$p_97()),b=b.getBestRepresentation()):b=this.$Player$p_97()[0];if(!b)return;a.switchRepresentation(b,[0,this.$Player$p_14.getDuration()]);return};f.getIsVideoQualityAdaptationEnabled=function(){var a=this.$Player$p_5.get("video");return a?a.getIsAdaptationEnabled():!1};f.enableVideoQualityAdaptation=function(){var a=this.$Player$p_5.get("video");a&&a.enableAdaptation()};f.getVideoQualities=function(){var a=this,b=this.$Player$p_9;return!b?[]:this.$Player$p_97().filter(function(b){var c;return!((c=a.$Player$p_67)==null?void 0:c.isBlocked(b.getID()))}).map(function(a){return a.getDisplayLabel()})};f.getVideoTracks=function(){var a=this,b=this.$Player$p_9;return!b?[]:this.$Player$p_97().filter(function(b){var c;return!((c=a.$Player$p_67)==null?void 0:c.isBlocked(b.getID()))}).map(function(a){return{codecFamily:d("oz-player/utils/OzMimeUtil").getParsedCodecFamily(a.getMimeCodecs()),displayLabel:a.getDisplayLabel(),qualityLabel:a.getDisplayLabel(),height:a.getHeight(),id:a.getID(),qualityScore:a.getQualityScore("csvqm"),width:a.getWidth()}})};f.getAudioTracks=function(){var a=this,b=this.$Player$p_9;return!b?[]:b.getAudioRepresentations().filter(function(b){var c;return!((c=a.$Player$p_67)==null?void 0:c.isBlocked(b.getID()))}).map(function(a){return{id:a.getID(),displayLabel:a.getDisplayLabel(),lang:a.getLang(),role:a.getRole()}})};f.setEnableLiveheadCatchup=function(a){if(this.$Player$p_20){var b;a?this.$Player$p_16.getOperationLogger("live_catchup_enabled").setIsLatencyCachupEnabled(!0).log():this.$Player$p_16.getOperationLogger("live_catchup_disabled").setIsLatencyCachupEnabled(!1).log();(b=this.$Player$p_20)==null?void 0:b.setTimelineBlockingEnabled(a)}this.$Player$p_5.forEach(function(b){b.setEnableLiveheadCatchup(a)});(b=this.$Player$p_19)==null?void 0:b.setEnableLiveheadCatchup(a)};f.$Player$p_89=function(){var a=this;this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&(this.$Player$p_73=this.$Player$p_108()?this.$Player$p_72:null);var c=this.$Player$p_97()[0];this.$Player$p_62=c&&c.canPredict()&&this.$Player$p_4.getBool("pdash_use_pdash_segmentlocator")||c&&c.canApproximateId()?new(d("oz-player/streams/OzPredictedSegmentLocator").OzPredictedSegmentLocator)({videoNode:this.$Player$p_3,liveLatencyManager:this.$Player$p_40,loggerProvider:this.$Player$p_16,dynamicVideoLibrary:this.$Player$p_65}):null;c=this.$Player$p_2?[this.$Player$p_109({liveConfigsFromAudioStream:!0}),this.$Player$p_110()]:[this.$Player$p_111(),this.$Player$p_109({liveConfigsFromAudioStream:!1}),this.$Player$p_110()];var e=[];return(h||(h=b("Promise"))).all(c).then(function(){var b=a.$Player$p_5.get("video"),c=a.$Player$p_5.get("audio"),d=a.$Player$p_5.get("caption");b&&e.push(b.getCurrentRepresentation());c&&e.push(c.getCurrentRepresentation());d&&e.push(d.getCurrentRepresentation());e.forEach(function(b){a.$Player$p_10.addSubscriptions(b.addUpdateListener(function(){a.$Player$p_103("SegmentIndexesUpdated",e)}))});a.$Player$p_103("InitialSegmentIndexes",e);a.$Player$p_3&&a.$Player$p_3.style&&(a.$Player$p_3.style.display=a.$Player$p_2?"none":"block");a.emit("initialized")})};f.$Player$p_112=function(a){if(!a.getTimeRanges().length){this.$Player$p_16.getOperationLogger("playhead_adjustment").setInitiator("setup_initial_duration").setResult("failed").log();return}a=a.getTimeRanges()[a.getTimeRanges().length-1].endTime;this.$Player$p_7.updateDuration(a,!0)};f.$Player$p_113=function(a){var b;this.$Player$p_23=new(c("oz-player/media_source/OzMediaSeekableRangeManager"))(this.$Player$p_7,this.$Player$p_4);this.$Player$p_112(a);(b=this.$Player$p_23)==null?void 0:b.setTimeRangeProvider(a);(b=this.$Player$p_19)==null?void 0:b.setTimeRangeProvider(a);(b=this.$Player$p_20)==null?void 0:b.setTimeRangeProvider(a)};f.$Player$p_111=function(){var a=this.$Player$p_97();if(!a.length)return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"No video representations in the manifest",extra:{code:c("oz-player/utils/OzCustomErrorCode").SETUP_STREAMS_PROMISE_REJECTION.toString()}}));var b=d("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player$p_31,this.$Player$p_98(),a);if(!b.length){a=a.map(function(a){return a.getDisplayLabel()+"@"+a.getWidth()+"x"+a.getHeight()+"("+a.getMimeCodecs()+")"});return c("oz-player/shims/OzMaybeNativePromise").reject(d("oz-player/utils/OzErrorUtils").createOzError({type:"OZ_INITIALIZATION",description:"Restricted all video representations: "+a.join(", "),extra:{code:c("oz-player/utils/OzCustomErrorCode").SETUP_STREAMS_PROMISE_REJECTION.toString()}}))}this.$Player$p_113(b[0]);a=this.$Player$p_114(b);var e=this.$Player$p_96(a||b[0]);this.$Player$p_6.set("video",e);a||(a=e.getBestRepresentation());return this.$Player$p_94(a||b[0],"video")};f.$Player$p_97=function(){var a=i(this.$Player$p_9);if(this.$Player$p_4.getBool("enable_lip_sync_abr_select_quality")&&this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&this.$Player$p_4.getBool("mcm_in_play_codec_switch")){var b;return(b=a.getVideoRepresentationsByLang(this.$Player$p_73))!=null?b:[]}return a.getVideoRepresentations()};f.$Player$p_108=function(){var a=this,b=i(this.$Player$p_9),c=b.getAudioRepresentations();if(this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&b.isStaticMpd()){b=-1;this.$Player$p_72!=null&&(b=c.findIndex(function(b){return b.getLang()===a.$Player$p_72}));return b>-1}return!1};f.$Player$p_109=function(a){var b=this;a=a.liveConfigsFromAudioStream;a=a===void 0?!1:a;var d=i(this.$Player$p_9),e=d.getAudioRepresentations();a&&this.$Player$p_113(e[0]);a=-1;this.$Player$p_4.getBool("enable_alternative_audio_tracks")&&e.length>1&&d.isStaticMpd()&&(this.$Player$p_72!=null&&(a=e.findIndex(function(a){return a.getLang()===b.$Player$p_72})));if(e.length){d=a>-1?a:e.findIndex(function(a){return a.getLang()==null&&a.getRole()==null});d=d>-1?d:0;return this.$Player$p_94(a>=0&&a<e.length?e[a]:this.$Player$p_115(e)||e[d],"audio")}return c("oz-player/shims/OzMaybeNativePromise").resolve()};f.$Player$p_110=function(){var a=i(this.$Player$p_9);a=a.getApplicationRepresentations();return a.length?this.$Player$p_94(this.$Player$p_116(a)||a[0],"caption"):c("oz-player/shims/OzMaybeNativePromise").resolve()};f.getMpd=function(){return this.$Player$p_9};f.destroy=function(a){var c,d,e=this;a=this.$Player$p_16.getOperationLogger("unload").setInitiator(a).start();(c=this.$Player$p_64)==null?void 0:c.destroy();this.$Player$p_92();this.$Player$p_5.forEach(function(a){a.destroy()});this.$Player$p_33&&(this.$Player$p_33.destroy(),this.$Player$p_33=null);this.$Player$p_5=new Map();this.$Player$p_10.release();this.$Player$p_10.engage();this.$Player$p_14.destroy();this.$Player$p_19&&this.$Player$p_19.destroy();this.$Player$p_40&&(this.$Player$p_40.destroy(),this.$Player$p_40=null);this.$Player$p_20&&(this.$Player$p_20.destroy(),this.$Player$p_20=null);this.$Player$p_48&&this.$Player$p_48.destroy();this.$Player$p_61&&this.$Player$p_61.destroy();this.$Player$p_13&&this.$Player$p_13.destroy();this.$Player$p_52&&(this.$Player$p_52=null);this.$Player$p_7&&this.$Player$p_7.detach();c=(h||(h=b("Promise"))).resolve();this.$Player$p_3.pause();this.$Player$p_3.removeAttribute("src");this.$Player$p_3.removeAttribute("srcObject");"function"===typeof this.$Player$p_3.setMediaKeys&&(c=this.$Player$p_3.setMediaKeys(null));this.$Player$p_21&&this.$Player$p_21.destroy();this.$Player$p_32&&this.$Player$p_32.destroy();this.$Player$p_22.destroy();(d=this.$Player$p_23)==null?void 0:d.destroy();this.$Player$p_50&&this.$Player$p_50.destroy();this.$Player$p_67&&this.$Player$p_67.destroy();a.log();this.emit("destroyed");d=[c];return h.all(d).then(function(){e.$Player$p_3.load()})};f.$Player$p_114=function(a){var b=this,d;d=a.find(function(a){return b.$Player$p_25.indexOf(a.getID())!==-1});d||(d=c("oz-player/utils/getRepresentationInCache")(a,this.$Player$p_24));return d||null};f.$Player$p_115=function(a){var b=this,d;d=a.find(function(a){return b.$Player$p_25.indexOf(a.getID())!==-1});d||(d=c("oz-player/utils/getRepresentationInCache")(a,this.$Player$p_24));return d||null};f.$Player$p_116=function(a){return null};f.$Player$p_80=function(a){var b=new(c("oz-player/parsers/OzMpdParser"))({config:this.$Player$p_4,ozParserContext:{mpdUrl:this.$Player$p_18,createXmlParser:this.$Player$p_84,customParsers:this.$Player$p_28,customRepresentationParsers:this.$Player$p_29,customSegmentTimelineParser:this.$Player$p_30},networkManager:this.$Player$p_13,perfLoggerProvider:this.$Player$p_16,drmManager:this.$Player$p_48,initialRepresentationIDs:this.$Player$p_25,blockedRepresentationsManager:this.$Player$p_67,enableAlternativeAudioTracks:this.$Player$p_4.getBool("enable_alternative_audio_tracks")});a=b.parse(a);this.$Player$p_10.addSubscriptions(b.onError(this.$Player$p_11.emitError));return a};f.$Player$p_74=function(){var a=[];this.$Player$p_17&&a.push(new(d("oz-player/loggings/OzDevConsolePerfLogger").OzDevConsolePerfLoggerProvider)());return a};f.$Player$p_117=function(a,b){b=this.$Player$p_5.get(b);return b?b.getRepresentationIDAtTime(a):null};f.getAudioRepresentationIDAtTime=function(a){return this.$Player$p_117(a,"audio")};f.getVideoRepresentationIDAtTime=function(a){return this.$Player$p_117(a,"video")};f.getCurrentVideoRepresentation=function(){return this.$Player$p_118("video")};f.getCurrentAudioRepresentation=function(){return this.$Player$p_118("audio")};f.getCurrentPlayingAudioTrackID=function(){var a=this.getCurrentAudioRepresentation();return a==null?void 0:a.getID()};f.$Player$p_118=function(a){var b=this.$Player$p_117(this.$Player$p_14.getCurrentTime(),a),c=this.$Player$p_9;if(!c)return null;var d=[];a==="audio"?d=c.getAudioRepresentations():a==="video"&&(d=this.$Player$p_97());return(c=d.find(function(a){return a.getID()===b}))!=null?c:null};f.getSelectedVideoRepresentation=function(){var a=this.$Player$p_5.get("video");return a!=null?a.getCurrentRepresentation():null};f.getSelectedAudioRepresentation=function(){var a=this.$Player$p_5.get("audio");return a!=null?a.getCurrentRepresentation():null};f.getDebug=function(){var a=this,b=this.$Player$p_5.get("video"),c=this.$Player$p_5.get("audio"),d=this.$Player$p_5.get("caption"),e,f,g,h,j,k,l;if(b){var m;e=(m=b.getDebug())==null?void 0:m.MediaStreamAbrManager;f=(m=b.getDebug())==null?void 0:m.SourceBufferManager;if(f){g=(m=f.getDebug())==null?void 0:m.SourceBuffer}}if(c){h=(m=c.getDebug())==null?void 0:m.SourceBufferManager;if(h){j=(m=h.getDebug())==null?void 0:m.SourceBuffer}}if(d){k=(m=d.getDebug())==null?void 0:m.SourceBufferManager;if(k){l=(m=k.getDebug())==null?void 0:m.SourceBuffer}}return{getManifest:function(){return i(a.$Player$p_9)},DashManifestParsed:this.$Player$p_9,VideoSourceStream:b,VideoAbrManager:e,VideoBufferManager:f,VideoSourceBuffer:g,AudioSourceStream:c,AudioBufferManager:h,AudioSourceBuffer:j,CaptionSourceStream:d,CaptionBufferManager:k,CaptionSourceBuffer:l}};f.injectExternalDebugEvent=function(a,b){this.$Player$p_103(a,b)};f.$Player$p_103=function(a,b){this.emit("debug/dashPlayerEvent",{detail:{type:a,event:b}})};f.$Player$p_77=function(){var a=this,b=new(c("oz-player/strategies/OzBufferingDetector"))(this.$Player$p_3,this.$Player$p_4.getLegacyConfig(),function(){return a.$Player$p_51?a.$Player$p_3.duration:Infinity});b.attachPerfLoggerProvider(this.$Player$p_16);this.$Player$p_10.addSubscriptions(b.addListener("enterBuffering",function(b){a.emit("enterBuffering",b)}),b.addListener("leaveBuffering",function(b){a.emit("leaveBuffering",b)}));return b};f.$Player$p_98=function(){var a=this.$Player$p_52?this.$Player$p_52():{width:this.$Player$p_3.offsetWidth,height:this.$Player$p_3.offsetHeight};return a};f.getMpdUrl=function(){return this.$Player$p_18};f.$Player$p_93=function(a){var b=this;this.$Player$p_18=a;var c=this.$Player$p_9;if(!c){this.$Player$p_60=!0;return}else{c.updateLocation(a);this.$Player$p_43&&(this.$Player$p_10.releaseOne(this.$Player$p_43),this.$Player$p_43=null);a=function(){b.$Player$p_43&&(b.$Player$p_10.releaseOne(b.$Player$p_43),b.$Player$p_43=null),b.$Player$p_5.forEach(function(a,d){var e=a.getCurrentRepresentation(),f=e.getDisplayLabel();e=(d==="video"?b.$Player$p_97():c.getAudioRepresentations()).slice();if(d==="video"){d=b.$Player$p_6.get(d);d&&d.updateRepresentations(b.$Player$p_97())}d=e[0];e.forEach(function(a){var b=a.getDisplayLabel();b===f&&(d=a)});a.switchRepresentation(d);a.restartLoopBody()})};this.$Player$p_43=c.addListener("updated",a);this.$Player$p_10.addSubscriptions(this.$Player$p_43)}};f.getPerfLoggerProvider=function(){return this.$Player$p_16};f.getApproximateFBLSToPlayerDisplayLatency=function(){var a,b;a=Number((a=(a=this.$Player$p_9)==null?void 0:a.getCustomField("lastVideoFrameTs"))!=null?a:void 0);b=Number((b=(b=this.$Player$p_9)==null?void 0:b.getCustomField("currentServerTimeMs"))!=null?b:void 0);var c=this.$Player$p_119(a,b);a=this.$Player$p_120(a,b);return{latencyFromClockSync:a,latencyFromMpdUpdate:c}};f.$Player$p_119=function(a,b){if(!this.$Player$p_14.getCurrentTime()||isNaN(a)||isNaN(b))return null;b=0;this.$Player$p_58===a?b=(c("oz-player/shims/OzPerformance").now()-Number(this.$Player$p_59))/1e3:(this.$Player$p_59=c("oz-player/shims/OzPerformance").now(),this.$Player$p_58=a);a=a/1e3+b-this.$Player$p_14.getCurrentTime();return a};f.$Player$p_120=function(a,b){var d;if(!this.$Player$p_14.getCurrentTime()||isNaN(a)||isNaN(b)||c("oz-player/networks/OzClientClock").getClientClockOffsetMs()==null||!c("oz-player/networks/OzClientClock").getClientClockOffsetMs())return null;d=this.$Player$p_14.getCurrentTimeUpdateTime()+((d=c("oz-player/networks/OzClientClock").getClientClockOffsetMs())!=null?d:0);b=b;var e=this.$Player$p_14.getCurrentTime()*1e3;a=a;d=(d-b-(e-a))/1e3;return d};f.$Player$p_75=function(){this.$Player$p_5.forEach(function(a){a.restartLoopBody();var b=a.getCurrentRepresentation();a.switchRepresentation(b)})};return e}(c("oz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("oz-player",["oz-player/Player"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("oz-player/Player")}),98);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("javascript-blowfish-1.0.5",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){var a=function(b,c){this.key=b,(c==="ecb"||c==="cbc")&&(this.mode=c),this.sBox0=a.sBox0.slice(),this.sBox1=a.sBox1.slice(),this.sBox2=a.sBox2.slice(),this.sBox3=a.sBox3.slice(),this.pArray=a.pArray.slice(),this.generateSubkeys(b)};a.prototype={sBox0:null,sBox1:null,sBox2:null,sBox3:null,pArray:null,key:null,mode:"ecb",iv:"abc12345",keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encrypt:function(a,b){if(this.mode==="ecb")return this.encryptECB(a);if(this.mode==="cbc")return this.encryptCBC(a,b);throw new Error("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u044f.")},decrypt:function(a,b){if(this.mode==="ecb")return this.decryptECB(a);if(this.mode==="cbc")return this.decryptCBC(a,b);throw new Error("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u044f.")},encryptECB:function(a){a=this.utf8Decode(a);var b=Math.ceil(a.length/8),c="";for(var d=0;d<b;d++){var e=a.substr(d*8,8);if(e.length<8){var f=8-e.length;while(0<f--)e+="\0"}var g;f=this.split64by32(e);e=f[0];g=f[1];f=this.encipher(e,g);e=f[0];g=f[1];c+=this.num2block32(e)+this.num2block32(g)}return c},encryptCBC:function(a,b){a=this.utf8Decode(a);var c=Math.ceil(a.length/8),d;b=this.split64by32(b);d=b[0];b=b[1];var e="";for(var f=0;f<c;f++){var g=a.substr(f*8,8);if(g.length<8){var h=8-g.length;while(0<h--)g+="\0"}var i;h=this.split64by32(g);g=h[0];i=h[1];g=this.xor(g,d);i=this.xor(i,b);h=this.encipher(g,i);g=h[0];i=h[1];d=g;b=i;e+=this.num2block32(g)+this.num2block32(i)}return e},decryptECB:function(a){var b=Math.ceil(a.length/8),c="";for(var d=0;d<b;d++){var e=a.substr(d*8,8);if(e.length<8)throw new Error("\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0430: \u0434\u043b\u0438\u043d\u043d\u0430 \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043a\u0440\u0430\u0442\u043d\u0430 8 \u0431\u0430\u044b\u0439\u0442\u0430\u043c.");var f,g;e=this.split64by32(e);f=e[0];g=e[1];e=this.decipher(f,g);f=e[0];g=e[1];c+=this.num2block32(f)+this.num2block32(g)}c=this.utf8Encode(c);return c},decryptCBC:function(a,b){var c=Math.ceil(a.length/8),d,e,f;b=this.split64by32(b);d=b[0];b=b[1];var g="";for(var h=0;h<c;h++){var i=a.substr(h*8,8);if(i.length<8)throw new Error("\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0430: \u0434\u043b\u0438\u043d\u043d\u0430 \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043a\u0440\u0430\u0442\u043d\u0430 8 \u0431\u0430\u0439\u0442\u0430\u043c.");var j,k;i=this.split64by32(i);j=i[0];k=i[1];e=j;f=k;i=this.decipher(j,k);j=i[0];k=i[1];j=this.xor(j,d);k=this.xor(k,b);d=e;b=f;g+=this.num2block32(j)+this.num2block32(k)}g=this.utf8Encode(g);return g},F:function(a){var b=a>>>24,c=a<<8>>>24,d=a<<16>>>24;a=a<<24>>>24;b=this.addMod32(this.sBox0[b],this.sBox1[c]);b=this.xor(b,this.sBox2[d]);b=this.addMod32(b,this.sBox3[a]);return b},encipher:function(a,b){var c;for(var d=0;d<16;d++)a=this.xor(a,this.pArray[d]),b=this.xor(this.F(a),b),c=a,a=b,b=c;c=a;a=b;b=c;b=this.xor(b,this.pArray[16]);a=this.xor(a,this.pArray[17]);return[a,b]},decipher:function(a,b){var c;a=this.xor(a,this.pArray[17]);b=this.xor(b,this.pArray[16]);c=a;a=b;b=c;for(var d=15;d>=0;d--)c=a,a=b,b=c,b=this.xor(this.F(a),b),a=this.xor(a,this.pArray[d]);return[a,b]},generateSubkeys:function(a){var b=0,c=0,d,e;for(d=0;d<18;d++){for(e=4;e>0;e--)b=this.fixNegative(b<<8|a.charCodeAt(c)),c=(c+1)%a.length;this.pArray[d]=this.xor(this.pArray[d],b);b=0}e=[0,0];for(d=0;d<18;d+=2)e=this.encipher(e[0],e[1]),this.pArray[d]=e[0],this.pArray[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox0[d]=e[0],this.sBox0[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox1[d]=e[0],this.sBox1[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox2[d]=e[0],this.sBox2[d+1]=e[1];for(d=0;d<256;d+=2)e=this.encipher(e[0],e[1]),this.sBox3[d]=e[0],this.sBox3[d+1]=e[1]},block32toNum:function(a){return this.fixNegative(a.charCodeAt(0)<<24|a.charCodeAt(1)<<16|a.charCodeAt(2)<<8|a.charCodeAt(3))},num2block32:function(a){return String.fromCharCode(a>>>24)+String.fromCharCode(a<<8>>>24)+String.fromCharCode(a<<16>>>24)+String.fromCharCode(a<<24>>>24)},xor:function(a,b){return this.fixNegative(a^b)},addMod32:function(a,b){return this.fixNegative(a+b|0)},fixNegative:function(a){return a>>>0},split64by32:function(a){var b=a.substring(0,4);a=a.substring(4,8);return[this.block32toNum(b),this.block32toNum(a)]},utf8Decode:function(a){var b="";for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(d&63|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(d&63|128))}return b},utf8Encode:function(a){var b="",c=0,d=0,e=0,f;while(c<a.length)d=a.charCodeAt(c),d<128?(b+=String.fromCharCode(d),c++):d>191&&d<224?(e=a.charCodeAt(c+1),b+=String.fromCharCode((d&31)<<6|e&63),c+=2):(e=a.charCodeAt(c+1),f=a.charCodeAt(c+2),b+=String.fromCharCode((d&15)<<12|(e&63)<<6|f&63),c+=3);return b},base64Encode:function(a){var b="",c,d,e,f,g,h,i=0;while(i<a.length)c=a.charCodeAt(i++),d=a.charCodeAt(i++),e=a.charCodeAt(i++),f=c>>2,c=(c&3)<<4|d>>4,g=(d&15)<<2|e>>6,h=e&63,isNaN(d)?g=h=64:isNaN(e)&&(h=64),b=b+this.keyStr.charAt(f)+this.keyStr.charAt(c)+this.keyStr.charAt(g)+this.keyStr.charAt(h);return b},base64Decode:function(a){var b="",c,d,e,f,g,h=0;a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(h<a.length)d=this.keyStr.indexOf(a.charAt(h++)),e=this.keyStr.indexOf(a.charAt(h++)),f=this.keyStr.indexOf(a.charAt(h++)),g=this.keyStr.indexOf(a.charAt(h++)),d=d<<2|e>>4,e=(e&15)<<4|f>>2,c=(f&3)<<6|g,b=b+String.fromCharCode(d),f!=64&&(b=b+String.fromCharCode(e)),g!=64&&(b=b+String.fromCharCode(c));return b},trimZeros:function(a){return a.replace(/\0+$/g,"")}};a.pArray=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731];a.sBox0=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946];a.sBox1=[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055];a.sBox2=[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504];a.sBox3=[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462];g.exports=a}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
__d("javascript-blowfish",["javascript-blowfish-1.0.5"],(function(a,b,c,d,e,f){e.exports=b("javascript-blowfish-1.0.5")()}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("lodash-4.17.15",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g},i;function j(){(function(){var b,c="4.17.15",d=200,e="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",f="Expected a function",j="__lodash_hash_undefined__",k=500,l="__lodash_placeholder__",m=1,n=2,o=4,p=1,q=2,r=1,s=2,t=4,u=8,v=16,w=32,x=64,y=128,z=256,A=512,B=30,aa="...",ba=800,ca=16,da=1,ea=2,C=3,fa=1/0,ga=9007199254740991,ha=17976931348623157e292,ia=0/0,D=4294967295,ja=D-1,ka=D>>>1,la=[["ary",y],["bind",r],["bindKey",s],["curry",u],["curryRight",v],["flip",A],["partial",w],["partialRight",x],["rearg",z]],ma="[object Arguments]",na="[object Array]",oa="[object AsyncFunction]",pa="[object Boolean]",qa="[object Date]",ra="[object DOMException]",sa="[object Error]",ta="[object Function]",ua="[object GeneratorFunction]",E="[object Map]",va="[object Number]",wa="[object Null]",xa="[object Object]",F="[object Promise]",ya="[object Proxy]",za="[object RegExp]",Aa="[object Set]",Ba="[object String]",Ca="[object Symbol]",Da="[object Undefined]",Ea="[object WeakMap]",Fa="[object WeakSet]",Ga="[object ArrayBuffer]",Ha="[object DataView]",Ia="[object Float32Array]",Ja="[object Float64Array]",Ka="[object Int8Array]",La="[object Int16Array]",Ma="[object Int32Array]",Na="[object Uint8Array]",Oa="[object Uint8ClampedArray]",Pa="[object Uint16Array]",Qa="[object Uint32Array]",Ra=/\b__p \+= '';/g,Sa=/\b(__p \+=) '' \+/g,Ta=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ua=/&(?:amp|lt|gt|quot|#39);/g,Va=/[&<>"']/g,Wa=RegExp(Ua.source),Xa=RegExp(Va.source),Ya=/<%-([\s\S]+?)%>/g,Za=/<%([\s\S]+?)%>/g,$a=/<%=([\s\S]+?)%>/g,ab=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bb=/^\w*$/,cb=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,db=/[\\^$.*+?()[\]{}|]/g,eb=RegExp(db.source),fb=/^\s+|\s+$/g,gb=/^\s+/,hb=/\s+$/,ib=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,jb=/\{\n\/\* \[wrapped with (.+)\] \*/,kb=/,? & /,lb=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,mb=/\\(\\)?/g,nb=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ob=/\w*$/,pb=/^[-+]0x[0-9a-f]+$/i,qb=/^0b[01]+$/i,rb=/^\[object .+?Constructor\]$/,sb=/^0o[0-7]+$/i,tb=/^(?:0|[1-9]\d*)$/,ub=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,vb=/($^)/,wb=/['\n\r\u2028\u2029\\]/g,xb="\\ud800-\\udfff",G="\\u0300-\\u036f",H="\\ufe20-\\ufe2f",yb="\\u20d0-\\u20ff";G=G+H+yb;H="\\u2700-\\u27bf";yb="a-z\\xdf-\\xf6\\xf8-\\xff";var I="\\xac\\xb1\\xd7\\xf7",zb="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ab="\\u2000-\\u206f",Bb=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Cb="A-Z\\xc0-\\xd6\\xd8-\\xde",Db="\\ufe0e\\ufe0f";I=I+zb+Ab+Bb;zb="['\u2019]";Ab="["+xb+"]";Bb="["+I+"]";var J="["+G+"]",Eb="\\d+",Fb="["+H+"]",Gb="["+yb+"]";I="[^"+xb+I+Eb+H+yb+Cb+"]";H="\\ud83c[\\udffb-\\udfff]";yb="(?:"+J+"|"+H+")";var Hb="[^"+xb+"]",Ib="(?:\\ud83c[\\udde6-\\uddff]){2}",Jb="[\\ud800-\\udbff][\\udc00-\\udfff]";Cb="["+Cb+"]";var K="\\u200d",Kb="(?:"+Gb+"|"+I+")";I="(?:"+Cb+"|"+I+")";var Lb="(?:"+zb+"(?:d|ll|m|re|s|t|ve))?",Mb="(?:"+zb+"(?:D|LL|M|RE|S|T|VE))?";yb=yb+"?";var Nb="["+Db+"]?",Ob="(?:"+K+"(?:"+[Hb,Ib,Jb].join("|")+")"+Nb+yb+")*",Pb="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Qb="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])";Nb=Nb+yb+Ob;yb="(?:"+[Fb,Ib,Jb].join("|")+")"+Nb;Ob="(?:"+[Hb+J+"?",J,Ib,Jb,Ab].join("|")+")";var Rb=RegExp(zb,"g"),Sb=RegExp(J,"g"),Tb=RegExp(H+"(?="+H+")|"+Ob+Nb,"g"),Ub=RegExp([Cb+"?"+Gb+"+"+Lb+"(?="+[Bb,Cb,"$"].join("|")+")",I+"+"+Mb+"(?="+[Bb,Cb+Kb,"$"].join("|")+")",Cb+"?"+Kb+"+"+Lb,Cb+"+"+Mb,Qb,Pb,Eb,yb].join("|"),"g"),Vb=RegExp("["+K+xb+G+Db+"]"),Wb=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xb=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Yb=-1,L={};L[Ia]=L[Ja]=L[Ka]=L[La]=L[Ma]=L[Na]=L[Oa]=L[Pa]=L[Qa]=!0;L[ma]=L[na]=L[Ga]=L[pa]=L[Ha]=L[qa]=L[sa]=L[ta]=L[E]=L[va]=L[xa]=L[za]=L[Aa]=L[Ba]=L[Ea]=!1;var M={};M[ma]=M[na]=M[Ga]=M[Ha]=M[pa]=M[qa]=M[Ia]=M[Ja]=M[Ka]=M[La]=M[Ma]=M[E]=M[va]=M[xa]=M[za]=M[Aa]=M[Ba]=M[Ca]=M[Na]=M[Oa]=M[Pa]=M[Qa]=!0;M[sa]=M[ta]=M[Ea]=!1;Fb={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"};Hb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};Ib={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};var Zb={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$b=parseFloat,ac=parseInt;Jb=typeof a=="object"&&a&&a.Object===Object&&a;Ab=typeof self=="object"&&self&&self.Object===Object&&self;var N=Jb||Ab||Function("return this")();zb=typeof g=="object"&&g&&!g.nodeType&&g;J=zb&&typeof h=="object"&&h&&!h.nodeType&&h;var bc=J&&J.exports===zb;bc&&Jb.process;H=null;var cc=H&&H.isArrayBuffer,dc=H&&H.isDate,ec=H&&H.isMap,fc=H&&H.isRegExp,gc=H&&H.isSet,hc=H&&H.isTypedArray;function ic(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function jc(a,b,c,d){var e=-1,f=a==null?0:a.length;while(++e<f){var g=a[e];b(d,g,c(g),a)}return d}function kc(a,b){var c=-1,d=a==null?0:a.length;while(++c<d)if(b(a[c],c,a)===!1)break;return a}function lc(a,b){var c=a==null?0:a.length;while(c--)if(b(a[c],c,a)===!1)break;return a}function mc(a,b){var c=-1,d=a==null?0:a.length;while(++c<d)if(!b(a[c],c,a))return!1;return!0}function nc(a,b){var c=-1,d=a==null?0:a.length,e=0,f=[];while(++c<d){var g=a[c];b(g,c,a)&&(f[e++]=g)}return f}function oc(a,b){var c=a==null?0:a.length;return!!c&&zc(a,b,0)>-1}function pc(a,b,c){var d=-1,e=a==null?0:a.length;while(++d<e)if(c(b,a[d]))return!0;return!1}function O(a,b){var c=-1,d=a==null?0:a.length,e=Array(d);while(++c<d)e[c]=b(a[c],c,a);return e}function qc(a,b){var c=-1,d=b.length,e=a.length;while(++c<d)a[e+c]=b[c];return a}function rc(a,b,c,d){var e=-1,f=a==null?0:a.length;d&&f&&(c=a[++e]);while(++e<f)c=b(c,a[e],e,a);return c}function sc(a,b,c,d){var e=a==null?0:a.length;d&&e&&(c=a[--e]);while(e--)c=b(c,a[e],e,a);return c}function tc(a,b){var c=-1,d=a==null?0:a.length;while(++c<d)if(b(a[c],c,a))return!0;return!1}var uc=Dc("length");function vc(a){return a.split("")}function wc(a){return a.match(lb)||[]}function xc(a,b,c){var d;c(a,function(c,e,a){if(b(c,e,a)){d=e;return!1}});return d}function yc(a,b,c,d){var e=a.length;c=c+(d?1:-1);while(d?c--:++c<e)if(b(a[c],c,a))return c;return-1}function zc(a,b,c){return b===b?bd(a,b,c):yc(a,Bc,c)}function Ac(a,b,c,d){c=c-1;var e=a.length;while(++c<e)if(d(a[c],b))return c;return-1}function Bc(a){return a!==a}function Cc(a,b){var c=a==null?0:a.length;return c?Hc(a,b)/c:ia}function Dc(a){return function(b){return b==null?void 0:b[a]}}function Ec(a){return function(b){return a==null?void 0:a[b]}}function Fc(a,b,c,d,e){e(a,function(e,f,a){c=d?(d=!1,e):b(c,e,f,a)});return c}function Gc(a,b){var c=a.length;a.sort(b);while(c--)a[c]=a[c].value;return a}function Hc(a,b){var c,d=-1,e=a.length;while(++d<e){var f=b(a[d]);f!==void 0&&(c=c===void 0?f:c+f)}return c}function Ic(a,b){var c=-1,d=Array(a);while(++c<a)d[c]=b(c);return d}function Jc(a,b){return O(b,function(b){return[b,a[b]]})}function Kc(a){return function(b){return a(b)}}function Lc(a,b){return O(b,function(b){return a[b]})}function Mc(a,b){return a.has(b)}function Nc(a,b){var c=-1,d=a.length;while(++c<d&&zc(b,a[c],0)>-1);return c}function Oc(a,b){var c=a.length;while(c--&&zc(b,a[c],0)>-1);return c}function Pc(a,b){var c=a.length,d=0;while(c--)a[c]===b&&++d;return d}var Qc=Ec(Fb),Rc=Ec(Hb);function Sc(a){return"\\"+Zb[a]}function Tc(a,b){return a==null?void 0:a[b]}function Uc(a){return Vb.test(a)}function Vc(a){return Wb.test(a)}function Wc(a){var b,c=[];while(!(b=a.next()).done)c.push(b.value);return c}function Xc(a){var b=-1,c=Array(a.size);a.forEach(function(a,d){c[++b]=[d,a]});return c}function Yc(a,b){return function(c){return a(b(c))}}function Zc(a,b){var c=-1,d=a.length,e=0,f=[];while(++c<d){var g=a[c];(g===b||g===l)&&(a[c]=l,f[e++]=c)}return f}function $c(a){var b=-1,c=Array(a.size);a.forEach(function(a){c[++b]=a});return c}function ad(a){var b=-1,c=Array(a.size);a.forEach(function(a){c[++b]=[a,a]});return c}function bd(a,b,c){c=c-1;var d=a.length;while(++c<d)if(a[c]===b)return c;return-1}function cd(a,b,c){c=c+1;while(c--)if(a[c]===b)return c;return c}function dd(a){return Uc(a)?gd(a):uc(a)}function ed(a){return Uc(a)?hd(a):vc(a)}var fd=Ec(Ib);function gd(a){var b=Tb.lastIndex=0;while(Tb.test(a))++b;return b}function hd(a){return a.match(Tb)||[]}function id(a){return a.match(Ub)||[]}Ob=function a(b){b=b==null?N:jd.defaults(N.Object(),b,jd.pick(N,Xb));var g=b.Array,h=b.Date,i=b.Error,lb=b.Function,xb=b.Math,G=b.Object,H=b.RegExp,yb=b.String,I=b.TypeError,zb=g.prototype,Ab=lb.prototype,Bb=G.prototype,Cb=b["__core-js_shared__"],Db=Ab.toString,J=Bb.hasOwnProperty,Eb=0,Fb=function(){var a=/[^.]+$/.exec(Cb&&Cb.keys&&Cb.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Gb=Bb.toString,Hb=Db.call(G),Ib=N._,Jb=H("^"+Db.call(J).replace(db,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");Ab=bc?b.Buffer:void 0;var K=b.Symbol,Kb=b.Uint8Array,Lb=Ab?Ab.allocUnsafe:void 0,Mb=Yc(G.getPrototypeOf,G),Nb=G.create,Ob=Bb.propertyIsEnumerable,Pb=zb.splice,Qb=K?K.isConcatSpreadable:void 0,Tb=K?K.iterator:void 0,Ub=K?K.toStringTag:void 0,Vb=function(){try{var a=Yg(G,"defineProperty");a({},"",{});return a}catch(a){}}(),Wb=b.clearTimeout!==N.clearTimeout&&b.clearTimeout,Zb=h&&h.now!==N.Date.now&&h.now,uc=b.setTimeout!==N.setTimeout&&b.setTimeout,vc=xb.ceil,Ec=xb.floor,bd=G.getOwnPropertySymbols;Ab=Ab?Ab.isBuffer:void 0;var gd=b.isFinite,hd=zb.join,kd=Yc(G.keys,G),P=xb.max,ld=xb.min,md=h.now,nd=b.parseInt,od=xb.random,pd=zb.reverse;h=Yg(b,"DataView");var qd=Yg(b,"Map"),rd=Yg(b,"Promise"),sd=Yg(b,"Set");b=Yg(b,"WeakMap");var td=Yg(G,"create"),ud=b&&new b,vd={},wd=Kh(h),xd=Kh(qd),yd=Kh(rd),zd=Kh(sd),Ad=Kh(b);K=K?K.prototype:void 0;var Bd=K?K.valueOf:void 0,Cd=K?K.toString:void 0;function Q(a){if(X(a)&&!U(a)&&!(a instanceof R)){if(a instanceof Fd)return a;if(J.call(a,"__wrapped__"))return Mh(a)}return new Fd(a)}var Dd=function(){function a(){}return function(b){if(!W(b))return{};if(Nb)return Nb(b);a.prototype=b;b=new a;a.prototype=void 0;return b}}();function Ed(){}function Fd(a,b){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=void 0}Q.templateSettings={escape:Ya,evaluate:Za,interpolate:$a,variable:"",imports:{_:Q}};Q.prototype=Ed.prototype;Q.prototype.constructor=Q;Fd.prototype=Dd(Ed.prototype);Fd.prototype.constructor=Fd;function R(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=D,this.__views__=[]}function Gd(){var a=new R(this.__wrapped__);a.__actions__=ig(this.__actions__);a.__dir__=this.__dir__;a.__filtered__=this.__filtered__;a.__iteratees__=ig(this.__iteratees__);a.__takeCount__=this.__takeCount__;a.__views__=ig(this.__views__);return a}function Hd(){if(this.__filtered__){var a=new R(this);a.__dir__=-1;a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function Id(){var b=this.__wrapped__.value(),c=this.__dir__,d=U(b),e=c<0,f=d?b.length:0,g=ch(0,f,this.__views__),h=g.start;g=g.end;var i=g-h;g=e?g:h-1;h=this.__iteratees__;var j=h.length,k=0,l=ld(i,this.__takeCount__);if(!d||!e&&f==i&&l==i)return Rf(b,this.__actions__);d=[];outer:while(i--&&k<l){g+=c;e=-1;f=b[g];while(++e<j){var m=h[e],a=m.iteratee;m=m.type;a=a(f);if(m==ea)f=a;else if(!a)if(m==da)continue outer;else break outer}d[k++]=f}return d}R.prototype=Dd(Ed.prototype);R.prototype.constructor=R;function Jd(a){var b=-1,c=a==null?0:a.length;this.clear();while(++b<c){var d=a[b];this.set(d[0],d[1])}}function Kd(){this.__data__=td?td(null):{},this.size=0}function Ld(a){a=this.has(a)&&delete this.__data__[a];this.size-=a?1:0;return a}function Md(b){var c=this.__data__;if(td){var a=c[b];return a===j?void 0:a}return J.call(c,b)?c[b]:void 0}function Nd(a){var b=this.__data__;return td?b[a]!==void 0:J.call(b,a)}function Od(a,b){var c=this.__data__;this.size+=this.has(a)?0:1;c[a]=td&&b===void 0?j:b;return this}Jd.prototype.clear=Kd;Jd.prototype["delete"]=Ld;Jd.prototype.get=Md;Jd.prototype.has=Nd;Jd.prototype.set=Od;function Pd(a){var b=-1,c=a==null?0:a.length;this.clear();while(++b<c){var d=a[b];this.set(d[0],d[1])}}function Qd(){this.__data__=[],this.size=0}function Rd(a){var b=this.__data__;a=pe(b,a);if(a<0)return!1;var c=b.length-1;a==c?b.pop():Pb.call(b,a,1);--this.size;return!0}function Sd(a){var b=this.__data__;a=pe(b,a);return a<0?void 0:b[a][1]}function Td(a){return pe(this.__data__,a)>-1}function Ud(a,b){var c=this.__data__,d=pe(c,a);d<0?(++this.size,c.push([a,b])):c[d][1]=b;return this}Pd.prototype.clear=Qd;Pd.prototype["delete"]=Rd;Pd.prototype.get=Sd;Pd.prototype.has=Td;Pd.prototype.set=Ud;function Vd(a){var b=-1,c=a==null?0:a.length;this.clear();while(++b<c){var d=a[b];this.set(d[0],d[1])}}function Wd(){this.size=0,this.__data__={hash:new Jd,map:new(qd||Pd),string:new Jd}}function Xd(a){a=Wg(this,a)["delete"](a);this.size-=a?1:0;return a}function Yd(a){return Wg(this,a).get(a)}function Zd(a){return Wg(this,a).has(a)}function $d(b,c){var d=Wg(this,b),a=d.size;d.set(b,c);this.size+=d.size==a?0:1;return this}Vd.prototype.clear=Wd;Vd.prototype["delete"]=Xd;Vd.prototype.get=Yd;Vd.prototype.has=Zd;Vd.prototype.set=$d;function ae(a){var b=-1,c=a==null?0:a.length;this.__data__=new Vd;while(++b<c)this.add(a[b])}function be(a){this.__data__.set(a,j);return this}function ce(a){return this.__data__.has(a)}ae.prototype.add=ae.prototype.push=be;ae.prototype.has=ce;function de(a){a=this.__data__=new Pd(a);this.size=a.size}function ee(){this.__data__=new Pd,this.size=0}function fe(a){var b=this.__data__;a=b["delete"](a);this.size=b.size;return a}function ge(a){return this.__data__.get(a)}function he(a){return this.__data__.has(a)}function ie(a,b){var c=this.__data__;if(c instanceof Pd){var e=c.__data__;if(!qd||e.length<d-1){e.push([a,b]);this.size=++c.size;return this}c=this.__data__=new Vd(e)}c.set(a,b);this.size=c.size;return this}de.prototype.clear=ee;de.prototype["delete"]=fe;de.prototype.get=ge;de.prototype.has=he;de.prototype.set=ie;function je(a,b){var c=U(a),d=!c&&Jj(a),e=!c&&!d&&Mj(a),f=!c&&!d&&!e&&jk(a);c=c||d||e||f;d=c?Ic(a.length,yb):[];var g=d.length;for(var h in a)(b||J.call(a,h))&&!(c&&(h=="length"||e&&(h=="offset"||h=="parent")||f&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||kh(h,g)))&&d.push(h);return d}function ke(a){var b=a.length;return b?a[yf(0,b-1)]:void 0}function le(a,b){return Hh(ig(a),ve(b,0,a.length))}function me(a){return Hh(ig(a))}function ne(a,b,c){(c!==void 0&&!Ij(a[b],c)||c===void 0&&!(b in a))&&te(a,b,c)}function oe(a,b,c){var d=a[b];(!(J.call(a,b)&&Ij(d,c))||c===void 0&&!(b in a))&&te(a,b,c)}function pe(a,b){var c=a.length;while(c--)if(Ij(a[c][0],b))return c;return-1}function qe(b,c,a,d){Be(b,function(e,f,b){c(d,e,a(e),b)});return d}function re(a,b){return a&&jg(b,$(b),a)}function se(a,b){return a&&jg(b,Gk(b),a)}function te(a,b,c){b=="__proto__"&&Vb?Vb(a,b,{configurable:!0,enumerable:!0,value:c,writable:!0}):a[b]=c}function ue(b,c){var d=-1,e=c.length,a=g(e),f=b==null;while(++d<e)a[d]=f?void 0:Dk(b,c[d]);return a}function ve(a,b,c){a===a&&(c!==void 0&&(a=a<=c?a:c),b!==void 0&&(a=a>=b?a:b));return a}function we(b,c,d,e,f,g){var a,h=c&m,i=c&n,j=c&o;d&&(a=f?d(b,e,f,g):d(b));if(a!==void 0)return a;if(!W(b))return b;e=U(b);if(e){a=fh(b);if(!h)return ig(b,a)}else{var k=bh(b),l=k==ta||k==ua;if(Mj(b))return Zf(b,h);if(k==xa||k==ma||l&&!f){a=i||l?{}:gh(b);if(!h)return i?lg(b,se(a,b)):kg(b,re(a,b))}else{if(!M[k])return f?b:{};a=hh(b,k,h)}}g||(g=new de);l=g.get(b);if(l)return l;g.set(b,a);gk(b)?b.forEach(function(e){a.add(we(e,c,d,e,b,g))}):Wj(b)&&b.forEach(function(f,e){a.set(e,we(f,c,d,e,b,g))});f=j?i?Sg:Rg:i?Gk:$;var p=e?void 0:f(b);kc(p||b,function(f,e){p&&(e=f,f=b[e]),oe(a,e,we(f,c,d,e,b,g))});return a}function xe(a){var b=$(a);return function(c){return ye(c,a,b)}}function ye(a,b,c){var d=c.length;if(a==null)return!d;a=G(a);while(d--){var e=c[d],f=b[e],g=a[e];if(g===void 0&&!(e in a)||!f(g))return!1}return!0}function ze(a,b,c){if(typeof a!="function")throw new I(f);return Dh(function(){a.apply(void 0,c)},b)}function Ae(f,c,e,g){var h=-1,a=oc,i=!0,j=f.length,b=[],k=c.length;if(!j)return b;e&&(c=O(c,Kc(e)));g?(a=pc,i=!1):c.length>=d&&(a=Mc,i=!1,c=new ae(c));outer:while(++h<j){var l=f[h],m=e==null?l:e(l);l=g||l!==0?l:0;if(i&&m===m){var n=k;while(n--)if(c[n]===m)continue outer;b.push(l)}else a(c,m,g)||b.push(l)}return b}var Be=og(Ke),Ce=og(Le,!0);function De(b,c){var a=!0;Be(b,function(d,e,b){a=!!c(d,e,b);return a});return a}function Ee(c,b,d){var e=-1,f=c.length;while(++e<f){var g=c[e],h=b(g);if(h!=null&&(i===void 0?h===h&&!ik(h):d(h,i)))var i=h,a=g}return a}function Fe(a,b,c,d){var e=a.length;c=Y(c);c<0&&(c=-c>e?0:e+c);d=d===void 0||d>e?e:Y(d);d<0&&(d+=e);d=c>d?0:pk(d);while(c<d)a[c++]=b;return a}function Ge(b,c){var a=[];Be(b,function(d,e,b){c(d,e,b)&&a.push(d)});return a}function He(b,c,d,e,a){var f=-1,g=b.length;d||(d=jh);a||(a=[]);while(++f<g){var h=b[f];c>0&&d(h)?c>1?He(h,c-1,d,e,a):qc(a,h):e||(a[a.length]=h)}return a}var Ie=pg(),Je=pg(!0);function Ke(b,a){return b&&Ie(b,a,$)}function Le(b,a){return b&&Je(b,a,$)}function Me(a,b){return nc(b,function(b){return Tj(a[b])})}function Ne(a,b){b=Wf(b,a);var c=0,d=b.length;while(a!=null&&c<d)a=a[Jh(b[c++])];return c&&c==d?a:void 0}function Oe(a,b,c){b=b(a);return U(a)?b:qc(b,c(a))}function Pe(a){return a==null?a===void 0?Da:wa:Ub&&Ub in G(a)?Zg(a):xh(a)}function Qe(a,b){return a>b}function Re(a,b){return a!=null&&J.call(a,b)}function Se(a,b){return a!=null&&b in G(a)}function Te(a,b,c){return a>=ld(b,c)&&a<P(b,c)}function Ue(d,c,e){var a=e?pc:oc,f=d[0].length,h=d.length,i=h,j=g(h),k=Infinity,b=[];while(i--){var l=d[i];i&&c&&(l=O(l,Kc(c)));k=ld(l.length,k);j[i]=!e&&(c||f>=120&&l.length>=120)?new ae(i&&l):void 0}l=d[0];var m=-1,n=j[0];outer:while(++m<f&&b.length<k){var o=l[m],p=c?c(o):o;o=e||o!==0?o:0;if(!(n?Mc(n,p):a(b,p,e))){i=h;while(--i){var q=j[i];if(!(q?Mc(q,p):a(d[i],p,e)))continue outer}n&&n.push(p);b.push(o)}}return b}function Ve(b,c,a,d){Ke(b,function(e,f,b){c(d,a(e),f,b)});return d}function We(a,b,c){b=Wf(b,a);a=zh(a,b);b=a==null?a:a[Jh(ei(b))];return b==null?void 0:ic(b,a,c)}function Xe(a){return X(a)&&Pe(a)==ma}function Ye(a){return X(a)&&Pe(a)==Ga}function Ze(a){return X(a)&&Pe(a)==qa}function $e(a,b,c,d,e){if(a===b)return!0;return a==null||b==null||!X(a)&&!X(b)?a!==a&&b!==b:af(a,b,c,d,$e,e)}function af(a,b,c,d,e,f){var g=U(a),h=U(b),i=g?na:bh(a);h=h?na:bh(b);i=i==ma?xa:i;h=h==ma?xa:h;var j=i==xa,k=h==xa;h=i==h;if(h&&Mj(a)){if(!Mj(b))return!1;g=!0;j=!1}if(h&&!j){f||(f=new de);return g||jk(a)?Ng(a,b,c,d,e,f):Og(a,b,i,c,d,e,f)}if(!(c&p)){g=j&&J.call(a,"__wrapped__");i=k&&J.call(b,"__wrapped__");if(g||i){j=g?a.value():a;k=i?b.value():b;f||(f=new de);return e(j,k,c,d,f)}}if(!h)return!1;f||(f=new de);return Pg(a,b,c,d,e,f)}function bf(a){return X(a)&&bh(a)==E}function cf(b,c,d,e){var f=d.length,g=f,h=!e;if(b==null)return!g;b=G(b);while(f--){var i=d[f];if(h&&i[2]?i[1]!==b[i[0]]:!(i[0]in b))return!1}while(++f<g){i=d[f];var j=i[0],k=b[j],l=i[1];if(h&&i[2]){if(k===void 0&&!(j in b))return!1}else{i=new de;if(e)var a=e(k,l,j,b,c,i);if(!(a===void 0?$e(l,k,p|q,e,i):a))return!1}}return!0}function df(a){if(!W(a)||ph(a))return!1;var b=Tj(a)?Jb:rb;return b.test(Kh(a))}function ef(a){return X(a)&&Pe(a)==za}function ff(a){return X(a)&&bh(a)==Aa}function gf(a){return X(a)&&Vj(a.length)&&!!L[Pe(a)]}function hf(a){if(typeof a=="function")return a;if(a==null)return Jl;return typeof a=="object"?U(a)?of(a[0],a[1]):nf(a):Vl(a)}function jf(b){if(!rh(b))return kd(b);var a=[];for(var c in G(b))J.call(b,c)&&c!="constructor"&&a.push(c);return a}function kf(b){if(!W(b))return wh(b);var c=rh(b),a=[];for(var d in b)d=="constructor"&&(c||!J.call(b,d))||a.push(d);return a}function lf(a,b){return a<b}function mf(c,b){var d=-1,a=Kj(c)?g(c.length):[];Be(c,function(e,f,c){a[++d]=b(e,f,c)});return a}function nf(a){var b=Xg(a);return b.length==1&&b[0][2]?th(b[0][0],b[0][1]):function(c){return c===a||cf(c,a,b)}}function of(a,b){return mh(a)&&sh(b)?th(Jh(a),b):function(c){var d=Dk(c,a);return d===void 0&&d===b?Fk(c,a):$e(b,d,p|q)}}function pf(a,b,c,d,e){if(a===b)return;Ie(b,function(f,g){e||(e=new de);if(W(f))qf(a,b,g,c,pf,d,e);else{var h=d?d(Bh(a,g),f,g+"",a,b,e):void 0;h===void 0&&(h=f);ne(a,g,h)}},Gk)}function qf(a,b,c,d,e,f,g){var h=Bh(a,c),i=Bh(b,c),j=g.get(i);if(j){ne(a,c,j);return}j=f?f(h,i,c+"",a,b,g):void 0;b=j===void 0;if(b){var k=U(i),l=!k&&Mj(i),m=!k&&!l&&jk(i);j=i;k||l||m?U(h)?j=h:V(h)?j=ig(h):l?(b=!1,j=Zf(i,!0)):m?(b=!1,j=dg(i,!0)):j=[]:dk(i)||Jj(i)?(j=h,Jj(h)?j=rk(h):(!W(h)||Tj(h))&&(j=gh(i))):b=!1}b&&(g.set(i,j),e(j,i,d,f,g),g["delete"](i));ne(a,c,j)}function rf(a,b){var c=a.length;if(!c)return;b+=b<0?c:0;return kh(b,c)?a[b]:void 0}function sf(a,b,c){var d=-1;b=O(b.length?b:[Jl],Kc(T()));a=mf(a,function(c,e,a){e=O(b,function(a){return a(c)});return{criteria:e,index:++d,value:c}});return Gc(a,function(a,b){return fg(a,b,c)})}function tf(a,b){return uf(a,b,function(b,c){return Fk(a,c)})}function uf(b,c,d){var e=-1,f=c.length,a={};while(++e<f){var g=c[e],h=Ne(b,g);d(h,g)&&Df(a,Wf(g,b),h)}return a}function vf(a){return function(b){return Ne(b,a)}}function wf(d,b,c,e){var a=e?Ac:zc,f=-1,g=b.length,h=d;d===b&&(b=ig(b));c&&(h=O(d,Kc(c)));while(++f<g){var i=0,j=b[f];j=c?c(j):j;while((i=a(h,j,i,e))>-1)h!==d&&Pb.call(h,i,1),Pb.call(d,i,1)}return d}function xf(a,b){var c=a?b.length:0,d=c-1;while(c--){var e=b[c];if(c==d||e!==f){var f=e;kh(e)?Pb.call(a,e,1):Of(a,e)}}return a}function yf(a,b){return a+Ec(od()*(b-a+1))}function zf(b,c,d,e){var f=-1;c=P(vc((c-b)/(d||1)),0);var a=g(c);while(c--)a[e?c:++f]=b,b+=d;return a}function Af(b,c){var a="";if(!b||c<1||c>ga)return a;do c%2&&(a+=b),c=Ec(c/2),c&&(b+=b);while(c);return a}function S(a,b){return Eh(yh(a,b,Jl),a+"")}function Bf(a){return ke(Wk(a))}function Cf(a,b){a=Wk(a);return Hh(a,ve(b,0,a.length))}function Df(a,b,c,d){if(!W(a))return a;b=Wf(b,a);var e=-1,f=b.length,g=f-1,h=a;while(h!=null&&++e<f){var i=Jh(b[e]),j=c;if(e!=g){var k=h[i];j=d?d(k,i,h):void 0;j===void 0&&(j=W(k)?k:kh(b[e+1])?[]:{})}oe(h,i,j);h=h[i]}return a}var Ef=ud?function(a,b){ud.set(a,b);return a}:Jl;K=Vb?function(a,b){return Vb(a,"toString",{configurable:!0,enumerable:!1,value:Gl(b),writable:!0})}:Jl;function Ff(a){return Hh(Wk(a))}function Gf(a,b,c){var d=-1,e=a.length;b<0&&(b=-b>e?0:e+b);c=c>e?e:c;c<0&&(c+=e);e=b>c?0:c-b>>>0;b>>>=0;c=g(e);while(++d<e)c[d]=a[d+b];return c}function Hf(b,c){var a;Be(b,function(d,e,b){a=c(d,e,b);return!a});return!!a}function If(a,b,c){var d=0,e=a==null?d:a.length;if(typeof b=="number"&&b===b&&e<=ka){while(d<e){var f=d+e>>>1,g=a[f];g!==null&&!ik(g)&&(c?g<=b:g<b)?d=f+1:e=f}return e}return Jf(a,b,Jl,c)}function Jf(b,c,a,d){c=a(c);var e=0,f=b==null?0:b.length,g=c!==c,h=c===null,i=ik(c),j=c===void 0;while(e<f){var k=Ec((e+f)/2),l=a(b[k]),m=l!==void 0,n=l===null,o=l===l,p=ik(l);if(g)var q=d||o;else j?q=o&&(d||m):h?q=o&&m&&(d||!n):i?q=o&&m&&!n&&(d||!p):n||p?q=!1:q=d?l<=c:l<c;q?e=k+1:f=k}return ld(f,ja)}function Kf(c,b){var d=-1,e=c.length,f=0,a=[];while(++d<e){var g=c[d],h=b?b(g):g;if(!d||!Ij(h,i)){var i=h;a[f++]=g===0?0:g}}return a}function Lf(a){if(typeof a=="number")return a;return ik(a)?ia:+a}function Mf(b){if(typeof b=="string")return b;if(U(b))return O(b,Mf)+"";if(ik(b))return Cd?Cd.call(b):"";var a=b+"";return a=="0"&&1/b==-fa?"-0":a}function Nf(f,e,g){var h=-1,a=oc,i=f.length,j=!0,b=[],k=b;if(g)j=!1,a=pc;else if(i>=d){var c=e?null:Hg(f);if(c)return $c(c);j=!1;a=Mc;k=new ae}else k=e?[]:b;outer:while(++h<i){c=f[h];var l=e?e(c):c;c=g||c!==0?c:0;if(j&&l===l){var m=k.length;while(m--)if(k[m]===l)continue outer;e&&k.push(l);b.push(c)}else a(k,l,g)||(k!==b&&k.push(l),b.push(c))}return b}function Of(a,b){b=Wf(b,a);a=zh(a,b);return a==null||delete a[Jh(ei(b))]}function Pf(a,b,c,d){return Df(a,b,c(Ne(a,b)),d)}function Qf(a,b,c,d){var e=a.length,f=d?e:-1;while((d?f--:++f<e)&&b(a[f],f,a));return c?Gf(a,d?0:f,d?f+1:e):Gf(a,d?f+1:0,d?e:f)}function Rf(a,b){a=a;a instanceof R&&(a=a.value());return rc(b,function(a,b){return b.func.apply(b.thisArg,qc([a],b.args))},a)}function Sf(c,b,d){var e=c.length;if(e<2)return e?Nf(c[0]):[];var f=-1,a=g(e);while(++f<e){var h=c[f],i=-1;while(++i<e)i!=f&&(a[f]=Ae(a[f]||h,c[i],b,d))}return Nf(He(a,1),b,d)}function Tf(c,b,d){var e=-1,f=c.length,g=b.length,a={};while(++e<f){var h=e<g?b[e]:void 0;d(a,c[e],h)}return a}function Uf(a){return V(a)?a:[]}function Vf(a){return typeof a=="function"?a:Jl}function Wf(a,b){return U(a)?a:mh(a,b)?[a]:Ih(Z(a))}Kd=S;function Xf(a,b,c){var d=a.length;c=c===void 0?d:c;return!b&&c>=d?a:Gf(a,b,c)}var Yf=Wb||function(a){return N.clearTimeout(a)};function Zf(a,b){if(b)return a.slice();b=a.length;b=Lb?Lb(b):new a.constructor(b);a.copy(b);return b}function $f(b){var a=new b.constructor(b.byteLength);new Kb(a).set(new Kb(b));return a}function ag(a,b){b=b?$f(a.buffer):a.buffer;return new a.constructor(b,a.byteOffset,a.byteLength)}function bg(b){var a=new b.constructor(b.source,ob.exec(b));a.lastIndex=b.lastIndex;return a}function cg(a){return Bd?G(Bd.call(a)):{}}function dg(a,b){b=b?$f(a.buffer):a.buffer;return new a.constructor(b,a.byteOffset,a.length)}function eg(a,b){if(a!==b){var c=a!==void 0,d=a===null,e=a===a,f=ik(a),g=b!==void 0,h=b===null,i=b===b,j=ik(b);if(!h&&!j&&!f&&a>b||f&&g&&i&&!h&&!j||d&&g&&i||!c&&i||!e)return 1;if(!d&&!f&&!j&&a<b||j&&c&&e&&!d&&!f||h&&c&&e||!g&&e||!i)return-1}return 0}function fg(b,c,d){var e=-1,f=b.criteria,g=c.criteria,h=f.length,i=d.length;while(++e<h){var a=eg(f[e],g[e]);if(a){if(e>=i)return a;var j=d[e];return a*(j=="desc"?-1:1)}}return b.index-c.index}function gg(b,c,d,e){var f=-1,h=b.length,i=d.length,j=-1,k=c.length,l=P(h-i,0),a=g(k+l);e=!e;while(++j<k)a[j]=c[j];while(++f<i)(e||f<h)&&(a[d[f]]=b[f]);while(l--)a[j++]=b[f++];return a}function hg(b,c,d,e){var f=-1,h=b.length,i=-1,j=d.length,k=-1,l=c.length,m=P(h-j,0),a=g(m+l);e=!e;while(++f<m)a[f]=b[f];m=f;while(++k<l)a[m+k]=c[k];while(++i<j)(e||f<h)&&(a[m+d[i]]=b[f++]);return a}function ig(a,b){var c=-1,d=a.length;b||(b=g(d));while(++c<d)b[c]=a[c];return b}function jg(a,b,c,d){var e=!c;c||(c={});var f=-1,g=b.length;while(++f<g){var h=b[f],i=d?d(c[h],a[h],h,c,a):void 0;i===void 0&&(i=a[h]);e?te(c,h,i):oe(c,h,i)}return c}function kg(a,b){return jg(a,$g(a),b)}function lg(a,b){return jg(a,ah(a),b)}function mg(a,b){return function(d,c){var e=U(d)?jc:qe,f=b?b():{};return e(d,a,T(c,2),f)}}function ng(a){return S(function(b,c){var d=-1,e=c.length,f=e>1?c[e-1]:void 0,g=e>2?c[2]:void 0;f=a.length>3&&typeof f=="function"?(e--,f):void 0;g&&lh(c[0],c[1],g)&&(f=e<3?void 0:f,e=1);b=G(b);while(++d<e){g=c[d];g&&a(b,g,d,f)}return b})}function og(a,b){return function(d,c){if(d==null)return d;if(!Kj(d))return a(d,c);var e=d.length,f=b?e:-1,g=G(d);while(b?f--:++f<e)if(c(g[f],f,g)===!1)break;return d}}function pg(a){return function(c,b,d){var e=-1,f=G(c);d=d(c);var g=d.length;while(g--){var h=d[a?g:++e];if(b(f[h],h,f)===!1)break}return c}}function qg(a,b,c){var d=b&r,e=tg(a);function f(){var b=this&&this!==N&&this instanceof f?e:a;return b.apply(d?c:this,arguments)}return f}function rg(a){return function(b){b=Z(b);var c=Uc(b)?ed(b):void 0,d=c?c[0]:b.charAt(0);c=c?Xf(c,1).join(""):b.slice(1);return d[a]()+c}}function sg(a){return function(b){return rc(Cl(cl(b).replace(Rb,"")),a,"")}}function tg(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var d=Dd(a.prototype),b=a.apply(d,c);return W(b)?b:d}}function ug(a,b,c){var d=tg(a);function e(){var f=arguments.length,h=g(f),i=f,j=Vg(e);while(i--)h[i]=arguments[i];var k=f<3&&h[0]!==j&&h[f-1]!==j?[]:Zc(h,j);f-=k.length;if(f<c)return Fg(a,b,xg,e.placeholder,void 0,h,k,void 0,void 0,c-f);var l=this&&this!==N&&this instanceof e?d:a;return ic(l,this,h)}return e}function vg(a){return function(c,d,e){var f=G(c);if(!Kj(c)){var b=T(d,3);c=$(c);d=function(a){return b(f[a],a,f)}}d=a(c,d,e);return d>-1?f[b?c[d]:d]:void 0}}function wg(a){return Qg(function(b){var c=b.length,d=c,e=Fd.prototype.thru;a&&b.reverse();while(d--){var g=b[d];if(typeof g!="function")throw new I(f);if(e&&!h&&Ug(g)=="wrapper")var h=new Fd([],!0)}d=h?d:c;while(++d<c){g=b[d];e=Ug(g);var i=e=="wrapper"?Tg(g):void 0;i&&oh(i[0])&&i[1]==(y|u|w|z)&&!i[4].length&&i[9]==1?h=h[Ug(i[0])].apply(h,i[3]):h=g.length==1&&oh(g)?h[e]():h.thru(g)}return function(){var e=arguments,f=e[0];if(h&&e.length==1&&U(f))return h.plant(f).value();var d=0,a=c?b[d].apply(this,e):f;while(++d<c)a=b[d].call(this,a);return a}})}function xg(b,c,d,e,f,h,i,j,a,k){var l=c&y,m=c&r,n=c&s,o=c&(u|v),p=c&A,q=n?void 0:tg(b);function t(){var r=arguments.length,s=g(r),u=r;while(u--)s[u]=arguments[u];if(o)var v=Vg(t),w=Pc(s,v);e&&(s=gg(s,e,f,o));h&&(s=hg(s,h,i,o));r-=w;if(o&&r<k){var x=Zc(s,v);return Fg(b,c,xg,t.placeholder,d,s,x,j,a,k-r)}var y=m?d:this,z=n?y[b]:b;r=s.length;j?s=Ah(s,j):p&&r>1&&s.reverse();l&&a<r&&(s.length=a);this&&this!==N&&this instanceof t&&(z=q||tg(z));return z.apply(y,s)}return t}function yg(a,b){return function(d,c){return Ve(d,a,b(c),{})}}function zg(a,b){return function(d,e){var c;if(d===void 0&&e===void 0)return b;d!==void 0&&(c=d);if(e!==void 0){if(c===void 0)return e;typeof d=="string"||typeof e=="string"?(d=Mf(d),e=Mf(e)):(d=Lf(d),e=Lf(e));c=a(d,e)}return c}}function Ag(a){return Qg(function(b){b=O(b,Kc(T()));return S(function(c){var d=this;return a(b,function(a){return ic(a,d,c)})})})}function Bg(a,b){b=b===void 0?" ":Mf(b);var c=b.length;if(c<2)return c?Af(b,a):b;c=Af(b,vc(a/dd(b)));return Uc(b)?Xf(ed(c),0,a).join(""):c.slice(0,a)}function Cg(a,b,c,d){var e=b&r,f=tg(a);function h(){var b=-1,i=arguments.length,j=-1,k=d.length,l=g(k+i),m=this&&this!==N&&this instanceof h?f:a;while(++j<k)l[j]=d[j];while(i--)l[j++]=arguments[++b];return ic(m,e?c:this,l)}return h}function Dg(a){return function(b,c,d){d&&typeof d!="number"&&lh(b,c,d)&&(c=d=void 0);b=ok(b);c===void 0?(c=b,b=0):c=ok(c);d=d===void 0?b<c?1:-1:ok(d);return zf(b,c,d,a)}}function Eg(a){return function(b,c){typeof b=="string"&&typeof c=="string"||(b=qk(b),c=qk(c));return a(b,c)}}function Fg(b,c,d,e,f,g,h,i,a,j){var k=c&u,l=k?h:void 0;h=k?void 0:h;var m=k?g:void 0;g=k?void 0:g;c|=k?w:x;c&=~(k?x:w);c&t||(c&=~(r|s));k=[b,c,f,m,l,g,h,i,a,j];f=d.apply(void 0,k);oh(b)&&Ch(f,k);f.placeholder=e;return Fh(f,b,c)}function Gg(a){var b=xb[a];return function(a,c){a=qk(a);c=c==null?0:ld(Y(c),292);if(c&&gd(a)){var d=(Z(a)+"e").split("e"),e=b(d[0]+"e"+(+d[1]+c));d=(Z(e)+"e").split("e");return+(d[0]+"e"+(+d[1]-c))}return b(a)}}var Hg=sd&&1/$c(new sd([,-0]))[1]==fa?function(a){return new sd(a)}:Rl;function Ig(a){return function(b){var c=bh(b);if(c==E)return Xc(b);return c==Aa?ad(b):Jc(b,a(b))}}function Jg(b,c,d,e,g,h,a,i){var j=c&s;if(!j&&typeof b!="function")throw new I(f);var k=e?e.length:0;k||(c&=~(w|x),e=g=void 0);a=a===void 0?a:P(Y(a),0);i=i===void 0?i:Y(i);k-=g?g.length:0;if(c&x){var l=e,m=g;e=g=void 0}var n=j?void 0:Tg(b);h=[b,c,d,e,g,l,m,h,a,i];n&&vh(h,n);b=h[0];c=h[1];d=h[2];e=h[3];g=h[4];i=h[9]=h[9]===void 0?j?0:b.length:P(h[9]-k,0);!i&&c&(u|v)&&(c&=~(u|v));if(!c||c==r)var a=qg(b,c,d);else c==u||c==v?a=ug(b,c,i):(c==w||c==(r|w))&&!g.length?a=Cg(b,c,d,e):a=xg.apply(void 0,h);j=n?Ef:Ch;return Fh(j(a,h),b,c)}function Kg(a,b,c,d){return a===void 0||Ij(a,Bb[c])&&!J.call(d,c)?b:a}function Lg(a,b,c,d,e,f){W(a)&&W(b)&&(f.set(b,a),pf(a,b,void 0,Lg,f),f["delete"](b));return a}function Mg(a){return dk(a)?void 0:a}function Ng(b,c,d,e,f,g){var h=d&p,i=b.length,j=c.length;if(i!=j&&!(h&&j>i))return!1;j=g.get(b);if(j&&g.get(c))return j==c;j=-1;var a=!0,k=d&q?new ae:void 0;g.set(b,c);g.set(c,b);while(++j<i){var l=b[j],m=c[j];if(e)var n=h?e(m,l,j,c,b,g):e(l,m,j,b,c,g);if(n!==void 0){if(n)continue;a=!1;break}if(k){if(!tc(c,function(a,b){if(!Mc(k,b)&&(l===a||f(l,a,d,e,g)))return k.push(b)})){a=!1;break}}else if(!(l===m||f(l,m,d,e,g))){a=!1;break}}g["delete"](b);g["delete"](c);return a}function Og(a,b,c,d,e,f,g){switch(c){case Ha:if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)return!1;a=a.buffer;b=b.buffer;case Ga:return a.byteLength!=b.byteLength||!f(new Kb(a),new Kb(b))?!1:!0;case pa:case qa:case va:return Ij(+a,+b);case sa:return a.name==b.name&&a.message==b.message;case za:case Ba:return a==b+"";case E:var h=Xc;case Aa:c=d&p;h||(h=$c);if(a.size!=b.size&&!c)return!1;c=g.get(a);if(c)return c==b;d|=q;g.set(a,b);c=Ng(h(a),h(b),d,e,f,g);g["delete"](a);return c;case Ca:if(Bd)return Bd.call(a)==Bd.call(b)}return!1}function Pg(a,b,c,d,e,f){var g=c&p,h=Rg(a),i=h.length,j=Rg(b);j=j.length;if(i!=j&&!g)return!1;j=i;while(j--){var k=h[j];if(!(g?k in b:J.call(b,k)))return!1}var l=f.get(a);if(l&&f.get(b))return l==b;l=!0;f.set(a,b);f.set(b,a);var m=g;while(++j<i){k=h[j];var n=a[k],o=b[k];if(d)var q=g?d(o,n,k,b,a,f):d(n,o,k,a,b,f);if(!(q===void 0?n===o||e(n,o,c,d,f):q)){l=!1;break}m||(m=k=="constructor")}if(l&&!m){n=a.constructor;o=b.constructor;n!=o&&"constructor"in a&&"constructor"in b&&!(typeof n=="function"&&n instanceof n&&typeof o=="function"&&o instanceof o)&&(l=!1)}f["delete"](a);f["delete"](b);return l}function Qg(a){return Eh(yh(a,void 0,Xh),a+"")}function Rg(a){return Oe(a,$,$g)}function Sg(a){return Oe(a,Gk,ah)}var Tg=ud?function(a){return ud.get(a)}:Rl;function Ug(b){var a=b.name+"",c=vd[a],d=J.call(vd,a)?c.length:0;while(d--){var e=c[d],f=e.func;if(f==null||f==b)return e.name}return a}function Vg(a){a=J.call(Q,"placeholder")?Q:a;return a.placeholder}function T(){var a=Q.iteratee||Kl;a=a===Kl?hf:a;return arguments.length?a(arguments[0],arguments[1]):a}function Wg(a,b){a=a.__data__;return nh(b)?a[typeof b=="string"?"string":"hash"]:a.map}function Xg(b){var a=$(b),c=a.length;while(c--){var d=a[c],e=b[d];a[c]=[d,e,sh(e)]}return a}function Yg(a,b){a=Tc(a,b);return df(a)?a:void 0}function Zg(b){var c=J.call(b,Ub),d=b[Ub];try{b[Ub]=void 0;var e=!0}catch(a){}var a=Gb.call(b);e&&(c?b[Ub]=d:delete b[Ub]);return a}var $g=bd?function(a){if(a==null)return[];a=G(a);return nc(bd(a),function(b){return Ob.call(a,b)})}:Yl,ah=bd?function(b){var a=[];while(b)qc(a,$g(b)),b=Mb(b);return a}:Yl,bh=Pe;(h&&bh(new h(new ArrayBuffer(1)))!=Ha||qd&&bh(new qd)!=E||rd&&bh(rd.resolve())!=F||sd&&bh(new sd)!=Aa||b&&bh(new b)!=Ea)&&(bh=function(b){var a=Pe(b);b=a==xa?b.constructor:void 0;b=b?Kh(b):"";if(b)switch(b){case wd:return Ha;case xd:return E;case yd:return F;case zd:return Aa;case Ad:return Ea}return a});function ch(b,c,d){var e=-1,f=d.length;while(++e<f){var g=d[e],a=g.size;switch(g.type){case"drop":b+=a;break;case"dropRight":c-=a;break;case"take":c=ld(c,b+a);break;case"takeRight":b=P(b,c-a);break}}return{start:b,end:c}}function dh(a){a=a.match(jb);return a?a[1].split(kb):[]}function eh(b,c,d){c=Wf(c,b);var e=-1,f=c.length,a=!1;while(++e<f){var g=Jh(c[e]);if(!(a=b!=null&&d(b,g)))break;b=b[g]}if(a||++e!=f)return a;f=b==null?0:b.length;return!!f&&Vj(f)&&kh(g,f)&&(U(b)||Jj(b))}function fh(b){var c=b.length,a=new b.constructor(c);c&&typeof b[0]=="string"&&J.call(b,"index")&&(a.index=b.index,a.input=b.input);return a}function gh(a){return typeof a.constructor=="function"&&!rh(a)?Dd(Mb(a)):{}}function hh(a,b,c){var d=a.constructor;switch(b){case Ga:return $f(a);case pa:case qa:return new d(+a);case Ha:return ag(a,c);case Ia:case Ja:case Ka:case La:case Ma:case Na:case Oa:case Pa:case Qa:return dg(a,c);case E:return new d;case va:case Ba:return new d(a);case za:return bg(a);case Aa:return new d;case Ca:return cg(a)}}function ih(a,b){var c=b.length;if(!c)return a;var d=c-1;b[d]=(c>1?"& ":"")+b[d];b=b.join(c>2?", ":" ");return a.replace(ib,"{\n/* [wrapped with "+b+"] */\n")}function jh(a){return U(a)||Jj(a)||!!(Qb&&a&&a[Qb])}function kh(a,b){var c=typeof a;b=b==null?ga:b;return!!b&&(c=="number"||c!="symbol"&&tb.test(a))&&a>-1&&a%1==0&&a<b}function lh(a,b,c){if(!W(c))return!1;var d=typeof b;return(d=="number"?Kj(c)&&kh(b,c.length):d=="string"&&b in c)?Ij(c[b],a):!1}function mh(a,b){if(U(a))return!1;var c=typeof a;return c=="number"||c=="symbol"||c=="boolean"||a==null||ik(a)?!0:bb.test(a)||!ab.test(a)||b!=null&&a in G(b)}function nh(a){var b=typeof a;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?a!=="__proto__":a===null}function oh(a){var b=Ug(a),c=Q[b];if(typeof c!="function"||!(b in R.prototype))return!1;if(a===c)return!0;b=Tg(c);return!!b&&a===b[0]}function ph(a){return!!Fb&&Fb in a}var qh=Cb?Tj:Zl;function rh(a){var b=a&&a.constructor;b=typeof b=="function"&&b.prototype||Bb;return a===b}function sh(a){return a===a&&!W(a)}function th(a,b){return function(c){return c==null?!1:c[a]===b&&(b!==void 0||a in G(c))}}function uh(a){a=sj(a,function(a){b.size===k&&b.clear();return a});var b=a.cache;return a}function vh(a,b){var c=a[1],d=b[1],e=c|d,f=e<(r|s|y),g=d==y&&c==u||d==y&&c==z&&a[7].length<=b[8]||d==(y|z)&&b[7].length<=b[8]&&c==u;if(!(f||g))return a;d&r&&(a[2]=b[2],e|=c&r?0:t);f=b[3];if(f){g=a[3];a[3]=g?gg(g,f,b[4]):f;a[4]=g?Zc(a[3],l):b[4]}f=b[5];f&&(g=a[5],a[5]=g?hg(g,f,b[6]):f,a[6]=g?Zc(a[5],l):b[6]);f=b[7];f&&(a[7]=f);d&y&&(a[8]=a[8]==null?b[8]:ld(a[8],b[8]));a[9]==null&&(a[9]=b[9]);a[0]=b[0];a[1]=e;return a}function wh(b){var a=[];if(b!=null)for(b in G(b))a.push(b);return a}function xh(a){return Gb.call(a)}function yh(b,c,a){c=P(c===void 0?b.length-1:c,0);return function(){var d=arguments,e=-1,f=P(d.length-c,0),h=g(f);while(++e<f)h[e]=d[c+e];e=-1;var i=g(c+1);while(++e<c)i[e]=d[e];i[c]=a(h);return ic(b,this,i)}}function zh(a,b){return b.length<2?a:Ne(a,Gf(b,0,-1))}function Ah(a,b){var c=a.length,d=ld(b.length,c),e=ig(a);while(d--){var f=b[d];a[d]=kh(f,c)?e[f]:void 0}return a}function Bh(a,b){if(b==="constructor"&&typeof a[b]==="function")return;if(b=="__proto__")return;return a[b]}var Ch=Gh(Ef),Dh=uc||function(a,b){return N.setTimeout(a,b)},Eh=Gh(K);function Fh(a,b,c){b=b+"";return Eh(a,ih(b,Lh(dh(b),c)))}function Gh(a){var b=0,c=0;return function(){var d=md(),e=ca-(d-c);c=d;if(e>0){if(++b>=ba)return arguments[0]}else b=0;return a.apply(void 0,arguments)}}function Hh(b,a){var c=-1,d=b.length,e=d-1;a=a===void 0?d:a;while(++c<a){d=yf(c,e);var f=b[d];b[d]=b[c];b[c]=f}b.length=a;return b}var Ih=uh(function(b){var a=[];b.charCodeAt(0)===46&&a.push("");b.replace(cb,function(b,c,d,e){a.push(d?e.replace(mb,"$1"):c||b)});return a});function Jh(b){if(typeof b=="string"||ik(b))return b;var a=b+"";return a=="0"&&1/b==-fa?"-0":a}function Kh(a){if(a!=null){try{return Db.call(a)}catch(a){}try{return a+""}catch(a){}}return""}function Lh(a,b){kc(la,function(c){var d="_."+c[0];b&c[1]&&!oc(a,d)&&a.push(d)});return a.sort()}function Mh(b){if(b instanceof R)return b.clone();var a=new Fd(b.__wrapped__,b.__chain__);a.__actions__=ig(b.__actions__);a.__index__=b.__index__;a.__values__=b.__values__;return a}function Nh(c,a,d){(d?lh(c,a,d):a===void 0)?a=1:a=P(Y(a),0);d=c==null?0:c.length;if(!d||a<1)return[];var e=0,f=0,b=g(vc(d/a));while(e<d)b[f++]=Gf(c,e,e+=a);return b}function Oh(b){var c=-1,d=b==null?0:b.length,e=0,a=[];while(++c<d){var f=b[c];f&&(a[e++]=f)}return a}function Ph(){var a=arguments.length;if(!a)return[];var b=g(a-1),c=arguments[0],d=a;while(d--)b[d-1]=arguments[d];return qc(U(c)?ig(c):[c],He(b,1))}Ld=S(function(b,a){return V(b)?Ae(b,He(a,1,V,!0)):[]});Md=S(function(c,a){var b=ei(a);V(b)&&(b=void 0);return V(c)?Ae(c,He(a,1,V,!0),T(b,2)):[]});Nd=S(function(b,a){var c=ei(a);V(c)&&(c=void 0);return V(b)?Ae(b,He(a,1,V,!0),void 0,c):[]});function Qh(a,b,c){var d=a==null?0:a.length;if(!d)return[];b=c||b===void 0?1:Y(b);return Gf(a,b<0?0:b,d)}function Rh(a,b,c){var d=a==null?0:a.length;if(!d)return[];b=c||b===void 0?1:Y(b);b=d-b;return Gf(a,0,b<0?0:b)}function Sh(a,b){return a&&a.length?Qf(a,T(b,3),!0,!0):[]}function Th(a,b){return a&&a.length?Qf(a,T(b,3),!0):[]}function Uh(a,b,c,d){var e=a==null?0:a.length;if(!e)return[];c&&typeof c!="number"&&lh(a,b,c)&&(c=0,d=e);return Fe(a,b,c,d)}function Vh(a,b,c){var d=a==null?0:a.length;if(!d)return-1;c=c==null?0:Y(c);c<0&&(c=P(d+c,0));return yc(a,T(b,3),c)}function Wh(a,b,c){var d=a==null?0:a.length;if(!d)return-1;var e=d-1;c!==void 0&&(e=Y(c),e=c<0?P(d+e,0):ld(e,d-1));return yc(a,T(b,3),e,!0)}function Xh(a){var b=a==null?0:a.length;return b?He(a,1):[]}function Yh(a){var b=a==null?0:a.length;return b?He(a,fa):[]}function Zh(a,b){var c=a==null?0:a.length;if(!c)return[];b=b===void 0?1:Y(b);return He(a,b)}function $h(b){var c=-1,d=b==null?0:b.length,a={};while(++c<d){var e=b[c];a[e[0]]=e[1]}return a}function ai(a){return a&&a.length?a[0]:void 0}function bi(a,b,c){var d=a==null?0:a.length;if(!d)return-1;c=c==null?0:Y(c);c<0&&(c=P(d+c,0));return zc(a,b,c)}function ci(a){var b=a==null?0:a.length;return b?Gf(a,0,-1):[]}Od=S(function(a){var b=O(a,Uf);return b.length&&b[0]===a[0]?Ue(b):[]});Qd=S(function(b){var a=ei(b),c=O(b,Uf);a===ei(c)?a=void 0:c.pop();return c.length&&c[0]===b[0]?Ue(c,T(a,2)):[]});Rd=S(function(a){var b=ei(a),c=O(a,Uf);b=typeof b=="function"?b:void 0;b&&c.pop();return c.length&&c[0]===a[0]?Ue(c,void 0,b):[]});function di(a,b){return a==null?"":hd.call(a,b)}function ei(a){var b=a==null?0:a.length;return b?a[b-1]:void 0}function fi(a,b,c){var d=a==null?0:a.length;if(!d)return-1;var e=d;c!==void 0&&(e=Y(c),e=e<0?P(d+e,0):ld(e,d-1));return b===b?cd(a,b,e):yc(a,Bc,e,!0)}function gi(a,b){return a&&a.length?rf(a,Y(b)):void 0}Sd=S(hi);function hi(b,a){return b&&b.length&&a&&a.length?wf(b,a):b}function ii(c,a,b){return c&&c.length&&a&&a.length?wf(c,a,T(b,2)):c}function ji(b,a,c){return b&&b.length&&a&&a.length?wf(b,a,void 0,c):b}Td=Qg(function(b,c){var d=b==null?0:b.length,a=ue(b,c);xf(b,O(c,function(a){return kh(a,d)?+a:a}).sort(eg));return a});function ki(b,c){var a=[];if(!(b&&b.length))return a;var d=-1,e=[],f=b.length;c=T(c,3);while(++d<f){var g=b[d];c(g,d,b)&&(a.push(g),e.push(d))}xf(b,e);return a}function li(a){return a==null?a:pd.call(a)}function mi(a,b,c){var d=a==null?0:a.length;if(!d)return[];c&&typeof c!="number"&&lh(a,b,c)?(b=0,c=d):(b=b==null?0:Y(b),c=c===void 0?d:Y(c));return Gf(a,b,c)}function ni(a,b){return If(a,b)}function oi(b,c,a){return Jf(b,c,T(a,2))}function pi(a,b){var c=a==null?0:a.length;if(c){var d=If(a,b);if(d<c&&Ij(a[d],b))return d}return-1}function qi(a,b){return If(a,b,!0)}function ri(b,c,a){return Jf(b,c,T(a,2),!0)}function si(a,b){var c=a==null?0:a.length;if(c){c=If(a,b,!0)-1;if(Ij(a[c],b))return c}return-1}function ti(a){return a&&a.length?Kf(a):[]}function ui(b,a){return b&&b.length?Kf(b,T(a,2)):[]}function vi(a){var b=a==null?0:a.length;return b?Gf(a,1,b):[]}function wi(a,b,c){if(!(a&&a.length))return[];b=c||b===void 0?1:Y(b);return Gf(a,0,b<0?0:b)}function xi(a,b,c){var d=a==null?0:a.length;if(!d)return[];b=c||b===void 0?1:Y(b);b=d-b;return Gf(a,b<0?0:b,d)}function yi(a,b){return a&&a.length?Qf(a,T(b,3),!1,!0):[]}function zi(a,b){return a&&a.length?Qf(a,T(b,3)):[]}Ud=S(function(a){return Nf(He(a,1,V,!0))});Wd=S(function(b){var a=ei(b);V(a)&&(a=void 0);return Nf(He(b,1,V,!0),T(a,2))});Xd=S(function(a){var b=ei(a);b=typeof b=="function"?b:void 0;return Nf(He(a,1,V,!0),void 0,b)});function Ai(a){return a&&a.length?Nf(a):[]}function Bi(b,a){return b&&b.length?Nf(b,T(a,2)):[]}function Ci(a,b){b=typeof b=="function"?b:void 0;return a&&a.length?Nf(a,void 0,b):[]}function Di(a){if(!(a&&a.length))return[];var b=0;a=nc(a,function(a){if(V(a)){b=P(a.length,b);return!0}});return Ic(b,function(b){return O(a,Dc(b))})}function Ei(b,a){if(!(b&&b.length))return[];b=Di(b);return a==null?b:O(b,function(b){return ic(a,void 0,b)})}Yd=S(function(b,a){return V(b)?Ae(b,a):[]});Zd=S(function(a){return Sf(nc(a,V))});$d=S(function(b){var a=ei(b);V(a)&&(a=void 0);return Sf(nc(b,V),T(a,2))});be=S(function(a){var b=ei(a);b=typeof b=="function"?b:void 0;return Sf(nc(a,V),void 0,b)});ce=S(Di);function Fi(b,a){return Tf(b||[],a||[],oe)}function Gi(b,a){return Tf(b||[],a||[],Df)}ee=S(function(a){var b=a.length;b=b>1?a[b-1]:void 0;b=typeof b=="function"?(a.pop(),b):void 0;return Ei(a,b)});function Hi(a){a=Q(a);a.__chain__=!0;return a}function Ii(a,b){b(a);return a}function Ji(a,b){return b(a)}fe=Qg(function(a){var b=a.length,c=b?a[0]:0,d=this.__wrapped__,e=function(b){return ue(b,a)};if(b>1||this.__actions__.length||!(d instanceof R)||!kh(c))return this.thru(e);d=d.slice(c,+c+(b?1:0));d.__actions__.push({func:Ji,args:[e],thisArg:void 0});return new Fd(d,this.__chain__).thru(function(a){b&&!a.length&&a.push(void 0);return a})});function Ki(){return Hi(this)}function Li(){return new Fd(this.value(),this.__chain__)}function Mi(){this.__values__===void 0&&(this.__values__=nk(this.value()));var a=this.__index__>=this.__values__.length,b=a?void 0:this.__values__[this.__index__++];return{done:a,value:b}}function Ni(){return this}function Oi(d){var c,a=this;while(a instanceof Ed){var b=Mh(a);b.__index__=0;b.__values__=void 0;c?e.__wrapped__=b:c=b;var e=b;a=a.__wrapped__}e.__wrapped__=d;return c}function Pi(){var a=this.__wrapped__;if(a instanceof R){a=a;this.__actions__.length&&(a=new R(this));a=a.reverse();a.__actions__.push({func:Ji,args:[li],thisArg:void 0});return new Fd(a,this.__chain__)}return this.thru(li)}function Qi(){return Rf(this.__wrapped__,this.__actions__)}ge=mg(function(a,b,c){J.call(a,c)?++a[c]:te(a,c,1)});function Ri(a,b,c){var d=U(a)?mc:De;c&&lh(a,b,c)&&(b=void 0);return d(a,T(b,3))}function Si(a,b){var c=U(a)?nc:Ge;return c(a,T(b,3))}he=vg(Vh);ie=vg(Wh);function Ti(b,a){return He(Zi(b,a),1)}function Ui(b,a){return He(Zi(b,a),fa)}function Vi(b,a,c){c=c===void 0?1:Y(c);return He(Zi(b,a),c)}function Wi(b,a){var c=U(b)?kc:Be;return c(b,T(a,3))}function Xi(b,a){var c=U(b)?lc:Ce;return c(b,T(a,3))}og=mg(function(a,b,c){J.call(a,c)?a[c].push(b):te(a,c,[b])});function Yi(a,b,c,d){a=Kj(a)?a:Wk(a);c=c&&!d?Y(c):0;d=a.length;c<0&&(c=P(d+c,0));return hk(a)?c<=d&&a.indexOf(b,c)>-1:!!d&&zc(a,b,c)>-1}pg=S(function(b,c,d){var e=-1,f=typeof c=="function",a=Kj(b)?g(b.length):[];Be(b,function(b){a[++e]=f?ic(c,b,d):We(b,c,d)});return a});Wb=mg(function(a,b,c){te(a,c,b)});function Zi(b,a){var c=U(b)?O:mf;return c(b,T(a,3))}function $i(a,b,c,d){if(a==null)return[];U(b)||(b=b==null?[]:[b]);c=d?void 0:c;U(c)||(c=c==null?[]:[c]);return sf(a,b,c)}h=mg(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]});function aj(b,a,c){var d=U(b)?rc:Fc,e=arguments.length<3;return d(b,T(a,4),c,e,Be)}function bj(b,a,c){var d=U(b)?sc:Fc,e=arguments.length<3;return d(b,T(a,4),c,e,Ce)}function cj(a,b){var c=U(a)?nc:Ge;return c(a,tj(T(b,3)))}function dj(a){var b=U(a)?ke:Bf;return b(a)}function ej(a,b,c){(c?lh(a,b,c):b===void 0)?b=1:b=Y(b);c=U(a)?le:Cf;return c(a,b)}function fj(a){var b=U(a)?me:Ff;return b(a)}function gj(a){if(a==null)return 0;if(Kj(a))return hk(a)?dd(a):a.length;var b=bh(a);return b==E||b==Aa?a.size:jf(a).length}function hj(a,b,c){var d=U(a)?tc:Hf;c&&lh(a,b,c)&&(b=void 0);return d(a,T(b,3))}rd=S(function(a,b){if(a==null)return[];var c=b.length;c>1&&lh(a,b[0],b[1])?b=[]:c>2&&lh(b[0],b[1],b[2])&&(b=[b[0]]);return sf(a,He(b,1),[])});var ij=Zb||function(){return N.Date.now()};function jj(a,b){if(typeof b!="function")throw new I(f);a=Y(a);return function(){if(--a<1)return b.apply(this,arguments)}}function kj(a,b,c){b=c?void 0:b;b=a&&b==null?a.length:b;return Jg(a,y,void 0,void 0,void 0,void 0,b)}function lj(b,c){var a;if(typeof c!="function")throw new I(f);b=Y(b);return function(){--b>0&&(a=c.apply(this,arguments));b<=1&&(c=void 0);return a}}var mj=S(function(a,b,c){var d=r;if(c.length){var e=Zc(c,Vg(mj));d|=w}return Jg(a,d,b,c,e)}),nj=S(function(a,b,c){var d=r|s;if(c.length){var e=Zc(c,Vg(nj));d|=w}return Jg(b,d,a,c,e)});function oj(a,b,c){b=c?void 0:b;c=Jg(a,u,void 0,void 0,void 0,void 0,void 0,b);c.placeholder=oj.placeholder;return c}function pj(a,b,c){b=c?void 0:b;c=Jg(a,v,void 0,void 0,void 0,void 0,void 0,b);c.placeholder=pj.placeholder;return c}function qj(b,c,d){var e,g,h,a,i,j,k=0,l=!1,m=!1,n=!0;if(typeof b!="function")throw new I(f);c=qk(c)||0;W(d)&&(l=!!d.leading,m="maxWait"in d,h=m?P(qk(d.maxWait)||0,c):h,n="trailing"in d?!!d.trailing:n);function o(c){var d=e,f=g;e=g=void 0;k=c;a=b.apply(f,d);return a}function p(b){k=b;i=Dh(s,c);return l?o(b):a}function q(a){var b=a-j;a=a-k;b=c-b;return m?ld(b,h-a):b}function r(a){var b=a-j;a=a-k;return j===void 0||b>=c||b<0||m&&a>=h}function s(){var a=ij();if(r(a))return t(a);i=Dh(s,q(a))}function t(b){i=void 0;if(n&&e)return o(b);e=g=void 0;return a}function u(){i!==void 0&&Yf(i),k=0,e=j=g=i=void 0}function v(){return i===void 0?a:t(ij())}function w(){var b=ij(),d=r(b);e=arguments;g=this;j=b;if(d){if(i===void 0)return p(j);if(m){Yf(i);i=Dh(s,c);return o(j)}}i===void 0&&(i=Dh(s,c));return a}w.cancel=u;w.flush=v;return w}b=S(function(a,b){return ze(a,1,b)});uc=S(function(a,b,c){return ze(a,qk(b)||0,c)});function rj(a){return Jg(a,A)}function sj(a,b){if(typeof a!="function"||b!=null&&typeof b!="function")throw new I(f);var c=function(){var e=arguments,f=b?b.apply(this,e):e[0],g=c.cache;if(g.has(f))return g.get(f);var d=a.apply(this,e);c.cache=g.set(f,d)||g;return d};c.cache=new(sj.Cache||Vd);return c}sj.Cache=Vd;function tj(a){if(typeof a!="function")throw new I(f);return function(){var b=arguments;switch(b.length){case 0:return!a.call(this);case 1:return!a.call(this,b[0]);case 2:return!a.call(this,b[0],b[1]);case 3:return!a.call(this,b[0],b[1],b[2])}return!a.apply(this,b)}}function uj(a){return lj(2,a)}Gh=Kd(function(a,b){b=b.length==1&&U(b[0])?O(b[0],Kc(T())):O(He(b,1),Kc(T()));var c=b.length;return S(function(d){var e=-1,f=ld(d.length,c);while(++e<f)d[e]=b[e].call(this,d[e]);return ic(a,this,d)})});var vj=S(function(a,b){var c=Zc(b,Vg(vj));return Jg(a,w,void 0,b,c)}),wj=S(function(a,b){var c=Zc(b,Vg(wj));return Jg(a,x,void 0,b,c)});K=Qg(function(a,b){return Jg(a,z,void 0,void 0,void 0,b)});function xj(a,b){if(typeof a!="function")throw new I(f);b=b===void 0?b:Y(b);return S(a,b)}function yj(a,b){if(typeof a!="function")throw new I(f);b=b==null?0:P(Y(b),0);return S(function(c){var d=c[b];c=Xf(c,0,b);d&&qc(c,d);return ic(a,this,c)})}function zj(a,b,c){var d=!0,e=!0;if(typeof a!="function")throw new I(f);W(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e);return qj(a,b,{leading:d,maxWait:b,trailing:e})}function Aj(a){return kj(a,1)}function Bj(a,b){return vj(Vf(b),a)}function Cj(){if(!arguments.length)return[];var a=arguments[0];return U(a)?a:[a]}function Dj(a){return we(a,o)}function Ej(a,b){b=typeof b=="function"?b:void 0;return we(a,o,b)}function Fj(a){return we(a,m|o)}function Gj(a,b){b=typeof b=="function"?b:void 0;return we(a,m|o,b)}function Hj(a,b){return b==null||ye(a,b,$(b))}function Ij(a,b){return a===b||a!==a&&b!==b}uh=Eg(Qe);vg=Eg(function(a,b){return a>=b});var Jj=Xe(function(){return arguments}())?Xe:function(a){return X(a)&&J.call(a,"callee")&&!Ob.call(a,"callee")},U=g.isArray;mg=cc?Kc(cc):Ye;function Kj(a){return a!=null&&Vj(a.length)&&!Tj(a)}function V(a){return X(a)&&Kj(a)}function Lj(a){return a===!0||a===!1||X(a)&&Pe(a)==pa}var Mj=Ab||Zl;Zb=dc?Kc(dc):Ze;function Nj(a){return X(a)&&a.nodeType===1&&!dk(a)}function Oj(a){if(a==null)return!0;if(Kj(a)&&(U(a)||typeof a=="string"||typeof a.splice=="function"||Mj(a)||jk(a)||Jj(a)))return!a.length;var b=bh(a);if(b==E||b==Aa)return!a.size;if(rh(a))return!jf(a).length;for(b in a)if(J.call(a,b))return!1;return!0}function Pj(a,b){return $e(a,b)}function Qj(b,c,d){d=typeof d=="function"?d:void 0;var a=d?d(b,c):void 0;return a===void 0?$e(b,c,void 0,d):!!a}function Rj(a){if(!X(a))return!1;var b=Pe(a);return b==sa||b==ra||typeof a.message=="string"&&typeof a.name=="string"&&!dk(a)}function Sj(a){return typeof a=="number"&&gd(a)}function Tj(a){if(!W(a))return!1;a=Pe(a);return a==ta||a==ua||a==oa||a==ya}function Uj(a){return typeof a=="number"&&a==Y(a)}function Vj(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=ga}function W(a){var b=typeof a;return a!=null&&(b=="object"||b=="function")}function X(a){return a!=null&&typeof a=="object"}var Wj=ec?Kc(ec):bf;function Xj(a,b){return a===b||cf(a,b,Xg(b))}function Yj(a,b,c){c=typeof c=="function"?c:void 0;return cf(a,b,Xg(b),c)}function Zj(a){return ck(a)&&a!=+a}function $j(a){if(qh(a))throw new i(e);return df(a)}function ak(a){return a===null}function bk(a){return a==null}function ck(a){return typeof a=="number"||X(a)&&Pe(a)==va}function dk(a){if(!X(a)||Pe(a)!=xa)return!1;a=Mb(a);if(a===null)return!0;a=J.call(a,"constructor")&&a.constructor;return typeof a=="function"&&a instanceof a&&Db.call(a)==Hb}var ek=fc?Kc(fc):ef;function fk(a){return Uj(a)&&a>=-ga&&a<=ga}var gk=gc?Kc(gc):ff;function hk(a){return typeof a=="string"||!U(a)&&X(a)&&Pe(a)==Ba}function ik(a){return typeof a=="symbol"||X(a)&&Pe(a)==Ca}var jk=hc?Kc(hc):gf;function kk(a){return a===void 0}function lk(a){return X(a)&&bh(a)==Ea}function mk(a){return X(a)&&Pe(a)==Fa}Kd=Eg(lf);Xe=Eg(function(a,b){return a<=b});function nk(a){if(!a)return[];if(Kj(a))return hk(a)?ed(a):ig(a);if(Tb&&a[Tb])return Wc(a[Tb]());var b=bh(a);b=b==E?Xc:b==Aa?$c:Wk;return b(a)}function ok(a){if(!a)return a===0?a:0;a=qk(a);if(a===fa||a===-fa){var b=a<0?-1:1;return b*ha}return a===a?a:0}function Y(a){a=ok(a);var b=a%1;return a===a?b?a-b:a:0}function pk(a){return a?ve(Y(a),0,D):0}function qk(a){if(typeof a=="number")return a;if(ik(a))return ia;if(W(a)){var b=typeof a.valueOf=="function"?a.valueOf():a;a=W(b)?b+"":b}if(typeof a!="string")return a===0?a:+a;a=a.replace(fb,"");b=qb.test(a);return b||sb.test(a)?ac(a.slice(2),b?2:8):pb.test(a)?ia:+a}function rk(a){return jg(a,Gk(a))}function sk(a){return a?ve(Y(a),-ga,ga):a===0?a:0}function Z(a){return a==null?"":Mf(a)}Ye=ng(function(a,b){if(rh(b)||Kj(b)){jg(b,$(b),a);return}for(var c in b)J.call(b,c)&&oe(a,c,b[c])});Ab=ng(function(a,b){jg(b,Gk(b),a)});var tk=ng(function(a,b,c,d){jg(b,Gk(b),a,d)});Ze=ng(function(a,b,c,d){jg(b,$(b),a,d)});bf=Qg(ue);function uk(a,b){a=Dd(a);return b==null?a:re(a,b)}ef=S(function(a,b){a=G(a);var c=-1,d=b.length,e=d>2?b[2]:void 0;e&&lh(b[0],b[1],e)&&(d=1);while(++c<d){e=b[c];var f=Gk(e),g=-1,h=f.length;while(++g<h){var i=f[g],j=a[i];(j===void 0||Ij(j,Bb[i])&&!J.call(a,i))&&(a[i]=e[i])}}return a});ff=S(function(a){a.push(void 0,Lg);return ic(Kk,void 0,a)});function vk(a,b){return xc(a,T(b,3),Ke)}function wk(a,b){return xc(a,T(b,3),Le)}function xk(b,a){return b==null?b:Ie(b,T(a,3),Gk)}function yk(b,a){return b==null?b:Je(b,T(a,3),Gk)}function zk(b,a){return b&&Ke(b,T(a,3))}function Ak(b,a){return b&&Le(b,T(a,3))}function Bk(a){return a==null?[]:Me(a,$(a))}function Ck(a){return a==null?[]:Me(a,Gk(a))}function Dk(a,b,c){a=a==null?void 0:Ne(a,b);return a===void 0?c:a}function Ek(a,b){return a!=null&&eh(a,b,Re)}function Fk(a,b){return a!=null&&eh(a,b,Se)}gf=yg(function(a,b,c){b!=null&&typeof b.toString!="function"&&(b=Gb.call(b)),a[b]=c},Gl(Jl));Eg=yg(function(a,b,c){b!=null&&typeof b.toString!="function"&&(b=Gb.call(b)),J.call(a,b)?a[b].push(c):a[b]=[c]},T);yg=S(We);function $(a){return Kj(a)?je(a):jf(a)}function Gk(a){return Kj(a)?je(a,!0):kf(a)}function Hk(c,b){var a={};b=T(b,3);Ke(c,function(d,e,c){te(a,b(d,e,c),d)});return a}function Ik(c,b){var a={};b=T(b,3);Ke(c,function(d,e,c){te(a,e,b(d,e,c))});return a}var Jk=ng(function(a,b,c){pf(a,b,c)}),Kk=ng(function(a,b,c,d){pf(a,b,c,d)});ng=Qg(function(b,c){var a={};if(b==null)return a;var d=!1;c=O(c,function(a){a=Wf(a,b);d||(d=a.length>1);return a});jg(b,Sg(b),a);d&&(a=we(a,m|n|o,Mg));var e=c.length;while(e--)Of(a,c[e]);return a});function Lk(a,b){return Nk(a,tj(T(b)))}var Mk=Qg(function(a,b){return a==null?{}:tf(a,b)});function Nk(a,b){if(a==null)return{};var c=O(Sg(a),function(a){return[a]});b=T(b);return uf(a,c,function(a,c){return b(a,c[0])})}function Ok(a,b,c){b=Wf(b,a);var d=-1,e=b.length;e||(e=1,a=void 0);while(++d<e){var f=a==null?void 0:a[Jh(b[d])];f===void 0&&(d=e,f=c);a=Tj(f)?f.call(a):f}return a}function Pk(a,b,c){return a==null?a:Df(a,b,c)}function Qk(a,b,c,d){d=typeof d=="function"?d:void 0;return a==null?a:Df(a,b,c,d)}var Rk=Ig($);Ig=Ig(Gk);function Sk(b,a,c){var d=U(b),e=d||Mj(b)||jk(b);a=T(a,4);if(c==null){var f=b&&b.constructor;e?c=d?new f:[]:W(b)?c=Tj(f)?Dd(Mb(b)):{}:c={}}(e?kc:Ke)(b,function(d,e,b){return a(c,d,e,b)});return c}function Tk(a,b){return a==null?!0:Of(a,b)}function Uk(a,b,c){return a==null?a:Pf(a,b,Vf(c))}function Vk(a,b,c,d){d=typeof d=="function"?d:void 0;return a==null?a:Pf(a,b,Vf(c),d)}function Wk(a){return a==null?[]:Lc(a,$(a))}function Xk(a){return a==null?[]:Lc(a,Gk(a))}function Yk(a,b,c){c===void 0&&(c=b,b=void 0);c!==void 0&&(c=qk(c),c=c===c?c:0);b!==void 0&&(b=qk(b),b=b===b?b:0);return ve(qk(a),b,c)}function Zk(a,b,c){b=ok(b);c===void 0?(c=b,b=0):c=ok(c);a=qk(a);return Te(a,b,c)}function $k(a,b,c){c&&typeof c!="boolean"&&lh(a,b,c)&&(b=c=void 0);c===void 0&&(typeof b=="boolean"?(c=b,b=void 0):typeof a=="boolean"&&(c=a,a=void 0));a===void 0&&b===void 0?(a=0,b=1):(a=ok(a),b===void 0?(b=a,a=0):b=ok(b));if(a>b){var d=a;a=b;b=d}if(c||a%1||b%1){d=od();return ld(a+d*(b-a+$b("1e-"+((d+"").length-1))),b)}return yf(a,b)}var al=sg(function(a,b,c){b=b.toLowerCase();return a+(c?bl(b):b)});function bl(a){return Bl(Z(a).toLowerCase())}function cl(a){a=Z(a);return a&&a.replace(ub,Qc).replace(Sb,"")}function dl(a,b,c){a=Z(a);b=Mf(b);var d=a.length;c=c===void 0?d:ve(Y(c),0,d);d=c;c-=b.length;return c>=0&&a.slice(c,d)==b}function el(a){a=Z(a);return a&&Xa.test(a)?a.replace(Va,Rc):a}function fl(a){a=Z(a);return a&&eb.test(a)?a.replace(db,"\\$&"):a}var gl=sg(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),hl=sg(function(a,b,c){return a+(c?" ":"")+b.toLowerCase()}),il=rg("toLowerCase");function jl(a,b,c){a=Z(a);b=Y(b);var d=b?dd(a):0;if(!b||d>=b)return a;b=(b-d)/2;return Bg(Ec(b),c)+a+Bg(vc(b),c)}function kl(a,b,c){a=Z(a);b=Y(b);var d=b?dd(a):0;return b&&d<b?a+Bg(b-d,c):a}function ll(a,b,c){a=Z(a);b=Y(b);var d=b?dd(a):0;return b&&d<b?Bg(b-d,c)+a:a}function ml(a,b,c){c||b==null?b=0:b&&(b=+b);return nd(Z(a).replace(gb,""),b||0)}function nl(a,b,c){(c?lh(a,b,c):b===void 0)?b=1:b=Y(b);return Af(Z(a),b)}function ol(){var a=arguments,b=Z(a[0]);return a.length<3?b:b.replace(a[1],a[2])}var pl=sg(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()});function ql(a,b,c){c&&typeof c!="number"&&lh(a,b,c)&&(b=c=void 0);c=c===void 0?D:c>>>0;if(!c)return[];a=Z(a);if(a&&(typeof b=="string"||b!=null&&!ek(b))){b=Mf(b);if(!b&&Uc(a))return Xf(ed(a),0,c)}return a.split(b,c)}var rl=sg(function(a,b,c){return a+(c?" ":"")+Bl(b)});function sl(a,b,c){a=Z(a);c=c==null?0:ve(Y(c),0,a.length);b=Mf(b);return a.slice(c,c+b.length)==b}function tl(a,b,c){var d=Q.templateSettings;c&&lh(a,b,c)&&(b=void 0);a=Z(a);b=tk({},b,d,Kg);c=tk({},b.imports,d.imports,Kg);var e=$(c),f=Lc(c,e),g,h,i=0;d=b.interpolate||vb;var j="__p += '";c=H((b.escape||vb).source+"|"+d.source+"|"+(d===$a?nb:vb).source+"|"+(b.evaluate||vb).source+"|$","g");var k="//# sourceURL="+(J.call(b,"sourceURL")?(b.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Yb+"]")+"\n";a.replace(c,function(b,c,d,e,f,k){d||(d=e);j+=a.slice(i,k).replace(wb,Sc);c&&(g=!0,j+="' +\n__e("+c+") +\n'");f&&(h=!0,j+="';\n"+f+";\n__p += '");d&&(j+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'");i=k+b.length;return b});j+="';\n";d=J.call(b,"variable")&&b.variable;d||(j="with (obj) {\n"+j+"\n}\n");j=(h?j.replace(Ra,""):j).replace(Sa,"$1").replace(Ta,"$1;");j="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(g?", __e = _.escape":"")+(h?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+j+"return __p\n}";c=Dl(function(){return lb(e,k+"return "+j).apply(void 0,f)});c.source=j;if(Rj(c))throw c;return c}function ul(a){return Z(a).toLowerCase()}function vl(a){return Z(a).toUpperCase()}function wl(a,b,c){a=Z(a);if(a&&(c||b===void 0))return a.replace(fb,"");if(!a||!(b=Mf(b)))return a;c=ed(a);a=ed(b);b=Nc(c,a);a=Oc(c,a)+1;return Xf(c,b,a).join("")}function xl(a,b,c){a=Z(a);if(a&&(c||b===void 0))return a.replace(hb,"");if(!a||!(b=Mf(b)))return a;c=ed(a);a=Oc(c,ed(b))+1;return Xf(c,0,a).join("")}function yl(a,b,c){a=Z(a);if(a&&(c||b===void 0))return a.replace(gb,"");if(!a||!(b=Mf(b)))return a;c=ed(a);a=Nc(c,ed(b));return Xf(c,a).join("")}function zl(a,b){var c=B,d=aa;if(W(b)){var e="separator"in b?b.separator:e;c="length"in b?Y(b.length):c;d="omission"in b?Mf(b.omission):d}a=Z(a);b=a.length;if(Uc(a)){var f=ed(a);b=f.length}if(c>=b)return a;b=c-dd(d);if(b<1)return d;c=f?Xf(f,0,b).join(""):a.slice(0,b);if(e===void 0)return c+d;f&&(b+=c.length-b);if(ek(e)){if(a.slice(b).search(e)){var g,h=c;e.global||(e=H(e.source,Z(ob.exec(e))+"g"));e.lastIndex=0;while(g=e.exec(h))var i=g.index;c=c.slice(0,i===void 0?b:i)}}else if(a.indexOf(Mf(e),b)!=b){g=c.lastIndexOf(e);g>-1&&(c=c.slice(0,g))}return c+d}function Al(a){a=Z(a);return a&&Wa.test(a)?a.replace(Ua,fd):a}sg=sg(function(a,b,c){return a+(c?" ":"")+b.toUpperCase()});var Bl=rg("toUpperCase");function Cl(a,b,c){a=Z(a);b=c?void 0:b;return b===void 0?Vc(a)?id(a):wc(a):a.match(b)||[]}var Dl=S(function(a,b){try{return ic(a,void 0,b)}catch(a){return Rj(a)?a:new i(a)}});rg=Qg(function(a,b){kc(b,function(b){b=Jh(b),te(a,b,mj(a[b],a))});return a});function El(a){var b=a==null?0:a.length,c=T();a=b?O(a,function(a){if(typeof a[1]!="function")throw new I(f);return[c(a[0]),a[1]]}):[];return S(function(c){var d=-1;while(++d<b){var e=a[d];if(ic(e[0],this,c))return ic(e[1],this,c)}})}function Fl(a){return xe(we(a,m))}function Gl(a){return function(){return a}}function Hl(a,b){return a==null||a!==a?b:a}var Il=wg();wg=wg(!0);function Jl(a){return a}function Kl(a){return hf(typeof a=="function"?a:we(a,m))}function Ll(a){return nf(we(a,m))}function Ml(a,b){return of(a,we(b,m))}var Nl=S(function(a,b){return function(c){return We(c,a,b)}}),Ol=S(function(a,b){return function(c){return We(a,c,b)}});function Pl(b,c,d){var e=$(c),f=Me(c,e);d==null&&!(W(c)&&(f.length||!e.length))&&(d=c,c=b,b=this,f=Me(c,$(c)));var a=!(W(d)&&"chain"in d)||!!d.chain,g=Tj(b);kc(f,function(d){var e=c[d];b[d]=e;g&&(b.prototype[d]=function(){var d=this.__chain__;if(a||d){var c=b(this.__wrapped__),f=c.__actions__=ig(this.__actions__);f.push({func:e,args:arguments,thisArg:b});c.__chain__=d;return c}return e.apply(b,qc([this.value()],arguments))})});return b}function Ql(){N._===this&&(N._=Ib);return this}function Rl(){}function Sl(a){a=Y(a);return S(function(b){return rf(b,a)})}var Tl=Ag(O),Ul=Ag(mc);Ag=Ag(tc);function Vl(a){return mh(a)?Dc(Jh(a)):vf(a)}function Wl(a){return function(b){return a==null?void 0:Ne(a,b)}}var Xl=Dg();Dg=Dg(!0);function Yl(){return[]}function Zl(){return!1}function $l(){return{}}function am(){return""}function bm(){return!0}function cm(b,a){b=Y(b);if(b<1||b>ga)return[];var c=D,d=ld(b,D);a=T(a);b-=D;d=Ic(d,a);while(++c<b)a(c);return d}function dm(a){return U(a)?O(a,Jh):ik(a)?[a]:ig(Ih(Z(a)))}function em(a){var b=++Eb;return Z(a)+b}var fm=zg(function(a,b){return a+b},0),gm=Gg("ceil"),hm=zg(function(a,b){return a/b},1),im=Gg("floor");function jm(a){return a&&a.length?Ee(a,Jl,Qe):void 0}function km(b,a){return b&&b.length?Ee(b,T(a,2),Qe):void 0}function lm(a){return Cc(a,Jl)}function mm(b,a){return Cc(b,T(a,2))}function nm(a){return a&&a.length?Ee(a,Jl,lf):void 0}function om(b,a){return b&&b.length?Ee(b,T(a,2),lf):void 0}var pm=zg(function(a,b){return a*b},1);Gg=Gg("round");zg=zg(function(a,b){return a-b},0);function qm(a){return a&&a.length?Hc(a,Jl):0}function rm(b,a){return b&&b.length?Hc(b,T(a,2)):0}Q.after=jj;Q.ary=kj;Q.assign=Ye;Q.assignIn=Ab;Q.assignInWith=tk;Q.assignWith=Ze;Q.at=bf;Q.before=lj;Q.bind=mj;Q.bindAll=rg;Q.bindKey=nj;Q.castArray=Cj;Q.chain=Hi;Q.chunk=Nh;Q.compact=Oh;Q.concat=Ph;Q.cond=El;Q.conforms=Fl;Q.constant=Gl;Q.countBy=ge;Q.create=uk;Q.curry=oj;Q.curryRight=pj;Q.debounce=qj;Q.defaults=ef;Q.defaultsDeep=ff;Q.defer=b;Q.delay=uc;Q.difference=Ld;Q.differenceBy=Md;Q.differenceWith=Nd;Q.drop=Qh;Q.dropRight=Rh;Q.dropRightWhile=Sh;Q.dropWhile=Th;Q.fill=Uh;Q.filter=Si;Q.flatMap=Ti;Q.flatMapDeep=Ui;Q.flatMapDepth=Vi;Q.flatten=Xh;Q.flattenDeep=Yh;Q.flattenDepth=Zh;Q.flip=rj;Q.flow=Il;Q.flowRight=wg;Q.fromPairs=$h;Q.functions=Bk;Q.functionsIn=Ck;Q.groupBy=og;Q.initial=ci;Q.intersection=Od;Q.intersectionBy=Qd;Q.intersectionWith=Rd;Q.invert=gf;Q.invertBy=Eg;Q.invokeMap=pg;Q.iteratee=Kl;Q.keyBy=Wb;Q.keys=$;Q.keysIn=Gk;Q.map=Zi;Q.mapKeys=Hk;Q.mapValues=Ik;Q.matches=Ll;Q.matchesProperty=Ml;Q.memoize=sj;Q.merge=Jk;Q.mergeWith=Kk;Q.method=Nl;Q.methodOf=Ol;Q.mixin=Pl;Q.negate=tj;Q.nthArg=Sl;Q.omit=ng;Q.omitBy=Lk;Q.once=uj;Q.orderBy=$i;Q.over=Tl;Q.overArgs=Gh;Q.overEvery=Ul;Q.overSome=Ag;Q.partial=vj;Q.partialRight=wj;Q.partition=h;Q.pick=Mk;Q.pickBy=Nk;Q.property=Vl;Q.propertyOf=Wl;Q.pull=Sd;Q.pullAll=hi;Q.pullAllBy=ii;Q.pullAllWith=ji;Q.pullAt=Td;Q.range=Xl;Q.rangeRight=Dg;Q.rearg=K;Q.reject=cj;Q.remove=ki;Q.rest=xj;Q.reverse=li;Q.sampleSize=ej;Q.set=Pk;Q.setWith=Qk;Q.shuffle=fj;Q.slice=mi;Q.sortBy=rd;Q.sortedUniq=ti;Q.sortedUniqBy=ui;Q.split=ql;Q.spread=yj;Q.tail=vi;Q.take=wi;Q.takeRight=xi;Q.takeRightWhile=yi;Q.takeWhile=zi;Q.tap=Ii;Q.throttle=zj;Q.thru=Ji;Q.toArray=nk;Q.toPairs=Rk;Q.toPairsIn=Ig;Q.toPath=dm;Q.toPlainObject=rk;Q.transform=Sk;Q.unary=Aj;Q.union=Ud;Q.unionBy=Wd;Q.unionWith=Xd;Q.uniq=Ai;Q.uniqBy=Bi;Q.uniqWith=Ci;Q.unset=Tk;Q.unzip=Di;Q.unzipWith=Ei;Q.update=Uk;Q.updateWith=Vk;Q.values=Wk;Q.valuesIn=Xk;Q.without=Yd;Q.words=Cl;Q.wrap=Bj;Q.xor=Zd;Q.xorBy=$d;Q.xorWith=be;Q.zip=ce;Q.zipObject=Fi;Q.zipObjectDeep=Gi;Q.zipWith=ee;Q.entries=Rk;Q.entriesIn=Ig;Q.extend=Ab;Q.extendWith=tk;Pl(Q,Q);Q.add=fm;Q.attempt=Dl;Q.camelCase=al;Q.capitalize=bl;Q.ceil=gm;Q.clamp=Yk;Q.clone=Dj;Q.cloneDeep=Fj;Q.cloneDeepWith=Gj;Q.cloneWith=Ej;Q.conformsTo=Hj;Q.deburr=cl;Q.defaultTo=Hl;Q.divide=hm;Q.endsWith=dl;Q.eq=Ij;Q.escape=el;Q.escapeRegExp=fl;Q.every=Ri;Q.find=he;Q.findIndex=Vh;Q.findKey=vk;Q.findLast=ie;Q.findLastIndex=Wh;Q.findLastKey=wk;Q.floor=im;Q.forEach=Wi;Q.forEachRight=Xi;Q.forIn=xk;Q.forInRight=yk;Q.forOwn=zk;Q.forOwnRight=Ak;Q.get=Dk;Q.gt=uh;Q.gte=vg;Q.has=Ek;Q.hasIn=Fk;Q.head=ai;Q.identity=Jl;Q.includes=Yi;Q.indexOf=bi;Q.inRange=Zk;Q.invoke=yg;Q.isArguments=Jj;Q.isArray=U;Q.isArrayBuffer=mg;Q.isArrayLike=Kj;Q.isArrayLikeObject=V;Q.isBoolean=Lj;Q.isBuffer=Mj;Q.isDate=Zb;Q.isElement=Nj;Q.isEmpty=Oj;Q.isEqual=Pj;Q.isEqualWith=Qj;Q.isError=Rj;Q.isFinite=Sj;Q.isFunction=Tj;Q.isInteger=Uj;Q.isLength=Vj;Q.isMap=Wj;Q.isMatch=Xj;Q.isMatchWith=Yj;Q.isNaN=Zj;Q.isNative=$j;Q.isNil=bk;Q.isNull=ak;Q.isNumber=ck;Q.isObject=W;Q.isObjectLike=X;Q.isPlainObject=dk;Q.isRegExp=ek;Q.isSafeInteger=fk;Q.isSet=gk;Q.isString=hk;Q.isSymbol=ik;Q.isTypedArray=jk;Q.isUndefined=kk;Q.isWeakMap=lk;Q.isWeakSet=mk;Q.join=di;Q.kebabCase=gl;Q.last=ei;Q.lastIndexOf=fi;Q.lowerCase=hl;Q.lowerFirst=il;Q.lt=Kd;Q.lte=Xe;Q.max=jm;Q.maxBy=km;Q.mean=lm;Q.meanBy=mm;Q.min=nm;Q.minBy=om;Q.stubArray=Yl;Q.stubFalse=Zl;Q.stubObject=$l;Q.stubString=am;Q.stubTrue=bm;Q.multiply=pm;Q.nth=gi;Q.noConflict=Ql;Q.noop=Rl;Q.now=ij;Q.pad=jl;Q.padEnd=kl;Q.padStart=ll;Q.parseInt=ml;Q.random=$k;Q.reduce=aj;Q.reduceRight=bj;Q.repeat=nl;Q.replace=ol;Q.result=Ok;Q.round=Gg;Q.runInContext=a;Q.sample=dj;Q.size=gj;Q.snakeCase=pl;Q.some=hj;Q.sortedIndex=ni;Q.sortedIndexBy=oi;Q.sortedIndexOf=pi;Q.sortedLastIndex=qi;Q.sortedLastIndexBy=ri;Q.sortedLastIndexOf=si;Q.startCase=rl;Q.startsWith=sl;Q.subtract=zg;Q.sum=qm;Q.sumBy=rm;Q.template=tl;Q.times=cm;Q.toFinite=ok;Q.toInteger=Y;Q.toLength=pk;Q.toLower=ul;Q.toNumber=qk;Q.toSafeInteger=sk;Q.toString=Z;Q.toUpper=vl;Q.trim=wl;Q.trimEnd=xl;Q.trimStart=yl;Q.truncate=zl;Q.unescape=Al;Q.uniqueId=em;Q.upperCase=sg;Q.upperFirst=Bl;Q.each=Wi;Q.eachRight=Xi;Q.first=ai;Pl(Q,function(){var a={};Ke(Q,function(b,c){J.call(Q.prototype,c)||(a[c]=b)});return a}(),{chain:!1});Q.VERSION=c;kc(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){Q[a].placeholder=Q});kc(["drop","take"],function(a,b){R.prototype[a]=function(d){d=d===void 0?1:P(Y(d),0);var c=this.__filtered__&&!b?new R(this):this.clone();c.__filtered__?c.__takeCount__=ld(d,c.__takeCount__):c.__views__.push({size:ld(d,D),type:a+(c.__dir__<0?"Right":"")});return c},R.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}});kc(["filter","map","takeWhile"],function(a,b){var c=b+1,d=c==da||c==C;R.prototype[a]=function(b){var a=this.clone();a.__iteratees__.push({iteratee:T(b,3),type:c});a.__filtered__=a.__filtered__||d;return a}});kc(["head","last"],function(a,b){var c="take"+(b?"Right":"");R.prototype[a]=function(){return this[c](1).value()[0]}});kc(["initial","tail"],function(a,b){var c="drop"+(b?"":"Right");R.prototype[a]=function(){return this.__filtered__?new R(this):this[c](1)}});R.prototype.compact=function(){return this.filter(Jl)};R.prototype.find=function(a){return this.filter(a).head()};R.prototype.findLast=function(a){return this.reverse().find(a)};R.prototype.invokeMap=S(function(a,b){return typeof a=="function"?new R(this):this.map(function(c){return We(c,a,b)})});R.prototype.reject=function(a){return this.filter(tj(T(a)))};R.prototype.slice=function(b,c){b=Y(b);var a=this;if(a.__filtered__&&(b>0||c<0))return new R(a);b<0?a=a.takeRight(-b):b&&(a=a.drop(b));c!==void 0&&(c=Y(c),a=c<0?a.dropRight(-c):a.take(c-b));return a};R.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()};R.prototype.toArray=function(){return this.take(D)};Ke(R.prototype,function(a,b){var c=/^(?:filter|find|map|reject)|While$/.test(b),d=/^(?:head|last)$/.test(b),e=Q[d?"take"+(b=="last"?"Right":""):b],f=d||/^find/.test(b);if(!e)return;Q.prototype[b]=function(){var h=this.__wrapped__,i=d?[1]:arguments,j=h instanceof R,g=i[0],k=j||U(h),l=function(a){a=e.apply(Q,qc([a],i));return d&&m?a[0]:a};k&&c&&typeof g=="function"&&g.length!=1&&(j=k=!1);var m=this.__chain__,n=!!this.__actions__.length,o=f&&!m,p=j&&!n;if(!f&&k){h=p?h:new R(this);var b=a.apply(h,i);b.__actions__.push({func:Ji,args:[l],thisArg:void 0});return new Fd(b,m)}if(o&&p)return a.apply(this,i);b=this.thru(l);return o?d?b.value()[0]:b.value():b}});kc(["pop","push","shift","sort","splice","unshift"],function(a){var b=zb[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",d=/^(?:pop|shift)$/.test(a);Q.prototype[a]=function(){var a=arguments;if(d&&!this.__chain__){var e=this.value();return b.apply(U(e)?e:[],a)}return this[c](function(c){return b.apply(U(c)?c:[],a)})}});Ke(R.prototype,function(a,b){a=Q[b];if(a){var c=a.name+"";J.call(vd,c)||(vd[c]=[]);vd[c].push({name:b,func:a})}});vd[xg(void 0,s).name]=[{name:"wrapper",func:void 0}];R.prototype.clone=Gd;R.prototype.reverse=Hd;R.prototype.value=Id;Q.prototype.at=fe;Q.prototype.chain=Ki;Q.prototype.commit=Li;Q.prototype.next=Mi;Q.prototype.plant=Oi;Q.prototype.reverse=Pi;Q.prototype.toJSON=Q.prototype.valueOf=Q.prototype.value=Qi;Q.prototype.first=Q.prototype.head;Tb&&(Q.prototype[Tb]=Ni);return Q};var jd=Ob();typeof i=="function"&&typeof i.amd=="object"&&i.amd?(N._=jd,i(function(){return jd})):J?((J.exports=jd)._=jd,zb._=jd):N._=jd}).call(this)}var k=!1;function l(){k||(k=!0,j());return h.exports}c={};var m={exports:c};function n(){var a=Array.isArray;m.exports=a}var o=!1;function p(){o||(o=!0,n());return m.exports}d={};var q={exports:d};function r(){var b=typeof a=="object"&&a&&a.Object===Object&&a;q.exports=b}var s=!1;function t(){s||(s=!0,r());return q.exports}f={};var u={exports:f};function v(){var a=t(),b=typeof self=="object"&&self&&self.Object===Object&&self;a=a||b||Function("return this")();u.exports=a}var w=!1;function x(){w||(w=!0,v());return u.exports}c={};var y={exports:c};function z(){var a=x();a=a.Symbol;y.exports=a}var A=!1;function B(){A||(A=!0,z());return y.exports}d={};var aa={exports:d};function ba(){var a=B(),b=Object.prototype,c=b.hasOwnProperty,d=b.toString,e=a?a.toStringTag:void 0;function f(a){var b=c.call(a,e),f=a[e];try{a[e]=void 0;var g=!0}catch(a){}var h=d.call(a);g&&(b?a[e]=f:delete a[e]);return h}aa.exports=f}var ca=!1;function da(){ca||(ca=!0,ba());return aa.exports}f={};var ea={exports:f};function C(){var a=Object.prototype,b=a.toString;function c(a){return b.call(a)}ea.exports=c}var fa=!1;function ga(){fa||(fa=!0,C());return ea.exports}c={};var ha={exports:c};function ia(){var a=B(),b=da(),c=ga(),d="[object Null]",e="[object Undefined]",f=a?a.toStringTag:void 0;function g(a){return a==null?a===void 0?e:d:f&&f in Object(a)?b(a):c(a)}ha.exports=g}var D=!1;function ja(){D||(D=!0,ia());return ha.exports}d={};var ka={exports:d};function la(){function a(a){return a!=null&&typeof a=="object"}ka.exports=a}var ma=!1;function na(){ma||(ma=!0,la());return ka.exports}f={};var oa={exports:f};function pa(){var a=ja(),b=na(),c="[object Symbol]";function d(d){return typeof d=="symbol"||b(d)&&a(d)==c}oa.exports=d}var qa=!1;function ra(){qa||(qa=!0,pa());return oa.exports}c={};var sa={exports:c};function ta(){var a=p(),b=ra(),c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/;function e(e,f){if(a(e))return!1;var g=typeof e;return g=="number"||g=="symbol"||g=="boolean"||e==null||b(e)?!0:d.test(e)||!c.test(e)||f!=null&&e in Object(f)}sa.exports=e}var ua=!1;function E(){ua||(ua=!0,ta());return sa.exports}d={};var va={exports:d};function wa(){function a(a){var b=typeof a;return a!=null&&(b=="object"||b=="function")}va.exports=a}var xa=!1;function F(){xa||(xa=!0,wa());return va.exports}f={};var ya={exports:f};function za(){var a=ja(),b=F(),c="[object AsyncFunction]",d="[object Function]",e="[object GeneratorFunction]",f="[object Proxy]";function g(g){if(!b(g))return!1;g=a(g);return g==d||g==e||g==c||g==f}ya.exports=g}var Aa=!1;function Ba(){Aa||(Aa=!0,za());return ya.exports}c={};var Ca={exports:c};function Da(){var a=x();a=a["__core-js_shared__"];Ca.exports=a}var Ea=!1;function Fa(){Ea||(Ea=!0,Da());return Ca.exports}d={};var Ga={exports:d};function Ha(){var a=Fa(),b=function(){var b=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}();function c(a){return!!b&&b in a}Ga.exports=c}var Ia=!1;function Ja(){Ia||(Ia=!0,Ha());return Ga.exports}f={};var Ka={exports:f};function La(){var a=Function.prototype,b=a.toString;function c(a){if(a!=null){try{return b.call(a)}catch(a){}try{return a+""}catch(a){}}return""}Ka.exports=c}var Ma=!1;function Na(){Ma||(Ma=!0,La());return Ka.exports}c={};var Oa={exports:c};function Pa(){var a=Ba(),b=Ja(),c=F(),d=Na(),e=/[\\^$.*+?()[\]{}|]/g,f=/^\[object .+?Constructor\]$/,g=Function.prototype,h=Object.prototype;g=g.toString;h=h.hasOwnProperty;var i=RegExp("^"+g.call(h).replace(e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function j(e){if(!c(e)||b(e))return!1;var g=a(e)?i:f;return g.test(d(e))}Oa.exports=j}var Qa=!1;function Ra(){Qa||(Qa=!0,Pa());return Oa.exports}d={};var Sa={exports:d};function Ta(){function a(a,b){return a==null?void 0:a[b]}Sa.exports=a}var Ua=!1;function Va(){Ua||(Ua=!0,Ta());return Sa.exports}f={};var Wa={exports:f};function Xa(){var a=Ra(),b=Va();function c(c,d){c=b(c,d);return a(c)?c:void 0}Wa.exports=c}var Ya=!1;function Za(){Ya||(Ya=!0,Xa());return Wa.exports}c={};var $a={exports:c};function ab(){var a=Za();a=a(Object,"create");$a.exports=a}var bb=!1;function cb(){bb||(bb=!0,ab());return $a.exports}d={};var db={exports:d};function eb(){var a=cb();function b(){this.__data__=a?a(null):{},this.size=0}db.exports=b}var fb=!1;function gb(){fb||(fb=!0,eb());return db.exports}f={};var hb={exports:f};function ib(){function a(a){a=this.has(a)&&delete this.__data__[a];this.size-=a?1:0;return a}hb.exports=a}var jb=!1;function kb(){jb||(jb=!0,ib());return hb.exports}c={};var lb={exports:c};function mb(){var a=cb(),b="__lodash_hash_undefined__",c=Object.prototype,d=c.hasOwnProperty;function e(c){var e=this.__data__;if(a){var f=e[c];return f===b?void 0:f}return d.call(e,c)?e[c]:void 0}lb.exports=e}var nb=!1;function ob(){nb||(nb=!0,mb());return lb.exports}d={};var pb={exports:d};function qb(){var a=cb(),b=Object.prototype,c=b.hasOwnProperty;function d(b){var d=this.__data__;return a?d[b]!==void 0:c.call(d,b)}pb.exports=d}var rb=!1;function sb(){rb||(rb=!0,qb());return pb.exports}f={};var tb={exports:f};function ub(){var a=cb(),b="__lodash_hash_undefined__";function c(c,d){var e=this.__data__;this.size+=this.has(c)?0:1;e[c]=a&&d===void 0?b:d;return this}tb.exports=c}var vb=!1;function wb(){vb||(vb=!0,ub());return tb.exports}c={};var xb={exports:c};function G(){var a=gb(),b=kb(),c=ob(),d=sb(),e=wb();function f(a){var b=-1,c=a==null?0:a.length;this.clear();while(++b<c){var d=a[b];this.set(d[0],d[1])}}f.prototype.clear=a;f.prototype["delete"]=b;f.prototype.get=c;f.prototype.has=d;f.prototype.set=e;xb.exports=f}var H=!1;function yb(){H||(H=!0,G());return xb.exports}d={};var I={exports:d};function zb(){function a(){this.__data__=[],this.size=0}I.exports=a}var Ab=!1;function Bb(){Ab||(Ab=!0,zb());return I.exports}f={};var Cb={exports:f};function Db(){function a(a,b){return a===b||a!==a&&b!==b}Cb.exports=a}var J=!1;function Eb(){J||(J=!0,Db());return Cb.exports}c={};var Fb={exports:c};function Gb(){var a=Eb();function b(b,c){var d=b.length;while(d--)if(a(b[d][0],c))return d;return-1}Fb.exports=b}var Hb=!1;function Ib(){Hb||(Hb=!0,Gb());return Fb.exports}d={};var Jb={exports:d};function K(){var a=Ib(),b=Array.prototype,c=b.splice;function d(b){var d=this.__data__;b=a(d,b);if(b<0)return!1;var e=d.length-1;b==e?d.pop():c.call(d,b,1);--this.size;return!0}Jb.exports=d}var Kb=!1;function Lb(){Kb||(Kb=!0,K());return Jb.exports}f={};var Mb={exports:f};function Nb(){var a=Ib();function b(b){var c=this.__data__;b=a(c,b);return b<0?void 0:c[b][1]}Mb.exports=b}var Ob=!1;function Pb(){Ob||(Ob=!0,Nb());return Mb.exports}c={};var Qb={exports:c};function Rb(){var a=Ib();function b(b){return a(this.__data__,b)>-1}Qb.exports=b}var Sb=!1;function Tb(){Sb||(Sb=!0,Rb());return Qb.exports}d={};var Ub={exports:d};function Vb(){var a=Ib();function b(b,c){var d=this.__data__,e=a(d,b);e<0?(++this.size,d.push([b,c])):d[e][1]=c;return this}Ub.exports=b}var Wb=!1;function Xb(){Wb||(Wb=!0,Vb());return Ub.exports}f={};var Yb={exports:f};function L(){var a=Bb(),b=Lb(),c=Pb(),d=Tb(),e=Xb();function f(a){var b=-1,c=a==null?0:a.length;this.clear();while(++b<c){var d=a[b];this.set(d[0],d[1])}}f.prototype.clear=a;f.prototype["delete"]=b;f.prototype.get=c;f.prototype.has=d;f.prototype.set=e;Yb.exports=f}var M=!1;function Zb(){M||(M=!0,L());return Yb.exports}c={};var $b={exports:c};function ac(){var a=Za(),b=x();a=a(b,"Map");$b.exports=a}var N=!1;function bc(){N||(N=!0,ac());return $b.exports}d={};var cc={exports:d};function dc(){var a=yb(),b=Zb(),c=bc();function d(){this.size=0,this.__data__={hash:new a,map:new(c||b),string:new a}}cc.exports=d}var ec=!1;function fc(){ec||(ec=!0,dc());return cc.exports}f={};var gc={exports:f};function hc(){function a(a){var b=typeof a;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?a!=="__proto__":a===null}gc.exports=a}var ic=!1;function jc(){ic||(ic=!0,hc());return gc.exports}c={};var kc={exports:c};function lc(){var a=jc();function b(b,c){b=b.__data__;return a(c)?b[typeof c=="string"?"string":"hash"]:b.map}kc.exports=b}var mc=!1;function nc(){mc||(mc=!0,lc());return kc.exports}d={};var oc={exports:d};function pc(){var a=nc();function b(b){b=a(this,b)["delete"](b);this.size-=b?1:0;return b}oc.exports=b}var O=!1;function qc(){O||(O=!0,pc());return oc.exports}f={};var rc={exports:f};function sc(){var a=nc();function b(b){return a(this,b).get(b)}rc.exports=b}var tc=!1;function uc(){tc||(tc=!0,sc());return rc.exports}c={};var vc={exports:c};function wc(){var a=nc();function b(b){return a(this,b).has(b)}vc.exports=b}var xc=!1;function yc(){xc||(xc=!0,wc());return vc.exports}d={};var zc={exports:d};function Ac(){var a=nc();function b(b,c){var d=a(this,b),e=d.size;d.set(b,c);this.size+=d.size==e?0:1;return this}zc.exports=b}var Bc=!1;function Cc(){Bc||(Bc=!0,Ac());return zc.exports}f={};var Dc={exports:f};function Ec(){var a=fc(),b=qc(),c=uc(),d=yc(),e=Cc();function f(a){var b=-1,c=a==null?0:a.length;this.clear();while(++b<c){var d=a[b];this.set(d[0],d[1])}}f.prototype.clear=a;f.prototype["delete"]=b;f.prototype.get=c;f.prototype.has=d;f.prototype.set=e;Dc.exports=f}var Fc=!1;function Gc(){Fc||(Fc=!0,Ec());return Dc.exports}c={};var Hc={exports:c};function Ic(){var a=Gc(),b="Expected a function";function c(d,e){if(typeof d!="function"||e!=null&&typeof e!="function")throw new TypeError(b);var f=function(){var a=arguments,b=e?e.apply(this,a):a[0],c=f.cache;if(c.has(b))return c.get(b);var g=d.apply(this,a);f.cache=c.set(b,g)||c;return g};f.cache=new(c.Cache||a);return f}c.Cache=a;Hc.exports=c}var Jc=!1;function Kc(){Jc||(Jc=!0,Ic());return Hc.exports}d={};var Lc={exports:d};function Mc(){var a=Kc(),b=500;function c(c){c=a(c,function(a){d.size===b&&d.clear();return a});var d=c.cache;return c}Lc.exports=c}var Nc=!1;function Oc(){Nc||(Nc=!0,Mc());return Lc.exports}f={};var Pc={exports:f};function Qc(){var a=Oc(),b=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g;a=a(function(a){var d=[];a.charCodeAt(0)===46&&d.push("");a.replace(b,function(a,b,e,f){d.push(e?f.replace(c,"$1"):b||a)});return d});Pc.exports=a}var Rc=!1;function Sc(){Rc||(Rc=!0,Qc());return Pc.exports}c={};var Tc={exports:c};function Uc(){function a(a,b){var c=-1,d=a==null?0:a.length,e=Array(d);while(++c<d)e[c]=b(a[c],c,a);return e}Tc.exports=a}var Vc=!1;function Wc(){Vc||(Vc=!0,Uc());return Tc.exports}d={};var Xc={exports:d};function Yc(){var a=B(),b=Wc(),c=p(),d=ra(),e=1/0;a=a?a.prototype:void 0;var f=a?a.toString:void 0;function g(a){if(typeof a=="string")return a;if(c(a))return b(a,g)+"";if(d(a))return f?f.call(a):"";var h=a+"";return h=="0"&&1/a==-e?"-0":h}Xc.exports=g}var Zc=!1;function $c(){Zc||(Zc=!0,Yc());return Xc.exports}f={};var ad={exports:f};function bd(){var a=$c();function b(b){return b==null?"":a(b)}ad.exports=b}var cd=!1;function dd(){cd||(cd=!0,bd());return ad.exports}c={};var ed={exports:c};function fd(){var a=p(),b=E(),c=Sc(),d=dd();function e(e,f){return a(e)?e:b(e,f)?[e]:c(d(e))}ed.exports=e}var gd=!1;function hd(){gd||(gd=!0,fd());return ed.exports}d={};var id={exports:d};function jd(){var a=ra(),b=1/0;function c(c){if(typeof c=="string"||a(c))return c;var d=c+"";return d=="0"&&1/c==-b?"-0":d}id.exports=c}var kd=!1;function P(){kd||(kd=!0,jd());return id.exports}f={};var ld={exports:f};function md(){var a=hd(),b=P();function c(c,d){d=a(d,c);var e=0,f=d.length;while(c!=null&&e<f)c=c[b(d[e++])];return e&&e==f?c:void 0}ld.exports=c}var nd=!1;function od(){nd||(nd=!0,md());return ld.exports}c={};var pd={exports:c};function qd(){var a=od();function b(b,c,d){b=b==null?void 0:a(b,c);return b===void 0?d:b}pd.exports=b}var rd=!1;function sd(){rd||(rd=!0,qd());return pd.exports}d={};var td={exports:d};function ud(){var a=sd();function b(b,c){var d=-1,e=c.length,f=Array(e),g=b==null;while(++d<e)f[d]=g?void 0:a(b,c[d]);return f}td.exports=b}var vd=!1;function wd(){vd||(vd=!0,ud());return td.exports}f={};var xd={exports:f};function yd(){function a(a,b){var c=-1,d=b.length,e=a.length;while(++c<d)a[e+c]=b[c];return a}xd.exports=a}var zd=!1;function Ad(){zd||(zd=!0,yd());return xd.exports}c={};var Bd={exports:c};function Cd(){var a=ja(),b=na(),c="[object Arguments]";function d(d){return b(d)&&a(d)==c}Bd.exports=d}var Q=!1;function Dd(){Q||(Q=!0,Cd());return Bd.exports}d={};var Ed={exports:d};function Fd(){var a=Dd(),b=na(),c=Object.prototype,d=c.hasOwnProperty,e=c.propertyIsEnumerable;c=a(function(){return arguments}())?a:function(a){return b(a)&&d.call(a,"callee")&&!e.call(a,"callee")};Ed.exports=c}var R=!1;function Gd(){R||(R=!0,Fd());return Ed.exports}f={};var Hd={exports:f};function Id(){var a=B(),b=Gd(),c=p(),d=a?a.isConcatSpreadable:void 0;function e(a){return c(a)||b(a)||!!(d&&a&&a[d])}Hd.exports=e}var Jd=!1;function Kd(){Jd||(Jd=!0,Id());return Hd.exports}c={};var Ld={exports:c};function Md(){var a=Ad(),b=Kd();function c(d,e,f,g,h){var i=-1,j=d.length;f||(f=b);h||(h=[]);while(++i<j){var k=d[i];e>0&&f(k)?e>1?c(k,e-1,f,g,h):a(h,k):g||(h[h.length]=k)}return h}Ld.exports=c}var Nd=!1;function Od(){Nd||(Nd=!0,Md());return Ld.exports}d={};var Pd={exports:d};function Qd(){var a=Od();function b(b){var c=b==null?0:b.length;return c?a(b,1):[]}Pd.exports=b}var Rd=!1;function Sd(){Rd||(Rd=!0,Qd());return Pd.exports}f={};var Td={exports:f};function Ud(){function a(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}Td.exports=a}var Vd=!1;function Wd(){Vd||(Vd=!0,Ud());return Td.exports}c={};var Xd={exports:c};function Yd(){var a=Wd(),b=Math.max;function c(c,d,e){d=b(d===void 0?c.length-1:d,0);return function(){var f=arguments,g=-1,h=b(f.length-d,0),i=Array(h);while(++g<h)i[g]=f[d+g];g=-1;var j=Array(d+1);while(++g<d)j[g]=f[g];j[d]=e(i);return a(c,this,j)}}Xd.exports=c}var Zd=!1;function $d(){Zd||(Zd=!0,Yd());return Xd.exports}d={};var ae={exports:d};function be(){function a(a){return function(){return a}}ae.exports=a}var ce=!1;function de(){ce||(ce=!0,be());return ae.exports}f={};var ee={exports:f};function fe(){var a=Za(),b=function(){try{var b=a(Object,"defineProperty");b({},"",{});return b}catch(a){}}();ee.exports=b}var ge=!1;function he(){ge||(ge=!0,fe());return ee.exports}c={};var ie={exports:c};function je(){function a(a){return a}ie.exports=a}var ke=!1;function le(){ke||(ke=!0,je());return ie.exports}d={};var me={exports:d};function ne(){var a=de(),b=he(),c=le();c=b?function(c,d){return b(c,"toString",{configurable:!0,enumerable:!1,value:a(d),writable:!0})}:c;me.exports=c}var oe=!1;function pe(){oe||(oe=!0,ne());return me.exports}f={};var qe={exports:f};function re(){var a=800,b=16,c=Date.now;function d(d){var e=0,f=0;return function(){var g=c(),h=b-(g-f);f=g;if(h>0){if(++e>=a)return arguments[0]}else e=0;return d.apply(void 0,arguments)}}qe.exports=d}var se=!1;function te(){se||(se=!0,re());return qe.exports}c={};var ue={exports:c};function ve(){var a=pe(),b=te();b=b(a);ue.exports=b}var we=!1;function xe(){we||(we=!0,ve());return ue.exports}d={};var ye={exports:d};function ze(){var a=Sd(),b=$d(),c=xe();function d(d){return c(b(d,void 0,a),d+"")}ye.exports=d}var Ae=!1;function Be(){Ae||(Ae=!0,ze());return ye.exports}f={};var Ce={exports:f};function De(){var a=wd(),b=Be();b=b(a);Ce.exports=b}var Ee=!1;function Fe(){Ee||(Ee=!0,De());return Ce.exports}c={};var Ge={exports:c};function He(){function a(a,b,c){var d=-1,e=a.length;b<0&&(b=-b>e?0:e+b);c=c>e?e:c;c<0&&(c+=e);e=b>c?0:c-b>>>0;b>>>=0;c=Array(e);while(++d<e)c[d]=a[d+b];return c}Ge.exports=a}var Ie=!1;function Je(){Ie||(Ie=!0,He());return Ge.exports}d={};var Ke={exports:d};function Le(){var a=Je();function b(b,c,d){var e=b.length;d=d===void 0?e:d;return!c&&d>=e?b:a(b,c,d)}Ke.exports=b}var Me=!1;function Ne(){Me||(Me=!0,Le());return Ke.exports}f={};var Oe={exports:f};function Pe(){var a="\\ud800-\\udfff",b="\\u0300-\\u036f",c="\\ufe20-\\ufe2f",d="\\u20d0-\\u20ff";b=b+c+d;c="\\ufe0e\\ufe0f";d="\\u200d";var e=RegExp("["+d+a+b+c+"]");function f(a){return e.test(a)}Oe.exports=f}var Qe=!1;function Re(){Qe||(Qe=!0,Pe());return Oe.exports}c={};var Se={exports:c};function Te(){function a(a){return a.split("")}Se.exports=a}var Ue=!1;function Ve(){Ue||(Ue=!0,Te());return Se.exports}d={};var We={exports:d};function Xe(){var a="\\ud800-\\udfff",b="\\u0300-\\u036f",c="\\ufe20-\\ufe2f",d="\\u20d0-\\u20ff";b=b+c+d;c="\\ufe0e\\ufe0f";d="["+a+"]";b="["+b+"]";var e="\\ud83c[\\udffb-\\udfff]",f="(?:"+b+"|"+e+")";a="[^"+a+"]";var g="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",i="\\u200d";f=f+"?";c="["+c+"]?";i="(?:"+i+"(?:"+[a,g,h].join("|")+")"+c+f+")*";c=c+f+i;f="(?:"+[a+b+"?",b,g,h,d].join("|")+")";var j=RegExp(e+"(?="+e+")|"+f+c,"g");function k(a){return a.match(j)||[]}We.exports=k}var Ye=!1;function Ze(){Ye||(Ye=!0,Xe());return We.exports}f={};var $e={exports:f};function af(){var a=Ve(),b=Re(),c=Ze();function d(d){return b(d)?c(d):a(d)}$e.exports=d}var bf=!1;function cf(){bf||(bf=!0,af());return $e.exports}c={};var df={exports:c};function ef(){var a=Ne(),b=Re(),c=cf(),d=dd();function e(e){return function(f){f=d(f);var g=b(f)?c(f):void 0,h=g?g[0]:f.charAt(0);g=g?a(g,1).join(""):f.slice(1);return h[e]()+g}}df.exports=e}var ff=!1;function gf(){ff||(ff=!0,ef());return df.exports}d={};var hf={exports:d};function jf(){var a=gf();a=a("toUpperCase");hf.exports=a}var kf=!1;function lf(){kf||(kf=!0,jf());return hf.exports}f={};var mf={exports:f};function nf(){var a=dd(),b=lf();function c(c){return b(a(c).toLowerCase())}mf.exports=c}var of=!1;function pf(){of||(of=!0,nf());return mf.exports}c={};var qf={exports:c};function rf(){function a(a,b,c,d){var e=-1,f=a==null?0:a.length;d&&f&&(c=a[++e]);while(++e<f)c=b(c,a[e],e,a);return c}qf.exports=a}var sf=!1;function tf(){sf||(sf=!0,rf());return qf.exports}d={};var uf={exports:d};function vf(){function a(a){return function(b){return a==null?void 0:a[b]}}uf.exports=a}var wf=!1;function xf(){wf||(wf=!0,vf());return uf.exports}f={};var yf={exports:f};function zf(){var a=xf(),b={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"};a=a(b);yf.exports=a}var Af=!1;function S(){Af||(Af=!0,zf());return yf.exports}c={};var Bf={exports:c};function Cf(){var a=S(),b=dd(),c=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,d="\\u0300-\\u036f",e="\\ufe20-\\ufe2f",f="\\u20d0-\\u20ff";d=d+e+f;e="["+d+"]";var g=RegExp(e,"g");function h(d){d=b(d);return d&&d.replace(c,a).replace(g,"")}Bf.exports=h}var Df=!1;function Ef(){Df||(Df=!0,Cf());return Bf.exports}d={};var Ff={exports:d};function Gf(){var a=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function b(b){return b.match(a)||[]}Ff.exports=b}var Hf=!1;function If(){Hf||(Hf=!0,Gf());return Ff.exports}f={};var Jf={exports:f};function Kf(){var a=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function b(b){return a.test(b)}Jf.exports=b}var Lf=!1;function Mf(){Lf||(Lf=!0,Kf());return Jf.exports}c={};var Nf={exports:c};function Of(){var a="\\ud800-\\udfff",b="\\u0300-\\u036f",c="\\ufe20-\\ufe2f",d="\\u20d0-\\u20ff";b=b+c+d;c="\\u2700-\\u27bf";d="a-z\\xdf-\\xf6\\xf8-\\xff";var e="\\xac\\xb1\\xd7\\xf7",f="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",g="\\u2000-\\u206f",h=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",i="A-Z\\xc0-\\xd6\\xd8-\\xde",j="\\ufe0e\\ufe0f";e=e+f+g+h;f="['\u2019]";g="["+e+"]";h="["+b+"]";b="\\d+";var k="["+c+"]",l="["+d+"]";e="[^"+a+e+b+c+d+i+"]";c="\\ud83c[\\udffb-\\udfff]";d="(?:"+h+"|"+c+")";h="[^"+a+"]";c="(?:\\ud83c[\\udde6-\\uddff]){2}";a="[\\ud800-\\udbff][\\udc00-\\udfff]";i="["+i+"]";var m="\\u200d",n="(?:"+l+"|"+e+")";e="(?:"+i+"|"+e+")";var o="(?:"+f+"(?:d|ll|m|re|s|t|ve))?";f="(?:"+f+"(?:D|LL|M|RE|S|T|VE))?";d=d+"?";j="["+j+"]?";m="(?:"+m+"(?:"+[h,c,a].join("|")+")"+j+d+")*";h="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])";var p="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])";j=j+d+m;d="(?:"+[k,c,a].join("|")+")"+j;var q=RegExp([i+"?"+l+"+"+o+"(?="+[g,i,"$"].join("|")+")",e+"+"+f+"(?="+[g,i+n,"$"].join("|")+")",i+"?"+n+"+"+o,i+"+"+f,p,h,b,d].join("|"),"g");function r(a){return a.match(q)||[]}Nf.exports=r}var Pf=!1;function Qf(){Pf||(Pf=!0,Of());return Nf.exports}d={};var Rf={exports:d};function Sf(){var a=If(),b=Mf(),c=dd(),d=Qf();function e(e,f,g){e=c(e);f=g?void 0:f;return f===void 0?b(e)?d(e):a(e):e.match(f)||[]}Rf.exports=e}var Tf=!1;function Uf(){Tf||(Tf=!0,Sf());return Rf.exports}f={};var Vf={exports:f};function Wf(){var a=tf(),b=Ef(),c=Uf(),d="['\u2019]",e=RegExp(d,"g");function f(d){return function(f){return a(c(b(f).replace(e,"")),d,"")}}Vf.exports=f}var Xf=!1;function Yf(){Xf||(Xf=!0,Wf());return Vf.exports}c={};var Zf={exports:c};function $f(){var a=pf(),b=Yf();b=b(function(b,c,d){c=c.toLowerCase();return b+(d?a(c):c)});Zf.exports=b}var ag=!1;function bg(){ag||(ag=!0,$f());return Zf.exports}d={};var cg={exports:d};function dg(){var a=9007199254740991;function b(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=a}cg.exports=b}var eg=!1;function fg(){eg||(eg=!0,dg());return cg.exports}f={};var gg={exports:f};function hg(){var a=Ba(),b=fg();function c(c){return c!=null&&b(c.length)&&!a(c)}gg.exports=c}var ig=!1;function jg(){ig||(ig=!0,hg());return gg.exports}c={};var kg={exports:c};function lg(){var a=9007199254740991,b=/^(?:0|[1-9]\d*)$/;function c(c,d){var e=typeof c;d=d==null?a:d;return!!d&&(e=="number"||e!="symbol"&&b.test(c))&&c>-1&&c%1==0&&c<d}kg.exports=c}var mg=!1;function ng(){mg||(mg=!0,lg());return kg.exports}d={};var og={exports:d};function pg(){var a=Eb(),b=jg(),c=ng(),d=F();function e(e,f,g){if(!d(g))return!1;var h=typeof f;return(h=="number"?b(g)&&c(f,g.length):h=="string"&&f in g)?a(g[f],e):!1}og.exports=e}var qg=!1;function rg(){qg||(qg=!0,pg());return og.exports}f={};var sg={exports:f};function tg(){var a=F(),b=ra(),c=0/0,d=/^\s+|\s+$/g,e=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,g=/^0o[0-7]+$/i,h=parseInt;function i(i){if(typeof i=="number")return i;if(b(i))return c;if(a(i)){var j=typeof i.valueOf=="function"?i.valueOf():i;i=a(j)?j+"":j}if(typeof i!="string")return i===0?i:+i;i=i.replace(d,"");j=f.test(i);return j||g.test(i)?h(i.slice(2),j?2:8):e.test(i)?c:+i}sg.exports=i}var ug=!1;function vg(){ug||(ug=!0,tg());return sg.exports}c={};var wg={exports:c};function xg(){var a=vg(),b=1/0,c=17976931348623157e292;function d(d){if(!d)return d===0?d:0;d=a(d);if(d===b||d===-b){var e=d<0?-1:1;return e*c}return d===d?d:0}wg.exports=d}var yg=!1;function zg(){yg||(yg=!0,xg());return wg.exports}d={};var Ag={exports:d};function Bg(){var a=zg();function b(b){b=a(b);var c=b%1;return b===b?c?b-c:b:0}Ag.exports=b}var Cg=!1;function Dg(){Cg||(Cg=!0,Bg());return Ag.exports}f={};var Eg={exports:f};function Fg(){var a=Je(),b=rg(),c=Dg(),d=Math.ceil,e=Math.max;function f(f,g,h){(h?b(f,g,h):g===void 0)?g=1:g=e(c(g),0);h=f==null?0:f.length;if(!h||g<1)return[];var i=0,j=0,k=Array(d(h/g));while(i<h)k[j++]=a(f,i,i+=g);return k}Eg.exports=f}var Gg=!1;function Hg(){Gg||(Gg=!0,Fg());return Eg.exports}c={};var Ig={exports:c};function Jg(){function a(a,b,c){a===a&&(c!==void 0&&(a=a<=c?a:c),b!==void 0&&(a=a>=b?a:b));return a}Ig.exports=a}var Kg=!1;function Lg(){Kg||(Kg=!0,Jg());return Ig.exports}d={};var Mg={exports:d};function Ng(){var a=Lg(),b=vg();function c(c,d,e){e===void 0&&(e=d,d=void 0);e!==void 0&&(e=b(e),e=e===e?e:0);d!==void 0&&(d=b(d),d=d===d?d:0);return a(b(c),d,e)}Mg.exports=c}var Og=!1;function Pg(){Og||(Og=!0,Ng());return Mg.exports}f={};var Qg={exports:f};function Rg(){var a=Zb();function b(){this.__data__=new a,this.size=0}Qg.exports=b}var Sg=!1;function Tg(){Sg||(Sg=!0,Rg());return Qg.exports}c={};var Ug={exports:c};function Vg(){function a(a){var b=this.__data__;a=b["delete"](a);this.size=b.size;return a}Ug.exports=a}var T=!1;function Wg(){T||(T=!0,Vg());return Ug.exports}d={};var Xg={exports:d};function Yg(){function a(a){return this.__data__.get(a)}Xg.exports=a}var Zg=!1;function $g(){Zg||(Zg=!0,Yg());return Xg.exports}f={};var ah={exports:f};function bh(){function a(a){return this.__data__.has(a)}ah.exports=a}var ch=!1;function dh(){ch||(ch=!0,bh());return ah.exports}c={};var eh={exports:c};function fh(){var a=Zb(),b=bc(),c=Gc(),d=200;function e(e,f){var g=this.__data__;if(g instanceof a){var h=g.__data__;if(!b||h.length<d-1){h.push([e,f]);this.size=++g.size;return this}g=this.__data__=new c(h)}g.set(e,f);this.size=g.size;return this}eh.exports=e}var gh=!1;function hh(){gh||(gh=!0,fh());return eh.exports}d={};var ih={exports:d};function jh(){var a=Zb(),b=Tg(),c=Wg(),d=$g(),e=dh(),f=hh();function g(b){b=this.__data__=new a(b);this.size=b.size}g.prototype.clear=b;g.prototype["delete"]=c;g.prototype.get=d;g.prototype.has=e;g.prototype.set=f;ih.exports=g}var kh=!1;function lh(){kh||(kh=!0,jh());return ih.exports}f={};var mh={exports:f};function nh(){function a(a,b){var c=-1,d=a==null?0:a.length;while(++c<d)if(b(a[c],c,a)===!1)break;return a}mh.exports=a}var oh=!1;function ph(){oh||(oh=!0,nh());return mh.exports}c={};var qh={exports:c};function rh(){var a=he();function b(b,c,d){c=="__proto__"&&a?a(b,c,{configurable:!0,enumerable:!0,value:d,writable:!0}):b[c]=d}qh.exports=b}var sh=!1;function th(){sh||(sh=!0,rh());return qh.exports}d={};var uh={exports:d};function vh(){var a=th(),b=Eb(),c=Object.prototype,d=c.hasOwnProperty;function e(c,e,f){var g=c[e];(!(d.call(c,e)&&b(g,f))||f===void 0&&!(e in c))&&a(c,e,f)}uh.exports=e}var wh=!1;function xh(){wh||(wh=!0,vh());return uh.exports}f={};var yh={exports:f};function zh(){var a=xh(),b=th();function c(c,d,e,f){var g=!e;e||(e={});var h=-1,i=d.length;while(++h<i){var j=d[h],k=f?f(e[j],c[j],j,e,c):void 0;k===void 0&&(k=c[j]);g?b(e,j,k):a(e,j,k)}return e}yh.exports=c}var Ah=!1;function Bh(){Ah||(Ah=!0,zh());return yh.exports}c={};var Ch={exports:c};function Dh(){function a(a,b){var c=-1,d=Array(a);while(++c<a)d[c]=b(c);return d}Ch.exports=a}var Eh=!1;function Fh(){Eh||(Eh=!0,Dh());return Ch.exports}d={};var Gh={exports:d};function Hh(){function a(){return!1}Gh.exports=a}var Ih=!1;function Jh(){Ih||(Ih=!0,Hh());return Gh.exports}var Kh={},Lh={exports:Kh};function Mh(){var a=x(),b=Jh(),c=typeof Kh=="object"&&Kh&&!Kh.nodeType&&Kh,d=c&&typeof Lh=="object"&&Lh&&!Lh.nodeType&&Lh;d=d&&d.exports===c;c=d?a.Buffer:void 0;d=c?c.isBuffer:void 0;a=d||b;Lh.exports=a}var Nh=!1;function Oh(){Nh||(Nh=!0,Mh());return Lh.exports}f={};var Ph={exports:f};function Qh(){var a=ja(),b=fg(),c=na(),d="[object Arguments]",e="[object Array]",f="[object Boolean]",g="[object Date]",h="[object Error]",i="[object Function]",j="[object Map]",k="[object Number]",l="[object Object]",m="[object RegExp]",n="[object Set]",o="[object String]",p="[object WeakMap]",q="[object ArrayBuffer]",r="[object DataView]",s="[object Float32Array]",t="[object Float64Array]",u="[object Int8Array]",v="[object Int16Array]",w="[object Int32Array]",x="[object Uint8Array]",y="[object Uint8ClampedArray]",z="[object Uint16Array]",A="[object Uint32Array]",B={};B[s]=B[t]=B[u]=B[v]=B[w]=B[x]=B[y]=B[z]=B[A]=!0;B[d]=B[e]=B[q]=B[f]=B[r]=B[g]=B[h]=B[i]=B[j]=B[k]=B[l]=B[m]=B[n]=B[o]=B[p]=!1;function aa(d){return c(d)&&b(d.length)&&!!B[a(d)]}Ph.exports=aa}var Rh=!1;function Sh(){Rh||(Rh=!0,Qh());return Ph.exports}c={};var Th={exports:c};function Uh(){function a(a){return function(b){return a(b)}}Th.exports=a}var Vh=!1;function Wh(){Vh||(Vh=!0,Uh());return Th.exports}var Xh={},Yh={exports:Xh};function Zh(){var a=t(),b=typeof Xh=="object"&&Xh&&!Xh.nodeType&&Xh,c=b&&typeof Yh=="object"&&Yh&&!Yh.nodeType&&Yh;c=c&&c.exports===b;c&&a.process;b=null;Yh.exports=b}var $h=!1;function ai(){$h||($h=!0,Zh());return Yh.exports}d={};var bi={exports:d};function ci(){var a=Sh(),b=Wh(),c=ai();c=c&&c.isTypedArray;b=c?b(c):a;bi.exports=b}var di=!1;function ei(){di||(di=!0,ci());return bi.exports}f={};var fi={exports:f};function gi(){var a=Fh(),b=Gd(),c=p(),d=Oh(),e=ng(),f=ei(),g=Object.prototype,h=g.hasOwnProperty;function i(g,i){var j=c(g),k=!j&&b(g),l=!j&&!k&&d(g),m=!j&&!k&&!l&&f(g);j=j||k||l||m;k=j?a(g.length,String):[];var n=k.length;for(var o in g)(i||h.call(g,o))&&!(j&&(o=="length"||l&&(o=="offset"||o=="parent")||m&&(o=="buffer"||o=="byteLength"||o=="byteOffset")||e(o,n)))&&k.push(o);return k}fi.exports=i}var hi=!1;function ii(){hi||(hi=!0,gi());return fi.exports}c={};var ji={exports:c};function ki(){var a=Object.prototype;function b(b){var c=b&&b.constructor;c=typeof c=="function"&&c.prototype||a;return b===c}ji.exports=b}var li=!1;function mi(){li||(li=!0,ki());return ji.exports}d={};var ni={exports:d};function oi(){function a(a,b){return function(c){return a(b(c))}}ni.exports=a}var pi=!1;function qi(){pi||(pi=!0,oi());return ni.exports}f={};var ri={exports:f};function si(){var a=qi();a=a(Object.keys,Object);ri.exports=a}var ti=!1;function ui(){ti||(ti=!0,si());return ri.exports}c={};var vi={exports:c};function wi(){var a=mi(),b=ui(),c=Object.prototype,d=c.hasOwnProperty;function e(c){if(!a(c))return b(c);var e=[];for(var f in Object(c))d.call(c,f)&&f!="constructor"&&e.push(f);return e}vi.exports=e}var xi=!1;function yi(){xi||(xi=!0,wi());return vi.exports}d={};var zi={exports:d};function Ai(){var a=ii(),b=yi(),c=jg();function d(d){return c(d)?a(d):b(d)}zi.exports=d}var Bi=!1;function Ci(){Bi||(Bi=!0,Ai());return zi.exports}f={};var Di={exports:f};function Ei(){var a=Bh(),b=Ci();function c(c,d){return c&&a(d,b(d),c)}Di.exports=c}var Fi=!1;function Gi(){Fi||(Fi=!0,Ei());return Di.exports}c={};var Hi={exports:c};function Ii(){function a(a){var b=[];if(a!=null)for(a in Object(a))b.push(a);return b}Hi.exports=a}var Ji=!1;function Ki(){Ji||(Ji=!0,Ii());return Hi.exports}d={};var Li={exports:d};function Mi(){var a=F(),b=mi(),c=Ki(),d=Object.prototype,e=d.hasOwnProperty;function f(d){if(!a(d))return c(d);var f=b(d),g=[];for(var h in d)h=="constructor"&&(f||!e.call(d,h))||g.push(h);return g}Li.exports=f}var Ni=!1;function Oi(){Ni||(Ni=!0,Mi());return Li.exports}f={};var Pi={exports:f};function Qi(){var a=ii(),b=Oi(),c=jg();function d(d){return c(d)?a(d,!0):b(d)}Pi.exports=d}var Ri=!1;function Si(){Ri||(Ri=!0,Qi());return Pi.exports}c={};var Ti={exports:c};function Ui(){var a=Bh(),b=Si();function c(c,d){return c&&a(d,b(d),c)}Ti.exports=c}var Vi=!1;function Wi(){Vi||(Vi=!0,Ui());return Ti.exports}var Xi={},Yi={exports:Xi};function Zi(){var a=x(),b=typeof Xi=="object"&&Xi&&!Xi.nodeType&&Xi,c=b&&typeof Yi=="object"&&Yi&&!Yi.nodeType&&Yi;c=c&&c.exports===b;b=c?a.Buffer:void 0;var d=b?b.allocUnsafe:void 0;function e(a,b){if(b)return a.slice();b=a.length;b=d?d(b):new a.constructor(b);a.copy(b);return b}Yi.exports=e}var $i=!1;function aj(){$i||($i=!0,Zi());return Yi.exports}d={};var bj={exports:d};function cj(){function a(a,b){var c=-1,d=a.length;b||(b=Array(d));while(++c<d)b[c]=a[c];return b}bj.exports=a}var dj=!1;function ej(){dj||(dj=!0,cj());return bj.exports}f={};var fj={exports:f};function gj(){function a(a,b){var c=-1,d=a==null?0:a.length,e=0,f=[];while(++c<d){var g=a[c];b(g,c,a)&&(f[e++]=g)}return f}fj.exports=a}var hj=!1;function ij(){hj||(hj=!0,gj());return fj.exports}c={};var jj={exports:c};function kj(){function a(){return[]}jj.exports=a}var lj=!1;function mj(){lj||(lj=!0,kj());return jj.exports}d={};var nj={exports:d};function oj(){var a=ij(),b=mj(),c=Object.prototype,d=c.propertyIsEnumerable,e=Object.getOwnPropertySymbols;c=e?function(b){if(b==null)return[];b=Object(b);return a(e(b),function(a){return d.call(b,a)})}:b;nj.exports=c}var pj=!1;function qj(){pj||(pj=!0,oj());return nj.exports}f={};var rj={exports:f};function sj(){var a=Bh(),b=qj();function c(c,d){return a(c,b(c),d)}rj.exports=c}var tj=!1;function uj(){tj||(tj=!0,sj());return rj.exports}c={};var vj={exports:c};function wj(){var a=qi();a=a(Object.getPrototypeOf,Object);vj.exports=a}var xj=!1;function yj(){xj||(xj=!0,wj());return vj.exports}d={};var zj={exports:d};function Aj(){var a=Ad(),b=yj(),c=qj(),d=mj(),e=Object.getOwnPropertySymbols;e=e?function(d){var e=[];while(d)a(e,c(d)),d=b(d);return e}:d;zj.exports=e}var Bj=!1;function Cj(){Bj||(Bj=!0,Aj());return zj.exports}f={};var Dj={exports:f};function Ej(){var a=Bh(),b=Cj();function c(c,d){return a(c,b(c),d)}Dj.exports=c}var Fj=!1;function Gj(){Fj||(Fj=!0,Ej());return Dj.exports}c={};var Hj={exports:c};function Ij(){var a=Ad(),b=p();function c(c,d,e){d=d(c);return b(c)?d:a(d,e(c))}Hj.exports=c}var Jj=!1;function U(){Jj||(Jj=!0,Ij());return Hj.exports}d={};var Kj={exports:d};function V(){var a=U(),b=qj(),c=Ci();function d(d){return a(d,c,b)}Kj.exports=d}var Lj=!1;function Mj(){Lj||(Lj=!0,V());return Kj.exports}f={};var Nj={exports:f};function Oj(){var a=U(),b=Cj(),c=Si();function d(d){return a(d,c,b)}Nj.exports=d}var Pj=!1;function Qj(){Pj||(Pj=!0,Oj());return Nj.exports}c={};var Rj={exports:c};function Sj(){var a=Za(),b=x();a=a(b,"DataView");Rj.exports=a}var Tj=!1;function Uj(){Tj||(Tj=!0,Sj());return Rj.exports}d={};var Vj={exports:d};function W(){var a=Za(),b=x();a=a(b,"Promise");Vj.exports=a}var X=!1;function Wj(){X||(X=!0,W());return Vj.exports}f={};var Xj={exports:f};function Yj(){var a=Za(),b=x();a=a(b,"Set");Xj.exports=a}var Zj=!1;function $j(){Zj||(Zj=!0,Yj());return Xj.exports}c={};var ak={exports:c};function bk(){var a=Za(),b=x();a=a(b,"WeakMap");ak.exports=a}var ck=!1;function dk(){ck||(ck=!0,bk());return ak.exports}d={};var ek={exports:d};function fk(){var a=Uj(),b=bc(),c=Wj(),d=$j(),e=dk(),f=ja(),g=Na(),h="[object Map]",i="[object Object]",j="[object Promise]",k="[object Set]",l="[object WeakMap]",m="[object DataView]",n=g(a),o=g(b),p=g(c),q=g(d),r=g(e),s=f;(a&&s(new a(new ArrayBuffer(1)))!=m||b&&s(new b)!=h||c&&s(c.resolve())!=j||d&&s(new d)!=k||e&&s(new e)!=l)&&(s=function(a){var b=f(a);a=b==i?a.constructor:void 0;a=a?g(a):"";if(a)switch(a){case n:return m;case o:return h;case p:return j;case q:return k;case r:return l}return b});ek.exports=s}var gk=!1;function hk(){gk||(gk=!0,fk());return ek.exports}f={};var ik={exports:f};function jk(){var a=Object.prototype,b=a.hasOwnProperty;function c(a){var c=a.length,d=new a.constructor(c);c&&typeof a[0]=="string"&&b.call(a,"index")&&(d.index=a.index,d.input=a.input);return d}ik.exports=c}var kk=!1;function lk(){kk||(kk=!0,jk());return ik.exports}c={};var mk={exports:c};function nk(){var a=x();a=a.Uint8Array;mk.exports=a}var ok=!1;function Y(){ok||(ok=!0,nk());return mk.exports}d={};var pk={exports:d};function qk(){var a=Y();function b(b){var c=new b.constructor(b.byteLength);new a(c).set(new a(b));return c}pk.exports=b}var rk=!1;function sk(){rk||(rk=!0,qk());return pk.exports}f={};var Z={exports:f};function tk(){var a=sk();function b(b,c){c=c?a(b.buffer):b.buffer;return new b.constructor(c,b.byteOffset,b.byteLength)}Z.exports=b}var uk=!1;function vk(){uk||(uk=!0,tk());return Z.exports}c={};var wk={exports:c};function xk(){var a=/\w*$/;function b(b){var c=new b.constructor(b.source,a.exec(b));c.lastIndex=b.lastIndex;return c}wk.exports=b}var yk=!1;function zk(){yk||(yk=!0,xk());return wk.exports}d={};var Ak={exports:d};function Bk(){var a=B();a=a?a.prototype:void 0;var b=a?a.valueOf:void 0;function c(a){return b?Object(b.call(a)):{}}Ak.exports=c}var Ck=!1;function Dk(){Ck||(Ck=!0,Bk());return Ak.exports}f={};var Ek={exports:f};function Fk(){var a=sk();function b(b,c){c=c?a(b.buffer):b.buffer;return new b.constructor(c,b.byteOffset,b.length)}Ek.exports=b}var $=!1;function Gk(){$||($=!0,Fk());return Ek.exports}c={};var Hk={exports:c};function Ik(){var a=sk(),b=vk(),c=zk(),d=Dk(),e=Gk(),f="[object Boolean]",g="[object Date]",h="[object Map]",i="[object Number]",j="[object RegExp]",k="[object Set]",l="[object String]",m="[object Symbol]",n="[object ArrayBuffer]",o="[object DataView]",p="[object Float32Array]",q="[object Float64Array]",r="[object Int8Array]",s="[object Int16Array]",t="[object Int32Array]",u="[object Uint8Array]",v="[object Uint8ClampedArray]",w="[object Uint16Array]",x="[object Uint32Array]";function y(y,z,A){var B=y.constructor;switch(z){case n:return a(y);case f:case g:return new B(+y);case o:return b(y,A);case p:case q:case r:case s:case t:case u:case v:case w:case x:return e(y,A);case h:return new B;case i:case l:return new B(y);case j:return c(y);case k:return new B;case m:return d(y)}}Hk.exports=y}var Jk=!1;function Kk(){Jk||(Jk=!0,Ik());return Hk.exports}d={};var Lk={exports:d};function Mk(){var a=F(),b=Object.create,c=function(){function c(){}return function(d){if(!a(d))return{};if(b)return b(d);c.prototype=d;d=new c;c.prototype=void 0;return d}}();Lk.exports=c}var Nk=!1;function Ok(){Nk||(Nk=!0,Mk());return Lk.exports}f={};var Pk={exports:f};function Qk(){var a=Ok(),b=yj(),c=mi();function d(d){return typeof d.constructor=="function"&&!c(d)?a(b(d)):{}}Pk.exports=d}var Rk=!1;function Sk(){Rk||(Rk=!0,Qk());return Pk.exports}c={};var Tk={exports:c};function Uk(){var a=hk(),b=na(),c="[object Map]";function d(d){return b(d)&&a(d)==c}Tk.exports=d}var Vk=!1;function Wk(){Vk||(Vk=!0,Uk());return Tk.exports}d={};var Xk={exports:d};function Yk(){var a=Wk(),b=Wh(),c=ai();c=c&&c.isMap;b=c?b(c):a;Xk.exports=b}var Zk=!1;function $k(){Zk||(Zk=!0,Yk());return Xk.exports}f={};var al={exports:f};function bl(){var a=hk(),b=na(),c="[object Set]";function d(d){return b(d)&&a(d)==c}al.exports=d}var cl=!1;function dl(){cl||(cl=!0,bl());return al.exports}c={};var el={exports:c};function fl(){var a=dl(),b=Wh(),c=ai();c=c&&c.isSet;b=c?b(c):a;el.exports=b}var gl=!1;function hl(){gl||(gl=!0,fl());return el.exports}d={};var il={exports:d};function jl(){var a=lh(),b=ph(),c=xh(),d=Gi(),e=Wi(),f=aj(),g=ej(),h=uj(),i=Gj(),j=Mj(),k=Qj(),l=hk(),m=lk(),n=Kk(),o=Sk(),q=p(),r=Oh(),s=$k(),t=F(),u=hl(),v=Ci(),w=1,x=2,y=4,z="[object Arguments]",A="[object Array]",B="[object Boolean]",aa="[object Date]",ba="[object Error]",ca="[object Function]",da="[object GeneratorFunction]",ea="[object Map]",C="[object Number]",fa="[object Object]",ga="[object RegExp]",ha="[object Set]",ia="[object String]",D="[object Symbol]",ja="[object WeakMap]",ka="[object ArrayBuffer]",la="[object DataView]",ma="[object Float32Array]",na="[object Float64Array]",oa="[object Int8Array]",pa="[object Int16Array]",qa="[object Int32Array]",ra="[object Uint8Array]",sa="[object Uint8ClampedArray]",ta="[object Uint16Array]",ua="[object Uint32Array]",E={};E[z]=E[A]=E[ka]=E[la]=E[B]=E[aa]=E[ma]=E[na]=E[oa]=E[pa]=E[qa]=E[ea]=E[C]=E[fa]=E[ga]=E[ha]=E[ia]=E[D]=E[ra]=E[sa]=E[ta]=E[ua]=!0;E[ba]=E[ca]=E[ja]=!1;function va(p,A,B,aa,ba,ea){var C,ga=A&w,ha=A&x,ia=A&y;B&&(C=ba?B(p,aa,ba,ea):B(p));if(C!==void 0)return C;if(!t(p))return p;aa=q(p);if(aa){C=m(p);if(!ga)return g(p,C)}else{var D=l(p),ja=D==ca||D==da;if(r(p))return f(p,ga);if(D==fa||D==z||ja&&!ba){C=ha||ja?{}:o(p);if(!ga)return ha?i(p,e(C,p)):h(p,d(C,p))}else{if(!E[D])return ba?p:{};C=n(p,D,ga)}}ea||(ea=new a);ja=ea.get(p);if(ja)return ja;ea.set(p,C);u(p)?p.forEach(function(a){C.add(va(a,A,B,a,p,ea))}):s(p)&&p.forEach(function(b,a){C.set(a,va(b,A,B,a,p,ea))});ba=ia?ha?k:j:ha?keysIn:v;var ka=aa?void 0:ba(p);b(ka||p,function(b,a){ka&&(a=b,b=p[a]),c(C,a,va(b,A,B,a,p,ea))});return C}il.exports=va}var kl=!1;function ll(){kl||(kl=!0,jl());return il.exports}f={};var ml={exports:f};function nl(){var a=ll(),b=4;function c(c){return a(c,b)}ml.exports=c}var ol=!1;function pl(){ol||(ol=!0,nl());return ml.exports}c={};var ql={exports:c};function rl(){var a=ll(),b=1,c=4;function d(d){return a(d,b|c)}ql.exports=d}var sl=!1;function tl(){sl||(sl=!0,rl());return ql.exports}d={};var ul={exports:d};function vl(){var a=x(),b=function(){return a.Date.now()};ul.exports=b}var wl=!1;function xl(){wl||(wl=!0,vl());return ul.exports}f={};var yl={exports:f};function zl(){var a=F(),b=xl(),c=vg(),d="Expected a function",e=Math.max,f=Math.min;function g(g,h,i){var j,k,l,m,n,o,p=0,q=!1,r=!1,s=!0;if(typeof g!="function")throw new TypeError(d);h=c(h)||0;a(i)&&(q=!!i.leading,r="maxWait"in i,l=r?e(c(i.maxWait)||0,h):l,s="trailing"in i?!!i.trailing:s);function t(a){var b=j,c=k;j=k=void 0;p=a;m=g.apply(c,b);return m}function u(a){p=a;n=setTimeout(x,h);return q?t(a):m}function v(a){var b=a-o;a=a-p;b=h-b;return r?f(b,l-a):b}function w(a){var b=a-o;a=a-p;return o===void 0||b>=h||b<0||r&&a>=l}function x(){var a=b();if(w(a))return y(a);n=setTimeout(x,v(a))}function y(a){n=void 0;if(s&&j)return t(a);j=k=void 0;return m}function z(){n!==void 0&&clearTimeout(n),p=0,j=o=k=n=void 0}function A(){return n===void 0?m:y(b())}function B(){var a=b(),c=w(a);j=arguments;k=this;o=a;if(c){if(n===void 0)return u(o);if(r){clearTimeout(n);n=setTimeout(x,h);return t(o)}}n===void 0&&(n=setTimeout(x,h));return m}B.cancel=z;B.flush=A;return B}yl.exports=g}var Al=!1;function Bl(){Al||(Al=!0,zl());return yl.exports}c={};var Cl={exports:c};function Dl(){var a=le(),b=$d(),c=xe();function d(d,e){return c(b(d,e,a),d+"")}Cl.exports=d}var El=!1;function Fl(){El||(El=!0,Dl());return Cl.exports}d={};var Gl={exports:d};function Hl(){var a=Fl(),b=Eb(),c=rg(),d=Si(),e=Object.prototype,f=e.hasOwnProperty;a=a(function(a,g){a=Object(a);var h=-1,i=g.length,j=i>2?g[2]:void 0;j&&c(g[0],g[1],j)&&(i=1);while(++h<i){j=g[h];var k=d(j),l=-1,m=k.length;while(++l<m){var n=k[l],o=a[n];(o===void 0||b(o,e[n])&&!f.call(a,n))&&(a[n]=j[n])}}return a});Gl.exports=a}var Il=!1;function Jl(){Il||(Il=!0,Hl());return Gl.exports}f={};var Kl={exports:f};function Ll(){var a="__lodash_hash_undefined__";function b(b){this.__data__.set(b,a);return this}Kl.exports=b}var Ml=!1;function Nl(){Ml||(Ml=!0,Ll());return Kl.exports}c={};var Ol={exports:c};function Pl(){function a(a){return this.__data__.has(a)}Ol.exports=a}var Ql=!1;function Rl(){Ql||(Ql=!0,Pl());return Ol.exports}d={};var Sl={exports:d};function Tl(){var a=Gc(),b=Nl(),c=Rl();function d(b){var c=-1,d=b==null?0:b.length;this.__data__=new a;while(++c<d)this.add(b[c])}d.prototype.add=d.prototype.push=b;d.prototype.has=c;Sl.exports=d}var Ul=!1;function Vl(){Ul||(Ul=!0,Tl());return Sl.exports}f={};var Wl={exports:f};function Xl(){function a(a,b,c,d){var e=a.length;c=c+(d?1:-1);while(d?c--:++c<e)if(b(a[c],c,a))return c;return-1}Wl.exports=a}var Yl=!1;function Zl(){Yl||(Yl=!0,Xl());return Wl.exports}c={};var $l={exports:c};function am(){function a(a){return a!==a}$l.exports=a}var bm=!1;function cm(){bm||(bm=!0,am());return $l.exports}d={};var dm={exports:d};function em(){function a(a,b,c){c=c-1;var d=a.length;while(++c<d)if(a[c]===b)return c;return-1}dm.exports=a}var fm=!1;function gm(){fm||(fm=!0,em());return dm.exports}f={};var hm={exports:f};function im(){var a=Zl(),b=cm(),c=gm();function d(d,e,f){return e===e?c(d,e,f):a(d,b,f)}hm.exports=d}var jm=!1;function km(){jm||(jm=!0,im());return hm.exports}c={};var lm={exports:c};function mm(){var a=km();function b(b,c){var d=b==null?0:b.length;return!!d&&a(b,c,0)>-1}lm.exports=b}var nm=!1;function om(){nm||(nm=!0,mm());return lm.exports}d={};var pm={exports:d};function qm(){function a(a,b,c){var d=-1,e=a==null?0:a.length;while(++d<e)if(c(b,a[d]))return!0;return!1}pm.exports=a}var rm=!1;function sm(){rm||(rm=!0,qm());return pm.exports}f={};var tm={exports:f};function um(){function a(a,b){return a.has(b)}tm.exports=a}var vm=!1;function wm(){vm||(vm=!0,um());return tm.exports}c={};var xm={exports:c};function ym(){var a=Vl(),b=om(),c=sm(),d=Wc(),e=Wh(),f=wm(),g=200;function h(h,i,j,k){var l=-1,m=b,n=!0,o=h.length,p=[],q=i.length;if(!o)return p;j&&(i=d(i,e(j)));k?(m=c,n=!1):i.length>=g&&(m=f,n=!1,i=new a(i));outer:while(++l<o){var r=h[l],s=j==null?r:j(r);r=k||r!==0?r:0;if(n&&s===s){var t=q;while(t--)if(i[t]===s)continue outer;p.push(r)}else m(i,s,k)||p.push(r)}return p}xm.exports=h}var zm=!1;function Am(){zm||(zm=!0,ym());return xm.exports}d={};var Bm={exports:d};function Cm(){var a=jg(),b=na();function c(c){return b(c)&&a(c)}Bm.exports=c}var Dm=!1;function Em(){Dm||(Dm=!0,Cm());return Bm.exports}f={};var Fm={exports:f};function Gm(){var a=Am(),b=Od(),c=Fl(),d=Em();c=c(function(c,e){return d(c)?a(c,b(e,1,d,!0)):[]});Fm.exports=c}var Hm=!1;function Im(){Hm||(Hm=!0,Gm());return Fm.exports}c={};var Jm={exports:c};function Km(){function a(a){return function(b,c,d){var e=-1,f=Object(b);d=d(b);var g=d.length;while(g--){var h=d[a?g:++e];if(c(f[h],h,f)===!1)break}return b}}Jm.exports=a}var Lm=!1;function Mm(){Lm||(Lm=!0,Km());return Jm.exports}d={};var Nm={exports:d};function Om(){var a=Mm();a=a();Nm.exports=a}var Pm=!1;function Qm(){Pm||(Pm=!0,Om());return Nm.exports}f={};var Rm={exports:f};function Sm(){var a=Qm(),b=Ci();function c(c,d){return c&&a(c,d,b)}Rm.exports=c}var Tm=!1;function Um(){Tm||(Tm=!0,Sm());return Rm.exports}c={};var Vm={exports:c};function Wm(){var a=jg();function b(b,c){return function(d,e){if(d==null)return d;if(!a(d))return b(d,e);var f=d.length,g=c?f:-1,h=Object(d);while(c?g--:++g<f)if(e(h[g],g,h)===!1)break;return d}}Vm.exports=b}var Xm=!1;function Ym(){Xm||(Xm=!0,Wm());return Vm.exports}d={};var Zm={exports:d};function $m(){var a=Um(),b=Ym();b=b(a);Zm.exports=b}var an=!1;function bn(){an||(an=!0,$m());return Zm.exports}f={};var cn={exports:f};function dn(){var a=le();function b(b){return typeof b=="function"?b:a}cn.exports=b}var en=!1;function fn(){en||(en=!0,dn());return cn.exports}c={};var gn={exports:c};function hn(){var a=ph(),b=bn(),c=fn(),d=p();function e(e,f){var g=d(e)?a:b;return g(e,c(f))}gn.exports=e}var jn=!1;function kn(){jn||(jn=!0,hn());return gn.exports}d={};var ln={exports:d};function mn(){ln.exports=kn()}var nn=!1;function on(){nn||(nn=!0,mn());return ln.exports}f={};var pn={exports:f};function qn(){function a(a,b){var c=-1,d=a==null?0:a.length;while(++c<d)if(!b(a[c],c,a))return!1;return!0}pn.exports=a}var rn=!1;function sn(){rn||(rn=!0,qn());return pn.exports}c={};var tn={exports:c};function un(){var a=bn();function b(b,c){var d=!0;a(b,function(b,e,a){d=!!c(b,e,a);return d});return d}tn.exports=b}var vn=!1;function wn(){vn||(vn=!0,un());return tn.exports}d={};var xn={exports:d};function yn(){function a(a,b){var c=-1,d=a==null?0:a.length;while(++c<d)if(b(a[c],c,a))return!0;return!1}xn.exports=a}var zn=!1;function An(){zn||(zn=!0,yn());return xn.exports}f={};var Bn={exports:f};function Cn(){var a=Vl(),b=An(),c=wm(),d=1,e=2;function f(f,g,h,i,j,k){var l=h&d,m=f.length,n=g.length;if(m!=n&&!(l&&n>m))return!1;n=k.get(f);if(n&&k.get(g))return n==g;n=-1;var o=!0,p=h&e?new a:void 0;k.set(f,g);k.set(g,f);while(++n<m){var q=f[n],r=g[n];if(i)var s=l?i(r,q,n,g,f,k):i(q,r,n,f,g,k);if(s!==void 0){if(s)continue;o=!1;break}if(p){if(!b(g,function(a,b){if(!c(p,b)&&(q===a||j(q,a,h,i,k)))return p.push(b)})){o=!1;break}}else if(!(q===r||j(q,r,h,i,k))){o=!1;break}}k["delete"](f);k["delete"](g);return o}Bn.exports=f}var Dn=!1;function En(){Dn||(Dn=!0,Cn());return Bn.exports}c={};var Fn={exports:c};function Gn(){function a(a){var b=-1,c=Array(a.size);a.forEach(function(a,d){c[++b]=[d,a]});return c}Fn.exports=a}var Hn=!1;function In(){Hn||(Hn=!0,Gn());return Fn.exports}d={};var Jn={exports:d};function Kn(){function a(a){var b=-1,c=Array(a.size);a.forEach(function(a){c[++b]=a});return c}Jn.exports=a}var Ln=!1;function Mn(){Ln||(Ln=!0,Kn());return Jn.exports}f={};var Nn={exports:f};function On(){var a=B(),b=Y(),c=Eb(),d=En(),e=In(),f=Mn(),g=1,h=2,i="[object Boolean]",j="[object Date]",k="[object Error]",l="[object Map]",m="[object Number]",n="[object RegExp]",o="[object Set]",p="[object String]",q="[object Symbol]",r="[object ArrayBuffer]",s="[object DataView]";a=a?a.prototype:void 0;var t=a?a.valueOf:void 0;function u(a,u,v,w,x,y,z){switch(v){case s:if(a.byteLength!=u.byteLength||a.byteOffset!=u.byteOffset)return!1;a=a.buffer;u=u.buffer;case r:return a.byteLength!=u.byteLength||!y(new b(a),new b(u))?!1:!0;case i:case j:case m:return c(+a,+u);case k:return a.name==u.name&&a.message==u.message;case n:case p:return a==u+"";case l:var A=e;case o:v=w&g;A||(A=f);if(a.size!=u.size&&!v)return!1;v=z.get(a);if(v)return v==u;w|=h;z.set(a,u);v=d(A(a),A(u),w,x,y,z);z["delete"](a);return v;case q:if(t)return t.call(a)==t.call(u)}return!1}Nn.exports=u}var Pn=!1;function Qn(){Pn||(Pn=!0,On());return Nn.exports}c={};var Rn={exports:c};function Sn(){var a=Mj(),b=1,c=Object.prototype,d=c.hasOwnProperty;function e(c,e,f,g,h,i){var j=f&b,k=a(c),l=k.length,m=a(e);m=m.length;if(l!=m&&!j)return!1;m=l;while(m--){var n=k[m];if(!(j?n in e:d.call(e,n)))return!1}var o=i.get(c);if(o&&i.get(e))return o==e;o=!0;i.set(c,e);i.set(e,c);var p=j;while(++m<l){n=k[m];var q=c[n],r=e[n];if(g)var s=j?g(r,q,n,e,c,i):g(q,r,n,c,e,i);if(!(s===void 0?q===r||h(q,r,f,g,i):s)){o=!1;break}p||(p=n=="constructor")}if(o&&!p){q=c.constructor;r=e.constructor;q!=r&&"constructor"in c&&"constructor"in e&&!(typeof q=="function"&&q instanceof q&&typeof r=="function"&&r instanceof r)&&(o=!1)}i["delete"](c);i["delete"](e);return o}Rn.exports=e}var Tn=!1;function Un(){Tn||(Tn=!0,Sn());return Rn.exports}d={};var Vn={exports:d};function Wn(){var a=lh(),b=En(),c=Qn(),d=Un(),e=hk(),f=p(),g=Oh(),h=ei(),i=1,j="[object Arguments]",k="[object Array]",l="[object Object]",m=Object.prototype,n=m.hasOwnProperty;function o(m,o,p,q,r,s){var t=f(m),u=f(o),v=t?k:e(m);u=u?k:e(o);v=v==j?l:v;u=u==j?l:u;var w=v==l,x=u==l;u=v==u;if(u&&g(m)){if(!g(o))return!1;t=!0;w=!1}if(u&&!w){s||(s=new a);return t||h(m)?b(m,o,p,q,r,s):c(m,o,v,p,q,r,s)}if(!(p&i)){t=w&&n.call(m,"__wrapped__");v=x&&n.call(o,"__wrapped__");if(t||v){w=t?m.value():m;x=v?o.value():o;s||(s=new a);return r(w,x,p,q,s)}}if(!u)return!1;s||(s=new a);return d(m,o,p,q,r,s)}Vn.exports=o}var Xn=!1;function Yn(){Xn||(Xn=!0,Wn());return Vn.exports}f={};var Zn={exports:f};function $n(){var a=Yn(),b=na();function c(d,e,f,g,h){if(d===e)return!0;return d==null||e==null||!b(d)&&!b(e)?d!==d&&e!==e:a(d,e,f,g,c,h)}Zn.exports=c}var ao=!1;function bo(){ao||(ao=!0,$n());return Zn.exports}c={};var co={exports:c};function eo(){var a=lh(),b=bo(),c=1,d=2;function e(e,f,g,h){var i=g.length,j=i,k=!h;if(e==null)return!j;e=Object(e);while(i--){var l=g[i];if(k&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}while(++i<j){l=g[i];var m=l[0],n=e[m],o=l[1];if(k&&l[2]){if(n===void 0&&!(m in e))return!1}else{l=new a;if(h)var p=h(n,o,m,e,f,l);if(!(p===void 0?b(o,n,c|d,h,l):p))return!1}}return!0}co.exports=e}var fo=!1;function go(){fo||(fo=!0,eo());return co.exports}d={};var ho={exports:d};function io(){var a=F();function b(b){return b===b&&!a(b)}ho.exports=b}var jo=!1;function ko(){jo||(jo=!0,io());return ho.exports}f={};var lo={exports:f};function mo(){var a=ko(),b=Ci();function c(c){var d=b(c),e=d.length;while(e--){var f=d[e],g=c[f];d[e]=[f,g,a(g)]}return d}lo.exports=c}var no=!1;function oo(){no||(no=!0,mo());return lo.exports}c={};var po={exports:c};function qo(){function a(a,b){return function(c){return c==null?!1:c[a]===b&&(b!==void 0||a in Object(c))}}po.exports=a}var ro=!1;function so(){ro||(ro=!0,qo());return po.exports}d={};var to={exports:d};function uo(){var a=go(),b=oo(),c=so();function d(d){var e=b(d);return e.length==1&&e[0][2]?c(e[0][0],e[0][1]):function(b){return b===d||a(b,d,e)}}to.exports=d}var vo=!1;function wo(){vo||(vo=!0,uo());return to.exports}f={};var xo={exports:f};function yo(){function a(a,b){return a!=null&&b in Object(a)}xo.exports=a}var zo=!1;function Ao(){zo||(zo=!0,yo());return xo.exports}c={};var Bo={exports:c};function Co(){var a=hd(),b=Gd(),c=p(),d=ng(),e=fg(),f=P();function g(g,h,i){h=a(h,g);var j=-1,k=h.length,l=!1;while(++j<k){var m=f(h[j]);if(!(l=g!=null&&i(g,m)))break;g=g[m]}if(l||++j!=k)return l;k=g==null?0:g.length;return!!k&&e(k)&&d(m,k)&&(c(g)||b(g))}Bo.exports=g}var Do=!1;function Eo(){Do||(Do=!0,Co());return Bo.exports}d={};var Fo={exports:d};function Go(){var a=Ao(),b=Eo();function c(c,d){return c!=null&&b(c,d,a)}Fo.exports=c}var Ho=!1;function Io(){Ho||(Ho=!0,Go());return Fo.exports}f={};var Jo={exports:f};function Ko(){var a=bo(),b=sd(),c=Io(),d=E(),e=ko(),f=so(),g=P(),h=1,i=2;function j(j,k){return d(j)&&e(k)?f(g(j),k):function(d){var e=b(d,j);return e===void 0&&e===k?c(d,j):a(k,e,h|i)}}Jo.exports=j}var Lo=!1;function Mo(){Lo||(Lo=!0,Ko());return Jo.exports}c={};var No={exports:c};function Oo(){function a(a){return function(b){return b==null?void 0:b[a]}}No.exports=a}var Po=!1;function Qo(){Po||(Po=!0,Oo());return No.exports}d={};var Ro={exports:d};function So(){var a=od();function b(b){return function(c){return a(c,b)}}Ro.exports=b}var To=!1;function Uo(){To||(To=!0,So());return Ro.exports}f={};var Vo={exports:f};function Wo(){var a=Qo(),b=Uo(),c=E(),d=P();function e(e){return c(e)?a(d(e)):b(e)}Vo.exports=e}var Xo=!1;function Yo(){Xo||(Xo=!0,Wo());return Vo.exports}c={};var Zo={exports:c};function $o(){var a=wo(),b=Mo(),c=le(),d=p(),e=Yo();function f(f){if(typeof f=="function")return f;if(f==null)return c;return typeof f=="object"?d(f)?b(f[0],f[1]):a(f):e(f)}Zo.exports=f}var ap=!1;function bp(){ap||(ap=!0,$o());return Zo.exports}d={};var cp={exports:d};function dp(){var a=sn(),b=wn(),c=bp(),d=p(),e=rg();function f(f,g,h){var i=d(f)?a:b;h&&e(f,g,h)&&(g=void 0);return i(f,c(g,3))}cp.exports=f}var ep=!1;function fp(){ep||(ep=!0,dp());return cp.exports}f={};var gp={exports:f};function hp(){var a=bn();function b(b,c){var d=[];a(b,function(b,e,a){c(b,e,a)&&d.push(b)});return d}gp.exports=b}var ip=!1;function jp(){ip||(ip=!0,hp());return gp.exports}c={};var kp={exports:c};function lp(){var a=ij(),b=jp(),c=bp(),d=p();function e(e,f){var g=d(e)?a:b;return g(e,c(f,3))}kp.exports=e}var mp=!1;function np(){mp||(mp=!0,lp());return kp.exports}d={};var op={exports:d};function pp(){var a=bp(),b=jg(),c=Ci();function d(d){return function(e,f,g){var h=Object(e);if(!b(e)){var i=a(f,3);e=c(e);f=function(a){return i(h[a],a,h)}}f=d(e,f,g);return f>-1?h[i?e[f]:f]:void 0}}op.exports=d}var qp=!1;function rp(){qp||(qp=!0,pp());return op.exports}f={};var sp={exports:f};function tp(){var a=Zl(),b=bp(),c=Dg(),d=Math.max;function e(e,f,g){var h=e==null?0:e.length;if(!h)return-1;g=g==null?0:c(g);g<0&&(g=d(h+g,0));return a(e,b(f,3),g)}sp.exports=e}var up=!1;function vp(){up||(up=!0,tp());return sp.exports}c={};var wp={exports:c};function xp(){var a=rp(),b=vp();a=a(b);wp.exports=a}var yp=!1;function zp(){yp||(yp=!0,xp());return wp.exports}d={};var Ap={exports:d};function Bp(){var a=bn(),b=jg();function c(c,d){var e=-1,f=b(c)?Array(c.length):[];a(c,function(b,c,a){f[++e]=d(b,c,a)});return f}Ap.exports=c}var Cp=!1;function Dp(){Cp||(Cp=!0,Bp());return Ap.exports}f={};var Ep={exports:f};function Fp(){var a=Wc(),b=bp(),c=Dp(),d=p();function e(e,f){var g=d(e)?a:c;return g(e,b(f,3))}Ep.exports=e}var Gp=!1;function Hp(){Gp||(Gp=!0,Fp());return Ep.exports}c={};var Ip={exports:c};function Jp(){var a=Od(),b=Hp();function c(c,d){return a(b(c,d),1)}Ip.exports=c}var Kp=!1;function Lp(){Kp||(Kp=!0,Jp());return Ip.exports}d={};var Mp={exports:d};function Np(){var a=Qm(),b=fn(),c=Si();function d(d,e){return d==null?d:a(d,b(e),c)}Mp.exports=d}var Op=!1;function Pp(){Op||(Op=!0,Np());return Mp.exports}f={};var Qp={exports:f};function Rp(){var a=Object.prototype,b=a.hasOwnProperty;function c(a,c){return a!=null&&b.call(a,c)}Qp.exports=c}var Sp=!1;function Tp(){Sp||(Sp=!0,Rp());return Qp.exports}c={};var Up={exports:c};function Vp(){var a=Tp(),b=Eo();function c(c,d){return c!=null&&b(c,d,a)}Up.exports=c}var Wp=!1;function Xp(){Wp||(Wp=!0,Vp());return Up.exports}d={};var Yp={exports:d};function Zp(){var a=Math.max,b=Math.min;function c(c,d,e){return c>=b(d,e)&&c<a(d,e)}Yp.exports=c}var $p=!1;function aq(){$p||($p=!0,Zp());return Yp.exports}f={};var bq={exports:f};function cq(){var a=aq(),b=zg(),c=vg();function d(d,e,f){e=b(e);f===void 0?(f=e,e=0):f=b(f);d=c(d);return a(d,e,f)}bq.exports=d}var dq=!1;function eq(){dq||(dq=!0,cq());return bq.exports}c={};var fq={exports:c};function gq(){var a=Vl(),b=om(),c=sm(),d=Wc(),e=Wh(),f=wm(),g=Math.min;function h(h,i,j){var k=j?c:b,l=h[0].length,m=h.length,n=m,o=Array(m),p=Infinity,q=[];while(n--){var r=h[n];n&&i&&(r=d(r,e(i)));p=g(r.length,p);o[n]=!j&&(i||l>=120&&r.length>=120)?new a(n&&r):void 0}r=h[0];var s=-1,t=o[0];outer:while(++s<l&&q.length<p){var u=r[s],v=i?i(u):u;u=j||u!==0?u:0;if(!(t?f(t,v):k(q,v,j))){n=m;while(--n){var w=o[n];if(!(w?f(w,v):k(h[n],v,j)))continue outer}t&&t.push(v);q.push(u)}}return q}fq.exports=h}var hq=!1;function iq(){hq||(hq=!0,gq());return fq.exports}d={};var jq={exports:d};function kq(){var a=Em();function b(b){return a(b)?b:[]}jq.exports=b}var lq=!1;function mq(){lq||(lq=!0,kq());return jq.exports}f={};var nq={exports:f};function oq(){var a=Wc(),b=iq(),c=Fl(),d=mq();c=c(function(c){var e=a(c,d);return e.length&&e[0]===c[0]?b(e):[]});nq.exports=c}var pq=!1;function qq(){pq||(pq=!0,oq());return nq.exports}c={};var rq={exports:c};function sq(){var a=yi(),b=hk(),c=Gd(),d=p(),e=jg(),f=Oh(),g=mi(),h=ei(),i="[object Map]",j="[object Set]",k=Object.prototype,l=k.hasOwnProperty;function m(k){if(k==null)return!0;if(e(k)&&(d(k)||typeof k=="string"||typeof k.splice=="function"||f(k)||h(k)||c(k)))return!k.length;var m=b(k);if(m==i||m==j)return!k.size;if(g(k))return!a(k).length;for(m in k)if(l.call(k,m))return!1;return!0}rq.exports=m}var tq=!1;function uq(){tq||(tq=!0,sq());return rq.exports}d={};var vq={exports:d};function wq(){var a=bo();function b(b,c){return a(b,c)}vq.exports=b}var xq=!1;function yq(){xq||(xq=!0,wq());return vq.exports}f={};var zq={exports:f};function Aq(){var a=ja(),b=na(),c="[object Number]";function d(d){return typeof d=="number"||b(d)&&a(d)==c}zq.exports=d}var Bq=!1;function Cq(){Bq||(Bq=!0,Aq());return zq.exports}c={};var Dq={exports:c};function Eq(){var a=Cq();function b(b){return a(b)&&b!=+b}Dq.exports=b}var Fq=!1;function Gq(){Fq||(Fq=!0,Eq());return Dq.exports}d={};var Hq={exports:d};function Iq(){function a(a){return a==null}Hq.exports=a}var Jq=!1;function Kq(){Jq||(Jq=!0,Iq());return Hq.exports}f={};var Lq={exports:f};function Mq(){var a=ja(),b=yj(),c=na(),d="[object Object]",e=Function.prototype,f=Object.prototype,g=e.toString,h=f.hasOwnProperty,i=g.call(Object);function j(e){if(!c(e)||a(e)!=d)return!1;e=b(e);if(e===null)return!0;e=h.call(e,"constructor")&&e.constructor;return typeof e=="function"&&e instanceof e&&g.call(e)==i}Lq.exports=j}var Nq=!1;function Oq(){Nq||(Nq=!0,Mq());return Lq.exports}c={};var Pq={exports:c};function Qq(){var a=ja(),b=p(),c=na(),d="[object String]";function e(e){return typeof e=="string"||!b(e)&&c(e)&&a(e)==d}Pq.exports=e}var Rq=!1;function Sq(){Rq||(Rq=!0,Qq());return Pq.exports}d={};var Tq={exports:d};function Uq(){function a(a){return a===void 0}Tq.exports=a}var Vq=!1;function Wq(){Vq||(Vq=!0,Uq());return Tq.exports}f={};var Xq={exports:f};function Yq(){function a(a){var b=a==null?0:a.length;return b?a[b-1]:void 0}Xq.exports=a}var Zq=!1;function $q(){Zq||(Zq=!0,Yq());return Xq.exports}c={};var ar={exports:c};function br(){var a=th(),b=Um(),c=bp();function d(d,e){var f={};e=c(e,3);b(d,function(c,d,b){a(f,e(c,d,b),c)});return f}ar.exports=d}var cr=!1;function dr(){cr||(cr=!0,br());return ar.exports}d={};var er={exports:d};function fr(){var a=th(),b=Um(),c=bp();function d(d,e){var f={};e=c(e,3);b(d,function(c,d,b){a(f,d,e(c,d,b))});return f}er.exports=d}var gr=!1;function hr(){gr||(gr=!0,fr());return er.exports}f={};var ir={exports:f};function jr(){var a=ra();function b(b,c,d){var e=-1,f=b.length;while(++e<f){var g=b[e],h=c(g);if(h!=null&&(i===void 0?h===h&&!a(h):d(h,i)))var i=h,j=g}return j}ir.exports=b}var kr=!1;function lr(){kr||(kr=!0,jr());return ir.exports}c={};var mr={exports:c};function nr(){function a(a,b){return a>b}mr.exports=a}var or=!1;function pr(){or||(or=!0,nr());return mr.exports}d={};var qr={exports:d};function rr(){var a=lr(),b=pr(),c=le();function d(d){return d&&d.length?a(d,c,b):void 0}qr.exports=d}var sr=!1;function tr(){sr||(sr=!0,rr());return qr.exports}f={};var ur={exports:f};function vr(){var a=lr(),b=pr(),c=bp();function d(d,e){return d&&d.length?a(d,c(e,2),b):void 0}ur.exports=d}var wr=!1;function xr(){wr||(wr=!0,vr());return ur.exports}c={};var yr={exports:c};function zr(){var a=th(),b=Eb();function c(c,d,e){(e!==void 0&&!b(c[d],e)||e===void 0&&!(d in c))&&a(c,d,e)}yr.exports=c}var Ar=!1;function Br(){Ar||(Ar=!0,zr());return yr.exports}d={};var Cr={exports:d};function Dr(){function a(a,b){if(b==="constructor"&&typeof a[b]==="function")return;if(b=="__proto__")return;return a[b]}Cr.exports=a}var Er=!1;function Fr(){Er||(Er=!0,Dr());return Cr.exports}f={};var Gr={exports:f};function Hr(){var a=Bh(),b=Si();function c(c){return a(c,b(c))}Gr.exports=c}var Ir=!1;function Jr(){Ir||(Ir=!0,Hr());return Gr.exports}c={};var Kr={exports:c};function Lr(){var a=Br(),b=aj(),c=Gk(),d=ej(),e=Sk(),f=Gd(),g=p(),h=Em(),i=Oh(),j=Ba(),k=F(),l=Oq(),m=ei(),n=Fr(),o=Jr();function q(p,q,r,s,t,u,v){var w=n(p,r),x=n(q,r),y=v.get(x);if(y){a(p,r,y);return}y=u?u(w,x,r+"",p,q,v):void 0;q=y===void 0;if(q){var z=g(x),A=!z&&i(x),B=!z&&!A&&m(x);y=x;z||A||B?g(w)?y=w:h(w)?y=d(w):A?(q=!1,y=b(x,!0)):B?(q=!1,y=c(x,!0)):y=[]:l(x)||f(x)?(y=w,f(w)?y=o(w):(!k(w)||j(w))&&(y=e(x))):q=!1}q&&(v.set(x,y),t(y,x,s,u,v),v["delete"](x));a(p,r,y)}Kr.exports=q}var Mr=!1;function Nr(){Mr||(Mr=!0,Lr());return Kr.exports}d={};var Or={exports:d};function Pr(){var a=lh(),b=Br(),c=Qm(),d=Nr(),e=F(),f=Si(),g=Fr();function h(i,j,k,l,m){if(i===j)return;c(j,function(c,f){m||(m=new a);if(e(c))d(i,j,f,k,h,l,m);else{var n=l?l(g(i,f),c,f+"",i,j,m):void 0;n===void 0&&(n=c);b(i,f,n)}},f)}Or.exports=h}var Qr=!1;function Rr(){Qr||(Qr=!0,Pr());return Or.exports}f={};var Sr={exports:f};function Tr(){var a=Fl(),b=rg();function c(c){return a(function(a,d){var e=-1,f=d.length,g=f>1?d[f-1]:void 0,h=f>2?d[2]:void 0;g=c.length>3&&typeof g=="function"?(f--,g):void 0;h&&b(d[0],d[1],h)&&(g=f<3?void 0:g,f=1);a=Object(a);while(++e<f){h=d[e];h&&c(a,h,e,g)}return a})}Sr.exports=c}var Ur=!1;function Vr(){Ur||(Ur=!0,Tr());return Sr.exports}c={};var Wr={exports:c};function Xr(){var a=Rr(),b=Vr();b=b(function(b,c,d){a(b,c,d)});Wr.exports=b}var Yr=!1;function Zr(){Yr||(Yr=!0,Xr());return Wr.exports}d={};var $r={exports:d};function as(){function a(a,b){return a<b}$r.exports=a}var bs=!1;function cs(){bs||(bs=!0,as());return $r.exports}f={};var ds={exports:f};function es(){var a=lr(),b=cs(),c=le();function d(d){return d&&d.length?a(d,c,b):void 0}ds.exports=d}var fs=!1;function gs(){fs||(fs=!0,es());return ds.exports}c={};var hs={exports:c};function is(){var a=lr(),b=bp(),c=cs();function d(d,e){return d&&d.length?a(d,b(e,2),c):void 0}hs.exports=d}var js=!1;function ks(){js||(js=!0,is());return hs.exports}d={};var ls={exports:d};function ms(){var a=od(),b=Je();function c(c,d){return d.length<2?c:a(c,b(d,0,-1))}ls.exports=c}var ns=!1;function os(){ns||(ns=!0,ms());return ls.exports}f={};var ps={exports:f};function qs(){var a=hd(),b=$q(),c=os(),d=P();function e(e,f){f=a(f,e);e=c(e,f);return e==null||delete e[d(b(f))]}ps.exports=e}var rs=!1;function ss(){rs||(rs=!0,qs());return ps.exports}c={};var ts={exports:c};function us(){var a=Oq();function b(b){return a(b)?void 0:b}ts.exports=b}var vs=!1;function ws(){vs||(vs=!0,us());return ts.exports}d={};var xs={exports:d};function ys(){var a=Wc(),b=ll(),c=ss(),d=hd(),e=Bh(),f=ws(),g=Be(),h=Qj(),i=1,j=2,k=4;g=g(function(g,l){var m={};if(g==null)return m;var n=!1;l=a(l,function(a){a=d(a,g);n||(n=a.length>1);return a});e(g,h(g),m);n&&(m=b(m,i|j|k,f));var o=l.length;while(o--)c(m,l[o]);return m});xs.exports=g}var zs=!1;function As(){zs||(zs=!0,ys());return xs.exports}f={};var Bs={exports:f};function Cs(){var a=Dg(),b="Expected a function";function c(c,d){var e;if(typeof d!="function")throw new TypeError(b);c=a(c);return function(){--c>0&&(e=d.apply(this,arguments));c<=1&&(d=void 0);return e}}Bs.exports=c}var Ds=!1;function Es(){Ds||(Ds=!0,Cs());return Bs.exports}c={};var Fs={exports:c};function Gs(){var a=Es();function b(b){return a(2,b)}Fs.exports=b}var Hs=!1;function Is(){Hs||(Hs=!0,Gs());return Fs.exports}d={};var Js={exports:d};function Ks(){var a=9007199254740991,b=Math.floor;function c(c,d){var e="";if(!c||d<1||d>a)return e;do d%2&&(e+=c),d=b(d/2),d&&(c+=c);while(d);return e}Js.exports=c}var Ls=!1;function Ms(){Ls||(Ls=!0,Ks());return Js.exports}f={};var Ns={exports:f};function Os(){var a=Qo();a=a("length");Ns.exports=a}var Ps=!1;function Qs(){Ps||(Ps=!0,Os());return Ns.exports}c={};var Rs={exports:c};function Ss(){var a="\\ud800-\\udfff",b="\\u0300-\\u036f",c="\\ufe20-\\ufe2f",d="\\u20d0-\\u20ff";b=b+c+d;c="\\ufe0e\\ufe0f";d="["+a+"]";b="["+b+"]";var e="\\ud83c[\\udffb-\\udfff]",f="(?:"+b+"|"+e+")";a="[^"+a+"]";var g="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",i="\\u200d";f=f+"?";c="["+c+"]?";i="(?:"+i+"(?:"+[a,g,h].join("|")+")"+c+f+")*";c=c+f+i;f="(?:"+[a+b+"?",b,g,h,d].join("|")+")";var j=RegExp(e+"(?="+e+")|"+f+c,"g");function k(a){var b=j.lastIndex=0;while(j.test(a))++b;return b}Rs.exports=k}var Ts=!1;function Us(){Ts||(Ts=!0,Ss());return Rs.exports}d={};var Vs={exports:d};function Ws(){var a=Qs(),b=Re(),c=Us();function d(d){return b(d)?c(d):a(d)}Vs.exports=d}var Xs=!1;function Ys(){Xs||(Xs=!0,Ws());return Vs.exports}f={};var Zs={exports:f};function $s(){var a=Ms(),b=$c(),c=Ne(),d=Re(),e=Ys(),f=cf(),g=Math.ceil;function h(h,i){i=i===void 0?" ":b(i);var j=i.length;if(j<2)return j?a(i,h):i;j=a(i,g(h/e(i)));return d(i)?c(f(j),0,h).join(""):j.slice(0,h)}Zs.exports=h}var at=!1;function bt(){at||(at=!0,$s());return Zs.exports}c={};var ct={exports:c};function dt(){var a=bt(),b=Ys(),c=Dg(),d=dd();function e(e,f,g){e=d(e);f=c(f);var h=f?b(e):0;return f&&h<f?a(f-h,g)+e:e}ct.exports=e}var et=!1;function ft(){et||(et=!0,dt());return ct.exports}d={};var gt={exports:d};function ht(){var a=xh(),b=hd(),c=ng(),d=F(),e=P();function f(f,g,h,i){if(!d(f))return f;g=b(g,f);var j=-1,k=g.length,l=k-1,m=f;while(m!=null&&++j<k){var n=e(g[j]),o=h;if(j!=l){var p=m[n];o=i?i(p,n,m):void 0;o===void 0&&(o=d(p)?p:c(g[j+1])?[]:{})}a(m,n,o);m=m[n]}return f}gt.exports=f}var it=!1;function jt(){it||(it=!0,ht());return gt.exports}f={};var kt={exports:f};function lt(){var a=od(),b=jt(),c=hd();function d(d,e,f){var g=-1,h=e.length,i={};while(++g<h){var j=e[g],k=a(d,j);f(k,j)&&b(i,c(j,d),k)}return i}kt.exports=d}var mt=!1;function nt(){mt||(mt=!0,lt());return kt.exports}c={};var ot={exports:c};function pt(){var a=nt(),b=Io();function c(c,d){return a(c,d,function(a,d){return b(c,d)})}ot.exports=c}var qt=!1;function rt(){qt||(qt=!0,pt());return ot.exports}d={};var st={exports:d};function tt(){var a=rt(),b=Be();b=b(function(b,c){return b==null?{}:a(b,c)});st.exports=b}var ut=!1;function vt(){ut||(ut=!0,tt());return st.exports}f={};var wt={exports:f};function xt(){var a=Wc(),b=bp(),c=nt(),d=Qj();function e(e,f){if(e==null)return{};var g=a(d(e),function(a){return[a]});f=b(f);return c(e,g,function(a,b){return f(a,b[0])})}wt.exports=e}var yt=!1;function zt(){yt||(yt=!0,xt());return wt.exports}c={};var At={exports:c};function Bt(){var a=Math.ceil,b=Math.max;function c(c,d,e,f){var g=-1;d=b(a((d-c)/(e||1)),0);var h=Array(d);while(d--)h[f?d:++g]=c,c+=e;return h}At.exports=c}var Ct=!1;function Dt(){Ct||(Ct=!0,Bt());return At.exports}d={};var Et={exports:d};function Ft(){var a=Dt(),b=rg(),c=zg();function d(d){return function(e,f,g){g&&typeof g!="number"&&b(e,f,g)&&(f=g=void 0);e=c(e);f===void 0?(f=e,e=0):f=c(f);g=g===void 0?e<f?1:-1:c(g);return a(e,f,g,d)}}Et.exports=d}var Gt=!1;function Ht(){Gt||(Gt=!0,Ft());return Et.exports}f={};var It={exports:f};function Jt(){var a=Ht();a=a();It.exports=a}var Kt=!1;function Lt(){Kt||(Kt=!0,Jt());return It.exports}c={};var Mt={exports:c};function Nt(){function a(a,b,c,d,e){e(a,function(e,f,a){c=d?(d=!1,e):b(c,e,f,a)});return c}Mt.exports=a}var Ot=!1;function Pt(){Ot||(Ot=!0,Nt());return Mt.exports}d={};var Qt={exports:d};function Rt(){var a=tf(),b=bn(),c=bp(),d=Pt(),e=p();function f(f,g,h){var i=e(f)?a:d,j=arguments.length<3;return i(f,c(g,4),h,j,b)}Qt.exports=f}var St=!1;function Tt(){St||(St=!0,Rt());return Qt.exports}f={};var Ut={exports:f};function Vt(){var a=jt();function b(b,c,d){return b==null?b:a(b,c,d)}Ut.exports=b}var Wt=!1;function Xt(){Wt||(Wt=!0,Vt());return Ut.exports}c={};var Yt={exports:c};function Zt(){var a=jt();function b(b,c,d,e){e=typeof e=="function"?e:void 0;return b==null?b:a(b,c,d,e)}Yt.exports=b}var $t=!1;function au(){$t||($t=!0,Zt());return Yt.exports}d={};var bu={exports:d};function cu(){var a=yi(),b=hk(),c=jg(),d=Sq(),e=Ys(),f="[object Map]",g="[object Set]";function h(h){if(h==null)return 0;if(c(h))return d(h)?e(h):h.length;var i=b(h);return i==f||i==g?h.size:a(h).length}bu.exports=h}var du=!1;function eu(){du||(du=!0,cu());return bu.exports}f={};var fu={exports:f};function gu(){var a=Yf();a=a(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()});fu.exports=a}var hu=!1;function iu(){hu||(hu=!0,gu());return fu.exports}c={};var ju={exports:c};function ku(){var a=bn();function b(b,c){var d;a(b,function(b,e,a){d=c(b,e,a);return!d});return!!d}ju.exports=b}var lu=!1;function mu(){lu||(lu=!0,ku());return ju.exports}d={};var nu={exports:d};function ou(){var a=An(),b=bp(),c=mu(),d=p(),e=rg();function f(f,g,h){var i=d(f)?a:c;h&&e(f,g,h)&&(g=void 0);return i(f,b(g,3))}nu.exports=f}var pu=!1;function qu(){pu||(pu=!0,ou());return nu.exports}f={};var ru={exports:f};function su(){function a(a,b){var c=a.length;a.sort(b);while(c--)a[c]=a[c].value;return a}ru.exports=a}var tu=!1;function uu(){tu||(tu=!0,su());return ru.exports}c={};var vu={exports:c};function wu(){var a=ra();function b(b,c){if(b!==c){var d=b!==void 0,e=b===null,f=b===b,g=a(b),h=c!==void 0,i=c===null,j=c===c,k=a(c);if(!i&&!k&&!g&&b>c||g&&h&&j&&!i&&!k||e&&h&&j||!d&&j||!f)return 1;if(!e&&!g&&!k&&b<c||k&&d&&f&&!e&&!g||i&&d&&f||!h&&f||!j)return-1}return 0}vu.exports=b}var xu=!1;function yu(){xu||(xu=!0,wu());return vu.exports}d={};var zu={exports:d};function Au(){var a=yu();function b(b,c,d){var e=-1,f=b.criteria,g=c.criteria,h=f.length,i=d.length;while(++e<h){var j=a(f[e],g[e]);if(j){if(e>=i)return j;var k=d[e];return j*(k=="desc"?-1:1)}}return b.index-c.index}zu.exports=b}var Bu=!1;function Cu(){Bu||(Bu=!0,Au());return zu.exports}f={};var Du={exports:f};function Eu(){var a=Wc(),b=bp(),c=Dp(),d=uu(),e=Wh(),f=Cu(),g=le();function h(h,i,j){var k=-1;i=a(i.length?i:[g],e(b));h=c(h,function(c,d,b){d=a(i,function(a){return a(c)});return{criteria:d,index:++k,value:c}});return d(h,function(a,b){return f(a,b,j)})}Du.exports=h}var Fu=!1;function Gu(){Fu||(Fu=!0,Eu());return Du.exports}c={};var Hu={exports:c};function Iu(){var a=Od(),b=Gu(),c=Fl(),d=rg();c=c(function(c,e){if(c==null)return[];var f=e.length;f>1&&d(c,e[0],e[1])?e=[]:f>2&&d(e[0],e[1],e[2])&&(e=[e[0]]);return b(c,a(e,1),[])});Hu.exports=c}var Ju=!1;function Ku(){Ju||(Ju=!0,Iu());return Hu.exports}d={};var Lu={exports:d};function Mu(){var a=ja(),b=na(),c="[object RegExp]";function d(d){return b(d)&&a(d)==c}Lu.exports=d}var Nu=!1;function Ou(){Nu||(Nu=!0,Mu());return Lu.exports}f={};var Pu={exports:f};function Qu(){var a=Ou(),b=Wh(),c=ai();c=c&&c.isRegExp;b=c?b(c):a;Pu.exports=b}var Ru=!1;function Su(){Ru||(Ru=!0,Qu());return Pu.exports}c={};var Tu={exports:c};function Uu(){var a=$c(),b=Ne(),c=Re(),d=rg(),e=Su(),f=cf(),g=dd(),h=4294967295;function i(i,j,k){k&&typeof k!="number"&&d(i,j,k)&&(j=k=void 0);k=k===void 0?h:k>>>0;if(!k)return[];i=g(i);if(i&&(typeof j=="string"||j!=null&&!e(j))){j=a(j);if(!j&&c(i))return b(f(i),0,k)}return i.split(j,k)}Tu.exports=i}var Vu=!1;function Wu(){Vu||(Vu=!0,Uu());return Tu.exports}d={};var Xu={exports:d};function Yu(){function a(a,b){var c,d=-1,e=a.length;while(++d<e){var f=b(a[d]);f!==void 0&&(c=c===void 0?f:c+f)}return c}Xu.exports=a}var Zu=!1;function $u(){Zu||(Zu=!0,Yu());return Xu.exports}f={};var av={exports:f};function bv(){var a=bp(),b=$u();function c(c,d){return c&&c.length?b(c,a(d,2)):0}av.exports=c}var cv=!1;function dv(){cv||(cv=!0,bv());return av.exports}c={};var ev={exports:c};function fv(){var a=Bl(),b=F(),c="Expected a function";function d(d,e,f){var g=!0,h=!0;if(typeof d!="function")throw new TypeError(c);b(f)&&(g="leading"in f?!!f.leading:g,h="trailing"in f?!!f.trailing:h);return a(d,e,{leading:g,maxWait:e,trailing:h})}ev.exports=d}var gv=!1;function hv(){gv||(gv=!0,fv());return ev.exports}d={};var iv={exports:d};function jv(){var a=Fh(),b=fn(),c=Dg(),d=9007199254740991,e=4294967295,f=Math.min;function g(g,h){g=c(g);if(g<1||g>d)return[];var i=e,j=f(g,e);h=b(h);g-=e;j=a(j,h);while(++i<g)h(i);return j}iv.exports=g}var kv=!1;function lv(){kv||(kv=!0,jv());return iv.exports}f={};var mv={exports:f};function nv(){var a=Wc(),b=ej(),c=p(),d=ra(),e=Sc(),f=P(),g=dd();function h(h){return c(h)?a(h,f):d(h)?[h]:b(e(g(h)))}mv.exports=h}var ov=!1;function pv(){ov||(ov=!0,nv());return mv.exports}c={};var qv={exports:c};function rv(){var a=ph(),b=Ok(),c=Um(),d=bp(),e=yj(),f=p(),g=Oh(),h=Ba(),i=F(),j=ei();function k(k,l,m){var n=f(k),o=n||g(k)||j(k);l=d(l,4);if(m==null){var p=k&&k.constructor;o?m=n?new p:[]:i(k)?m=h(p)?b(e(k)):{}:m={}}(o?a:c)(k,function(b,c,a){return l(m,b,c,a)});return m}qv.exports=k}var sv=!1;function tv(){sv||(sv=!0,rv());return qv.exports}d={};var uv={exports:d};function vv(){var a=$c(),b=Ne(),c=Re(),d=F(),e=Su(),f=Ys(),g=cf(),h=Dg(),i=dd(),j=30,k="...",l=/\w*$/;function m(m,n){var o=j,p=k;if(d(n)){var q="separator"in n?n.separator:q;o="length"in n?h(n.length):o;p="omission"in n?a(n.omission):p}m=i(m);n=m.length;if(c(m)){var r=g(m);n=r.length}if(o>=n)return m;n=o-f(p);if(n<1)return p;o=r?b(r,0,n).join(""):m.slice(0,n);if(q===void 0)return o+p;r&&(n+=o.length-n);if(e(q)){if(m.slice(n).search(q)){var s,t=o;q.global||(q=RegExp(q.source,i(l.exec(q))+"g"));q.lastIndex=0;while(s=q.exec(t))var u=s.index;o=o.slice(0,u===void 0?n:u)}}else if(m.indexOf(a(q),n)!=n){s=o.lastIndexOf(q);s>-1&&(o=o.slice(0,s))}return o+p}uv.exports=m}var wv=!1;function xv(){wv||(wv=!0,vv());return uv.exports}f={};var yv={exports:f};function zv(){function a(){}yv.exports=a}var Av=!1;function Bv(){Av||(Av=!0,zv());return yv.exports}c={};var Cv={exports:c};function Dv(){var a=$j(),b=Bv(),c=Mn(),d=1/0;c=a&&1/c(new a([,-0]))[1]==d?function(b){return new a(b)}:b;Cv.exports=c}var Ev=!1;function Fv(){Ev||(Ev=!0,Dv());return Cv.exports}d={};var Gv={exports:d};function Hv(){var a=Vl(),b=om(),c=sm(),d=wm(),e=Fv(),f=Mn(),g=200;function h(h,i,j){var k=-1,l=b,m=h.length,n=!0,o=[],p=o;if(j)n=!1,l=c;else if(m>=g){var q=i?null:e(h);if(q)return f(q);n=!1;l=d;p=new a}else p=i?[]:o;outer:while(++k<m){q=h[k];var r=i?i(q):q;q=j||q!==0?q:0;if(n&&r===r){var s=p.length;while(s--)if(p[s]===r)continue outer;i&&p.push(r);o.push(q)}else l(p,r,j)||(p!==o&&p.push(r),o.push(q))}return o}Gv.exports=h}var Iv=!1;function Jv(){Iv||(Iv=!0,Hv());return Gv.exports}f={};var Kv={exports:f};function Lv(){var a=Od(),b=Fl(),c=Jv(),d=Em();b=b(function(b){return c(a(b,1,d,!0))});Kv.exports=b}var Mv=!1;function Nv(){Mv||(Mv=!0,Lv());return Kv.exports}c={};var Ov={exports:c};function Pv(){var a=Jv();function b(b){return b&&b.length?a(b):[]}Ov.exports=b}var Qv=!1;function Rv(){Qv||(Qv=!0,Pv());return Ov.exports}d={};var Sv={exports:d};function Tv(){var a=bp(),b=Jv();function c(c,d){return c&&c.length?b(c,a(d,2)):[]}Sv.exports=c}var Uv=!1;function Vv(){Uv||(Uv=!0,Tv());return Sv.exports}f={};var Wv={exports:f};function Xv(){var a=dd(),b=0;function c(c){var d=++b;return a(c)+d}Wv.exports=c}var Yv=!1;function Zv(){Yv||(Yv=!0,Xv());return Wv.exports}c={};var $v={exports:c};function aw(){var a=Wc();function b(b,c){return a(c,function(a){return b[a]})}$v.exports=b}var bw=!1;function cw(){bw||(bw=!0,aw());return $v.exports}d={};var dw={exports:d};function ew(){var a=cw(),b=Ci();function c(c){return c==null?[]:a(c,b(c))}dw.exports=c}var fw=!1;function gw(){fw||(fw=!0,ew());return dw.exports}f={};var hw={exports:f};function iw(){function a(a,b,c){var d=-1,e=a.length,f=b.length,g={};while(++d<e){var h=d<f?b[d]:void 0;c(g,a[d],h)}return g}hw.exports=a}var jw=!1;function kw(){jw||(jw=!0,iw());return hw.exports}c={};var lw={exports:c};function mw(){var a=xh(),b=kw();function c(c,d){return b(c||[],d||[],a)}lw.exports=c}var nw=!1;function ow(){nw||(nw=!0,mw());return lw.exports}function b(a){switch(a){case void 0:return l();case"/at":return Fe();case"/capitalize":return pf();case"/camelCase":return bg();case"/chunk":return Hg();case"/clamp":return Pg();case"/clone":return pl();case"/cloneDeep":return tl();case"/constant":return de();case"/debounce":return Bl();case"/defaults":return Jl();case"/difference":return Im();case"/each":return on();case"/every":return fp();case"/filter":return np();case"/find":return zp();case"/flatMap":return Lp();case"/flatten":return Sd();case"/forEach":return kn();case"/forIn":return Pp();case"/get":return sd();case"/has":return Xp();case"/inRange":return eq();case"/intersection":return qq();case"/isArray":return p();case"/isEmpty":return uq();case"/isEqual":return yq();case"/isFunction":return Ba();case"/isNaN":return Gq();case"/isNil":return Kq();case"/isNumber":return Cq();case"/isObject":return F();case"/isPlainObject":return Oq();case"/isString":return Sq();case"/isUndefined":return Wq();case"/keys":return Ci();case"/last":return $q();case"/map":return Hp();case"/mapKeys":return dr();case"/mapValues":return hr();case"/max":return tr();case"/maxBy":return xr();case"/memoize":return Kc();case"/merge":return Zr();case"/min":return gs();case"/minBy":return ks();case"/now":return xl();case"/omit":return As();case"/once":return Is();case"/padStart":return ft();case"/pick":return vt();case"/pickBy":return zt();case"/range":return Lt();case"/reduce":return Tt();case"/set":return Xt();case"/setWith":return au();case"/size":return eu();case"/snakeCase":return iu();case"/some":return qu();case"/sortBy":return Ku();case"/split":return Wu();case"/sumBy":return dv();case"/throttle":return hv();case"/times":return lv();case"/toPath":return pv();case"/transform":return tv();case"/truncate":return xv();case"/union":return Nv();case"/uniq":return Rv();case"/uniqBy":return Vv();case"/uniqueId":return Zv();case"/values":return gw();case"/zipObject":return ow();case"/at":return Fe();case"/capitalize":return pf();case"/chunk":return Hg();case"/clamp":return Pg();case"/cloneDeep":return tl();case"/debounce":return Bl();case"/difference":return Im();case"/get":return sd();case"/inRange":return eq();case"/isEmpty":return uq();case"/isEqual":return yq();case"/isObject":return F();case"/isPlainObject":return Oq();case"/isString":return Sq();case"/memoize":return Kc();case"/merge":return Zr();case"/once":return Is();case"/padStart":return ft();case"/pick":return vt();case"/pickBy":return zt();case"/range":return Lt();case"/set":return Xt();case"/setWith":return au();case"/split":return Wu();case"/throttle":return hv();case"/times":return lv();case"/truncate":return xv();case"/uniq":return Rv();case"/uniqueId":return Zv()}}e.exports=b}),null);
__d("lodash-memoize",["lodash-4.17.15"],(function(a,b,c,d,e,f){e.exports=b("lodash-4.17.15")("/memoize")}),null);/*FB_PKG_DELIM*/
__d("PolarisPostActionLoadPostQueryInlineFragment.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"PolarisPostActionLoadPostQueryInlineFragment"};e.exports=a}),null);
__d("PolarisPostActionLoadPostQueryInlineFragmentWithoutRelatedProfiles.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"PolarisPostActionLoadPostQueryInlineFragmentWithoutRelatedProfiles"};e.exports=a}),null);
__d("PolarisPostActionLoadPostQueryLegacyQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"child_comment_count"},b={defaultValue:null,kind:"LocalArgument",name:"fetch_comment_count"},c={defaultValue:10,kind:"LocalArgument",name:"fetch_like_count"},d={defaultValue:2,kind:"LocalArgument",name:"fetch_preview_comment_count"},e={defaultValue:3,kind:"LocalArgument",name:"fetch_related_profile_media_count"},f={defaultValue:null,kind:"LocalArgument",name:"fetch_tagged_user_count"},g={defaultValue:!1,kind:"LocalArgument",name:"has_threaded_comments"},h={defaultValue:null,kind:"LocalArgument",name:"hoisted_comment_id"},i={defaultValue:null,kind:"LocalArgument",name:"hoisted_reply_id"},j={defaultValue:null,kind:"LocalArgument",name:"parent_comment_count"},k={defaultValue:null,kind:"LocalArgument",name:"shortcode"},aa=[{kind:"Variable",name:"shortcode",variableName:"shortcode"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"shortcode",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"thumbnail_src",storageKey:null},p={alias:null,args:null,concreteType:"XDTGraphMediaDimensions",kind:"LinkedField",name:"dimensions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"buttons",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"gating_type",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"center_button",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"post_reveal_cta",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"time_gated",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"misinformation_type",storageKey:null},y={alias:null,args:null,concreteType:"XDTGraphMediaGatingInfo",kind:"LinkedField",name:"gating_info",plural:!1,selections:[q,r,s,t,u,v,w,x],storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"fact_check_overall_rating",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"profile_pic_url",storageKey:null},C={alias:null,args:null,concreteType:"XDTGraphMediaFactCheck",kind:"LinkedField",name:"fact_check_information",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},t,{alias:null,args:null,kind:"ScalarField",name:"rating",storageKey:null},{alias:null,args:null,concreteType:"XDTGraphMediaFactCheckProvider",kind:"LinkedField",name:"provider",plural:!1,selections:[A,B,{alias:null,args:null,kind:"ScalarField",name:"appeal_email",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_directly_rated",storageKey:null}],storageKey:null},D={alias:null,args:null,concreteType:"XDTGraphMediaSensitivityFrictionInfo",kind:"LinkedField",name:"sensitivity_friction_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"sensitivity_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_subtitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_primary_button",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_secondary_button",storageKey:null}],storageKey:null},E={alias:null,args:null,concreteType:"XDTGraphMediaSharingFrictionInfo",kind:"LinkedField",name:"sharing_friction_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"should_have_sharing_friction",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bloks_app_url",storageKey:null}],storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},G={alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},H={alias:null,args:null,concreteType:"XDTGraphMediaOverlayIconSpec",kind:"LinkedField",name:"icon",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"icon_glyph",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icon_type",storageKey:null},A,G],storageKey:null},I=[{alias:null,args:null,kind:"ScalarField",name:"button_type",storageKey:null},F,{alias:null,args:null,kind:"ScalarField",name:"secondary_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_url",storageKey:null},H,{alias:null,args:null,concreteType:"XDTGraphMediaOverlayTextColorSpec",kind:"LinkedField",name:"text_color",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"light",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dark",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_text_centered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_chevron",storageKey:null}];I={alias:null,args:null,concreteType:"XDTGraphMediaOverlayInfo",kind:"LinkedField",name:"media_overlay_info",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTGraphMediaOverlayButtonSpec",kind:"LinkedField",name:"banner",plural:!1,selections:I,storageKey:null},{alias:null,args:null,concreteType:"XDTGraphMediaOverlayButtonSpec",kind:"LinkedField",name:"buttons",plural:!0,selections:I,storageKey:null},r,H,x,{alias:null,args:null,kind:"ScalarField",name:"overlay_layout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"overlay_type",storageKey:null},t,{alias:null,args:null,kind:"ScalarField",name:"bloks_data",storageKey:null}],storageKey:null};H={alias:null,args:null,kind:"ScalarField",name:"media_preview",storageKey:null};x={alias:null,args:null,kind:"ScalarField",name:"display_url",storageKey:null};G={alias:null,args:null,concreteType:"XDTGraphImageResource",kind:"LinkedField",name:"display_resources",plural:!0,selections:[G,{alias:null,args:null,kind:"ScalarField",name:"config_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"config_height",storageKey:null}],storageKey:null};var J={alias:null,args:null,kind:"ScalarField",name:"is_video",storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"tracking_token",storageKey:null},L={alias:null,args:null,concreteType:"XDTGraphUpcomingEventDict",kind:"LinkedField",name:"upcoming_event",plural:!1,selections:[m,t,{alias:null,args:null,kind:"ScalarField",name:"start_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reminder_enabled",storageKey:null}],storageKey:null},ba=[{kind:"Variable",name:"first",variableName:"fetch_tagged_user_count"}],M={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},N={alias:null,args:null,kind:"ScalarField",name:"followed_by_viewer",storageKey:null},O={alias:null,args:null,kind:"ScalarField",name:"is_verified",storageKey:null},P={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},ca={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"user",plural:!1,selections:[M,N,m,O,B,P],storageKey:null},da={alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},ea={alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},fa={alias:null,args:ba,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user_connection",kind:"LinkedField",name:"edge_media_to_tagged_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphTaggedUser",kind:"LinkedField",name:"node",plural:!1,selections:[ca,da,ea],storageKey:null}],storageKey:null}],storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"is_private",storageKey:null},R={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},S=[R],T={alias:null,args:null,concreteType:"XDTgraphuser_edge_followed_by_connection",kind:"LinkedField",name:"edge_followed_by",plural:!1,selections:S,storageKey:null};N={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"owner",plural:!1,selections:[m,P,{alias:null,args:null,kind:"ScalarField",name:"has_onboarded_to_text_post_app",storageKey:null},O,B,{alias:null,args:null,kind:"ScalarField",name:"blocked_by_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"restricted_by_viewer",storageKey:null},N,M,{alias:null,args:null,kind:"ScalarField",name:"has_blocked_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_embeds_disabled",storageKey:null},Q,{alias:null,args:null,kind:"ScalarField",name:"is_unpublished",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"requested_by_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pass_tiering_recommendation",storageKey:null},{alias:null,args:null,concreteType:"XDTgraphuser_edge_owner_to_timeline_media_connection",kind:"LinkedField",name:"edge_owner_to_timeline_media",plural:!1,selections:S,storageKey:null},T],storageKey:null};var ga=[{kind:"Literal",name:"first",value:1}],U={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},ha={alias:null,args:null,kind:"ScalarField",name:"can_see_insights_as_brand",storageKey:null},ia={alias:null,args:null,kind:"ScalarField",name:"caption_is_edited",storageKey:null},ja={alias:null,args:null,kind:"ScalarField",name:"has_ranked_comments",storageKey:null},ka={alias:null,args:null,kind:"ScalarField",name:"like_and_view_counts_disabled",storageKey:null},la={alias:null,args:null,kind:"ScalarField",name:"comments_disabled",storageKey:null},ma={alias:null,args:null,kind:"ScalarField",name:"commenting_disabled_for_viewer",storageKey:null},na={alias:null,args:null,kind:"ScalarField",name:"taken_at_timestamp",storageKey:null},V=[m,O,B,P],oa={alias:null,args:[{kind:"Variable",name:"first",variableName:"fetch_like_count"}],concreteType:"XDTgraphmediainterface_edge_media_preview_like_connection",kind:"LinkedField",name:"edge_media_preview_like",plural:!1,selections:[R,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_preview_like",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"node",plural:!1,selections:V,storageKey:null}],storageKey:null}],storageKey:null},W=[m,P],pa={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"sponsor",plural:!1,selections:W,storageKey:null},qa={alias:null,args:null,kind:"ScalarField",name:"is_affiliate",storageKey:null},ra={alias:null,args:null,kind:"ScalarField",name:"is_paid_partnership",storageKey:null};A={alias:null,args:null,concreteType:"XDTGraphLocation",kind:"LinkedField",name:"location",plural:!1,selections:[m,{alias:null,args:null,kind:"ScalarField",name:"has_public_page",storageKey:null},A,{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"address_json",storageKey:null}],storageKey:null};var sa={alias:null,args:null,concreteType:"XDTGraphNftAssetInfoType",kind:"LinkedField",name:"nft_asset_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"asset_id",storageKey:null},t,{alias:null,args:null,kind:"ScalarField",name:"shimmer_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creator_username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creator_igid",storageKey:null}],storageKey:null},X={alias:null,args:null,kind:"ScalarField",name:"viewer_has_liked",storageKey:null},ta={alias:null,args:null,kind:"ScalarField",name:"viewer_has_saved",storageKey:null},ua={alias:null,args:null,kind:"ScalarField",name:"viewer_has_saved_to_collection",storageKey:null},va={alias:null,args:null,kind:"ScalarField",name:"viewer_in_photo_of_you",storageKey:null},wa={alias:null,args:null,kind:"ScalarField",name:"viewer_can_reshare",storageKey:null},xa={alias:null,args:null,kind:"ScalarField",name:"is_ad",storageKey:null},ya={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"coauthor_producers",plural:!0,selections:V,storageKey:null},za={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"pinned_for_users",plural:!0,selections:V,storageKey:null},Y={alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},Z=[Y],$={kind:"InlineFragment",selections:Z,type:"XDTGraphImage",abstractKey:null};M={alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_related_profiles_connection",kind:"LinkedField",name:"edge_related_profiles",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_related_profiles",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"node",plural:!1,selections:[m,M,Q,O,B,P,T,{alias:null,args:[{kind:"Variable",name:"first",variableName:"fetch_related_profile_media_count"}],concreteType:"XDTgraphuser_edge_owner_to_timeline_media_connection",kind:"LinkedField",name:"edge_owner_to_timeline_media",plural:!1,selections:[R,{alias:null,args:null,concreteType:"XDTgraphuser_edge_owner_to_timeline_media",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,m,n,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_preview_like_connection",kind:"LinkedField",name:"edge_media_preview_like",plural:!1,selections:S,storageKey:null},{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_preview_comment_connection",kind:"LinkedField",name:"edge_media_preview_comment",plural:!1,selections:S,storageKey:null},o,{alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"owner",plural:!1,selections:W,storageKey:null},{alias:null,args:null,concreteType:"XDTGraphMediaGatingInfo",kind:"LinkedField",name:"gating_info",plural:!1,selections:[q,r,s,t,u,v,w],storageKey:null},E,I,J,$,{kind:"InlineFragment",selections:Z,type:"XDTGraphSidecar",abstractKey:null},{kind:"InlineFragment",selections:Z,type:"XDTGraphVideo",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null};Q={alias:null,args:null,concreteType:"XDTGraphDashInfo",kind:"LinkedField",name:"dash_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_dash_eligible",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_dash_manifest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"number_of_qualities",storageKey:null}],storageKey:null};O={alias:null,args:null,kind:"ScalarField",name:"has_audio",storageKey:null};B={alias:null,args:null,kind:"ScalarField",name:"video_url",storageKey:null};P={alias:null,args:null,kind:"ScalarField",name:"video_view_count",storageKey:null};T={alias:null,args:null,kind:"ScalarField",name:"video_play_count",storageKey:null};W={kind:"InlineFragment",selections:[Y,Q,O,B,P,T,{alias:null,args:null,kind:"ScalarField",name:"encoding_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_published",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"product_type",storageKey:null},t,{alias:null,args:null,kind:"ScalarField",name:"video_duration",storageKey:null},{alias:null,args:null,concreteType:"XDTGraphClipsMusicAttributionInfo",kind:"LinkedField",name:"clips_music_attribution_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"artist_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"song_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uses_original_audio",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_mute_audio",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_mute_audio_reason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_id",storageKey:null}],storageKey:null}],type:"XDTGraphVideo",abstractKey:null};q={kind:"InlineFragment",selections:[Y,Q,O,B,P,T],type:"XDTGraphVideo",abstractKey:null};r={alias:null,args:null,concreteType:"XDTPageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null}],storageKey:null};s={alias:null,args:null,kind:"ScalarField",name:"did_report_as_spam",storageKey:null};u={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"owner",plural:!1,selections:V,storageKey:null};v={alias:null,args:null,concreteType:"XDTgraphcomment_edge_liked_by_connection",kind:"LinkedField",name:"edge_liked_by",plural:!1,selections:S,storageKey:null};w={alias:null,args:null,kind:"ScalarField",name:"is_restricted_pending",storageKey:null};Z=[{alias:null,args:null,concreteType:"XDTGraphComment",kind:"LinkedField",name:"node",plural:!1,selections:[m,F,U,s,u,X,v,w],storageKey:null}];t={condition:"has_threaded_comments",kind:"Condition",passingValue:!1,selections:[{alias:null,args:[{kind:"Variable",name:"first",variableName:"fetch_comment_count"}],concreteType:"XDTgraphmediainterface_edge_media_to_comment_connection",kind:"LinkedField",name:"edge_media_to_comment",plural:!1,selections:[R,r,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_comment",kind:"LinkedField",name:"edges",plural:!0,selections:Z,storageKey:null}],storageKey:null}]};Q={alias:null,args:[{kind:"Variable",name:"first",variableName:"child_comment_count"}],concreteType:"XDTgraphcomment_edge_threaded_comments_connection",kind:"LinkedField",name:"edge_threaded_comments",plural:!1,selections:[R,r,{alias:null,args:null,concreteType:"XDTgraphcomment_edge_threaded_comments",kind:"LinkedField",name:"edges",plural:!0,selections:Z,storageKey:null}],storageKey:null};O={condition:"has_threaded_comments",kind:"Condition",passingValue:!0,selections:[{alias:null,args:[{kind:"Variable",name:"first",variableName:"parent_comment_count"}],concreteType:"XDTgraphmediainterface_edge_media_to_parent_comment_connection",kind:"LinkedField",name:"edge_media_to_parent_comment",plural:!1,selections:[R,r,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_parent_comment",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphComment",kind:"LinkedField",name:"node",plural:!1,selections:[m,F,U,s,u,X,v,w,Q],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Variable",name:"hoisted_comment_id",variableName:"hoisted_comment_id"}],concreteType:"XDTgraphmediainterface_edge_media_to_hoisted_comment_connection",kind:"LinkedField",name:"edge_media_to_hoisted_comment",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_hoisted_comment",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphComment",kind:"LinkedField",name:"node",plural:!1,selections:[m,F,U,s,u,X,v,w,{alias:null,args:[{kind:"Variable",name:"hoisted_reply_id",variableName:"hoisted_reply_id"}],concreteType:"XDTgraphcomment_edge_comment_to_hoisted_reply_connection",kind:"LinkedField",name:"edge_comment_to_hoisted_reply",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphcomment_edge_comment_to_hoisted_reply",kind:"LinkedField",name:"edges",plural:!0,selections:Z,storageKey:null}],storageKey:null},Q],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Variable",name:"first",variableName:"fetch_preview_comment_count"}],concreteType:"XDTgraphmediainterface_edge_media_preview_comment_connection",kind:"LinkedField",name:"edge_media_preview_comment",plural:!1,selections:[R,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_preview_comment",kind:"LinkedField",name:"edges",plural:!0,selections:Z,storageKey:null}],storageKey:null}]};B={alias:null,args:ba,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user_connection",kind:"LinkedField",name:"edge_media_to_tagged_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphTaggedUser",kind:"LinkedField",name:"node",plural:!1,selections:[ca,da,ea,m],storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[a,b,c,d,e,f,g,h,i,j,k],kind:"Fragment",metadata:null,name:"PolarisPostActionLoadPostQueryLegacyQuery",selections:[{alias:null,args:aa,concreteType:null,kind:"LinkedField",name:"xdt_shortcode_media",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"PolarisPostActionLoadPostQueryInlineFragment",selections:[l,m,n,o,p,y,z,C,D,E,I,H,x,G,J,K,L,fa,N,{alias:null,args:ga,concreteType:"XDTgraphmediainterface_edge_media_to_caption_connection",kind:"LinkedField",name:"edge_media_to_caption",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_caption",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphMediaCaption",kind:"LinkedField",name:"node",plural:!1,selections:[U,F],storageKey:null}],storageKey:null}],storageKey:"edge_media_to_caption(first:1)"},ha,ia,ja,ka,la,ma,na,oa,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user_connection",kind:"LinkedField",name:"edge_media_to_sponsor_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphSponsorTag",kind:"LinkedField",name:"node",plural:!1,selections:[pa],storageKey:null}],storageKey:null}],storageKey:null},qa,ra,A,sa,X,ta,ua,va,wa,xa,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media_connection",kind:"LinkedField",name:"edge_web_media_to_related_media",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[n,o],storageKey:null}],storageKey:null}],storageKey:null},ya,za,M,W,$,{kind:"InlineFragment",selections:[Y,{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children_connection",kind:"LinkedField",name:"edge_sidecar_to_children",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,m,n,p,y,z,C,D,E,I,H,x,G,q,$,J,K,L,fa],storageKey:null}],storageKey:null}],storageKey:null}],type:"XDTGraphSidecar",abstractKey:null},t,O],args:null,argumentDefinitions:[{kind:"RootArgument",name:"child_comment_count"},{kind:"RootArgument",name:"fetch_comment_count"},{kind:"RootArgument",name:"fetch_like_count"},{kind:"RootArgument",name:"fetch_preview_comment_count"},{kind:"RootArgument",name:"fetch_related_profile_media_count"},{kind:"RootArgument",name:"fetch_tagged_user_count"},{kind:"RootArgument",name:"has_threaded_comments"},{kind:"RootArgument",name:"hoisted_comment_id"},{kind:"RootArgument",name:"hoisted_reply_id"},{kind:"RootArgument",name:"parent_comment_count"}]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[k,b,e,j,a,c,f,d,g,h,i],kind:"Operation",name:"PolarisPostActionLoadPostQueryLegacyQuery",selections:[{alias:null,args:aa,concreteType:null,kind:"LinkedField",name:"xdt_shortcode_media",plural:!1,selections:[l,{kind:"TypeDiscriminator",abstractKey:"__isXDTGraphMediaInterface"},m,n,o,p,y,z,C,D,E,I,H,x,G,J,K,L,B,N,{alias:null,args:ga,concreteType:"XDTgraphmediainterface_edge_media_to_caption_connection",kind:"LinkedField",name:"edge_media_to_caption",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_caption",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphMediaCaption",kind:"LinkedField",name:"node",plural:!1,selections:[U,F,m],storageKey:null}],storageKey:null}],storageKey:"edge_media_to_caption(first:1)"},ha,ia,ja,ka,la,ma,na,oa,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user_connection",kind:"LinkedField",name:"edge_media_to_sponsor_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphSponsorTag",kind:"LinkedField",name:"node",plural:!1,selections:[pa,m],storageKey:null}],storageKey:null}],storageKey:null},qa,ra,A,sa,X,ta,ua,va,wa,xa,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media_connection",kind:"LinkedField",name:"edge_web_media_to_related_media",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,n,o,m],storageKey:null}],storageKey:null}],storageKey:null},ya,za,M,W,$,{kind:"InlineFragment",selections:[Y,{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children_connection",kind:"LinkedField",name:"edge_sidecar_to_children",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,m,n,p,y,z,C,D,E,I,H,x,G,q,$,J,K,L,B],storageKey:null}],storageKey:null}],storageKey:null}],type:"XDTGraphSidecar",abstractKey:null},t,O],storageKey:null}]},params:{id:"7341532402634560",metadata:{},name:"PolarisPostActionLoadPostQueryLegacyQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("PolarisPostActionLoadPostQueryQuery_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="24852649951017035"}),null);
__d("PolarisPostActionLoadPostQueryQuery.graphql",["PolarisPostActionLoadPostQueryQuery_instagramRelayOperation"],(function(a,aa,b,c,d,e){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"child_comment_count"},b={defaultValue:null,kind:"LocalArgument",name:"fetch_comment_count"},c={defaultValue:10,kind:"LocalArgument",name:"fetch_like_count"},d={defaultValue:2,kind:"LocalArgument",name:"fetch_preview_comment_count"},e={defaultValue:null,kind:"LocalArgument",name:"fetch_tagged_user_count"},f={defaultValue:!1,kind:"LocalArgument",name:"has_threaded_comments"},g={defaultValue:null,kind:"LocalArgument",name:"hoisted_comment_id"},h={defaultValue:null,kind:"LocalArgument",name:"hoisted_reply_id"},i={defaultValue:null,kind:"LocalArgument",name:"parent_comment_count"},j={defaultValue:null,kind:"LocalArgument",name:"shortcode"},k=[{kind:"Variable",name:"shortcode",variableName:"shortcode"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"shortcode",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"thumbnail_src",storageKey:null},p={alias:null,args:null,concreteType:"XDTGraphMediaDimensions",kind:"LinkedField",name:"dimensions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"misinformation_type",storageKey:null},t={alias:null,args:null,concreteType:"XDTGraphMediaGatingInfo",kind:"LinkedField",name:"gating_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"buttons",storageKey:null},q,{alias:null,args:null,kind:"ScalarField",name:"gating_type",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"center_button",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"post_reveal_cta",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"time_gated",storageKey:null},s],storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"fact_check_overall_rating",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"profile_pic_url",storageKey:null},x={alias:null,args:null,concreteType:"XDTGraphMediaFactCheck",kind:"LinkedField",name:"fact_check_information",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"rating",storageKey:null},{alias:null,args:null,concreteType:"XDTGraphMediaFactCheckProvider",kind:"LinkedField",name:"provider",plural:!1,selections:[v,w,{alias:null,args:null,kind:"ScalarField",name:"appeal_email",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_directly_rated",storageKey:null}],storageKey:null},y={alias:null,args:null,concreteType:"XDTGraphMediaSensitivityFrictionInfo",kind:"LinkedField",name:"sensitivity_friction_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"sensitivity_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_subtitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_primary_button",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"share_friction_secondary_button",storageKey:null}],storageKey:null},z={alias:null,args:null,concreteType:"XDTGraphMediaSharingFrictionInfo",kind:"LinkedField",name:"sharing_friction_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"should_have_sharing_friction",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bloks_app_url",storageKey:null}],storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},C={alias:null,args:null,concreteType:"XDTGraphMediaOverlayIconSpec",kind:"LinkedField",name:"icon",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"icon_glyph",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icon_type",storageKey:null},v,B],storageKey:null},D=[{alias:null,args:null,kind:"ScalarField",name:"button_type",storageKey:null},A,{alias:null,args:null,kind:"ScalarField",name:"secondary_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_url",storageKey:null},C,{alias:null,args:null,concreteType:"XDTGraphMediaOverlayTextColorSpec",kind:"LinkedField",name:"text_color",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"light",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dark",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_text_centered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_chevron",storageKey:null}];D={alias:null,args:null,concreteType:"XDTGraphMediaOverlayInfo",kind:"LinkedField",name:"media_overlay_info",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTGraphMediaOverlayButtonSpec",kind:"LinkedField",name:"banner",plural:!1,selections:D,storageKey:null},{alias:null,args:null,concreteType:"XDTGraphMediaOverlayButtonSpec",kind:"LinkedField",name:"buttons",plural:!0,selections:D,storageKey:null},q,C,s,{alias:null,args:null,kind:"ScalarField",name:"overlay_layout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"overlay_type",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"bloks_data",storageKey:null}],storageKey:null};q={alias:null,args:null,kind:"ScalarField",name:"media_preview",storageKey:null};C={alias:null,args:null,kind:"ScalarField",name:"display_url",storageKey:null};s={alias:null,args:null,concreteType:"XDTGraphImageResource",kind:"LinkedField",name:"display_resources",plural:!0,selections:[B,{alias:null,args:null,kind:"ScalarField",name:"config_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"config_height",storageKey:null}],storageKey:null};B={alias:null,args:null,kind:"ScalarField",name:"is_video",storageKey:null};var E={alias:null,args:null,kind:"ScalarField",name:"tracking_token",storageKey:null},F={alias:null,args:null,concreteType:"XDTGraphUpcomingEventDict",kind:"LinkedField",name:"upcoming_event",plural:!1,selections:[m,r,{alias:null,args:null,kind:"ScalarField",name:"start_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reminder_enabled",storageKey:null}],storageKey:null},G=[{kind:"Variable",name:"first",variableName:"fetch_tagged_user_count"}],H={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"followed_by_viewer",storageKey:null},J={alias:null,args:null,kind:"ScalarField",name:"is_verified",storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},L={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"user",plural:!1,selections:[H,I,m,J,w,K],storageKey:null},M={alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},N={alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},O={alias:null,args:G,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user_connection",kind:"LinkedField",name:"edge_media_to_tagged_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphTaggedUser",kind:"LinkedField",name:"node",plural:!1,selections:[L,M,N],storageKey:null}],storageKey:null}],storageKey:null},P={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},Q=[P];I={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"owner",plural:!1,selections:[m,K,J,w,{alias:null,args:null,kind:"ScalarField",name:"blocked_by_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"restricted_by_viewer",storageKey:null},I,H,{alias:null,args:null,kind:"ScalarField",name:"has_blocked_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_embeds_disabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_private",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_unpublished",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"requested_by_viewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pass_tiering_recommendation",storageKey:null},{alias:null,args:null,concreteType:"XDTgraphuser_edge_owner_to_timeline_media_connection",kind:"LinkedField",name:"edge_owner_to_timeline_media",plural:!1,selections:Q,storageKey:null},{alias:null,args:null,concreteType:"XDTgraphuser_edge_followed_by_connection",kind:"LinkedField",name:"edge_followed_by",plural:!1,selections:Q,storageKey:null}],storageKey:null};H=[{kind:"Literal",name:"first",value:1}];var R={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"can_see_insights_as_brand",storageKey:null},ba={alias:null,args:null,kind:"ScalarField",name:"caption_is_edited",storageKey:null},ca={alias:null,args:null,kind:"ScalarField",name:"has_ranked_comments",storageKey:null},da={alias:null,args:null,kind:"ScalarField",name:"like_and_view_counts_disabled",storageKey:null},ea={alias:null,args:null,kind:"ScalarField",name:"comments_disabled",storageKey:null},fa={alias:null,args:null,kind:"ScalarField",name:"commenting_disabled_for_viewer",storageKey:null},ga={alias:null,args:null,kind:"ScalarField",name:"taken_at_timestamp",storageKey:null};J=[m,J,w,K];w={alias:null,args:[{kind:"Variable",name:"first",variableName:"fetch_like_count"}],concreteType:"XDTgraphmediainterface_edge_media_preview_like_connection",kind:"LinkedField",name:"edge_media_preview_like",plural:!1,selections:[P,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_preview_like",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"node",plural:!1,selections:J,storageKey:null}],storageKey:null}],storageKey:null};K={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"sponsor",plural:!1,selections:[m,K],storageKey:null};var ha={alias:null,args:null,kind:"ScalarField",name:"is_affiliate",storageKey:null},ia={alias:null,args:null,kind:"ScalarField",name:"is_paid_partnership",storageKey:null};v={alias:null,args:null,concreteType:"XDTGraphLocation",kind:"LinkedField",name:"location",plural:!1,selections:[m,{alias:null,args:null,kind:"ScalarField",name:"has_public_page",storageKey:null},v,{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"address_json",storageKey:null}],storageKey:null};var ja={alias:null,args:null,concreteType:"XDTGraphNftAssetInfoType",kind:"LinkedField",name:"nft_asset_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"asset_id",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"shimmer_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creator_username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creator_igid",storageKey:null}],storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"viewer_has_liked",storageKey:null},ka={alias:null,args:null,kind:"ScalarField",name:"viewer_has_saved",storageKey:null},la={alias:null,args:null,kind:"ScalarField",name:"viewer_has_saved_to_collection",storageKey:null},ma={alias:null,args:null,kind:"ScalarField",name:"viewer_in_photo_of_you",storageKey:null},na={alias:null,args:null,kind:"ScalarField",name:"viewer_can_reshare",storageKey:null},oa={alias:null,args:null,kind:"ScalarField",name:"is_ad",storageKey:null},pa={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"coauthor_producers",plural:!0,selections:J,storageKey:null},qa={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"pinned_for_users",plural:!0,selections:J,storageKey:null},U={alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},V={alias:null,args:null,concreteType:"XDTGraphDashInfo",kind:"LinkedField",name:"dash_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_dash_eligible",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_dash_manifest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"number_of_qualities",storageKey:null}],storageKey:null},W={alias:null,args:null,kind:"ScalarField",name:"has_audio",storageKey:null},X={alias:null,args:null,kind:"ScalarField",name:"video_url",storageKey:null},Y={alias:null,args:null,kind:"ScalarField",name:"video_view_count",storageKey:null},Z={alias:null,args:null,kind:"ScalarField",name:"video_play_count",storageKey:null};r={kind:"InlineFragment",selections:[U,V,W,X,Y,Z,{alias:null,args:null,kind:"ScalarField",name:"encoding_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_published",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"product_type",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"video_duration",storageKey:null},{alias:null,args:null,concreteType:"XDTGraphClipsMusicAttributionInfo",kind:"LinkedField",name:"clips_music_attribution_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"artist_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"song_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uses_original_audio",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_mute_audio",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_mute_audio_reason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_id",storageKey:null}],storageKey:null}],type:"XDTGraphVideo",abstractKey:null};var $={kind:"InlineFragment",selections:[U],type:"XDTGraphImage",abstractKey:null};V={kind:"InlineFragment",selections:[U,V,W,X,Y,Z],type:"XDTGraphVideo",abstractKey:null};W={alias:null,args:null,concreteType:"XDTPageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null}],storageKey:null};X={alias:null,args:null,kind:"ScalarField",name:"did_report_as_spam",storageKey:null};Y={alias:null,args:null,concreteType:"XDTGraphUser",kind:"LinkedField",name:"owner",plural:!1,selections:J,storageKey:null};Z={alias:null,args:null,concreteType:"XDTgraphcomment_edge_liked_by_connection",kind:"LinkedField",name:"edge_liked_by",plural:!1,selections:Q,storageKey:null};J={alias:null,args:null,kind:"ScalarField",name:"is_restricted_pending",storageKey:null};Q=[{alias:null,args:null,concreteType:"XDTGraphComment",kind:"LinkedField",name:"node",plural:!1,selections:[m,A,R,X,Y,T,Z,J],storageKey:null}];var ra={condition:"has_threaded_comments",kind:"Condition",passingValue:!1,selections:[{alias:null,args:[{kind:"Variable",name:"first",variableName:"fetch_comment_count"}],concreteType:"XDTgraphmediainterface_edge_media_to_comment_connection",kind:"LinkedField",name:"edge_media_to_comment",plural:!1,selections:[P,W,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_comment",kind:"LinkedField",name:"edges",plural:!0,selections:Q,storageKey:null}],storageKey:null}]},sa={alias:null,args:[{kind:"Variable",name:"first",variableName:"child_comment_count"}],concreteType:"XDTgraphcomment_edge_threaded_comments_connection",kind:"LinkedField",name:"edge_threaded_comments",plural:!1,selections:[P,W,{alias:null,args:null,concreteType:"XDTgraphcomment_edge_threaded_comments",kind:"LinkedField",name:"edges",plural:!0,selections:Q,storageKey:null}],storageKey:null};W={condition:"has_threaded_comments",kind:"Condition",passingValue:!0,selections:[{alias:null,args:[{kind:"Variable",name:"first",variableName:"parent_comment_count"}],concreteType:"XDTgraphmediainterface_edge_media_to_parent_comment_connection",kind:"LinkedField",name:"edge_media_to_parent_comment",plural:!1,selections:[P,W,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_parent_comment",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphComment",kind:"LinkedField",name:"node",plural:!1,selections:[m,A,R,X,Y,T,Z,J,sa],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Variable",name:"hoisted_comment_id",variableName:"hoisted_comment_id"}],concreteType:"XDTgraphmediainterface_edge_media_to_hoisted_comment_connection",kind:"LinkedField",name:"edge_media_to_hoisted_comment",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_hoisted_comment",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphComment",kind:"LinkedField",name:"node",plural:!1,selections:[m,A,R,X,Y,T,Z,J,{alias:null,args:[{kind:"Variable",name:"hoisted_reply_id",variableName:"hoisted_reply_id"}],concreteType:"XDTgraphcomment_edge_comment_to_hoisted_reply_connection",kind:"LinkedField",name:"edge_comment_to_hoisted_reply",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphcomment_edge_comment_to_hoisted_reply",kind:"LinkedField",name:"edges",plural:!0,selections:Q,storageKey:null}],storageKey:null},sa],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Variable",name:"first",variableName:"fetch_preview_comment_count"}],concreteType:"XDTgraphmediainterface_edge_media_preview_comment_connection",kind:"LinkedField",name:"edge_media_preview_comment",plural:!1,selections:[P,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_preview_comment",kind:"LinkedField",name:"edges",plural:!0,selections:Q,storageKey:null}],storageKey:null}]};X={alias:null,args:G,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user_connection",kind:"LinkedField",name:"edge_media_to_tagged_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_tagged_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphTaggedUser",kind:"LinkedField",name:"node",plural:!1,selections:[L,M,N,m],storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[a,b,c,d,e,f,g,h,i,j],kind:"Fragment",metadata:null,name:"PolarisPostActionLoadPostQueryQuery",selections:[{alias:null,args:k,concreteType:null,kind:"LinkedField",name:"xdt_shortcode_media",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"PolarisPostActionLoadPostQueryInlineFragmentWithoutRelatedProfiles",selections:[l,m,n,o,p,t,u,x,y,z,D,q,C,s,B,E,F,O,I,{alias:null,args:H,concreteType:"XDTgraphmediainterface_edge_media_to_caption_connection",kind:"LinkedField",name:"edge_media_to_caption",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_caption",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphMediaCaption",kind:"LinkedField",name:"node",plural:!1,selections:[R,A],storageKey:null}],storageKey:null}],storageKey:"edge_media_to_caption(first:1)"},S,ba,ca,da,ea,fa,ga,w,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user_connection",kind:"LinkedField",name:"edge_media_to_sponsor_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphSponsorTag",kind:"LinkedField",name:"node",plural:!1,selections:[K],storageKey:null}],storageKey:null}],storageKey:null},ha,ia,v,ja,T,ka,la,ma,na,oa,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media_connection",kind:"LinkedField",name:"edge_web_media_to_related_media",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[n,o],storageKey:null}],storageKey:null}],storageKey:null},pa,qa,r,$,{kind:"InlineFragment",selections:[U,{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children_connection",kind:"LinkedField",name:"edge_sidecar_to_children",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,m,n,p,t,u,x,y,z,D,q,C,s,V,$,B,E,F,O],storageKey:null}],storageKey:null}],storageKey:null}],type:"XDTGraphSidecar",abstractKey:null},ra,W],args:null,argumentDefinitions:[{kind:"RootArgument",name:"child_comment_count"},{kind:"RootArgument",name:"fetch_comment_count"},{kind:"RootArgument",name:"fetch_like_count"},{kind:"RootArgument",name:"fetch_preview_comment_count"},{kind:"RootArgument",name:"fetch_tagged_user_count"},{kind:"RootArgument",name:"has_threaded_comments"},{kind:"RootArgument",name:"hoisted_comment_id"},{kind:"RootArgument",name:"hoisted_reply_id"},{kind:"RootArgument",name:"parent_comment_count"}]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[j,b,i,a,c,e,d,f,g,h],kind:"Operation",name:"PolarisPostActionLoadPostQueryQuery",selections:[{alias:null,args:k,concreteType:null,kind:"LinkedField",name:"xdt_shortcode_media",plural:!1,selections:[l,{kind:"TypeDiscriminator",abstractKey:"__isXDTGraphMediaInterface"},m,n,o,p,t,u,x,y,z,D,q,C,s,B,E,F,X,I,{alias:null,args:H,concreteType:"XDTgraphmediainterface_edge_media_to_caption_connection",kind:"LinkedField",name:"edge_media_to_caption",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_caption",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphMediaCaption",kind:"LinkedField",name:"node",plural:!1,selections:[R,A,m],storageKey:null}],storageKey:null}],storageKey:"edge_media_to_caption(first:1)"},S,ba,ca,da,ea,fa,ga,w,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user_connection",kind:"LinkedField",name:"edge_media_to_sponsor_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_media_to_sponsor_user",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTGraphSponsorTag",kind:"LinkedField",name:"node",plural:!1,selections:[K,m],storageKey:null}],storageKey:null}],storageKey:null},ha,ia,v,ja,T,ka,la,ma,na,oa,{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media_connection",kind:"LinkedField",name:"edge_web_media_to_related_media",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphmediainterface_edge_web_media_to_related_media",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,n,o,m],storageKey:null}],storageKey:null}],storageKey:null},pa,qa,r,$,{kind:"InlineFragment",selections:[U,{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children_connection",kind:"LinkedField",name:"edge_sidecar_to_children",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTgraphsidecar_edge_sidecar_to_children",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,m,n,p,t,u,x,y,z,D,q,C,s,V,$,B,E,F,X],storageKey:null}],storageKey:null}],storageKey:null}],type:"XDTGraphSidecar",abstractKey:null},ra,W],storageKey:null}]},params:{id:aa("PolarisPostActionLoadPostQueryQuery_instagramRelayOperation"),metadata:{is_distillery:!0},name:"PolarisPostActionLoadPostQueryQuery",operationKind:"query",text:null}}}();d.exports=a}),null);
__d("IGDSCircleAddPanoOutlineIcon.react",["IGDSSVGIconBase.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var b=i(5),d,e,f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=j.jsx("circle",{cx:"12.001",cy:"12.005",fill:"none",r:"10.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),e=j.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",x1:"7.001",x2:"17.001",y1:"12.005",y2:"12.005"}),f=j.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",x1:"12.001",x2:"12.001",y1:"7.005",y2:"17.005"}),b[0]=d,b[1]=e,b[2]=f):(d=b[0],e=b[1],f=b[2]);b[3]!==a?(d=j.jsxs(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:[d,e,f]})),b[3]=a,b[4]=d):d=b[4];return d}b=j.memo(a);g["default"]=b}),98);
__d("PolarisPostActionRemovePostFromCollection",["InstagramODS","PolarisAPIEditCollection"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.collectionId,e=a.postId;return function(a){a({collectionId:b,postId:e,type:"REMOVE_POST_FROM_COLLECTION_REQUESTED"});c("InstagramODS").incr("web.unsaveFromCollection.attempt");return d("PolarisAPIEditCollection").editCollection({collectionId:b,postIdsToRemove:[e]}).then(function(){a({collectionId:b,postId:e,type:"REMOVE_POST_FROM_COLLECTION_SUCCEEDED"}),c("InstagramODS").incr("web.unsaveFromCollection.success")})["catch"](function(){a({collectionId:b,postId:e,type:"REMOVE_POST_FROM_COLLECTION_FAILED"}),c("InstagramODS").incr("web.unsaveFromCollection.failure")})}}g.removePostFromCollection=a}),98);
__d("usePolarisMediaSaveToCollectionReduxHandler",["PolarisPostActionAddPostToCollection","PolarisPostActionRemovePostFromCollection","PolarisReactRedux.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.unstable_useMemoCache;function a(a){var b=i(3),c=d("PolarisReactRedux.react").useDispatch(),e;b[0]!==c||b[1]!==a?(e=function(b,e){b?c(d("PolarisPostActionRemovePostFromCollection").removePostFromCollection({collectionId:e,postId:a})):c(d("PolarisPostActionAddPostToCollection").addPostToCollection({collectionId:e,postIds:[a]}))},b[0]=c,b[1]=a,b[2]=e):e=b[2];return e}g["default"]=a}),98);
__d("PolarisSponsoredPostCTAFooter.react",["InstagramODS","PolarisClickEventLoggerProvider.react","PolarisPostFooterCTA.react","PolarisPostUtils","PolarisTrackingNodeProvider.react","polarisAdsSelectors.react","react","usePolarisSponsoredPostCTAFooterDominantColor"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var b=i(9),e=a.isMediaRendered,f=a.post;a=a.sidecarIndex;var g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=function(a){return a},b[0]=g):g=b[0];g=d("polarisAdsSelectors.react").useFeedAdInfo(f.id,g);var h=f.isSidecar;a=h===!0?(h=d("PolarisPostUtils").getCurrentSidecarItemFromPost(f,a))==null?void 0:h.id:f.id;h=c("usePolarisSponsoredPostCTAFooterDominantColor")({isMediaRendered:e,mediaId:a,post:f});e=h.ctaDominantColor;f=h.ctaFooterViewpointRef;if(a==null)return null;h=g==null?void 0:(h=g.ctaItems)==null?void 0:(h=h.get(a))==null?void 0:h.ctaLinkUrl;a=g==null?void 0:(g=g.ctaItems)==null?void 0:(g=g.get(a))==null?void 0:g.ctaLinkText;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(g=function(){c("InstagramODS").incr("web.ads.feed.link_click")},b[1]=g):g=b[1];g=g;if(h!=null&&a!=null){b[2]!==e||b[3]!==h||b[4]!==a?(g=j.jsx(c("PolarisPostFooterCTA.react"),{ctaDominantColor:e,"data-testid":void 0,disableAnimation:!1,externalURL:h,forceBottomBorder:!0,isActive:!0,isForAd:!0,onClick:g,showChevron:!0,text:a}),b[2]=e,b[3]=h,b[4]=a,b[5]=g):g=b[5];b[6]!==f||b[7]!==g?(e=j.jsx(c("PolarisClickEventLoggerProvider.react"),{children:j.jsx(c("PolarisTrackingNodeProvider.react"),{trackingNode:86,children:j.jsx("div",{ref:f,children:g})})}),b[6]=f,b[7]=g,b[8]=e):e=b[8];return e}return null}g["default"]=a}),98);
__d("PolarisLoggedOutSidecarUpsell.react",["IGDSBox.react","PolarisIgLiteCarbonUpsellsUtils","PolarisLoggedOutAppUpsellInnerContent.react","PolarisLoggedOutCtaLogger","PolarisPreviewPhoto.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.unstable_useMemoCache;function a(a){var b,e=k(12);a=a.upsellSidecarChild;var f=d("PolarisIgLiteCarbonUpsellsUtils").sideCardIsIgLiteCarbonUpsellsEligible(),g=f?"instagramlitecarbon":"app_upsell";e[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(){d("PolarisLoggedOutCtaLogger").logLoggedOutCtaEvent({ctaType:"sidecar_item_upsell",ctaVersion:g,eventName:"impression"})},e[0]=f):f=e[0];j(f);if(a.dimensions==null||a.owner==null||a.mediaPreview==null)throw new Error("Invalid SidecarChildItem for upsell");e[1]!==a.dimensions||e[2]!==a.mediaPreview?(f=i.jsx(d("PolarisPreviewPhoto.react").PreviewPhoto,{dimensions:a.dimensions,previewData:a.mediaPreview}),e[1]=a.dimensions,e[2]=a.mediaPreview,e[3]=f):f=e[3];var h=a.dimensions.height<a.dimensions.width;b=(b=a.owner)==null?void 0:b.username;var l;e[4]!==h||e[5]!==b||e[6]!==a.owner.profilePictureUrl||e[7]!==a.owner.username?(l=i.jsx(c("IGDSBox.react"),{alignContent:"center",alignItems:"center",alignSelf:"center",color:"alwaysWhite",direction:"column",flex:"shrink",justifyContent:"center",marginEnd:13,marginStart:13,maxWidth:"300px",overflow:"hidden",position:"absolute",shape:"extraRounded",children:i.jsx(c("PolarisLoggedOutAppUpsellInnerContent.react"),{ctaType:"sidecar_item_upsell",ctaVersion:g,intentSource:"post_sidecar_upsell",isSidecarPostLandscape:h,triggeringPageType:"post",triggeringUserDisplayName:b,triggeringUserPicUrl:a.owner.profilePictureUrl,triggeringUserUsername:a.owner.username})}),e[4]=h,e[5]=b,e[6]=a.owner.profilePictureUrl,e[7]=a.owner.username,e[8]=l):l=e[8];e[9]!==f||e[10]!==l?(h=i.jsxs(c("IGDSBox.react"),{direction:"column",justifyContent:"center",position:"relative",children:[f,l]}),e[9]=f,e[10]=l,e[11]=h):h=e[11];return h}g["default"]=a}),98);
__d("polarisCommentSelectors.react",["PolarisPaginationUtils","PolarisReactRedux.react","nullthrows","polarisCreateSelectorWithArg","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).unstable_useMemoCache;e=c("polarisCreateSelectorWithArg")(function(a){return a.comments.byId},function(a){return a.comments.byPostId},function(a,b){return function(e){e=b.get(e);if(e==null)return null;var f=e.commentIds;return f.toSeq().map(function(b){return c("nullthrows")(a.get(b))}).slice(f.count()-d("PolarisPaginationUtils").getVisibleCount(e.pagination),f.count()).filter(function(a){return!a.deleted&&!a.didReportAsSpam})}});f=c("polarisCreateSelectorWithArg")(function(a){return a.posts.byId},function(a){return a.comments.byId},function(a,b){return function(d){d=c("nullthrows")(a.get(d));d=d.previewCommentIds;return d==null?[]:d.map(function(a){return b.get(a)}).filter(Boolean)}});function a(a,b){return c("nullthrows")(a.comments.byId.get(b))}function b(a){var b=i(2),c;b[0]!==a?(c=function(b){return a==null?null:b.comments.translationById.get(a)},b[0]=a,b[1]=c):c=b[1];return d("PolarisReactRedux.react").useSelector(c)}g.selectVisibleCommentsForPostId=e;g.getPreviewCommentsForPostId=f;g.getCommentById=a;g.useCommentTranslation=b}),98);
__d("PolarisAPILikePost",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("PolarisInstapi").apiPost("/api/v1/web/likes/{media_id}/like/",{path:{media_id:a}})}g.likePost=a}),98);
__d("PolarisPostActionLikePost",["PolarisAPILikePost","PolarisAdsEngagementLogger","PolarisEngagementLogger","PolarisGenericStrings","PolarisLogger","PolarisSentryFeedbackActions","PolarisToastActions","QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,e){return function(f){d("PolarisLogger").logAction("likeAttempt",b);c("QPLUserFlow").start(c("qpl")._(379204822,"720"),{annotations:{string:{source:b==null?void 0:b.source}}});f({postId:a,type:"LIKE_POST_REQUESTED"});return d("PolarisAPILikePost").likePost(a).then(function(){e!=null?d("PolarisAdsEngagementLogger").logAdLike(b,e):d("PolarisEngagementLogger").logOrganicLike(b),c("QPLUserFlow").endSuccess(c("qpl")._(379204822,"720")),f({postId:a,type:"LIKE_POST_SUCCEEDED"})},function(e){var g;d("PolarisLogger").logAction("likeFailure",b);c("QPLUserFlow").endFailure(c("qpl")._(379204822,"720"),"request_failed");g=((g=e.responseObject)==null?void 0:g.spam)||!1;if(g){var i,j,k,l;g=(g=e.responseObject)==null?void 0:g.feedback_title;i=(i=e.responseObject)==null?void 0:i.feedback_message;j=(j=e.responseObject)==null?void 0:j.feedback_url;k=(k=e.responseObject)==null?void 0:k.feedback_action;l=(l=e.responseObject)==null?void 0:l.feedback_appeal_label;e=(e=e.responseObject)==null?void 0:e.restriction_enrollment_data;f(d("PolarisSentryFeedbackActions").showSentryFeedback({action:k,feedback_appeal_label:l,message:i,restriction_enrollment_data:e,source:b.source,sourceOfAction:"like_post",title:g,url:j}))}f({postId:a,type:"LIKE_POST_FAILED"});f(d("PolarisToastActions").showToast({actionHandler:function(){return f(h(a,b))},actionText:d("PolarisGenericStrings").RETRY_TEXT,text:d("PolarisGenericStrings").GENERIC_ERROR_MESSAGE}))})}}g.likePost=h}),98);
__d("PolarisPostActionLoadPostQuery",["PolarisPostActionLoadPostQueryInlineFragment.graphql","PolarisPostActionLoadPostQueryInlineFragmentWithoutRelatedProfiles.graphql","PolarisPostActionLoadPostQueryLegacyQuery.graphql","PolarisPostActionLoadPostQueryQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;a=h!==void 0?h:h=b("PolarisPostActionLoadPostQueryInlineFragment.graphql");c=i!==void 0?i:i=b("PolarisPostActionLoadPostQueryInlineFragmentWithoutRelatedProfiles.graphql");d=j!==void 0?j:j=b("PolarisPostActionLoadPostQueryQuery.graphql");e=k!==void 0?k:k=b("PolarisPostActionLoadPostQueryLegacyQuery.graphql");g.INLINE_FRAGMENT=a;g.INLINE_FRAGMENT_WITHOUT_RELATED_PROFILES=c;g.POST_QUERY=d;g.POST_QUERY_LEGACY=e}),98);
__d("PolarisPostActionPostPageLoaded",["nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return{postData:c("nullthrows")(a.shortcode_media),type:"POST_PAGE_LOADED"}}g.postPageLoaded=a}),98);
__d("PolarisAPIGetChildComments",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return d("PolarisInstapi").apiGet("/api/v1/media/{media_id}/comments/{parent_comment_id}/child_comments/",{path:{media_id:a,parent_comment_id:b},query:babelHelpers["extends"]({},c!=null?{max_id:c}:{})}).then(function(a){return a.data})}g.getChildComments=a}),98);
__d("PolarisAPIGetInitialComments",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return d("PolarisInstapi").apiGet("/api/v1/media/{media_id}/comments/",{path:{media_id:a},query:{can_support_threading:!0,permalink_enabled:!!b,sort_order:c!=null?String(c):void 0,target_comment_id:b}}).then(function(a){return a.data})}g.getInitialComments=a}),98);
__d("PolarisAPIGetPaginationComments",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){c===void 0&&(c=!0);return d("PolarisInstapi").apiGet("/api/v1/media/{media_id}/comments/",{path:{media_id:a},query:babelHelpers["extends"]({can_support_threading:!0},c===!0?{min_id:b}:{max_id:b},{sort_order:String(e)})}).then(function(a){return a.data})}g.getPaginationComments=a}),98);
__d("polarisTransformCommentEntities",["PolarisCommentModel","PolarisUserModel","polarisTransformEntities"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b;return{comments:c("polarisTransformEntities")((b=a.commentDicts)!=null?b:{},function(a){return c("PolarisCommentModel").fromNativeResponse(a).toReduxStore()}),users:c("polarisTransformEntities")((b=a.userDicts)!=null?b:{},function(a){return c("PolarisUserModel").fromNativeResponse(a).toReduxStore()})}}g["default"]=a}),98);
__d("PolarisThreadedCommentActions",["PolarisAPIGetChildComments","PolarisAPIGetInitialComments","PolarisAPIGetPaginationComments","PolarisLegacyGraphQLPaginationUtils","PolarisPaginationUtils","PolarisThreadedCommentActionConstants","nullthrows","polarisNormalizeComments","polarisTransformCommentEntities"],(function(a,b,c,d,e,f,g){"use strict";var h,i="6544739342301107",j="6718530511526291";function a(a){return{commentPageData:c("nullthrows")(a.shortcode_media),type:"MOBILE_ALL_COMMENTS_PAGE_LOADED"}}function b(a){return{parentId:a,type:"HIDE_CHILD_COMMENTS"}}function e(a){return{parentId:a,type:"SHOW_CHILD_COMMENTS"}}function k(a,b){b=b.map(function(a){return a.pk});var c={};for(var b=b,d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;f!=null&&a[f]!=null&&(c[f]=a[f])}return c}i=d("PolarisLegacyGraphQLPaginationUtils").generatePaginationActionCreators({getState:function(a,b){return a.threadedComments.parentByPostId.get(b).pagination},onError:function(a,b,c){return{fetch:b,postId:c,type:"PARENT_COMMENT_REQUEST_FAILED"}},onUpdate:function(a,b,d,e){b=b==null?void 0:(b=b.shortcode_media)==null?void 0:b.edge_media_to_parent_comment;var f={};if(b!=null)for(var g=b.edges,h=Array.isArray(g),i=0,g=h?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=g.length)break;j=g[i++]}else{i=g.next();if(i.done)break;j=i.value}j=j;var k=c("nullthrows")(j.node.edge_threaded_comments);k={comments:k.edges.map(function(a){return a.node}),count:k.count,pageInfo:k.page_info};f[j.node.id]=k}return{childComments:f,comments:b?b.edges.map(function(a){return a.node}):[],count:b&&b.count,fetch:a,hasRankedComments:e,pageInfo:b&&b.page_info,postId:d,type:"PARENT_COMMENT_REQUEST_UPDATED"}},pageSize:(h=d("PolarisThreadedCommentActionConstants")).PARENT_PAGE_SIZE,pagesToPreload:h.PAGES_TO_PRELOAD,queryId:i,queryParams:function(a,b,c){return{shortcode:c}}});h=d("PolarisLegacyGraphQLPaginationUtils").generatePaginationActionCreators({getState:function(a,b){return(a=a.threadedComments.childByParentId[b])==null?void 0:a.pagination},onError:function(a,b,c){return{fetch:b,parentId:c,type:"CHILD_COMMENT_REQUEST_FAILED"}},onUpdate:function(a,b,c){b=b==null?void 0:(b=b.comment)==null?void 0:b.edge_threaded_comments;return{comments:b&&b.edges?b.edges.map(function(a){return a.node}):[],count:b&&b.count,fetch:a,pageInfo:b&&b.page_info,parentId:c,type:"CHILD_COMMENT_REQUEST_UPDATED"}},pageSize:h.CHILD_PAGE_SIZE,pagesToPreload:h.PAGES_TO_PRELOAD,queryId:j,queryParams:function(a){return{comment_id:a}}});function l(a,b,e){var f,g=b.has_more_comments===!0||b.has_more_headload_comments===!0,h=b.has_more_headload_comments===!0,i=g?h?b.next_min_id:b.next_max_id:"";f=(f=b.comment_count)!=null?f:0;b=(b=b.comments)!=null?b:[];var j=c("polarisTransformCommentEntities")(d("polarisNormalizeComments").normalizeComments(b).entities);return{comments:k(j.comments,b),count:f,pagination:{end_cursor:i,has_next_page:g,has_previous_page:h},postId:a,sortOrder:e,type:"INITIAL_PARENT_COMMENT_REQUEST_LOADED",users:(b=j.users)!=null?b:{}}}function m(a){return{postId:a,type:"INITIAL_PARENT_COMMENT_REQUEST_FAILED"}}function n(a,b,c){return function(e,f){f=f();f=f.threadedComments;if(c!=null&&((f=f.parentByPostId[a])==null?void 0:f.sortOrder)===c)return;e({postId:a,type:"INITIAL_PARENT_COMMENT_REQUEST_LOADING"});return d("PolarisAPIGetInitialComments").getInitialComments(a,b,c).then(function(b){e(l(a,b,c))})["catch"](function(b){e(m(a))})}}function o(a,b){return function(e,f){var g;f=f();f=f.threadedComments;g=(g=(g=f.parentByPostId[a])==null?void 0:g.pagination)!=null?g:null;f=f.parentByPostId[a].sortOrder;if(g==null)return;var h=d("PolarisPaginationUtils").getEndCursor(g);if(h==null)return;e({postId:a,type:"PARENT_COMMENT_REQUEST_LOADING"});return d("PolarisAPIGetPaginationComments").getPaginationComments(a,h,d("PolarisPaginationUtils").hasPreviousPage(g)===!0,f).then(function(f){var g,h=f.has_more_comments===!0||f.has_more_headload_comments===!0,i=f.has_more_headload_comments===!0,j=h?i?f.next_min_id:f.next_max_id:"";g=(g=f.comment_count)!=null?g:0;f=(f=f.comments)!=null?f:[];var l=c("polarisTransformCommentEntities")(d("polarisNormalizeComments").normalizeComments(f).entities);e({comments:k(l.comments,f),count:g,hasRankedComments:(f=b)!=null?f:!1,pagination:{end_cursor:j,has_next_page:h,has_previous_page:i},postId:a,type:"PARENT_COMMENT_REQUEST_UPDATED_V2",users:(g=l.users)!=null?g:{}})})["catch"](function(){e({postId:a,type:"PARENT_COMMENT_REQUEST_FAILED_V2"})})}}function p(a,b){return function(e,f){e({parentId:b,type:"CHILD_COMMENT_REQUEST_LOADING"});f=f();f=f.threadedComments;f=(f=f.childByParentId[b])==null?void 0:f.pagination;var g;f!=null&&(g=d("PolarisPaginationUtils").getEndCursor(f));g=(f=g)!=null?f:null;return d("PolarisAPIGetChildComments").getChildComments(a,b,g).then(function(f){var g,h,i,j=f.has_more_head_child_comments===!0||f.has_more_tail_child_comments===!0;g=(g=f.next_max_child_cursor)!=null?g:"";h=(h=f.child_comment_count)!=null?h:0;f=(f=f.child_comments)!=null?f:[];f=c("polarisTransformCommentEntities")(d("polarisNormalizeComments").normalizeComments(f).entities);e({comments:(i=f.comments)!=null?i:{},count:h,pagination:{end_cursor:g,has_next_page:j},parentId:b,postId:a,type:"CHILD_COMMENT_REQUEST_UPDATED_V2",users:(i=f.users)!=null?i:{}})})["catch"](function(){e({parentId:b,type:"CHILD_COMMENT_REQUEST_FAILED_V2"})})}}j=i.next;function f(a,b){return function(c){return c(o(a,b))}}function q(a,b,c){return function(d){return d(n(a,b,c))}}i=h.next;function r(a,b){return function(c){return c(p(a,b))}}function s(a){return function(b){return function(c){c(l(a,b))}}}g.mobileAllCommentsPageLoaded=a;g.hideChildComments=b;g.showChildComments=e;g.initialCommentsError=m;g.requestNextParentCommentPage=j;g.requestNextParentCommentPageV2=f;g.requestInitialComments=q;g.requestNextChildCommentPage=i;g.requestNextChildCommentPageV2=r;g.setupPostComments=s}),98);
__d("PolarisPostActionLoadPost",["CometRelay","PolarisAdsActions","PolarisConfig","PolarisInstapi","PolarisMonitorErrors","PolarisPostActionLoadPostQuery","PolarisPostActionPostLoadedV2","PolarisPostActionPostPageLoaded","PolarisRelayEnvironment","PolarisThreadedCommentActions","asyncToGeneratorRuntime","nullthrows","polarisUnexpected"],(function(a,b,c,d,e,f,g){"use strict";var h=40,i=24,j=3;function a(a,e,f){f===void 0&&(f=!1);return function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,g){b({shortcode:a,type:"POST_PAGE_LOADING"});if(e!=null&&d("PolarisConfig").isLoggedIn())try{b(d("PolarisThreadedCommentActions").requestInitialComments(e));var k=(yield d("PolarisInstapi").apiGet("/api/v1/media/{media_id}/info/",{path:{media_id:e},query:{}}));k=k.data;if(k.items!=null){k=[].concat(k.items);var l=k[0];g=new Set(g().ads.feed.keys());l!=null&&l.ad_id!=null?b(d("PolarisAdsActions").adMediaInfoLoaded(k[0],a)):b(d("PolarisPostActionPostLoadedV2").postLoadedV2(k,a,g))}}catch(a){d("PolarisMonitorErrors").logError(a)}else{l=f?d("PolarisPostActionLoadPostQuery").POST_QUERY:d("PolarisPostActionLoadPostQuery").POST_QUERY_LEGACY;try{k=(yield d("CometRelay").fetchQuery(c("PolarisRelayEnvironment"),l,{child_comment_count:j,fetch_comment_count:h,has_threaded_comments:!0,parent_comment_count:i,shortcode:a}).toPromise());!f?g=d("CometRelay").readInlineData(d("PolarisPostActionLoadPostQuery").INLINE_FRAGMENT,k==null?void 0:k.xdt_shortcode_media):g=d("CometRelay").readInlineData(d("PolarisPostActionLoadPostQuery").INLINE_FRAGMENT_WITHOUT_RELATED_PROFILES,k==null?void 0:k.xdt_shortcode_media);b(d("PolarisPostActionPostPageLoaded").postPageLoaded({shortcode_media:c("nullthrows")(g)}))}catch(a){c("polarisUnexpected")(a)}}});return function(a,b){return g.apply(this,arguments)}}()}g.loadPost=a}),98);
__d("PolarisAPISavePost",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("PolarisInstapi").apiPost("/api/v1/web/save/{media_id}/save/",{path:{media_id:a}})}g.savePost=a}),98);
__d("PolarisPostActionSavePost",["PolarisAPISavePost","PolarisAdsEngagementLogger","PolarisLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return function(e){d("PolarisLogger").logAction("saveAttempt",b);e({postId:a,type:"SAVE_POST_REQUESTED"});return d("PolarisAPISavePost").savePost(a).then(function(){d("PolarisLogger").logAction("saveSuccess",b),e({postId:a,type:"SAVE_POST_SUCCEEDED"}),c!=null&&d("PolarisAdsEngagementLogger").logAdSave(c)},function(){d("PolarisLogger").logAction("saveFailure",b),e({postId:a,type:"SAVE_POST_FAILED"})})}}g.savePost=a}),98);
__d("PolarisAPIUnlikePost",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("PolarisInstapi").apiPost("/api/v1/web/likes/{media_id}/unlike/",{path:{media_id:a}})}g.unlikePost=a}),98);
__d("PolarisPostActionUnlikePost",["PolarisAPIUnlikePost","PolarisAdsEngagementLogger","PolarisEngagementLogger","PolarisGenericStrings","PolarisLogger","PolarisSentryFeedbackActions","PolarisToastActions","QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,e){return function(f){d("PolarisLogger").logAction("unlikeAttempt",b);c("QPLUserFlow").start(c("qpl")._(379198902,"749"),{annotations:{string:{source:b==null?void 0:b.source}}});f({postId:a,type:"UNLIKE_POST_REQUESTED"});return d("PolarisAPIUnlikePost").unlikePost(a).then(function(){e!=null?d("PolarisAdsEngagementLogger").logAdUnlike(b,e):d("PolarisEngagementLogger").logOrganicUnlike(b),c("QPLUserFlow").endSuccess(c("qpl")._(379198902,"749")),f({postId:a,type:"UNLIKE_POST_SUCCEEDED"})},function(e){var g;g=((g=e.responseObject)==null?void 0:g.spam)||!1;if(g){var i,j,k,l;g=(g=e.responseObject)==null?void 0:g.feedback_title;i=(i=e.responseObject)==null?void 0:i.feedback_message;j=(j=e.responseObject)==null?void 0:j.feedback_url;k=(k=e.responseObject)==null?void 0:k.feedback_action;l=(l=e.responseObject)==null?void 0:l.feedback_appeal_label;e=(e=e.responseObject)==null?void 0:e.restriction_enrollment_data;f(d("PolarisSentryFeedbackActions").showSentryFeedback({action:k,feedback_appeal_label:l,message:i,restriction_enrollment_data:e,source:b.source,sourceOfAction:"unlike_post",title:g,url:j}))}d("PolarisLogger").logAction("unlikeFailure",b);c("QPLUserFlow").endFailure(c("qpl")._(379198902,"749"),"request_failed");f({postId:a,type:"UNLIKE_POST_FAILED"});f(d("PolarisToastActions").showToast({actionHandler:function(){return f(h(a,b))},actionText:d("PolarisGenericStrings").RETRY_TEXT,text:d("PolarisGenericStrings").GENERIC_ERROR_MESSAGE}))})}}g.unlikePost=h}),98);
__d("PolarisAPIUnsavePost",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("PolarisInstapi").apiPost("/api/v1/web/save/{media_id}/unsave/",{path:{media_id:a}})}g.unsavePost=a}),98);
__d("PolarisPostActionUnsavePost",["PolarisAPIUnsavePost","PolarisAdsEngagementLogger","PolarisLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return function(e){d("PolarisLogger").logAction("unsaveAttempt",b);e({postId:a,type:"UNSAVE_POST_REQUESTED"});return d("PolarisAPIUnsavePost").unsavePost(a).then(function(){d("PolarisLogger").logAction("unsaveSuccess",b),e({postId:a,type:"UNSAVE_POST_SUCCEEDED"}),c!=null&&d("PolarisAdsEngagementLogger").logAdUnsave(c)},function(){d("PolarisLogger").logAction("unsaveFailure",b),e({postId:a,type:"UNSAVE_POST_FAILED"})})}}g.unsavePost=a}),98);
__d("PolarisPostRemoveCommentsSelectors",["reselect"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.postRemoveComments}b=d("reselect").createSelector(a,function(a){a=a.isVisible;return a});g.getPostRemoveCommentsIsVisible=b}),98);
__d("PolarisThreadedCommentSelectors",["PolarisPaginationUtils","immutable-4.0.0-rc.9","nullthrows","polarisCreateSelectorWithArg"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return!a.deleted&&!a.didReportAsSpam}b=c("polarisCreateSelectorWithArg")(function(a){return a.posts.byId},function(a){return a.comments.byId},function(a){return a.threadedComments.parentByPostId},function(a,b,e){return function(f){var g=e[f];f=a.get(f);if(!g||!f)return d("immutable-4.0.0-rc.9").List();var i=g.commentIds;g=d("PolarisPaginationUtils").getVisibleCount(g.pagination);f=f.hasRankedComments===!0?0:i.count()-g;return i.map(function(a){return c("nullthrows")(b.get(a))}).slice(f,f+g).filter(function(a){return h(a)})}});e=c("polarisCreateSelectorWithArg")(function(a){return a.comments.byId},function(a){return a.threadedComments.childByParentId},function(a,b){return function(e){e=c("nullthrows")(b[e]);var f=e.commentIds;e=e.pagination;f=f.map(function(b){return c("nullthrows")(a.get(b))});e=f.count()-d("PolarisPaginationUtils").getVisibleCount(e);var g=f.slice(e,f.count()).filter(function(a){return h(a)});f=f.slice(0,e).filter(function(a){return h(a)});e=f.map(function(a){return a.id});return{remainingCachedShowableChildCommentIds:e,visibleChildComments:g}}});f=c("polarisCreateSelectorWithArg")(function(a){return a.comments.byId},function(a){return a.threadedComments.childByParentId},function(a,b){return function(a){a=c("nullthrows")(b[a]);return a.count||0}});function a(a,b){return!!a.threadedComments.initialCommentsLoading[b]}g.selectVisibleParentCommentsForPostId=b;g.selectChildCommentsForParentIdSplitByVisibility=e;g.getTotalChildCommentCountForParentId=f;g.getThreadedCommentsLoading=a}),98);
__d("PolarisPostModalRenderingContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||(h=d("react"));var i=h.useContext,j=b.createContext({isInModal:!1});function a(){return i(j)}g.PolarisPostModalRenderingContext=j;g.usePolarisPostModalRenderingContext=a}),98);
__d("PolarisPostFeatures.react",["FBLogger","PolarisPostConstants","PolarisPostModalRenderingContext.react","PolarisPostVariants","PolarisReactRedux.react","PolarisRelationshipTypes","PolarisUA","polarisRelationshipSelectors.react","react","usePolarisDisplayProperties","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).unstable_useMemoCache,j=[{overrides:{threeLineHeaderEnabled:!0},predicate:"isThreeLineHeaderEnabled"},{overrides:{avatarSize:d("PolarisPostConstants").AVATAR_SIZE_SMALL,commentsAreStacked:!0},predicate:"isFeed"},{overrides:{avatarSize:d("PolarisPostConstants").AVATAR_SIZE_SMALL,commentsAreStacked:!0},predicate:"isWidePhotoOnMediumScreen"},{overrides:{avatarSize:d("PolarisPostConstants").AVATAR_SIZE_SMALL,hasThreadedSidebarComments:!0,showPostButton:!0},predicate:"isRichCommentsEnabled"},{overrides:{avatarSize:d("PolarisPostConstants").AVATAR_SIZE_SMALL,commentsAreStacked:!0,hasThreadedSidebarComments:!1,showPostButton:!0},predicate:"isStackedScreenSize"},{overrides:{hasPhotosOfYouOption:!0},predicate:"isViewerInUserTags"},{overrides:{showFollowButton:!1},predicate:"isFeedAndOwnerFollowedByViewer"},{overrides:{showFollowButton:!1},predicate:"isModalAndOwnerFollowedByViewer"},{overrides:{canViewerProvideFeedback:!1},predicate:"isOwnerPrivate"},{overrides:{canViewerProvideFeedback:!0},predicate:"isOwnerFollowedByViewer"},{overrides:{canViewerProvideFeedback:!0,showFollowButton:!1},predicate:"isOwnerTheViewer"},{overrides:{showFollowButton:!1},predicate:"isOwnerUnpublished"},{overrides:{showFollowButton:!1},predicate:"isBlocked"},{overrides:{showFollowButton:!1},predicate:"hasFollowHashtagInfo"},{overrides:{canViewerProvideFeedback:!1},predicate:"isLoggedOut"}],k={avatarSize:d("PolarisPostConstants").AVATAR_SIZE_LARGE,canViewerProvideFeedback:!0,commentsAreStacked:!1,hasPhotosOfYouOption:!1,hasThreadedSidebarComments:!1,showFollowButton:!0,showPostButton:!1,threeLineHeaderEnabled:!1};function l(a){var b=a.isInModal,c=a.owner,e=a.post,f=a.relationship,g=a.variant,h=a.viewer;a=a.viewportWidth;g=g===d("PolarisPostVariants").VARIANTS.feed;var i=Boolean(h),j=!h,k=(h==null?void 0:h.id)===c.id,l=f.followedByViewer.state===d("PolarisRelationshipTypes").FOLLOW_STATUS_FOLLOWING,m=Boolean(e.followHashtagInfo),n=Boolean(e.location)&&(e.sponsors||[]).length>0;return{hasFollowHashtagInfo:m,isBlocked:f.hasBlockedViewer.state===d("PolarisRelationshipTypes").BLOCK_STATUS_BLOCKED,isFavorited:((m=f.favoritedByViewer)==null?void 0:m.state)===d("PolarisRelationshipTypes").FAVORITE_STATUS_FAVORITED,isFeed:g,isFeedAndOwnerFollowedByViewer:g&&l,isLoggedIn:i,isLoggedOut:j,isModalAndOwnerFollowedByViewer:b&&l,isOwnerFollowedByViewer:l,isOwnerPrivate:Boolean(c.isPrivate),isOwnerTheViewer:k,isOwnerUnpublished:Boolean(c.isUnpublished),isRichCommentsEnabled:!0,isSidecar:(e.sidecarChildren||[]).length>0,isStackedScreenSize:a<d("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF,isThreeLineHeaderEnabled:n,isViewerInUserTags:i&&(e.usertags||[]).some(function(a){return a.user.id===(h==null?void 0:h.id)}),isWidePhotoOnMediumScreen:Boolean(e.dimensions&&e.dimensions.width/e.dimensions.height>1.5&&a>d("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF&&a<=d("PolarisPostConstants").MEDIUM_SCREEN_MAX)}}function m(a){var b=l(a);a=b.isBlocked;var d=b.isFavorited,e=b.isLoggedIn,f=b.isSidecar,g=b.isStackedScreenSize;return babelHelpers["extends"]({isBlocked:a,isFavorited:d,isLoggedIn:e,isSidecar:f,isStackedScreenSize:g},j.filter(function(a){a=a.predicate;var d=b[a];if(typeof d!=="boolean")throw c("FBLogger")("instagram_web").mustfixThrow("Could not find predicate %s",a);return d}).reduce(function(a,b){b=b.overrides;return babelHelpers["extends"]({},a,b)},k))}function a(a){var b=i(2),e=a.owner,f=a.path,g=a.post;a=a.variant;var h;b[0]!==e.id?(h=function(a){return d("polarisRelationshipSelectors.react").getRelationship(a.relationships,e.id)},b[0]=e.id,b[1]=h):h=b[1];b=d("PolarisReactRedux.react").useSelector(h);h=c("usePolarisViewer")();var j=c("usePolarisDisplayProperties")(),k=j.viewportHeight;j=j.viewportWidth;var l=d("PolarisPostModalRenderingContext.react").usePolarisPostModalRenderingContext();l=l.isInModal;l={isInModal:l,isMobile:d("PolarisUA").isMobile(),owner:e,path:f,post:g,relationship:b,variant:a,viewer:h,viewportHeight:k,viewportWidth:j};return m(l)}g.getPostFeatures=m;g.usePolarisPostFeatures=a}),98);
__d("PolarisVideoViewedTimeAction",["convertToViewabilityPercentage","gkx","memoizeStringOnly","polarisVideoEventLogger","polarisVideoUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=c("memoizeStringOnly")(function(a){return new Map()}),i=c("memoizeStringOnly")(function(a){return new Map()}),j=c("memoizeStringOnly")(function(){return new Map()});function k(a){a=a.video;var b=a.getDeclarativeVideoRef();return{lastStartPosition:(b=b==null?void 0:b.getCurrentTime())!=null?b:0,loopCount:a.getLoopCount()}}function l(a){var b=a.adTrackingToken,c=a.context,e=a.initialData,f=a.post;a=a.video;var g=a.getDeclarativeVideoRef();return{adTrackingToken:b,analyticsContext:c,carouselParentId:f.carouselParentId,currentVideoTime:d("polarisVideoUtils").getCurrentVideoTime(g),dashInfo:d("polarisVideoUtils").getDashInfo(f),duration:g==null?void 0:g.getDuration(),id:f.id,isAd:!0,lastStartPosition:e.lastStartPosition,loopCount:a.getLoopCount()-e.loopCount,ownerId:(b=f.owner)==null?void 0:b.id,postedAt:f.postedAt,sequenceNumber:a.getNextSequenceNumber(),timeAtVideoPause:d("polarisVideoUtils").getTimeAtVideoPause(g),trackingToken:f.trackingToken,videoWidth:g==null?void 0:(c=g.getVideo())==null?void 0:c.videoWidth}}function a(a,b,e,f){return function(g){if(b.current==null)return;var m=b.current,n=h(e),o=i(e),p=a.id;g.percentVisible>=.5&&!n.has(p)&&n.set(p,k({video:m}));g.percentVisible>=1&&!o.has(p)&&o.set(p,k({video:m}));var q=n.get(p);q!=null&&g.percentVisible<.5&&(n["delete"](p),d("polarisVideoEventLogger").logVideoViewedTime(l({adTrackingToken:f,context:e,initialData:q,post:a,video:m})));n=o.get(p);n&&g.percentVisible<1&&(o["delete"](p),d("polarisVideoEventLogger").logVideoFullViewedTime(l({adTrackingToken:f,context:e,initialData:n,post:a,video:m})));if(!c("gkx")("25360"))return;q=j(e);o=q.get(p);n=c("convertToViewabilityPercentage")(g.percentVisible);g=m.getDeclarativeVideoRef();if(n!==o){q.set(p,n);d("polarisVideoEventLogger").logVideoViewabilityChanged({adTrackingToken:f,analyticsContext:e,carouselParentId:a.carouselParentId,currentVideoTime:d("polarisVideoUtils").getCurrentVideoTime(g),currentViewabilityPercentage:n,dashInfo:d("polarisVideoUtils").getDashInfo(a),duration:g==null?void 0:g.getDuration(),id:a.id,isAd:!0,ownerId:(o=a.owner)==null?void 0:o.id,sequenceNumber:m.getNextSequenceNumber(),trackingToken:a.trackingToken})}}}g.makeVideoViewTimeAction=a}),98);
__d("PolarisLikedByListContainerLazy.react",["CometPlaceholder.react","JSResourceForInteraction","lazyLoadComponent","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h,k=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisLikedByListContainer.react").__setRef("PolarisLikedByListContainerLazy.react"));function a(a){var b=i(2),d;b[0]!==a?(d=j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(k,babelHelpers["extends"]({},a))}),b[0]=a,b[1]=d):d=b[1];return d}g["default"]=a}),98);
__d("PolarisEmbedHashHelpers",["memoize"],(function(a,b,c,d,e,f,g){"use strict";a=c("memoize")(function(){var a=window.location.hash;a=decodeURIComponent(a.substring(a.indexOf("#")+1));try{a=JSON.parse(a)}catch(b){a={}}return{clientId:a.ci,offset:a.os,sdkLoadEnd:a.le,sdkLoadStart:a.ls}});g.getHashPayload=a}),98);
__d("polarisGetEmbedRequestID",["nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("nullthrows")(document.querySelector(".Embed"));return a.getAttribute("data-request-id")}g["default"]=a}),98);
__d("PolarisEmbedLogger",["InstagramQueryParamsHelper","PolarisEmbedHashHelpers","PolarisLogger","PolarisLoggerUtils","PolarisPigeonLogger","gkx","polarisGetEmbedRequestID"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=d("PolarisLoggerUtils").trimAndSanitizeUrl(a||window.location.href);var b=c("polarisGetEmbedRequestID")();return b!=null?d("InstagramQueryParamsHelper").appendQueryParams(a,{ig_rid:b}):a}function a(a,b,e){if(!c("gkx")("25394"))return;var f=d("PolarisLogger").getExtra(),g=f.url;f=babelHelpers.objectWithoutPropertiesLoose(f,["url"]);a=babelHelpers["extends"]({client_id:d("PolarisEmbedHashHelpers").getHashPayload().clientId,event_name:a.actionName,is_copyright_blocked:a.isCopyrightBlocked,media_id:a.mediaId,media_type:a.mediaType,owner_id:a.ownerId===""?null:a.ownerId},f);f=babelHelpers["extends"]({obj_id:h(g),obj_type:"url"},e);d("PolarisLogger").logPigeonEvent(d("PolarisPigeonLogger").createEvent("instagram_web_embeds",a,f),b)}function i(a,b,c){var e=d("PolarisLogger").getAnonymousExtra(),f=e.url;e=babelHelpers.objectWithoutPropertiesLoose(e,["url"]);a=babelHelpers["extends"]({client_id:d("PolarisEmbedHashHelpers").getHashPayload().clientId,event_name:a.actionName,is_copyright_blocked:a.isCopyrightBlocked,media_id:a.mediaId,media_type:a.mediaType,owner_id:a.ownerId===""?null:a.ownerId},e);e=babelHelpers["extends"]({obj_id:h(f),obj_type:"url"},c);d("PolarisLogger").logPigeonEvent(d("PolarisPigeonLogger").createEvent("instagram_web_embeds_anonymous",a,e),b)}function b(a){var b=a.isCopyrightBlocked,c=a.mediaId,d=a.mediaType;a=a.ownerId;i({actionName:"view",isCopyrightBlocked:b,mediaId:c,mediaType:d,ownerId:a})}function e(a,b,e){if(!c("gkx")("25394"))return;a=d("PolarisLogger").getExtra(a);var f=a.url;a=babelHelpers.objectWithoutPropertiesLoose(a,["url"]);a=babelHelpers["extends"]({client_id:d("PolarisEmbedHashHelpers").getHashPayload().clientId,parent_url:window.document.referrer},a);f=babelHelpers["extends"]({obj_id:h(f),obj_type:"url"},e);d("PolarisLogger").logPigeonEvent(d("PolarisPigeonLogger").createEvent("instagram_web_embed_perf_events",a,f),b)}g.logEmbedAction=a;g.logEmbedPageView=b;g.logEmbedTimings=e}),98);
__d("PolarisEmbedVideoWatchAgain.react",["cx","fbt","PolarisEmbedLogger","PolarisFastLink.react","PolarisLinkBuilder","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=(j||(j=d("react"))).unstable_useMemoCache,l=j,m=i._("__JHASH__WT4Q1op-CT7__JHASH__"),n=i._("__JHASH__IQuGN-11QOS__JHASH__"),o="https://www.instagram.com";function p(a){var b=k(4),d=a.className,e=a.href;a=a.onClick;var f;b[0]!==d||b[1]!==e||b[2]!==a?(f=l.jsx(c("PolarisFastLink.react"),{"aria-label":m,className:d,href:e,onClick:a,target:"_blank"}),b[0]=d,b[1]=e,b[2]=a,b[3]=f):f=b[3];return f}function a(a){var b=k(23),e=a.post;a=e.code;a=a!=null&&a.length>0?d("PolarisLinkBuilder").buildMediaLink(a):"";a=""+o+a+"?utm_source=ig_embed&utm_campaign=embed_video_watch_again";var f;b[0]!==e.id||b[1]!==e.owner?(f=function(){var a;d("PolarisEmbedLogger").logEmbedAction({actionName:"videoWatchAgainClick",mediaId:e.id,mediaType:"video",ownerId:((a=e.owner)==null?void 0:a.id)||""})},b[0]=e.id,b[1]=e.owner,b[2]=f):f=b[2];f=f;var g;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(g="_aar9",b[3]=g):g=b[3];var h;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(h="_aara",b[4]=h):h=b[4];var i;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(i="_aarb _9zwu",b[5]=i):i=b[5];b[6]!==a||b[7]!==f?(i=l.jsx(c("PolarisFastLink.react"),{"aria-label":n,className:i,href:a,onClick:f,target:"_blank"}),b[6]=a,b[7]=f,b[8]=i):i=b[8];var j;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(j="_aarc",b[9]=j):j=b[9];b[10]!==a||b[11]!==f?(j=l.jsx(c("PolarisFastLink.react"),{"aria-label":n,className:j,href:a,onClick:f,target:"_blank",children:n}),b[10]=a,b[11]=f,b[12]=j):j=b[12];b[13]!==i||b[14]!==j?(g=l.jsx("div",{className:g,children:l.jsxs("div",{className:h,children:[i,j]})}),b[13]=i,b[14]=j,b[15]=g):g=b[15];b[16]===Symbol["for"]("react.memo_cache_sentinel")?(h="_aard",b[16]=h):h=b[16];b[17]!==a||b[18]!==f?(i=l.jsx(p,{className:h,href:a,onClick:f}),b[17]=a,b[18]=f,b[19]=i):i=b[19];b[20]!==g||b[21]!==i?(j=l.jsxs(l.Fragment,{children:[g,i]}),b[20]=g,b[21]=i,b[22]=j):j=b[22];return j}g["default"]=a}),226);
__d("PolarisEmbedVideo.react",["cx","PolarisEmbedLogger","PolarisEmbedVideoWatchAgain.react","PolarisUserTagIndicatorWithSheet.react","PolarisVideoHeight","PolarisVideoPlayButton.react","Run","joinClasses","keyMirror","nullthrows","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k="video/mp4",l=c("keyMirror")({finished:null,paused:null,playing:null}),m="embedVideo";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.$1=j.createRef();c.$2=!1;c.$3=null;c.handleVisiblityChange=function(){c.state.playerState!=null&&document.visibilityState&&document.visibilityState==="hidden"&&c.stop()};c.handleBeforeUnload=function(){c.state.playerState===l.playing&&c.stop()};c.handlePlayerPlayEvent=function(){c.setState({playerState:l.playing})};c.handlePlayerPauseEvent=function(){c.pause()};c.handlePlayerEndedEvent=function(){c.stop()};c.handleContainerClick=function(a){c.state.playerState!==l.playing?c.play():c.pause()};b={playerState:null};c.state=b;return c}var e=b.prototype;e.componentDidMount=function(){document.addEventListener("visibilitychange",this.handleVisiblityChange);this.$3=d("Run").onBeforeUnload(this.handleBeforeUnload);var a=c("nullthrows")(this.$1.current);a.addEventListener("play",this.handlePlayerPlayEvent);a.addEventListener("pause",this.handlePlayerPauseEvent);a.addEventListener("ended",this.handlePlayerEndedEvent)};e.componentDidUpdate=function(a){this.props.isVisible===!1&&a.isVisible===!0&&this.pause()};e.componentWillUnmount=function(){this.handleBeforeUnload();document.removeEventListener("visibilitychange",this.handleVisiblityChange);this.$3!=null&&(this.$3.remove(),this.$3=null);var a=c("nullthrows")(this.$1.current);a.removeEventListener("play",this.handlePlayerPlayEvent);a.removeEventListener("pause",this.handlePlayerPauseEvent);a.removeEventListener("ended",this.handlePlayerEndedEvent)};e.play=function(){if(this.state.playerState===l.playing)return;if(this.$2===!1){var a;d("PolarisEmbedLogger").logEmbedAction({actionName:"videoFirstPlayClick",mediaId:this.props.post.id,mediaType:"video",ownerId:((a=this.props.post.owner)==null?void 0:a.id)||""});this.$2=!0}c("nullthrows")(this.$1.current).play()};e.pause=function(){if(this.state.playerState!==l.playing)return;c("nullthrows")(this.$1.current).pause();this.setState({playerState:l.paused})};e.stop=function(){if(this.state.playerState===l.finished)return;var a=c("nullthrows")(this.$1.current);a.pause();a.currentTime=0;this.setState({playerState:l.finished})};e.render=function(){var a=this.props,b=a.className;a=a.post;var e=this.state.playerState,f={},g={};d("PolarisVideoHeight").setVideoHeightCompensation(a,!0,f,g);var h=e===l.finished;e=!e||e===l.paused;return j.jsxs("div",{className:c("joinClasses")(b,"_aand"),style:f,children:[j.jsx("div",{style:g,children:j.jsx("video",{className:"_aane",controls:!1,controlsList:void 0,"data-testid":void 0,loop:!1,playsInline:!0,poster:a.src,preload:"none",ref:this.$1,src:a.videoUrl,type:k})}),h?j.jsx(c("PolarisEmbedVideoWatchAgain.react"),{post:a}):j.jsx(c("PolarisVideoPlayButton.react"),{onClick:this.handleContainerClick,showPlayButton:e}),a.usertags&&a.usertags.length>=1&&j.jsx(c("PolarisUserTagIndicatorWithSheet.react"),{analyticsContext:m,mediaId:a.id,post:a,usertags:a.usertags})]})};return b}(j.Component);g["default"]=a}),98);
__d("PolarisPhotoWrapper.react",["InstagramODS","PolarisClickEventLoggerProvider.react","PolarisExternalLink.react","PolarisSponsoredPostContext.react","PolarisTrackingNodeProvider.react","PolarisUA","polarisAdsSelectors.react","react","usePolarisOffsiteTrackingDataURLParams"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useContext,k=b.unstable_useMemoCache;e=i.forwardRef(a);function l(a){var b=k(9),d=a.children,e=a.externalURL;a=a.wrappedRef;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(){c("InstagramODS").incr("web.ads.feed.link_click")},b[0]=f):f=b[0];f=f;var g;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(g="x4gyw5p",b[1]=g):g=b[1];var h=c("usePolarisOffsiteTrackingDataURLParams")(e);b[2]!==e||b[3]!==h||b[4]!==d?(g=i.jsx(c("PolarisExternalLink.react"),{className:g,href:e,ignoreDoubleClick:!0,onClick:f,queryParams:h,children:d}),b[2]=e,b[3]=h,b[4]=d,b[5]=g):g=b[5];b[6]!==a||b[7]!==g?(f=i.jsx(c("PolarisClickEventLoggerProvider.react"),{ignoreDoubleClick:!0,children:i.jsx(c("PolarisTrackingNodeProvider.react"),{trackingNode:86,children:i.jsx("div",{ref:a,children:g})})}),b[6]=a,b[7]=g,b[8]=f):f=b[8];return f}function a(a,b){var e=k(8),f=a.children;a=a.postId;var g;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=function(a){return a},e[0]=g):g=e[0];g=d("polarisAdsSelectors.react").useFeedAdInfo(a,g);var h=j(d("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext);h=h.singleImageAdAsCta;a=g==null?void 0:(g=g.ctaItems)==null?void 0:(g=g.get(a))==null?void 0:g.ctaLinkUrl;if(a!=null&&h&&d("PolarisUA").isDesktop()){e[1]!==a||e[2]!==b||e[3]!==f?(g=i.jsx(c("PolarisTrackingNodeProvider.react"),{trackingNode:12,children:i.jsx("div",{children:i.jsx(l,{externalURL:a,wrappedRef:b,children:f})})}),e[1]=a,e[2]=b,e[3]=f,e[4]=g):g=e[4];return g}e[5]!==b||e[6]!==f?(h=i.jsx("div",{ref:b,children:f}),e[5]=b,e[6]=f,e[7]=h):h=e[7];return h}f=e;g["default"]=f}),98);
__d("PolarisMedia.react",["PolarisDoubleTappable","PolarisEmbedVideo.react","PolarisFeedSeenStateManagerSingleton","PolarisIGCoreToast.react","PolarisIsLoggedInDesktop","PolarisLikeAnimation.react","PolarisMediaVideo.react","PolarisPhoto.react","PolarisPhotoWithIndicator.react","PolarisPhotoWrapper.react","PolarisSensitivityOverlay.react","PolarisSidecarMedia.react","PolarisVideoViewedTimeAction","PolarisViewpointReact.react","nullthrows","polarisVideoUtils","polarisWithRemountOnChange","react","usePolarisMediaSensitivityOverlay"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useState;function a(a){var b=j(!1),e=b[0],f=b[1];b=j(!1);var g=b[0],h=b[1];b=j(0);var k=b[0],l=b[1],m=c("PolarisFeedSeenStateManagerSingleton").get();b=function(){a.onLike&&(a.onLike(),l(k+1))};var n=function(){f(!0)},o=function(){f(!1)},p=function(b,c){var d=a.onMediaRendered,e=a.post;if(e.isVideo===!0)return;d&&d({mediaType:"Photo",resourceName:b,timeTaken:c})},q=function(a){switch(a.state){case"entered":case"updated":a=a.percentVisible>.2;g!==a&&h(a);break;case"exited":h(!1)}},r=function(b,c){if(b===!0&&a.autoplay===!0){if(d("polarisVideoUtils").isFeed(a.analyticsContext))return!1;if(c===0&&d("PolarisIsLoggedInDesktop").isLoggedInDesktop())return!0}return!1},s=a.adInfo,t=a.analyticsContext,u=a.asSidecarChild,v=a.autoplay;a.checkIsSensitivityOverlayDisabledCallback;var w=a.commentsAreStacked,x=a.firstSidecarChildSrc;a.hasViewInsights;var y=a.id;a.initialCarouselIndex;var z=a.isEmbed,A=a.isVisible,B=a.mediaFooter;a.onLike;a.onMediaRendered;var C=a.onSensitivityOverlayCleared;a.onSetModal;var D=a.onSidecarChildIndexChange,E=a.onToastClose,F=a.onVideoFinished,G=a.onVideoLoop,H=a.post,I=a.relationship,J=a.sensitivityOverlayMediaOverlayInfoLoggingProps,aa=a.showToast,K=a.toastString,ba=a.viewer,ca=a.visiblePosition,L=babelHelpers.objectWithoutPropertiesLoose(a,["adInfo","analyticsContext","asSidecarChild","autoplay","checkIsSensitivityOverlayDisabledCallback","commentsAreStacked","firstSidecarChildSrc","hasViewInsights","id","initialCarouselIndex","isEmbed","isVisible","mediaFooter","onLike","onMediaRendered","onSensitivityOverlayCleared","onSetModal","onSidecarChildIndexChange","onToastClose","onVideoFinished","onVideoLoop","post","relationship","sensitivityOverlayMediaOverlayInfoLoggingProps","showToast","toastString","viewer","visiblePosition"]),M=H||{},N=M.dimensions,da=M.displayResources,O=M.upcomingEvent,P=M.id,Q=M.isVideo;Q=Q===void 0?!1:Q;var R=M.mediaPreview,S=M.owner,T=M.sidecarChildren;T=T===void 0?[]:T;var U=M.src;M=M.usertags;var V=T&&T.length>0,W=[];!V&&d("polarisVideoUtils").isFeed(t)&&W.push(function(a){m.addImpressionFromPost(H,a)});var X=!1;C=c("usePolarisMediaSensitivityOverlay")(H,t,C,a.checkIsSensitivityOverlayDisabledCallback);var ea=C.handleHideSensitivityOverlay,Y=C.mediaOverlayCoverInfo;C=C.shouldShowSensitivityOverlay;if(S&&C){C=J||{};J=C.checkIfMediaOverlayInfoImpressionLoggingDisabled;C=C.onLoggedMediaOverlayInfoImpression;J=i.jsx(c("PolarisSensitivityOverlay.react"),{analyticsContext:t,asSidecarChild:u,dimensions:N,disableMediaOverlayInfoImpressionLogging:J!=null?J(P):!1,isPhoto:!Q&&!V,isVisible:A,mediaId:P,mediaOverlayCoverInfo:Y,onLoggedMediaOverlayInfoImpression:C,onShowPostClicked:function(){return ea(H)},ownerId:S.id,previewData:R})}else if(V){if(w===!0)X=!0,Y=a;else{a.mediaFooter;C=babelHelpers.objectWithoutPropertiesLoose(a,["mediaFooter"]);Y=C}J=i.jsx(c("PolarisSidecarMedia.react"),babelHelpers["extends"]({},Y,{onChildIndexChange:D,sidecarChildren:T}))}else if(Q){var Z=g;S=[q];R=i.createRef();s!=null&&s.tracking_token!=null&&S.push(d("PolarisVideoViewedTimeAction").makeVideoViewTimeAction(a.post,R,t,s.tracking_token));J=i.jsx(d("PolarisViewpointReact.react").Viewpoint,{action:[].concat(S,W),id:H.id,children:function(b){return i.jsxs("div",{ref:b,children:[z===!0?i.jsx(c("PolarisEmbedVideo.react"),{className:a.className,isVisible:Z,post:H}):i.jsx(c("PolarisMediaVideo.react"),{adInfo:s,analyticsContext:t,asSidecarChild:u,autoplay:v,className:a.className,firstSidecarChildSrc:x,isVisible:Z,onFinished:F,onLoop:G,post:H,relationship:I,shouldAutoPlay:r(Z,ca),upcomingEventMediaId:y}),aa===!0&&K!=null&&i.jsx(c("PolarisIGCoreToast.react"),{absolutePosition:!0,duration:3e3,onClose:E,wide:!0,children:K})]})}})}else{V={dimensions:N,likeEventCount:k,onPhotoRendered:p,postId:P,src:c("nullthrows")(U),srcSet:da};var $;M&&M.length>0||O?$=i.jsx(d("PolarisPhotoWithIndicator.react").PhotoWithIndicator,babelHelpers["extends"]({},L,V,{analyticsContext:t,isFocused:e,isVisible:A,upcomingEvent:O,upcomingEventMediaId:y,upcomingEventThumbnailSrc:c("nullthrows")(u===!0?x:U),usertags:M,viewer:ba})):$=i.jsx(c("PolarisPhoto.react"),babelHelpers["extends"]({},L,V,{analyticsContext:t}));w=[].concat(W);C=i.jsx(d("PolarisViewpointReact.react").Viewpoint,{action:w,id:H.id,children:function(a){return i.jsx(c("PolarisPhotoWrapper.react"),{postId:H.id,ref:a,children:$})}});J=i.jsxs(d("PolarisDoubleTappable").DoubleTappable,{onBlur:o,onDoubleClick:b,onFocus:n,role:"button",children:[C,i.jsx(c("PolarisLikeAnimation.react"),{likeEventCount:k},k)]})}B!=null&&!X&&(J=i.jsxs(i.Fragment,{children:[J,B]}));return J}a.displayName=a.name+" [from "+f.id+"]";function b(a,b){return a.id!==b.id}e=c("polarisWithRemountOnChange")(b)(a);g["default"]=e}),98);
__d("PolarisSidecarChild.react",["IGDSBox.react","PolarisMedia.react","PolarisOrganicImpressionAction","PolarisViewpointReact.react","PolarisVpvdImpressionAction","cr:5000","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var e=i(43),f;if(e[0]!==a){var g=a.index,h=a.media,k=a.mediaWidth;a.onChildIndexChange;var l=a.sidecarChildIndex,m=a.sidecarChildren,n=a.analyticsContext,o=a.isVisible;a.mediaFooter;var p=a.onMediaRendered,q=a.post,r=babelHelpers.objectWithoutPropertiesLoose(a,["index","media","mediaWidth","onChildIndexChange","sidecarChildIndex","sidecarChildren","analyticsContext","isVisible","mediaFooter","onMediaRendered","post"]);g=g;h=h;f=k;k=l;l=m;m=n;n=o;o=p;p=q;q=r;e[0]=a;e[1]=h;e[2]=l;e[3]=k;e[4]=g;e[5]=n;e[6]=q;e[7]=m;e[8]=o;e[9]=f;e[10]=p}else h=e[1],l=e[2],k=e[3],g=e[4],n=e[5],q=e[6],m=e[7],o=e[8],f=e[9],p=e[10];e[11]!==h||e[12]!==l||e[13]!==k||e[14]!==g||e[15]!==n||e[16]!==q||e[17]!==m||e[18]!==o?(r=h.isUpsell===!0&&b("cr:5000")!=null?j.jsx(b("cr:5000"),{upsellSidecarChild:h}):j.jsx(c("PolarisMedia.react"),babelHelpers["extends"]({},q,{accessibilityCaption:h.accessibilityCaption,analyticsContext:m,asSidecarChild:!0,firstSidecarChildSrc:l[0].src,isVisible:k===g?n:!1,onMediaRendered:o,post:h})),e[11]=h,e[12]=l,e[13]=k,e[14]=g,e[15]=n,e[16]=q,e[17]=m,e[18]=o,e[19]=r):r=e[19];var s=r;if(g===0){e[20]!==h.id||e[21]!==f||e[22]!==s?(a=j.jsx(c("IGDSBox.react"),{position:"relative",width:f,children:s},h.id),e[20]=h.id,e[21]=f,e[22]=s,e[23]=a):a=e[23];return a}e[24]!==h||e[25]!==m?(k=d("PolarisOrganicImpressionAction").makeCarouselImpressionAction(h,m),e[24]=h,e[25]=m,e[26]=k):k=e[26];n=l[0];e[27]!==h||e[28]!==n||e[29]!==g||e[30]!==p.id||e[31]!==m?(q=d("PolarisVpvdImpressionAction").makeCarouselVpvdImpressionAction(h,n,g,p.id,m),e[27]=h,e[28]=n,e[29]=g,e[30]=p.id,e[31]=m,e[32]=q):q=e[32];e[33]!==k||e[34]!==q?(o=[k,q],e[33]=k,e[34]=q,e[35]=o):o=e[35];e[36]!==f||e[37]!==s?(r=function(a){return j.jsx(c("IGDSBox.react"),{containerRef:a,position:"relative",width:f,children:s})},e[36]=f,e[37]=s,e[38]=r):r=e[38];e[39]!==o||e[40]!==h.id||e[41]!==r?(a=j.jsx(d("PolarisViewpointReact.react").Viewpoint,{action:o,id:h.id,children:r},h.id),e[39]=o,e[40]=h.id,e[41]=r,e[42]=a):a=e[42];return a}g["default"]=a}),98);
__d("usePolarisSidecarMediaOrUpsell",["PolarisConfig","PolarisUA","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).unstable_useMemoCache,j=4,k=2;function a(a){var b=i(3),c=a.post;a=a.sidecarChildren;if(d("PolarisConfig").isLoggedIn()||d("PolarisUA").isDesktop()||a.some(function(a){return a.mediaOverlayInfo!=null})||c.dimensions===null||c.owner===null)return a;var e;if(b[0]!==a||b[1]!==c){e=[].concat(a);var f=e.length>=j?k:null;if(f!=null&&e[f-1].mediaPreview!=null){var g={dimensions:c.dimensions,id:"",isUpsell:!0,isVideo:!1,mediaPreview:e[f-1].mediaPreview,owner:c.owner,src:""};e.splice(f,0,g)}b[0]=a;b[1]=c;b[2]=e}else e=b[2];return e}g["default"]=a}),98);
__d("PolarisSidecarMedia.react",["PolarisSidecar.react","PolarisSidecarChild.react","react","usePolarisSidecarMediaOrUpsell"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.unstable_useMemoCache;function a(a){var b=j(15),e,f,g,h;b[0]!==a?(g=a.sidecarChildren,h=a.initialCarouselIndex,f=a.post,e=babelHelpers.objectWithoutPropertiesLoose(a,["sidecarChildren","initialCarouselIndex","post"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h):(e=b[1],f=b[2],g=b[3],h=b[4]);b[5]!==e.onChildIndexChange?(a=function(a,b,c){return[e.onChildIndexChange].filter(Boolean).forEach(function(d){return d(a,b,c)})},b[5]=e.onChildIndexChange,b[6]=a):a=b[6];a=a;var k=c("usePolarisSidecarMediaOrUpsell")({post:f,sidecarChildren:g});g=function(a,b){return k.map(function(d,g){return i.jsx(c("PolarisSidecarChild.react"),babelHelpers["extends"]({index:g,media:d,mediaWidth:a,post:f,sidecarChildIndex:b,sidecarChildren:k},e),g)})};var l;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(l=function(a){a=a.dimensions;return a},b[7]=l):l=b[7];l=k.map(l).filter(Boolean);var m;b[8]!==l||b[9]!==h||b[10]!==e.mediaFooter||b[11]!==k.length||b[12]!==a||b[13]!==g?(m=i.jsx(d("PolarisSidecar.react").Sidecar,{dimensions:l,initialCarouselIndex:h,mediaFooter:e.mediaFooter,numSidecarChildren:k.length,onChildIndexChange:a,renderSidecarChildren:g}),b[8]=l,b[9]=h,b[10]=e.mediaFooter,b[11]=k.length,b[12]=a,b[13]=g,b[14]=m):m=b[14];l=m;return l}g["default"]=a}),98);
__d("PolarisMediaContainer.react",["PolarisMedia.react","PolarisReactRedux.react","polarisPostSelectors","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");function a(a,b){return{onMediaRendered:d("polarisPostSelectors").getOnMediaRendered(a,b.onPostMediaRendered)}}function b(a,b){return{onSidecarChildIndexChange:function(a,c,d){a=b.onPostSidecarChildIndexChange;a&&a(c)}}}function e(a,b,c){c.onPostMediaRendered;c.onPostSidecarChildIndexChange;c=babelHelpers.objectWithoutPropertiesLoose(c,["onPostMediaRendered","onPostSidecarChildIndexChange"]);return babelHelpers["extends"]({},c,a,b)}f=d("PolarisReactRedux.react").connect(a,b,e)(c("PolarisMedia.react"));g["default"]=f}),98);
__d("PolarisSaveButton.react",["IGDSIconButton.react","IGDSSavePanoFilledIcon.react","IGDSSavePanoOutlineIcon.react","JSResourceForInteraction","PolarisIGCoreAnchoredPopover.react","PolarisIGCorePressable.react","PolarisPostStrings","PolarisReactRedux.react","PolarisSavedCollectionPicker.react","PolarisSavedPostsActionRequestNextSavedCollections","PolarisUA","nullthrows","polarisSavedPostsSelectors","react","useIGDSLazyDialog","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useState,k=24,l=-16,m=5;function a(a){var b=a.analyticsContext,e=a.collectionsPostSavedTo,f=a["data-testid"],g=a.isSaved,h=a.onSaveMedia;f=a.onSaveMediaToCollection;var n=a.onShowToast,o=a.padding;o=o===void 0?8:o;var p=a.postId,q=a.thumbnailSrcSet,r=d("PolarisReactRedux.react").useDispatch(),s=c("usePolarisViewer")(),t=!s,u=d("PolarisReactRedux.react").useSelector(function(a){if(t)return null;var b=c("nullthrows")(s);return d("polarisSavedPostsSelectors").getAllSavedCollectionsForUser(a,c("nullthrows")(b.id))}),v=d("PolarisReactRedux.react").useSelector(function(a){if(t)return null;var b=c("nullthrows")(s);return d("polarisSavedPostsSelectors").getSavedCollectionsPaginationForUser(a,c("nullthrows")(b.id))});function w(){if(u==null||v==null)return!1;if(u.length>=m)return!0;var a=1;return!v.moreAvailable&&u.length>a}a=!t&&d("PolarisUA").isDesktop();var x=w()&&a;function y(a){a.preventDefault(),h(!g),!g===!0&&x&&(n!=null&&n(),C(!0))}function z(){if(!t&&!w()&&!c("nullthrows")(v).isFetching){var a=c("nullthrows")(s);r(d("PolarisSavedPostsActionRequestNextSavedCollections").requestInitialSavedCollections(c("nullthrows")(a.id)))}C(!1)}var A=j(!1),B=A[0],C=A[1];A=c("useIGDSLazyDialog")(c("JSResourceForInteraction")("PolarisCreateCollectionWithPostModal.react").__setRef("PolarisSaveButton.react"));var D=A[0];return i.jsx(c("PolarisIGCoreAnchoredPopover.react"),{content:x?i.jsx(c("PolarisSavedCollectionPicker.react"),{collectionsPostSavedTo:e,hidePopover:B,onSaveMedia:h,onSaveMediaToCollection:f,postId:p,postIsSaved:g,setHidePopover:C,setShowCreateCollectionModal:function(){return D({onSaveChange:h,postId:p,source:b,srcSet:q})}}):null,offsetTop:l,preferredPositionX:"center",preferredPositionY:"top",showOnHover:!0,children:i.jsx(c("PolarisIGCorePressable.react"),{onMouseEnter:z,onPress:function(){},children:i.jsx(c("IGDSIconButton.react"),{"data-testid":void 0,hover:g||!a?null:i.jsx(c("IGDSSavePanoOutlineIcon.react"),{alt:d("PolarisPostStrings").SAVE_TEXT,color:"ig-secondary-text",size:k}),onClick:y,padding:o,children:g?i.jsx(c("IGDSSavePanoFilledIcon.react"),{alt:d("PolarisPostStrings").UNSAVE_TEXT,color:"ig-primary-text",size:k}):i.jsx(c("IGDSSavePanoOutlineIcon.react"),{alt:d("PolarisPostStrings").SAVE_TEXT,color:"ig-primary-text",size:k})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisInFeedPostModalContext",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("react")).createContext;b=a(c("emptyFunction"));g.InFeedPostModalContext=b}),98);
__d("PolarisPostCommentInputPicker.react",["CometPlaceholder.react","PolarisUA","deferredLoadComponent","react","requireDeferredForDisplay","stylex","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).unstable_useMemoCache,k=i,l=c("deferredLoadComponent")(c("requireDeferredForDisplay")("PolarisPostCommentInput.react").__setRef("PolarisPostCommentInputPicker.react")),m={familiarFeedPlaceholder:{alignItems:"x1qjc9v5",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",height:"x1d6elog",$$css:!0},placeholder:{alignItems:"x1qjc9v5",borderTopColor:"x5ur3kl",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",height:"xnnlda6",marginTop:"x1gslohp",position:"x1n2onr6",$$css:!0}};a=k.forwardRef(function(a,b){var e=j(10),f=c("usePolarisIsOnFeedPage")(),g=c("usePolarisIsOnAdsActivityPage")();f=(f||g)&&a.inModal!==!0&&d("PolarisUA").isDesktop();g=f?m.familiarFeedPlaceholder:m.placeholder;e[0]!==g?(f=(h||(h=c("stylex")))(g),e[0]=g,e[1]=f):f=e[1];e[2]!==f?(g=k.jsx("div",{className:f}),e[2]=f,e[3]=g):g=e[3];e[4]!==a||e[5]!==b?(f=k.jsx(l,babelHelpers["extends"]({},a,{ref:b})),e[4]=a,e[5]=b,e[6]=f):f=e[6];e[7]!==g||e[8]!==f?(a=k.jsx(c("CometPlaceholder.react"),{fallback:g,name:"PostCommentInputPicker",children:f}),e[7]=g,e[8]=f,e[9]=a):a=e[9];return a});b=a;g["default"]=b}),98);
__d("usePolarisComment",["PolarisReactRedux.react","polarisCommentSelectors.react","polarisUserSelectors","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).unstable_useMemoCache;function a(a,b){var c=i(3),e;c[0]!==a||c[1]!==b?(e=function(c){c=d("polarisCommentSelectors.react").getCommentById(c,a);return b(c)},c[0]=a,c[1]=b,c[2]=e):e=c[2];return d("PolarisReactRedux.react").useSelector(e)}function b(a,b){var c=i(3),e;c[0]!==a||c[1]!==b?(e=function(c){var e=d("polarisCommentSelectors.react").getCommentById(c,a);c=d("polarisUserSelectors").getUserByIdOrThrows(c,e.userId);return b(e,c)},c[0]=a,c[1]=b,c[2]=e):e=c[2];return d("PolarisReactRedux.react").useSelector(e)}function c(a){var b=i(2),c;b[0]!==a?(c=function(b){return a==null?null:(b=b.comments.byId.get(a))!=null?b:null},b[0]=a,b[1]=c):c=b[1];return d("PolarisReactRedux.react").useSelector(c)}g.useComment=a;g.useCommentAndOwner=b;g.useCommentOrNull=c}),98);
__d("PolarisPostFastCommentLikeButton.react",["PolarisCommentActions","PolarisConfig","PolarisInteractionsLogger","PolarisLikeButton.react","PolarisReactRedux.react","react","usePolarisAnalyticsContext","usePolarisComment","usePolarisPost"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function k(a,b){var e=i(10),f;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(a){return a.id},e[0]=f):f=e[0];f=d("usePolarisComment").useComment(a,f);var g=d("usePolarisPost").usePost(b,d("PolarisInteractionsLogger").getMediaTypeFromPost),h;e[1]===Symbol["for"]("react.memo_cache_sentinel")?(h=function(a,b){return b.id},e[1]=h):h=e[1];h=d("usePolarisPost").usePostAndOwner(b,h);var j=c("usePolarisAnalyticsContext")();if(e[2]===Symbol["for"]("react.memo_cache_sentinel")){var k;k=(k=d("PolarisConfig").getViewerId())!=null?k:"";e[2]=k}else k=e[2];e[3]!==f||e[4]!==a||e[5]!==j||e[6]!==h||e[7]!==b||e[8]!==g?(k={commentAuthorId:f,commentId:a,containerModule:j,mediaAuthorId:h,mediaId:b,mediaType:g,userId:k},e[3]=f,e[4]=a,e[5]=j,e[6]=h,e[7]=b,e[8]=g,e[9]=k):k=e[9];return k}function a(a){var b=i(8),e=a.color,f=a.commentId;a=a.postId;var g=d("PolarisReactRedux.react").useDispatch(),h=k(f,a);b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a){return a.likedByViewer},b[0]=a):a=b[0];f=d("usePolarisComment").useComment(f,a);b[1]!==g||b[2]!==h?(a=function(a){a?g(d("PolarisCommentActions").likeComment(h)):g(d("PolarisCommentActions").unlikeComment(h))},b[1]=g,b[2]=h,b[3]=a):a=b[3];a=a;var l;b[4]!==e||b[5]!==f||b[6]!==a?(l=j.jsx(c("PolarisLikeButton.react"),{color:e,isLiked:f,large:!1,onChange:a}),b[4]=e,b[5]=f,b[6]=a,b[7]=l):l=b[7];return l}b=j.memo(a);g["default"]=b}),98);
__d("PolarisLineClampText.react",["fbt","CometLineClamp.react","IGDSText.react","PolarisIGCorePressable.react","PolarisIGCoreText","PolarisUserText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useState,l=b.unstable_useMemoCache,m=2,n=1e4;function a(a){var b=l(27),d,e,f,g,i;b[0]!==a?(d=a.lines,i=a.prependElement,f=a.color,g=a.value,e=babelHelpers.objectWithoutPropertiesLoose(a,["lines","prependElement","color","value"]),b[0]=a,b[1]=d,b[2]=e,b[3]=f,b[4]=g,b[5]=i):(d=b[1],e=b[2],f=b[3],g=b[4],i=b[5]);a=d===void 0?m:d;d=k(!1);var o=d[0],p=d[1];b[6]!==e||b[7]!==f||b[8]!==g?(d=j.jsx(c("PolarisUserText.react"),babelHelpers["extends"]({},e,{color:f,display:"inline",headlineTag:"h1",size:"body",value:g})),b[6]=e,b[7]=f,b[8]=g,b[9]=d):d=b[9];e=d;g=f==="ig-text-on-media"?"textOnMedia":"secondaryText";b[10]!==o?(d=function(){return p(!o)},b[10]=o,b[11]=d):d=b[11];var q;b[12]===Symbol["for"]("react.memo_cache_sentinel")?(q={display:"inline"},b[12]=q):q=b[12];a=o?n:a;var r;b[13]!==a||b[14]!==i||b[15]!==e?(r=j.jsxs(c("CometLineClamp.react"),{lines:a,children:[i,e]}),b[13]=a,b[14]=i,b[15]=e,b[16]=r):r=b[16];b[17]!==o||b[18]!==g?(a=!o&&j.jsx(c("IGDSText.react"),{color:g,textAlign:"start",zeroMargin:!0,children:h._("__JHASH__o8KDH-tdLwt__JHASH__")}),b[17]=o,b[18]=g,b[19]=a):a=b[19];b[20]!==d||b[21]!==r||b[22]!==a?(i=j.jsxs(c("PolarisIGCorePressable.react"),{onPress:d,style:q,children:[r,a]}),b[20]=d,b[21]=r,b[22]=a,b[23]=i):i=b[23];b[24]!==f||b[25]!==i?(e=j.jsx(c("PolarisIGCoreText"),{color:f,display:"inline",zeroMargin:!0,children:i}),b[24]=f,b[25]=i,b[26]=e):e=b[26];return e}g["default"]=a}),226);
__d("PolarisPostFastCrawlerComment.react",["IGDSBox.react","IGDSVerifiedBadge.react","PolarisIGCoreText","PolarisLineClampText.react","PolarisUserLinkWithHoverCard.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var b=i(8),d=a.isAuthorUnpublished,e=a.isAuthorVerified,f=a.text,g=a.userId;a=a.username;d=d===void 0?!1:d;e=e===void 0?!1:e;var h;b[0]!==d||b[1]!==g||b[2]!==a||b[3]!==e?(h=d===!0?null:j.jsxs(j.Fragment,{children:[j.jsx(c("PolarisUserLinkWithHoverCard.react"),{color:"ig-primary-text",userId:g,username:a}),e&&j.jsx(c("IGDSBox.react"),{display:"inlineBlock",marginStart:1,position:"relative",children:j.jsx(c("IGDSVerifiedBadge.react"),{size:"small"})}),j.jsx(c("PolarisIGCoreText"),{display:"inline",zeroMargin:!0,children:"\xa0"})]}),b[0]=d,b[1]=g,b[2]=a,b[3]=e,b[4]=h):h=b[4];d=h;b[5]!==d||b[6]!==f?(g=j.jsx(c("IGDSBox.react"),{"data-testid":void 0,display:"block",flex:"grow",position:"relative",children:j.jsx(c("PolarisLineClampText.react"),{prependElement:d,value:f})}),b[5]=d,b[6]=f,b[7]=g):g=b[7];return g}g["default"]=a}),98);
__d("PolarisPostFastOptionsButton.react",["fbt","IGDSBox.react","IGDSIconButton.react","IGDSMoreHorizontalPanoOutlineIcon.react","IGDSMoreVerticalPanoOutline24Icon.react","InstagramAdActionMenuFalcoEvent","PolarisContainerModuleUtils","PolarisLogger","PolarisPostModalContext.react","PolarisViewpointActionUtils","identityFunction","polarisAdsSelectors.react","react","usePolarisAnalyticsContext","usePolarisPost","usePolarisViewer"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).unstable_useMemoCache,k=i,l=h._("__JHASH__cFipUAiTKQi__JHASH__");function m(a){var b=j(3),d=a.color;a=a.orientation;a=a==="horizontal"?c("IGDSMoreHorizontalPanoOutlineIcon.react"):c("IGDSMoreVerticalPanoOutline24Icon.react");var e;b[0]!==a||b[1]!==d?(e=k.jsx(c("IGDSBox.react"),{alignItems:"center",height:24,justifyContent:"center",position:"relative",width:24,children:k.jsx(a,{alt:l,color:d})}),b[0]=a,b[1]=d,b[2]=e):e=b[2];return e}function a(a){var b=j(25),e=a.className,f=a.orientation,g=a.padding,h=a.postId;a=f===void 0?"horizontal":f;var i=d("PolarisPostModalContext.react").useSetPostModal(),l=c("usePolarisAnalyticsContext")(),n=d("PolarisContainerModuleUtils").getContainerModule(l),o=d("usePolarisPost").usePost(h,c("identityFunction")),p=!!o.isVideo;f=c("usePolarisViewer")();var q=f==null?void 0:f.id;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(a){return a==null?void 0:a.ad_id},b[0]=f):f=b[0];var r=d("polarisAdsSelectors.react").useFeedAdInfo(h,f);b[1]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(a){return a==null?void 0:a.tracking_token},b[1]=f):f=b[1];var s=d("polarisAdsSelectors.react").useFeedAdInfo(h,f),t=d("PolarisViewpointActionUtils").getMPKForFeedMedia(o);b[2]!==h||b[3]!==l||b[4]!==p||b[5]!==o.isSponsored||b[6]!==q||b[7]!==r||b[8]!==t||b[9]!==n||b[10]!==s||b[11]!==i?(f=function(){d("PolarisLogger").logAction("postOptionsClick",{mediaId:h,source:l,type:p?"video":"photo"}),o.isSponsored===!0&&q!=null&&c("InstagramAdActionMenuFalcoEvent").log(function(){return{ad_id:r,m_pk:t,pigeon_reserved_keyword_module:n,pk:q,source_of_action:n,tracking_token:s}}),i("options")},b[2]=h,b[3]=l,b[4]=p,b[5]=o.isSponsored,b[6]=q,b[7]=r,b[8]=t,b[9]=n,b[10]=s,b[11]=i,b[12]=f):f=b[12];f=f;var u;b[13]!==a?(u=k.jsx(m,{color:"ig-secondary-text",orientation:a}),b[13]=a,b[14]=u):u=b[14];var v;b[15]!==a?(v=k.jsx(m,{color:"ig-primary-text",orientation:a}),b[15]=a,b[16]=v):v=b[16];b[17]!==u||b[18]!==f||b[19]!==g||b[20]!==v?(a=k.jsx(c("IGDSIconButton.react"),{"data-testid":void 0,hover:u,onClick:f,padding:g,children:v}),b[17]=u,b[18]=f,b[19]=g,b[20]=v,b[21]=a):a=b[21];b[22]!==e||b[23]!==a?(u=k.jsx("div",{className:e,children:a}),b[22]=e,b[23]=a,b[24]=u):u=b[24];return u}b=k.memo(a);g["default"]=b}),226);
__d("PolarisPostFastPreviewCaption.react",["IGDSBox.react","PolarisPostFastCommentPrimitive.react","PolarisPostFastCrawlerComment.react","PolarisUA","nullthrows","polarisCommentSelectors.react","react","usePolarisIsOnFeedPage","usePolarisPost"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var b=i(16),e=a.enableTruncation,f=a.inModal;a=a.postId;var g=c("usePolarisIsOnFeedPage")();g=g&&f!==!0&&d("PolarisUA").isDesktop();b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(a,b){return c("nullthrows")(b.id)},b[0]=f):f=b[0];f=d("usePolarisPost").usePostAndOwner(a,f);var h;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(h=function(a,b){return c("nullthrows")(b.username)},b[1]=h):h=b[1];h=d("usePolarisPost").usePostAndOwner(a,h);var k;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(k=function(a,b){return b.isVerified},b[2]=k):k=b[2];k=d("usePolarisPost").usePostAndOwner(a,k);var l;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(l=function(a,b){return b.isUnpublished},b[3]=l):l=b[3];l=d("usePolarisPost").usePostAndOwner(a,l);var m;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(m=function(a){return a.caption},b[4]=m):m=b[4];m=d("usePolarisPost").usePost(a,m);var n;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(n=function(a){return a.captionCommentId},b[5]=n):n=b[5];a=d("usePolarisPost").usePost(a,n);n=d("polarisCommentSelectors.react").useCommentTranslation(a);if(m==null||m==="")return null;(n==null?void 0:n.showTranslatedText)===!0&&n.translatedText!=null&&(m=n.translatedText);a=g?2:1;b[6]!==e||b[7]!==l||b[8]!==k||b[9]!==m||b[10]!==f||b[11]!==h?(n=e===!0?j.jsx(c("PolarisPostFastCrawlerComment.react"),{isAuthorUnpublished:l,isAuthorVerified:k,text:m,userId:f,username:h}):j.jsx(c("PolarisPostFastCommentPrimitive.react"),{isAuthorUnpublished:l,isAuthorVerified:k,isCaption:!0,text:m,userId:f,username:h}),b[6]=e,b[7]=l,b[8]=k,b[9]=m,b[10]=f,b[11]=h,b[12]=n):n=b[12];b[13]!==a||b[14]!==n?(g=j.jsx(c("IGDSBox.react"),{marginBottom:a,position:"relative",children:n}),b[13]=a,b[14]=n,b[15]=g):g=b[15];return g}g["default"]=a}),98);
__d("PolarisPostFastPreviewComment.react",["PolarisPostFastCommentPrimitive.react","nullthrows","react","usePolarisComment"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var b=i(9);a=a.commentId;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=function(a,b){return c("nullthrows")(b.id)},b[0]=e):e=b[0];e=d("usePolarisComment").useCommentAndOwner(a,e);var f;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(a,b){return c("nullthrows")(b.username)},b[1]=f):f=b[1];f=d("usePolarisComment").useCommentAndOwner(a,f);var g;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(g=function(a){return a.text},b[2]=g):g=b[2];g=d("usePolarisComment").useComment(a,g);var h;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(h=function(a){return a.isAuthorVerified},b[3]=h):h=b[3];a=d("usePolarisComment").useComment(a,h);b[4]!==a||b[5]!==g||b[6]!==e||b[7]!==f?(h=j.jsx(c("PolarisPostFastCommentPrimitive.react"),{isAuthorVerified:a,text:g,userId:e,username:f}),b[4]=a,b[5]=g,b[6]=e,b[7]=f,b[8]=h):h=b[8];return h}g["default"]=a}),98);
__d("PolarisPostFastViewAllComments.react",["fbt","IGDSText.react","PolarisBigNumber.react","PolarisConfig","PolarisFastLink.react","PolarisFeedActionOpenPostModalForId","PolarisInFeedPostModalContext","PolarisInteractionsLogger","PolarisLoggedOutCtaLogger","PolarisNavigationActions","PolarisReactRedux.react","PolarisSponsoredPostContext.react","PolarisTrackingConstants","PolarisUA","XPolarisMobileAllCommentsControllerRouteBuilder","logPolarisPostModalOpen","nullthrows","react","usePolarisAnalyticsContext","usePolarisPost"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));e=i;e.useCallback;var k=e.useContext,l=e.unstable_useMemoCache;function a(a){var b=l(25),e=a.onLoggedOutIntentClickLoginModal,f=a.postId;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a){return a.numComments||0},b[0]=a):a=b[0];a=d("usePolarisPost").usePost(f,a);var g;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(g=function(a){return c("nullthrows")((a=a.owner)==null?void 0:a.id)},b[1]=g):g=b[1];var i=d("usePolarisPost").usePost(f,g),m=d("usePolarisPost").usePost(f,d("PolarisInteractionsLogger").getMediaTypeFromPost);g=k(d("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext);var n=g.canUserSeePersistentCta;b[2]!==n?(g=function(a){var b;return c("XPolarisMobileAllCommentsControllerRouteBuilder").buildURL((b={},b[d("PolarisTrackingConstants").ENABLE_PERSISTENT_CTA]=n||void 0,b.shortcode=c("nullthrows")(a.code),b))},b[2]=n,b[3]=g):g=b[3];var o=d("usePolarisPost").usePost(f,g),p=d("PolarisReactRedux.react").useDispatch(),q=c("usePolarisAnalyticsContext")(),r=k(d("PolarisInFeedPostModalContext").InFeedPostModalContext);b[4]===Symbol["for"]("react.memo_cache_sentinel")?(g=!d("PolarisConfig").isLoggedIn()&&d("PolarisUA").isMobile(),b[4]=g):g=b[4];var s=g;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(g=s||d("PolarisConfig").isLoggedIn()&&d("PolarisUA").isDesktop(),b[5]=g):g=b[5];g=g;var t;b[6]!==q||b[7]!==i||b[8]!==f||b[9]!==m||b[10]!==p||b[11]!==r||b[12]!==e?(t=function(a,b){d("PolarisConfig").isLoggedIn()?(d("PolarisInteractionsLogger").logInteractionAction({containerModule:q,eventName:"instagram_organic_comment_view_all",mediaAuthorId:i,mediaId:f,mediaType:m}),d("PolarisUA").isDesktop()&&(a.preventDefault(),p(d("PolarisFeedActionOpenPostModalForId").openPostModalForId(f)),c("logPolarisPostModalOpen")(q,m,"feed_view_all_comments"),r(f))):s&&(a.preventDefault(),d("PolarisLoggedOutCtaLogger").logLoggedOutCtaEvent({ctaType:"user_action",ctaVersion:"",eventName:"post_comment_view_all_click",module:q||""}),e(b,"post_comment_view_all",f))},b[6]=q,b[7]=i,b[8]=f,b[9]=m,b[10]=p,b[11]=r,b[12]=e,b[13]=t):t=b[13];var u=t;b[14]!==u||b[15]!==o?(t=function(a){return u(a,o)},b[14]=u,b[15]=o,b[16]=t):t=b[16];var v;b[17]!==a?(v=a===1?h._("__JHASH__72aa16zdD4E__JHASH__"):h._("__JHASH__goQVaKpz6ee__JHASH__",[h._param("count",j.jsx(c("PolarisBigNumber.react"),{value:a}))]),b[17]=a,b[18]=v):v=b[18];b[19]!==v?(a=j.jsx(c("IGDSText.react"),{color:"secondaryText",zeroMargin:!0,children:v}),b[19]=v,b[20]=a):a=b[20];b[21]!==o||b[22]!==t||b[23]!==a?(v=j.jsx(c("PolarisFastLink.react"),{"data-testid":void 0,href:o,onClick:t,shouldOpenModal:g,children:a}),b[21]=o,b[22]=t,b[23]=a,b[24]=v):v=b[24];return v}function b(a){return{onLoggedOutIntentClickLoginModal:function(b,c,e){var f=d("PolarisUA").isDesktop()||d("PolarisConfig").isLoggedOutFRXEligible()?"feature_wall":"content_wall";a(d("PolarisNavigationActions").openLoginModal(f,b,c,null,e))}}}f=d("PolarisReactRedux.react").connect(null,b)(a);g["default"]=f}),226);
__d("PolarisPostFastPreviewCommentsList.react",["IGDSBox.react","PolarisConfig","PolarisPostFastCommentLikeButton.react","PolarisPostFastPreviewComment.react","PolarisPostFastViewAllComments.react","PolarisReactRedux.react","PolarisThreadedCommentSelectors","PolarisUA","isTruthy","polarisCommentSelectors.react","react","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage","usePolarisPost"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useMemo,k=b.unstable_useMemoCache;function l(a){var b=k(13),e=a.postId;a=a.previewCommentIds;var f=c("usePolarisIsOnFeedPage")(),g=c("usePolarisIsOnAdsActivityPage")(),h;b[0]!==f||b[1]!==g?(h=(f||g)&&d("PolarisUA").isDesktop(),b[0]=f,b[1]=g,b[2]=h):h=b[2];f=h;var j=f;if(d("PolarisConfig").isLoggedOutFRXEligible())return null;if(a.length>0){g=f?1:0;if(b[3]!==j||b[4]!==e||b[5]!==a){b[7]!==j||b[8]!==e?(h=function(a){return i.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",marginBottom:1,position:"relative",children:[i.jsx(c("PolarisPostFastPreviewComment.react"),{commentId:a}),d("PolarisConfig").isLoggedIn()&&i.jsx(c("IGDSBox.react"),{marginStart:j?2:0,position:"relative",children:i.jsx(c("PolarisPostFastCommentLikeButton.react"),{color:j?"ig-secondary-icon":void 0,commentId:a,postId:e})})]},a)},b[7]=j,b[8]=e,b[9]=h):h=b[9];f=a.map(h);b[3]=j;b[4]=e;b[5]=a;b[6]=f}else f=b[6];b[10]!==g||b[11]!==f?(h=i.jsx(c("IGDSBox.react"),{marginBottom:g,position:"relative",children:f}),b[10]=g,b[11]=f,b[12]=h):h=b[12];return h}return null}function a(a){var b=a.inModal,e=a.postId;a=a.shouldIncreaseCommentPreviews;a=a===void 0?!1:a;var f=c("usePolarisIsOnFeedPage")();f=f&&b!==!0&&d("PolarisUA").isDesktop();var g=c("isTruthy")(a);b=d("usePolarisPost").usePost(e,function(a){return!a.commentsDisabled});var h=d("PolarisReactRedux.react").useSelector(function(a){return g?d("PolarisThreadedCommentSelectors").selectVisibleParentCommentsForPostId(a,e).toArray():d("polarisCommentSelectors.react").getPreviewCommentsForPostId(a,e)});a=j(function(){return h.map(function(a){return a.id})},[h]);var k=d("usePolarisPost").usePost(e,function(a){return(a=a.numComments)!=null?a:0}),m=k>a.length;if(!b||k<=0)return null;b=!d("PolarisConfig").isLoggedIn()&&a.length>0&&!g;return i.jsxs(i.Fragment,{children:[m&&i.jsx(c("IGDSBox.react"),{alignItems:"start",marginBottom:f?2:1,position:"relative",children:i.jsx(c("PolarisPostFastViewAllComments.react"),{postId:e})}),i.jsx(l,{postId:e,previewCommentIds:b?a.slice(-1):a})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostFastShareButton.react",["CometPlaceholder.react","DirectReshareButtonTapFalcoEvent","IGDContactSearchDialogType.flow","IGDSDirectPanoOutlineIcon.react","IGDSecureShareSheetDialogPlaceholder.react","JSResourceForInteraction","PolarisConfig","PolarisContainerModuleUtils","PolarisIGCoreSVGIconButton.react","PolarisLogger","PolarisLoggerUtils","PolarisNavChain","PolarisPostModalContext.react","PolarisPostStrings","PolarisPostTypeUtils","QPLUserFlow","gkx","lazyLoadComponent","qex","qpl","react","useIGDSLazyDialog","useIGDSecureShareSheetInteractionLogger","useIGDShareSheetOnSubmitPost","usePolarisPost","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useMemo,l=b.useState,m=c("JSResourceForInteraction")("IGDSecureShareSheetDialog.react").__setRef("PolarisPostFastShareButton.react"),n=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGWebBloksApp").__setRef("PolarisPostFastShareButton.react"));function a(a){var b=a.analyticsContext,e=a["data-testid"],f=a.mediaId,g=a.mediaOverlayInfo;e=a.postId;var h=a.sharingFrictionInfo,o=d("usePolarisPost").usePost(e,function(a){return a}),p=d("PolarisPostModalContext.react").useSetPostModal();a=c("useIGDSLazyDialog")(m,function(a){return i.jsx(c("IGDSecureShareSheetDialogPlaceholder.react"),{onClose:a})});var q=a[0];e=a[1];a=l(!1);var r=a[0],s=a[1],t=(h==null?void 0:h.bloksAppUrl)!=null&&(h==null?void 0:h.shouldHaveSharingFriction)===!0,u=k(function(){var a=g!=null?g:o.mediaOverlayInfo;return babelHelpers["extends"]({},o,{mediaOverlayInfo:a})},[o,g]),v=c("useIGDShareSheetOnSubmitPost")(u),w=d("useIGDSecureShareSheetInteractionLogger").useLogShareSheetInteraction();a=j(function(){d("PolarisLogger").logAction("shareClick",{source:b,type:d("PolarisPostTypeUtils").getPostType(o)});c("QPLUserFlow").start(c("qpl")._(379205139,"1723"),{annotations:{string:{source:b}}});if(!t)if(!d("PolarisConfig").isLoggedIn())p("share");else{var a,e=c("uuidv4")();a=(a=c("gkx")("25289")&&c("qex")._("340"))!=null?a:!1;a&&c("DirectReshareButtonTapFalcoEvent").log(function(){var a;return{a_pk:o.ownerId,canonical_nav_chain:(a=c("PolarisNavChain").getInstance())==null?void 0:a.getNavChainForSend(),m_pk:d("PolarisLoggerUtils").getFormattedMediaID(f,(a=o.ownerId)!=null?a:""),pigeon_reserved_keyword_module:d("PolarisContainerModuleUtils").getContainerModule(b),share_sheet_session_id:e}});w("igd_sharesheet_open",{flowInstanceId:e,shareType:d("IGDContactSearchDialogType.flow").IGDContactSearchDialogType.SHARESHEET,source:b});q({flowInstanceId:e,onSubmit:v,post:u})}else s(!0)},[b,o,t,p,w,q,v,u,f]);var x=k(function(){return{media_id:f,module:b}},[b,f]),y=function(){return!t?null:r&&(h==null?void 0:h.bloksAppUrl)!=null&&i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(n,{appId:h==null?void 0:h.bloksAppUrl,bridgeOverrides_DEPRECATED:{onOpenShareSheetClick:function(){s(!1);var a=c("uuidv4")();w("igd_sharesheet_open",{flowInstanceId:a,shareType:d("IGDContactSearchDialogType.flow").IGDContactSearchDialogType.SHARESHEET,source:b});q({flowInstanceId:a,onSubmit:v,post:u})},onResumeStoryPlayback:function(){s(!1)}},params:x},f)})};return i.jsxs(i.Fragment,{children:[i.jsx(c("PolarisIGCoreSVGIconButton.react"),{"data-testid":void 0,hover:i.jsx(c("IGDSDirectPanoOutlineIcon.react"),{alt:d("PolarisPostStrings").SHARE_TEXT,color:"ig-secondary-text",size:24}),onClick:a,ref:e,children:i.jsx(c("IGDSDirectPanoOutlineIcon.react"),{alt:d("PolarisPostStrings").SHARE_TEXT,color:"ig-primary-text",size:24})}),y()]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostOptionsButtonPicker.react",["PolarisPostFastOptionsButton.react","cr:2007","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var d=i(10),e=a.buttonClassName,f=a.isSponsored;a=a.mediaPK;if(b("cr:2007")!=null&&f!==!0){d[0]!==a?(f=j.jsx(b("cr:2007"),{mediaPK:a}),d[0]=a,d[1]=f):f=d[1];var g;d[2]!==e||d[3]!==f?(g=j.jsx("div",{className:e,children:f}),d[2]=e,d[3]=f,d[4]=g):g=d[4];return g}d[5]!==a?(f=j.jsx(c("PolarisPostFastOptionsButton.react"),{postId:a}),d[5]=a,d[6]=f):f=d[6];d[7]!==e||d[8]!==f?(g=j.jsx("div",{className:e,children:f}),d[7]=e,d[8]=f,d[9]=g):g=d[9];return g}g["default"]=a}),98);
__d("PolarisCommentTranslationPrompt.react",["fbt","CometPressable.react","IGDSText.react","PolarisCommentActions","PolarisReactRedux.react","polarisCommentSelectors.react","react","usePolarisComment"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.unstable_useMemoCache;function a(a){var b,e=k(22),f=a.commentId,g=a.inFeed,i=a.isCaptionWithTranslation;a=a.isOverMedia;a=a===void 0?!1:a;var l=d("PolarisReactRedux.react").useDispatch();b=((b=d("usePolarisComment").useCommentOrNull(f))==null?void 0:b.hasTranslation)===!0;i=i===!0||b;b=d("polarisCommentSelectors.react").useCommentTranslation(f);var m=b==null?void 0:b.translatedText,n;e[0]!==f||e[1]!==m||e[2]!==l?(n=function(){if(f==null)return;m!=null?l(d("PolarisCommentActions").showCommentTranslatedText(f)):l(d("PolarisCommentActions").translateComment(f))},e[0]=f,e[1]=m,e[2]=l,e[3]=n):n=e[3];n=n;if(i!==!0)return null;i=g===!0?"primaryText":"secondaryText";if((b==null?void 0:b.loading)===!0){g=a?"webAlwaysWhite":i;var o;e[4]===Symbol["for"]("react.memo_cache_sentinel")?(o=h._("__JHASH__ptT8MaSFAMY__JHASH__"),e[4]=o):o=e[4];e[5]!==g?(o=j.jsx(c("IGDSText.react").Body2Emphasized,{color:g,children:o}),e[5]=g,e[6]=o):o=e[6];return o}if((b==null?void 0:b.showTranslatedText)===!0){e[7]!==f||e[8]!==l?(g=function(){f!=null&&l(d("PolarisCommentActions").showCommentOriginalText(f))},e[7]=f,e[8]=l,e[9]=g):g=e[9];o=a?"webAlwaysWhite":i;e[10]===Symbol["for"]("react.memo_cache_sentinel")?(b=h._("__JHASH__S6WOgu9Fr2q__JHASH__"),e[10]=b):b=e[10];e[11]!==o?(b=j.jsx(c("IGDSText.react").Body2Emphasized,{color:o,children:b}),e[11]=o,e[12]=b):b=e[12];e[13]!==g||e[14]!==b?(o=j.jsx(c("CometPressable.react"),{onPress:g,overlayDisabled:!0,children:b}),e[13]=g,e[14]=b,e[15]=o):o=e[15];return o}g=a?"webAlwaysWhite":i;e[16]===Symbol["for"]("react.memo_cache_sentinel")?(b=h._("__JHASH__Q7Q4mAm1c2E__JHASH__"),e[16]=b):b=e[16];e[17]!==g?(o=j.jsx(c("IGDSText.react").Body2Emphasized,{color:g,children:b}),e[17]=g,e[18]=o):o=e[18];e[19]!==n||e[20]!==o?(a=j.jsx(c("CometPressable.react"),{onPress:n,overlayDisabled:!0,children:o}),e[19]=n,e[20]=o,e[21]=a):a=e[21];return a}g["default"]=a}),226);
__d("PolarisPostCaptionTranslationPrompt.react",["IGDSBox.react","PolarisCommentTranslationPrompt.react","react","usePolarisPost"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var b=i(8),e=a.inFeed,f=a.marginBottom;a=a.postId;f=f===void 0?0:f;var g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=function(a){return a.captionHasTranslation},b[0]=g):g=b[0];g=d("usePolarisPost").usePost(a,g);var h;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(h=function(a){return a.captionCommentId},b[1]=h):h=b[1];a=d("usePolarisPost").usePost(a,h);if(g!==!0||a==null)return null;b[2]!==a||b[3]!==e?(h=j.jsx(c("PolarisCommentTranslationPrompt.react"),{commentId:a,inFeed:e,isCaptionWithTranslation:!0}),b[2]=a,b[3]=e,b[4]=h):h=b[4];b[5]!==f||b[6]!==h?(g=j.jsx(c("IGDSBox.react"),{marginBottom:f,children:h}),b[5]=f,b[6]=h,b[7]=g):g=b[7];return g}g["default"]=a}),98);
__d("PolarisDeleteCommentModal.react",["fbt","IGCoreDialog.react","PolarisCommentActions","PolarisGenericStrings","PolarisLogger","PolarisReactRedux.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).unstable_useMemoCache,k=i;function a(a){var b=j(15),c=a.analyticsContext,e=a.commentId,f=a.onClose,g=a.postId,i=d("PolarisReactRedux.react").useDispatch();b[0]!==c||b[1]!==i||b[2]!==g||b[3]!==e||b[4]!==f?(a=function(a){d("PolarisLogger").logAction("commentDelete",{source:c}),i(d("PolarisCommentActions").deleteComment(g,e,c)),f(a)},b[0]=c,b[1]=i,b[2]=g,b[3]=e,b[4]=f,b[5]=a):a=b[5];a=a;var l;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(l=h._("__JHASH__-8Hu0_GPJrv__JHASH__"),b[6]=l):l=b[6];b[7]!==a?(l=k.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-error-or-destructive",onClick:a,children:l}),b[7]=a,b[8]=l):l=b[8];b[9]!==f?(a=k.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{onClick:f,children:d("PolarisGenericStrings").CANCEL_TEXT}),b[9]=f,b[10]=a):a=b[10];var m;b[11]!==f||b[12]!==l||b[13]!==a?(m=k.jsxs(d("IGCoreDialog.react").IGCoreDialog,{onModalClose:f,children:[l,a]}),b[11]=f,b[12]=l,b[13]=a,b[14]=m):m=b[14];return m}g["default"]=a}),226);
__d("PolarisPostComment.react",["cx","fbt","IGDSBox.react","IGDSButton.react","IGDSIconButton.react","IGDSMoreHorizontalPanoOutlineIcon.react","IGDSText.react","IGDSVerifiedBadge.react","Locale","PolarisApproveCommentDialog.react","PolarisCommentActions","PolarisCommentLikeListsActions","PolarisCommentOptionsDialog.react","PolarisCommentTranslationPrompt.react","PolarisConfig","PolarisDoubleTappable","PolarisEngagementLogger","PolarisFastLink.react","PolarisIGCoreConstants","PolarisIgWellbeingRestrictManageCommentFalcoEvent","PolarisLikeButton.react","PolarisLinkBuilder","PolarisNavigationActions","PolarisPendingCommentActions","PolarisPostCaptionTranslationPrompt.react","PolarisPostGifComment.react","PolarisPostStrings","PolarisPostVariants","PolarisReactRedux.react","PolarisTimestamp.react","PolarisTruncatedText.react","PolarisUA","PolarisUserAvatarWithStories.react","PolarisUserHoverCard.react","PolarisUserText.react","PolarisViewpointReact.react","joinClasses","nullthrows","polarisPostSelectors","polarisUserSelectors","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=(j||(j=d("react"))).unstable_useMemoCache,l=j,m=750;function n(a){var b=k(22),e=a.parentProps,f=e.commentOwnerId,g=e.commentOwnerUsername,h=e.isAuthorVerified,i=e.isCaption,j=e.isRestrictedPending,m=e.postOwnerIsUnpublished;e=e.showRichComment;h=h===void 0?!1:h;i=i===void 0?!1:i;m=m===void 0?!1:m;e=e===void 0?!1:e;a=j&&!a.parentState.showRestrictedContent;var n=i?"h2":"h3";if(a){b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=l.jsx(c("IGDSBox.react"),{marginBottom:1,position:"relative",children:l.jsx(c("IGDSText.react"),{color:"tertiaryText",size:"body",weight:"semibold",children:d("PolarisPostStrings").RESTRICTED_ACCOUNT_HEADER_TEXT})}),b[0]=a):a=b[0];return a}else if(!i||m!==!0){a=j===!0;b[1]!==a?(i="_a9zc"+(a?" _a9zd":""),b[1]=a,b[2]=i):i=b[2];b[3]!==g?(m=d("PolarisLinkBuilder").buildUserLink(c("nullthrows")(g)),b[3]=g,b[4]=m):m=b[4];b[5]!==g?(j=c("nullthrows")(g),b[5]=g,b[6]=j):j=b[6];b[7]!==m||b[8]!==j?(a=l.jsx(c("IGDSButton.react"),{display:"block",href:m,label:j,variant:"secondary_link"}),b[7]=m,b[8]=j,b[9]=a):a=b[9];b[10]!==f||b[11]!==g||b[12]!==a?(m=l.jsx(c("IGDSBox.react"),{marginEnd:1,position:"relative",children:l.jsx(c("PolarisUserHoverCard.react"),{display:"inline",userId:f,username:g,children:a})}),b[10]=f,b[11]=g,b[12]=a,b[13]=m):m=b[13];b[14]!==e||b[15]!==h?(j=e&&h&&l.jsx(c("IGDSBox.react"),{marginEnd:1,position:"relative",children:l.jsx(c("IGDSVerifiedBadge.react"),{size:"small"})}),b[14]=e,b[15]=h,b[16]=j):j=b[16];b[17]!==n||b[18]!==i||b[19]!==m||b[20]!==j?(f=l.jsxs(n,{className:i,children:[m,j]}),b[17]=n,b[18]=i,b[19]=m,b[20]=j,b[21]=f):f=b[21];return f}return null}function o(a){var b=k(14);a=a.parentProps;var e=a.captionCreatedAt,f=a.commentThreadId,g=a.disableTimestampNav,h=a.id,i=a.isCaption,j=a.isEdited,m=a.postedAt;a=a.postShortcode;i=i===void 0?!1:i;j=j===void 0?!1:j;var n;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(n="_a9ze _a9zf",b[0]=n):n=b[0];i=i&&j&&e!=null?e:m;b[1]!==i?(j=l.jsx(c("PolarisTimestamp.react"),{className:n,value:i}),b[1]=i,b[2]=j):j=b[2];e=j;if(a!=null&&h!=null){b[3]!==f||b[4]!==h||b[5]!==a?(m=f!=null&&f!==h?d("PolarisLinkBuilder").buildReplyPermalink(a,f,h,d("PolarisUA").isMobile()):d("PolarisLinkBuilder").buildCommentPermalink(a,h,d("PolarisUA").isMobile()),b[3]=f,b[4]=h,b[5]=a,b[6]=m):m=b[6];n=m;b[7]!==g?(i=g===!0?function(a){return a.preventDefault()}:void 0,b[7]=g,b[8]=i):i=b[8];j=i;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(f="_a9zg",b[9]=f):f=b[9];b[10]!==n||b[11]!==j||b[12]!==e?(h=l.jsx(c("PolarisFastLink.react"),{className:f,href:n,onClick:j,children:e}),b[10]=n,b[11]=j,b[12]=e,b[13]=h):h=b[13];e=h}return e}f=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.state={showApproveCommentDialog:!1,showCommentOptionsDialog:!1,showRestrictedContent:!1},e.$3=function(){e.setState({showCommentOptionsDialog:!0})},e.$4=function(){if(!d("PolarisUA").isMobile()||e.props.showRichComment!==!0||e.props.isCaption===!0)return;e.$1=window.setTimeout(e.$3,m)},e.$2=function(){window.clearTimeout(e.$1)},e.$5=function(){e.setState({showCommentOptionsDialog:!1})},e.$6=function(){e.setState({showCommentOptionsDialog:!1}),e.props.onDeleteComment()},e.$7=function(){var a=e.props,b=a.id;a=a.onDeleteCommentClick;a&&a(c("nullthrows")(b))},e.$8=function(a){var b=e.props,c=b.onLikeComment;b=b.onUnlikeComment;a?c():b()},e.$9=function(){var a=e.props,b=a.isRestrictedPending;b=b===void 0?!1:b;var c=a.likedByViewer;c=c===void 0?!1:c;a=a.onLikeComment;!c&&!b&&a()},e.$10=function(){var a=e.props,b=a.code,f=a.fetchCommentLikes,g=a.id,h=a.loggedIn,i=a.onLikeCountClick,j=a.onLoggedOutIntentClick;a=a.onLoggedOutIntentClickLoginModal;if(h)i&&(f(),i(c("nullthrows")(g)));else{h="post_comment_like_count";d("PolarisUA").isDesktop()?a(d("PolarisLinkBuilder").buildMediaLink(c("nullthrows")(b)),h):j(h)}},e.$11=function(a){var b=e.props,f=b.analyticsContext,g=b.commentOwnerId,h=b.commentThreadId,i=b.id,j=b.isRestrictedPending,k=b.mediaType,l=b.postId,m=b.postOwnerId;b=b.viewerId;switch(a.state){case"entered":if(i!=null&&b!=null){d("PolarisEngagementLogger").logCommentImpression({commentAuthorId:g,commentId:i,commentThreadId:h,containerModule:f,mediaAuthorId:m,mediaId:l,mediaType:k});j&&c("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"impression",actorIgUserid:g,commentId:i,commentThreadId:h,parentMediaId:l,step:"pending_comment"});return}}},e.$12=function(){var a=e.props,b=a.code,f=a.loggedIn,g=a.onLoggedOutIntentClick,h=a.onLoggedOutIntentClickLoginModal;a=a.onReplyClick;if(f)a();else{f="post_comment_reply";d("PolarisUA").isDesktop()?h(d("PolarisLinkBuilder").buildMediaLink(c("nullthrows")(b)),f):g(f)}},e.$13=function(){var a=e.props,b=a.commentOwnerId,d=a.commentThreadId,f=a.id;a=a.postId;c("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"click",actorIgUserid:b,commentId:f,commentThreadId:d,parentMediaId:a,step:"pending_comment_see_hidden"});e.setState({showRestrictedContent:!0})},e.$14=function(){var a=e.props,b=a.commentOwnerId,d=a.commentThreadId,f=a.id;a=a.postId;c("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"click",actorIgUserid:b,commentId:f,commentThreadId:d,parentMediaId:a,step:"pending_comment_approve"});e.setState({showApproveCommentDialog:!0})},e.$15=function(){e.setState({showApproveCommentDialog:!1})},e.$16=function(){var a=e.props,b=a.commentOwnerId,d=a.commentThreadId,f=a.id;a=a.postId;c("PolarisIgWellbeingRestrictManageCommentFalcoEvent").log({action:"click",actorIgUserid:b,commentId:f,commentThreadId:d,parentMediaId:a,step:e.state.showRestrictedContent?"pending_comment_delete":"pending_comment_delete_hidden"});e.$7()},b)||babelHelpers.assertThisInitialized(e)}var e=b.prototype;e.componentWillUnmount=function(){this.$2()};e.$17=function(){var a=this.props,b=a.code,e=a.id,f=a.likeCount;a=a.loggedIn;if(f==null||f===0)return null;var g=f.toLocaleString(),h=i._("__JHASH__7PgeOKK7Hd0__JHASH__",[i._param("like count",g)]);g=i._("__JHASH__-wTB86PYRly__JHASH__",[i._param("like count",g)]);h=f===1?h:g;return f>0&&(d("PolarisUA").isDesktop()||!a?l.jsx("button",{className:"_a9ze",onClick:this.$10,children:l.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:h})}):l.jsx(c("PolarisFastLink.react"),{className:"_a9ze _amp7",href:"/p/"+c("nullthrows")(b)+"/c/"+c("nullthrows")(e)+"/liked_by/",children:h}))};e.render=function(){var a=this,b=this.props,e=b.className,f=b.commentingDisabledForViewer,g=b.commentOwnerAvatar,h=b.commentOwnerId,i=b.commentOwnerUsername,j=b.commentThreadId,k=b.customPaddingStyle,m=b.giphyMediaInfo,p=b.hideUserAvatar,q=p===void 0?!1:p,r=b.id;p=b.isCaption;var s=p===void 0?!1:p;p=b.isEdited;var t=p===void 0?!1:p;p=b.isPermalinkedComment;p=p===void 0?!1:p;var u=b.isRestrictedPending,v=b.likedByViewer,w=b.postId,x=b.postOwnerId,y=b.postOwnerIsUnpublished,z=b.reducedAvatarMargin,A=b.showCommentOptionsInline,B=A===void 0?!1:A;A=b.showRemoveIcon;var C=b.showRichComment,D=C===void 0?!1:C;C=b.translation;var E=b.variant;b=b.viewerId;var F=this.props.text.toString();(C==null?void 0:C.showTranslatedText)===!0&&C.translatedText!=null&&(F=C.translatedText);var G=!s&&b!=null&&(b===h||x===b),H=G&&A&&!D,I=!s&&b!=null&&!H&&!u;C=d("PolarisConfig").isLoggedOutFRXEligible()&&p;var J=C||D&&!d("PolarisUA").isMobile()&&!s&&b!=null,K=E===d("PolarisPostVariants").VARIANTS.feed?c("PolarisTruncatedText.react"):c("PolarisUserText.react"),L=!!s||!I&&!G,M=u&&!this.state.showRestrictedContent,N=u&&this.state.showRestrictedContent;A=m!=null;var O=A?m==null?void 0:(p=m.images)==null?void 0:(C=p.fixed_height)==null?void 0:C.url:void 0,P=l.jsx("div",{className:B===!0?"_a9ze":"",children:l.jsx("div",{className:(B!==!0?"_a9zh":"")+(B===!0?" _a9zi":""),children:l.jsx(c("IGDSIconButton.react"),{"data-testid":void 0,onClick:this.$3,children:l.jsx(c("IGDSBox.react"),{alignItems:"center",height:24,justifyContent:"center",position:"relative",width:24,children:l.jsx(c("IGDSMoreHorizontalPanoOutlineIcon.react"),{alt:d("PolarisPostStrings").COMMENT_OPTIONS_ALT_TEXT,color:"ig-secondary-text"})})})})});return l.jsx(d("PolarisViewpointReact.react").Viewpoint,{action:this.$11,id:F.replace(" ","-"),children:function(b){return l.jsxs(d("PolarisDoubleTappable").DoubleTappable,{onDoubleClick:a.$9,role:"button",children:[l.jsx("li",{className:c("joinClasses")((D?"_a9zj":"")+(k==="compact"?" _a9zk":"")+" _a9zl",e),onMouseDown:a.$4,onMouseUp:a.$2,onTouchEnd:a.$2,onTouchMove:a.$2,onTouchStart:a.$4,ref:b,children:l.jsxs("div",{className:"_a9zm","data-testid":void 0,children:[l.jsxs("div",{className:(L?"_a9zn":"")+" _a9zo",children:[D&&!q&&l.jsx(c("PolarisUserHoverCard.react"),{display:"block",userId:h,username:i,children:l.jsx(c("PolarisUserAvatarWithStories.react"),{className:"_a9zp"+(z===!0?" _a9zq":"")+(u===!0?" _a9zd":""),isLink:!y,profilePictureUrl:(b=g)!=null?b:"",size:c("PolarisIGCoreConstants").AVATAR_SIZES.small,storyEntrypoint:"post_comment",username:i})}),l.jsxs("div",{className:"_a9zr",children:[l.jsx(n,{parentProps:a.props,parentState:a.state}),!M&&(O!=null?l.jsx(c("PolarisPostGifComment.react"),{gifSrc:O}):l.jsx("div",{className:"_a9zs"+(u===!0?" _a9zd":""),"data-testid":void 0,children:l.jsx(K,{display:"inline",headlineTag:s===!0?"h1":void 0,size:"body",value:F})})),D&&l.jsx(c("IGDSBox.react"),{marginBottom:1,marginTop:2,position:"relative",children:l.jsxs(c("IGDSText.react").Body2,{color:"secondaryText",dir:c("Locale").isRTL()?"rtl":"ltr",children:[s&&t&&l.jsxs(l.Fragment,{children:[d("PolarisPostStrings").CAPTION_EDITED_TEXT,"\xa0\xb7\xa0"]}),l.jsx(o,{parentProps:a.props}),s&&l.jsx(c("IGDSBox.react"),{display:"inlineBlock",position:"relative",children:l.jsx(c("PolarisPostCaptionTranslationPrompt.react"),{postId:w})}),!s&&!u&&l.jsxs(l.Fragment,{children:[a.$17(),f!==!0&&l.jsx("button",{className:"_a9ze",onClick:a.$12,children:l.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:d("PolarisPostStrings").REPLY_TEXT})}),r!=null&&l.jsx(c("IGDSBox.react"),{display:"inlineBlock",marginEnd:2,position:"relative",children:l.jsx(c("PolarisCommentTranslationPrompt.react"),{commentId:r})}),J&&B===!0&&P]}),M&&l.jsx("button",{className:"_a9ze",onClick:a.$13,children:l.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:d("PolarisPostStrings").RESTRICT_SEE_COMMENT_TEXT})}),N&&l.jsx("button",{className:"_a9ze",onClick:a.$14,children:l.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:d("PolarisApproveCommentDialog.react").APPROVE_COMMENT_CTA})}),u&&l.jsx("button",{className:"_a9ze",onClick:a.$16,children:l.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:d("PolarisPostStrings").RESTRICT_DELETE_COMMENT_TEXT})})]})})]})]}),H&&l.jsx("button",{className:"_a9zt",onClick:a.$7,title:d("PolarisPostStrings").DELETE_COMMENT_TEXT,children:l.jsx(c("IGDSText.react"),{color:"tertiaryText",size:"footnote",weight:"semibold",zeroMargin:!0,children:d("PolarisPostStrings").DELETE_COMMENT_TEXT})}),J&&!B&&P,I&&l.jsx(c("PolarisLikeButton.react"),{className:"_a9zu",isLiked:!!v,large:!1,onChange:a.$8})]})}),a.state.showCommentOptionsDialog&&r!=null&&l.jsx(c("PolarisCommentOptionsDialog.react"),{canDeleteComment:!!G,commentId:r,commentOwnerAvatar:(b=g)!=null?b:"",commentOwnerId:h,commentOwnerUsername:i,mediaOwnerId:x,onClose:a.$5,onDelete:a.$6}),a.state.showApproveCommentDialog&&r!=null&&l.jsx(d("PolarisApproveCommentDialog.react").ApproveCommentDialog,{commentId:r,commentOwnerId:h,commentOwnerUsername:i,commentThreadId:j,onClose:a.$15,postId:w})]})}})};return b}(l.PureComponent);f.defaultProps={showRichComment:!1};function a(a,b){var e=b.commentOwnerId,f=b.postId,g=b.postOwnerId;e=d("polarisUserSelectors").getUserByIdOrThrows(a,e);f=d("polarisPostSelectors").getPostOrNullById(a,f);b=b.id;b==null&&(b=f==null?void 0:f.captionCommentId);return{commentOwnerAvatar:e.profilePictureUrl,commentOwnerId:c("nullthrows")(e.id),commentOwnerUsername:c("nullthrows")(e.username),postOwnerIsUnpublished:d("polarisUserSelectors").getUserByIdOrThrows(a,g).isUnpublished,postShortcode:f&&f.code,translation:b!=null?a.comments.translationById.get(b):null,viewerId:a.users.viewerId}}function b(a,b){var e={commentAuthorId:b.commentOwnerId,commentId:b.id||"",containerModule:b.analyticsContext,mediaAuthorId:b.postOwnerId,mediaId:b.id||"",mediaType:b.mediaType||0};return{fetchCommentLikes:function(){return a(d("PolarisCommentLikeListsActions").requestCommentLikes(c("nullthrows")(b.id)))},onDeleteComment:function(){return a(d("PolarisCommentActions").deleteComment(b.postId,b.id||"",b.analyticsContext))},onLikeComment:function(b){return a(d("PolarisCommentActions").likeComment(babelHelpers["extends"]({},e,{userId:b||""})))},onLoggedOutIntentClick:function(b){a(d("PolarisNavigationActions").openLoggedOutIntentDialog(b))},onLoggedOutIntentClickLoginModal:function(b,c,e){var f=d("PolarisUA").isDesktop()||d("PolarisConfig").isLoggedOutFRXEligible()?"feature_wall":"content_wall";a(d("PolarisNavigationActions").openLoginModal(f,b,c,e,b))},onReplyClick:function(e){return a(d("PolarisPendingCommentActions").changePendingComment(b.postId,"@"+(e||"")+" ",c("nullthrows")(b.commentThreadId),b.commentOwnerId,e))},onUnlikeComment:function(b){return a(d("PolarisCommentActions").unlikeComment(babelHelpers["extends"]({},e,{userId:b||""})))}}}function e(a,b,c){return babelHelpers["extends"]({},a,b,c,{onLikeComment:function(){return b.onLikeComment(a.viewerId)},onReplyClick:function(){return b.onReplyClick(a.commentOwnerUsername)},onUnlikeComment:function(){return b.onUnlikeComment(a.viewerId)}})}h=d("PolarisReactRedux.react").connect(a,b,e)(f);g["default"]=h}),226);
__d("PolarisPreviewComments.react",["cx","fbt","IGDSSpinner.react","PolarisBatchDOM","PolarisBigNumber.react","PolarisCommentActionConstants","PolarisCommentActions","PolarisIGCoreButton.react","PolarisInteractionsLogger","PolarisLinkBuilder","PolarisNavigationActions","PolarisPostComment.react","PolarisPostVariants","PolarisReactRedux.react","PolarisUA","browserHistory","isStringNullOrEmpty","joinClasses","polarisCommentSelectors.react","polarisPostSelectors","react","usePolarisDisplayProperties"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react"));e=j;e.useMemo;var l=e.unstable_useMemoCache;f=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.$2=function(a){var b=c.props,e=b.analyticsContext,f=b.code,g=b.id,h=b.loadMore,i=b.loggedIn,j=b.mediaType,k=b.onLoggedOutIntentClick,l=b.ownerId;b=b.variant;var m=d("PolarisUA").isMobile();a.preventDefault();if(b===d("PolarisPostVariants").VARIANTS.feed||m){a=d("PolarisLinkBuilder").buildMediaCommentsLink(f,m);i?(d("browserHistory").browserHistory.push(a),d("PolarisInteractionsLogger").logInteractionAction({containerModule:e,eventName:"instagram_organic_comment_view_all",mediaAuthorId:l,mediaId:g,mediaType:j})):k("post_comment_view_all")}else h(g,f),d("PolarisInteractionsLogger").logInteractionAction({containerModule:e,eventName:"instagram_organic_comment_view_more",mediaAuthorId:l,mediaId:g,mediaType:j})},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.componentDidUpdate=function(a,b,c){var e=this,f=a.commentSaveIsInFlight&&!this.props.commentSaveIsInFlight,g=this.$1;if(!g)return;d("PolarisBatchDOM").measure(function(){var b=g.scrollTop;f?b=g.scrollHeight:c!=null?b=g.scrollHeight-c:e.props.id!==a.id&&(b=0);d("PolarisBatchDOM").mutate(function(){g.scrollTop=b})})};e.getSnapshotBeforeUpdate=function(a){var b=a.comments,c=this.props.comments;if(a.id===this.props.id&&c&&b&&c.count()>b.count()){a=this.$1;if(a)return a.scrollHeight-a.scrollTop}return null};e.render=function(){var a=this,b=this.props,e=b.analyticsContext,f=b.captionAndTitle,g=b.captionIsEdited,h=b.className,i=b.commentsAreStacked,j=b.commentsDisabled,l=b.commentsHasNextPage,m=b.commentsTotalCount,n=b.handleDeleteCommentClick,o=b.id,p=b.loggedIn,q=b.mediaType,r=b.ownerId,s=b.postedAt,t=b.previewComments,u=b.showRemoveCommentIcons,v=b.variant;b=j!==!0&&(l===!0||t!=null&&t.length<m);if((f==null||f==="")&&m===0&&!b)return null;l=t;return k.jsx("div",{className:c("joinClasses")("_acri"+(!d("PolarisUA").isMobile()&&v===d("PolarisPostVariants").VARIANTS.flexible&&!i?" _acrj":""),h),ref:function(b){return a.$1=b},children:k.jsxs("ul",{className:"_acrk",children:[!c("isStringNullOrEmpty")(f)&&k.jsx(c("PolarisPostComment.react"),{analyticsContext:e,commentOwnerId:r,isCaption:!0,isEdited:!!g,isRestrictedPending:!1,loggedIn:p,mediaType:q,postedAt:s,postId:o,postOwnerId:r,showRemoveIcon:!1,text:f,variant:v},"captionAndTitle"),b&&this.renderLoadMoreCommentsLink(),j!==!0&&l&&l.map(function(a){return k.jsx(c("PolarisPostComment.react"),{analyticsContext:e,commentOwnerId:a.userId,id:a.id,isAuthorVerified:a.isAuthorVerified,isRestrictedPending:a.isRestrictedPending,likedByViewer:a.likedByViewer,loggedIn:p,mediaType:q,onDeleteCommentClick:n,postedAt:a.postedAt,postId:o,postOwnerId:r,showRemoveIcon:u,text:a.text,variant:v},a.id)})]})})};e.renderLoadMoreCommentsLink=function(){var a=this.props,b=a.comments,e=a.commentsIsFetching,f=a.commentsTotalCount;a=a.variant;var g=i._("__JHASH__EzDl3Q5qBhq__JHASH__");b&&b.count()+d("PolarisCommentActionConstants").PAGE_SIZE>=f||a===d("PolarisPostVariants").VARIANTS.feed||d("PolarisUA").isMobile()?b=i._("__JHASH__goQVaKpz6ee__JHASH__",[i._param("count",k.jsx(c("PolarisBigNumber.react"),{value:f}))]):b=g;return k.jsxs("li",{className:"_acrl",children:[k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,dangerouslySetClassName:{__className:"_acrm"},disabled:e,onClick:this.$2,children:b}),e&&k.jsx("div",{className:"_acrn",children:k.jsx(c("IGDSSpinner.react"),{position:"static",size:"small"})})]})};return b}(k.PureComponent);function a(a,b){var c=d("polarisCommentSelectors.react").getPreviewCommentsForPostId(a,b.id);b=d("polarisPostSelectors").getNumCommentsForPostId(a,b.id);a=a.navigation.pageIdentifier||"";return{analyticsContext:a,commentSaveIsInFlight:!1,commentsHasNextPage:!1,commentsIsFetching:!1,commentsTotalCount:b,previewComments:c}}function b(){var a=l(2),b=c("usePolarisDisplayProperties")();b=b.viewportWidth;var d;a[0]!==b?(d={viewportWidth:b},a[0]=b,a[1]=d):d=a[1];b=d;return b}h={loadMore:d("PolarisCommentActions").requestNextCommentPage,onLoggedOutIntentClick:d("PolarisNavigationActions").openLoggedOutIntentDialog};e=d("PolarisReactRedux.react").connect(a,h)(f);a=d("PolarisReactRedux.react").connectHooks(b)(e);g["default"]=a}),226);
__d("PolarisCommentThread.react",["cx","fbt","IGDSBox.react","IGDSSpinner.react","PolarisConfig","PolarisIGCoreButton.react","PolarisInteractionsLogger","PolarisPaginationUtils","PolarisPostComment.react","PolarisPostVariants","PolarisReactRedux.react","PolarisThreadedCommentActions","PolarisThreadedCommentSelectors","isStringNullOrEmpty","nullthrows","polarisCommentReducer","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=(j||(j=d("react"))).unstable_useMemoCache,l=j;function m(a){var b=k(25),e=a.childComment,f=a.disableTimestampNav;a=a.parentProps;var g=a.analyticsContext,h=a.code,i=a.commentingDisabledForViewer,j=a.hideUserAvatar,m=a.loggedIn,n=a.onDeleteCommentClick,o=a.onLikeCountClick,p=a.parentComment,q=a.postId,r=a.postOwnerId,s=a.reducedAvatarMargin,t=a.showCommentOptionsInline;a=a.showRemoveIcon;var u;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(u="_a9ye",b[0]=u):u=b[0];j=!!j;b[1]!==g||b[2]!==h||b[3]!==i||b[4]!==e.userId||b[5]!==e.giphyMediaInfo||b[6]!==e.id||b[7]!==e.isAuthorVerified||b[8]!==e.isRestrictedPending||b[9]!==e.likeCount||b[10]!==e.likedByViewer||b[11]!==e.postedAt||b[12]!==e.text||b[13]!==p.id||b[14]!==f||b[15]!==j||b[16]!==m||b[17]!==n||b[18]!==o||b[19]!==q||b[20]!==r||b[21]!==s||b[22]!==t||b[23]!==a?(u=l.jsx(c("PolarisPostComment.react"),{analyticsContext:g,className:u,code:h,commentingDisabledForViewer:i,commentOwnerId:e.userId,commentThreadId:p.id,disableTimestampNav:f,giphyMediaInfo:e.giphyMediaInfo,hideUserAvatar:j,id:e.id,isAuthorVerified:e.isAuthorVerified,isRestrictedPending:e.isRestrictedPending,likeCount:e.likeCount,likedByViewer:e.likedByViewer,loggedIn:m,onDeleteCommentClick:n,onLikeCountClick:o,postedAt:e.postedAt,postId:q,postOwnerId:r,reducedAvatarMargin:s,showCommentOptionsInline:t,showRemoveIcon:a,showRichComment:!0,text:e.text,variant:d("PolarisPostVariants").VARIANTS.flexible},e.id),b[1]=g,b[2]=h,b[3]=i,b[4]=e.userId,b[5]=e.giphyMediaInfo,b[6]=e.id,b[7]=e.isAuthorVerified,b[8]=e.isRestrictedPending,b[9]=e.likeCount,b[10]=e.likedByViewer,b[11]=e.postedAt,b[12]=e.text,b[13]=p.id,b[14]=f,b[15]=j,b[16]=m,b[17]=n,b[18]=o,b[19]=q,b[20]=r,b[21]=s,b[22]=t,b[23]=a,b[24]=u):u=b[24];return u}b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={hasPermalinkedReplyBeenHidden:!1},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.componentDidUpdate=function(a,b){(a.parentComment.id!==this.props.parentComment.id||a.permalinkedReplyId!==this.props.permalinkedReplyId)&&this.setState({hasPermalinkedReplyBeenHidden:!1})};e.$1=function(){var a=this.props,b=a.childCommentsCacheCanShowMoreWithoutFetch,c=a.childCommentsCanFetchMorePagination,d=a.childCommentsHasNextPage,e=a.permalinkedReply;a=a.remainingCachedShowableChildCommentIds;return e!=null&&d===!0&&b===!0&&c!==!0&&a.count()===1&&a.get(0)===e.id};e.$2=function(a){var b=this.props.childCommentsHasNextPage;return b!==!0||a&&this.$1()};e.$3=function(a){var b=this.props,c=b.analyticsContext,e=b.childCommentsCacheCanShowMoreWithoutFetch,f=b.childCommentsIsFetching,g=b.hideReplies,h=b.loadChildComments,i=b.loadChildCommentsV2,j=b.onHidePermalinkReply,k=b.parentComment,l=k.id;k=k.userId;var m=b.permalinkedReply,n=b.postId,o=b.postOwnerId;b=b.showReplies;if(f)return;else a?(g(l),d("PolarisInteractionsLogger").logInteractionAction({commentAuthorId:k,commentId:l,containerModule:c,eventName:"instagram_child_comments_collapse",mediaAuthorId:o,mediaId:n}),m!=null&&(j!=null&&j(),this.setState({hasPermalinkedReplyBeenHidden:!0}))):e?b(l):d("PolarisConfig").isLoggedIn()?i(n,l):h(l)};e.$4=function(a,b){var d=this,e=this.props,f=e.childCommentsIsFetching,g=e.replyPagerNodeRef;e=e.totalChildCommentCount;var h=this.$2(b),j=b?1:0;j=a+j;e=e-j;h&&!f?j=i._("__JHASH__l0QlXOkD0E9__JHASH__"):e<=0?j=i._("__JHASH__obWV52hm5rV__JHASH__"):j=i._("__JHASH__vGrwkOmYrh5__JHASH__",[i._param("hidden replies",e)]);return l.jsx("li",{className:"_a9yg",ref:g,children:l.jsxs(c("IGDSBox.react"),{direction:"row",marginBottom:a>0?4:0,marginTop:b?2:0,position:"relative",children:[l.jsxs(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:function(){return d.$3(h)},children:[l.jsx("div",{className:"_a9yh"}),l.jsx("span",{className:"_a9yi",children:j})]}),f&&l.jsx("div",{className:"_a9yj",children:l.jsx(c("IGDSSpinner.react"),{size:"small"})})]})})};e.render=function(){var a=this,b=this.props,e=b.analyticsContext,f=b.code,g=b.commentingDisabledForViewer,h=b.customIndentationPadding,i=b.hideUserAvatar,j=b.innerRef,k=b.isPermalinkedComment,n=b.loggedIn,o=b.onDeleteCommentClick,p=b.onLikeCountClick,q=b.parentComment,r=b.permalinkedReply,s=b.permalinkedReplyAnimating,t=b.permalinkedReplyId,u=b.permalinkedReplyNodeRef,v=b.postId,w=b.postOwnerId,x=b.reducedAvatarMargin,y=b.showCommentOptionsInline,z=b.showRemoveIcon,A=b.totalChildCommentCount;b=b.visibleChildComments;var B=this.state.hasPermalinkedReplyBeenHidden,C=null;r&&!(B&&b.count()===0)&&(C=l.jsx("div",{className:"_a9yk"+(s===!0&&!B?" _a9yl":""),ref:u,children:l.jsx(m,{childComment:r,disableTimestampNav:!0,parentProps:this.props})}));s=b.map(function(b,d){return C&&c("nullthrows")(r).id===b.id?null:l.jsx(m,{childComment:b,parentProps:a.props},d)}).filter(function(a){return a!=null});B=this.$4(s.count(),C!=null);u=h!=null?{margin:"12px 0 0 "+h+"px",width:"calc(100% - "+h+"px)"}:void 0;return l.jsxs("ul",{className:"_a9ym",ref:j,children:[l.jsx(c("PolarisPostComment.react"),{analyticsContext:e,code:f,commentingDisabledForViewer:g,commentOwnerId:q.userId,commentThreadId:q.id,disableTimestampNav:k===!0&&t==null,giphyMediaInfo:q.giphyMediaInfo,hideUserAvatar:!!i,id:q.id,isAuthorVerified:q.isAuthorVerified,isPermalinkedComment:k,isRestrictedPending:q.isRestrictedPending,likeCount:q.likeCount,likedByViewer:q.likedByViewer,loggedIn:n,onDeleteCommentClick:o,onLikeCountClick:p,postedAt:q.postedAt,postId:v,postOwnerId:w,reducedAvatarMargin:x,showCommentOptionsInline:y,showRemoveIcon:z,showRichComment:!0,text:q.text,variant:d("PolarisPostVariants").VARIANTS.flexible}),A!==0&&l.jsx("li",{children:l.jsxs("ul",{className:"_a9yo",style:u,children:[C,B,s]})})]})};return b}(l.Component);function a(a,b){var e=b.parentComment;b=b.permalinkedReplyId;var f=d("PolarisThreadedCommentSelectors").selectChildCommentsForParentIdSplitByVisibility(a,e.id),g=f.remainingCachedShowableChildCommentIds;f=f.visibleChildComments;var h=d("PolarisThreadedCommentSelectors").getTotalChildCommentCountForParentId(a,e.id);e=(e=a.threadedComments.childByParentId[e.id])!=null?e:d("polarisCommentReducer").EMPTY_POST_COMMENTS_STATE;e=e.pagination;var i=null;c("isStringNullOrEmpty")(b)||(i=a.comments.byId.get(b));return{childCommentsCacheCanShowMoreWithoutFetch:d("PolarisPaginationUtils").getVisibleCount(e)<d("PolarisPaginationUtils").getLoadedCount(e),childCommentsCanFetchMorePagination:d("PolarisPaginationUtils").canFetchMorePagination(e),childCommentsHasNextPage:d("PolarisPaginationUtils").hasNextPage(e),childCommentsIsFetching:d("PolarisPaginationUtils").isFetching(e),permalinkedReply:i,remainingCachedShowableChildCommentIds:g,totalChildCommentCount:h||0,visibleChildComments:f}}e={hideReplies:d("PolarisThreadedCommentActions").hideChildComments,loadChildComments:d("PolarisThreadedCommentActions").requestNextChildCommentPage,loadChildCommentsV2:d("PolarisThreadedCommentActions").requestNextChildCommentPageV2,showReplies:d("PolarisThreadedCommentActions").showChildComments};f=d("PolarisReactRedux.react").connect(a,e)(b);g["default"]=f}),226);
__d("PolarisThreadedCommentsLoadMoreButton.react",["fbt","IGDSBox.react","IGDSCircleAddPanoOutlineIcon.react","IGDSSpinner.react","PolarisIGCoreSVGIconButton.react","PolarisUA","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).unstable_useMemoCache,k=i,l=h._("__JHASH__JVvIkhGLRc7__JHASH__");function a(a){var b=j(12),e;b[0]!==a?(e=function(b){var c=a.handleLoadMoreCommentsClick,e=a.loggedIn,f=a.onLoggedOutIntentClickLoginModal,g=a.url;b.preventDefault();!e&&d("PolarisUA").isDesktop()?f(g,"post_comment_view_all"):c(g)},b[0]=a,b[1]=e):e=b[1];var f=e;b[2]!==a.commentsIsFetching||b[3]!==f?(e=!a.commentsIsFetching&&k.jsx(c("PolarisIGCoreSVGIconButton.react"),{onClick:function(a){return f(a)},children:k.jsx(c("IGDSCircleAddPanoOutlineIcon.react"),{alt:l})}),b[2]=a.commentsIsFetching,b[3]=f,b[4]=e):e=b[4];var g;b[5]!==a.commentsIsFetching?(g=a.commentsIsFetching&&k.jsx(c("IGDSSpinner.react"),{position:"absolute",size:"medium"}),b[5]=a.commentsIsFetching,b[6]=g):g=b[6];var h;b[7]!==a.marginBottom||b[8]!==a.marginTop||b[9]!==e||b[10]!==g?(h=k.jsxs(c("IGDSBox.react"),{justifyContent:"center",marginBottom:a.marginBottom,marginTop:a.marginTop,minHeight:40,position:"relative",children:[e,g]}),b[7]=a.marginBottom,b[8]=a.marginTop,b[9]=e,b[10]=g,b[11]=h):h=b[11];return h}g["default"]=a}),226);
__d("PolarisThreadedComments.react",["cx","IGDSBox.react","IGDSDivider.react","PolarisBatchDOM","PolarisCommentCover.react","PolarisCommentThread.react","PolarisCommentsContainerPlaceholder.react","PolarisCommentsSectionText.react","PolarisCommentsSortContext.react","PolarisCommentsStrings","PolarisConfig","PolarisInteractionsLogger","PolarisLinkBuilder","PolarisNavigationActions","PolarisNoCommentsPlaceholder.react","PolarisPaginationUtils","PolarisPendingCommentState","PolarisPostComment.react","PolarisPostVariants","PolarisReactRedux.react","PolarisSortCommentsUtil","PolarisThreadedCommentActions","PolarisThreadedCommentSelectors","PolarisThreadedCommentsLoadMoreButton.react","PolarisUA","cr:6742","isStringNullOrEmpty","nullthrows","polarisCommentReducer","polarisRequestIdleCallback","polarisUserSelectors","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).unstable_useMemoCache,k=i,l={commentsCover:{marginStart:"x16n37ib",marginLeft:null,marginRight:null,$$css:!0}};function m(a,b){var c=b.getBoundingClientRect().top;c=c-b.scrollTop;b=a.getBoundingClientRect().top;return b-c}function n(a){var b=j(22),d=a.innerRef,e=a.isPermalinkedComment,f=a.onHidePermalinkReply,g=a.parentComment,h=a.parentProps,i=a.parentState,l=a.permalinkedReplyId,m=a.permalinkedReplyNodeRef;a=a.replyPagerNodeRef;var n=h.analyticsContext,o=h.code,p=h.commentingDisabledForViewer,q=h.customIndentationPadding,r=h.handleDeleteCommentClick,s=h.hideUserAvatar,t=h.id,u=h.isDeletingComments,v=h.loggedIn,w=h.onLikeCountClick,x=h.ownerId,y=h.reducedAvatarMargin;h=h.showCommentOptionsInline;i=i.commentPermalinkAnimEnabled;var z;b[0]!==n||b[1]!==o||b[2]!==p||b[3]!==q||b[4]!==s||b[5]!==d||b[6]!==e||b[7]!==v||b[8]!==r||b[9]!==f||b[10]!==w||b[11]!==g||b[12]!==i||b[13]!==l||b[14]!==m||b[15]!==t||b[16]!==x||b[17]!==y||b[18]!==a||b[19]!==h||b[20]!==u?(z=k.jsx(c("PolarisCommentThread.react"),{analyticsContext:n,code:o,commentingDisabledForViewer:p,customIndentationPadding:q,hideUserAvatar:s,innerRef:d,isPermalinkedComment:e,loggedIn:v,onDeleteCommentClick:r,onHidePermalinkReply:f,onLikeCountClick:w,parentComment:g,permalinkedReplyAnimating:i,permalinkedReplyId:l,permalinkedReplyNodeRef:m,postId:t,postOwnerId:x,reducedAvatarMargin:y,replyPagerNodeRef:a,showCommentOptionsInline:h,showRemoveIcon:u}),b[0]=n,b[1]=o,b[2]=p,b[3]=q,b[4]=s,b[5]=d,b[6]=e,b[7]=v,b[8]=r,b[9]=f,b[10]=w,b[11]=g,b[12]=i,b[13]=l,b[14]=m,b[15]=t,b[16]=x,b[17]=y,b[18]=a,b[19]=h,b[20]=u,b[21]=z):z=b[21];return z}f=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.$2=k.createRef(),c.$3=k.createRef(),c.$4=k.createRef(),c.$5=[],c.state={commentPermalinkAnimEnabled:!1,commentsSortOrder:c.props.sortOrder,isAutoscrollingCommentPermalink:!1,replyPermalinkLastHideTime:null,showHiddenComments:!1},c.$13=function(a){a=c.props;var b=a.analyticsContext,e=a.code,f=a.hasRankedComments,g=a.id,h=a.loadMore,i=a.mediaType;a=a.ownerId;h(g,f,e);d("PolarisInteractionsLogger").logInteractionAction({containerModule:b,eventName:"instagram_child_comments_load_more",mediaAuthorId:a,mediaId:g,mediaType:i})},c.$14=function(){c.setState({showHiddenComments:!0})},c.$15=function(a){c.setState({commentsSortOrder:a})},b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.$6=function(){return this.$2.current||null};f.$7=function(){return this.$3.current||null};f.$8=function(){return this.$4.current||null};f.$9=function(a,b,c,e){var f=this;this.setState({commentPermalinkAnimEnabled:!1,isAutoscrollingCommentPermalink:!0});d("PolarisBatchDOM").measure(function(){var g,h=m(b,a);if(c){var i=m(c,a),j=c.getBoundingClientRect().height,k=a.getBoundingClientRect().height;k=Math.max(k-j,0);g=Math.max(h,i-k)}else g=h;d("PolarisBatchDOM").mutate(function(){a.scrollTop=g;var b=function(){f.setState({commentPermalinkAnimEnabled:!0,isAutoscrollingCommentPermalink:!1})};e?d("polarisRequestIdleCallback").requestIdleCallback(function(){b()}):b()})})};f.componentDidMount=function(){var a=this.$1;if(!a)return;var b=this.$6();if(b)this.$9(a,b,this.$7(),!0);else if(!this.props.hasRankedComments){if(d("PolarisUA").isDesktop())return;a.scrollTop=a.scrollHeight}};f.componentDidUpdate=function(a,b,c){var d=this.$1;if(!d)return;var e=this.$6();if(e)if(this.state.isAutoscrollingCommentPermalink)return;else if(this.props.permalinkedCommentId!==a.permalinkedCommentId||this.props.permalinkedReplyId!==a.permalinkedReplyId||this.props.permalinkedComment!==a.permalinkedComment){this.$9(d,e,this.$7(),!1);return}this.$10(a,b,c,d,e)};f.$10=function(a,b,c,e,f){var g=this,h=a.commentSaveIsInFlight&&!this.props.commentSaveIsInFlight;c=c||{};var i=c.newCommentCachedOffset,j=a.id===this.props.id&&a.permalinkedCommentId===this.props.permalinkedCommentId&&a.permalinkedReplyId===this.props.permalinkedReplyId&&b.replyPermalinkLastHideTime!==this.state.replyPermalinkLastHideTime,k=this.$8();h&&!a.commentWasReply&&(this.$5[0]&&this.$5[0].scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}));d("PolarisBatchDOM").measure(function(){var b=null;h&&!a.commentWasReply&&!g.props.hasRankedComments?b=e.scrollHeight:i!=null?b=e.scrollHeight-i:j&&f&&k&&(b=g.$11(e,f,k));d("PolarisBatchDOM").mutate(function(){b!=null&&(e.scrollTop=b)})})};f.$11=function(a,b,c){c=m(c,a);b=m(b,a);var d=6;c=Math.max(c-d,b);return a.scrollTop>c?c:null};f.getSnapshotBeforeUpdate=function(a,b){b=a.comments;var c=this.props.comments,d=this.$1;return d&&a.id===this.props.id&&c.count()>b.count()&&!this.props.hasRankedComments?{newCommentCachedOffset:d.scrollHeight-d.scrollTop}:null};f.$12=function(){this.setState({replyPermalinkLastHideTime:new Date().valueOf()})};f.render=function(){var a=this,e=this.props,f=e.analyticsContext,g=e.captionAndTitle,h=e.captionCreatedAt,i=e.captionIsEdited,j=e.className,m=e.comments,o=e.commentsDisabled,p=e.commentsHasNextPage,q=e.disableScroll,r=e.hasCoveredComments,s=e.hasRankedComments,t=e.hideUserAvatar,u=e.id,v=e.initialCommentsLoading,w=e.isOwnerVerified,x=e.loggedIn,y=e.mediaType,z=e.ownerId,A=e.permalinkedComment,B=e.permalinkedReplyId,C=e.postedAt,D=e.reducedAvatarMargin,E=e.requestComments,F=e.showCommentOptionsInline;e=e.showPagerBelowComments;p=o!==!0&&Boolean(p);var G=v&&m.size===0;if((g==null||g==="")&&m.count()===0&&!p&&!G)return d("PolarisUA").isDesktop()?k.jsx("div",{className:j,children:k.jsx(c("PolarisNoCommentsPlaceholder.react"),{})}):k.jsx("div",{className:j});var H=null,I=null,J=null;if(!G&&o!=null){H=A?k.jsx("div",{className:"_a9z3"+(this.state.commentPermalinkAnimEnabled&&!B?" _a9yl":""),ref:this.$2,children:k.jsx(n,{isPermalinkedComment:!0,onHidePermalinkReply:function(){return a.$12()},parentComment:A,parentProps:this.props,parentState:this.state,permalinkedReplyId:B,permalinkedReplyNodeRef:this.$3,replyPagerNodeRef:this.$4})}):null;var K=function(){var b;return(b=a.props.comments.findIndex(function(a){return a.isAuthorVerified===!1}))!=null?b:-1};I=m.map(function(b,e){if(A&&b.id===A.id)return null;return b.isCovered===!0?null:k.jsxs(c("IGDSBox.react"),{marginBottom:4,children:[k.jsx(n,{innerRef:function(b){return a.$5[e]=b},parentComment:b,parentProps:a.props,parentState:a.state},e),a.props.sortOrder===d("PolarisSortCommentsUtil").CommentsOptionValues.META_VERIFIED&&K()===e+1&&k.jsx(c("IGDSDivider.react"),{})]},e)}).filter(function(a){return!!a});J=m.filter(function(a){return a.isCovered===!0}).map(function(b,c){return k.jsx(n,{innerRef:function(b){return a.$5[c]=b},parentComment:b,parentProps:a.props,parentState:a.state},c)})}o=null;c("isStringNullOrEmpty")(g)||(o=k.jsx(c("PolarisPostComment.react"),{analyticsContext:f,captionCreatedAt:h,className:(d("PolarisUA").isMobile()?"_a9z4":"")+" _a9z5",commentOwnerId:z,hideUserAvatar:!!t,isAuthorVerified:!!w,isCaption:!0,isEdited:!!i,isRestrictedPending:!1,loggedIn:x,mediaType:y,postedAt:c("nullthrows")(C),postId:u,postOwnerId:z,reducedAvatarMargin:D,showCommentOptionsInline:F,showRemoveIcon:!1,showRichComment:!0,text:g,variant:d("PolarisPostVariants").VARIANTS.flexible},"captionAndTitle"));B=p&&this.renderLoadMoreCommentsLink(H!=null);f=s||e===!0;h=function(a){return E(u,void 0,a)};t=d("PolarisSortCommentsUtil").showCommentsSortOptions(this.props.sortOrder,m.size);w=function(){return m.some(function(a){return a.isAuthorVerified===!0})};i=this.props.sortOrder===d("PolarisSortCommentsUtil").CommentsOptionValues.META_VERIFIED&&!w();x=k.jsx(c("IGDSBox.react"),{marginEnd:d("PolarisUA").isMobile()?4:0,marginStart:d("PolarisUA").isMobile()?4:0,children:k.jsx(c("IGDSDivider.react"),{})});return k.jsx(d("PolarisCommentsSortContext.react").PolarisCommentsSortContextProvider,{commentsSortOrder:this.state.commentsSortOrder,setCommentsSortOrder:this.$15,children:k.jsx("div",{className:j,children:k.jsxs("ul",{className:"_a9z6"+(q?" _a9z7":"")+(H!==null?" _a9z8":"")+(o===null?" _a9z9":"")+(!B||f?" _a9za":""),ref:function(b){return a.$1=b},children:[o,k.jsxs(c("IGDSBox.react"),{direction:"column",display:"flex",children:[t&&b("cr:6742")!=null&&k.jsx(c("IGDSBox.react"),{marginStart:12,marginTop:2,children:k.jsx(b("cr:6742"),{commentsCount:m.size,fetchComments:h})}),H]}),G?k.jsx(c("PolarisCommentsContainerPlaceholder.react"),{}):null,!f&&B,k.jsx(c("IGDSBox.react"),{children:v?k.jsx(c("PolarisCommentsContainerPlaceholder.react"),{}):k.jsxs(c("IGDSBox.react"),{children:[i&&k.jsx(c("PolarisCommentsSectionText.react"),{commentsDivider:x,marginStart:12,text:d("PolarisSortCommentsUtil").NO_META_VERIFIED_COMMENTS}),k.jsxs(c("IGDSBox.react"),{children:[!d("PolarisConfig").isLoggedOutFRXEligible()&&I,f&&B,!B&&r&&!this.state.showHiddenComments&&k.jsx(c("PolarisCommentCover.react"),{onClick:this.$14,postId:u,postOwnerId:z,xstyle:l.commentsCover}),this.state.showHiddenComments&&k.jsxs(k.Fragment,{children:[k.jsx(c("PolarisCommentsSectionText.react"),{commentsDivider:x,marginStart:12,text:d("PolarisCommentsStrings").COVERED_COMMENTS}),J]})]})]})})]})})})};f.renderLoadMoreCommentsLink=function(a){var b=this.props,e=b.code,f=b.commentsIsFetching,g=b.hasRankedComments,h=b.loggedIn;b=b.onLoggedOutIntentClickLoginModal;e=d("PolarisLinkBuilder").buildMediaCommentsLink(c("nullthrows")(e),d("PolarisUA").isMobile());var i;g?(g=0,i=0):a?(g=2,i=2):(g=0,i=4);return k.jsx("li",{children:k.jsx(c("PolarisThreadedCommentsLoadMoreButton.react"),{commentsIsFetching:f,handleLoadMoreCommentsClick:this.$13,loggedIn:h,marginBottom:i,marginTop:g,onLoggedOutIntentClickLoginModal:b,url:e})})};return e}(k.PureComponent);function a(a,b){var c,e,f=b.id,g=b.ownerId;b=b.permalinkedCommentId;var h=d("PolarisThreadedCommentSelectors").getThreadedCommentsLoading(a,f),i=d("PolarisThreadedCommentSelectors").selectVisibleParentCommentsForPostId(a,f);c=(c=a.threadedComments.parentByPostId[f])!=null?c:d("polarisCommentReducer").EMPTY_POST_COMMENTS_STATE;var j=c.count;c=c.pagination;e=(e=a.pendingComments[f])!=null?e:d("PolarisPendingCommentState").EMPTY_PENDING_COMMENT;var k=null;!h&&b!=null&&b!==""&&(k=a.comments.byId.get(b));b=(f=(b=a.threadedComments.parentByPostId[f])==null?void 0:b.sortOrder)!=null?f:d("PolarisSortCommentsUtil").CommentsOptionValues.TOP;return{comments:i,commentSaveIsInFlight:e.committing,commentsHasNextPage:d("PolarisPaginationUtils").hasNextPage(c),commentsIsFetching:d("PolarisPaginationUtils").isFetching(c),commentsTotalCount:j!=null?j:0,commentWasReply:e.repliedToCommentId!=null,hasCoveredComments:i.some(function(a){return a.isCovered===!0}),initialCommentsLoading:h,isOwnerVerified:d("polarisUserSelectors").getUserByIdOrThrows(a,g).isVerified,permalinkedComment:k,sortOrder:b}}function e(a){return{loadMore:function(b,c,e){d("PolarisConfig").isLoggedIn()?a(d("PolarisThreadedCommentActions").requestNextParentCommentPageV2(b,c)):a(d("PolarisThreadedCommentActions").requestNextParentCommentPage(b,c,e))},onLoggedOutIntentClickLoginModal:function(b,c){a(d("PolarisNavigationActions").openLoginModal("feature_wall",b,c,null,b))},requestComments:function(b,c,e){a(d("PolarisThreadedCommentActions").requestInitialComments(b,c,e))}}}h=d("PolarisReactRedux.react").connect(a,e)(f);g["default"]=h}),98);
__d("PolarisThreadedCommentsLoader.react",["CometPlaceholder.react","IGDSBox.react","IGDSSpinner.react","PolarisErrorBoundary.react","PolarisMonitorErrors","PolarisReactRedux.react","PolarisThreadedCommentActions","react","usePolarisGetQuerySetup"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function k(a){var b=a.children,e=a.initialCommentsQuery;a=a.postId;c("usePolarisGetQuerySetup")(e,d("PolarisThreadedCommentActions").setupPostComments(a));return b}function a(a){var b=i(12),e=a.children,f=a.initialCommentsQuery,g=a.postId,h=d("PolarisReactRedux.react").useDispatch();b[0]!==h||b[1]!==g?(a=function(a){h(d("PolarisThreadedCommentActions").initialCommentsError(g)),d("PolarisMonitorErrors").logError(a)},b[0]=h,b[1]=g,b[2]=a):a=b[2];a=a;var l;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(l=function(){return null},b[3]=l):l=b[3];var m;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(m=j.jsx(c("IGDSBox.react"),{direction:"row",justifyContent:"center",position:"relative",children:j.jsx(c("IGDSSpinner.react"),{})}),b[4]=m):m=b[4];b[5]!==f||b[6]!==g||b[7]!==e?(m=j.jsx(c("CometPlaceholder.react"),{fallback:m,children:j.jsx(k,{initialCommentsQuery:f,postId:g,children:e})}),b[5]=f,b[6]=g,b[7]=e,b[8]=m):m=b[8];b[9]!==a||b[10]!==m?(f=j.jsx(c("PolarisErrorBoundary.react"),{errorRenderer:l,onError:a,children:m}),b[9]=a,b[10]=m,b[11]=f):f=b[11];return f}g["default"]=a}),98);
__d("PolarisPostComments.react",["PolarisDeleteCommentModal.react","PolarisPostRemoveCommentsSelectors","PolarisPostVariants","PolarisPreviewComments.react","PolarisReactRedux.react","PolarisThreadedComments.react","PolarisThreadedCommentsLoader.react","PolarisUA","nullthrows","polarisUserSelectors","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={commentToDeleteId:null,showDeleteCommentModal:!1},c.$1=function(a){c.setState({commentToDeleteId:a,showDeleteCommentModal:!0})},c.$2=function(){c.setState({commentToDeleteId:null,showDeleteCommentModal:!1})},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.$3=function(){return this.props.variant!==d("PolarisPostVariants").VARIANTS.feed&&!d("PolarisUA").isMobile()};e.render=function(){var a=this.props,b=a.analyticsContext,d=a.caption,e=a.captionCreatedAt,f=a.captionIsEdited,g=a.className,h=a.code,j=a.commentingDisabledForViewer,k=a.commentsAreStacked,l=a.commentsDisabled,m=a.customIndentationPadding,n=a.hasRankedComments,o=a.hideUserAvatar,p=a.id,q=a.initialCommentsQuery,r=a.mediaType,s=a.onLikeCountClick,t=a.ownerId,u=a.permalinkedCommentId,v=a.permalinkedReplyId,w=a.postedAt,x=a.reducedAvatarMargin,y=a.showCommentOptionsInline,z=a.showRemoveCommentIcons,A=a.variant;a=a.viewerId;a=a!=null;this.$3()?(e=i.jsx(c("PolarisThreadedComments.react"),{analyticsContext:b,captionAndTitle:d,captionCreatedAt:e,captionIsEdited:f,className:g,code:h,commentingDisabledForViewer:j,commentsDisabled:l,customIndentationPadding:m,handleDeleteCommentClick:this.$1,hasRankedComments:n,hideUserAvatar:!!o,id:p,isDeletingComments:z,loggedIn:a,mediaType:r,onLikeCountClick:s,ownerId:t,permalinkedCommentId:u,permalinkedReplyId:v,postedAt:w,reducedAvatarMargin:x,showCommentOptionsInline:y}),q!=null&&(e=i.jsx(c("PolarisThreadedCommentsLoader.react"),{initialCommentsQuery:q,postId:p,children:e}))):e=i.jsx(c("PolarisPreviewComments.react"),{captionAndTitle:d,captionIsEdited:f,className:g,code:h,commentsAreStacked:k,commentsDisabled:l,handleDeleteCommentClick:this.$1,id:p,loggedIn:a,mediaType:r,ownerId:t,postedAt:w,showRemoveCommentIcons:z,variant:A});return i.jsxs(i.Fragment,{children:[e,this.state.showDeleteCommentModal&&i.jsx(c("PolarisDeleteCommentModal.react"),{analyticsContext:b,commentId:c("nullthrows")(this.state.commentToDeleteId),onClose:this.$2,postId:p})]})};return b}(i.PureComponent);b.defaultProps={variant:d("PolarisPostVariants").VARIANTS.flexible};function a(a){return{showRemoveCommentIcons:d("PolarisPostRemoveCommentsSelectors").getPostRemoveCommentsIsVisible(a),viewerId:(a=d("polarisUserSelectors").getViewer__DEPRECATED(a))==null?void 0:a.id}}e=d("PolarisReactRedux.react").connect(a)(b);g["default"]=e}),98);
__d("PolarisPostPreviewCommentsPicker.react",["CometPlaceholder.react","IGDSBox.react","IGDSSpinner.react","PolarisPostCaptionTranslationPrompt.react","PolarisPostComments.react","PolarisPostFastPreviewCaption.react","PolarisPostFastPreviewCommentsList.react","PolarisPostVariants","PolarisUA","react","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage","xigRequireInterop"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var e=i(33),f=c("usePolarisIsOnFeedPage")(),g=c("usePolarisIsOnAdsActivityPage")(),h;e[0]!==f||e[1]!==g?(h=(f||g)&&d("PolarisUA").isDesktop(),e[0]=f,e[1]=g,e[2]=h):h=e[2];f=h;g=a.variant!==d("PolarisPostVariants").VARIANTS.feed&&!d("PolarisUA").isMobile();if(g){e[3]===Symbol["for"]("react.memo_cache_sentinel")?(h=j.jsx(c("IGDSSpinner.react"),{position:"absolute"}),e[3]=h):h=e[3];e[4]!==a.className?(g=j.jsx("div",{className:a.className,children:h}),e[4]=a.className,e[5]=g):g=e[5];e[6]!==a?(h=j.jsx(c("PolarisPostComments.react"),babelHelpers["extends"]({},a)),e[6]=a,e[7]=h):h=e[7];var k;e[8]!==g||e[9]!==h?(k=j.jsx(c("CometPlaceholder.react"),{fallback:g,children:h}),e[8]=g,e[9]=h,e[10]=k):k=e[10];return k}e[11]===Symbol["for"]("react.memo_cache_sentinel")?(g=c("xigRequireInterop")(b("PolarisPostFastPreviewCommentsList.react")),e[11]=g):g=e[11];h=g["default"];e[12]===Symbol["for"]("react.memo_cache_sentinel")?(k=c("xigRequireInterop")(b("PolarisPostFastPreviewCaption.react")),e[12]=k):k=e[12];g=k["default"];e[13]!==g||e[14]!==a.enableTruncation||e[15]!==a.inModal||e[16]!==a.id?(k=j.jsx(g,{enableTruncation:a.enableTruncation,inModal:a.inModal,postId:a.id}),e[13]=g,e[14]=a.enableTruncation,e[15]=a.inModal,e[16]=a.id,e[17]=k):k=e[17];e[18]!==f||e[19]!==a?(g=f&&j.jsx(c("PolarisPostCaptionTranslationPrompt.react"),{inFeed:!0,marginBottom:2,postId:a.id}),e[18]=f,e[19]=a,e[20]=g):g=e[20];e[21]!==h||e[22]!==a.inModal||e[23]!==a.id||e[24]!==a.shouldIncreaseCommentPreviews?(f=j.jsx(h,{inModal:a.inModal,postId:a.id,shouldIncreaseCommentPreviews:a.shouldIncreaseCommentPreviews}),e[21]=h,e[22]=a.inModal,e[23]=a.id,e[24]=a.shouldIncreaseCommentPreviews,e[25]=f):f=e[25];e[26]!==k||e[27]!==g||e[28]!==f?(h=j.jsxs(c("IGDSBox.react"),{position:"relative",children:[k,g,f]}),e[26]=k,e[27]=g,e[28]=f,e[29]=h):h=e[29];e[30]!==a.className||e[31]!==h?(k=j.jsx("div",{className:a.className,children:h}),e[30]=a.className,e[31]=h,e[32]=k):k=e[32];return k}g["default"]=a}),98);
__d("PolarisHotKeys.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useContext,k=b.unstable_useMemoCache;c={keyMap:{}};var l=i.createContext(c);function a(a){var b=k(15),c=a.children,d=a.className,e=a.isButton,f=a.keyMap;a=e===void 0?!1:e;e=j(l).keyMap;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=function(a){return!(a.ctrlKey||a.altKey||a.metaKey)},b[0]=e):e=b[0];var g=e;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=function(){var a;return((a=document.activeElement)==null?void 0:a.tagName.toLowerCase())!=="textarea"&&((a=document.activeElement)==null?void 0:a.tagName.toLowerCase())!=="input"},b[1]=e):e=b[1];var h=e;b[2]!==f?(e=function(a){if(f[a.key]!=null&&h()&&g(a)){var b=f[a.key];b();a.stopPropagation()}},b[2]=f,b[3]=e):e=b[3];e=e;var m=a?"button":"presentation";a=a?"0":"-1";var n;b[4]!==f?(n={keyMap:f},b[4]=f,b[5]=n):n=b[5];var o;b[6]!==c||b[7]!==e||b[8]!==m||b[9]!==a||b[10]!==d?(o=typeof c==="function"?c(e,m,a):i.jsx("div",{className:d,onKeyUp:e,role:m,tabIndex:a,children:c}),b[6]=c,b[7]=e,b[8]=m,b[9]=a,b[10]=d,b[11]=o):o=b[11];b[12]!==n||b[13]!==o?(c=i.jsx(l.Provider,{value:n,children:o}),b[12]=n,b[13]=o,b[14]=c):c=b[14];return c}g["default"]=a}),98);
__d("PolarisPostFeedbackControls.react",["IGRouter.react","PolarisCommentButton.react","PolarisFeedActionOpenPostModalForId","PolarisInFeedPostModalContext","PolarisInteractionsLogger","PolarisLikeButton.react","PolarisLinkBuilder","PolarisLogger","PolarisMediaHelpers","PolarisNavigationActions","PolarisPostFastShareButton.react","PolarisPostVariants","PolarisReactRedux.react","PolarisSaveButton.react","PolarisSponsoredPostContext.react","PolarisTrackingConstants","PolarisUA","XPolarisMobileAllCommentsControllerRouteBuilder","logPolarisPostModalOpen","polarisPostSelectors","qex","react","stylex","usePolarisMediaSaveToCollectionReduxHandler","usePolarisPostShowSavedToastHandler","usePolarisSelector"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useContext,l=b.unstable_useMemoCache,m={commentButton:{display:"x1rg5ohu",$$css:!0},commentButtonLeftAligned:{marginEnd:"x1emribx",marginLeft:null,marginRight:null,order:"x182iqb8",$$css:!0},likeButton:{display:"x1rg5ohu",marginStart:"xp7jhwk",marginLeft:null,marginRight:null,$$css:!0},likeButtonLeftAligned:{marginEnd:"x1emribx",marginLeft:null,marginRight:null,order:"x9ek82g",$$css:!0},root:{display:"x78zum5",flexDirection:"x1q0g3np",marginTop:"x1gslohp",$$css:!0},saveButton:{borderTopWidth:"x972fbf",borderEndWidth:"xcfux6l",borderBottomWidth:"x1qhh985",borderStartWidth:"xm0m39n",display:"x1rg5ohu",font:"xln7xf2",fontSize:"xk390pu",marginTop:"xdj266r",marginEnd:"x1sre0sj",marginBottom:"xat24cr",marginStart:"x1gryazu",marginLeft:null,marginRight:null,paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",verticalAlign:"x11njtxf",$$css:!0},saveButtonLeftAligned:{marginEnd:"x1emribx",marginLeft:null,marginRight:null,marginStart:"x1mh8g0r",order:"xo1ph6p",$$css:!0},shareButton:{display:"x1rg5ohu",$$css:!0},shareButtonLeftAligned:{marginEnd:"x1emribx",marginLeft:null,marginRight:null,order:"x14yy4lh",$$css:!0}};function a(a){var b=l(77),e=a.analyticsContext,f=a.canViewerProvideFeedback,g=a.canViewerReshare,i=a.code,n=a.commentsDisabled,o=a.containerRef,p=a.customAlignment,q=a.hideShareButton,r=a.isBlocked,s=a.isLoggedIn,t=a.isSidecar,u=a.isVideo,v=a.likedByViewer,w=a.mediaId,x=a.onCommentClick,y=a.onLikeChange,z=a.onSaveChange,A=a.ownerIsPrivate,B=a.ownerUsername,C=a.postId,D=a.savedByViewer,E=a.sharingFrictionInfo,F=a.variant,G=a.xstyle,H=a.history,I=d("PolarisReactRedux.react").useDispatch();b[0]!==C?(a=function(a){return d("polarisPostSelectors").getPostById(a,C)},b[0]=C,b[1]=a):a=b[1];a=c("usePolarisSelector")(a);var J;b[2]!==C?(J=function(a){return d("polarisPostSelectors").getSavedCollectionsForPost(a,C)},b[2]=C,b[3]=J):J=b[3];J=c("usePolarisSelector")(J);var K=c("usePolarisPostShowSavedToastHandler")(),L=k(d("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext),M=L.canUserSeePersistentCta,N=k(d("PolarisInFeedPostModalContext").InFeedPostModalContext);b[4]!==I||b[5]!==i||b[6]!==B?(L=function(a){var b;bb6:switch(a){case"comment":b="post_feedback_comment";break bb6;case"direct":b="post_feedback_direct";break bb6;case"like":b="post_feedback_like";break bb6;case"save":default:b="post_feedback_save"}d("PolarisUA").isDesktop()?I(d("PolarisNavigationActions").openLoginModal("feature_wall",d("PolarisLinkBuilder").buildMediaLink(i),b)):I(d("PolarisNavigationActions").openLoggedOutIntentDialog(b,B))},b[4]=I,b[5]=i,b[6]=B,b[7]=L):L=b[7];var O=L;b[8]!==s||b[9]!==y||b[10]!==e||b[11]!==O?(L=function(a){s?y(a,"button"):(d("PolarisLogger").logAction("likeAttempt",{source:e}),O("like"))},b[8]=s,b[9]=y,b[10]=e,b[11]=O,b[12]=L):L=b[12];L=L;var P;b[13]!==s||b[14]!==z||b[15]!==e||b[16]!==O?(P=function(a){s?z(a):(d("PolarisLogger").logAction("saveAttempt",{source:e}),O("save"))},b[13]=s,b[14]=z,b[15]=e,b[16]=O,b[17]=P):P=b[17];P=P;var Q=c("usePolarisMediaSaveToCollectionReduxHandler")(C),R;b[18]!==s||b[19]!==e||b[20]!==u||b[21]!==F||b[22]!==I||b[23]!==C||b[24]!==N||b[25]!==t||b[26]!==M||b[27]!==i||b[28]!==H||b[29]!==x||b[30]!==O?(R=function(){var a=d("PolarisUA").isMobile();d("PolarisLogger").logAction("commentButtonClicked",{isLoggedIn:s,source:e,type:u?"video":"photo"});if(s)if(d("PolarisUA").isDesktop()&&F===d("PolarisPostVariants").VARIANTS.feed)I(d("PolarisFeedActionOpenPostModalForId").openPostModalForId(C)),N(C),c("logPolarisPostModalOpen")(e,d("PolarisInteractionsLogger").getMediaTypeFromPost({isSidecar:t,isVideo:u}),"feed_comment");else if(F===d("PolarisPostVariants").VARIANTS.feed||a){a=c("XPolarisMobileAllCommentsControllerRouteBuilder").buildURL((a={},a[d("PolarisTrackingConstants").ENABLE_PERSISTENT_CTA]=M||void 0,a.shortcode=i,a));H.push(a)}else x();else O("comment")},b[18]=s,b[19]=e,b[20]=u,b[21]=F,b[22]=I,b[23]=C,b[24]=N,b[25]=t,b[26]=M,b[27]=i,b[28]=H,b[29]=x,b[30]=O,b[31]=R):R=b[31];R=R;f=!s||f;if(r||!f)return null;r=A!==!0&&Boolean(g);f=A===!0&&c("qex")._("398");f===!0&&(r=d("PolarisMediaHelpers").shouldShowShareButton(null,a.audience,a.igMediaSharingDisabled));g=p==="left";A=g&&m.likeButtonLeftAligned;b[32]!==A?(f=(h||(h=c("stylex")))(m.likeButton,A),b[32]=A,b[33]=f):f=b[33];b[34]!==f||b[35]!==v||b[36]!==L?(p=j.jsx(c("PolarisLikeButton.react"),{className:f,"data-testid":void 0,isLiked:v,onChange:L}),b[34]=f,b[35]=v,b[36]=L,b[37]=p):p=b[37];b[38]!==n||b[39]!==g||b[40]!==R?(A=!n&&j.jsx(c("PolarisCommentButton.react"),{className:(h||(h=c("stylex")))(m.commentButton,g&&m.commentButtonLeftAligned),"data-testid":void 0,onClick:R}),b[38]=n,b[39]=g,b[40]=R,b[41]=A):A=b[41];b[42]!==r||b[43]!==q||b[44]!==g||b[45]!==e||b[46]!==w||b[47]!==C||b[48]!==E?(f=r&&q!==!0&&j.jsx("span",{className:(h||(h=c("stylex")))(m.shareButton,g&&m.shareButtonLeftAligned),children:j.jsx(c("PolarisPostFastShareButton.react"),{analyticsContext:e,"data-testid":void 0,mediaId:w,mediaOverlayInfo:null,postId:C,sharingFrictionInfo:E})}),b[42]=r,b[43]=q,b[44]=g,b[45]=e,b[46]=w,b[47]=C,b[48]=E,b[49]=f):f=b[49];b[50]!==p||b[51]!==A||b[52]!==f?(v=j.jsxs(j.Fragment,{children:[p,A,f]}),b[50]=p,b[51]=A,b[52]=f,b[53]=v):v=b[53];L=v;b[54]!==G?(n=(h||(h=c("stylex")))(m.root,G),b[54]=G,b[55]=n):n=b[55];R=g&&m.saveButtonLeftAligned;b[56]!==R?(r=(h||(h=c("stylex")))(m.saveButton,R),b[56]=R,b[57]=r):r=b[57];if(b[58]!==J){w=(q=J)!=null?q:[];b[58]=J;b[59]=w}else w=b[59];b[60]!==e||b[61]!==w||b[62]!==D||b[63]!==P||b[64]!==Q||b[65]!==K||b[66]!==C||b[67]!==a.displayResources?(E=j.jsx(c("PolarisSaveButton.react"),{analyticsContext:e,collectionsPostSavedTo:w,"data-testid":void 0,isSaved:D,onSaveMedia:P,onSaveMediaToCollection:Q,onShowToast:K,postId:C,thumbnailSrcSet:a.displayResources}),b[60]=e,b[61]=w,b[62]=D,b[63]=P,b[64]=Q,b[65]=K,b[66]=C,b[67]=a.displayResources,b[68]=E):E=b[68];b[69]!==r||b[70]!==E?(p=j.jsx("span",{className:r,children:E}),b[69]=r,b[70]=E,b[71]=p):p=b[71];b[72]!==n||b[73]!==o||b[74]!==L||b[75]!==p?(A=j.jsxs("section",{className:n,ref:o,children:[L,p]}),b[72]=n,b[73]=o,b[74]=L,b[75]=p,b[76]=A):A=b[76];return A}e=d("IGRouter.react").withIGRouter(a);g["default"]=e}),98);
__d("PolarisPostFooter.react",["IGDSBox.react","PolarisBoostUtils.react","PolarisPostBoostButton.react","PolarisPostViewInsights.react","nullthrows","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h,k={marginTop0:{marginTop:"xdj266r",$$css:!0},marginTop16:{marginTop:"xw7yly9",$$css:!0}};function a(a){var b=i(20),e=a.analyticsContext,f=a.bloksAppId,g=a.boostedStatus,h=a.boostUnavailableIdentifier,l=a.boostUnavailableReason,m=a.className,n=a.hasViewInsights,o=a.mediaId,p=a.productType;a=a.viewerId;a=d("PolarisBoostUtils.react").useIsEligibleForBoost(g!=null&&a!=null);if(!n&&!a)return null;var q=n?"between":"end",r=n?k.marginTop0:k.marginTop16,s;b[0]!==n||b[1]!==f||b[2]!==o?(s=n&&j.jsx(c("PolarisPostViewInsights.react"),{bloksAppId:f,mediaId:o}),b[0]=n,b[1]=f,b[2]=o,b[3]=s):s=b[3];b[4]!==a||b[5]!==p||b[6]!==g||b[7]!==e||b[8]!==h||b[9]!==l||b[10]!==o?(n=a&&p!=="ad"&&j.jsx(c("PolarisPostBoostButton.react"),{analyticsContext:e,boostedStatus:c("nullthrows")(g),boostUnavailableIdentifier:h,boostUnavailableReason:l,isOrganicMediaArchived:!1,mediaId:o,productType:c("nullthrows")(p)}),b[4]=a,b[5]=p,b[6]=g,b[7]=e,b[8]=h,b[9]=l,b[10]=o,b[11]=n):n=b[11];b[12]!==q||b[13]!==r||b[14]!==s||b[15]!==n?(f=j.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",justifyContent:q,paddingX:4,paddingY:3,position:"relative",xstyle:r,children:[s,n]}),b[12]=q,b[13]=r,b[14]=s,b[15]=n,b[16]=f):f=b[16];b[17]!==m||b[18]!==f?(a=j.jsx("section",{className:m,children:f}),b[17]=m,b[18]=f,b[19]=a):a=b[19];return a}g["default"]=a}),98);
__d("PolarisPostLikers.react",["IGDSBox.react","IGDSText.react","IGRouter.react","PolarisConfig","PolarisFacepile.next.react","PolarisLikedByListActions","PolarisLikedByListButton.react","PolarisLikedByText.react","PolarisLinkBuilder","PolarisLogger","PolarisNavigationActions","PolarisPostUtils","PolarisReactRedux.react","PolarisUA","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");b=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.$2=function(){c.props.onLike()};c.$3=function(a){c.$1(),!c.props.viewer&&c.props.inModal!==!0?(a.preventDefault(),c.props.onGoToLoginModal(c.props.code)):d("PolarisUA").isDesktop()&&(a.preventDefault(),c.props.onViewLikedByList(c.props.mediaId),c.props.onLikeCountClick(a))};return c}var e=b.prototype;e.$1=function(){d("PolarisLogger").logAction("likeCountClick")};e.render=function(){var a=d("PolarisPostUtils").getOrderedUsersForLikedByList(this.props.users,this.props.viewer).map(function(a){return a.profilePictureUrl}).filter(Boolean),b=i.jsx(c("PolarisFacepile.next.react"),{avatarSize:this.props.avatarSize,border:"transparent",userProfilePicUrls:a}),e=!!this.props.viewer;return i.jsxs(c("IGDSBox.react"),{direction:"row",flex:"grow",position:"relative",children:[a.length>0&&e===!0&&i.jsx(c("IGDSBox.react"),{alignItems:"start",direction:"column",justifyContent:"start",marginEnd:1,position:"relative",children:i.jsx(c("PolarisLikedByListButton.react"),{code:this.props.code,inModal:this.props.inModal,onClick:this.$3,children:b})}),i.jsx(c("IGDSBox.react"),{alignItems:"start",direction:"column",flex:"grow",margin:"auto",position:"relative",wrap:!0,children:i.jsx(c("IGDSText.react"),{zeroMargin:!0,children:i.jsx(c("PolarisLikedByText.react"),{code:this.props.code,hideCounts:this.props.hideCounts,inModal:!!this.props.inModal,onClick:this.$3,onLike:this.$2,topLikers:this.props.topLikers,totalCount:this.props.totalCount,users:this.props.users})})})]})};return b}(i.Component);function a(a){return{onGoToLoginModal:function(b){b=d("PolarisLinkBuilder").buildMediaLink(b);a(d("PolarisNavigationActions").openLoginModal("content_wall",b,null,null,b));return},onLoggedOutIntentClickLoginModal:function(b,c){var e=d("PolarisUA").isDesktop()||d("PolarisConfig").isLoggedOutFRXEligible()?"feature_wall":"content_wall";a(d("PolarisNavigationActions").openLoginModal(e,b,c,null,b))},onViewLikedByList:function(b){return a(d("PolarisLikedByListActions").requestNativeLikedByList(b))}}}e=d("IGRouter.react").withIGRouter(d("PolarisReactRedux.react").connect(null,a)(b));g["default"]=e}),98);
__d("PolarisPostSocialProof.react",["PolarisPostLikers.react","PolarisPostVariants","PolarisPostViews.react","PolarisShouldHideLikeCountsWithControls","PolarisUA","nullthrows","polarisGetPostFromGraphMediaInterface","react","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var b=i(28),e=a.analyticsContext,f=a.canLike,g=a.className,h=a.code,k=a.containerRef,l=a.inModal,m=a.likeAndViewCountsDisabled,n=a.likedByViewer,o=a.likers,p=a.mediaId,q=a.numPreviewLikes,r=a.onLikeChange,s=a.onLikeCountClick,t=a.productType,u=a.topLikers,v=a.variant,w=a.videoViews,x=a.viewer;a=a.viewerIsOwner;var y=w!=null&&w>0,z=q!==0,A=c("usePolarisIsOnFeedPage")(),B=c("usePolarisIsOnAdsActivityPage")();v===d("PolarisPostVariants").VARIANTS.feed?v=z||y:v=z||y||f;z=x==null?void 0:x.hideLikeAndViewCounts;b[0]!==z||b[1]!==m||b[2]!==a?(f=d("PolarisShouldHideLikeCountsWithControls").shouldHideLikeCountsWithControls(z,m,a),b[0]=z,b[1]=m,b[2]=a,b[3]=f):f=b[3];z=f;m=y&&!z&&!d("polarisGetPostFromGraphMediaInterface").isClipsProductType(t);if(!v)return null;b[4]!==A||b[5]!==B||b[6]!==l?(a=(A||B)&&l!==!0&&d("PolarisUA").isDesktop(),b[4]=A,b[5]=B,b[6]=l,b[7]=a):a=b[7];f=a;b[8]!==m||b[9]!==w||b[10]!==e||b[11]!==q||b[12]!==f||b[13]!==l||b[14]!==r||b[15]!==h||b[16]!==z||b[17]!==n||b[18]!==p||b[19]!==s||b[20]!==u||b[21]!==o||b[22]!==x?(y=m?j.jsx(c("PolarisPostViews.react"),{analyticsContext:e,likeCount:q,viewCount:c("nullthrows")(w)}):j.jsx(c("PolarisPostLikers.react"),{avatarSize:f?"micro":void 0,code:h,hideCounts:z,inModal:!!l,likedByViewer:n,mediaId:p,onLike:function(){r(!0,"beTheFirstPrompt")},onLikeCountClick:s,topLikers:u,totalCount:q,users:o,viewer:x}),b[8]=m,b[9]=w,b[10]=e,b[11]=q,b[12]=f,b[13]=l,b[14]=r,b[15]=h,b[16]=z,b[17]=n,b[18]=p,b[19]=s,b[20]=u,b[21]=o,b[22]=x,b[23]=y):y=b[23];b[24]!==g||b[25]!==k||b[26]!==y?(t=j.jsx("section",{className:g,ref:k,children:y}),b[24]=g,b[25]=k,b[26]=y,b[27]=t):t=b[27];return t}g["default"]=a}),98);
__d("PolarisPostDetailsSection.react",["IGDSBox.react","IGDSText.react","PolarisCommentLikedByListContainerLazy.react","PolarisConfig","PolarisFeedPageConstants","PolarisGenericStrings","PolarisHotKeys.react","PolarisInteractionsLogger","PolarisLikedByListContainerLazy.react","PolarisLikedByListVariant","PolarisLinkBuilder","PolarisPendingCommentState","PolarisPoliticalContextButton.react","PolarisPostCaptionTranslationPrompt.react","PolarisPostCommentInputPicker.react","PolarisPostConstants","PolarisPostFeatures.react","PolarisPostFeedbackControls.react","PolarisPostFooter.react","PolarisPostModalRenderingContext.react","PolarisPostPreviewCommentsPicker.react","PolarisPostSocialProof.react","PolarisPostTimestamp.react","PolarisPostVariants","PolarisReactRedux.react","PolarisUA","gkx","isStringNullOrEmpty","nullthrows","polarisAdsSelectors.react","react","stylex","usePolarisDisplayProperties","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useEffect,aa=b.useRef,l=b.useState,ba=b.unstable_useMemoCache,m={commentingDisabledForViewerBox:{alignItems:"x6s0dn4",borderTopColor:"x1xp8e9x",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",display:"x78zum5",height:"x1dnml7z",justifyContent:"xl56j7k",marginTop:"x1gslohp",order:"x1hrcb2b",$$css:!0},commentingDisabledForViewerBoxFamiliarFeed:{borderTopStyle:"x1ejq31n",borderEndStyle:"xd10rxx",borderBottomStyle:"x1sy0etr",borderStartStyle:"x17r0tee",height:"xxeg0ib",$$css:!0},commentingDisabledForViewerBoxV2:{marginTop:"xdj266r",$$css:!0},commentInput:{paddingBottom:"x10b6aqq",paddingTop:"x1yrsyyn",$$css:!0},commentInputAsSidebar:{order:"x1hrcb2b",$$css:!0},commentInputHidden:{display:"x1s85apg",minHeight:"x1wxaq2x",$$css:!0},commentInputStatic:{paddingEnd:"x1pi30zi",paddingLeft:null,paddingRight:null,$$css:!0},commentInputV2:{paddingBottom:"xjkvuk6",paddingTop:"x1iorvi4",$$css:!0},commentInputV2WithRichComments:{paddingEnd:"xn6708d",paddingLeft:null,paddingRight:null,paddingStart:"x1ye3gou",$$css:!0},comments:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minHeight:"x2lwn1j",overflowX:"xw2csxc",overflowY:"x1odjw0f",position:"x1n2onr6",$$css:!0},commentsAsSidebar:{marginTop:"xdj266r",marginEnd:"x1kncehz",marginBottom:"xat24cr",marginStart:"x10ndw75",order:"x9ek82g",overflowX:"x6ikm8r",$$css:!0},commentsMarginBottom:{marginBottom:"x12nagc",$$css:!0},commentsMarginBottomDense:{marginBottom:"xat24cr",$$css:!0},commentsV2:{marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"x4ii5y1",marginStart:"x1mh8g0r",paddingTop:"xexx8yu",paddingEnd:"xn6708d",paddingBottom:"x18d9i69",paddingStart:"x1ye3gou",$$css:!0},commentsWithRichComments:{marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"x4ii5y1",marginStart:"x1mh8g0r",paddingTop:"xexx8yu",paddingEnd:"x1pi30zi",paddingBottom:"x18d9i69",paddingStart:"x1swvt13",$$css:!0},expandedSidebarContainerResponsive:{borderTopStartRadius:"x168nmei",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"xo71vjh",$$css:!0},feedback:{marginTop:"x1gslohp",paddingBottom:"xwib8y2",paddingTop:"x1yrsyyn",$$css:!0},feedbackAsSidebar:{borderTopColor:"x1xp8e9x",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",order:"xo1ph6p",$$css:!0},feedbackV2:{paddingBottom:"x10b6aqq",paddingTop:"xexx8yu",$$css:!0},feedbackV2WithRichComments:{paddingEnd:"xn6708d",paddingLeft:null,paddingRight:null,paddingStart:"x1ye3gou",$$css:!0},feedbackWithRichComments:{paddingEnd:"x1pi30zi",paddingLeft:null,paddingRight:null,paddingStart:"x1swvt13",$$css:!0},mediaInfo:{boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",minWidth:"x1q2y9iw",paddingTop:"xexx8yu",paddingEnd:"x1pi30zi",paddingBottom:"x18d9i69",paddingStart:"x1swvt13",position:"x1n2onr6",width:"xh8yej3",$$css:!0},mediaInfoAsSidebar:{boxSizing:"x9f619",flexGrow:"x1iyjqo2",paddingEnd:"xxbr6pl",paddingLeft:null,paddingRight:null,paddingStart:"xbbxn1n",$$css:!0},mediaInfoFamiliarFeed:{borderTopStyle:"x1ejq31n",borderEndStyle:"xd10rxx",borderBottomStyle:"x1sy0etr",borderStartStyle:"x17r0tee",$$css:!0},mediaInfoWithRichComments:{borderStartColor:"x18l3tf1",borderStartStyle:"x26u7qi",borderStartWidth:"xy80clv",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",$$css:!0},msite:{borderBottomColor:"xh05dso",borderBottomStyle:"x1q0q8m5",borderBottomWidth:"xso031l",$$css:!0},politicalContext:{marginBottom:"x1e56ztr",$$css:!0},politicalContextV2:{paddingEnd:"xn6708d",paddingLeft:null,paddingRight:null,paddingStart:"x1ye3gou",$$css:!0},politicalContextWithRichComments:{paddingEnd:"x1pi30zi",paddingLeft:null,paddingRight:null,paddingStart:"x1swvt13",$$css:!0},responsiveSidebarContainer:{alignItems:"x1qjc9v5",borderTopWidth:"x972fbf",borderEndWidth:"xcfux6l",borderBottomWidth:"x1qhh985",borderStartWidth:"xm0m39n",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"x5wqa0o",font:"xln7xf2",fontSize:"xk390pu",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",maxWidth:"x65f84u",minWidth:"x1vq45kp",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",position:"x1n2onr6",verticalAlign:"x11njtxf",$$css:!0},responsiveViewInsights:{marginStart:"x169t7cy",marginLeft:null,marginRight:null,width:"x1j7kr1c",$$css:!0},roundedSidebarContainer:{borderTopStartRadius:"x168nmei",borderTopEndRadius:"x13lgxp2",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",$$css:!0},sectionWithNoPadding:{overflowX:"x1plvlek",overflowY:"xryxfnj",paddingEnd:"x4uap5",paddingLeft:null,paddingRight:null,paddingStart:"xkhd6sd",$$css:!0},sidebarContainer:{display:"x78zum5",flexDirection:"xdt5ytf",pointerEvents:"x67bb7w",position:"x1n2onr6",$$css:!0},sidebarContainerAsSidebar:{backgroundColor:"xvbhtw8",height:"x5yr21d",width:"x4h1yfo",$$css:!0},sidebarContainerFeedRoot:{backgroundColor:"xvbhtw8",$$css:!0},sidebarContainerInModal:{backgroundColor:"xvbhtw8",height:"x5yr21d",$$css:!0},sidebarContainerV2:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",$$css:!0},socialProof:{marginBottom:"x1e56ztr",$$css:!0},socialProofAsSidebar:{marginBottom:"x12nagc",order:"x182iqb8",$$css:!0},socialProofV2:{paddingEnd:"xn6708d",paddingLeft:null,paddingRight:null,paddingStart:"x1ye3gou",$$css:!0},socialProofWithRichComments:{paddingEnd:"x1pi30zi",paddingLeft:null,paddingRight:null,paddingStart:"x1swvt13",$$css:!0},timestamp:{marginBottom:"x1yztbdb",$$css:!0},timestampAsSidebar:{order:"x1h3rv7z",$$css:!0},timestampDense:{marginBottom:"x1e56ztr",$$css:!0},timestampV2:{paddingStart:"x1ye3gou",paddingLeft:null,paddingRight:null,$$css:!0},timestampWithRichComments:{paddingStart:"x1swvt13",paddingLeft:null,paddingRight:null,$$css:!0},viewInsights:{borderBottomStyle:"x1sy0etr",borderTopColor:"x1xp8e9x",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",order:"x14yy4lh",$$css:!0},viewInsightsWithStackedCommentsSidecar:{marginBottom:"x1hyhr7",marginTop:"x1gde2r1",$$css:!0}};function a(a){var b=ba(81),e=a.analyticsContext,f=a.bloksAppId,g=a.currSidecarIndex,i=a.currSidecarItem,n=a.enableTruncation,o=a.handleLikeChange,p=a.handleSaveChange,q=a.hasDenserFeedRedesign,r=a.hasSidebarInRedesign,s=a.hasViewInsights,t=a.initialCommentsQuery,u=a.owner,v=a.permalinkedCommentId,w=a.permalinkedReplyId,x=a.post,y=a.postAuthorId,z=a.postAuthorUsername,A=a.postFeedbackControlsRef,B=a.postHeader,ca=a.redesignWithoutSidebar,C=a.redesignWithSidebar,da=a.shouldIncreaseCommentPreviews,D=a.showDetailsAsSidebar,E=a.variant,F=a.viewer,G=!d("PolarisUA").isDesktop();a=l(null);var H=a[0],ea=a[1];a=l(!1);var fa=a[0],ga=a[1];a=l(!1);var ha=a[0],ia=a[1];a=c("usePolarisDisplayProperties")();var ja=a.viewportWidth,I=aa(null);b[0]!==x.commentsDisabled||b[1]!==x.commentingDisabledForViewer||b[2]!==ha||b[3]!==ja?(a=function(){return x.commentsDisabled!==!0&&x.commentingDisabledForViewer!==!0&&(ha||ja>=d("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF)},b[0]=x.commentsDisabled,b[1]=x.commentingDisabledForViewer,b[2]=ha,b[3]=ja,b[4]=a):a=b[4];var J=a;b[5]!==x.id?(a=function(a){return(a=a.pendingComments[x.id])!=null?a:d("PolarisPendingCommentState").EMPTY_PENDING_COMMENT},b[5]=x.id,b[6]=a):a=b[6];a=d("PolarisReactRedux.react").useSelector(a);var K=a.committing,L=c("usePrevious")(K);a=d("PolarisPostModalRenderingContext.react").usePolarisPostModalRenderingContext();var M=a.isInModal;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){ia(!0),I.current&&I.current.focusAndScroll()},b[7]=a):a=b[7];var N=a;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){ga(!1)},b[8]=a):a=b[8];var ka=a;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a){ga(!0)},b[9]=a):a=b[9];var la=a;b[10]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){ea(null)},b[10]=a):a=b[10];var ma=a;b[11]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a){ea(a)},b[11]=a):a=b[11];var na=a;b[12]!==F||b[13]!==x||b[14]!==N?(a=F?{c:function(){x.commentsDisabled!==!0&&N()}}:{},b[12]=F,b[13]=x,b[14]=N,b[15]=a):a=b[15];a=a;var O=c("usePrevious")(x),P,Q;b[16]!==O||b[17]!==x?(P=function(){O!=null&&x!=null&&O!==x&&(ea(null),ga(!1))},Q=[x,O],b[16]=O,b[17]=x,b[18]=P,b[19]=Q):(P=b[18],Q=b[19]);k(P,Q);b[20]!==L||b[21]!==K?(P=function(){L===!0&&K===!1&&ia(!1)},Q=[K,L],b[20]=L,b[21]=K,b[22]=P,b[23]=Q):(P=b[22],Q=b[23]);k(P,Q);P=d("PolarisPostFeatures.react").usePolarisPostFeatures({owner:u,post:x,variant:E});var R=P.canViewerProvideFeedback,S=P.commentsAreStacked,T=P.hasThreadedSidebarComments,U=P.isBlocked,V=P.isLoggedIn,W=P.isSidecar,oa=P.isStackedScreenSize,pa=P.showPostButton;b[24]===Symbol["for"]("react.memo_cache_sentinel")?(Q=function(a){return a},b[24]=Q):Q=b[24];var X=d("polarisAdsSelectors.react").useFeedAdInfo(x==null?void 0:x.id,Q),Y=X==null?void 0:(P=X.political_context)==null?void 0:P.byline_text;Q=c("usePolarisIsOnFeedPage")();P=c("usePolarisIsOnAdsActivityPage")();var Z;b[25]!==Q||b[26]!==P||b[27]!==M?(Z=(Q||P)&&M!==!0&&d("PolarisUA").isDesktop(),b[25]=Q,b[26]=P,b[27]=M,b[28]=Z):Z=b[28];Q=Z;var $=Q;P=C?"grow":"none";b[29]!==E||b[30]!==D||b[31]!==M||b[32]!==q||b[33]!==ca||b[34]!==C||b[35]!==r||b[36]!==S||b[37]!==B||b[38]!==T||b[39]!==$||b[40]!==e||b[41]!==f||b[42]!==x||b[43]!==W||b[44]!==s||b[45]!==F||b[46]!==R||b[47]!==A||b[48]!==g||b[49]!==U||b[50]!==V||b[51]!==i||b[52]!==N||b[53]!==o||b[54]!==p||b[55]!==u||b[56]!==Y||b[57]!==y||b[58]!==n||b[59]!==t||b[60]!==v||b[61]!==w||b[62]!==da||b[63]!==J||b[64]!==X||b[65]!==pa||b[66]!==I||b[67]!==oa||b[68]!==fa||b[69]!==z||b[70]!==H?(Z=function(a,b,k){return j.jsxs("div",{className:(h||(h=c("stylex")))(m.sidebarContainer,E===d("PolarisPostVariants").VARIANTS.feed&&m.sidebarContainerFeedRoot,D&&!M===!0&&m.sidebarContainerAsSidebar,M&&m.sidebarContainerInModal,!M===!0&&q&&m.sidebarContainerV2,ca&&m.roundedSidebarContainer,C&&m.expandedSidebarContainerResponsive),onKeyUp:a,role:b,tabIndex:k,children:[(M===!0?r:!S)?B:null,j.jsxs("div",{className:h(m.mediaInfo,D&&m.mediaInfoAsSidebar,T&&m.mediaInfoWithRichComments,$&&m.mediaInfoFamiliarFeed),children:[j.jsx(c("PolarisPostFooter.react"),{analyticsContext:e,bloksAppId:f,boostedStatus:x.boostedStatus,boostUnavailableIdentifier:x.boostUnavailableIdentifier,boostUnavailableReason:x.boostUnavailableReason,className:h(d("PolarisUA").isMobile()?m.msite:m.viewInsights,!r&&m.responsiveViewInsights,S&&W&&m.viewInsightsWithStackedCommentsSidecar),hasViewInsights:s,mediaId:x.id,productType:x.productType,viewerId:F==null?void 0:F.id}),j.jsx(c("PolarisPostFeedbackControls.react"),{analyticsContext:e,canViewerProvideFeedback:R,canViewerReshare:x.viewerCanReshare,code:c("nullthrows")(x.code),commentsDisabled:!!x.commentsDisabled,containerRef:A,currSidecarIndex:g,hideShareButton:x.igMediaSharingDisabled===!0,isBlocked:U,isLoggedIn:V,isSidecar:W,isVideo:!!x.isVideo,likedByViewer:!!x.likedByViewer,mediaId:i!=null?i.id:x.id,numSteps:(a=x.sidecarChildren)==null?void 0:a.length,onCommentClick:N,onLikeChange:o,onSaveChange:p,ownerIsPrivate:u.isPrivate,ownerUsername:u.username,postId:x.id,savedByViewer:!!x.savedByViewer,sharingFrictionInfo:i!=null?i.sharingFrictionInfo:x.sharingFrictionInfo,variant:E,xstyle:[m.feedback,q&&m.feedbackV2,q&&T&&m.feedbackV2WithRichComments,D&&m.feedbackAsSidebar,T&&m.feedbackWithRichComments,$&&m.sectionWithNoPadding]}),Y!=null&&j.jsx(c("PolarisPoliticalContextButton.react"),{className:(h||(h=c("stylex")))(m.politicalContext,T&&m.politicalContextWithRichComments,q&&T&&m.politicalContextV2),text:Y}),x.code!=null&&j.jsx(c("PolarisPostSocialProof.react"),{analyticsContext:e,canLike:!U&&R,className:(h||(h=c("stylex")))(m.socialProof,D&&m.socialProofAsSidebar,T&&m.socialProofWithRichComments,q&&T&&m.socialProofV2,$&&m.sectionWithNoPadding),code:c("nullthrows")(x.code),inModal:M,likeAndViewCountsDisabled:x.likeAndViewCountsDisabled,likedByViewer:!!x.likedByViewer,likers:x.likers||[],mediaId:x.id,numPreviewLikes:x.numPreviewLikes||0,onLikeChange:o,onLikeCountClick:la,productType:x.productType,topLikers:x.topLikers,variant:E,videoViews:x.videoViews,viewer:F,viewerIsOwner:y===(F==null?void 0:F.id)}),j.jsx(c("PolarisPostPreviewCommentsPicker.react"),{analyticsContext:e,caption:x.caption,captionCreatedAt:x.captionCreatedAt,captionHasTranslation:x.captionHasTranslation,captionId:x.captionCommentId,captionIsEdited:x.captionIsEdited,className:h(m.comments,!G&&m.commentsMarginBottom,G&&m.commentsMarginBottomDense,D&&m.commentsAsSidebar,T&&m.commentsWithRichComments,q&&T&&m.commentsV2,$&&m.sectionWithNoPadding),code:x.code,commentingDisabledForViewer:(b=x.commentingDisabledForViewer)!=null?b:!1,commentsAreStacked:S,commentsDisabled:x.commentsDisabled,commentsQuery:null,enableTruncation:n,hasRankedComments:x.hasRankedComments===!0,id:x.id,initialCommentsQuery:t,inModal:M,mediaType:d("PolarisInteractionsLogger").getMediaTypeFromPost(x),onLikeCountClick:na,owner:u,ownerId:y,permalinkedCommentId:v,permalinkedReplyId:w,postedAt:c("nullthrows")(x.postedAt),postId:x.id,shouldIncreaseCommentPreviews:da,showCommentOptionsInline:!0,title:x.title,variant:E}),!$&&j.jsx("div",{className:(h||(h=c("stylex")))(!G&&m.timestamp,G&&m.timestampDense,D&&m.timestampAsSidebar,T&&m.timestampWithRichComments,q&&T&&m.timestampV2),children:x.isSponsored===!0?null:j.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",position:"relative",children:[j.jsx(c("PolarisPostTimestamp.react"),{code:c("nullthrows")(x.code),isVideo:x.isVideo,mediaLinkBuilder:V?void 0:c("gkx")("25380")===!0?d("PolarisLinkBuilder").buildDynamicUsernameMediaLink(u.username):d("PolarisLinkBuilder").buildDynamicMediaLink,postedAt:c("nullthrows")(x.postedAt)}),e===d("PolarisFeedPageConstants").FEED_PAGE_ANALYTICS_CONTEXT&&j.jsx(c("IGDSBox.react"),{marginStart:2,position:"relative",children:j.jsx(c("PolarisPostCaptionTranslationPrompt.react"),{inFeed:!0,postId:x.id})})]})}),(d("PolarisConfig").isIOS()||J())&&j.jsx(c("PolarisPostCommentInputPicker.react"),{adInfo:X,analyticsContext:e,canViewerProvideFeedback:R,hasPostButton:pa,id:x.id,inModal:M,isLoggedIn:V,isRevampVersion:!1,isVideo:x.isVideo,ownerId:u.id,ref:I,xstyle:[m.commentInput,D&&m.commentInputAsSidebar,q&&m.commentInputV2,q&&T&&m.commentInputV2WithRichComments,!J()&&m.commentInputHidden,!oa&&m.commentInputStatic]},x.id),!J()&&d("PolarisUA").isDesktop()&&x.commentsDisabled!==!0&&x.commentingDisabledForViewer===!0&&j.jsx("div",{className:(h||(h=c("stylex")))(m.commentingDisabledForViewerBox,q&&m.commentingDisabledForViewerBoxV2,$&&m.commentingDisabledForViewerBoxFamiliarFeed),children:j.jsx(c("IGDSText.react"),{color:"tertiaryText",textAlign:"center",children:d("PolarisGenericStrings").COMMENTING_LIMITED})})]}),fa&&j.jsx(c("PolarisLikedByListContainerLazy.react"),{display:c("PolarisLikedByListVariant").Modal,isOwnerTheViewer:(F==null?void 0:F.id)===y,likeAndViewCountsDisabled:x.likeAndViewCountsDisabled,likeCount:x.numLikes||0,mediaId:x.id,onClose:ka,ownerUsername:z,productType:(k=x.productType)!=null?k:"",shortcode:c("nullthrows")(x.code),viewCount:x.videoViews}),!c("isStringNullOrEmpty")(H)&&j.jsx(c("PolarisCommentLikedByListContainerLazy.react"),{commentId:H,display:c("PolarisLikedByListVariant").Modal,onClose:ma})]})},b[29]=E,b[30]=D,b[31]=M,b[32]=q,b[33]=ca,b[34]=C,b[35]=r,b[36]=S,b[37]=B,b[38]=T,b[39]=$,b[40]=e,b[41]=f,b[42]=x,b[43]=W,b[44]=s,b[45]=F,b[46]=R,b[47]=A,b[48]=g,b[49]=U,b[50]=V,b[51]=i,b[52]=N,b[53]=o,b[54]=p,b[55]=u,b[56]=Y,b[57]=y,b[58]=n,b[59]=t,b[60]=v,b[61]=w,b[62]=da,b[63]=J,b[64]=X,b[65]=pa,b[66]=I,b[67]=oa,b[68]=fa,b[69]=z,b[70]=H,b[71]=Z):Z=b[71];b[72]!==a||b[73]!==Z?(Q=j.jsx(c("PolarisHotKeys.react"),{keyMap:a,children:Z}),b[72]=a,b[73]=Z,b[74]=Q):Q=b[74];b[75]!==P||b[76]!==Q?(a=j.jsx(c("IGDSBox.react"),{flex:P,position:"relative",children:Q}),b[75]=P,b[76]=Q,b[77]=a):a=b[77];Z=a;if(C){b[78]===Symbol["for"]("react.memo_cache_sentinel")?(P="x1qjc9v5 x972fbf xcfux6l x1qhh985 xm0m39n x9f619 x78zum5 xdt5ytf x1iyjqo2 x5wqa0o xln7xf2 xk390pu xdj266r x11i5rnm xat24cr x1mh8g0r x65f84u x1vq45kp xexx8yu x4uap5 x18d9i69 xkhd6sd x1n2onr6 x11njtxf",b[78]=P):P=b[78];b[79]!==Z?(Q=j.jsx("div",{className:P,children:Z}),b[79]=Z,b[80]=Q):Q=b[80];return Q}return Z}g["default"]=a}),98);
__d("PolarisPostHeaderFavoritedIconButton.react",["IGDSBox.react","IGDSIconButton.react","IGDSStarPanoFilledGradientIcon.react","PolarisFavoritesStrings","PolarisLogger","PolarisPostModalContext.react","react","usePolarisAnalyticsContext"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var b=i(5);a=a.isFavorited;var e=d("PolarisPostModalContext.react").useSetPostModal(),f=c("usePolarisAnalyticsContext")();if(a&&(f==="feedPage"||f==="postPage")){b[0]!==e?(a=function(){d("PolarisLogger").logAction("favoriteIconInPostHeaderClick"),e("favorites")},b[0]=e,b[1]=a):a=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsx(c("IGDSBox.react"),{marginEnd:2,position:"relative",children:j.jsx(c("IGDSStarPanoFilledGradientIcon.react"),{alt:d("PolarisFavoritesStrings").FAVORITED_ICON_ALT,size:16})}),b[2]=f):f=b[2];b[3]!==a?(f=j.jsx(c("IGDSIconButton.react"),{onClick:a,children:f}),b[3]=a,b[4]=f):f=b[4];return f}return null}g["default"]=a}),98);
__d("PolarisPostPageRouteReferrerContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({referrerTracePolicy:null});g["default"]=b}),98);
__d("PolarisUnsaveFromCollectionDialog.react",["fbt","IGCoreDialog.react","PolarisGenericStrings","PolarisUA","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).unstable_useMemoCache,k=i;function a(a){var b=j(16),c=a.onClose,e=a.onUnsaveFromAll;a=a.onUnsaveFromCollection;var f;b[0]!==a?(f=a?h._("__JHASH__HVkWD3QgXEe__JHASH__"):h._("__JHASH__Gl54JxLo7Pe__JHASH__"),b[0]=a,b[1]=f):f=b[1];var g;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._("__JHASH__CSnwTDU3-Jd__JHASH__"),b[2]=g):g=b[2];var i;b[3]!==a?(i=a&&k.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{color:"ig-error-or-destructive",onClick:a,children:h._("__JHASH__x0m8qdE4Y2N__JHASH__")}),b[3]=a,b[4]=i):i=b[4];b[5]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._("__JHASH__e0klumbklCI__JHASH__"),b[5]=a):a=b[5];b[6]!==e?(a=k.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{color:d("PolarisUA").isDesktop()?"ig-error-or-destructive":"ig-primary-button",onClick:e,children:a}),b[6]=e,b[7]=a):a=b[7];b[8]!==c?(e=k.jsx(d("IGCoreDialog.react").IGCoreDialogItem,{onClick:c,children:d("PolarisGenericStrings").CANCEL_TEXT}),b[8]=c,b[9]=e):e=b[9];b[10]!==f||b[11]!==c||b[12]!==i||b[13]!==a||b[14]!==e?(g=k.jsxs(d("IGCoreDialog.react").IGCoreDialog,{body:f,onModalClose:c,title:g,children:[i,a,e]}),b[10]=f,b[11]=c,b[12]=i,b[13]=a,b[14]=e,b[15]=g):g=b[15];return g}g["default"]=a}),226);
__d("PolarisPost.react",["cx","IGDSBox.react","PolarisErrorBoundary.react","PolarisHeroPageletLogger","PolarisHotKeys.react","PolarisIGCoreConstants","PolarisInsightsUtils","PolarisInteractionsLogger","PolarisLogger","PolarisMediaContainer.react","PolarisOrganicImpressionAction","PolarisPanavisionQEHelpers","PolarisPostActionLikePost","PolarisPostActionRemovePostFromCollection","PolarisPostActionSavePost","PolarisPostActionUnlikePost","PolarisPostActionUnsavePost","PolarisPostConstants","PolarisPostDetailsSection.react","PolarisPostFeatures.react","PolarisPostHeader.react","PolarisPostHeaderFavoritedIconButton.react","PolarisPostModalContext.react","PolarisPostModalRenderingContext.react","PolarisPostOptionsButtonPicker.react","PolarisPostOverlayInfoFooterCTA.react","PolarisPostPageRouteReferrerContext.react","PolarisPostSidecarIndexHelpers","PolarisPostSuggestedHeader.react","PolarisPostToast.react","PolarisPostToastProvider.react","PolarisPostUtils","PolarisPostVariants","PolarisReactRedux.react","PolarisSavedPostsActionEditCollection","PolarisSavedPostsTypes","PolarisSponsoredPostCTAFooter.react","PolarisTrackingNodeProvider.react","PolarisUA","PolarisUnsaveFromCollectionDialog.react","PolarisViewpointActionUtils","PolarisViewpointReact.react","PolarisVpvdImpressionAction","browserHistory","hero-tracing","joinClasses","nullthrows","polarisAdsSelectors.react","polarisDeveloperSettings","polarisPostModalHelpers","polarisPostSelectors","polarisRelationshipSelectors.react","polarisUserSelectors","polarisWithPPRLogging","qex","react","useMergeRefs","usePolarisDisplayProperties","usePolarisIsOnFeedPage","usePolarisPostSetURLSidecarIndex","usePolarisShowFooterCTA","usePolarisViewer","usePrevious"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));e=i;var k=e.useContext,l=e.useEffect,m=e.useRef,n=e.useState;function a(a){var b=a.adImpressionRefs,e=a.analyticsContext,f=a.audioSlug,g=a.autoplay,h=a.className,i=a.enableTruncation,o=a.id;a.imageMediaActsAsCta;var p=a.initialCarouselIndex,aa=a.initialCommentsQuery,q=a.isSponsored;q=q===void 0?!1:q;var ba=a.isVisible,ca=a.lightLetterbox,r=a.onMediaRendered,da=a.permalinkedCommentId,ea=a.permalinkedReplyId,s=a.position,fa=a.shortcode,ga=a.shouldIncreaseCommentPreviews,t=a.shouldRenderAudioNameAsH2,u=a.testid;u=u===void 0?"post":u;u=a.variant;var v=u===void 0?d("PolarisPostVariants").VARIANTS.flexible:u;u=a.viewpointActionsForSponsoredPost;var ha=a.visiblePosition,ia=a.willScrollTo,w=d("PolarisReactRedux.react").useDispatch(),x=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisPostSelectors").getPostById(a,o)}),y=c("nullthrows")(x.owner).id;a=(a=x.group)==null?void 0:a.id;var ja=(a=a)!=null?a:y;a=k(c("PolarisPostPageRouteReferrerContext.react"));a=a.referrerTracePolicy;var ka=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisUserSelectors").getUserByIdOrThrows(a,y)}),z=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisUserSelectors").getUserByIdOrThrows(a,ja)}),la=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisRelationshipSelectors.react").getRelationship(a.relationships,ja)}),A=c("usePolarisViewer")(),ma=!!(A==null?void 0:A.canSeeOrganicInsights),B=!!x.canSeeInsightsAsBrand,C=d("polarisAdsSelectors.react").useFeedAdInfo(x==null?void 0:x.id,function(a){return a}),D=c("usePolarisDisplayProperties")(),na=D.viewportHeight;D=D.viewportWidth;var E=d("PolarisPostModalRenderingContext.react").usePolarisPostModalRenderingContext(),F=E.isInModal,G=(p=(E=p)!=null?E:d("PolarisPostUtils").getInitialSidecarIndexFromPost(x))!=null?p:0;x.isSidecar===!0&&(G<0||x.sidecarChildren!=null&&G>=x.sidecarChildren.length)&&(G=0);E=n(G);var H=E[0],oa=E[1];p=n({});var I=p[0],pa=p[1];E=n(!1);p=E[0];var qa=E[1];E=n({});var J=E[0],ra=E[1];E=n(!1);var sa=E[0],K=E[1];E=n(!1);var ta=E[0],ua=E[1];E=n(null);var va=E[0],wa=E[1];E=m(null);var xa=c("usePolarisPostSetURLSidecarIndex")();l(function(){ia==="top"&&window.setTimeout(function(){window.scrollTo(0,0)})},[ia]);var L=c("usePrevious")(x);l(function(){L!=null&&x.id!==L.id&&(pa({}),ra({}))},[x,L]);l(function(){fa!=null&&x.isSidecar===!0&&d("PolarisPostSidecarIndexHelpers").shouldHaveIndexableUrls()&&xa(H+1)},[H,x.isSidecar,xa,fa]);var ya=function(a){qa(!0),r!=null&&r(x.id,a)},za=function(a){oa(a)},M=function(a,b){var c;c={mediaAuthorId:(c=x.owner)==null?void 0:c.id,mediaId:x.id,source:e,sourceOfLike:b,trackingToken:x.trackingToken};b=null;(C==null?void 0:C.ad_id)!=null&&(C==null?void 0:C.tracking_token)!=null&&Y!=null&&(b={adId:C==null?void 0:C.ad_id,adTrackingToken:C==null?void 0:C.tracking_token,viewerId:Y});a?x.likedByViewer!==!0&&w(d("PolarisPostActionLikePost").likePost(x.id,c,b)):w(d("PolarisPostActionUnlikePost").unlikePost(x.id,c,b))},Aa=function(){M(!0,"double_tap_media")},Ba=function(a){var b={source:e},c=null;if((C==null?void 0:C.ad_id)!=null&&(C==null?void 0:C.tracking_token)!=null&&Y!=null){var f;c={adId:C==null?void 0:C.ad_id,adTrackingToken:C==null?void 0:C.tracking_token,analyticsContext:e,followStatus:d("PolarisViewpointActionUtils").getFollowStatus(la),mediaPk:d("PolarisViewpointActionUtils").getMPKForFeedMedia(x),mediaType:d("PolarisInteractionsLogger").getMediaTypeFromPost(x),ownerId:(f=x.owner)==null?void 0:f.id,viewerId:Y}}a?x.savedByViewer!==!0&&w(d("PolarisPostActionSavePost").savePost(x.id,b,c)):x.savedByViewer===!0&&(x.savedByViewerToCollection===!0?(d("PolarisLogger").logAction("removeSavedItemFromCollectionDialogShown"),K(!0)):w(d("PolarisPostActionUnsavePost").unsavePost(x.id,b,c)))},Ca=function(){d("PolarisLogger").logAction("removeSavedItemFromCollectionDialogCancelled"),K(!1)},Da=function(){K(!1),w(d("PolarisPostActionUnsavePost").unsavePost(x.id,{source:e})),d("PolarisLogger").logAction("removeSavedItemFromCollectionDialogAccepted")},Ea=function(){var a={source:e};K(!1);var b=d("browserHistory").browserHistory.location.pathname;b=d("polarisPostModalHelpers").getCollectionIdFromPath(b);b!=null&&A!=null&&(w(d("PolarisPostActionRemovePostFromCollection").removePostFromCollection({collectionId:b,postId:x.id})),w(d("PolarisSavedPostsActionEditCollection").editCollection({collectionId:b,postIdsToRemove:[x.id],source:a.source,userId:c("nullthrows")(A==null?void 0:A.id)})))},Fa=function(a){Ha(a)&&Ja(a.id)},Ga=function(a){Ka(a)},Ha=function(a){return I[a.id]===!0},Ia=function(a){return J[a]===!0},Ja=function(a){var b=babelHelpers["extends"]({},I);b[a]=!0;pa(b)},Ka=function(a){var b=babelHelpers["extends"]({},J);b[a]=!0;ra(b)},N=function(a){ua(!0),wa(a)},La=function(){ua(!1)},O=d("browserHistory").browserHistory.location.pathname,P=d("PolarisPostFeatures.react").usePolarisPostFeatures({owner:z,path:O,post:x,variant:v}),Q=P.commentsAreStacked,Ma=P.hasPhotosOfYouOption,Na=P.hasThreadedSidebarComments,R=P.isFavorited,Oa=P.isSidecar,Pa=P.isStackedScreenSize;P=P.showFollowButton;O=d("polarisPostModalHelpers").getCollectionIdFromPath(O);var Qa=O!=null&&O!==d("PolarisSavedPostsTypes").SAVED_COLLECTION_TYPE.ALL_MEDIA_AUTO_COLLECTION;O=!!P&&(!x.coauthorProducers||x.coauthorProducers.length===0)&&!q;var S=D>=d("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF,Ra=S&&F===!0,T=!S&&F===!0,Sa=F===!0?S:!Q;P=c("usePolarisIsOnFeedPage")();var U=e==="adsActivityFeed",V=(P||U)&&F!==!0&&d("PolarisUA").isDesktop(),W=(P||U)&&F!==!0&&d("PolarisUA").isDesktop(),Ta=d("PolarisPostUtils").getCurrentSidecarItemFromPost(x,H),Ua=j.jsxs("div",{className:"_aasi"+(V?" _aasj":"")+(T?" _aask":"")+(W?" _ai9a":""),children:[x.inventorySource==="mixed_unconnected"&&P&&!F&&j.jsx(c("PolarisPostSuggestedHeader.react"),{postId:x.id,title:(U=x.explore)==null?void 0:U.title}),j.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",position:"relative",children:[j.jsx(c("PolarisPostHeader.react"),{adTitle:C==null?void 0:C.ad_title,analyticsContext:e,audioSlug:f,clipsAttributionInfo:x.clipsAttributionInfo,clipsAudioAttributionInfo:x.clipsMusicAttributionInfo,coauthorProducers:x.coauthorProducers,displayFBPageName:C==null?void 0:C.display_fb_page_name,followHashtagInfo:x.followHashtagInfo,headerAvatarSize:c("PolarisIGCoreConstants").AVATAR_SIZES.small,inModal:F,isAffiliate:x.isAffiliate===!0,isPaidPartnership:x.isPaidPartnership===!0,isSharedToCloseFriends:x.audience==="MediaAudience.BESTIES",isSponsored:x.isSponsored===!0,isVideo:!!x.isVideo,location:x.location,mediaId:x.id,onDisabledClipsAudioAttributionClick:N,owner:z,postedAt:x.postedAt,shouldRenderAudioNameAsH2:t,shouldShowFollowButton:O,showVerifiedBadge:!0,sidebarVariantOptionsButton:Na,sponsoredLabel:C==null?void 0:C.label,sponsors:x.sponsors,viewer:A},x.id),j.jsx(c("PolarisPostHeaderFavoritedIconButton.react"),{isFavorited:R}),j.jsx(c("PolarisPostOptionsButtonPicker.react"),{buttonClassName:"_aasm"+(V||d("PolarisPanavisionQEHelpers").hasDenserMobileWebFeed()?" _aasn":"")+(W?" _agh1":""),isSponsored:x.isSponsored===!0,mediaPK:x.id})]})]});P=d("PolarisInsightsUtils").getViewInsightsInfo(A,y,x,B,ma);var Va=P.bloksAppId,X=P.hasViewInsights,Y=A==null?void 0:A.id;U=q&&u!=null?u:[d("PolarisOrganicImpressionAction").makePostImpressionAction(x,e,a,s),d("PolarisVpvdImpressionAction").makePostVpvdImpressionAction(x,e)];f=d("PolarisViewpointReact.react").useViewpoint({action:U,id:"viewpoint"+x.id});t=[f].concat((N=b)!=null?N:[]);var Wa=c("useMergeRefs").apply(void 0,t),Xa=A?{l:function(){M(!x.likedByViewer,"button")},s:function(){Ba(!x.savedByViewer)}}:{};O=c("usePolarisShowFooterCTA")(x,H,I,q);var Z=null;q?Z=j.jsx(c("PolarisSponsoredPostCTAFooter.react"),{isMediaRendered:p,post:x,sidecarIndex:H}):(O||!F)&&(Z=j.jsx(d("PolarisPostOverlayInfoFooterCTA.react").PolarisPostOverlayInfoFooterCTA,{analyticsContext:e,currentSidecarIndex:H,dynamicFooterRef:E,idsWithClearedBlurOverlays:I,idsWithDisabledMediaOverlayInfoImpressionLogging:J,onLogOverlayImpression:function(a){return Ga(a)},rootPost:x}));R=Z!=null;var $=d("polarisPostModalHelpers").getMediaContainerProps({dimensions:x.dimensions,footerHeight:R?(B=E.current)==null?void 0:B.offsetHeight:void 0,hasFooter:R,hasSidebarInRedesign:S,viewportHeight:na,viewportWidth:D}),Ya=!1,Za={border:x.isSeen===!0?"2px solid green":"2px solid red"};return j.jsx(d("PolarisPostToastProvider.react").PostToastProvider,{children:function(a){return j.jsx(d("PolarisPostModalContext.react").PostModalContext,{post:x,children:j.jsx(d("hero-tracing").HeroPagelet,{name:d("PolarisHeroPageletLogger").getHeroPageletLogName(d("PolarisHeroPageletLogger").PageletLogName.POST,s),ref:Wa,children:function(b,f){return j.jsx(c("PolarisHotKeys.react"),{keyMap:Xa,children:function(k,l,m){return j.jsx(c("PolarisTrackingNodeProvider.react"),{trackingNode:301,children:j.jsxs("article",{className:c("joinClasses")(h,"_aatb"+(v===d("PolarisPostVariants").VARIANTS.feed?" _aatc":"")+(Pa?" _aatd":"")+(Pa?"":" _aate")+(Q?" _aatf":"")+(Sa?" _aatg":"")+(Oa?" _aath":"")+(Na?" _aati":"")+(X?" _aatj":"")),"data-testid":void 0,onKeyUp:k,ref:b,role:l,style:Ya?Za:{},tabIndex:m,children:[j.jsxs(c("IGDSBox.react"),{alignSelf:T?"center":void 0,direction:(F===!0?S:!Q)?"row":"column",display:"flex",justifyContent:"center",maxHeight:"inherit",maxWidth:T&&($==null?void 0:$.style)!=null?$.style.maxWidth:"inherit",position:"relative",children:[(F===!0?!S:Q)?Ua:null,j.jsx("div",babelHelpers["extends"]({},F===!0?$:{},{className:"_aatk"+(F===!0?" _aatl":"")+(Ra&&x.dimensions!=null&&x.dimensions.width>=x.dimensions.height?" _aatm":"")+(ca===!0?" _aatn":"")+(W?" _aiao":""),children:j.jsx(c("PolarisMediaContainer.react"),{accessibilityCaption:x.accessibilityCaption,adInfo:C,analyticsContext:e,autoplay:g,checkIsSensitivityOverlayDisabledCallback:function(a){return Ha(a)},className:"_aato",commentsAreStacked:Q,hasPhotosOfYouOption:Ma,hasViewInsights:X,id:x.id,initialCarouselIndex:G,inModal:F,isVisible:ba,mediaFooter:Z,onLike:A?Aa:null,onPostMediaRendered:ya,onPostSidecarChildIndexChange:za,onSensitivityOverlayCleared:Fa,onToastClose:La,position:s,post:x,relationship:la,sensitivityOverlayMediaOverlayInfoLoggingProps:{checkIfMediaOverlayInfoImpressionLoggingDisabled:function(a){return Ia(a)},onLoggedMediaOverlayInfoImpression:function(a){return Ga(a)}},showToast:ta,toastString:va,viewer:A,visiblePosition:ha})})),j.jsx(c("PolarisPostDetailsSection.react"),{analyticsContext:e,bloksAppId:Va,currSidecarIndex:H,currSidecarItem:Ta,enableTruncation:i,handleLikeChange:M,handleSaveChange:Ba,hasDenserFeedRedesign:V,hasSidebarInRedesign:S,hasViewInsights:X,initialCommentsQuery:aa,owner:z,permalinkedCommentId:da,permalinkedReplyId:ea,post:x,postAuthorId:y,postAuthorUsername:ka==null?void 0:ka.username,postFeedbackControlsRef:a,postHeader:Ua,redesignWithoutSidebar:T,redesignWithSidebar:Ra,shouldIncreaseCommentPreviews:ga,showDetailsAsSidebar:Sa,variant:v,viewer:A}),sa&&j.jsx(c("PolarisUnsaveFromCollectionDialog.react"),{onClose:Ca,onUnsaveFromAll:Da,onUnsaveFromCollection:Qa&&d("PolarisUA").isDesktop()?Ea:null}),j.jsx(c("PolarisPostToast.react"),{isFeedVariant:v===d("PolarisPostVariants").VARIANTS.feed,isModal:(k=F)!=null?k:!1,isSidecar:Oa})]}),j.jsx(f,{})]})})}})}})},x.id)}})}a.displayName=a.name+" [from "+f.id+"]";var o=c("polarisWithPPRLogging")(a);function p(){d("PolarisLogger").logAction("feedUnitFailure",{source:"PolarisPost"})}function b(a){return j.jsx(c("PolarisErrorBoundary.react"),{errorRenderer:function(a){return null},onError:p,children:j.jsx(o,babelHelpers["extends"]({},a))})}b.displayName=b.name+" [from "+f.id+"]";h=c("qex")._("511")===!0?j.memo(b):b;e=h;g["default"]=e}),98);
__d("PolarisPostVideoPlaybackOverlay.react",["cx","PolarisPostVideoPlayerControls.react","VideoPlayerInteractionOverlay.react","react","usePolarisVideoPressInteraction","usePolarisVideoShowPlayButton"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).unstable_useMemoCache,k=i;function a(a){var b=j(13),e=a.post,f=a.shouldShowOverlay;a=a.showVideoControls;var g=!a,h=c("usePolarisVideoShowPlayButton")()&&!f,i=c("usePolarisVideoPressInteraction")({playButtonShowing:h,shouldUnmuteOnPlay:!g}),l;b[0]!==h?(l=h&&k.jsx("div",{className:"xjq0wde xa2bojp x10l6tqk xtzzx4i xwa60dl",children:k.jsx("div",{className:"_9zwu"})}),b[0]=h,b[1]=l):l=b[1];b[2]!==i||b[3]!==l?(h=k.jsx(d("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{pressInteraction:i,children:l}),b[2]=i,b[3]=l,b[4]=h):h=b[4];b[5]!==f||b[6]!==e||b[7]!==g||b[8]!==a?(i=!f&&k.jsx(c("PolarisPostVideoPlayerControls.react"),{post:e,shouldUseVolumeControls:g,showVideoControls:a}),b[5]=f,b[6]=e,b[7]=g,b[8]=a,b[9]=i):i=b[9];b[10]!==h||b[11]!==i?(l=k.jsxs(k.Fragment,{children:[h,i]}),b[10]=h,b[11]=i,b[12]=l):l=b[12];return l}g["default"]=a}),98);
__d("usePolarisShowVideoThumbnailAndOverlayLoggedOut",["PolarisLoggedOutUpsellExposure","PolarisUA","VideoPlayerHooks","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useEffect,k=b.useState,l=b.unstable_useMemoCache;function a(a){var b=l(16),e=(i||(i=d("VideoPlayerHooks"))).useVideoPlaybackEnded(),f=i.usePlaying(),g=k(!1),h=g[0],m=g[1];g=k(!1);var n=g[0],o=g[1];g=k(!1);var p=g[0],q=g[1],r=i.useSeeking(),s;b[0]!==f?(g=function(){f&&m(!0)},s=[f],b[0]=f,b[1]=g,b[2]=s):(g=b[1],s=b[2]);j(g,s);b[3]!==r?(g=function(){r&&q(!0)},s=[r],b[3]=r,b[4]=g,b[5]=s):(g=b[4],s=b[5]);j(g,s);b[6]!==h||b[7]!==a?(g=function(){h&&!a&&o(!0)},s=[h,a],b[6]=h,b[7]=a,b[8]=g,b[9]=s):(g=b[8],s=b[9]);j(g,s);b[10]!==n||b[11]!==e?(g=d("PolarisUA").isMobile()&&(n||e)&&!c("PolarisLoggedOutUpsellExposure").mweb.hide_end_of_video,b[10]=n,b[11]=e,b[12]=g):g=b[12];s=g;n=!h&&!p||e||s;b[13]!==s||b[14]!==n?(g=[s,n],b[13]=s,b[14]=n,b[15]=g):g=b[15];return g}g["default"]=a}),98);
__d("PolarisPostVideoPlayerLoggedOutSurface.react",["CometImage.react","PolarisPostVideoPlaybackOverlay.react","PolarisUA","PolarisVideoIndicatorIcon.react","VideoPlayerHooks","VideoPlayerSurface.react","cr:8805","cr:8877","react","usePolarisShouldCenterCropPosterHeight","usePolarisShowVideoThumbnailAndOverlayLoggedOut"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));e=h;var k=e.useEffect,l=e.unstable_useMemoCache,m={thumbnail:{height:"x5yr21d",objectFit:"xl1xv1r",width:"xh8yej3",$$css:!0}};function a(a){var b=l(25),e=a.analyticsContext,f=a.asSidecarChild,g=a.endOfTheVideoUpsellVariant,h=a.firstSidecarChildSrc,o=a.isVisible,p=a.post;a=a.upcomingEventMediaId;var q=(i||(i=d("VideoPlayerHooks"))).useController();o=c("usePolarisShowVideoThumbnailAndOverlayLoggedOut")(!!o);var r=o[0];o=o[1];var s=c("usePolarisShouldCenterCropPosterHeight")(e,p),t,u;b[0]!==r||b[1]!==q?(t=function(){r&&(q.pause("product_initiated"),q.freeze())},u=[r,q],b[0]=r,b[1]=q,b[2]=t,b[3]=u):(t=b[2],u=b[3]);k(t,u);b[4]!==o||b[5]!==p||b[6]!==s?(t=o&&p.src!=null&&j.jsx(c("CometImage.react"),{src:p.src,xstyle:s||d("PolarisUA").isDesktop()?m.thumbnail:void 0}),b[4]=o,b[5]=p,b[6]=s,b[7]=t):t=b[7];b[8]!==p||b[9]!==r?(u=j.jsx(c("PolarisPostVideoPlaybackOverlay.react"),{post:p,shouldShowOverlay:r,showVideoControls:!1}),b[8]=p,b[9]=r,b[10]=u):u=b[10];b[11]!==e||b[12]!==f||b[13]!==h||b[14]!==p||b[15]!==a?(o=j.jsx(c("PolarisVideoIndicatorIcon.react"),{analyticsContext:e,asSidecarChild:f,firstSidecarChildSrc:h,post:p,upcomingEventMediaId:a}),b[11]=e,b[12]=f,b[13]=h,b[14]=p,b[15]=a,b[16]=o):o=b[16];b[17]!==g||b[18]!==r?(s=j.jsx(n,{endOfTheVideoUpsellVariant:g,shouldShowOverlay:r}),b[17]=g,b[18]=r,b[19]=s):s=b[19];b[20]!==t||b[21]!==u||b[22]!==o||b[23]!==s?(e=j.jsxs(c("VideoPlayerSurface.react"),{children:[t,u,o,s]}),b[20]=t,b[21]=u,b[22]=o,b[23]=s,b[24]=e):e=b[24];return e}function n(a){var c=l(3),d=a.endOfTheVideoUpsellVariant;a=a.shouldShowOverlay;if(!a)return null;if(d===3&&b("cr:8805")){c[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsx(b("cr:8805"),{}),c[0]=a):a=c[0];return a}if(b("cr:8877")){c[1]!==d?(a=j.jsx(b("cr:8877"),{endOfTheVideoUpsellVariant:d}),c[1]=d,c[2]=a):a=c[2];return a}return null}g["default"]=a}),98);
__d("PolarisLoggedOutVideo.react",["InstagramSEOCrawlBot","PolarisLoggedOutUpsellExposure","PolarisPostVideoPlayerLoggedOutSurface.react","PolarisPostVideoPlayerWrapper.react","PolarisVideo.react","PolarisVideoHelpers","cr:7091","qex","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var e,f,g=i(25),h,k,l;g[0]!==a?(k=a.analyticsContext,h=a.post,l=babelHelpers.objectWithoutPropertiesLoose(a,["analyticsContext","post"]),g[0]=a,g[1]=h,g[2]=k,g[3]=l):(h=g[1],k=g[2],l=g[3]);if(g[4]!==h){a=(a=d("PolarisVideoHelpers").getSDVideoSrcFromPost(h))!=null?a:h.videoUrl;g[4]=h;g[5]=a}else a=g[5];a=a;var m=a,n;if(c("InstagramSEOCrawlBot").is_allowlisted_crawl_bot){var o=c("qex")._("721")===!0;o&&(n=a,m=a!==null?String(a)+"&get_thumbnail=0":a)}g[6]===Symbol["for"]("react.memo_cache_sentinel")?(o=c("qex")._("1115"),g[6]=o):o=g[6];a=o;g[7]!==h?(o=d("PolarisVideoHelpers").getHDVideoSrcFromPost(h),g[7]=h,g[8]=o):o=g[8];o=o;var p=c("PolarisLoggedOutUpsellExposure").mweb.hide_end_of_video?-1:0;e=(e=h.dimensions)==null?void 0:e.height;f=(f=h.dimensions)==null?void 0:f.width;g[9]!==k||g[10]!==h||g[11]!==l?(a=a===1&&b("cr:7091")?j.jsx(b("cr:7091"),babelHelpers["extends"]({analyticsContext:k,post:h},l)):j.jsx(c("PolarisPostVideoPlayerLoggedOutSurface.react"),babelHelpers["extends"]({analyticsContext:k,endOfTheVideoUpsellVariant:a,post:h},l)),g[9]=k,g[10]=h,g[11]=l,g[12]=a):a=g[12];g[13]!==o||g[14]!==h.id||g[15]!==e||g[16]!==f||g[17]!==n||g[18]!==m||g[19]!==a?(l=j.jsx(c("PolarisVideo.react"),{autoplay:!0,dashInfo:void 0,hdSrc:o,loopCount:p,mediaId:h.id,originalHeight:e,originalWidth:f,poster:n,sdSrc:m,children:a}),g[13]=o,g[14]=h.id,g[15]=e,g[16]=f,g[17]=n,g[18]=m,g[19]=a,g[20]=l):l=g[20];g[21]!==k||g[22]!==h||g[23]!==l?(p=j.jsx(c("PolarisPostVideoPlayerWrapper.react"),{analyticsContext:k,post:h,children:l}),g[21]=k,g[22]=h,g[23]=l,g[24]=p):p=g[24];return p}g["default"]=a}),98);
__d("PolarisVideoLoggedOutAppUpsellOverlay.react",["IGDSBox.react","IGDSButton.react","IGDSText.react","PolarisAppInstallStrings","PolarisIgLiteCarbonUpsellsUtils","PolarisLinkBuilder","PolarisLoggedOutCtaLogger","PolarisLoggedOutEndOfVideoUpsell.react","PolarisNavigationStrings","PolarisOpenInApp","browserHistory","react","usePolarisGetDeepLink"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useEffect,k=b.unstable_useMemoCache;function a(a){var b=k(18);a=a.endOfTheVideoUpsellVariant;var e=c("usePolarisGetDeepLink")(),f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=d("PolarisIgLiteCarbonUpsellsUtils").isIgLiteCarbonUpsellsEligible(),b[0]=f):f=b[0];var g=f,h;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(){d("PolarisLoggedOutCtaLogger").logLoggedOutCtaEvent({ctaType:"end_of_video_app_upsell",ctaVersion:g?"instagramlitecarbon":"",eventName:"impression",module:"postPage"})},h=[g],b[1]=f,b[2]=h):(f=b[1],h=b[2]);j(f,h);b[3]!==e?(f=function(a){a.preventDefault();d("PolarisLoggedOutCtaLogger").logLoggedOutCtaEvent({ctaType:"end_of_video_app_upsell",ctaVersion:g?"instagramlitecarbon":"",eventName:"app_open_click",module:"postPage"});a=e();var b=a.android,c=a.ios;a=a.originalPath;d("PolarisOpenInApp").openInApp(b,c,a,g)},b[3]=e,b[4]=f):f=b[4];var l=f;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(h=function(){d("PolarisLoggedOutCtaLogger").logLoggedOutCtaEvent({ctaType:"end_of_video_app_upsell",ctaVersion:g?"instagramlitecarbon":"",eventName:"login_click",module:"postPage"})},b[5]=h):h=b[5];f=h;if(a===2){b[6]===Symbol["for"]("react.memo_cache_sentinel")?(h={className:"x7v9bd0 x127lhb5 x48ylwx x5yr21d x10l6tqk x17qophe x13vifvy xh8yej3"},b[6]=h):h=b[6];b[7]===Symbol["for"]("react.memo_cache_sentinel")?(a=i.jsx("div",babelHelpers["extends"]({},h,{children:i.jsx(c("IGDSBox.react"),{direction:"column",height:"100%",width:"100%",children:i.jsx(c("PolarisLoggedOutEndOfVideoUpsell.react"),{})})})),b[7]=a):a=b[7];return a}b[8]===Symbol["for"]("react.memo_cache_sentinel")?(h={className:"x7v9bd0 x127lhb5 x48ylwx x5yr21d x10l6tqk x17qophe x13vifvy xh8yej3"},b[8]=h):h=b[8];b[9]===Symbol["for"]("react.memo_cache_sentinel")?(a=i.jsx(c("IGDSBox.react"),{alignItems:"center",flex:"grow",justifyContent:"center",children:i.jsx(c("IGDSText.react"),{color:"tertiaryText",children:d("PolarisAppInstallStrings").LOG_IN_TO_WATCH_AGAIN})}),b[9]=a):a=b[9];var m;b[10]!==l?(m=i.jsx(c("IGDSBox.react"),{children:i.jsx(c("IGDSButton.react"),{label:g?d("PolarisAppInstallStrings").ENT_OF_VIDEO_INSTAGRAM_LITE_CTA:d("PolarisAppInstallStrings").SWITCH_TO_THE_APP,onClick:function(a){return l(a)},size:"large",variant:"white"})}),b[10]=l,b[11]=m):m=b[11];var n;b[12]===Symbol["for"]("react.memo_cache_sentinel")?(n=d("PolarisLinkBuilder").buildLoginLink(d("browserHistory").getPath(d("browserHistory").browserHistory),{source:"logged_out_video_overlay"}),b[12]=n):n=b[12];b[13]!==n?(f=i.jsx(c("IGDSBox.react"),{padding:4,children:i.jsx(c("IGDSButton.react"),{href:n,label:d("PolarisNavigationStrings").LOG_IN_TEXT,onClick:f,variant:"white_link"})}),b[13]=n,b[14]=f):f=b[14];b[15]!==m||b[16]!==f?(n=i.jsx("div",babelHelpers["extends"]({},h,{children:i.jsxs(c("IGDSBox.react"),{direction:"column",height:"100%",width:"100%",children:[a,i.jsxs(c("IGDSBox.react"),{marginBottom:4,paddingX:4,width:"100%",children:[m,f]})]})})),b[15]=m,b[16]=f,b[17]=n):n=b[17];return n}g["default"]=a}),98);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("core-util-is-1.0.2",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){function a(a){return Array.isArray?Array.isArray(a):p(a)==="[object Array]"}g.isArray=a;function b(a){return typeof a==="boolean"}g.isBoolean=b;function c(a){return a===null}g.isNull=c;function d(a){return a==null}g.isNullOrUndefined=d;function e(a){return typeof a==="number"}g.isNumber=e;function f(a){return typeof a==="string"}g.isString=f;function h(a){return typeof a==="symbol"}g.isSymbol=h;function i(a){return a===void 0}g.isUndefined=i;function j(a){return p(a)==="[object RegExp]"}g.isRegExp=j;function k(a){return typeof a==="object"&&a!==null}g.isObject=k;function l(a){return p(a)==="[object Date]"}g.isDate=l;function m(a){return p(a)==="[object Error]"||a instanceof Error}g.isError=m;function n(a){return typeof a==="function"}g.isFunction=n;function o(a){return a===null||typeof a==="boolean"||typeof a==="number"||typeof a==="string"||typeof a==="symbol"||typeof a==="undefined"}g.isPrimitive=o;g.isBuffer=Buffer.isBuffer;function p(a){return Object.prototype.toString.call(a)}}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("file-saver-2.0.2",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){(function(a,b){"undefined"!=typeof g?b():(b(),a.FileSaver={exports:{}}.exports)})(this,function(){function b(b,a){return"undefined"==typeof a?a={autoBom:!1}:"object"!=typeof a&&(!1,a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(b.type)?new Blob(["\ufeff",b],{type:b.type}):b}function c(a,b,c){var d=new XMLHttpRequest;d.open("GET",a),d.responseType="blob",d.onload=function(){g(d.response,b,c)},d.onerror=function(){},d.send()}function d(b){var a=new XMLHttpRequest;a.open("HEAD",b,!1);try{a.send()}catch(a){}return 200<=a.status&&299>=a.status}function e(b){try{b.dispatchEvent(new MouseEvent("click"))}catch(c){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),b.dispatchEvent(a)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a&&a.global===a?a:void 0,g=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype?function(a,b,g){var h=f.URL||f.webkitURL,i=document.createElement("a");b=b||a.name||"download",i.download=b,i.rel="noopener","string"==typeof a?(i.href=a,i.origin===location.origin?e(i):d(i.href)?c(a,b,g):e(i,i.target="_blank")):(i.href=h.createObjectURL(a),setTimeout(function(){h.revokeObjectURL(i.href)},4e4),setTimeout(function(){e(i)},0))}:"msSaveOrOpenBlob"in navigator?function(a,f,g){if(f=f||a.name||"download","string"!=typeof a)navigator.msSaveOrOpenBlob(b(a,g),f);else if(d(a))c(a,f,g);else{var h=document.createElement("a");h.href=a,h.target="_blank",setTimeout(function(){e(h)})}}:function(e,a,b,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),"string"==typeof e)return c(e,a,b);a="application/octet-stream"===e.type;b=/constructor/i.test(f.HTMLElement)||f.safari;var g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||a&&b)&&"object"==typeof FileReader){var h=new FileReader;h.onloadend=function(){var a=h.result;a=g?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=a:location=a,d=null},h.readAsDataURL(e)}else{var i=f.URL||f.webkitURL,j=i.createObjectURL(e);d?d.location=j:location.href=j,d=null,setTimeout(function(){i.revokeObjectURL(j)},4e4)}});f.saveAs=g.saveAs=g,"undefined"!=typeof h&&(h.exports=g)})}var j=!1;function k(){j||(j=!0,i());return h.exports}function b(a){switch(a){case void 0:return k()}}e.exports=b}),null);
__d("file-saver",["file-saver-2.0.2"],(function(a,b,c,d,e,f){e.exports=b("file-saver-2.0.2")()}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("immediate-3.0.6",[],(function(a,b,c,d,e,f){"use strict";c={};var g={exports:c};function h(){var b=a.MutationObserver||a.WebKitMutationObserver,c;if(process.browser)if(b){var d=0;b=new b(j);var e=a.document.createTextNode("");b.observe(e,{characterData:!0});c=function(){e.data=d=++d%2}}else if(!a.setImmediate&&typeof a.MessageChannel!=="undefined"){var f=new a.MessageChannel();f.port1.onmessage=j;c=function(){f.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?c=function(){var b=a.document.createElement("script");b.onreadystatechange=function(){j(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null};a.document.documentElement.appendChild(b)}:c=function(){setTimeout(j,0)};else c=function(){process.nextTick(j)};var h,i=[];function j(){h=!0;var a,b,c=i.length;while(c){b=i;i=[];a=-1;while(++a<c)b[a]();c=i.length}h=!1}g.exports=k;function k(a){i.push(a)===1&&!h&&c()}}var i=!1;function j(){i||(i=!0,h());return g.exports}function b(a){switch(a){case void 0:return j()}}e.exports=b}),null);
/**
 * License: https://www.facebook.com/legal/license/Hnt8PzozZpk/
 */
__d("inherits-2.0.3",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){typeof Object.create==="function"?g.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:g.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype;a.prototype=new c();a.prototype.constructor=a}}var i=!1;function j(){i||(i=!0,h());return g.exports}c={};var k={exports:c};function l(){try{var a={};if(typeof a.inherits!=="function")throw"";k.exports=a.inherits}catch(a){k.exports=j()}}var m=!1;function n(){m||(m=!0,l());return k.exports}function a(a){switch(a){case void 0:return n()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("isarray-1.0.0",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){var a={}.toString;g.exports=Array.isArray||function(b){return a.call(b)=="[object Array]"}}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("lie-3.3.0",["immediate-3.0.6"],(function(a,b,c,d,e,f){"use strict";function a(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=a(b("immediate-3.0.6"));d={};var h={exports:d};function i(){var a=g();function b(){}var c={},d=["REJECTED"],e=["FULFILLED"],f=["PENDING"];if(!process.browser)var i=["UNHANDLED"];h.exports=j;function j(a){if(typeof a!=="function")throw new TypeError("resolver must be a function");this.state=f;this.queue=[];this.outcome=void 0;process.browser||(this.handled=i);a!==b&&n(this,a)}j.prototype["finally"]=function(c){if(typeof c!=="function")return this;var d=this.constructor;return this.then(a,b);function a(a){function b(){return a}return d.resolve(c()).then(b)}function b(a){function b(){throw a}return d.resolve(c()).then(b)}};j.prototype["catch"]=function(a){return this.then(null,a)};j.prototype.then=function(a,c){if(typeof a!=="function"&&this.state===e||typeof c!=="function"&&this.state===d)return this;var g=new this.constructor(b);process.browser||this.handled===i&&(this.handled=null);if(this.state!==f){var h=this.state===e?a:c;l(g,h,this.outcome)}else this.queue.push(new k(g,a,c));return g};function k(a,b,c){this.promise=a,typeof b==="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof c==="function"&&(this.onRejected=c,this.callRejected=this.otherCallRejected)}k.prototype.callFulfilled=function(a){c.resolve(this.promise,a)};k.prototype.otherCallFulfilled=function(a){l(this.promise,this.onFulfilled,a)};k.prototype.callRejected=function(a){c.reject(this.promise,a)};k.prototype.otherCallRejected=function(a){l(this.promise,this.onRejected,a)};function l(b,d,e){a(function(){var a;try{a=d(e)}catch(a){return c.reject(b,a)}a===b?c.reject(b,new TypeError("Cannot resolve promise with itself")):c.resolve(b,a)})}c.resolve=function(a,b){var d=o(m,b);if(d.status==="error")return c.reject(a,d.value);d=d.value;if(d)n(a,d);else{a.state=e;a.outcome=b;d=-1;var f=a.queue.length;while(++d<f)a.queue[d].callFulfilled(b)}return a};c.reject=function(b,c){b.state=d;b.outcome=c;process.browser||b.handled===i&&a(function(){b.handled===i&&process.emit("unhandledRejection",c,b)});var e=-1,f=b.queue.length;while(++e<f)b.queue[e].callRejected(c);return b};function m(a){var b=a&&a.then;if(a&&(typeof a==="object"||typeof a==="function")&&typeof b==="function")return function(){b.apply(a,arguments)}}function n(a,b){var d=!1;function e(b){if(d)return;d=!0;c.reject(a,b)}function f(b){if(d)return;d=!0;c.resolve(a,b)}function g(){b(f,e)}g=o(g);g.status==="error"&&e(g.value)}function o(a,b){var c={};try{c.value=a(b),c.status="success"}catch(a){c.status="error",c.value=a}return c}j.resolve=p;function p(a){return a instanceof this?a:c.resolve(new this(b),a)}j.reject=q;function q(a){var d=new this(b);return c.reject(d,a)}j.all=r;function r(a){var d=this;if(Object.prototype.toString.call(a)!=="[object Array]")return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);var g=new Array(e),h=0,i=-1,j=new this(b);while(++i<e)k(a[i],i);return j;function k(b,a){d.resolve(b).then(i,function(a){f||(f=!0,c.reject(j,a))});function i(b){g[a]=b,++h===e&&!f&&(f=!0,c.resolve(j,g))}}}j.race=s;function s(a){var d=this;if(Object.prototype.toString.call(a)!=="[object Array]")return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);var g=-1,h=new this(b);while(++g<e)i(a[g]);return h;function i(a){d.resolve(a).then(function(a){f||(f=!0,c.resolve(h,a))},function(a){f||(f=!0,c.reject(h,a))})}}}var j=!1;function k(){j||(j=!0,i());return h.exports}function c(a){switch(a){case void 0:return k()}}e.exports=c}),null);
/**
 * License: https://www.facebook.com/legal/license/cr2jmG-CdKo/
 */
__d("pako-1.0.8",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){var a=typeof Uint8Array!=="undefined"&&typeof Uint16Array!=="undefined"&&typeof Int32Array!=="undefined";function b(a,b){return Object.prototype.hasOwnProperty.call(a,b)}g.assign=function(a){var c=Array.prototype.slice.call(arguments,1);while(c.length){var d=c.shift();if(!d)continue;if(typeof d!=="object")throw new TypeError(d+"must be non-object");for(var e in d)b(d,e)&&(a[e]=d[e])}return a};g.shrinkBuf=function(a,b){if(a.length===b)return a;if(a.subarray)return a.subarray(0,b);a.length=b;return a};var c={arraySet:function(a,b,c,d,e){if(b.subarray&&a.subarray){a.set(b.subarray(c,c+d),e);return}for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){var b,c,d,e,f;d=0;for(b=0,c=a.length;b<c;b++)d+=a[b].length;d=new Uint8Array(d);e=0;for(b=0,c=a.length;b<c;b++)f=a[b],d.set(f,e),e+=f.length;return d}},d={arraySet:function(a,b,c,d,e){for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){return[].concat.apply([],a)}};g.setTyped=function(a){a?(g.Buf8=Uint8Array,g.Buf16=Uint16Array,g.Buf32=Int32Array,g.assign(g,c)):(g.Buf8=Array,g.Buf16=Array,g.Buf32=Array,g.assign(g,d))};g.setTyped(a)}var j=!1;function k(){j||(j=!0,i());return h.exports}var l={},m={exports:l};function n(){var a=k(),b=4,c=0,d=1,e=2;function f(a){var b=a.length;while(--b>=0)a[b]=0}var g=0,h=1,i=2,j=3,m=258,n=29,o=256,p=o+1+n,q=30,r=19,aa=2*p+1,s=15,t=16,u=7,v=256,w=16,x=17,y=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ba=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ca=512,C=new Array((p+2)*2);f(C);var da=new Array(q*2);f(da);var D=new Array(ca);f(D);var ea=new Array(m-j+1);f(ea);var fa=new Array(n);f(fa);var E=new Array(q);f(E);function ga(a,b,c,d,e){this.static_tree=a,this.extra_bits=b,this.extra_base=c,this.elems=d,this.max_length=e,this.has_stree=a&&a.length}var ha,F,G;function H(a,b){this.dyn_tree=a,this.max_code=0,this.stat_desc=b}function ia(a){return a<256?D[a]:D[256+(a>>>7)]}function ja(a,b){a.pending_buf[a.pending++]=b&255,a.pending_buf[a.pending++]=b>>>8&255}function I(a,b,c){a.bi_valid>t-c?(a.bi_buf|=b<<a.bi_valid&65535,ja(a,a.bi_buf),a.bi_buf=b>>t-a.bi_valid,a.bi_valid+=c-t):(a.bi_buf|=b<<a.bi_valid&65535,a.bi_valid+=c)}function J(a,b,c){I(a,c[b*2],c[b*2+1])}function ka(a,b){var c=0;do c|=a&1,a>>>=1,c<<=1;while(--b>0);return c>>>1}function la(a){a.bi_valid===16?(ja(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)}function ma(a,b){var c=b.dyn_tree,d=b.max_code,e=b.stat_desc.static_tree,f=b.stat_desc.has_stree,g=b.stat_desc.extra_bits,h=b.stat_desc.extra_base;b=b.stat_desc.max_length;var i,j,k,l,m,n=0;for(k=0;k<=s;k++)a.bl_count[k]=0;c[a.heap[a.heap_max]*2+1]=0;for(i=a.heap_max+1;i<aa;i++){j=a.heap[i];k=c[c[j*2+1]*2+1]+1;k>b&&(k=b,n++);c[j*2+1]=k;if(j>d)continue;a.bl_count[k]++;l=0;j>=h&&(l=g[j-h]);m=c[j*2];a.opt_len+=m*(k+l);f&&(a.static_len+=m*(e[j*2+1]+l))}if(n===0)return;do{k=b-1;while(a.bl_count[k]===0)k--;a.bl_count[k]--;a.bl_count[k+1]+=2;a.bl_count[b]--;n-=2}while(n>0);for(k=b;k!==0;k--){j=a.bl_count[k];while(j!==0){m=a.heap[--i];if(m>d)continue;c[m*2+1]!==k&&(a.opt_len+=(k-c[m*2+1])*c[m*2],c[m*2+1]=k);j--}}}function na(a,b,c){var d=new Array(s+1),e=0,f;for(f=1;f<=s;f++)d[f]=e=e+c[f-1]<<1;for(f=0;f<=b;f++){c=a[f*2+1];if(c===0)continue;a[f*2]=ka(d[c]++,c)}}function K(){var a,b,c,d=new Array(s+1);b=0;for(c=0;c<n-1;c++){fa[c]=b;for(a=0;a<1<<z[c];a++)ea[b++]=c}ea[b-1]=c;b=0;for(c=0;c<16;c++){E[c]=b;for(a=0;a<1<<A[c];a++)D[b++]=c}b>>=7;for(;c<q;c++){E[c]=b<<7;for(a=0;a<1<<A[c]-7;a++)D[256+b++]=c}for(c=0;c<=s;c++)d[c]=0;a=0;while(a<=143)C[a*2+1]=8,a++,d[8]++;while(a<=255)C[a*2+1]=9,a++,d[9]++;while(a<=279)C[a*2+1]=7,a++,d[7]++;while(a<=287)C[a*2+1]=8,a++,d[8]++;na(C,p+1,d);for(a=0;a<q;a++)da[a*2+1]=5,da[a*2]=ka(a,5);ha=new ga(C,z,o+1,p,s);F=new ga(da,A,0,q,s);G=new ga(new Array(0),B,0,r,u)}function oa(a){var b;for(b=0;b<p;b++)a.dyn_ltree[b*2]=0;for(b=0;b<q;b++)a.dyn_dtree[b*2]=0;for(b=0;b<r;b++)a.bl_tree[b*2]=0;a.dyn_ltree[v*2]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function L(a){a.bi_valid>8?ja(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0}function pa(b,c,d,e){L(b),e&&(ja(b,d),ja(b,~d)),a.arraySet(b.pending_buf,b.window,c,d,b.pending),b.pending+=d}function qa(a,b,c,d){var e=b*2,f=c*2;return a[e]<a[f]||a[e]===a[f]&&d[b]<=d[c]}function M(a,b,c){var d=a.heap[c],e=c<<1;while(e<=a.heap_len){e<a.heap_len&&qa(b,a.heap[e+1],a.heap[e],a.depth)&&e++;if(qa(b,d,a.heap[e],a.depth))break;a.heap[c]=a.heap[e];c=e;e<<=1}a.heap[c]=d}function ra(a,b,c){var d,e,f=0,g,h;if(a.last_lit!==0)do d=a.pending_buf[a.d_buf+f*2]<<8|a.pending_buf[a.d_buf+f*2+1],e=a.pending_buf[a.l_buf+f],f++,d===0?J(a,e,b):(g=ea[e],J(a,g+o+1,b),h=z[g],h!==0&&(e-=fa[g],I(a,e,h)),d--,g=ia(d),J(a,g,c),h=A[g],h!==0&&(d-=E[g],I(a,d,h)));while(f<a.last_lit);J(a,v,b)}function N(a,b){var c=b.dyn_tree,d=b.stat_desc.static_tree,e=b.stat_desc.has_stree,f=b.stat_desc.elems,g,h=-1,i;a.heap_len=0;a.heap_max=aa;for(g=0;g<f;g++)c[g*2]!==0?(a.heap[++a.heap_len]=h=g,a.depth[g]=0):c[g*2+1]=0;while(a.heap_len<2)i=a.heap[++a.heap_len]=h<2?++h:0,c[i*2]=1,a.depth[i]=0,a.opt_len--,e&&(a.static_len-=d[i*2+1]);b.max_code=h;for(g=a.heap_len>>1;g>=1;g--)M(a,c,g);i=f;do g=a.heap[1],a.heap[1]=a.heap[a.heap_len--],M(a,c,1),e=a.heap[1],a.heap[--a.heap_max]=g,a.heap[--a.heap_max]=e,c[i*2]=c[g*2]+c[e*2],a.depth[i]=(a.depth[g]>=a.depth[e]?a.depth[g]:a.depth[e])+1,c[g*2+1]=c[e*2+1]=i,a.heap[1]=i++,M(a,c,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1];ma(a,b);na(c,h,a.bl_count)}function O(a,b,c){var d,e=-1,f,g=b[0*2+1],h=0,i=7,j=4;g===0&&(i=138,j=3);b[(c+1)*2+1]=65535;for(d=0;d<=c;d++){f=g;g=b[(d+1)*2+1];if(++h<i&&f===g)continue;else h<j?a.bl_tree[f*2]+=h:f!==0?(f!==e&&a.bl_tree[f*2]++,a.bl_tree[w*2]++):h<=10?a.bl_tree[x*2]++:a.bl_tree[y*2]++;h=0;e=f;g===0?(i=138,j=3):f===g?(i=6,j=3):(i=7,j=4)}}function P(a,b,c){var d,e=-1,f,g=b[0*2+1],h=0,i=7,j=4;g===0&&(i=138,j=3);for(d=0;d<=c;d++){f=g;g=b[(d+1)*2+1];if(++h<i&&f===g)continue;else if(h<j)do J(a,f,a.bl_tree);while(--h!==0);else f!==0?(f!==e&&(J(a,f,a.bl_tree),h--),J(a,w,a.bl_tree),I(a,h-3,2)):h<=10?(J(a,x,a.bl_tree),I(a,h-3,3)):(J(a,y,a.bl_tree),I(a,h-11,7));h=0;e=f;g===0?(i=138,j=3):f===g?(i=6,j=3):(i=7,j=4)}}function Q(a){var b;O(a,a.dyn_ltree,a.l_desc.max_code);O(a,a.dyn_dtree,a.d_desc.max_code);N(a,a.bl_desc);for(b=r-1;b>=3;b--)if(a.bl_tree[ba[b]*2+1]!==0)break;a.opt_len+=3*(b+1)+5+5+4;return b}function sa(a,b,c,d){var e;I(a,b-257,5);I(a,c-1,5);I(a,d-4,4);for(e=0;e<d;e++)I(a,a.bl_tree[ba[e]*2+1],3);P(a,a.dyn_ltree,b-1);P(a,a.dyn_dtree,c-1)}function R(a){var b=4093624447,e;for(e=0;e<=31;e++,b>>>=1)if(b&1&&a.dyn_ltree[e*2]!==0)return c;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return d;for(e=32;e<o;e++)if(a.dyn_ltree[e*2]!==0)return d;return c}var ta=!1;function S(a){ta||(K(),ta=!0),a.l_desc=new H(a.dyn_ltree,ha),a.d_desc=new H(a.dyn_dtree,F),a.bl_desc=new H(a.bl_tree,G),a.bi_buf=0,a.bi_valid=0,oa(a)}function T(a,b,c,d){I(a,(g<<1)+(d?1:0),3),pa(a,b,c,!0)}function U(a){I(a,h<<1,3),J(a,v,C),la(a)}function V(a,c,d,f){var g,j,k=0;a.level>0?(a.strm.data_type===e&&(a.strm.data_type=R(a)),N(a,a.l_desc),N(a,a.d_desc),k=Q(a),g=a.opt_len+3+7>>>3,j=a.static_len+3+7>>>3,j<=g&&(g=j)):g=j=d+5;d+4<=g&&c!==-1?T(a,c,d,f):a.strategy===b||j===g?(I(a,(h<<1)+(f?1:0),3),ra(a,C,da)):(I(a,(i<<1)+(f?1:0),3),sa(a,a.l_desc.max_code+1,a.d_desc.max_code+1,k+1),ra(a,a.dyn_ltree,a.dyn_dtree));oa(a);f&&L(a)}function W(a,b,c){a.pending_buf[a.d_buf+a.last_lit*2]=b>>>8&255;a.pending_buf[a.d_buf+a.last_lit*2+1]=b&255;a.pending_buf[a.l_buf+a.last_lit]=c&255;a.last_lit++;b===0?a.dyn_ltree[c*2]++:(a.matches++,b--,a.dyn_ltree[(ea[c]+o+1)*2]++,a.dyn_dtree[ia(b)*2]++);return a.last_lit===a.lit_bufsize-1}l._tr_init=S;l._tr_stored_block=T;l._tr_flush_block=V;l._tr_tally=W;l._tr_align=U}var o=!1;function p(){o||(o=!0,n());return m.exports}b={};var q={exports:b};function r(){function a(a,b,c,d){var e=a&65535|0;a=a>>>16&65535|0;var f;while(c!==0){f=c>2e3?2e3:c;c-=f;do e=e+b[d++]|0,a=a+e|0;while(--f);e%=65521;a%=65521}return e|a<<16|0}q.exports=a}var aa=!1;function s(){aa||(aa=!0,r());return q.exports}c={};var t={exports:c};function u(){function a(){var a,b=[];for(var c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=a&1?3988292384^a>>>1:a>>>1;b[c]=a}return b}var b=a();function c(a,c,d,e){var f=b;d=e+d;a^=-1;for(e=e;e<d;e++)a=a>>>8^f[(a^c[e])&255];return a^-1}t.exports=c}var v=!1;function w(){v||(v=!0,u());return t.exports}d={};var x={exports:d};function y(){x.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}}var z=!1;function A(){z||(z=!0,y());return x.exports}var B={},ba={exports:B};function ca(){var a=k(),b=p(),c=s(),d=w(),e=A(),f=0,g=1,h=3,i=4,j=5,l=0,m=1,n=-2,o=-3,q=-5,r=-1,aa=1,t=2,u=3,v=4,x=0,y=2,z=8,ba=9,ca=15,C=8,da=29,D=256,ea=D+1+da,fa=30,E=19,ga=2*ea+1,ha=15,F=3,G=258,H=G+F+1,ia=32,ja=42,I=69,J=73,ka=91,la=103,ma=113,na=666,K=1,oa=2,L=3,pa=4,qa=3;function M(a,b){a.msg=e[b];return b}function ra(a){return(a<<1)-(a>4?9:0)}function N(a){var b=a.length;while(--b>=0)a[b]=0}function O(b){var c=b.state,d=c.pending;d>b.avail_out&&(d=b.avail_out);if(d===0)return;a.arraySet(b.output,c.pending_buf,c.pending_out,d,b.next_out);b.next_out+=d;c.pending_out+=d;b.total_out+=d;b.avail_out-=d;c.pending-=d;c.pending===0&&(c.pending_out=0)}function P(a,c){b._tr_flush_block(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,c),a.block_start=a.strstart,O(a.strm)}function Q(a,b){a.pending_buf[a.pending++]=b}function sa(a,b){a.pending_buf[a.pending++]=b>>>8&255,a.pending_buf[a.pending++]=b&255}function R(b,e,f,g){var h=b.avail_in;h>g&&(h=g);if(h===0)return 0;b.avail_in-=h;a.arraySet(e,b.input,b.next_in,h,f);b.state.wrap===1?b.adler=c(b.adler,e,h,f):b.state.wrap===2&&(b.adler=d(b.adler,e,h,f));b.next_in+=h;b.total_in+=h;return h}function ta(a,b){var c=a.max_chain_length,d=a.strstart,e,f=a.prev_length,g=a.nice_match,h=a.strstart>a.w_size-H?a.strstart-(a.w_size-H):0,i=a.window,j=a.w_mask,k=a.prev,l=a.strstart+G,m=i[d+f-1],n=i[d+f];a.prev_length>=a.good_match&&(c>>=2);g>a.lookahead&&(g=a.lookahead);do{e=b;if(i[e+f]!==n||i[e+f-1]!==m||i[e]!==i[d]||i[++e]!==i[d+1])continue;d+=2;e++;do;while(i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&d<l);e=G-(l-d);d=l-G;if(e>f){a.match_start=b;f=e;if(e>=g)break;m=i[d+f-1];n=i[d+f]}}while((b=k[b&j])>h&&--c!==0);return f<=a.lookahead?f:a.lookahead}function S(b){var c=b.w_size,d,e,f,g;do{g=b.window_size-b.lookahead-b.strstart;if(b.strstart>=c+(c-H)){a.arraySet(b.window,b.window,c,c,0);b.match_start-=c;b.strstart-=c;b.block_start-=c;e=b.hash_size;d=e;do f=b.head[--d],b.head[d]=f>=c?f-c:0;while(--e);e=c;d=e;do f=b.prev[--d],b.prev[d]=f>=c?f-c:0;while(--e);g+=c}if(b.strm.avail_in===0)break;e=R(b.strm,b.window,b.strstart+b.lookahead,g);b.lookahead+=e;if(b.lookahead+b.insert>=F){f=b.strstart-b.insert;b.ins_h=b.window[f];b.ins_h=(b.ins_h<<b.hash_shift^b.window[f+1])&b.hash_mask;while(b.insert){b.ins_h=(b.ins_h<<b.hash_shift^b.window[f+F-1])&b.hash_mask;b.prev[f&b.w_mask]=b.head[b.ins_h];b.head[b.ins_h]=f;f++;b.insert--;if(b.lookahead+b.insert<F)break}}}while(b.lookahead<H&&b.strm.avail_in!==0)}function T(a,b){var c=65535;c>a.pending_buf_size-5&&(c=a.pending_buf_size-5);for(;;){if(a.lookahead<=1){S(a);if(a.lookahead===0&&b===f)return K;if(a.lookahead===0)break}a.strstart+=a.lookahead;a.lookahead=0;var d=a.block_start+c;if(a.strstart===0||a.strstart>=d){a.lookahead=a.strstart-d;a.strstart=d;P(a,!1);if(a.strm.avail_out===0)return K}if(a.strstart-a.block_start>=a.w_size-H){P(a,!1);if(a.strm.avail_out===0)return K}}a.insert=0;if(b===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.strstart>a.block_start){P(a,!1);if(a.strm.avail_out===0)return K}return K}function U(a,c){var d;for(;;){if(a.lookahead<H){S(a);if(a.lookahead<H&&c===f)return K;if(a.lookahead===0)break}d=0;a.lookahead>=F&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+F-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);d!==0&&a.strstart-d<=a.w_size-H&&(a.match_length=ta(a,d));if(a.match_length>=F){d=b._tr_tally(a,a.strstart-a.match_start,a.match_length-F);a.lookahead-=a.match_length;if(a.match_length<=a.max_lazy_match&&a.lookahead>=F){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+F-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask}else d=b._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(d){P(a,!1);if(a.strm.avail_out===0)return K}}a.insert=a.strstart<F-1?a.strstart:F-1;if(c===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.last_lit){P(a,!1);if(a.strm.avail_out===0)return K}return oa}function V(a,c){var d,e;for(;;){if(a.lookahead<H){S(a);if(a.lookahead<H&&c===f)return K;if(a.lookahead===0)break}d=0;a.lookahead>=F&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+F-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);a.prev_length=a.match_length;a.prev_match=a.match_start;a.match_length=F-1;d!==0&&a.prev_length<a.max_lazy_match&&a.strstart-d<=a.w_size-H&&(a.match_length=ta(a,d),a.match_length<=5&&(a.strategy===aa||a.match_length===F&&a.strstart-a.match_start>4096)&&(a.match_length=F-1));if(a.prev_length>=F&&a.match_length<=a.prev_length){d=a.strstart+a.lookahead-F;e=b._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-F);a.lookahead-=a.prev_length-1;a.prev_length-=2;do++a.strstart<=d&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+F-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);a.match_available=0;a.match_length=F-1;a.strstart++;if(e){P(a,!1);if(a.strm.avail_out===0)return K}}else if(a.match_available){e=b._tr_tally(a,0,a.window[a.strstart-1]);e&&P(a,!1);a.strstart++;a.lookahead--;if(a.strm.avail_out===0)return K}else a.match_available=1,a.strstart++,a.lookahead--}a.match_available&&(b._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0);a.insert=a.strstart<F-1?a.strstart:F-1;if(c===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.last_lit){P(a,!1);if(a.strm.avail_out===0)return K}return oa}function W(a,c){var d,e,g,h=a.window;for(;;){if(a.lookahead<=G){S(a);if(a.lookahead<=G&&c===f)return K;if(a.lookahead===0)break}a.match_length=0;if(a.lookahead>=F&&a.strstart>0){e=a.strstart-1;d=h[e];if(d===h[++e]&&d===h[++e]&&d===h[++e]){g=a.strstart+G;do;while(d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&e<g);a.match_length=G-(g-e);a.match_length>a.lookahead&&(a.match_length=a.lookahead)}}a.match_length>=F?(d=b._tr_tally(a,1,a.match_length-F),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(d=b._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++);if(d){P(a,!1);if(a.strm.avail_out===0)return K}}a.insert=0;if(c===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.last_lit){P(a,!1);if(a.strm.avail_out===0)return K}return oa}function X(a,c){var d;for(;;){if(a.lookahead===0){S(a);if(a.lookahead===0){if(c===f)return K;break}}a.match_length=0;d=b._tr_tally(a,0,a.window[a.strstart]);a.lookahead--;a.strstart++;if(d){P(a,!1);if(a.strm.avail_out===0)return K}}a.insert=0;if(c===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.last_lit){P(a,!1);if(a.strm.avail_out===0)return K}return oa}function ua(a,b,c,d,e){this.good_length=a,this.max_lazy=b,this.nice_length=c,this.max_chain=d,this.func=e}var va;va=[new ua(0,0,0,0,T),new ua(4,4,8,4,U),new ua(4,5,16,8,U),new ua(4,6,32,32,U),new ua(4,4,16,16,V),new ua(8,16,32,32,V),new ua(8,16,128,128,V),new ua(8,32,128,256,V),new ua(32,128,258,1024,V),new ua(32,258,258,4096,V)];function wa(a){a.window_size=2*a.w_size,N(a.head),a.max_lazy_match=va[a.level].max_lazy,a.good_match=va[a.level].good_length,a.nice_match=va[a.level].nice_length,a.max_chain_length=va[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=F-1,a.match_available=0,a.ins_h=0}function Y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=z,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(ga*2),this.dyn_dtree=new a.Buf16((2*fa+1)*2),this.bl_tree=new a.Buf16((2*E+1)*2),N(this.dyn_ltree),N(this.dyn_dtree),N(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(ha+1),this.heap=new a.Buf16(2*ea+1),N(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*ea+1),N(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function xa(a){var c;if(!a||!a.state)return M(a,n);a.total_in=a.total_out=0;a.data_type=y;c=a.state;c.pending=0;c.pending_out=0;c.wrap<0&&(c.wrap=-c.wrap);c.status=c.wrap?ja:ma;a.adler=c.wrap===2?0:1;c.last_flush=f;b._tr_init(c);return l}function Z(a){var b=xa(a);b===l&&wa(a.state);return b}function $(a,b){if(!a||!a.state)return n;if(a.state.wrap!==2)return n;a.state.gzhead=b;return l}function ya(b,c,d,e,f,g){if(!b)return n;var h=1;c===r&&(c=6);e<0?(h=0,e=-e):e>15&&(h=2,e-=16);if(f<1||f>ba||d!==z||e<8||e>15||c<0||c>9||g<0||g>v)return M(b,n);e===8&&(e=9);var i=new Y();b.state=i;i.strm=b;i.wrap=h;i.gzhead=null;i.w_bits=e;i.w_size=1<<i.w_bits;i.w_mask=i.w_size-1;i.hash_bits=f+7;i.hash_size=1<<i.hash_bits;i.hash_mask=i.hash_size-1;i.hash_shift=~~((i.hash_bits+F-1)/F);i.window=new a.Buf8(i.w_size*2);i.head=new a.Buf16(i.hash_size);i.prev=new a.Buf16(i.w_size);i.lit_bufsize=1<<f+6;i.pending_buf_size=i.lit_bufsize*4;i.pending_buf=new a.Buf8(i.pending_buf_size);i.d_buf=1*i.lit_bufsize;i.l_buf=(1+2)*i.lit_bufsize;i.level=c;i.strategy=g;i.method=d;return Z(b)}function za(a,b){return ya(a,b,z,ca,C,x)}function Aa(a,c){var e,k;if(!a||!a.state||c>j||c<0)return a?M(a,n):n;k=a.state;if(!a.output||!a.input&&a.avail_in!==0||k.status===na&&c!==i)return M(a,a.avail_out===0?q:n);k.strm=a;e=k.last_flush;k.last_flush=c;if(k.status===ja)if(k.wrap===2)a.adler=0,Q(k,31),Q(k,139),Q(k,8),!k.gzhead?(Q(k,0),Q(k,0),Q(k,0),Q(k,0),Q(k,0),Q(k,k.level===9?2:k.strategy>=t||k.level<2?4:0),Q(k,qa),k.status=ma):(Q(k,(k.gzhead.text?1:0)+(k.gzhead.hcrc?2:0)+(k.gzhead.extra?4:0)+(k.gzhead.name?8:0)+(k.gzhead.comment?16:0)),Q(k,k.gzhead.time&255),Q(k,k.gzhead.time>>8&255),Q(k,k.gzhead.time>>16&255),Q(k,k.gzhead.time>>24&255),Q(k,k.level===9?2:k.strategy>=t||k.level<2?4:0),Q(k,k.gzhead.os&255),k.gzhead.extra&&k.gzhead.extra.length&&(Q(k,k.gzhead.extra.length&255),Q(k,k.gzhead.extra.length>>8&255)),k.gzhead.hcrc&&(a.adler=d(a.adler,k.pending_buf,k.pending,0)),k.gzindex=0,k.status=I);else{var o=z+(k.w_bits-8<<4)<<8,p;k.strategy>=t||k.level<2?p=0:k.level<6?p=1:k.level===6?p=2:p=3;o|=p<<6;k.strstart!==0&&(o|=ia);o+=31-o%31;k.status=ma;sa(k,o);k.strstart!==0&&(sa(k,a.adler>>>16),sa(k,a.adler&65535));a.adler=1}if(k.status===I)if(k.gzhead.extra){p=k.pending;while(k.gzindex<(k.gzhead.extra.length&65535)){if(k.pending===k.pending_buf_size){k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));O(a);p=k.pending;if(k.pending===k.pending_buf_size)break}Q(k,k.gzhead.extra[k.gzindex]&255);k.gzindex++}k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));k.gzindex===k.gzhead.extra.length&&(k.gzindex=0,k.status=J)}else k.status=J;if(k.status===J)if(k.gzhead.name){p=k.pending;do{if(k.pending===k.pending_buf_size){k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));O(a);p=k.pending;if(k.pending===k.pending_buf_size){o=1;break}}k.gzindex<k.gzhead.name.length?o=k.gzhead.name.charCodeAt(k.gzindex++)&255:o=0;Q(k,o)}while(o!==0);k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));o===0&&(k.gzindex=0,k.status=ka)}else k.status=ka;if(k.status===ka)if(k.gzhead.comment){p=k.pending;do{if(k.pending===k.pending_buf_size){k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));O(a);p=k.pending;if(k.pending===k.pending_buf_size){o=1;break}}k.gzindex<k.gzhead.comment.length?o=k.gzhead.comment.charCodeAt(k.gzindex++)&255:o=0;Q(k,o)}while(o!==0);k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));o===0&&(k.status=la)}else k.status=la;k.status===la&&(k.gzhead.hcrc?(k.pending+2>k.pending_buf_size&&O(a),k.pending+2<=k.pending_buf_size&&(Q(k,a.adler&255),Q(k,a.adler>>8&255),a.adler=0,k.status=ma)):k.status=ma);if(k.pending!==0){O(a);if(a.avail_out===0){k.last_flush=-1;return l}}else if(a.avail_in===0&&ra(c)<=ra(e)&&c!==i)return M(a,q);if(k.status===na&&a.avail_in!==0)return M(a,q);if(a.avail_in!==0||k.lookahead!==0||c!==f&&k.status!==na){p=k.strategy===t?X(k,c):k.strategy===u?W(k,c):va[k.level].func(k,c);(p===L||p===pa)&&(k.status=na);if(p===K||p===L){a.avail_out===0&&(k.last_flush=-1);return l}if(p===oa){c===g?b._tr_align(k):c!==j&&(b._tr_stored_block(k,0,0,!1),c===h&&(N(k.head),k.lookahead===0&&(k.strstart=0,k.block_start=0,k.insert=0)));O(a);if(a.avail_out===0){k.last_flush=-1;return l}}}if(c!==i)return l;if(k.wrap<=0)return m;k.wrap===2?(Q(k,a.adler&255),Q(k,a.adler>>8&255),Q(k,a.adler>>16&255),Q(k,a.adler>>24&255),Q(k,a.total_in&255),Q(k,a.total_in>>8&255),Q(k,a.total_in>>16&255),Q(k,a.total_in>>24&255)):(sa(k,a.adler>>>16),sa(k,a.adler&65535));O(a);k.wrap>0&&(k.wrap=-k.wrap);return k.pending!==0?l:m}function Ba(a){var b;if(!a||!a.state)return n;b=a.state.status;if(b!==ja&&b!==I&&b!==J&&b!==ka&&b!==la&&b!==ma&&b!==na)return M(a,n);a.state=null;return b===ma?M(a,o):l}function Ca(b,d){var e=d.length,f,g,h,i,j;if(!b||!b.state)return n;f=b.state;g=f.wrap;if(g===2||g===1&&f.status!==ja||f.lookahead)return n;g===1&&(b.adler=c(b.adler,d,e,0));f.wrap=0;e>=f.w_size&&(g===0&&(N(f.head),f.strstart=0,f.block_start=0,f.insert=0),j=new a.Buf8(f.w_size),a.arraySet(j,d,e-f.w_size,f.w_size,0),d=j,e=f.w_size);j=b.avail_in;h=b.next_in;i=b.input;b.avail_in=e;b.next_in=0;b.input=d;S(f);while(f.lookahead>=F){e=f.strstart;d=f.lookahead-(F-1);do f.ins_h=(f.ins_h<<f.hash_shift^f.window[e+F-1])&f.hash_mask,f.prev[e&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=e,e++;while(--d);f.strstart=e;f.lookahead=F-1;S(f)}f.strstart+=f.lookahead;f.block_start=f.strstart;f.insert=f.lookahead;f.lookahead=0;f.match_length=f.prev_length=F-1;f.match_available=0;b.next_in=h;b.input=i;b.avail_in=j;f.wrap=g;return l}B.deflateInit=za;B.deflateInit2=ya;B.deflateReset=Z;B.deflateResetKeep=xa;B.deflateSetHeader=$;B.deflate=Aa;B.deflateEnd=Ba;B.deflateSetDictionary=Ca;B.deflateInfo="pako deflate (from Nodeca project)"}var C=!1;function da(){C||(C=!0,ca());return ba.exports}var D={},ea={exports:D};function fa(){var a=k(),b=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch(a){b=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){c=!1}var d=new a.Buf8(256);for(var e=0;e<256;e++)d[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;d[254]=d[254]=1;D.string2buf=function(b){var c,d,e,f,g,h=b.length,i=0;for(f=0;f<h;f++)d=b.charCodeAt(f),(d&64512)===55296&&f+1<h&&(e=b.charCodeAt(f+1),(e&64512)===56320&&(d=65536+(d-55296<<10)+(e-56320),f++)),i+=d<128?1:d<2048?2:d<65536?3:4;c=new a.Buf8(i);for(g=0,f=0;g<i;f++)d=b.charCodeAt(f),(d&64512)===55296&&f+1<h&&(e=b.charCodeAt(f+1),(e&64512)===56320&&(d=65536+(d-55296<<10)+(e-56320),f++)),d<128?c[g++]=d:d<2048?(c[g++]=192|d>>>6,c[g++]=128|d&63):d<65536?(c[g++]=224|d>>>12,c[g++]=128|d>>>6&63,c[g++]=128|d&63):(c[g++]=240|d>>>18,c[g++]=128|d>>>12&63,c[g++]=128|d>>>6&63,c[g++]=128|d&63);return c};function f(d,e){if(e<65534&&(d.subarray&&c||!d.subarray&&b))return String.fromCharCode.apply(null,a.shrinkBuf(d,e));var f="";for(var g=0;g<e;g++)f+=String.fromCharCode(d[g]);return f}D.buf2binstring=function(a){return f(a,a.length)};D.binstring2buf=function(b){var c=new a.Buf8(b.length);for(var d=0,e=c.length;d<e;d++)c[d]=b.charCodeAt(d);return c};D.buf2string=function(a,b){var c,e,g,h;b=b||a.length;var i=new Array(b*2);for(e=0,c=0;c<b;){g=a[c++];if(g<128){i[e++]=g;continue}h=d[g];if(h>4){i[e++]=65533;c+=h-1;continue}g&=h===2?31:h===3?15:7;while(h>1&&c<b)g=g<<6|a[c++]&63,h--;if(h>1){i[e++]=65533;continue}g<65536?i[e++]=g:(g-=65536,i[e++]=55296|g>>10&1023,i[e++]=56320|g&1023)}return f(i,e)};D.utf8border=function(a,b){var c;b=b||a.length;b>a.length&&(b=a.length);c=b-1;while(c>=0&&(a[c]&192)===128)c--;if(c<0)return b;return c===0?b:c+d[a[c]]>b?c:b}}var E=!1;function ga(){E||(E=!0,fa());return ea.exports}f={};var ha={exports:f};function F(){function a(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}ha.exports=a}var G=!1;function H(){G||(G=!0,F());return ha.exports}var ia={},ja={exports:ia};function I(){var a=da(),b=k(),c=ga(),d=A(),e=H(),f=Object.prototype.toString,g=0,h=4,i=0,j=1,l=2,m=-1,n=0,o=8;function p(g){if(!(this instanceof p))return new p(g);this.options=b.assign({level:m,method:o,chunkSize:16384,windowBits:15,memLevel:8,strategy:n,to:""},g||{});g=this.options;g.raw&&g.windowBits>0?g.windowBits=-g.windowBits:g.gzip&&g.windowBits>0&&g.windowBits<16&&(g.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new e();this.strm.avail_out=0;var h=a.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(h!==i)throw new Error(d[h]);g.header&&a.deflateSetHeader(this.strm,g.header);if(g.dictionary){var j;typeof g.dictionary==="string"?j=c.string2buf(g.dictionary):f.call(g.dictionary)==="[object ArrayBuffer]"?j=new Uint8Array(g.dictionary):j=g.dictionary;h=a.deflateSetDictionary(this.strm,j);if(h!==i)throw new Error(d[h]);this._dict_set=!0}}p.prototype.push=function(d,e){var k=this.strm,m=this.options.chunkSize;if(this.ended)return!1;e=e===~~e?e:e===!0?h:g;typeof d==="string"?k.input=c.string2buf(d):f.call(d)==="[object ArrayBuffer]"?k.input=new Uint8Array(d):k.input=d;k.next_in=0;k.avail_in=k.input.length;do{k.avail_out===0&&(k.output=new b.Buf8(m),k.next_out=0,k.avail_out=m);d=a.deflate(k,e);if(d!==j&&d!==i){this.onEnd(d);this.ended=!0;return!1}(k.avail_out===0||k.avail_in===0&&(e===h||e===l))&&(this.options.to==="string"?this.onData(c.buf2binstring(b.shrinkBuf(k.output,k.next_out))):this.onData(b.shrinkBuf(k.output,k.next_out)))}while((k.avail_in>0||k.avail_out===0)&&d!==j);if(e===h){d=a.deflateEnd(this.strm);this.onEnd(d);this.ended=!0;return d===i}if(e===l){this.onEnd(i);k.avail_out=0;return!0}return!0};p.prototype.onData=function(a){this.chunks.push(a)};p.prototype.onEnd=function(a){a===i&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function q(a,b){b=new p(b);b.push(a,!0);if(b.err)throw b.msg||d[b.err];return b.result}function r(a,b){b=b||{};b.raw=!0;return q(a,b)}function aa(a,b){b=b||{};b.gzip=!0;return q(a,b)}ia.Deflate=p;ia.deflate=q;ia.deflateRaw=r;ia.gzip=aa}var J=!1;function ka(){J||(J=!0,I());return ja.exports}b={};var la={exports:b};function ma(){var a=30,b=12;la.exports=function(c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,aa,s,t,u,v,w,x,y,z,A;e=c.state;f=c.next_in;z=c.input;g=f+(c.avail_in-5);h=c.next_out;A=c.output;d=h-(d-c.avail_out);i=h+(c.avail_out-257);j=e.dmax;k=e.wsize;l=e.whave;m=e.wnext;n=e.window;o=e.hold;p=e.bits;q=e.lencode;r=e.distcode;aa=(1<<e.lenbits)-1;s=(1<<e.distbits)-1;top:do{p<15&&(o+=z[f++]<<p,p+=8,o+=z[f++]<<p,p+=8);t=q[o&aa];dolen:for(;;){u=t>>>24;o>>>=u;p-=u;u=t>>>16&255;if(u===0)A[h++]=t&65535;else if(u&16){v=t&65535;u&=15;u&&(p<u&&(o+=z[f++]<<p,p+=8),v+=o&(1<<u)-1,o>>>=u,p-=u);p<15&&(o+=z[f++]<<p,p+=8,o+=z[f++]<<p,p+=8);t=r[o&s];dodist:for(;;){u=t>>>24;o>>>=u;p-=u;u=t>>>16&255;if(u&16){w=t&65535;u&=15;p<u&&(o+=z[f++]<<p,p+=8,p<u&&(o+=z[f++]<<p,p+=8));w+=o&(1<<u)-1;if(w>j){c.msg="invalid distance too far back";e.mode=a;break top}o>>>=u;p-=u;u=h-d;if(w>u){u=w-u;if(u>l&&e.sane){c.msg="invalid distance too far back";e.mode=a;break top}x=0;y=n;if(m===0){x+=k-u;if(u<v){v-=u;do A[h++]=n[x++];while(--u);x=h-w;y=A}}else if(m<u){x+=k+m-u;u-=m;if(u<v){v-=u;do A[h++]=n[x++];while(--u);x=0;if(m<v){u=m;v-=u;do A[h++]=n[x++];while(--u);x=h-w;y=A}}}else{x+=m-u;if(u<v){v-=u;do A[h++]=n[x++];while(--u);x=h-w;y=A}}while(v>2)A[h++]=y[x++],A[h++]=y[x++],A[h++]=y[x++],v-=3;v&&(A[h++]=y[x++],v>1&&(A[h++]=y[x++]))}else{x=h-w;do A[h++]=A[x++],A[h++]=A[x++],A[h++]=A[x++],v-=3;while(v>2);v&&(A[h++]=A[x++],v>1&&(A[h++]=A[x++]))}}else if((u&64)===0){t=r[(t&65535)+(o&(1<<u)-1)];continue dodist}else{c.msg="invalid distance code";e.mode=a;break top}break}}else if((u&64)===0){t=q[(t&65535)+(o&(1<<u)-1)];continue dolen}else if(u&32){e.mode=b;break top}else{c.msg="invalid literal/length code";e.mode=a;break top}break}}while(f<g&&h<i);v=p>>3;f-=v;p-=v<<3;o&=(1<<p)-1;c.next_in=f;c.next_out=h;c.avail_in=f<g?5+(g-f):5-(f-g);c.avail_out=h<i?257+(i-h):257-(h-i);e.hold=o;e.bits=p;return}}var na=!1;function K(){na||(na=!0,ma());return la.exports}c={};var oa={exports:c};function L(){var a=k(),b=15,c=852,d=592,e=0,f=1,g=2,h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],j=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];oa.exports=function(k,m,n,o,p,q,r,aa){var s=aa.bits,t,u,v,w,x,y,z,A,B,ba,ca,C,da,D,ea=0,fa,E=new a.Buf16(b+1),ga=new a.Buf16(b+1),ha=0,F,G,H;for(t=0;t<=b;t++)E[t]=0;for(u=0;u<o;u++)E[m[n+u]]++;s=s;for(w=b;w>=1;w--)if(E[w]!==0)break;s>w&&(s=w);if(w===0){p[q++]=1<<24|64<<16|0;p[q++]=1<<24|64<<16|0;aa.bits=1;return 0}for(v=1;v<w;v++)if(E[v]!==0)break;s<v&&(s=v);z=1;for(t=1;t<=b;t++){z<<=1;z-=E[t];if(z<0)return-1}if(z>0&&(k===e||w!==1))return-1;ga[1]=0;for(t=1;t<b;t++)ga[t+1]=ga[t]+E[t];for(u=0;u<o;u++)m[n+u]!==0&&(r[ga[m[n+u]]++]=u);k===e?(ga=o=r,fa=19):k===f?(ga=h,ea-=257,o=i,ha-=257,fa=256):(ga=j,o=l,fa=-1);B=0;u=0;t=v;D=q;x=s;y=0;C=-1;A=1<<s;da=A-1;if(k===f&&A>c||k===g&&A>d)return 1;for(;;){F=t-y;r[u]<fa?(G=0,H=r[u]):r[u]>fa?(G=o[ha+r[u]],H=ga[ea+r[u]]):(G=32+64,H=0);ba=1<<t-y;ca=1<<x;v=ca;do ca-=ba,p[D+(B>>y)+ca]=F<<24|G<<16|H|0;while(ca!==0);ba=1<<t-1;while(B&ba)ba>>=1;ba!==0?(B&=ba-1,B+=ba):B=0;u++;if(--E[t]===0){if(t===w)break;t=m[n+r[u]]}if(t>s&&(B&da)!==C){y===0&&(y=s);D+=v;x=t-y;z=1<<x;while(x+y<w){z-=E[x+y];if(z<=0)break;x++;z<<=1}A+=1<<x;if(k===f&&A>c||k===g&&A>d)return 1;C=B&da;p[C]=s<<24|x<<16|D-q|0}}B!==0&&(p[D+B]=t-y<<24|64<<16|0);aa.bits=s;return 0}}var pa=!1;function qa(){pa||(pa=!0,L());return oa.exports}var M={},ra={exports:M};function N(){var a=k(),b=s(),c=w(),d=K(),e=qa(),f=0,g=1,h=2,i=4,j=5,l=6,m=0,n=1,o=2,p=-2,q=-3,r=-4,aa=-5,t=8,u=1,v=2,x=3,y=4,z=5,A=6,B=7,ba=8,ca=9,C=10,da=11,D=12,ea=13,fa=14,E=15,ga=16,ha=17,F=18,G=19,H=20,ia=21,ja=22,I=23,J=24,ka=25,la=26,ma=27,na=28,oa=29,L=30,pa=31,ra=32,N=852,O=592,P=15,Q=P;function sa(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function R(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ta(b){var c;if(!b||!b.state)return p;c=b.state;b.total_in=b.total_out=c.total=0;b.msg="";c.wrap&&(b.adler=c.wrap&1);c.mode=u;c.last=0;c.havedict=0;c.dmax=32768;c.head=null;c.hold=0;c.bits=0;c.lencode=c.lendyn=new a.Buf32(N);c.distcode=c.distdyn=new a.Buf32(O);c.sane=1;c.back=-1;return m}function S(a){var b;if(!a||!a.state)return p;b=a.state;b.wsize=0;b.whave=0;b.wnext=0;return ta(a)}function T(a,b){var c,d;if(!a||!a.state)return p;d=a.state;b<0?(c=0,b=-b):(c=(b>>4)+1,b<48&&(b&=15));if(b&&(b<8||b>15))return p;d.window!==null&&d.wbits!==b&&(d.window=null);d.wrap=c;d.wbits=b;return S(a)}function U(a,b){var c;if(!a)return p;c=new R();a.state=c;c.window=null;c=T(a,b);c!==m&&(a.state=null);return c}function V(a){return U(a,Q)}var W=!0,X,ua;function va(b){if(W){var c;X=new a.Buf32(512);ua=new a.Buf32(32);c=0;while(c<144)b.lens[c++]=8;while(c<256)b.lens[c++]=9;while(c<280)b.lens[c++]=7;while(c<288)b.lens[c++]=8;e(g,b.lens,0,288,X,0,b.work,{bits:9});c=0;while(c<32)b.lens[c++]=5;e(h,b.lens,0,32,ua,0,b.work,{bits:5});W=!1}b.lencode=X;b.lenbits=9;b.distcode=ua;b.distbits=5}function wa(b,c,d,e){var f;b=b.state;b.window===null&&(b.wsize=1<<b.wbits,b.wnext=0,b.whave=0,b.window=new a.Buf8(b.wsize));e>=b.wsize?(a.arraySet(b.window,c,d-b.wsize,b.wsize,0),b.wnext=0,b.whave=b.wsize):(f=b.wsize-b.wnext,f>e&&(f=e),a.arraySet(b.window,c,d-e,f,b.wnext),e-=f,e?(a.arraySet(b.window,c,d-e,e,0),b.wnext=e,b.whave=b.wsize):(b.wnext+=f,b.wnext===b.wsize&&(b.wnext=0),b.whave<b.wsize&&(b.whave+=f)));return 0}function Y(k,s){var w,K,qa,M,N,O,P,Q,R,ta,S,T,U,V,W,X,ua,Y,xa,Z=new a.Buf8(4),$,ya,za=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return p;w=k.state;w.mode===D&&(w.mode=ea);N=k.next_out;qa=k.output;P=k.avail_out;M=k.next_in;K=k.input;O=k.avail_in;Q=w.hold;R=w.bits;ta=O;S=P;xa=m;inf_leave:for(;;)switch(w.mode){case u:if(w.wrap===0){w.mode=ea;break}while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(w.wrap&2&&Q===35615){w.check=0;Z[0]=Q&255;Z[1]=Q>>>8&255;w.check=c(w.check,Z,2,0);Q=0;R=0;w.mode=v;break}w.flags=0;w.head&&(w.head.done=!1);if(!(w.wrap&1)||(((Q&255)<<8)+(Q>>8))%31){k.msg="incorrect header check";w.mode=L;break}if((Q&15)!==t){k.msg="unknown compression method";w.mode=L;break}Q>>>=4;R-=4;Y=(Q&15)+8;if(w.wbits===0)w.wbits=Y;else if(Y>w.wbits){k.msg="invalid window size";w.mode=L;break}w.dmax=1<<Y;k.adler=w.check=1;w.mode=Q&512?C:D;Q=0;R=0;break;case v:while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.flags=Q;if((w.flags&255)!==t){k.msg="unknown compression method";w.mode=L;break}if(w.flags&57344){k.msg="unknown header flags set";w.mode=L;break}w.head&&(w.head.text=Q>>8&1);w.flags&512&&(Z[0]=Q&255,Z[1]=Q>>>8&255,w.check=c(w.check,Z,2,0));Q=0;R=0;w.mode=x;case x:while(R<32){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.head&&(w.head.time=Q);w.flags&512&&(Z[0]=Q&255,Z[1]=Q>>>8&255,Z[2]=Q>>>16&255,Z[3]=Q>>>24&255,w.check=c(w.check,Z,4,0));Q=0;R=0;w.mode=y;case y:while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.head&&(w.head.xflags=Q&255,w.head.os=Q>>8);w.flags&512&&(Z[0]=Q&255,Z[1]=Q>>>8&255,w.check=c(w.check,Z,2,0));Q=0;R=0;w.mode=z;case z:if(w.flags&1024){while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.length=Q;w.head&&(w.head.extra_len=Q);w.flags&512&&(Z[0]=Q&255,Z[1]=Q>>>8&255,w.check=c(w.check,Z,2,0));Q=0;R=0}else w.head&&(w.head.extra=null);w.mode=A;case A:if(w.flags&1024){T=w.length;T>O&&(T=O);T&&(w.head&&(Y=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Array(w.head.extra_len)),a.arraySet(w.head.extra,K,M,T,Y)),w.flags&512&&(w.check=c(w.check,K,T,M)),O-=T,M+=T,w.length-=T);if(w.length)break inf_leave}w.length=0;w.mode=B;case B:if(w.flags&2048){if(O===0)break inf_leave;T=0;do Y=K[M+T++],w.head&&Y&&w.length<65536&&(w.head.name+=String.fromCharCode(Y));while(Y&&T<O);w.flags&512&&(w.check=c(w.check,K,T,M));O-=T;M+=T;if(Y)break inf_leave}else w.head&&(w.head.name=null);w.length=0;w.mode=ba;case ba:if(w.flags&4096){if(O===0)break inf_leave;T=0;do Y=K[M+T++],w.head&&Y&&w.length<65536&&(w.head.comment+=String.fromCharCode(Y));while(Y&&T<O);w.flags&512&&(w.check=c(w.check,K,T,M));O-=T;M+=T;if(Y)break inf_leave}else w.head&&(w.head.comment=null);w.mode=ca;case ca:if(w.flags&512){while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(Q!==(w.check&65535)){k.msg="header crc mismatch";w.mode=L;break}Q=0;R=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0);k.adler=w.check=0;w.mode=D;break;case C:while(R<32){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}k.adler=w.check=sa(Q);Q=0;R=0;w.mode=da;case da:if(w.havedict===0){k.next_out=N;k.avail_out=P;k.next_in=M;k.avail_in=O;w.hold=Q;w.bits=R;return o}k.adler=w.check=1;w.mode=D;case D:if(s===j||s===l)break inf_leave;case ea:if(w.last){Q>>>=R&7;R-=R&7;w.mode=ma;break}while(R<3){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.last=Q&1;Q>>>=1;R-=1;switch(Q&3){case 0:w.mode=fa;break;case 1:va(w);w.mode=H;if(s===l){Q>>>=2;R-=2;break inf_leave}break;case 2:w.mode=ha;break;case 3:k.msg="invalid block type",w.mode=L}Q>>>=2;R-=2;break;case fa:Q>>>=R&7;R-=R&7;while(R<32){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if((Q&65535)!==(Q>>>16^65535)){k.msg="invalid stored block lengths";w.mode=L;break}w.length=Q&65535;Q=0;R=0;w.mode=E;if(s===l)break inf_leave;case E:w.mode=ga;case ga:T=w.length;if(T){T>O&&(T=O);T>P&&(T=P);if(T===0)break inf_leave;a.arraySet(qa,K,M,T,N);O-=T;M+=T;P-=T;N+=T;w.length-=T;break}w.mode=D;break;case ha:while(R<14){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.nlen=(Q&31)+257;Q>>>=5;R-=5;w.ndist=(Q&31)+1;Q>>>=5;R-=5;w.ncode=(Q&15)+4;Q>>>=4;R-=4;if(w.nlen>286||w.ndist>30){k.msg="too many length or distance symbols";w.mode=L;break}w.have=0;w.mode=F;case F:while(w.have<w.ncode){while(R<3){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.lens[za[w.have++]]=Q&7;Q>>>=3;R-=3}while(w.have<19)w.lens[za[w.have++]]=0;w.lencode=w.lendyn;w.lenbits=7;$={bits:w.lenbits};xa=e(f,w.lens,0,19,w.lencode,0,w.work,$);w.lenbits=$.bits;if(xa){k.msg="invalid code lengths set";w.mode=L;break}w.have=0;w.mode=G;case G:while(w.have<w.nlen+w.ndist){for(;;){U=w.lencode[Q&(1<<w.lenbits)-1];V=U>>>24;W=U>>>16&255;X=U&65535;if(V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(X<16)Q>>>=V,R-=V,w.lens[w.have++]=X;else{if(X===16){ya=V+2;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=V;R-=V;if(w.have===0){k.msg="invalid bit length repeat";w.mode=L;break}Y=w.lens[w.have-1];T=3+(Q&3);Q>>>=2;R-=2}else if(X===17){ya=V+3;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=V;R-=V;Y=0;T=3+(Q&7);Q>>>=3;R-=3}else{ya=V+7;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=V;R-=V;Y=0;T=11+(Q&127);Q>>>=7;R-=7}if(w.have+T>w.nlen+w.ndist){k.msg="invalid bit length repeat";w.mode=L;break}while(T--)w.lens[w.have++]=Y}}if(w.mode===L)break;if(w.lens[256]===0){k.msg="invalid code -- missing end-of-block";w.mode=L;break}w.lenbits=9;$={bits:w.lenbits};xa=e(g,w.lens,0,w.nlen,w.lencode,0,w.work,$);w.lenbits=$.bits;if(xa){k.msg="invalid literal/lengths set";w.mode=L;break}w.distbits=6;w.distcode=w.distdyn;$={bits:w.distbits};xa=e(h,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,$);w.distbits=$.bits;if(xa){k.msg="invalid distances set";w.mode=L;break}w.mode=H;if(s===l)break inf_leave;case H:w.mode=ia;case ia:if(O>=6&&P>=258){k.next_out=N;k.avail_out=P;k.next_in=M;k.avail_in=O;w.hold=Q;w.bits=R;d(k,S);N=k.next_out;qa=k.output;P=k.avail_out;M=k.next_in;K=k.input;O=k.avail_in;Q=w.hold;R=w.bits;w.mode===D&&(w.back=-1);break}w.back=0;for(;;){U=w.lencode[Q&(1<<w.lenbits)-1];V=U>>>24;W=U>>>16&255;X=U&65535;if(V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(W&&(W&240)===0){Y=V;$=W;ua=X;for(;;){U=w.lencode[ua+((Q&(1<<Y+$)-1)>>Y)];V=U>>>24;W=U>>>16&255;X=U&65535;if(Y+V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=Y;R-=Y;w.back+=Y}Q>>>=V;R-=V;w.back+=V;w.length=X;if(W===0){w.mode=la;break}if(W&32){w.back=-1;w.mode=D;break}if(W&64){k.msg="invalid literal/length code";w.mode=L;break}w.extra=W&15;w.mode=ja;case ja:if(w.extra){ya=w.extra;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.length+=Q&(1<<w.extra)-1;Q>>>=w.extra;R-=w.extra;w.back+=w.extra}w.was=w.length;w.mode=I;case I:for(;;){U=w.distcode[Q&(1<<w.distbits)-1];V=U>>>24;W=U>>>16&255;X=U&65535;if(V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if((W&240)===0){Y=V;$=W;ua=X;for(;;){U=w.distcode[ua+((Q&(1<<Y+$)-1)>>Y)];V=U>>>24;W=U>>>16&255;X=U&65535;if(Y+V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=Y;R-=Y;w.back+=Y}Q>>>=V;R-=V;w.back+=V;if(W&64){k.msg="invalid distance code";w.mode=L;break}w.offset=X;w.extra=W&15;w.mode=J;case J:if(w.extra){ya=w.extra;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.offset+=Q&(1<<w.extra)-1;Q>>>=w.extra;R-=w.extra;w.back+=w.extra}if(w.offset>w.dmax){k.msg="invalid distance too far back";w.mode=L;break}w.mode=ka;case ka:if(P===0)break inf_leave;T=S-P;if(w.offset>T){T=w.offset-T;if(T>w.whave&&w.sane){k.msg="invalid distance too far back";w.mode=L;break}T>w.wnext?(T-=w.wnext,U=w.wsize-T):U=w.wnext-T;T>w.length&&(T=w.length);$=w.window}else $=qa,U=N-w.offset,T=w.length;T>P&&(T=P);P-=T;w.length-=T;do qa[N++]=$[U++];while(--T);w.length===0&&(w.mode=ia);break;case la:if(P===0)break inf_leave;qa[N++]=w.length;P--;w.mode=ia;break;case ma:if(w.wrap){while(R<32){if(O===0)break inf_leave;O--;Q|=K[M++]<<R;R+=8}S-=P;k.total_out+=S;w.total+=S;S&&(k.adler=w.check=w.flags?c(w.check,qa,S,N-S):b(w.check,qa,S,N-S));S=P;if((w.flags?Q:sa(Q))!==w.check){k.msg="incorrect data check";w.mode=L;break}Q=0;R=0}w.mode=na;case na:if(w.wrap&&w.flags){while(R<32){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(Q!==(w.total&4294967295)){k.msg="incorrect length check";w.mode=L;break}Q=0;R=0}w.mode=oa;case oa:xa=n;break inf_leave;case L:xa=q;break inf_leave;case pa:return r;case ra:default:return p}k.next_out=N;k.avail_out=P;k.next_in=M;k.avail_in=O;w.hold=Q;w.bits=R;if((w.wsize||S!==k.avail_out&&w.mode<L&&(w.mode<ma||s!==i))&&wa(k,k.output,k.next_out,S-k.avail_out)){w.mode=pa;return r}ta-=k.avail_in;S-=k.avail_out;k.total_in+=ta;k.total_out+=S;w.total+=S;w.wrap&&S&&(k.adler=w.check=w.flags?c(w.check,qa,S,k.next_out-S):b(w.check,qa,S,k.next_out-S));k.data_type=w.bits+(w.last?64:0)+(w.mode===D?128:0)+(w.mode===H||w.mode===E?256:0);(ta===0&&S===0||s===i)&&xa===m&&(xa=aa);return xa}function xa(a){if(!a||!a.state)return p;var b=a.state;b.window&&(b.window=null);a.state=null;return m}function Z(a,b){if(!a||!a.state)return p;a=a.state;if((a.wrap&2)===0)return p;a.head=b;b.done=!1;return m}function $(a,c){var d=c.length,e,f;if(!a||!a.state)return p;e=a.state;if(e.wrap!==0&&e.mode!==da)return p;if(e.mode===da){f=1;f=b(f,c,d,0);if(f!==e.check)return q}f=wa(a,c,d,d);if(f){e.mode=pa;return r}e.havedict=1;return m}M.inflateReset=S;M.inflateReset2=T;M.inflateResetKeep=ta;M.inflateInit=V;M.inflateInit2=U;M.inflate=Y;M.inflateEnd=xa;M.inflateGetHeader=Z;M.inflateSetDictionary=$;M.inflateInfo="pako inflate (from Nodeca project)"}var O=!1;function P(){O||(O=!0,N());return ra.exports}d={};var Q={exports:d};function sa(){Q.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}}var R=!1;function ta(){R||(R=!0,sa());return Q.exports}f={};var S={exports:f};function T(){function a(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}S.exports=a}var U=!1;function V(){U||(U=!0,T());return S.exports}var W={},X={exports:W};function ua(){var a=P(),b=k(),c=ga(),d=ta(),e=A(),f=H(),g=V(),h=Object.prototype.toString;function i(j){if(!(this instanceof i))return new i(j);this.options=b.assign({chunkSize:16384,windowBits:0,to:""},j||{});var k=this.options;k.raw&&k.windowBits>=0&&k.windowBits<16&&(k.windowBits=-k.windowBits,k.windowBits===0&&(k.windowBits=-15));k.windowBits>=0&&k.windowBits<16&&!(j&&j.windowBits)&&(k.windowBits+=32);k.windowBits>15&&k.windowBits<48&&((k.windowBits&15)===0&&(k.windowBits|=15));this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new f();this.strm.avail_out=0;j=a.inflateInit2(this.strm,k.windowBits);if(j!==d.Z_OK)throw new Error(e[j]);this.header=new g();a.inflateGetHeader(this.strm,this.header);if(k.dictionary){typeof k.dictionary==="string"?k.dictionary=c.string2buf(k.dictionary):h.call(k.dictionary)==="[object ArrayBuffer]"&&(k.dictionary=new Uint8Array(k.dictionary));if(k.raw){j=a.inflateSetDictionary(this.strm,k.dictionary);if(j!==d.Z_OK)throw new Error(e[j])}}}i.prototype.push=function(e,f){var g=this.strm,i=this.options.chunkSize,j=this.options.dictionary,k,l,m,n=!1;if(this.ended)return!1;f=f===~~f?f:f===!0?d.Z_FINISH:d.Z_NO_FLUSH;typeof e==="string"?g.input=c.binstring2buf(e):h.call(e)==="[object ArrayBuffer]"?g.input=new Uint8Array(e):g.input=e;g.next_in=0;g.avail_in=g.input.length;do{g.avail_out===0&&(g.output=new b.Buf8(i),g.next_out=0,g.avail_out=i);e=a.inflate(g,d.Z_NO_FLUSH);e===d.Z_NEED_DICT&&j&&(e=a.inflateSetDictionary(this.strm,j));e===d.Z_BUF_ERROR&&n===!0&&(e=d.Z_OK,n=!1);if(e!==d.Z_STREAM_END&&e!==d.Z_OK){this.onEnd(e);this.ended=!0;return!1}g.next_out&&((g.avail_out===0||e===d.Z_STREAM_END||g.avail_in===0&&(f===d.Z_FINISH||f===d.Z_SYNC_FLUSH))&&(this.options.to==="string"?(k=c.utf8border(g.output,g.next_out),l=g.next_out-k,m=c.buf2string(g.output,k),g.next_out=l,g.avail_out=i-l,l&&b.arraySet(g.output,g.output,k,l,0),this.onData(m)):this.onData(b.shrinkBuf(g.output,g.next_out))));g.avail_in===0&&g.avail_out===0&&(n=!0)}while((g.avail_in>0||g.avail_out===0)&&e!==d.Z_STREAM_END);e===d.Z_STREAM_END&&(f=d.Z_FINISH);if(f===d.Z_FINISH){e=a.inflateEnd(this.strm);this.onEnd(e);this.ended=!0;return e===d.Z_OK}if(f===d.Z_SYNC_FLUSH){this.onEnd(d.Z_OK);g.avail_out=0;return!0}return!0};i.prototype.onData=function(a){this.chunks.push(a)};i.prototype.onEnd=function(a){a===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function j(a,b){b=new i(b);b.push(a,!0);if(b.err)throw b.msg||e[b.err];return b.result}function l(a,b){b=b||{};b.raw=!0;return j(a,b)}W.Inflate=i;W.inflate=j;W.inflateRaw=l;W.ungzip=j}var va=!1;function wa(){va||(va=!0,ua());return X.exports}b={};var Y={exports:b};function xa(){var a=k().assign,b=ka(),c=wa(),d=ta(),e={};a(e,b,c,d);Y.exports=e}var Z=!1;function $(){Z||(Z=!0,xa());return Y.exports}function a(a){switch(a){case void 0:return $()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("process-nextick-args-2.0.0",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?g.exports={nextTick:a}:g.exports=process;function a(a,b,c,d){if(typeof a!=="function")throw new TypeError('"callback" argument must be a function');var e=arguments.length,f,g;switch(e){case 0:case 1:return process.nextTick(a);case 2:return process.nextTick(function(){a.call(null,b)});case 3:return process.nextTick(function(){a.call(null,b,c)});case 4:return process.nextTick(function(){a.call(null,b,c,d)});default:f=new Array(e-1);g=0;while(g<f.length)f[g++]=arguments[g];return process.nextTick(function(){a.apply(null,f)})}}}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("safe-buffer-5.1.2",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){var a={},b=a.Buffer;function c(a,b){for(var c in a)b[c]=a[c]}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?h.exports=a:(c(a,g),g.Buffer=d);function d(a,c,d){return b(a,c,d)}c(b,d);d.from=function(a,c,d){if(typeof a==="number")throw new TypeError("Argument must not be a number");return b(a,c,d)};d.alloc=function(a,c,d){if(typeof a!=="number")throw new TypeError("Argument must be a number");a=b(a);c!==void 0?typeof d==="string"?a.fill(c,d):a.fill(c):a.fill(0);return a};d.allocUnsafe=function(a){if(typeof a!=="number")throw new TypeError("Argument must be a number");return b(a)};d.allocUnsafeSlow=function(b){if(typeof b!=="number")throw new TypeError("Argument must be a number");return a.SlowBuffer(b)}}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("util-deprecate-1.0.2",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){g.exports={}.deprecate}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("readable-stream-2.3.6",["safe-buffer-5.1.2","process-nextick-args-2.0.0","core-util-is-1.0.2","inherits-2.0.3","util-deprecate-1.0.2","isarray-1.0.0"],(function(a,b,c,d,e,f){"use strict";function c(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=c(b("safe-buffer-5.1.2")),h=c(b("process-nextick-args-2.0.0")),i=c(b("core-util-is-1.0.2")),j=c(b("inherits-2.0.3")),k=c(b("util-deprecate-1.0.2")),l=c(b("isarray-1.0.0"));c={};var m={exports:c};function n(){m.exports={}}var o=!1;function p(){o||(o=!0,n());return m.exports}b={};var q={exports:b};function r(){function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var b=g().Buffer,c={};function d(a,b,c){a.copy(b,c)}q.exports=function(){function c(){a(this,c),this.head=null,this.tail=null,this.length=0}c.prototype.push=function(a){a={data:a,next:null};this.length>0?this.tail.next=a:this.head=a;this.tail=a;++this.length};c.prototype.unshift=function(a){a={data:a,next:this.head};this.length===0&&(this.tail=a);this.head=a;++this.length};c.prototype.shift=function(){if(this.length===0)return;var a=this.head.data;this.length===1?this.head=this.tail=null:this.head=this.head.next;--this.length;return a};c.prototype.clear=function(){this.head=this.tail=null,this.length=0};c.prototype.join=function(a){if(this.length===0)return"";var b=this.head,c=""+b.data;while(b=b.next)c+=a+b.data;return c};c.prototype.concat=function(a){if(this.length===0)return b.alloc(0);if(this.length===1)return this.head.data;a=b.allocUnsafe(a>>>0);var c=this.head,e=0;while(c)d(c.data,a,e),e+=c.data.length,c=c.next;return a};return c}();c&&c.inspect&&c.inspect.custom&&(q.exports.prototype[c.inspect.custom]=function(){var a=c.inspect({length:this.length});return this.constructor.name+" "+a})}var s=!1;function t(){s||(s=!0,r());return q.exports}c={};var u={exports:c};function v(){var a=h();function b(b,c){var e=this,f=this._readableState&&this._readableState.destroyed,g=this._writableState&&this._writableState.destroyed;if(f||g){c?c(b):b&&(!this._writableState||!this._writableState.errorEmitted)&&a.nextTick(d,this,b);return this}this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(b||null,function(b){!c&&b?(a.nextTick(d,e,b),e._writableState&&(e._writableState.errorEmitted=!0)):c&&c(b)});return this}function c(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function d(a,b){a.emit("error",b)}u.exports={destroy:b,undestroy:c}}var w=!1;function x(){w||(w=!0,v());return u.exports}b={};var y={exports:b};function z(){var b=h();y.exports=w;function c(a){var b=this;this.next=null;this.entry=null;this.finish=function(){Q(b,a)}}var d=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:b.nextTick,e;w.WritableState=u;var f=i();f.inherits=j();var l={deprecate:k()},m=p(),n=g().Buffer,o=a.Uint8Array||function(){};function q(a){return n.from(a)}function r(a){return n.isBuffer(a)||a instanceof o}var s=x();f.inherits(w,m);function t(){}function u(a,b){e=e||F();a=a||{};var d=b instanceof e;this.objectMode=!!a.objectMode;d&&(this.objectMode=this.objectMode||!!a.writableObjectMode);var f=a.highWaterMark,g=a.writableHighWaterMark,h=this.objectMode?16:16*1024;f||f===0?this.highWaterMark=f:d&&(g||g===0)?this.highWaterMark=g:this.highWaterMark=h;this.highWaterMark=Math.floor(this.highWaterMark);this.finalCalled=!1;this.needDrain=!1;this.ending=!1;this.ended=!1;this.finished=!1;this.destroyed=!1;f=a.decodeStrings===!1;this.decodeStrings=!f;this.defaultEncoding=a.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(a){H(b,a)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=!1;this.errorEmitted=!1;this.bufferedRequestCount=0;this.corkedRequestsFree=new c(this)}u.prototype.getBuffer=function(){var a=this.bufferedRequest,b=[];while(a)b.push(a),a=a.next;return b};(function(){try{Object.defineProperty(u.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(a){}})();var v;typeof Symbol==="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==="function"?(v=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(a){if(v.call(this,a))return!0;return this!==w?!1:a&&a._writableState instanceof u}})):v=function(a){return a instanceof this};function w(a){e=e||F();if(!v.call(w,this)&&!(this instanceof e))return new w(a);this._writableState=new u(a,this);this.writable=!0;a&&(typeof a.write==="function"&&(this._write=a.write),typeof a.writev==="function"&&(this._writev=a.writev),typeof a.destroy==="function"&&(this._destroy=a.destroy),typeof a["final"]==="function"&&(this._final=a["final"]));m.call(this)}w.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function z(a,c){var d=new Error("write after end");a.emit("error",d);b.nextTick(c,d)}function A(a,c,d,e){var f=!0,g=!1;d===null?g=new TypeError("May not write null values to stream"):typeof d!=="string"&&d!==void 0&&!c.objectMode&&(g=new TypeError("Invalid non-string/buffer chunk"));g&&(a.emit("error",g),b.nextTick(e,g),f=!1);return f}w.prototype.write=function(a,b,c){var d=this._writableState,e=!1,f=!d.objectMode&&r(a);f&&!n.isBuffer(a)&&(a=q(a));typeof b==="function"&&(c=b,b=null);f?b="buffer":b||(b=d.defaultEncoding);typeof c!=="function"&&(c=t);d.ended?z(this,c):(f||A(this,d,a,c))&&(d.pendingcb++,e=C(this,d,f,a,b,c));return e};w.prototype.cork=function(){var a=this._writableState;a.corked++};w.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,!a.writing&&!a.corked&&!a.finished&&!a.bufferProcessing&&a.bufferedRequest&&K(this,a))};w.prototype.setDefaultEncoding=function(a){typeof a==="string"&&(a=a.toLowerCase());if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((a+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+a);this._writableState.defaultEncoding=a;return this};function B(a,b,c){!a.objectMode&&a.decodeStrings!==!1&&typeof b==="string"&&(b=n.from(b,c));return b}Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function C(a,b,c,d,e,f){if(!c){var g=B(b,d,e);d!==g&&(c=!0,e="buffer",d=g)}g=b.objectMode?1:d.length;b.length+=g;var h=b.length<b.highWaterMark;h||(b.needDrain=!0);if(b.writing||b.corked){var i=b.lastBufferedRequest;b.lastBufferedRequest={chunk:d,encoding:e,isBuf:c,callback:f,next:null};i?i.next=b.lastBufferedRequest:b.bufferedRequest=b.lastBufferedRequest;b.bufferedRequestCount+=1}else D(a,b,!1,g,d,e,f);return h}function D(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function E(a,c,d,e,f){--c.pendingcb,d?(b.nextTick(f,e),b.nextTick(O,a,c),a._writableState.errorEmitted=!0,a.emit("error",e)):(f(e),a._writableState.errorEmitted=!0,a.emit("error",e),O(a,c))}function G(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function H(a,b){var c=a._writableState,e=c.sync,f=c.writecb;G(c);if(b)E(a,c,e,b,f);else{b=L(c);!b&&!c.corked&&!c.bufferProcessing&&c.bufferedRequest&&K(a,c);e?d(I,a,c,b,f):I(a,c,b,f)}}function I(a,b,c,d){c||J(a,b),b.pendingcb--,d(),O(a,b)}function J(a,b){b.length===0&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function K(a,b){b.bufferProcessing=!0;var d=b.bufferedRequest;if(a._writev&&d&&d.next){var e=b.bufferedRequestCount;e=new Array(e);var f=b.corkedRequestsFree;f.entry=d;var g=0,h=!0;while(d)e[g]=d,d.isBuf||(h=!1),d=d.next,g+=1;e.allBuffers=h;D(a,b,!0,b.length,e,"",f.finish);b.pendingcb++;b.lastBufferedRequest=null;f.next?(b.corkedRequestsFree=f.next,f.next=null):b.corkedRequestsFree=new c(b);b.bufferedRequestCount=0}else{while(d){g=d.chunk;h=d.encoding;e=d.callback;f=b.objectMode?1:g.length;D(a,b,!1,f,g,h,e);d=d.next;b.bufferedRequestCount--;if(b.writing)break}d===null&&(b.lastBufferedRequest=null)}b.bufferedRequest=d;b.bufferProcessing=!1}w.prototype._write=function(a,b,c){c(new Error("_write() is not implemented"))};w.prototype._writev=null;w.prototype.end=function(a,b,c){var d=this._writableState;typeof a==="function"?(c=a,a=null,b=null):typeof b==="function"&&(c=b,b=null);a!==null&&a!==void 0&&this.write(a,b);d.corked&&(d.corked=1,this.uncork());!d.ending&&!d.finished&&P(this,d,c)};function L(a){return a.ending&&a.length===0&&a.bufferedRequest===null&&!a.finished&&!a.writing}function M(a,b){a._final(function(c){b.pendingcb--,c&&a.emit("error",c),b.prefinished=!0,a.emit("prefinish"),O(a,b)})}function N(a,c){!c.prefinished&&!c.finalCalled&&(typeof a._final==="function"?(c.pendingcb++,c.finalCalled=!0,b.nextTick(M,a,c)):(c.prefinished=!0,a.emit("prefinish")))}function O(a,b){var c=L(b);c&&(N(a,b),b.pendingcb===0&&(b.finished=!0,a.emit("finish")));return c}function P(a,c,d){c.ending=!0,O(a,c),d&&(c.finished?b.nextTick(d):a.once("finish",d)),c.ended=!0,a.writable=!1}function Q(a,b,c){var d=a.entry;a.entry=null;while(d){var e=d.callback;b.pendingcb--;e(c);d=d.next}b.corkedRequestsFree?b.corkedRequestsFree.next=a:b.corkedRequestsFree=a}Object.defineProperty(w.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(a){if(!this._writableState)return;this._writableState.destroyed=a}});w.prototype.destroy=s.destroy;w.prototype._undestroy=s.undestroy;w.prototype._destroy=function(a,b){this.end(),b(a)}}var A=!1;function B(){A||(A=!0,z());return y.exports}c={};var C={exports:c};function D(){var a=h(),b=Object.keys||function(a){var b=[];for(a in a)b.push(a);return b};C.exports=g;var c=i();c.inherits=j();var d=O(),e=B();c.inherits(g,d);c=b(e.prototype);for(b=0;b<c.length;b++){var f=c[b];g.prototype[f]||(g.prototype[f]=e.prototype[f])}function g(a){if(!(this instanceof g))return new g(a);d.call(this,a);e.call(this,a);a&&a.readable===!1&&(this.readable=!1);a&&a.writable===!1&&(this.writable=!1);this.allowHalfOpen=!0;a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1);this.once("end",k)}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function k(){if(this.allowHalfOpen||this._writableState.ended)return;a.nextTick(l,this)}function l(a){a.end()}Object.defineProperty(g.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){if(this._readableState===void 0||this._writableState===void 0)return;this._readableState.destroyed=a;this._writableState.destroyed=a}});g.prototype._destroy=function(b,c){this.push(null),this.end(),a.nextTick(c,b)}}var E=!1;function F(){E||(E=!0,D());return C.exports}var G={},H={exports:G};function I(){var a=g().Buffer,b=a.isEncoding||function(a){a=""+a;switch(a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function c(a){if(!a)return"utf8";var b;while(!0)switch(a){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return a;default:if(b)return;a=(""+a).toLowerCase();b=!0}}function d(d){var e=c(d);if(typeof e!=="string"&&(a.isEncoding===b||!b(d)))throw new Error("Unknown encoding: "+d);return e||d}G.StringDecoder=e;function e(b){this.encoding=d(b);var c;switch(this.encoding){case"utf16le":this.text=m;this.end=n;c=4;break;case"utf8":this.fillLast=j;c=4;break;case"base64":this.text=o;this.end=p;c=3;break;default:this.write=q;this.end=r;return}this.lastNeed=0;this.lastTotal=0;this.lastChar=a.allocUnsafe(c)}e.prototype.write=function(a){if(a.length===0)return"";var b,c;if(this.lastNeed){b=this.fillLast(a);if(b===void 0)return"";c=this.lastNeed;this.lastNeed=0}else c=0;return c<a.length?b?b+this.text(a,c):this.text(a,c):b||""};e.prototype.end=l;e.prototype.text=k;e.prototype.fillLast=function(a){if(this.lastNeed<=a.length){a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length);this.lastNeed-=a.length};function f(a){if(a<=127)return 0;else if(a>>5===6)return 2;else if(a>>4===14)return 3;else if(a>>3===30)return 4;return a>>6===2?-1:-2}function h(a,b,c){var d=b.length-1;if(d<c)return 0;var e=f(b[d]);if(e>=0){e>0&&(a.lastNeed=e-1);return e}if(--d<c||e===-2)return 0;e=f(b[d]);if(e>=0){e>0&&(a.lastNeed=e-2);return e}if(--d<c||e===-2)return 0;e=f(b[d]);if(e>=0){e>0&&(e===2?e=0:a.lastNeed=e-3);return e}return 0}function i(a,b,c){if((b[0]&192)!==128){a.lastNeed=0;return"\ufffd"}if(a.lastNeed>1&&b.length>1){if((b[1]&192)!==128){a.lastNeed=1;return"\ufffd"}if(a.lastNeed>2&&b.length>2&&(b[2]&192)!==128){a.lastNeed=2;return"\ufffd"}}}function j(a){var b=this.lastTotal-this.lastNeed,c=i(this,a,b);if(c!==void 0)return c;if(this.lastNeed<=a.length){a.copy(this.lastChar,b,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}a.copy(this.lastChar,b,0,a.length);this.lastNeed-=a.length}function k(a,b){var c=h(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=c;c=a.length-(c-this.lastNeed);a.copy(this.lastChar,0,c);return a.toString("utf8",b,c)}function l(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+"\ufffd":a}function m(a,b){if((a.length-b)%2===0){var c=a.toString("utf16le",b);if(c){var d=c.charCodeAt(c.length-1);if(d>=55296&&d<=56319){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=a[a.length-2];this.lastChar[1]=a[a.length-1];return c.slice(0,-1)}}return c}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=a[a.length-1];return a.toString("utf16le",b,a.length-1)}function n(a){a=a&&a.length?this.write(a):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return a+this.lastChar.toString("utf16le",0,b)}return a}function o(a,b){var c=(a.length-b)%3;if(c===0)return a.toString("base64",b);this.lastNeed=3-c;this.lastTotal=3;c===1?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]);return a.toString("base64",b,a.length-c)}function p(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function q(a){return a.toString(this.encoding)}function r(a){return a&&a.length?this.write(a):""}}var J=!1;function K(){J||(J=!0,I());return H.exports}b={};var L={exports:b};function M(){var b=h();L.exports=A;var c=l(),d;A.ReadableState=z;var e=function(a,b){return a.listeners(b).length},f=p(),k=g().Buffer,m=a.Uint8Array||function(){};function n(a){return k.from(a)}function o(a){return k.isBuffer(a)||a instanceof m}var q=i();q.inherits=j();var r={},s=void 0;r&&r.debuglog?s=r.debuglog("stream"):s=function(){};var u=t();r=x();var v;q.inherits(A,f);var w=["error","close","destroy","pause","resume"];function y(a,b,d){if(typeof a.prependListener==="function")return a.prependListener(b,d);!a._events||!a._events[b]?a.on(b,d):c(a._events[b])?a._events[b].unshift(d):a._events[b]=[d,a._events[b]]}function z(a,b){d=d||F();a=a||{};b=b instanceof d;this.objectMode=!!a.objectMode;b&&(this.objectMode=this.objectMode||!!a.readableObjectMode);var c=a.highWaterMark,e=a.readableHighWaterMark,f=this.objectMode?16:16*1024;c||c===0?this.highWaterMark=c:b&&(e||e===0)?this.highWaterMark=e:this.highWaterMark=f;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new u();this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=!1;this.endEmitted=!1;this.reading=!1;this.sync=!0;this.needReadable=!1;this.emittedReadable=!1;this.readableListening=!1;this.resumeScheduled=!1;this.destroyed=!1;this.defaultEncoding=a.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.decoder=null;this.encoding=null;a.encoding&&(v||(v=K("/").StringDecoder),this.decoder=new v(a.encoding),this.encoding=a.encoding)}function A(a){d=d||F();if(!(this instanceof A))return new A(a);this._readableState=new z(a,this);this.readable=!0;a&&(typeof a.read==="function"&&(this._read=a.read),typeof a.destroy==="function"&&(this._destroy=a.destroy));f.call(this)}Object.defineProperty(A.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(a){if(!this._readableState)return;this._readableState.destroyed=a}});A.prototype.destroy=r.destroy;A.prototype._undestroy=r.undestroy;A.prototype._destroy=function(a,b){this.push(null),b(a)};A.prototype.push=function(a,b){var c=this._readableState,d;!c.objectMode?typeof a==="string"&&(b=b||c.defaultEncoding,b!==c.encoding&&(a=k.from(a,b),b=""),d=!0):d=!0;return B(this,a,b,!1,d)};A.prototype.unshift=function(a){return B(this,a,null,!0,!1)};function B(a,b,c,d,e){var f=a._readableState;if(b===null)f.reading=!1,J(a,f);else{var g;e||(g=D(f,b));g?a.emit("error",g):f.objectMode||b&&b.length>0?(typeof b!=="string"&&!f.objectMode&&Object.getPrototypeOf(b)!==k.prototype&&(b=n(b)),d?f.endEmitted?a.emit("error",new Error("stream.unshift() after end event")):C(a,f,b,!0):f.ended?a.emit("error",new Error("stream.push() after EOF")):(f.reading=!1,f.decoder&&!c?(b=f.decoder.write(b),f.objectMode||b.length!==0?C(a,f,b,!1):O(a,f)):C(a,f,b,!1))):d||(f.reading=!1)}return E(f)}function C(a,b,c,d){b.flowing&&b.length===0&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,d?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&M(a)),O(a,b)}function D(a,b){var c;!o(b)&&typeof b!=="string"&&b!==void 0&&!a.objectMode&&(c=new TypeError("Invalid non-string/buffer chunk"));return c}function E(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||a.length===0)}A.prototype.isPaused=function(){return this._readableState.flowing===!1};A.prototype.setEncoding=function(a){v||(v=K("/").StringDecoder);this._readableState.decoder=new v(a);this._readableState.encoding=a;return this};var G=8388608;function H(a){a>=G?a=G:(a--,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a++);return a}function I(a,b){if(a<=0||b.length===0&&b.ended)return 0;if(b.objectMode)return 1;if(a!==a)if(b.flowing&&b.length)return b.buffer.head.data.length;else return b.length;a>b.highWaterMark&&(b.highWaterMark=H(a));if(a<=b.length)return a;if(!b.ended){b.needReadable=!0;return 0}return b.length}A.prototype.read=function(a){s("read",a);a=parseInt(a,10);var b=this._readableState,c=a;a!==0&&(b.emittedReadable=!1);if(a===0&&b.needReadable&&(b.length>=b.highWaterMark||b.ended)){s("read: emitReadable",b.length,b.ended);b.length===0&&b.ended?Z(this):M(this);return null}a=I(a,b);if(a===0&&b.ended){b.length===0&&Z(this);return null}var d=b.needReadable;s("need readable",d);(b.length===0||b.length-a<b.highWaterMark)&&(d=!0,s("length less than watermark",d));b.ended||b.reading?(d=!1,s("reading or ended",d)):d&&(s("do read"),b.reading=!0,b.sync=!0,b.length===0&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1,b.reading||(a=I(c,b)));a>0?d=V(a,b):d=null;d===null?(b.needReadable=!0,a=0):b.length-=a;b.length===0&&(b.ended||(b.needReadable=!0),c!==a&&b.ended&&Z(this));d!==null&&this.emit("data",d);return d};function J(a,b){if(b.ended)return;if(b.decoder){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0;M(a)}function M(a){var c=a._readableState;c.needReadable=!1;c.emittedReadable||(s("emitReadable",c.flowing),c.emittedReadable=!0,c.sync?b.nextTick(N,a):N(a))}function N(a){s("emit readable"),a.emit("readable"),U(a)}function O(a,c){c.readingMore||(c.readingMore=!0,b.nextTick(P,a,c))}function P(a,b){var c=b.length;while(!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark){s("maybeReadMore read 0");a.read(0);if(c===b.length)break;else c=b.length}b.readingMore=!1}A.prototype._read=function(a){this.emit("error",new Error("_read() is not implemented"))};A.prototype.pipe=function(a,c){var d=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=a;break;case 1:f.pipes=[f.pipes,a];break;default:f.pipes.push(a);break}f.pipesCount+=1;s("pipe count=%d opts=%j",f.pipesCount,c);c=(!c||c.end!==!1)&&a!==process.stdout&&a!==process.stderr;c=c?h:q;f.endEmitted?b.nextTick(c):d.once("end",c);a.on("unpipe",g);function g(a,b){s("onunpipe"),a===d&&(b&&b.hasUnpiped===!1&&(b.hasUnpiped=!0,k()))}function h(){s("onend"),a.end()}var i=Q(d);a.on("drain",i);var j=!1;function k(){s("cleanup"),a.removeListener("close",o),a.removeListener("finish",p),a.removeListener("drain",i),a.removeListener("error",n),a.removeListener("unpipe",g),d.removeListener("end",h),d.removeListener("end",q),d.removeListener("data",m),j=!0,f.awaitDrain&&(!a._writableState||a._writableState.needDrain)&&i()}var l=!1;d.on("data",m);function m(b){s("ondata");l=!1;b=a.write(b);!1===b&&!l&&((f.pipesCount===1&&f.pipes===a||f.pipesCount>1&&aa(f.pipes,a)!==-1)&&!j&&(s("false write response, pause",d._readableState.awaitDrain),d._readableState.awaitDrain++,l=!0),d.pause())}function n(b){s("onerror",b),q(),a.removeListener("error",n),e(a,"error")===0&&a.emit("error",b)}y(a,"error",n);function o(){a.removeListener("finish",p),q()}a.once("close",o);function p(){s("onfinish"),a.removeListener("close",o),q()}a.once("finish",p);function q(){s("unpipe"),d.unpipe(a)}a.emit("pipe",d);f.flowing||(s("pipe resume"),d.resume());return a};function Q(a){return function(){var b=a._readableState;s("pipeOnDrain",b.awaitDrain);b.awaitDrain&&b.awaitDrain--;b.awaitDrain===0&&e(a,"data")&&(b.flowing=!0,U(a))}}A.prototype.unpipe=function(a){var b=this._readableState,c={hasUnpiped:!1};if(b.pipesCount===0)return this;if(b.pipesCount===1){if(a&&a!==b.pipes)return this;a||(a=b.pipes);b.pipes=null;b.pipesCount=0;b.flowing=!1;a&&a.emit("unpipe",this,c);return this}if(!a){var d=b.pipes,e=b.pipesCount;b.pipes=null;b.pipesCount=0;b.flowing=!1;for(var f=0;f<e;f++)d[f].emit("unpipe",this,c);return this}d=aa(b.pipes,a);if(d===-1)return this;b.pipes.splice(d,1);b.pipesCount-=1;b.pipesCount===1&&(b.pipes=b.pipes[0]);a.emit("unpipe",this,c);return this};A.prototype.on=function(a,c){c=f.prototype.on.call(this,a,c);if(a==="data")this._readableState.flowing!==!1&&this.resume();else if(a==="readable"){a=this._readableState;!a.endEmitted&&!a.readableListening&&(a.readableListening=a.needReadable=!0,a.emittedReadable=!1,!a.reading?b.nextTick(R,this):a.length&&M(this))}return c};A.prototype.addListener=A.prototype.on;function R(a){s("readable nexttick read 0"),a.read(0)}A.prototype.resume=function(){var a=this._readableState;a.flowing||(s("resume"),a.flowing=!0,S(this,a));return this};function S(a,c){c.resumeScheduled||(c.resumeScheduled=!0,b.nextTick(T,a,c))}function T(a,b){b.reading||(s("resume read 0"),a.read(0)),b.resumeScheduled=!1,b.awaitDrain=0,a.emit("resume"),U(a),b.flowing&&!b.reading&&a.read(0)}A.prototype.pause=function(){s("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(s("pause"),this._readableState.flowing=!1,this.emit("pause"));return this};function U(a){var b=a._readableState;s("flow",b.flowing);while(b.flowing&&a.read()!==null);}A.prototype.wrap=function(a){var b=this,c=this._readableState,d=!1;a.on("end",function(){s("wrapped end");if(c.decoder&&!c.ended){var a=c.decoder.end();a&&a.length&&b.push(a)}b.push(null)});a.on("data",function(e){s("wrapped data");c.decoder&&(e=c.decoder.write(e));if(c.objectMode&&(e===null||e===void 0))return;else if(!c.objectMode&&(!e||!e.length))return;e=b.push(e);e||(d=!0,a.pause())});for(var e in a)this[e]===void 0&&typeof a[e]==="function"&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));for(e=0;e<w.length;e++)a.on(w[e],this.emit.bind(this,w[e]));this._read=function(b){s("wrapped _read",b),d&&(d=!1,a.resume())};return this};Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});A._fromList=V;function V(a,b){if(b.length===0)return null;var c;b.objectMode?c=b.buffer.shift():!a||a>=b.length?(b.decoder?c=b.buffer.join(""):b.buffer.length===1?c=b.buffer.head.data:c=b.buffer.concat(b.length),b.buffer.clear()):c=W(a,b.buffer,b.decoder);return c}function W(a,b,c){var d;a<b.head.data.length?(d=b.head.data.slice(0,a),b.head.data=b.head.data.slice(a)):a===b.head.data.length?d=b.shift():d=c?X(a,b):Y(a,b);return d}function X(a,b){var c=b.head,d=1,e=c.data;a-=e.length;while(c=c.next){var f=c.data,g=a>f.length?f.length:a;g===f.length?e+=f:e+=f.slice(0,a);a-=g;if(a===0){g===f.length?(++d,c.next?b.head=c.next:b.head=b.tail=null):(b.head=c,c.data=f.slice(g));break}++d}b.length-=d;return e}function Y(a,b){var c=k.allocUnsafe(a),d=b.head,e=1;d.data.copy(c);a-=d.data.length;while(d=d.next){var f=d.data,g=a>f.length?f.length:a;f.copy(c,c.length-a,0,g);a-=g;if(a===0){g===f.length?(++e,d.next?b.head=d.next:b.head=b.tail=null):(b.head=d,d.data=f.slice(g));break}++e}b.length-=e;return c}function Z(a){var c=a._readableState;if(c.length>0)throw new Error('"endReadable()" called on non-empty stream');c.endEmitted||(c.ended=!0,b.nextTick($,c,a))}function $(a,b){!a.endEmitted&&a.length===0&&(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function aa(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}}var N=!1;function O(){N||(N=!0,M());return L.exports}c={};var P={exports:c};function Q(){P.exports=d;var a=F(),b=i();b.inherits=j();b.inherits(d,a);function c(a,b){var c=this._transformState;c.transforming=!1;var d=c.writecb;if(!d)return this.emit("error",new Error("write callback called multiple times"));c.writechunk=null;c.writecb=null;b!=null&&this.push(b);d(a);c=this._readableState;c.reading=!1;(c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}function d(b){if(!(this instanceof d))return new d(b);a.call(this,b);this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;b&&(typeof b.transform==="function"&&(this._transform=b.transform),typeof b.flush==="function"&&(this._flush=b.flush));this.on("prefinish",e)}function e(){var a=this;typeof this._flush==="function"?this._flush(function(b,c){f(a,b,c)}):f(this,null,null)}d.prototype.push=function(b,c){this._transformState.needTransform=!1;return a.prototype.push.call(this,b,c)};d.prototype._transform=function(a,b,c){throw new Error("_transform() is not implemented")};d.prototype._write=function(a,b,c){var d=this._transformState;d.writecb=c;d.writechunk=a;d.writeencoding=b;if(!d.transforming){c=this._readableState;(d.needTransform||c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}};d.prototype._read=function(a){a=this._transformState;a.writechunk!==null&&a.writecb&&!a.transforming?(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform)):a.needTransform=!0};d.prototype._destroy=function(b,c){var d=this;a.prototype._destroy.call(this,b,function(a){c(a),d.emit("close")})};function f(a,b,c){if(b)return a.emit("error",b);c!=null&&a.push(c);if(a._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(a._transformState.transforming)throw new Error("Calling transform done when still transforming");return a.push(null)}}var R=!1;function S(){R||(R=!0,Q());return P.exports}b={};var T={exports:b};function U(){T.exports=c;var a=S(),b=i();b.inherits=j();b.inherits(c,a);function c(b){if(!(this instanceof c))return new c(b);a.call(this,b)}c.prototype._transform=function(a,b,c){c(null,a)}}var V=!1;function W(){V||(V=!0,U());return T.exports}d={};var X={exports:d};function Y(){var a={};process.env.READABLE_STREAM==="disable"&&a?(X.exports=a,d=X.exports=a.Readable,d.Readable=a.Readable,d.Writable=a.Writable,d.Duplex=a.Duplex,d.Transform=a.Transform,d.PassThrough=a.PassThrough,d.Stream=a):(d=X.exports=O(),d.Stream=a||d,d.Readable=d,d.Writable=B(),d.Duplex=F(),d.Transform=S(),d.PassThrough=W())}var Z=!1;function $(){Z||(Z=!0,Y());return X.exports}function f(a){switch(a){case void 0:return $()}}e.exports=f}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("set-immediate-shim-1.0.1",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){g.exports=typeof setImmediate==="function"?setImmediate:function(){var a=[].slice.apply(arguments);a.splice(1,0,0);setTimeout.apply(null,a)}}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/cr2jmG-CdKo/
 */
__d("jszip-3.2.0",["readable-stream-2.3.6","set-immediate-shim-1.0.1","lie-3.3.0","pako-1.0.8"],(function(a,b,c,d,e,f){"use strict";var g=b("readable-stream-2.3.6"),h=b("set-immediate-shim-1.0.1"),i=b("lie-3.3.0"),j=b("pako-1.0.8"),k={},l={exports:k};function m(){k.base64=!0;k.array=!0;k.string=!0;k.arraybuffer=typeof ArrayBuffer!=="undefined"&&typeof Uint8Array!=="undefined";k.nodebuffer=typeof Buffer!=="undefined";k.uint8array=typeof Uint8Array!=="undefined";if(typeof ArrayBuffer==="undefined")k.blob=!1;else{var a=new ArrayBuffer(0);try{k.blob=new Blob([a],{type:"application/zip"}).size===0}catch(c){try{var b=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;b=new b();b.append(a);k.blob=b.getBlob("application/zip").size===0}catch(a){k.blob=!1}}}try{k.nodestream=!!g().Readable}catch(a){k.nodestream=!1}}var n=!1;function o(){n||(n=!0,m());return l.exports}var p={},q={exports:p};function r(){var a=E(),b=o(),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";p.encode=function(b){var d=[],e,f,g,h,i=0,j=b.length,k=j,l=a.getTypeOf(b)!=="string";while(i<b.length)k=j-i,!l?(e=b.charCodeAt(i++),f=i<j?b.charCodeAt(i++):0,g=i<j?b.charCodeAt(i++):0):(e=b[i++],f=i<j?b[i++]:0,g=i<j?b[i++]:0),h=e>>2,e=(e&3)<<4|f>>4,f=k>1?(f&15)<<2|g>>6:64,g=k>2?g&63:64,d.push(c.charAt(h)+c.charAt(e)+c.charAt(f)+c.charAt(g));return d.join("")};p.decode=function(a){var d,e,f,g,h=0,i=0,j="data:";if(a.substr(0,j.length)===j)throw new Error("Invalid base64 input, it looks like a data url.");a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");j=a.length*3/4;a.charAt(a.length-1)===c.charAt(64)&&j--;a.charAt(a.length-2)===c.charAt(64)&&j--;if(j%1!==0)throw new Error("Invalid base64 input, bad content length.");var k;b.uint8array?k=new Uint8Array(j|0):k=new Array(j|0);while(h<a.length)j=c.indexOf(a.charAt(h++)),e=c.indexOf(a.charAt(h++)),f=c.indexOf(a.charAt(h++)),g=c.indexOf(a.charAt(h++)),j=j<<2|e>>4,e=(e&15)<<4|f>>2,d=(f&3)<<6|g,k[i++]=j,f!==64&&(k[i++]=e),g!==64&&(k[i++]=d);return k}}var s=!1;function t(){s||(s=!0,r());return q.exports}c={};var u={exports:c};function v(){u.exports={isNode:typeof Buffer!=="undefined",newBufferFrom:function(a,b){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,b);else{if(typeof a==="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,b)}},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);else{a=new Buffer(a);a.fill(0);return a}},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on==="function"&&typeof a.pause==="function"&&typeof a.resume==="function"}}}var w=!1;function x(){w||(w=!0,v());return u.exports}d={};var y={exports:d};function z(){var a;typeof Promise!=="undefined"?a=Promise:a=i();y.exports={Promise:a}}var A=!1;function B(){A||(A=!0,z());return y.exports}var C={},aa={exports:C};function ba(){var a=o(),b=t(),c=x(),d=h(),e=B();function f(b){var c;a.uint8array?c=new Uint8Array(b.length):c=new Array(b.length);return i(b,c)}C.newBlob=function(a,b){C.checkSupport("blob");try{return new Blob([a],{type:b})}catch(d){try{var c=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;c=new c();c.append(a);return c.getBlob(b)}catch(a){throw new Error("Bug : can't construct the Blob.")}}};function g(a){return a}function i(a,b){for(var c=0;c<a.length;++c)b[c]=a.charCodeAt(c)&255;return b}var j={stringifyByChunk:function(a,b,c){var d=[],e=0,f=a.length;if(f<=c)return String.fromCharCode.apply(null,a);while(e<f)b==="array"||b==="nodebuffer"?d.push(String.fromCharCode.apply(null,a.slice(e,Math.min(e+c,f)))):d.push(String.fromCharCode.apply(null,a.subarray(e,Math.min(e+c,f)))),e+=c;return d.join("")},stringifyByChar:function(a){var b="";for(var c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(a){return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch(a){return!1}}()}};function k(a){var b=65536,c=C.getTypeOf(a),d=!0;c==="uint8array"?d=j.applyCanBeUsed.uint8array:c==="nodebuffer"&&(d=j.applyCanBeUsed.nodebuffer);if(d)while(b>1)try{return j.stringifyByChunk(a,c,b)}catch(a){b=Math.floor(b/2)}return j.stringifyByChar(a)}C.applyFromCharCode=k;function l(a,b){for(var c=0;c<a.length;c++)b[c]=a[c];return b}var m={};m.string={string:g,array:function(a){return i(a,new Array(a.length))},arraybuffer:function(a){return m.string.uint8array(a).buffer},uint8array:function(a){return i(a,new Uint8Array(a.length))},nodebuffer:function(a){return i(a,c.allocBuffer(a.length))}};m.array={string:k,array:g,arraybuffer:function(a){return new Uint8Array(a).buffer},uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return c.newBufferFrom(a)}};m.arraybuffer={string:function(a){return k(new Uint8Array(a))},array:function(a){return l(new Uint8Array(a),new Array(a.byteLength))},arraybuffer:g,uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return c.newBufferFrom(new Uint8Array(a))}};m.uint8array={string:k,array:function(a){return l(a,new Array(a.length))},arraybuffer:function(a){return a.buffer},uint8array:g,nodebuffer:function(a){return c.newBufferFrom(a)}};m.nodebuffer={string:k,array:function(a){return l(a,new Array(a.length))},arraybuffer:function(a){return m.nodebuffer.uint8array(a).buffer},uint8array:function(a){return l(a,new Uint8Array(a.length))},nodebuffer:g};C.transformTo=function(a,b){b||(b="");if(!a)return b;C.checkSupport(a);var c=C.getTypeOf(b);c=m[c][a](b);return c};C.getTypeOf=function(b){if(typeof b==="string")return"string";if(Object.prototype.toString.call(b)==="[object Array]")return"array";if(a.nodebuffer&&c.isBuffer(b))return"nodebuffer";if(a.uint8array&&b instanceof Uint8Array)return"uint8array";if(a.arraybuffer&&b instanceof ArrayBuffer)return"arraybuffer"};C.checkSupport=function(b){var c=a[b.toLowerCase()];if(!c)throw new Error(b+" is not supported by this platform")};C.MAX_VALUE_16BITS=65535;C.MAX_VALUE_32BITS=-1;C.pretty=function(a){var b="",c,d;for(d=0;d<(a||"").length;d++)c=a.charCodeAt(d),b+="\\x"+(c<16?"0":"")+c.toString(16).toUpperCase();return b};C.delay=function(a,b,c){d(function(){a.apply(c||null,b||[])})};C.inherits=function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c()};C.extend=function(){var a={},b,c;for(b=0;b<arguments.length;b++)for(c in arguments[b])arguments[b].hasOwnProperty(c)&&typeof a[c]==="undefined"&&(a[c]=arguments[b][c]);return a};C.prepareContent=function(c,d,g,h,i){d=e.Promise.resolve(d).then(function(b){var c=a.blob&&(b instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(b))!==-1);if(c&&typeof FileReader!=="undefined")return new e.Promise(function(a,c){var d=new FileReader();d.onload=function(b){a(b.target.result)};d.onerror=function(a){c(a.target.error)};d.readAsArrayBuffer(b)});else return b});return d.then(function(a){var d=C.getTypeOf(a);if(!d)return e.Promise.reject(new Error("Can't read the data of '"+c+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"));d==="arraybuffer"?a=C.transformTo("uint8array",a):d==="string"&&(i?a=b.decode(a):g&&(h!==!0&&(a=f(a))));return a})}}var D=!1;function E(){D||(D=!0,ba());return aa.exports}f={};var F={exports:f};function ca(){function a(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){if(this.isFinished)return!1;this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp());return!0},on:function(a,b){this._listeners[a].push(b);return this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,b){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,b)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo;this.mergeStreamInfo();this.previous=a;var b=this;a.on("data",function(a){b.processChunk(a)});a.on("end",function(){b.end()});a.on("error",function(a){b.error(a)});return this},pause:function(){if(this.isPaused||this.isFinished)return!1;this.isPaused=!0;this.previous&&this.previous.pause();return!0},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var a=!1;this.generatedError&&(this.error(this.generatedError),a=!0);this.previous&&this.previous.resume();return!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,b){this.extraStreamInfo[a]=b;this.mergeStreamInfo();return this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo){if(!this.extraStreamInfo.hasOwnProperty(a))continue;this.streamInfo[a]=this.extraStreamInfo[a]}},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0;this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;if(this.previous)return this.previous+" -> "+a;else return a}};F.exports=a}var G=!1;function H(){G||(G=!0,ca());return F.exports}var I={},da={exports:I};function ea(){var a=E(),b=o(),c=x(),d=H(),e=new Array(256);for(var f=0;f<256;f++)e[f]=f>=252?6:f>=248?5:f>=240?4:f>=224?3:f>=192?2:1;e[254]=e[254]=1;var g=function(c){var d,e,f,g,a,h=c.length,i=0;for(g=0;g<h;g++)e=c.charCodeAt(g),(e&64512)===55296&&g+1<h&&(f=c.charCodeAt(g+1),(f&64512)===56320&&(e=65536+(e-55296<<10)+(f-56320),g++)),i+=e<128?1:e<2048?2:e<65536?3:4;b.uint8array?d=new Uint8Array(i):d=new Array(i);for(a=0,g=0;a<i;g++)e=c.charCodeAt(g),(e&64512)===55296&&g+1<h&&(f=c.charCodeAt(g+1),(f&64512)===56320&&(e=65536+(e-55296<<10)+(f-56320),g++)),e<128?d[a++]=e:e<2048?(d[a++]=192|e>>>6,d[a++]=128|e&63):e<65536?(d[a++]=224|e>>>12,d[a++]=128|e>>>6&63,d[a++]=128|e&63):(d[a++]=240|e>>>18,d[a++]=128|e>>>12&63,d[a++]=128|e>>>6&63,d[a++]=128|e&63);return d},h=function(a,b){var c;b=b||a.length;b>a.length&&(b=a.length);c=b-1;while(c>=0&&(a[c]&192)===128)c--;if(c<0)return b;return c===0?b:c+e[a[c]]>b?c:b},i=function(c){var b,d,f,g,h=c.length,i=new Array(h*2);for(d=0,b=0;b<h;){f=c[b++];if(f<128){i[d++]=f;continue}g=e[f];if(g>4){i[d++]=65533;b+=g-1;continue}f&=g===2?31:g===3?15:7;while(g>1&&b<h)f=f<<6|c[b++]&63,g--;if(g>1){i[d++]=65533;continue}f<65536?i[d++]=f:(f-=65536,i[d++]=55296|f>>10&1023,i[d++]=56320|f&1023)}i.length!==d&&(i.subarray?i=i.subarray(0,d):i.length=d);return a.applyFromCharCode(i)};I.utf8encode=function(a){return b.nodebuffer?c.newBufferFrom(a,"utf-8"):g(a)};I.utf8decode=function(c){if(b.nodebuffer)return a.transformTo("nodebuffer",c).toString("utf-8");c=a.transformTo(b.uint8array?"uint8array":"array",c);return i(c)};function j(){d.call(this,"utf-8 decode"),this.leftOver=null}a.inherits(j,d);j.prototype.processChunk=function(c){var d=a.transformTo(b.uint8array?"uint8array":"array",c.data);if(this.leftOver&&this.leftOver.length){if(b.uint8array){var e=d;d=new Uint8Array(e.length+this.leftOver.length);d.set(this.leftOver,0);d.set(e,this.leftOver.length)}else d=this.leftOver.concat(d);this.leftOver=null}e=h(d);var f=d;e!==d.length&&(b.uint8array?(f=d.subarray(0,e),this.leftOver=d.subarray(e,d.length)):(f=d.slice(0,e),this.leftOver=d.slice(e,d.length)));this.push({data:I.utf8decode(f),meta:c.meta})};j.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:I.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)};I.Utf8DecodeWorker=j;function k(){d.call(this,"utf-8 encode")}a.inherits(k,d);k.prototype.processChunk=function(a){this.push({data:I.utf8encode(a.data),meta:a.meta})};I.Utf8EncodeWorker=k}var J=!1;function K(){J||(J=!0,ea());return da.exports}b={};var L={exports:b};function fa(){var a=H(),b=E();function c(b){a.call(this,"ConvertWorker to "+b),this.destType=b}b.inherits(c,a);c.prototype.processChunk=function(a){this.push({data:b.transformTo(this.destType,a.data),meta:a.meta})};L.exports=c}var M=!1;function ga(){M||(M=!0,fa());return L.exports}c={};var N={exports:c};function ha(){var a=g().Readable,b=E();b.inherits(c,a);function c(b,c,d){a.call(this,c);this._helper=b;var e=this;b.on("data",function(a,b){e.push(a)||e._helper.pause(),d&&d(b)}).on("error",function(a){e.emit("error",a)}).on("end",function(){e.push(null)})}c.prototype._read=function(){this._helper.resume()};N.exports=c}var O=!1;function ia(){O||(O=!0,ha());return N.exports}d={};var P={exports:d};function ja(){var a=E(),b=ga(),c=H(),d=t(),e=o(),f=B(),g=null;if(e.nodestream)try{g=ia()}catch(a){}function h(b,c,e){switch(b){case"blob":return a.newBlob(a.transformTo("arraybuffer",c),e);case"base64":return d.encode(c);default:return a.transformTo(b,c)}}function i(a,b){var c,d=0,e=null,f=0;for(c=0;c<b.length;c++)f+=b[c].length;switch(a){case"string":return b.join("");case"array":return Array.prototype.concat.apply([],b);case"uint8array":e=new Uint8Array(f);for(c=0;c<b.length;c++)e.set(b[c],d),d+=b[c].length;return e;case"nodebuffer":return Buffer.concat(b);default:throw new Error("concat : unsupported type '"+a+"'")}}function j(a,b){return new f.Promise(function(c,d){var e=[],f=a._internalType,g=a._outputType,j=a._mimeType;a.on("data",function(a,c){e.push(a),b&&b(c)}).on("error",function(a){e=[],d(a)}).on("end",function(){try{var a=h(g,i(f,e),j);c(a)}catch(a){d(a)}e=[]}).resume()})}function k(d,e,f){var g=e;switch(e){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string";break}try{this._internalType=g,this._outputType=e,this._mimeType=f,a.checkSupport(g),this._worker=d.pipe(new b(g)),d.lock()}catch(a){this._worker=new c("error"),this._worker.error(a)}}k.prototype={accumulate:function(a){return j(this,a)},on:function(b,c){var d=this;b==="data"?this._worker.on(b,function(a){c.call(d,a.data,a.meta)}):this._worker.on(b,function(){a.delay(c,arguments,d)});return this},resume:function(){a.delay(this._worker.resume,[],this._worker);return this},pause:function(){this._worker.pause();return this},toNodejsStream:function(b){a.checkSupport("nodestream");if(this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},b)}};P.exports=k}var Q=!1;function R(){Q||(Q=!0,ja());return P.exports}var S={},ka={exports:S};function la(){S.base64=!1,S.binary=!1,S.dir=!1,S.createFolders=!0,S.date=null,S.compression=null,S.compressionOptions=null,S.comment=null,S.unixPermissions=null,S.dosPermissions=null}var T=!1;function U(){T||(T=!0,la());return ka.exports}f={};var V={exports:f};function ma(){var a=E(),b=H(),c=16*1024;function d(c){b.call(this,"DataWorker");var d=this;this.dataIsReady=!1;this.index=0;this.max=0;this.data=null;this.type="";this._tickScheduled=!1;c.then(function(b){d.dataIsReady=!0,d.data=b,d.max=b&&b.length||0,d.type=a.getTypeOf(b),d.isPaused||d._tickAndRepeat()},function(a){d.error(a)})}a.inherits(d,b);d.prototype.cleanUp=function(){b.prototype.cleanUp.call(this),this.data=null};d.prototype.resume=function(){if(!b.prototype.resume.call(this))return!1;!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this));return!0};d.prototype._tickAndRepeat=function(){this._tickScheduled=!1;if(this.isPaused||this.isFinished)return;this._tick();this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0)};d.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=c,b=null;a=Math.min(this.max,this.index+a);if(this.index>=this.max)return this.end();else{switch(this.type){case"string":b=this.data.substring(this.index,a);break;case"uint8array":b=this.data.subarray(this.index,a);break;case"array":case"nodebuffer":b=this.data.slice(this.index,a);break}this.index=a;return this.push({data:b,meta:{percent:this.max?this.index/this.max*100:0}})}};V.exports=d}var na=!1;function oa(){na||(na=!0,ma());return V.exports}b={};var pa={exports:b};function qa(){var a=E(),b=H();function c(a){b.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}a.inherits(c,b);c.prototype.processChunk=function(a){if(a){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+a.data.length}b.prototype.processChunk.call(this,a)};pa.exports=c}var ra=!1;function sa(){ra||(ra=!0,qa());return pa.exports}c={};var ta={exports:c};function ua(){var a=E();function b(){var a,b=[];for(var c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=a&1?3988292384^a>>>1:a>>>1;b[c]=a}return b}var c=b();function d(a,b,d,e){var f=c;d=e+d;a=a^-1;for(e=e;e<d;e++)a=a>>>8^f[(a^b[e])&255];return a^-1}function e(a,b,d,e){var f=c;d=e+d;a=a^-1;for(e=e;e<d;e++)a=a>>>8^f[(a^b.charCodeAt(e))&255];return a^-1}ta.exports=function(b,c){if(typeof b==="undefined"||!b.length)return 0;var f=a.getTypeOf(b)!=="string";if(f)return d(c|0,b,b.length,0);else return e(c|0,b,b.length,0)}}var va=!1;function W(){va||(va=!0,ua());return ta.exports}d={};var wa={exports:d};function xa(){var a=H(),b=W(),c=E();function d(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}c.inherits(d,a);d.prototype.processChunk=function(a){this.streamInfo.crc32=b(a.data,this.streamInfo.crc32||0),this.push(a)};wa.exports=d}var ya=!1;function za(){ya||(ya=!0,xa());return wa.exports}f={};var Aa={exports:f};function Ba(){var a=B(),b=oa(),c=sa(),d=za(),c=sa();function e(a,b,c,d,e){this.compressedSize=a,this.uncompressedSize=b,this.crc32=c,this.compression=d,this.compressedContent=e}e.prototype={getContentWorker:function(){var d=new b(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),e=this;d.on("end",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")});return d},getCompressedWorker:function(){return new b(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}};e.createWorkerFrom=function(a,b,e){return a.pipe(new d()).pipe(new c("uncompressedSize")).pipe(b.compressWorker(e)).pipe(new c("compressedSize")).withStreamInfo("compression",b)};Aa.exports=e}var Ca=!1;function X(){Ca||(Ca=!0,Ba());return Aa.exports}b={};var Da={exports:b};function Ea(){var a=R(),b=oa(),c=K(),d=X(),e=H(),f=function(a,b,c){this.name=a,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=b,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}};f.prototype={internalStream:function(b){var d=null,f="string";try{if(!b)throw new Error("No output type specified.");f=b.toLowerCase();b=f==="string"||f==="text";(f==="binarystring"||f==="text")&&(f="string");d=this._decompressWorker();var g=!this._dataBinary;g&&!b&&(d=d.pipe(new c.Utf8EncodeWorker()));!g&&b&&(d=d.pipe(new c.Utf8DecodeWorker()))}catch(a){d=new e("error"),d.error(a)}return new a(d,f,"")},async:function(a,b){return this.internalStream(a).accumulate(b)},nodeStream:function(a,b){return this.internalStream(a||"nodebuffer").toNodejsStream(b)},_compressWorker:function(a,b){if(this._data instanceof d&&this._data.compression.magic===a.magic)return this._data.getCompressedWorker();else{var e=this._decompressWorker();this._dataBinary||(e=e.pipe(new c.Utf8EncodeWorker()));return d.createWorkerFrom(e,a,b)}},_decompressWorker:function(){if(this._data instanceof d)return this._data.getContentWorker();else if(this._data instanceof e)return this._data;else return new b(this._data)}};var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")};for(var i=0;i<g.length;i++)f.prototype[g[i]]=h;Da.exports=f}var Fa=!1;function Ga(){Fa||(Fa=!0,Ea());return Da.exports}var Y={},Ha={exports:Y};function Ia(){var a=typeof Uint8Array!=="undefined"&&typeof Uint16Array!=="undefined"&&typeof Uint32Array!=="undefined",b=j(),c=E(),d=H(),e=a?"uint8array":"array";Y.magic="\b\0";function f(a,b){d.call(this,"FlateWorker/"+a),this._pako=null,this._pakoAction=a,this._pakoOptions=b,this.meta={}}c.inherits(f,d);f.prototype.processChunk=function(a){this.meta=a.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(e,a.data),!1)};f.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)};f.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null};f.prototype._createPako=function(){this._pako=new b[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var a=this;this._pako.onData=function(b){a.push({data:b,meta:a.meta})}};Y.compressWorker=function(a){return new f("Deflate",a)};Y.uncompressWorker=function(){return new f("Inflate",{})}}var Ja=!1;function Ka(){Ja||(Ja=!0,Ia());return Ha.exports}var Z={},La={exports:Z};function Ma(){var a=H();Z.STORE={magic:"\0\0",compressWorker:function(b){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}};Z.DEFLATE=Ka()}var Na=!1;function Oa(){Na||(Na=!0,Ma());return La.exports}var $={},Pa={exports:$};function Qa(){$.LOCAL_FILE_HEADER="PK\x03\x04",$.CENTRAL_FILE_HEADER="PK\x01\x02",$.CENTRAL_DIRECTORY_END="PK\x05\x06",$.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",$.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",$.DATA_DESCRIPTOR="PK\x07\b"}var Ra=!1;function Sa(){Ra||(Ra=!0,Qa());return Pa.exports}c={};var Ta={exports:c};function Ua(){var a=E(),b=H(),c=K(),d=W(),e=Sa(),f=function(a,b){var c="",d;for(d=0;d<b;d++)c+=String.fromCharCode(a&255),a=a>>>8;return c},g=function(a,b){var c=a;a||(c=b?16893:33204);return(c&65535)<<16},h=function(a,b){return(a||0)&63},i=function(b,i,j,k,l,m){var n=b.file,o=b.compression,p=m!==c.utf8encode,q=a.transformTo("string",m(n.name)),r=a.transformTo("string",c.utf8encode(n.name)),s=n.comment;m=a.transformTo("string",m(s));var t=a.transformTo("string",c.utf8encode(s)),u=r.length!==n.name.length;s=t.length!==s.length;var v="",w="",x="",y=n.dir,z=n.date,A={crc32:0,compressedSize:0,uncompressedSize:0};(!i||j)&&(A.crc32=b.crc32,A.compressedSize=b.compressedSize,A.uncompressedSize=b.uncompressedSize);j=0;i&&(j|=8);!p&&(u||s)&&(j|=2048);b=0;i=0;y&&(b|=16);l==="UNIX"?(i=798,b|=g(n.unixPermissions,y)):(i=20,b|=h(n.dosPermissions));p=z.getUTCHours();p=p<<6;p=p|z.getUTCMinutes();p=p<<5;p=p|z.getUTCSeconds()/2;l=z.getUTCFullYear()-1980;l=l<<4;l=l|z.getUTCMonth()+1;l=l<<5;l=l|z.getUTCDate();u&&(w=f(1,1)+f(d(q),4)+r,v+="up"+f(w.length,2)+w);s&&(x=f(1,1)+f(d(m),4)+t,v+="uc"+f(x.length,2)+x);y="";y+="\n\0";y+=f(j,2);y+=o.magic;y+=f(p,2);y+=f(l,2);y+=f(A.crc32,4);y+=f(A.compressedSize,4);y+=f(A.uncompressedSize,4);y+=f(q.length,2);y+=f(v.length,2);n=e.LOCAL_FILE_HEADER+y+q+v;z=e.CENTRAL_FILE_HEADER+f(i,2)+y+f(m.length,2)+"\0\0\0\0"+f(b,4)+f(k,4)+q+v+m;return{fileRecord:n,dirRecord:z}},j=function(b,c,d,g,h){h=a.transformTo("string",h(g));g=e.CENTRAL_DIRECTORY_END+"\0\0\0\0"+f(b,2)+f(b,2)+f(c,4)+f(d,4)+f(h.length,2)+h;return g},k=function(a){a=e.DATA_DESCRIPTOR+f(a.crc32,4)+f(a.compressedSize,4)+f(a.uncompressedSize,4);return a};function l(a,c,d,e){b.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=c,this.zipPlatform=d,this.encodeFileName=e,this.streamFiles=a,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(l,b);l.prototype.push=function(a){var c=a.meta.percent||0,d=this.entriesCount,e=this._sources.length;this.accumulate?this.contentBuffer.push(a):(this.bytesWritten+=a.data.length,b.prototype.push.call(this,{data:a.data,meta:{currentFile:this.currentFile,percent:d?(c+100*(d-e-1))/d:100}}))};l.prototype.openedSource=function(a){this.currentSourceOffset=this.bytesWritten;this.currentFile=a.file.name;var b=this.streamFiles&&!a.file.dir;if(b){a=i(a,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:a.fileRecord,meta:{percent:0}})}else this.accumulate=!0};l.prototype.closedSource=function(a){this.accumulate=!1;var b=this.streamFiles&&!a.file.dir,c=i(a,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.dirRecords.push(c.dirRecord);if(b)this.push({data:k(a),meta:{percent:100}});else{this.push({data:c.fileRecord,meta:{percent:0}});while(this.contentBuffer.length)this.push(this.contentBuffer.shift())}this.currentFile=null};l.prototype.flush=function(){var a=this.bytesWritten;for(var b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});b=this.bytesWritten-a;b=j(this.dirRecords.length,b,a,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})};l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()};l.prototype.registerPrevious=function(a){this._sources.push(a);var b=this;a.on("data",function(a){b.processChunk(a)});a.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()});a.on("error",function(a){b.error(a)});return this};l.prototype.resume=function(){if(!b.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length){this.prepareNextSource();return!0}if(!this.previous&&!this._sources.length&&!this.generatedError){this.end();return!0}};l.prototype.error=function(a){var c=this._sources;if(!b.prototype.error.call(this,a))return!1;for(var d=0;d<c.length;d++)try{c[d].error(a)}catch(a){}return!0};l.prototype.lock=function(){b.prototype.lock.call(this);var a=this._sources;for(var c=0;c<a.length;c++)a[c].lock()};Ta.exports=l}var Va=!1;function Wa(){Va||(Va=!0,Ua());return Ta.exports}var Xa={},Ya={exports:Xa};function Za(){var a=Oa(),b=Wa(),c=function(b,c){b=b||c;c=a[b];if(!c)throw new Error(b+" is not a valid compression method !");return c};Xa.generateWorker=function(a,d,e){var f=new b(d.streamFiles,e,d.platform,d.encodeFileName),g=0;try{a.forEach(function(a,b){g++;var e=c(b.options.compression,d.compression),h=b.options.compressionOptions||d.compressionOptions||{},i=b.dir,j=b.date;b._compressWorker(e,h).withStreamInfo("file",{name:a,dir:i,date:j,comment:b.comment||"",unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions}).pipe(f)}),f.entriesCount=g}catch(a){f.error(a)}return f}}var $a=!1;function ab(){$a||($a=!0,Za());return Ya.exports}d={};var bb={exports:d};function cb(){var a=E(),b=H();function c(a,c){b.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(c)}a.inherits(c,b);c.prototype._bindStream=function(a){var b=this;this._stream=a;a.pause();a.on("data",function(a){b.push({data:a,meta:{percent:0}})}).on("error",function(a){b.isPaused?this.generatedError=a:b.error(a)}).on("end",function(){b.isPaused?b._upstreamEnded=!0:b.end()})};c.prototype.pause=function(){if(!b.prototype.pause.call(this))return!1;this._stream.pause();return!0};c.prototype.resume=function(){if(!b.prototype.resume.call(this))return!1;this._upstreamEnded?this.end():this._stream.resume();return!0};bb.exports=c}var db=!1;function eb(){db||(db=!0,cb());return bb.exports}f={};var fb={exports:f};function gb(){var a=K(),b=E(),c=H(),d=R(),e=U(),f=X(),g=Ga(),h=ab(),i=x(),j=eb(),k=function(a,d,h){var k=b.getTypeOf(d),o,p=b.extend(h||{},e);p.date=p.date||new Date();p.compression!==null&&(p.compression=p.compression.toUpperCase());typeof p.unixPermissions==="string"&&(p.unixPermissions=parseInt(p.unixPermissions,8));p.unixPermissions&&p.unixPermissions&16384&&(p.dir=!0);p.dosPermissions&&p.dosPermissions&16&&(p.dir=!0);p.dir&&(a=m(a));p.createFolders&&(o=l(a))&&n.call(this,o,!0);var q=k==="string"&&p.binary===!1&&p.base64===!1;(!h||typeof h.binary==="undefined")&&(p.binary=!q);h=d instanceof f&&d.uncompressedSize===0;(h||p.dir||!d||d.length===0)&&(p.base64=!1,p.binary=!0,d="",p.compression="STORE",k="string");d instanceof f||d instanceof c?q=d:i.isNode&&i.isStream(d)?q=new j(a,d):q=b.prepareContent(a,d,p.binary,p.optimizedBinaryString,p.base64);h=new g(a,q,p);this.files[a]=h},l=function(a){a.slice(-1)==="/"&&(a=a.substring(0,a.length-1));var b=a.lastIndexOf("/");return b>0?a.substring(0,b):""},m=function(a){a.slice(-1)!=="/"&&(a+="/");return a},n=function(a,b){b=typeof b!=="undefined"?b:e.createFolders;a=m(a);this.files[a]||k.call(this,a,null,{dir:!0,createFolders:b});return this.files[a]};function o(a){return Object.prototype.toString.call(a)==="[object RegExp]"}var p={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(a){var b,c,d;for(b in this.files){if(!this.files.hasOwnProperty(b))continue;d=this.files[b];c=b.slice(this.root.length,b.length);c&&b.slice(0,this.root.length)===this.root&&a(c,d)}},filter:function(a){var b=[];this.forEach(function(c,d){a(c,d)&&b.push(d)});return b},file:function(a,b,c){if(arguments.length===1)if(o(a)){var d=a;return this.filter(function(a,b){return!b.dir&&d.test(a)})}else{var e=this.files[this.root+a];if(e&&!e.dir)return e;else return null}else a=this.root+a,k.call(this,a,b,c);return this},folder:function(a){if(!a)return this;if(o(a))return this.filter(function(b,c){return c.dir&&a.test(b)});var b=this.root+a;b=n.call(this,b);var c=this.clone();c.root=b.name;return c},remove:function(a){a=this.root+a;var b=this.files[a];b||(a.slice(-1)!=="/"&&(a+="/"),b=this.files[a]);if(b&&!b.dir)delete this.files[a];else{b=this.filter(function(c,b){return b.name.slice(0,a.length)===a});for(var c=0;c<b.length;c++)delete this.files[b[c].name]}return this},generate:function(a){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var f,g={};try{g=b.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode});g.type=g.type.toLowerCase();g.compression=g.compression.toUpperCase();g.type==="binarystring"&&(g.type="string");if(!g.type)throw new Error("No output type specified.");b.checkSupport(g.type);(g.platform==="darwin"||g.platform==="freebsd"||g.platform==="linux"||g.platform==="sunos")&&(g.platform="UNIX");g.platform==="win32"&&(g.platform="DOS");e=g.comment||this.comment||"";f=h.generateWorker(this,g,e)}catch(a){f=new c("error"),f.error(a)}return new d(f,g.type||"string",g.mimeType)},generateAsync:function(a,b){return this.generateInternalStream(a).accumulate(b)},generateNodeStream:function(a,b){a=a||{};a.type||(a.type="nodebuffer");return this.generateInternalStream(a).toNodejsStream(b)}};fb.exports=p}var hb=!1;function ib(){hb||(hb=!0,gb());return fb.exports}b={};var jb={exports:b};function kb(){var a=E();function b(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}b.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(a){},readInt:function(a){var b=0,c;this.checkOffset(a);for(c=this.index+a-1;c>=this.index;c--)b=(b<<8)+this.byteAt(c);this.index+=a;return b},readString:function(b){return a.transformTo("string",this.readData(b))},readData:function(a){},lastIndexOfSignature:function(a){},readAndCheckSignature:function(a){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(a&31)<<1))}};jb.exports=b}var lb=!1;function mb(){lb||(lb=!0,kb());return jb.exports}c={};var nb={exports:c};function ob(){var a=mb(),b=E();function c(b){a.call(this,b);for(var c=0;c<this.data.length;c++)b[c]=b[c]&255}b.inherits(c,a);c.prototype.byteAt=function(a){return this.data[this.zero+a]};c.prototype.lastIndexOfSignature=function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2);a=a.charCodeAt(3);for(var e=this.length-4;e>=0;--e)if(this.data[e]===b&&this.data[e+1]===c&&this.data[e+2]===d&&this.data[e+3]===a)return e-this.zero;return-1};c.prototype.readAndCheckSignature=function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2);a=a.charCodeAt(3);var e=this.readData(4);return b===e[0]&&c===e[1]&&d===e[2]&&a===e[3]};c.prototype.readData=function(a){this.checkOffset(a);if(a===0)return[];var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);this.index+=a;return b};nb.exports=c}var pb=!1;function qb(){pb||(pb=!0,ob());return nb.exports}d={};var rb={exports:d};function sb(){var a=mb(),b=E();function c(b){a.call(this,b)}b.inherits(c,a);c.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)};c.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero};c.prototype.readAndCheckSignature=function(a){var b=this.readData(4);return a===b};c.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);this.index+=a;return b};rb.exports=c}var tb=!1;function ub(){tb||(tb=!0,sb());return rb.exports}f={};var vb={exports:f};function wb(){var a=qb(),b=E();function c(b){a.call(this,b)}b.inherits(c,a);c.prototype.readData=function(a){this.checkOffset(a);if(a===0)return new Uint8Array(0);var b=this.data.subarray(this.zero+this.index,this.zero+this.index+a);this.index+=a;return b};vb.exports=c}var xb=!1;function yb(){xb||(xb=!0,wb());return vb.exports}b={};var zb={exports:b};function Ab(){var a=yb(),b=E();function c(b){a.call(this,b)}b.inherits(c,a);c.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);this.index+=a;return b};zb.exports=c}var Bb=!1;function Cb(){Bb||(Bb=!0,Ab());return zb.exports}c={};var Db={exports:c};function Eb(){var a=E(),b=o(),c=qb(),d=ub(),e=Cb(),f=yb();Db.exports=function(g){var h=a.getTypeOf(g);a.checkSupport(h);if(h==="string"&&!b.uint8array)return new d(g);if(h==="nodebuffer")return new e(g);return b.uint8array?new f(a.transformTo("uint8array",g)):new c(a.transformTo("array",g))}}var Fb=!1;function Gb(){Fb||(Fb=!0,Eb());return Db.exports}d={};var Hb={exports:d};function Ib(){var a=Gb(),b=E(),c=X(),d=W(),e=K(),f=Oa(),g=o(),h=0,i=3,j=function(a){for(var b in f){if(!f.hasOwnProperty(b))continue;if(f[b].magic===a)return f[b]}return null};function k(a,b){this.options=a,this.loadOptions=b}k.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(a){var d;a.skip(22);this.fileNameLength=a.readInt(2);d=a.readInt(2);this.fileName=a.readData(this.fileNameLength);a.skip(d);if(this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");d=j(this.compressionMethod);if(d===null)throw new Error("Corrupted zip : compression "+b.pretty(this.compressionMethod)+" unknown (inner file : "+b.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,d,a.readData(this.compressedSize))},readCentralPart:function(a){this.versionMadeBy=a.readInt(2);a.skip(2);this.bitFlag=a.readInt(2);this.compressionMethod=a.readString(2);this.date=a.readDate();this.crc32=a.readInt(4);this.compressedSize=a.readInt(4);this.uncompressedSize=a.readInt(4);var b=a.readInt(2);this.extraFieldsLength=a.readInt(2);this.fileCommentLength=a.readInt(2);this.diskNumberStart=a.readInt(2);this.internalFileAttributes=a.readInt(2);this.externalFileAttributes=a.readInt(4);this.localHeaderOffset=a.readInt(4);if(this.isEncrypted())throw new Error("Encrypted zip are not supported");a.skip(b);this.readExtraFields(a);this.parseZIP64ExtraField(a);this.fileComment=a.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null;this.dosPermissions=null;var a=this.versionMadeBy>>8;this.dir=this.externalFileAttributes&16?!0:!1;a===h&&(this.dosPermissions=this.externalFileAttributes&63);a===i&&(this.unixPermissions=this.externalFileAttributes>>16&65535);!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(c){if(!this.extraFields[1])return;c=a(this.extraFields[1].value);this.uncompressedSize===b.MAX_VALUE_32BITS&&(this.uncompressedSize=c.readInt(8));this.compressedSize===b.MAX_VALUE_32BITS&&(this.compressedSize=c.readInt(8));this.localHeaderOffset===b.MAX_VALUE_32BITS&&(this.localHeaderOffset=c.readInt(8));this.diskNumberStart===b.MAX_VALUE_32BITS&&(this.diskNumberStart=c.readInt(4))},readExtraFields:function(a){var b=a.index+this.extraFieldsLength,c,d,e;this.extraFields||(this.extraFields={});while(a.index<b)c=a.readInt(2),d=a.readInt(2),e=a.readData(d),this.extraFields[c]={id:c,length:d,value:e}},handleUTF8:function(){var a=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=e.utf8decode(this.fileName),this.fileCommentStr=e.utf8decode(this.fileComment);else{var c=this.findExtraFieldUnicodePath();if(c!==null)this.fileNameStr=c;else{c=b.transformTo(a,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(c)}c=this.findExtraFieldUnicodeComment();if(c!==null)this.fileCommentStr=c;else{c=b.transformTo(a,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(c)}}},findExtraFieldUnicodePath:function(){var b=this.extraFields[28789];if(b){var c=a(b.value);if(c.readInt(1)!==1)return null;return d(this.fileName)!==c.readInt(4)?null:e.utf8decode(c.readData(b.length-5))}return null},findExtraFieldUnicodeComment:function(){var b=this.extraFields[25461];if(b){var c=a(b.value);if(c.readInt(1)!==1)return null;return d(this.fileComment)!==c.readInt(4)?null:e.utf8decode(c.readData(b.length-5))}return null}};Hb.exports=k}var Jb=!1;function Kb(){Jb||(Jb=!0,Ib());return Hb.exports}f={};var Lb={exports:f};function Mb(){var a=Gb(),b=E(),c=Sa(),d=Kb();K();var e=o();function f(a){this.files=[],this.loadOptions=a}f.prototype={checkSignature:function(a){if(!this.reader.readAndCheckSignature(a)){this.reader.index-=4;var c=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+b.pretty(c)+", expected "+b.pretty(a)+")")}},isSignature:function(a,b){var c=this.reader.index;this.reader.setIndex(a);a=this.reader.readString(4);a=a===b;this.reader.setIndex(c);return a},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2);this.diskWithCentralDirStart=this.reader.readInt(2);this.centralDirRecordsOnThisDisk=this.reader.readInt(2);this.centralDirRecords=this.reader.readInt(2);this.centralDirSize=this.reader.readInt(4);this.centralDirOffset=this.reader.readInt(4);this.zipCommentLength=this.reader.readInt(2);var a=this.reader.readData(this.zipCommentLength),c=e.uint8array?"uint8array":"array";c=b.transformTo(c,a);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8);this.reader.skip(4);this.diskNumber=this.reader.readInt(4);this.diskWithCentralDirStart=this.reader.readInt(4);this.centralDirRecordsOnThisDisk=this.reader.readInt(8);this.centralDirRecords=this.reader.readInt(8);this.centralDirSize=this.reader.readInt(8);this.centralDirOffset=this.reader.readInt(8);this.zip64ExtensibleData={};var a=this.zip64EndOfCentralSize-44,b=0,c,d,e;while(b<a)c=this.reader.readInt(2),d=this.reader.readInt(4),e=this.reader.readData(d),this.zip64ExtensibleData[c]={id:c,length:d,value:e}},readBlockZip64EndOfCentralLocator:function(){this.diskWithZip64CentralDirStart=this.reader.readInt(4);this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8);this.disksCount=this.reader.readInt(4);if(this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var a,b;for(a=0;a<this.files.length;a++)b=this.files[a],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var a;this.reader.setIndex(this.centralDirOffset);while(this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER))a=new d({zip64:this.zip64},this.loadOptions),a.readCentralPart(this.reader),this.files.push(a);if(this.centralDirRecords!==this.files.length&&(this.centralDirRecords!==0&&this.files.length===0))throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var a=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(a<0){var d=!this.isSignature(0,c.LOCAL_FILE_HEADER);if(d)throw new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");else throw new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(a);d=a;this.checkSignature(c.CENTRAL_DIRECTORY_END);this.readBlockEndOfCentral();if(this.diskNumber===b.MAX_VALUE_16BITS||this.diskWithCentralDirStart===b.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===b.MAX_VALUE_16BITS||this.centralDirRecords===b.MAX_VALUE_16BITS||this.centralDirSize===b.MAX_VALUE_32BITS||this.centralDirOffset===b.MAX_VALUE_32BITS){this.zip64=!0;a=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR);if(a<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");this.reader.setIndex(a);this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR);this.readBlockZip64EndOfCentralLocator();if(!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)){this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END);if(this.relativeOffsetEndOfZip64CentralDir<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory")}this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir);this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END);this.readBlockZip64EndOfCentral()}a=this.centralDirOffset+this.centralDirSize;this.zip64&&(a+=20,a+=12+this.zip64EndOfCentralSize);a=d-a;if(a>0)this.isSignature(d,c.CENTRAL_FILE_HEADER)||(this.reader.zero=a);else if(a<0)throw new Error("Corrupted zip: missing "+Math.abs(a)+" bytes.")},prepareReader:function(b){this.reader=a(b)},load:function(a){this.prepareReader(a),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}};Lb.exports=f}var Nb=!1;function Ob(){Nb||(Nb=!0,Mb());return Lb.exports}b={};var Pb={exports:b};function Qb(){var a=E(),b=B(),c=K(),a=E(),d=Ob(),e=za(),f=x();function g(a){return new b.Promise(function(b,c){var d=a.decompressed.getContentWorker().pipe(new e());d.on("error",function(a){c(a)}).on("end",function(){d.streamInfo.crc32!==a.decompressed.crc32?c(new Error("Corrupted zip : CRC32 mismatch")):b()}).resume()})}Pb.exports=function(e,h){var i=this;h=a.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode});return f.isNode&&f.isStream(e)?b.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",e,!0,h.optimizedBinaryString,h.base64).then(function(a){var b=new d(h);b.load(a);return b}).then(function(a){var c=[b.Promise.resolve(a)];a=a.files;if(h.checkCRC32)for(var d=0;d<a.length;d++)c.push(g(a[d]));return b.Promise.all(c)}).then(function(a){a=a.shift();var b=a.files;for(var c=0;c<b.length;c++){var d=b[c];i.file(d.fileNameStr,d.decompressed,{binary:!0,optimizedBinaryString:!0,date:d.date,dir:d.dir,comment:d.fileCommentStr.length?d.fileCommentStr:null,unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions,createFolders:h.createFolders})}a.zipComment.length&&(i.comment=a.zipComment);return i})}}var Rb=!1;function Sb(){Rb||(Rb=!0,Qb());return Pb.exports}c={};var Tb={exports:c};function Ub(){function a(){if(!(this instanceof a))return new a();if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={};this.comment=null;this.root="";this.clone=function(){var b=new a();for(var c in this)typeof this[c]!=="function"&&(b[c]=this[c]);return b}}a.prototype=ib();a.prototype.loadAsync=Sb();a.support=o();a.defaults=U();a.version="3.2.0";a.loadAsync=function(b,c){return new a().loadAsync(b,c)};a.external=B();Tb.exports=a}var Vb=!1;function Wb(){Vb||(Vb=!0,Ub());return Tb.exports}function a(a){switch(a){case void 0:return Wb()}}e.exports=a}),null);
__d("jszip",["jszip-3.2.0"],(function(a,b,c,d,e,f){e.exports=b("jszip-3.2.0")()}),null);/*FB_PKG_DELIM*/
__d("MAWDbVersionList",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}b={V21:21,V22:22,V23:23,V24:24,V25:25,V26:26,V27:27,V28:28,V29:29,V30:30,V31:31,V32:32,V33:33,V34:34,V35:35,V36:36,V37:37,V38:38,V39:39,V40:40,V41:41,V42:42,V43:43,V44:44,V45:45,V46:46,V47:47,V48:48,V49:49,V50:50,V51:51,V52:52,V53:53,V54:54,V55:55,V56:56,V57:57,V58:58,V59:59,V60:60,V61:61,V62:62,V63:63,V64:64,V65:65,V66:66,V67:67,V68:68,V69:69,V70:70,V71:71,V72:72,V73:73,V74:74,V75:75,V76:76,V77:77,V78:78,V79:79,V80:80,V81:81,V82:82,V83:83,V84:84,V85:85,V86:86,V87:87,V88:88,V89:89,V90:90,V91:91,V92:92,V93:93,V94:94,V95:95,V96:96,V97:97,V98:98,V99:99,V100:100};f.toVersion=a;f.VERSION=b}),66);
__d("MAWDbSchema",["MAWDbVersionList"],(function(a,b,c,d,e,f,g){"use strict";a=[{autoIncrement:!0,indexes:{externalId:{columns:["externalId"]}},name:"e2ee_appData",primaryKey:["appDataId"]},{autoIncrement:!1,indexes:{},name:"e2ee_meta",primaryKey:["key"]},{autoIncrement:!1,indexes:{},name:"e2ee_appMeta",primaryKey:["key"]},{autoIncrement:!1,indexes:{},name:"e2ee_prekey",primaryKey:["keyId"]},{autoIncrement:!1,indexes:{},name:"e2ee_prekeyGeneration",primaryKey:["generationId"]},{autoIncrement:!1,indexes:{},name:"e2ee_session",primaryKey:["id"]},{autoIncrement:!1,indexes:{},name:"e2ee_signedPrekey",primaryKey:["keyId"]},{autoIncrement:!1,indexes:{},name:"e2ee_tasks",primaryKey:["taskName"]},{autoIncrement:!1,indexes:{groupJid:{columns:["groupJid"],unique:!1},userJid:{columns:["userJid"],unique:!1}},name:"e2ee_senderKeySessions",primaryKey:["id"]},{autoIncrement:!1,indexes:{},name:"e2ee_personalSenderKeyStatuses",primaryKey:["groupJid"]},{autoIncrement:!0,indexes:{altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},thread:{columns:["thread"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{externalId:{columns:["externalId"],unique:!1},msgId:{columns:["msgId"],unique:!1},thread:{columns:["thread"],unique:!1}},name:"e2ee_unrenderedMessages",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{externalIdWithType:{columns:["externalIdWithType"],unique:!1}},name:"e2ee_pendingStanzas",primaryKey:["rowId"]},{autoIncrement:!1,indexes:{threadId:{columns:["threadId"],unique:!1},userJid:{columns:["userJid"],unique:!1}},name:"e2ee_participants",primaryKey:["id"]},{autoIncrement:!1,indexes:{},name:"e2ee_contacts",primaryKey:["contactJid"]},{autoIncrement:!1,indexes:{},name:"e2ee_receipts",primaryKey:["msgId"]},{autoIncrement:!0,indexes:{"*msgIds":{columns:["msgIds"],multiEntry_DO_NOT_USE:!0},hashedPlaintextHash:{columns:["hashedPlaintextHash"]}},name:"e2ee_media",primaryKey:["mediaId"]},{autoIncrement:!0,indexes:{externalId:{columns:["externalId"],unique:!1},reactionId:{columns:["reactionId"],unique:!1},reactToExternalId:{columns:["reactToExternalId"],unique:!1},reactToMsgId:{columns:["reactToMsgId"],unique:!1},threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_reactions",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{hashedPlaintextHash:{columns:["hashedPlaintextHash"]}},name:"e2ee_chunk",primaryKey:["chunkId"]},{autoIncrement:!0,indexes:{jid:{columns:["jid"]},threadOrder:{columns:["threadOrder"],unique:!1}},name:"e2ee_threads",primaryKey:["chatId"]},{autoIncrement:!1,indexes:{},name:"e2ee_existingUsers",primaryKey:["id"]},{autoIncrement:!1,indexes:{},name:"e2ee_pendingReceipts",primaryKey:["id"]},{autoIncrement:!0,indexes:{version:{columns:["version"]}},name:"e2ee_browserEncryptionMeta",primaryKey:["id"]},{autoIncrement:!1,indexes:{},name:"e2ee_ftsBackloggedMessages",primaryKey:["rowId"]},{autoIncrement:!1,indexes:{},name:"e2ee_ftsEncryptionMeta",primaryKey:["key"]},{autoIncrement:!0,indexes:{"*prefixes":{columns:["prefixes"],multiEntry_DO_NOT_USE:!0,unique:!1},chatId:{columns:["chatId"],unique:!1},id:{columns:["id"],unique:!1}},name:"e2ee_ftsIndexV3",primaryKey:["ftsRowId"]},{autoIncrement:!0,indexes:{uniqKey:{columns:["uniqKey"]}},name:"e2ee_jobs",primaryKey:["jobId"]},{autoIncrement:!1,indexes:{},name:"e2ee_identity",primaryKey:["deviceJid"]},{autoIncrement:!1,indexes:{threadId:{columns:["threadId"],unique:!1}},name:"e2ee_groupInfo",primaryKey:["groupJid"]}];b=[{autoIncrement:!0,indexes:{altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}];c=[{autoIncrement:!0,indexes:{altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}];e=[{autoIncrement:!0,indexes:{},name:"e2ee_isDualSend",primaryKey:["rowId"]}];f=[{autoIncrement:!1,indexes:{},name:"e2ee_historySyncQRCodeSecretKey",primaryKey:["key"]}];var h=[{autoIncrement:!0,indexes:{externalId:{columns:["externalId"],unique:!1},messageDeleteForMeTs:{columns:["messageDeleteForMeTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},thread:{columns:["thread"],unique:!1}},name:"e2ee_unrenderedMessages",primaryKey:["rowId"]}],i=[{autoIncrement:!0,indexes:{altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{externalId:{columns:["externalId"],unique:!1},messageDeleteForMeTs:{columns:["messageDeleteForMeTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_unrenderedMessages",primaryKey:["rowId"]}],j=[{autoIncrement:!1,indexes:{inviterJid:{columns:["inviterJid"],unique:!1}},name:"e2ee_groupInvites",primaryKey:["invitedParticipantId"]}],k=[{autoIncrement:!0,indexes:{deleteTs:{columns:["deleteTs"],unique:!1},externalIdWithType:{columns:["externalIdWithType"],unique:!1}},name:"e2ee_pendingStanzas",primaryKey:["rowId"]}],l=[{autoIncrement:!0,indexes:{"*msgIds":{columns:["msgIds"],multiEntry_DO_NOT_USE:!0},fbid:{columns:["fbid"]},hashedPlaintextHash:{columns:["hashedPlaintextHash"]},objectId:{columns:["objectId"]}},name:"e2ee_media",primaryKey:["mediaId"]}],m=[{autoIncrement:!0,indexes:{},name:"e2ee_dualSendMedia",primaryKey:["id"]}],n=[{autoIncrement:!0,indexes:{associatedMessageId:{columns:["associatedMessageId"],unique:!1},defaultPreviewMediaId:{columns:["defaultPreviewMediaId"],unique:!1},faviconMediaId:{columns:["faviconMediaId"],unique:!1},headerMediaId:{columns:["headerMediaId"],unique:!1},targetExpiringAtSec:{columns:["targetExpiringAtSec"],unique:!1}},name:"e2ee_xma",primaryKey:["xmaId"]}],o=[{autoIncrement:!1,indexes:{},name:"e2ee_historySyncQRCodeData",primaryKey:["rowId"]}],p=[{autoIncrement:!0,indexes:{associatedMessageId:{columns:["associatedMessageId"],unique:!1},defaultPreviewMediaId:{columns:["defaultPreviewMediaId"],unique:!1},externalId:{columns:["externalId"],unique:!1},faviconMediaId:{columns:["faviconMediaId"],unique:!1},headerMediaId:{columns:["headerMediaId"],unique:!1},targetExpiringAtSec:{columns:["targetExpiringAtSec"],unique:!1}},name:"e2ee_xma",primaryKey:["xmaId"]}],q=[{autoIncrement:!0,indexes:{},name:"e2ee_dyiBatch",primaryKey:["batchId"]}],r=[{autoIncrement:!1,indexes:{correspondingOpenThreadKey:{columns:["correspondingOpenThreadKey"],unique:!1},threadId:{columns:["threadId"],unique:!1}},name:"e2ee_groupInfo",primaryKey:["groupJid"]}],s=[{autoIncrement:!1,indexes:{},name:"e2ee_groupInvites",primaryKey:["invitedParticipantId","inviterJid"],removed:!0}],t=[{autoIncrement:!1,indexes:{inviterJid:{columns:["inviterJid"],unique:!1}},name:"e2ee_groupInvites",primaryKey:["invitedParticipantId","inviterJid"]}],u=[{autoIncrement:!0,indexes:{"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]},{autoIncrement:!0,indexes:{"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteForMeTs:{columns:["messageDeleteForMeTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_unrenderedMessages",primaryKey:["rowId"]}],v=[{autoIncrement:!1,indexes:{"[modelId+modelType+actionState]":{columns:["modelId","modelType","actionState"],unique:!1},action:{columns:["action"],unique:!1},actionState:{columns:["actionState"],unique:!1},collection:{columns:["collection"],unique:!1},indexMac:{columns:["indexMac"],unique:!1}},name:"e2ee_syncActions",primaryKey:["index"]}],w=[{autoIncrement:!1,indexes:{},name:"e2ee_missingKeys",primaryKey:["keyHex"]}],x=[{autoIncrement:!0,indexes:{action:{columns:["action"],unique:!1},collection:{columns:["collection"],unique:!1},index:{columns:["index"],unique:!1}},name:"e2ee_pendingMutations",primaryKey:["id"]}],y=[{autoIncrement:!0,indexes:{collection:{columns:["collection"]}},name:"e2ee_collectionVersions",primaryKey:["id"]}],z=[{autoIncrement:!0,indexes:{keyEpoch:{columns:["keyEpoch"],unique:!1},keyId:{columns:["keyId"]}},name:"e2ee_syncKeys",primaryKey:["id"]}],A=[{autoIncrement:!1,indexes:{userJid:{columns:["userJid"],unique:!1}},name:"e2ee_identity",primaryKey:["deviceJid"]}],B=[{autoIncrement:!1,indexes:{externalId:{columns:["externalId"],unique:!1},lastRetryTs:{columns:["lastRetryTs"],unique:!1},traceId:{columns:["traceId"],unique:!1}},name:"e2ee_uploadRetryStatus",primaryKey:["externalId","lastRetryTs"]}],C=[{autoIncrement:!0,indexes:{jid:{columns:["jid"],unique:!1},stanzaId:{columns:["stanzaId"],unique:!1},type:{columns:["type"],unique:!1}},name:"e2ee_stanzaQueue",primaryKey:["stanzaQueueId"]}],D=[{autoIncrement:!0,indexes:{},name:"e2ee_deviceChangeAlerts",primaryKey:["deviceChangeAlertsId"]}],E=[{autoIncrement:!1,indexes:{},name:"e2ee_retroactiveBackupsState",primaryKey:["threadId"]}],F=[{autoIncrement:!0,indexes:{deduplicationKey:{columns:["deduplicationKey"],predicate:function(a){return a.deduplicationKey!=null}},jid:{columns:["jid"]},threadOrder:{columns:["threadOrder"],unique:!1}},name:"e2ee_threads",primaryKey:["chatId"]}],G=[{autoIncrement:!0,indexes:{mediaId:{columns:["mediaId"],unique:!1},msgId:{columns:["msgId"],unique:!1},objectId:{columns:["objectId"]}},name:"e2ee_mediaBackup",primaryKey:["mediaBackupId"]}],H=[{autoIncrement:!0,indexes:{authoritativeThreadKey:{columns:["authoritativeThreadKey"]},deduplicationKey:{columns:["deduplicationKey"],predicate:function(a){return a.deduplicationKey!=null}},jid:{columns:["jid"]},threadOrder:{columns:["threadOrder"],unique:!1}},name:"e2ee_threads",primaryKey:["chatId"]}],I=[{autoIncrement:!0,indexes:{"[jid+type]":{columns:["jid","type"],unique:!1},jid:{columns:["jid"],unique:!1},stanzaId:{columns:["stanzaId"],unique:!1},type:{columns:["type"],unique:!1}},name:"e2ee_stanzaQueue",primaryKey:["stanzaQueueId"]}],J=[{autoIncrement:!0,indexes:{originalMsgExternalId:{columns:["originalMsgExternalId"],unique:!1},threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_editMsgHistory",primaryKey:["editMsgHistoryId"]}],K=[{autoIncrement:!1,indexes:{},name:"e2ee_ftsBackloggedMessages",primaryKey:["rowId"],removed:!0},{autoIncrement:!1,indexes:{},name:"e2ee_ftsEncryptionMeta",primaryKey:["key"],removed:!0},{autoIncrement:!0,indexes:{},name:"e2ee_ftsIndexV3",primaryKey:["ftsRowId"],removed:!0}],L=[{autoIncrement:!0,indexes:{"*msgIds":{columns:["msgIds"],multiEntry_DO_NOT_USE:!0},fbid:{columns:["fbid"],unique:!1},hashedPlaintextHash:{columns:["hashedPlaintextHash"]},objectId:{columns:["objectId"],unique:!1}},name:"e2ee_media",primaryKey:["mediaId"]}],M=[{autoIncrement:!0,indexes:{},name:"e2ee_ebRestoreQueue",primaryKey:["queueId"]},{autoIncrement:!0,indexes:{},name:"e2ee_ebUploadQueue",primaryKey:["queueId"]}],N=[{autoIncrement:!0,indexes:{"[uploadStatus+uploadTsSec]":{columns:["uploadStatus","uploadTsSec"],unique:!1},uploadStatus:{columns:["uploadStatus"],unique:!1},uploadTsSec:{columns:["uploadTsSec"],unique:!1}},name:"e2ee_ebRestoreQueue",primaryKey:["queueId"]},{autoIncrement:!0,indexes:{"[uploadStatus+uploadTsSec]":{columns:["uploadStatus","uploadTsSec"],unique:!1},uploadStatus:{columns:["uploadStatus"],unique:!1},uploadTsSec:{columns:["uploadTsSec"],unique:!1}},name:"e2ee_ebUploadQueue",primaryKey:["queueId"]}],O=[{autoIncrement:!0,indexes:{"[thread+serverTs]":{columns:["thread","serverTs"],unique:!1},"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},thread:{columns:["thread"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],P=[{autoIncrement:!0,indexes:{},name:"e2ee_jobs",primaryKey:[],removed:!0}],Q=[{autoIncrement:!0,indexes:{},name:"e2ee_danglingQueue",primaryKey:["queueId"]}],R=[{autoIncrement:!0,indexes:{dbVersion:{columns:["dbVersion"],unique:!1}},name:"e2ee_staleQueue",primaryKey:["staleQueueId"]}],S=[{autoIncrement:!0,indexes:{"[offlineThreadingId+backupActionType]":{columns:["offlineThreadingId","backupActionType"],unique:!1},"[uploadStatus+uploadTsSec]":{columns:["uploadStatus","uploadTsSec"],unique:!1},backupActionType:{columns:["backupActionType"],unique:!1},msgIdKey:{columns:["msgIdKey"],unique:!1},offlineThreadingId:{columns:["offlineThreadingId"],unique:!1},uploadStatus:{columns:["uploadStatus"],unique:!1},uploadTsSec:{columns:["uploadTsSec"],unique:!1}},name:"e2ee_ebUploadQueue",primaryKey:["queueId"]}],T=[{autoIncrement:!1,indexes:{},name:"e2ee_ftsBackloggedMessages",primaryKey:["rowId"]},{autoIncrement:!1,indexes:{},name:"e2ee_ftsEncryptionMeta",primaryKey:["key"]},{autoIncrement:!0,indexes:{"*prefixes":{columns:["prefixes"],multiEntry_DO_NOT_USE:!0,unique:!1},chatId:{columns:["chatId"],unique:!1},id:{columns:["id"],unique:!1}},name:"e2ee_ftsIndexV3",primaryKey:["ftsRowId"]}],U=[{autoIncrement:!1,indexes:{"[threadJid+userJid]":{columns:["threadJid","userJid"],unique:!1},threadId:{columns:["threadId"],unique:!1},userJid:{columns:["userJid"],unique:!1}},name:"e2ee_participants",primaryKey:["id"]}],V=[{autoIncrement:!0,indexes:{},name:"e2ee_pendingMessageStanzaQueue",primaryKey:["pendingMessageStanzaQueueId"]}],W=[{autoIncrement:!0,indexes:{author:{columns:["author"],unique:!1},chat:{columns:["chat"],unique:!1},externalId:{columns:["externalId"],unique:!1}},name:"e2ee_deletedMessages",primaryKey:["rowId"]}],X=[{autoIncrement:!0,indexes:{threadJid:{columns:["threadJid"],unique:!1}},name:"e2ee_ebMsgRanges",primaryKey:["rangeId"]}],Y=[{autoIncrement:!1,indexes:{inviterJid:{columns:["inviterJid"],unique:!1},threadJid:{columns:["threadJid","inviteeJid"],unique:!1}},name:"e2ee_groupInvites",primaryKey:["invitedParticipantId","inviterJid"]}],Z=[{autoIncrement:!1,indexes:{waMsgId:{columns:["waMsgId"]}},name:"e2ee_receipts",primaryKey:["msgId"]}],$=[{autoIncrement:!0,indexes:{"[jid+priority]":{columns:["jid","priority"],unique:!1},"[jid+type]":{columns:["jid","type"],unique:!1},jid:{columns:["jid"],unique:!1},priority:{columns:["priority"],unique:!1},stanzaId:{columns:["stanzaId"],unique:!1},type:{columns:["type"],unique:!1}},name:"e2ee_stanzaQueue",primaryKey:["stanzaQueueId"]}],aa=[{autoIncrement:!0,indexes:{"[thread+serverTs]":{columns:["thread","serverTs"],unique:!1},"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],unique:!1},revokedExternalId:{columns:["revokedExternalId"],unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],ba=[{autoIncrement:!0,indexes:{"[thread+serverTs]":{columns:["thread","serverTs"],predicate:function(a){return a.serverTs!=null},unique:!1},"[thread+sortOrderMs]":{columns:["thread","sortOrderMs"],unique:!1},"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(a){return a.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(a){return a.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(a){return a.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(a){return a.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(a){return a.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(a){return a.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],ca=[{autoIncrement:!1,dexieOnly_primaryKeyUnique:!0,indexes:{ts:{columns:["ts"],unique:!1}},name:"e2ee_sentBytesCache",primaryKey:["waMsgId"]}],da=[{autoIncrement:!0,indexes:{"[thread+serverTs]":{columns:["thread","serverTs"],predicate:function(a){return a.serverTs!=null},unique:!1},"[threadJid+sortOrderMs]":{columns:["threadJid","sortOrderMs"],unique:!1},altIndex:{columns:["altIndex"],predicate:function(a){return a.altIndex!=null},unique:!1},externalId:{columns:["externalId"],unique:!1},messageDeleteTs:{columns:["messageDeleteTs"],predicate:function(a){return a.messageDeleteTs!=null},unique:!1},messageExpirationTs:{columns:["messageExpirationTs"],predicate:function(a){return a.messageExpirationTs!=null},unique:!1},msgId:{columns:["msgId"],unique:!1},quoteExternalId:{columns:["quoteExternalId"],predicate:function(a){return a.quoteExternalId!=null},unique:!1},revokedExternalId:{columns:["revokedExternalId"],predicate:function(a){return a.revokedExternalId!=null},unique:!1},threadJid:{columns:["threadJid"],unique:!1},unsendMsgContentDeleteTs:{columns:["unsendMsgContentDeleteTs"],predicate:function(a){return a.unsendMsgContentDeleteTs!=null},unique:!1}},name:"e2ee_messages",primaryKey:["rowId"]}],ea=[{autoIncrement:!0,indexes:{"[originalMsgExternalId+threadJid]":{columns:["originalMsgExternalId","threadJid"],unique:!1}},name:"e2ee_editMsgHistory",primaryKey:["editMsgHistoryId"]}],fa=[{autoIncrement:!0,indexes:{deviceJid:{columns:["deviceJid"],unique:!1},displayOrder:{columns:["isArchived","ts"],unique:!1},isConfirmedActionTs:{columns:["isConfirmed","action","ts"],unique:!1},isNotifiedTs:{columns:["isNotified","ts"],unique:!1}},name:"e2ee_deviceChangeAlerts",primaryKey:["deviceChangeAlertsId"]},{autoIncrement:!1,indexes:{threadId:{columns:["threadId"],unique:!1}},name:"e2ee_groupInfo",primaryKey:["groupJid"]}],ga=[{autoIncrement:!0,indexes:{"[uploadStatus+uploadTsSec]":{columns:["uploadStatus","uploadTsSec"],unique:!1},backupActionType:{columns:["backupActionType"],unique:!1},msgIdKey:{columns:["msgIdKey"],unique:!1},uploadStatus:{columns:["uploadStatus"],unique:!1},uploadTsSec:{columns:["uploadTsSec"],unique:!1}},name:"e2ee_ebUploadQueue",primaryKey:["queueId"]}],ha=[{autoIncrement:!1,indexes:{},name:"e2ee_ephemeralSettings",primaryKey:["userJid"]}];a=new Map([[(d=d("MAWDbVersionList")).VERSION.V21,a],[d.VERSION.V22,b],[d.VERSION.V23,c],[d.VERSION.V24,e],[d.VERSION.V25,f],[d.VERSION.V30,h],[d.VERSION.V31,i],[d.VERSION.V32,j],[d.VERSION.V33,k],[d.VERSION.V34,l],[d.VERSION.V35,m],[d.VERSION.V36,n],[d.VERSION.V37,o],[d.VERSION.V38,p],[d.VERSION.V39,q],[d.VERSION.V40,r],[d.VERSION.V41,s],[d.VERSION.V42,t],[d.VERSION.V45,u],[d.VERSION.V48,v],[d.VERSION.V49,w],[d.VERSION.V50,x],[d.VERSION.V51,y],[d.VERSION.V52,z],[d.VERSION.V57,A],[d.VERSION.V59,B],[d.VERSION.V61,C],[d.VERSION.V62,D],[d.VERSION.V63,E],[d.VERSION.V64,F],[d.VERSION.V65,G],[d.VERSION.V67,H],[d.VERSION.V69,I],[d.VERSION.V70,J],[d.VERSION.V73,K],[d.VERSION.V74,L],[d.VERSION.V75,M],[d.VERSION.V77,N],[d.VERSION.V78,O],[d.VERSION.V79,P],[d.VERSION.V80,Q],[d.VERSION.V81,R],[d.VERSION.V83,S],[d.VERSION.V84,T],[d.VERSION.V85,U],[d.VERSION.V86,V],[d.VERSION.V88,W],[d.VERSION.V89,X],[d.VERSION.V90,Y],[d.VERSION.V91,Z],[d.VERSION.V92,$],[d.VERSION.V93,aa],[d.VERSION.V94,ba],[d.VERSION.V95,ca],[d.VERSION.V96,da],[d.VERSION.V97,ea],[d.VERSION.V98,fa],[d.VERSION.V99,ga],[d.VERSION.V100,ha]]);b=["messages","unrenderedMessages","groupInfo","meta","identity","prekey","prekeyGeneration","session","signedPrekey","senderKeySessions","receipts","pendingReceipts","threads","contacts","participants","tasks","personalSenderKeyStatuses","appData","appMeta","chunk","mediaBackup","media","reactions","groupInvites","dyiBatch","syncActions","missingKeys","pendingMutations","collectionVersions","syncKeys","deviceChangeAlerts","xma","retroactiveBackupsState","editMsgHistory","deletedMessages","ebMsgRanges"];g.dbSchema=a;g.TABLES_TO_ENCRYPT=b}),98);
__d("MAWGetDbVersion",["MAWDbVersionList","gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h=null;function a(){var a;return(a=h)!=null?a:d("MAWDbVersionList").toVersion(c("justknobx")._("1716"))}function b(a){if(!c("gkx")("652"))return;if(a==null){h=null;return}if(a==="current"){h=null;return}if(a==="latest"){h=d("MAWDbVersionList").toVersion(Number.POSITIVE_INFINITY);return}Number.isInteger(a)&&(h=d("MAWDbVersionList").toVersion(a))}g.getArmadilloDbVersion=a;g.setArmadilloDbVersionForTest=b}),98);
__d("MAWDbSchema.restore",["MAWDbSchema","MAWGetDbVersion","objectEntries","sortBy"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=Object.fromEntries(c("objectEntries")(a.indexes).filter(function(a){a=a[1];return a.multiEntry_DO_NOT_USE!==!0}).map(function(b){var c=b[0];b=b[1];return[c,{columns:[].concat(b.columns,b.unique!==!1?[]:a.primaryKey),predicate:b.predicate}]}));return{auto_increment:a.autoIncrement===!0,indexes:b,name:a.name,primary_key:a.primaryKey}}var i=c("sortBy")(Array.from(d("MAWDbSchema").dbSchema.entries()),function(a){a=a[0];return a}).map(function(a){var b=a[0];a=a[1];return{schema:a,version:b}});a=function(a){return Array.from(i.filter(function(b){return b.version<=a&&b.schema!=null}).reduce(function(a,b){(b=b.schema)==null?void 0:b.forEach(function(b){if(b.removed===!0){a["delete"](b.name);return}a.set(b.name,h(b))});return a},new Map()).values())};b=a(d("MAWGetDbVersion").getArmadilloDbVersion());g.getSchemaForVersion=a;g.clientSchema=b}),98);
__d("isArmadillo",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("135")===!0}g["default"]=a}),98);
__d("hashString",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=0;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);b=(b<<5)-b+d;b|=0}return b}f["default"]=a}),66);
__d("setImmediate",["TimeSlice","TimerStorage","setImmediateAcrossTransitions"],(function(a,b,c,d,e,f,g){function a(a){var b,d=function(){c("TimerStorage").unset(c("TimerStorage").IMMEDIATE,b);for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];Function.prototype.apply.call(a,this,e)};c("TimeSlice").copyGuardForWrapper(a,d);for(var e=arguments.length,f=new Array(e>1?e-1:0),g=1;g<e;g++)f[g-1]=arguments[g];b=c("setImmediateAcrossTransitions").apply(void 0,[d].concat(f));c("TimerStorage").set(c("TimerStorage").IMMEDIATE,b);return b}g["default"]=a}),98);
__d("LSMessageReplySourceTypeV2",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,STORY_BASE64_ENCODED:6,LIGHTWEIGHT_STATUS:7,CLOSE_FRIENDS:8,XMA:9,IG_NOTE:10,CLOSE_FRIENDS_NOTE_REPLY:11,LIGHTWEIGHT_STATUS_REACTION:12,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16,AVATAR_DETAIL:17,NOTE_REPLY_ARMADILLO:18,HIGHLIGHTS_TAB_CARDS_FOR_MOM:19});f["default"]=a}),66);
__d("isOccamadilloResumeSyncEnabled",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("24091")&&c("gkx")("24158")&&c("gkx")("24149")}g["default"]=a}),98);
__d("I64MigrationHelper",["I64","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return c("nullthrows")((h||(h=d("I64"))).cast(a))}g.cast=a}),98);
__d("LSTableDefaults",["I64MigrationHelper"],(function(a,b,c,d,e,f){e.exports={sync_groups:{syncStatus:(a=b("I64MigrationHelper")).cast([0,0]),sendSyncParams:!1,minTimeToSyncTimestampMs:a.cast([0,0]),canIgnoreTimestamp:!1,priority:a.cast([0,0]),lastSyncRequestTimestampMs:a.cast([0,0]),lastSyncCompletedTimestampMs:a.cast([0,0]),syncChannel:a.cast([0,1])},pending_tasks:{enqueueTimestampMs:a.cast([0,0]),firstExecutedTimestampMs:a.cast([0,0]),failureCount:a.cast([0,0]),minTimeToSyncTimestampMs:a.cast([0,0]),pluginType:a.cast([0,0]),priority:a.cast([0,0]),taskDispatchPriority:a.cast([0,0])},pending_fire_and_forget_tasks:{enqueueTimestampMs:a.cast([0,0]),priority:a.cast([0,0])},contacts:{isMessengerUser:!1,isMemorialized:!1,blockedByViewerStatus:a.cast([0,0]),rank:a.cast([0,0]),contactType:a.cast([0,0]),contactTypeExact:a.cast([0,0]),canViewerMessage:!0,gender:a.cast([0,0]),authorityLevel:a.cast([0,0]),optimisticBlockedByViewerStatus:a.cast([0,0]),optimisticBlockedByViewerStatusTimestampMs:a.cast([0,0]),contactReachabilityStatusType:a.cast([0,0]),restrictionType:a.cast([0,0]),waConnectStatus:a.cast([0,0]),capabilities2:a.cast([0,0]),isEmployee:!1},ig_contact_info:{e2eeEligibility:a.cast([0,0])},bot_profile_info_v2:{hasEmbodiment:!1},reactions:{timestampMs:a.cast([0,0]),authorityLevel:a.cast([0,0]),reactionCreationTimestampMs:a.cast([0,0])},threads:{lastActivityTimestampMs:a.cast([0,0]),lastReadWatermarkTimestampMs:a.cast([0,0]),removeWatermarkTimestampMs:a.cast([0,0]),muteExpireTimeMs:a.cast([0,0]),isAdminSnippet:!1,ongoingCallState:a.cast([0,0]),snippetHasEmoji:!1,hasPersistentMenu:!1,disableComposerInput:!1,capabilities:a.cast([0,0]),isCustomThreadPicture:!1,isDisappearingMode:!1,unreadDisappearingMessageCount:a.cast([0,0]),authorityLevel:a.cast([0,0]),capabilities2:a.cast([0,0]),muteCallsExpireTimeMs:a.cast([0,0]),unsendLimitMs:a.cast([0,0]),threadInvitesEnabled:a.cast([0,0]),threadInvitesEnabledV2:a.cast([0,0]),capabilities3:a.cast([0,0]),muteMentionExpireTimeMs:a.cast([0,0]),isReadReceiptsDisabled:!1,readReceiptsDisabledV2:a.cast([0,0]),capabilities4:a.cast([0,0]),isHidden:!1},threads_ranges_v2__generated:{minThreadKey:a.cast([0,0]),minLastActivityTimestampMs:a.cast([0,0]),maxThreadKey:a.cast([0,0]),maxLastActivityTimestampMs:a.cast([0,0]),isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1},messages:{timestampMs:a.cast([0,0]),primarySortKey:a.cast([0,0]),secondarySortKey:a.cast([0,0]),isAdminMessage:!1,sendStatus:a.cast([0,0]),sendStatusV2:a.cast([0,0]),isUnsent:!1,replyStatus:a.cast([0,0]),replyAttachmentType:a.cast([0,0]),hasQuickReplies:!1,textHasLinks:!1,viewFlags:a.cast([0,0]),displayedContentTypes:a.cast([0,1]),quickReplyType:a.cast([0,0]),authorityLevel:a.cast([0,0]),unsentTimestampMs:a.cast([0,0]),isCollapsed:!1,messageRenderingType:a.cast([0,0]),isExpired:!1},messages_ranges_v2__generated:{isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1},participants:{readWatermarkTimestampMs:a.cast([0,0]),deliveredWatermarkTimestampMs:a.cast([0,0]),authorityLevel:a.cast([0,0]),readActionTimestampMs:a.cast([0,0]),groupParticipantJoinState:a.cast([0,0]),threadRoles:a.cast([0,0])},attachments:{timestampMs:a.cast([0,0]),attachmentType:a.cast([0,0]),hasMedia:!1,isSharable:!1,hasXma:!1,attachmentIndex:a.cast([0,0]),authorityLevel:a.cast([0,0])},attachments_ranges_v2__generated:{mediaGroup:a.cast([0,0]),isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1},attachment_items:{attachmentIndex:a.cast([0,0])},group_membership_approval_requests:{authorityLevel:a.cast([0,0])},admin_message_ctas:{timestampMs:a.cast([0,0]),showAdChoiceIcon:!1},thread_nullstate:{ctaType:a.cast([0,0]),privacyTextCtaType:a.cast([0,0])},messages_status:{timestampMs:a.cast([0,0])},polls:{pollType:a.cast([0,0])},poll_options_v2:{voteCount:a.cast([0,0]),sortKeyVotingTimestamp:a.cast([0,0]),sortKeyCreationTimestamp:a.cast([0,0])},filtered_threads_ranges_v3__generated:{minThreadKey:a.cast([0,0]),minLastActivityTimestampMs:a.cast([0,0]),maxThreadKey:a.cast([0,0]),maxLastActivityTimestampMs:a.cast([0,0]),isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:!1,hasMoreAfter:!1,folderName:"inbox",secondaryThreadRangeFilter:a.cast([0,0]),threadRangeFilterValue:""},community_folders:{capabilities:a.cast([0,0]),notificationMutedUntil:a.cast([0,0]),inviteStatus:a.cast([0,0]),capabilities2:a.cast([0,0]),capabilities3:a.cast([0,0])},community_members:{source:a.cast([0,0]),adminActions:a.cast([0,0]),contactCapabilities:a.cast([0,0]),channelBadges:a.cast([0,0]),threadRoles:a.cast([0,0]),requestId:""},ig_thread_info:{igDmSettingsMode:a.cast([0,0]),igDmSettingsTtlSec:a.cast([-1,4294967295])},edit_message_history:{sendStatus:a.cast([0,0])},ig_thread_labels:{labelTimestampMs:a.cast([0,0])},inbox_threads_ranges:{minThreadKey:a.cast([0,0]),minLastActivityTimestampMs:a.cast([0,0]),isLoadingBefore:!1,hasMoreBefore:!1},community_direct_invites_presets:{fallbackUrl:"",pictureUrlExpirationTimestampMs1:a.cast([0,0]),pictureUrlExpirationTimestampMs2:a.cast([0,0]),presetTypeV2:"ALL_MEMBERS"},sync_group_threads_ranges:{minThreadKey:a.cast([0,0]),minLastActivityTimestampMs:a.cast([0,0]),isLoadingBefore:!1,hasMoreBefore:!1},community_chat_polls:{pollType:a.cast([0,0])},community_chat_poll_options:{voteCount:a.cast([0,0]),sortKeyVotingTimestamp:a.cast([0,0]),sortKeyCreationTimestamp:a.cast([0,0])},reactions_v2:{viewerReactionTimestampMs:a.cast([0,0]),lastUpdatedTimestampMs:a.cast([0,0])},group_invitations_pending:{communityJoinRequestStatus:a.cast([0,0]),communityParticipationControlRequestStatus:a.cast([0,0]),communityParticipationControlSetting:a.cast([0,0])},thread_label_mappings:{sortKey:a.cast([0,0])},inbox_view_state:{value:""},inbox_view_state_v2:{value:""},discoverable_chat_participants:{source:a.cast([0,0])},roll_calls:{viewerHasContributed:!1,viewerCanEditPrompt:!1,isBlurred:!1,canViewWithoutContributing:!1},roll_call_contributions_v2:{contributorId:a.cast([0,0]),contributionSource:a.cast([0,0])},shared_albums:{lastActivityTimestampMs:a.cast([0,0]),contributionCount:a.cast([0,0])},shared_album_contributions:{creationTimestampMs:a.cast([0,0]),creatorId:a.cast([0,0])},search_queries:{surfaceType:a.cast([0,1])},universal_search_recent_searches:{lastAccessedTimestampMs:a.cast([0,0])},cm_search_nullstate_metadata:{score:0},ai_bot_search_metadata:{displayName:"",contactViewerRelationship:a.cast([0,0]),score:0},contact_upload_settings:{authorityLevel:a.cast([0,0])},presence_settings:{isActiveStatusViewable:!1,isActiveStatusViewableOnFb:!1,isActiveStatusViewableOnMessenger:!1,hasConvertedToViewSideSettings:!1},video_chat_links_joining:{canAnonymousUsersJoin:a.cast([0,0])},notification_settings:{includeInSwitchAccountBadges:!1,mutePageAccountMessageReminder:!1},avatar_settings:{enableAvatarHotlike:!1},messaging_privacy_settings:{readReceiptsDisabled:a.cast([0,0]),e2eeXmaPreviewsDisabled:!1},rtc_call_events:{isProcessed:!1},custom_thread_commands:{isOpenPersistentMenu:!1},transaction_history:{timestampMs:a.cast([0,0])},thread_themes:{isDeprecated:!1,iconUrl:"",iconUrlFallback:"",backgroundUrl:""},ranking_scores:{score:a.cast([0,0]),scoreIndex:a.cast([0,0])},story_buckets:{pageNum:a.cast([0,0]),readState:a.cast([0,0])},stories:{authorityLevel:a.cast([0,0])},story_viewers:{interactionType:a.cast([0,1]),authorityLevel:a.cast([0,0])},story_reactions:{authorityLevel:a.cast([0,0])},story_ad_unit:{shouldShowAdChoice:!1},story_overlays:{authorityLevel:a.cast([0,0])},rooms:{notificationMutedUntilMs:a.cast([0,0])},media_staging:{progress:a.cast([0,0])},client_messages:{textSize:a.cast([0,0]),sendStatus:a.cast([0,0]),isHidden:!1,isTombstoned:!1,isReplyOnly:!1,messageContentType:a.cast([0,0]),messageContentSubtype:a.cast([0,0]),messageSource:a.cast([0,0]),messageCreationType:a.cast([0,0]),messageEphemeralityType:a.cast([0,0]),replyStatus:a.cast([0,0]),replyMessageTextSize:a.cast([0,0]),replyVicinityStatus:a.cast([0,0]),isForwarded:!1,isReadonly:!1,disabledActionsReason:a.cast([0,0]),shouldPersist:!1,shouldHideInSnippet:!1},client_participants:{isPending:!1,capabilities1:a.cast([0,0]),capabilities2:a.cast([0,0]),readActionTsMs:a.cast([0,0])},client_threads:{isAdminSnippet:!1,isHotlikeSnippet:!1,groupMemberAddMode:a.cast([0,0]),capabilities1:a.cast([0,0]),capabilities2:a.cast([0,0]),isHidden:!1,isTombstoned:!1,isPending:!1,isShadowThread:!1,pinnedMessagesCount:a.cast([0,0])},data_trace_meta:{initTimestampMs:a.cast([0,0]),foregroundTimestampMs:a.cast([0,0]),traceType:a.cast([0,0]),shouldFlush:!1},data_trace_addon:{timestampMs:a.cast([0,0])},secure_encrypted_backups_client_state:{authorityLevel:a.cast([0,0]),encryptionVersion:a.cast([0,0]),revisionVersion:a.cast([0,0])},secure_encrypted_backups_epochs:{authorityLevel:a.cast([0,0])},encrypted_backups:{authorityLevel:a.cast([0,0]),hasOtcEligibleDevices:!1},secure_encrypted_backups_generated_recovery_code:{virtualDeviceType:a.cast([0,1])},encrypted_backups_virtual_devices:{virtualDeviceType:a.cast([0,1]),removalStatus:a.cast([0,1]),requiresHsmMigration:!1},encrypted_backups_metadata:{authorityLevel:a.cast([0,0])},cutover_threads:{isMigrated:!1,showOpenMessageHistory:!1},persistent_menu_ctas:{ctaType:"fallback"},anonymous_task_context:{failureCount:a.cast([0,0])},lightspeed_task_context:{requiresAuthentication:!1}}}),null);
__d("LSTableSchemas",[],(function(a,b,c,d,e,f){e.exports=[[{name:"sync_groups",id:1,primary_key:["groupId"]},{name:"pending_tasks",id:2,primary_key:["taskId"],indexes:{queueNameTaskId:{columns:["queueName","taskId"]}},auto_increment:!0},{name:"network_requests",id:3,primary_key:["taskQueueName","syncDatabaseId"]},{name:"_user_info",id:4,primary_key:["id"]},{name:"pending_fire_and_forget_tasks",id:5,primary_key:["taskId"],auto_increment:!0},{name:"user_visible_errors",id:6,primary_key:["errorId"],auto_increment:!0},{name:"mailbox_task_completion_notification_context",id:232,primary_key:["notificationScopeKey"]},{name:"mailbox_task_completion_api_tasks",id:233,primary_key:["taskId"]}],[{name:"contacts",id:7,primary_key:["id"],indexes:{blockedByViewerStatusId:{columns:["blockedByViewerStatus","id"]}}},{name:"ig_contact_info",id:176,primary_key:["contactId"]},{name:"work_contact_info",id:210,primary_key:["id"]},{name:"contextual_profile_v1",id:216,primary_key:["ownerId","associatedEntityId"],indexes:{associatedEntityIdAndOwner:{columns:["associatedEntityId","ownerId"]}}},{name:"profile_sheet_information",id:256,primary_key:["userId"]},{name:"fb_transport_contacts",id:240,primary_key:["pk"]},{name:"bot_profile_info_v2",id:299,primary_key:["botId"]},{name:"horizon_contact_info",id:323,primary_key:["contactId"]}],[{name:"reactions",id:8,primary_key:["threadKey","messageId","actorId"],indexes:{fk_messages:{columns:["threadKey","timestampMs","messageId","actorId"]}}},{name:"threads",id:9,primary_key:["threadKey"],indexes:{lastActivityTimestampMs:{columns:["lastActivityTimestampMs","threadKey"]},parentThreadKeyLastActivityTimestampMs:{columns:["parentThreadKey","lastActivityTimestampMs","threadKey"]},secondaryParentThreadKeyLastActivityTimestampMs:{columns:["secondaryParentThreadKey","lastActivityTimestampMs","threadKey"],ignore_nulls:["secondaryParentThreadKey"]},clientThreadKey:{columns:["clientThreadKey","threadKey"],ignore_nulls:["clientThreadKey"]},threadTypeLastActivityTimestampMs:{columns:["threadType","lastActivityTimestampMs","threadKey"]},syncGroupParentThreadKeyLastActivityTimestampMs:{columns:["syncGroup","parentThreadKey","lastActivityTimestampMs","threadKey"]}}},{name:"threads_ranges_v2__generated",id:10,primary_key:["parentThreadKey","minThreadKey","minLastActivityTimestampMs"]},{name:"messages",id:12,primary_key:["threadKey","timestampMs","messageId"],indexes:{optimistic:{columns:["offlineThreadingId"]},messageDisplayOrder:{columns:["threadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"]},messageId:{columns:["messageId"]},messageSubthreadKey:{columns:["subthreadKey","primarySortKey","secondarySortKey","messageId","isCollapsed"],ignore_nulls:["subthreadKey"]},replySourceIdMessageID:{columns:["replySourceId","messageId"],ignore_nulls:["replySourceId"]},ephemeralExpirationTs:{columns:["ephemeralExpirationTs","messageId"],ignore_nulls:["ephemeralExpirationTs"]},threadKeyPrimarySortKeySecondarySortKeyBotResponseId:{columns:["threadKey","primarySortKey","secondarySortKey","botResponseId","messageId"],ignore_nulls:["botResponseId"]}}},{name:"messages_ranges_v2__generated",id:13,primary_key:["threadKey","minTimestampMs","minMessageId"]},{name:"participants",id:14,primary_key:["threadKey","contactId"],indexes:{threadKeyReadWatermarkTimestampMs:{columns:["threadKey","readWatermarkTimestampMs","contactId"]},threadKeyDeliveredWatermarkTimestampMs:{columns:["threadKey","deliveredWatermarkTimestampMs","contactId"]},contactIdThreadKey:{columns:["contactId","threadKey"]}}},{name:"ctas",id:15,primary_key:["ctaId"]},{name:"attachments",id:16,primary_key:["threadKey","messageId","attachmentFbid"],indexes:{fk_messages:{columns:["threadKey","timestampMs","messageId","attachmentFbid"]},idx_attachments_collapsible_id:{columns:["threadKey","collapsibleId","messageId","attachmentFbid"]}}},{name:"attachments_ranges_v2__generated",id:17,primary_key:["threadKey","mediaGroup","minTimestampMs"]},{name:"attachment_items",id:18,primary_key:["attachmentFbid","attachmentIndex"],indexes:{fk_attachments:{columns:["threadKey","messageId","attachmentFbid","attachmentIndex"]}}},{name:"attachment_ctas",id:19,primary_key:["ctaId"],indexes:{fk_attachments:{columns:["threadKey","messageId","attachmentFbid","ctaId"]}}},{name:"quick_reply_ctas",id:20,primary_key:["threadKey","messageId","ctaId"]},{name:"m_suggestions",id:21,primary_key:["threadKey","timestampMs","suggestionId"]},{name:"rtc_signals",id:22,primary_key:["timestampMs","type_"]},{name:"rtc_ongoing_calls_on_threads_v2",id:23,primary_key:["threadKey"]},{name:"rtc_multiway_call_initiation_conference_names",id:24,primary_key:["threadKey"]},{name:"mailbox_metadata",id:25,primary_key:["id"]},{name:"group_membership_approval_requests",id:26,primary_key:["threadKey","contactId"]},{name:"admin_message_ctas",id:27,primary_key:["threadKey","messageId","ctaId"],indexes:{ctaId:{columns:["ctaId"]}}},{name:"thread_nullstate",id:28,primary_key:["threadKey"]},{name:"thread_nullstate_ctas",id:29,primary_key:["ctaId"],indexes:{threadKeyCtaId:{columns:["threadKey","ctaId"]}}},{name:"focus_mode_ctas",id:30,primary_key:["threadKey","messageId","ctaId"]},{name:"messages_optimistic_context",id:31,primary_key:["taskId"]},{name:"threads_optimistic_context",id:32,primary_key:["taskId"]},{name:"messages_status",id:33,primary_key:["messageId","threadKey","timestampMs","threadKeyFromParticipants","contactId","type_"]},{name:"message_requests",id:34,primary_key:["threadKey"]},{name:"folder_metadata",id:35,primary_key:["parentThreadKey"]},{name:"polls",id:38,primary_key:["pollId"]},{name:"poll_options_v2",id:39,primary_key:["pollId","optionId"]},{name:"poll_votes_v2",id:40,primary_key:["pollId","optionId","contactId"]},{name:"pinned_messages_v2",id:155,primary_key:["threadKey","messageId"]},{name:"filtered_threads_ranges_v3__generated",id:247,primary_key:["parentThreadKey","minThreadKey","minLastActivityTimestampMs","threadRangeFilter","folderName","secondaryThreadRangeFilter","threadRangeFilterValue"]},{name:"community_folders",id:162,primary_key:["folderId"],indexes:{byFbGroupId:{columns:["fbGroupId","folderId"]}}},{name:"community_members",id:170,primary_key:["communityId","contactId","source","requestId"],indexes:{communitySource:{columns:["communityId","source","requestId","contactId","name"]},communityContact:{columns:["communityId","contactId","requestId","source","name"]}}},{name:"community_members_ranges_v2__generated",id:189,primary_key:["communityId","isAdmin","minName","source","requestId"]},{name:"attachment_conversion",id:164,primary_key:["attachmentFbid"]},{name:"saved_messages",id:165,primary_key:["threadKey","messageId"]},{name:"rtc_rooms_on_threads",id:181,primary_key:["threadKey"]},{name:"ig_thread_info",id:194,primary_key:["threadKey"],indexes:{igThreadID:{columns:["igThreadId"]}}},{name:"edit_message_history",id:322,primary_key:["pk"],indexes:{originalMsgPkEditTs:{columns:["originalMessagePk","serverAdjustedEditTsMs"]}},auto_increment:!0},{name:"ig_thread_labels",id:318,primary_key:["threadKey","labelType"]},{name:"group_invites",id:197,primary_key:["threadKey","inviterId","inviteeId"],indexes:{threadKeyInviterIDInviteeID:{columns:["threadKey","inviterId","inviteeId"]}}},{name:"inbox_threads_ranges",id:198,primary_key:["syncGroup"]},{name:"community_direct_invites_presets",id:199,primary_key:["communityId","presetType","source"]},{name:"msg_pinned_messages_v2",id:205,primary_key:["threadKey","messageId","pinnedTimestampMs"],indexes:{pinnedMessageDisplayOrder:{columns:["threadKey","pinnedTimestampMs","messageId"]}}},{name:"filtered_messages_ranges_v2__generated",id:211,primary_key:["threadKey","mailboxType","minTimestampMs","minMessageId","messageRangeFilter"]},{name:"taken_down_threads",id:212,primary_key:["threadKey"]},{name:"participant_list_queries",id:219,primary_key:["threadKey"]},{name:"sync_group_threads_ranges",id:220,primary_key:["syncGroup","parentThreadKey"]},{name:"community_chat_message_seen_count",id:221,primary_key:["threadKey","messageId"]},{name:"community_chat_polls",id:223,primary_key:["pollId"]},{name:"community_chat_poll_options",id:224,primary_key:["pollId","optionId"]},{name:"community_chat_poll_votes",id:225,primary_key:["pollId","optionId","contactId"]},{name:"reactions_v2",id:226,primary_key:["threadKey","messageId","reactionFbid","messageTimestamp"],indexes:{optimistic:{columns:["threadKey","messageId","reactionFbid"]}}},{name:"reactions_v2_details_users",id:227,primary_key:["reactorId","reactionFbid"]},{name:"reactions_v2_details_users_ranges_v2__generated",id:228,primary_key:["reactorId","reactionFbid","minTimestampMs"]},{name:"reaction_v2_types",id:229,primary_key:["reactionFbid"]},{name:"bots",id:230,primary_key:["threadKey","botId"]},{name:"business_comm_items",id:234,primary_key:["threadKey","entId"]},{name:"group_invitations_pending",id:235,primary_key:["linkHash"]},{name:"business_support_notification_settings",id:236,primary_key:["userId"]},{name:"thread_label_mappings",id:237,primary_key:["threadKey","labelId"]},{name:"inbox_view_state",id:277,primary_key:["interface_","configName"]},{name:"inbox_view_state_v2",id:281,primary_key:["configName"]},{name:"audio_channel_events",id:238,primary_key:["eventId","roomId"]},{name:"reactions_v2_details",id:239,primary_key:["threadId","messageId","reactorId","reactionFbid"]},{name:"reactions_v2_details_ranges_v2__generated",id:243,primary_key:["threadId","messageId","reactionFbid","minTimestampMs"]},{name:"community_chat_poll_votes_ranges_v2__generated",id:244,primary_key:["pollId","optionId","minTimestampMs"]},{name:"discoverable_chat_participants",id:248,primary_key:["threadId","contactId","source"]},{name:"discoverable_chat_participants_ranges_v2__generated",id:249,primary_key:["threadId","source","minName"]},{name:"roll_calls",id:250,primary_key:["rollCallId","threadKey"]},{name:"community_surface_ranges",id:253,primary_key:["surfaceType","communityKey"]},{name:"community_rules",id:254,primary_key:["communityId","ruleId"]},{name:"roll_call_contributions_v2",id:255,primary_key:["rollCallContributionId","rollCallId","messageId","messageTimestampMs","threadKey"],indexes:{optimistic:{columns:["rollCallContributionId","rollCallId","messageId","messageTimestampMs"]}}},{name:"business_thread_info",id:260,primary_key:["threadKey"]},{name:"thread_creation_status",id:278,primary_key:["taskId"]},{name:"shared_albums",id:279,primary_key:["sharedAlbumId","threadKey"]},{name:"shared_album_contributions",id:280,primary_key:["sharedAlbumId","sharedAlbumContributionId","threadKey","messageId"]},{name:"shared_albums_multimedia_upload_jobs",id:283,primary_key:["offlineThreadingId"]},{name:"shared_albums_multimedia_upload_subjobs_status",id:284,primary_key:["offlineThreadingId","jobId"]},{name:"thread_point_query_ttrc",id:286,primary_key:["threadKey"]},{name:"business_thread_suggestions",id:290,primary_key:["threadKey","suggestionType"]},{name:"community_chat_admin_assist_command_sequences",id:291,primary_key:["commandSequenceId"]},{name:"community_thread_sync_info",id:294,primary_key:["threadKey"]},{name:"thread_bans",id:297,primary_key:["threadKey","contactId"]},{name:"support_translations",id:300,primary_key:["messageId","targetLocale"]},{name:"threads_optimistic_metadata",id:312,primary_key:["threadKey"]},{name:"ai_bot_feedback_submission_status",id:315,primary_key:["botResponseId"]},{name:"igd_xma_receiver_fetch",id:316,primary_key:["messageId"]}],[{name:"media_send_jobs",id:51,primary_key:["offlineAttachmentId"]}],[{name:"typing_indicator",id:52,primary_key:["threadKey","senderId"]}],[{name:"server_search_results",id:65,primary_key:["query","resultId","globalIndex"]},{name:"server_search_sections",id:66,primary_key:["query","globalIndex"]},{name:"search_queries",id:67,primary_key:["query","surfaceType"]},{name:"universal_search_recent_searches",id:68,primary_key:["resultId"]},{name:"message_search_results",id:69,primary_key:["type_","query","threadKey","globalIndex"]},{name:"message_search_queries",id:70,primary_key:["type_","query","threadKeyV2"]},{name:"participant_search_queries",id:214,primary_key:["query","threadKey"]}],[{name:"cm_search_nullstate_metadata",id:289,primary_key:["threadKey","scoreType"]}],[{name:"ai_bot_search_metadata",id:298,primary_key:["botId"]}],[{name:"contact_upload_settings",id:74,primary_key:["userid"]},{name:"gdpr_settings",id:75,primary_key:["userid"]},{name:"presence_settings",id:187,primary_key:["userId"]},{name:"persistent_menu_items",id:77,primary_key:["threadKey","ctaId"]},{name:"video_chat_links_joining",id:78,primary_key:["url","optimisticClientToken"],indexes:{optimistic:{columns:["optimisticClientToken"]}}},{name:"video_chat_links_attempted_joiners",id:79,primary_key:["userId","url"]},{name:"cowatch_sessions",id:80,primary_key:["cowatchSessionId"]},{name:"self_profile",id:81,primary_key:["userId"]},{name:"pinned_threads",id:82,primary_key:["threadKey"],indexes:{pinnedTimestamp:{columns:["pinnedTimestamp","threadKey"]}}},{name:"messaging_settings",id:83,primary_key:["id"]},{name:"reachability_settings",id:148,primary_key:["audience"]},{name:"feature_limits",id:150,primary_key:["type_"]},{name:"emoji_sets",id:151,primary_key:["categoryIdx","emojiIdx","type_"]},{name:"epd_cookie_settings",id:163,primary_key:[]},{name:"cm_community_list",id:166,primary_key:["communityId"]},{name:"cm_channel_list",id:167,primary_key:["communityId","threadId"],indexes:{threadIdCommunityId:{columns:["threadId","communityId"]}}},{name:"cm_category_list",id:182,primary_key:["communityId","categoryId"]},{name:"notification_settings",id:175,primary_key:["id"]},{name:"encrypted_backups_status_trigger",id:195,primary_key:["pk"],auto_increment:!0},{name:"fb_events",id:200,primary_key:["eventId"]},{name:"cm_channel_events",id:201,primary_key:["eventId","threadId"],indexes:{eventsInThread:{columns:["threadId","eventId"]}}},{name:"community_events",id:202,primary_key:["eventId","communityId"]},{name:"avatar_settings",id:209,primary_key:["threadId"]},{name:"thread_labels",id:215,primary_key:["labelId"]},{name:"thread_limits",id:287,primary_key:["threadKey"]},{name:"business_support_case_details",id:222,primary_key:["threadId"]},{name:"messaging_privacy_settings",id:288,primary_key:["userId"]},{name:"rtc_call_events",id:245,primary_key:["pk"],auto_increment:!0},{name:"custom_thread_commands",id:296,primary_key:["threadKey","commandId"],indexes:{rank:{columns:["threadKey","rank"]},commandId:{columns:["commandId"]}}},{name:"msgr_quiet_time",id:317,primary_key:["quietTimeId"],indexes:{quietTimeId:{columns:["quietTimeId"]}}}],[{name:"payment_type_paypal",id:85,primary_key:["paymentCredentialId"]},{name:"payment_type_card",id:86,primary_key:["paymentCredentialId"]},{name:"payment_type_bank_v2",id:88,primary_key:["paymentMethodId"]},{name:"payment_method",id:89,primary_key:["paymentMethodId"]},{name:"new_payment_credential_option",id:90,primary_key:["credentialType"]},{name:"paypal_funding_options",id:91,primary_key:["optionId"]},{name:"payments_eligibility",id:92,primary_key:["userId"]},{name:"payments_ofac_blacklisted_countries",id:93,primary_key:["isoCountryCode"]},{name:"p2m_invoice",id:94,primary_key:["orderId"]},{name:"p2m_invoice_attachment",id:95,primary_key:["orderId","productItemId"]},{name:"payment_price_list_item",id:96,primary_key:["orderId","id"]},{name:"p2m_charge",id:97,primary_key:["orderId"]},{name:"payment_p2p_risk_verification",id:98,primary_key:["requestId","transactionId"]},{name:"payment_transaction_v2",id:99,primary_key:["timestampMs","transactionId"],indexes:{optimistic:{columns:["optimisticTransactionId"]}}},{name:"p2p_request_v2",id:100,primary_key:["timestampMs","transactionId"],indexes:{optimistic:{columns:["optimisticTransactionId"]}}},{name:"p2p_transfer_v2",id:101,primary_key:["timestampMs","transactionId"],indexes:{optimistic:{columns:["optimisticTransactionId"]}}},{name:"transaction_history",id:102,primary_key:["transactionId"]},{name:"payments_transaction_details_core",id:103,primary_key:["transactionId"]},{name:"payments_transaction_details_ctas",id:104,primary_key:["transactionId","ctaId"]},{name:"payments_transaction_details_rows",id:105,primary_key:["transactionId","rowOrder"]},{name:"payment_user_auth",id:106,primary_key:["userId"]},{name:"payment_client_auth_token",id:107,primary_key:["userId","deviceId","appId"]},{name:"payment_auth_request_results",id:108,primary_key:["requestId"]},{name:"payment_server_request_results",id:109,primary_key:["requestId"]},{name:"payment_pin_verification_results",id:113,primary_key:["requestId"]}],[{name:"connectivity_status",id:114,primary_key:["statusId"],auto_increment:!0},{name:"user_visible_network_connectivity_error",id:115,primary_key:["statusId"],auto_increment:!0}],[{name:"thread_themes",id:116,primary_key:["fbid"]},{name:"gradient_colors",id:117,primary_key:["themeFbid","gradientIndex"]}],[{name:"in_thread_banner",id:118,primary_key:["threadKey","bannerId"]},{name:"in_thread_banner_ctas",id:119,primary_key:["bannerId","ctaId"]},{name:"in_thread_banner_overflow_menu",id:120,primary_key:["threadKey","bannerId"]}],[{name:"stickers",id:121,primary_key:["stickerId"],indexes:{stickerPackId:{columns:["stickerPackId","stickerId"]}}},{name:"sticker_packs",id:122,primary_key:["packId"]},{name:"sticker_search_results",id:123,primary_key:["resultIndex","query","type_"]},{name:"sticker_search_queries",id:124,primary_key:["query"]},{name:"sticker_search_featured_tags",id:125,primary_key:["tagIndex"]},{name:"sticker_to_collection",id:126,primary_key:["stickerId","collectionId"]},{name:"sticker_pack_details",id:127,primary_key:["packId"]},{name:"sticker_store_pack_indices",id:128,primary_key:["packId"]}],[{name:"forward_content",id:129,primary_key:["value","type_"]}],[{name:"linked_groups",id:130,primary_key:["id"],indexes:{threadKey:{columns:["threadKey"]}}}],[{name:"ranking_scores",id:134,primary_key:["contactId","scoreType"],indexes:{scoreTypeContactId:{columns:["scoreType","contactId"]}}},{name:"ranking_requests",id:135,primary_key:["scoreType"]},{name:"value_model_rules",id:136,primary_key:["product","ruleIndex"]},{name:"value_model_features",id:137,primary_key:["feature"]},{name:"value_model_output",id:138,primary_key:["product","contactId"]}],[{name:"story_buckets",id:53,primary_key:["bucketId"],indexes:{optimistic:{columns:["ownerId","bucketType"]}}},{name:"stories",id:54,primary_key:["storyId"],indexes:{optimistic:{columns:["optimisticClientId"]}}},{name:"story_viewers",id:55,primary_key:["storyId","viewerContactId","interactionType"]},{name:"story_reactions",id:56,primary_key:["reactionId"],indexes:{optimistic:{columns:["optimisticClientId"]}}},{name:"story_ad_unit",id:57,primary_key:["adPosition","clientToken"]},{name:"story_ad_card",id:58,primary_key:["adPosition","clientToken","cardId"]},{name:"story_ad_ctas",id:59,primary_key:["ctaId"]},{name:"story_overlays",id:60,primary_key:["storyId","storyOverlayId"]},{name:"story_buckets_paginated_queries",id:61,primary_key:["queryId"]},{name:"status",id:62,primary_key:["statusId"],indexes:{optimistic:{columns:["optimisticClientId"]}}},{name:"rooms",id:63,primary_key:["roomId"],indexes:{optimistic:{columns:["optimisticClientToken"]}}},{name:"room_participants",id:64,primary_key:["roomId","participantId","type_"],indexes:{optimistic:{columns:["roomId","participantId"]}}}],[{name:"live_location_sharers",id:149,primary_key:["threadKey","userId"]}],[{name:"mi_act_mapping_table",id:173,primary_key:["serverThreadKey","clientThreadPk","jid"],indexes:{fk_threads:{columns:["serverThreadKey"]},chat_id:{columns:["clientThreadPk"]},jid:{columns:["jid"]}}},{name:"media_staging",id:161,primary_key:["offlineAttachmentId"]},{name:"client_accounts",id:272,primary_key:["pk"]},{name:"client_messages",id:273,primary_key:["pk"]},{name:"client_participants",id:274,primary_key:["pk"]},{name:"client_threads",id:276,primary_key:["pk"]}],[{name:"data_trace_meta",id:153,primary_key:["traceId"],indexes:{shouldFlushInitTimestampMsTraceId:{columns:["shouldFlush","initTimestampMs","traceId"]}}},{name:"data_trace_addon",id:154,primary_key:["addonId"],indexes:{traceIdAddonId:{columns:["traceId","addonId"]}},auto_increment:!0}],[{name:"ad_context",id:160,primary_key:["adId"]}],[{name:"thread_proactive_warning_settings",id:183,primary_key:["threadKey"]},{name:"client_thread_proactive_warning_settings",id:241,primary_key:["threadPk"]}],[{name:"presence_states",id:186,primary_key:["contactId"],indexes:{statusContactId:{columns:["status","contactId"]}}}],[{name:"available_reactions",id:188,primary_key:["emojiIdx"]}],[{name:"pending_backups_context_v2",id:177,primary_key:["pk"],indexes:{fk_pending_tasks:{columns:["pendingBackupTaskId"]}},auto_increment:!0},{name:"secure_encrypted_backups_client_state",id:168,primary_key:["backupId"]},{name:"encrypted_backups_debug_metadata",id:206,primary_key:["backupId"]},{name:"encrypted_backups_epoch_debug_metadata",id:207,primary_key:["epochId"]},{name:"encrypted_backups_debug_metadata_v2",id:217,primary_key:["backupId"]},{name:"encrypted_backups_epoch_debug_metadata_v2",id:218,primary_key:["epochId"]},{name:"secure_encrypted_backups_epochs",id:169,primary_key:["epochId"],indexes:{fk_secure_encrypted_backups_client_state:{columns:["backupId","epochId"]}}},{name:"encrypted_backups",id:172,primary_key:["pk"],auto_increment:!0},{name:"secure_encrypted_backups_generated_recovery_code",id:174,primary_key:["pk"]},{name:"secure_encrypted_backups_recovery_code_status",id:178,primary_key:["pk"]},{name:"secure_recovery_code_data",id:179,primary_key:["taskId"],indexes:{fk_pending_tasks:{columns:["taskId"]}}},{name:"secure_encrypted_backups_message_thread_id_context",id:180,primary_key:["taskId","listId"],indexes:{fk_pending_tasks:{columns:["taskId"]}}},{name:"encrypted_backups_virtual_devices",id:184,primary_key:["pk"],auto_increment:!0},{name:"encrypted_backups_metadata",id:196,primary_key:["backupId"]},{name:"device_metadata",id:185,primary_key:["pk"]},{name:"encrypted_backup_restore_task_payload_context",id:190,primary_key:["taskId"]},{name:"encrypted_backups_dyi_backup_restore_status",id:208,primary_key:["pk"]},{name:"encrypted_backups_message_backup_status",id:213,primary_key:["messagePk"]},{name:"encrypted_backups_client_restore_status",id:231,primary_key:["threadId"]},{name:"third_party_id_store",id:242,primary_key:["platform"]},{name:"secure_get_secrets_context",id:259,primary_key:["deviceRegistrationId"]},{name:"encrypted_backups_otc_devices",id:261,primary_key:["deviceId"]},{name:"experiences_shared_state",id:282,primary_key:["stateKey"]},{name:"encrypted_backups_otc_notification_sending_status",id:285,primary_key:["pk"]},{name:"pending_protobuf_backups_context",id:305,primary_key:["pk"],auto_increment:!0}],[{name:"secure_encrypted_backups_devices",id:191,primary_key:["deviceId"]},{name:"secure_encrypted_backups_device_supported_versions",id:192,primary_key:["deviceId","supportedVersion"],indexes:{fk_secure_encrypted_backups_device_supported_versions_device_id:{columns:["deviceId","supportedVersion"]}}}],[{name:"e2ee_dummy_table_for_sync",id:171,primary_key:["placeholder"]},{name:"cutover_threads",id:193,primary_key:["openThreadId"]},{name:"occamadillo_most_recent_message_per_thread",id:292,primary_key:["threadKey"]},{name:"offline_queue_thread_status",id:295,primary_key:["threadJid"]},{name:"client_message_translation_info",id:324,primary_key:["pk"]}],[{name:"community_messaging_aggregated_user_presence_counts_for_community",id:203,primary_key:["folderId"]},{name:"community_messaging_aggregated_copresence_counts_for_chat",id:204,primary_key:["threadId"]}],[{name:"workrooms_co_presence_states",id:246,primary_key:["userId"],indexes:{userCoPresence:{columns:["userId","coPresenceObjectId"]}}}],[{name:"persistent_menu_ctas",id:251,primary_key:["threadKey","ctaId"]}],[{name:"workroom_creation_requests",id:252,primary_key:["creationId"]}],[{name:"pake_messages",id:258,primary_key:["sessionId"]}],[{name:"workroom_invites",id:257,primary_key:["inviteId"]}],[{name:"work_genai",id:293,primary_key:["threadKey","messageId"]}],[{name:"local_message_persistence_store",id:301,primary_key:["pk"],auto_increment:!0},{name:"local_message_persistence_store_supplemental",id:302,primary_key:["pk"],auto_increment:!0},{name:"local_message_persistence_store_deleted_messages",id:303,primary_key:["pk"],auto_increment:!0},{name:"local_message_persistence_store_tag_index",id:304,primary_key:["pk"],auto_increment:!0}],[{name:"secure_acs_configurations",id:307,primary_key:["configId"]},{name:"secure_acs_blinded_tokens",id:308,primary_key:["tokenId"],auto_increment:!0},{name:"secure_acs_tokens",id:309,primary_key:["tokenId"]},{name:"acs_request_context",id:310,primary_key:["taskId"]},{name:"anonymous_task_context",id:311,primary_key:["taskId"]}],[{name:"lightspeed_task_context",id:306,primary_key:["taskId"]}],[{name:"ohai_gateway_key_configs",id:313,primary_key:["keyId"]}],[{name:"client_xmas",id:314,primary_key:["pk"]}],[{name:"supervision_edge",id:319,primary_key:["edgeId"]},{name:"supervision_metadata",id:320,primary_key:["supervisionMetadataId"]},{name:"screen_time",id:321,primary_key:["recordId"],auto_increment:!0}]]}),null);
__d("isInstamadillo",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("662")===!0}g["default"]=a}),98);
__d("ReStoreVaulting",["cr:2075","cr:2151","cr:2203"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return b("cr:2075")!=null?b("cr:2075").vault(a):a}function c(a){return b("cr:2075")!=null?b("cr:2075").unvault(a):a}function d(a,c){return b("cr:2151")!=null&&b("cr:2203")!=null?b("cr:2151").unvaultDbRow(a,c,b("cr:2203").PERSISTED_DB_VAULT_DEFINITIONS):a}function e(a,c){return b("cr:2151")!=null&&b("cr:2203")!=null?b("cr:2151").vaultDbRow(a,c,b("cr:2203").PERSISTED_DB_VAULT_DEFINITIONS):a}g.maybeVault=a;g.maybeUnvault=c;g.maybeUnvaultDbRow=d;g.maybeVaultDbRow=e}),98);
__d("MAWLSVaultingHooks",["ReStoreVaulting"],(function(a,b,c,d,e,f,g){"use strict";a={onAfterEntriesNext:function(a){var b=a.tableName;a=a.value;return d("ReStoreVaulting").maybeVaultDbRow(a,b)},onAfterGet:function(a){var b=a.tableName;a=a.value;return d("ReStoreVaulting").maybeVaultDbRow(a,b)},onBeforeAdd:function(a){var b=a.tableName;a=a.value;return d("ReStoreVaulting").maybeUnvaultDbRow(a,b)},onBeforeNotify:function(a){var b=a.newValue,c=a.prevValue;a=a.tableName;return{newValue:d("ReStoreVaulting").maybeVaultDbRow(b,a),prevValue:d("ReStoreVaulting").maybeVaultDbRow(c,a)}},onBeforePut:function(a){var b=a.tableName;a=a.value;return d("ReStoreVaulting").maybeUnvaultDbRow(a,b)},onBeforeUpsert:function(a){var b=a.tableName;a=a.value;return d("ReStoreVaulting").maybeUnvaultDbRow(a,b)}};g["default"]=a}),98);
__d("LSStorage",["ReStoreKeyComparer"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return(h||(h=d("ReStoreKeyComparer"))).compareKey(a,b)===0}g.areKeysEqual=a}),98);
__d("LSDbSchema",["MAWDbSchema.restore"],(function(a,b,c,d,e,f){"use strict";a=importNamespace("MAWDbSchema.restore").clientSchema;f.clientSchema=a}),66);
__d("LSTransactionLogger",["cr:8879"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:8879")}),98);
__d("ReStoreDefaultValuesMetadata",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b={c:"string",t:"string"};for(var d in b){if(!Object.prototype.hasOwnProperty.call(a,d)||a[d]==null){c("FBLogger")("messenger_web_product").warn('Malformed default values data, missing key "%s"',d);return null}var e=a[d],f=b[d];e=typeof e;if(e!==f){c("FBLogger")("messenger_web_product").warn('Malformed default values data, key "%s" has type "%s" but expected "%s"',d,e,f);return null}}if(typeof a.c!=="string"||typeof a.t!=="string")return null;e=[];f=a.t;try{e=JSON.parse(a.c);for(d=0;d<e.length;d++){b=e[d];if(typeof b!=="string")return null}}catch(a){return null}return{columns:e,tableName:f}}function b(a){return{c:JSON.stringify(a.columns),t:a.tableName}}d="_db_defaults_meta";e="_db_schema_meta";g.tryParseDefaultValuesData=a;g.defaultValuesColumnToValue=b;g.defaultValuesTableName=d;g.schemaVersionTableName=e}),98);
__d("ReStoreUtils",["I64","LSStorage","LSTableDefaults","ReQLBounds","ReStoreKeyComparer","isPromise","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;async function a(a){var b=[],c=await a.next();while(!c.done)b.push(c.value),c=await a.next();return b}function l(a,b,d){var e=a.indexes;a=a.primaryKeyIds;a=d==null?a:e[d];return a.map(function(a){if(b[a]!==void 0||d!=null)return b[a];throw c("unrecoverableViolation")("primary key must be defined on object","messenger_web_product")})}function m(a,b){var d=c("LSTableDefaults")[b];return!d?a:Object.keys(d).reduce(function(a,b){Object.prototype.hasOwnProperty.call(a,b)||(a[b]=d[b]);return a},babelHelpers.extends({},a))}function n(a,b,c,e,f,g,h){function i(){var j=a.table(c.name),l=babelHelpers.extends({},(k||(k=d("ReQLBounds"))).extendBounds(g,(e===void 0?c.primaryKeyIds:c.indexes[e]).length),{dir:f}),m=e==null?j.tableEntries(b,l):j.indexEntries(b,e,l);return j={next:function*(a,b){a=(yield* m.next(b));if(a.done)return{done:!0};b=a.value[1];return{done:!1,value:[a.value[0],h==null?b:h.afterEntriesNext({tableName:c.name,value:b})]}}},j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]=i,j}return i()}function b(a,b,c,e,f,g){function h(){var i=a.table(c.name),j=i.keys(b,e,babelHelpers.extends({},(k||(k=d("ReQLBounds"))).extendBounds(g,(e===void 0?c.primaryKeyIds:c.indexes[e]).length),{dir:f}));return i={next:function*(a,b){return yield* j.next(b)}},i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]=h,i}return h()}function o(a,b){function d(b){if(b.done)return b.value;if(!(h||(h=c("isPromise")))(b.value))throw c("unrecoverableViolation")("expected promise","messenger_web_product");return b.value.then(function(b){return d(a.next(b))})}return d(a.next(b))}async function e(a,b,c,d,e,f,g){f=a.table(c);d!=null?a=await o(f.indexGet(b,d,e)):a=await o(f.tableGet(b,e));return a===void 0?void 0:g.afterGet({tableName:c,value:a})}function f(a,b,c){return(a.has(b)?a:a.set(b,c())).get(b)}function p(a){a=(i||(i=d("I64"))).cast(a);if(a===void 0)throw c("unrecoverableViolation")("Expected int64","messenger_web_product");return i.to_float(a)}function q(a,b,c,d,e){b=JSON.stringify([b,c]);c=a.get(b);(c==null?d:c[0])==null&&e==null?a.delete(b):a.set(b,[c==null?d:c[0],e])}function* r(a,b,c,e,f,g,h,i,k){function m(a,b){return a.length>=b?a:[].concat(a,[(j||(j=d("ReStoreKeyComparer"))).MAX_KEY])}if(h!=null&&(j||(j=d("ReStoreKeyComparer"))).compareKey(g,h)===0)return;f=a.tableNames[f];var o=f.cascadeUpdates,p=f.primaryKeyIds;f=function*(d){var f=d.indexName;d=d.tableName;var j=a.tableNames[d],o=j.indexes,q=j.primaryKeyIds,s=f==null?q:o[f];q={gte:g,lte:m(g,s.length)};o=n(c,e,j,f,"asc",q);j=[];f=(yield* o.next(k));while(!f.done)j.push(f.value),f=(yield* o.next(k));for(q of j){q[0];o=q[1];f=l(a.tableNames[d],o);if(h===void 0)yield* u(a,b,c,e,d,f,k),yield* r(a,b,c,e,d,f,void 0,i,k);else{j=p.reduce(function(a,b,c){if(c>=h.length)return a;a[s[c]]=h[c];return a},babelHelpers.extends({},o));yield* t(a,b,c,e,d,f,j,i,k);yield* r(a,b,c,e,d,f,l(a.tableNames[d],j),i,k)}}};for(o of o)yield* f(o)}function* s(a,b,c,e,f,g,h,k){var n=c.table(f),o=a.tableNames[f];if(o.autoIncrement){var r=g[o.primaryKeyIds[0]];r=(i||(i=d("I64"))).of_float(yield* n.incrementSeed(e,r===void 0?r:p(r)));g[o.primaryKeyIds[0]]=r}r=l(o,g);var s={},t=(yield* n.tableGet(e,r)),u=g;t!==void 0?s=v(o,Object.keys(o.indexes),t):u=m(g,o.name);g=(yield* n.tableSet(e,r,u));var y=g[0];g=g[1];o=v(o,Object.keys(o.indexes),u);var z=babelHelpers.extends({},o);for(var A of Object.keys(z))s[A]!==void 0&&(j||(j=d("ReStoreKeyComparer"))).compareKey(s[A],z[A])===0&&(delete z[A],delete s[A]);yield* w(a,b,c,e,f,z,h,k);yield* x(c,e,f,y,g?o:z);for(A of Object.keys(s))yield* n.indexDelete(e,A,s[A]);q(b,f,r,t,u);return r}function* t(a,b,c,e,f,g,h,i,j){var k=l(a.tableNames[f],h);d("LSStorage").areKeysEqual(g,k)||(yield* u(a,b,c,e,f,g,j));yield* s(a,b,c,e,f,h,i,j)}function* u(a,b,c,d,e,f,g){g=c.table(e);c=a.tableNames[e];a=(yield* g.tableGet(d,f));if(a!==void 0){if(Object.keys(c.indexes).length)for(var h of Object.keys(c.indexes)){var i=l(c,a,h);i!=null&&(yield* g.indexDelete(d,h,i))}yield* g.tableDelete(d,f);q(b,e,f,a,void 0)}}function v(a,b,c){return b.reduce(function(b,d){var e;e=(e=a.indexPredicates)==null?void 0:e[d];if(e!=null&&!e(c))return b;e=l(a,c,d);b[d]=e;return b},{})}function* w(a,b,c,d,e,f,g,h){var i=c.table(e);for(var j of Object.keys(f)){var k=f[j];k=(yield* i.indexGet(d,j,k));if(k!=null){k=l(a.tableNames[e],k);yield* u(a,b,c,d,e,k,h);yield* r(a,b,c,d,e,k,void 0,g,h)}}}function* x(a,b,c,d,e){a=a.table(c);for(c of Object.keys(e)){var f=e[c];f===void 0?yield* a.indexDelete(b,c,f):yield* a.indexSet(b,c,f,d)}}g.collectIterator=a;g.searchKey=l;g.appendDefaultValues=m;g.entries=n;g.keys=b;g.gen=o;g.getLocked=e;g.getOrCreate=f;g.cascadeKeyUpdatesLocked=r;g.putLocked=s;g.upsertLocked=t;g.deleteItemLocked=u;g.indicesWithKeyForValue=v;g.deconflictIndicesLocked=w;g.addIdToIndices=x}),98);
__d("ReStoreDefaultValueMigration",["LSPlatformLsInitLog","LSTableDefaults","ReStoreDefaultValuesMetadata","ReStoreUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c={};b=(yield d("ReStoreUtils").collectIterator(b.table(d("ReStoreDefaultValuesMetadata").defaultValuesTableName).entries(a)));for(a of b){b=a[0];var e=a[1];if(b!=null){var f;b=d("ReStoreDefaultValuesMetadata").tryParseDefaultValuesData(e);if(b==null)continue;e=b.columns;b=b.tableName;c[b]=(f=c[b])!=null?f:new Set();for(f of e)c[b].add(f)}}return c});return i.apply(this,arguments)}function j(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d){a=(yield h(a,b));b={};for(d in d.tableNames){var e=c("LSTableDefaults")[d];if(e!=null)for(var f in e){var g;g=(g=a[d])==null?void 0:g.has(f);if(!g){b[d]=(g=b[d])!=null?g:{};b[d][f]=e[f]}}}return b});return k.apply(this,arguments)}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){for(b in b){var e=Object.keys(c("LSTableDefaults")[b]||{});e={columns:e,tableName:b};yield a.table(d("ReStoreDefaultValuesMetadata").defaultValuesTableName).put(d("ReStoreDefaultValuesMetadata").defaultValuesColumnToValue(e))}});return m.apply(this,arguments)}function a(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=new WeakMap();d("LSPlatformLsInitLog").addPoint("default_values_update_start");var f=function(a,b){d("LSPlatformLsInitLog").addPoint("default_values_update_end_failure",{string:{default_values_update_failure_point:b,default_values_update_failure_reason:String(a)}})};try{b=(yield j(e,a,b));try{if(c==!1)for(c in b){var g=a.table(c).entries(e),h=(yield g.next());while(!h.done){var i=babelHelpers["extends"]({},h.value[1]);i=d("ReStoreUtils").appendDefaultValues(i,c);yield a.table(c).put(i);h=(yield g.next())}}yield l(a,b);d("LSPlatformLsInitLog").addPoint("default_values_update_end")}catch(a){f(a,"setDefaultValues")}}catch(a){f(a,"findDefaultValuesToUpdate")}});return n.apply(this,arguments)}g.runMigrationForTableDefaultValuesIfNeeded=a}),98);
__d("ReStoreHooks",["PromiseOrValue"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return{afterEntriesNext:a.reduce(function(a,b){var c=b.onAfterEntriesNext;return c?function(b){return c({tableName:b.tableName,value:a(b)})}:a},function(a){a=a.value;return a}),afterGet:a.reduce(function(a,b){var c=b.onAfterGet;return c?function(b){return c({tableName:b.tableName,value:a(b)})}:a},function(a){a=a.value;return a}),beforeAdd:a.reduce(function(a,b){var c=b.onBeforeAdd;return c?function(b){return(h||(h=d("PromiseOrValue"))).map(a(b),function(a){return c(babelHelpers.extends({},b,{value:a}))})}:a},function(a){a=a.value;return a}),beforeNotify:a.reduce(function(a,b){var c=b.onBeforeNotify;return c?function(b){var d=a(b),e=d.newValue;d=d.prevValue;return c({newValue:e,prevValue:d,tableName:b.tableName})}:a},function(a){var b=a.newValue;a=a.prevValue;return{newValue:b,prevValue:a}}),beforePut:a.reduce(function(a,b){var c=b.onBeforePut;return c?function(b){return(h||(h=d("PromiseOrValue"))).map(a(b),function(a){return c(babelHelpers.extends({},b,{value:a}))})}:a},function(a){a=a.value;return a}),beforeUpsert:a.reduce(function(a,b){var c=b.onBeforeUpsert;return c?function(b){return(h||(h=d("PromiseOrValue"))).map(a(b),function(a){return c(babelHelpers.extends({},b,{value:a}))})}:a},function(a){a=a.value;return a})}}g.createHookManager=a}),98);
__d("ReStoreIndexeddbPersistenceInitFailure",[],(function(a,b,c,d,e,f){"use strict";var g="IndexedDB onsuccess and onerror were never called for PDB",h="ReStoreIndexeddbPersistenceInitFailure";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c=g;b=a.call(this,c)||this;b.message=c;b.name=h;return b}return b}(babelHelpers.wrapNativeSuper(Error));f.ERROR_NAME=h;f.ReStoreIndexeddbPersistenceInitFailure=a}),66);
__d("ReStoreIndexMetadata",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=typeof a==="string"?a:null;if(a==null)return null;try{a=JSON.parse(a);for(var b=a,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;if(typeof e!=="string")return null}return a}catch(a){return null}}function a(a){var b={indexName:"string",keyIds:"string","predicate?":"string",tableName:"string"};for(var d in b){var e=d.endsWith("?");if(e)e=a[d.slice(0,-1)];else{if(!Object.prototype.hasOwnProperty.call(a,d)||a[d]==null){c("FBLogger")("messenger_web_product").warn('Malformed index data, missing key "%s"',d);return null}e=a[d]}var f=b[d],g=typeof e;if(e!=null&&g!==f){c("FBLogger")("messenger_web_product").warn('Malformed index data, key "%s" has type "%s" but expected "%s"',d,g,f);return null}}e=h(a.keyIds);if(e==null){c("FBLogger")("messenger_web_product").warn('Malformed index data, key IDs "%s" are invalid',typeof a.keyIds==="string"?a.keyIds:"<"+typeof a.keyIds+">");return null}return typeof a.indexName!=="string"||typeof a.tableName!=="string"||typeof a.predicate!=="string"&&a.predicate!=null?null:babelHelpers["extends"]({data:e,indexName:a.indexName,tableName:a.tableName},a.predicate==null?{}:{predicate:a.predicate})}function b(a,b){if(a[0]==null)return!0;if(a[0].length!==b[0].length)return!0;for(var c=0;c<a[0].length;c++)if(a[0][c]!==b[0][c])return!0;return a[1]!==b[1]?!0:!1}function d(a){return babelHelpers["extends"]({indexName:a.indexName,keyIds:JSON.stringify(a.data),tableName:a.tableName},a.predicate==null?{}:{predicate:a.predicate})}e="_db_indices_meta";g.tryParseIndexData=a;g.indicesDiffer=b;g.indexDataToValue=d;g.indicesTableName=e}),98);
__d("ReStoreIndicesMigration",["LSPlatformLsInitLog","ReStoreIndexMetadata","ReStoreUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c={};b=(yield d("ReStoreUtils").collectIterator(b.table(d("ReStoreIndexMetadata").indicesTableName).entries(a)));for(a of b){b=a[0];var e=a[1];if(b!=null){var f;e=d("ReStoreIndexMetadata").tryParseIndexData(e);if(e==null)continue;var g=e.indexName,h=e.tableName;c[h]=(f=c[h])!=null?f:{};c[h][g]=babelHelpers["extends"]({index:e.data,key:b},e.predicate==null?{}:{predicate:e.predicate})}}return c});return i.apply(this,arguments)}function j(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=(yield h(a,b));b={};for(var e in c.tableNames){var f=c.tableNames[e];for(var g in f.indexes){var i,j;i=[f.indexes[g],(i=f.indexPredicates)==null?void 0:(i=i[g])==null?void 0:i.toString()];j=(j=a[e])==null?void 0:j[g];if(d("ReStoreIndexMetadata").indicesDiffer([j==null?void 0:j.index,j==null?void 0:j.predicate],i)){b[e]=(j=b[e])!=null?j:{};b[e][g]=i}}}j={};for(i in a){g=a[i];for(f in g){var k;e=g[f];k=(k=c.tableNames[i])==null?void 0:(k=k.indexes)==null?void 0:k[f];if(k==null){j[i]=(k=j[i])!=null?k:{};j[i][f]=e}}}return{toRemove:j,toUpdate:b}});return k.apply(this,arguments)}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){for(var c in b){var e=b[c];for(var f in e){var g=e[f],h=g[0];g=g[1];h=babelHelpers["extends"]({data:h,indexName:f,tableName:c},g==null?{}:{predicate:g});yield a.table(d("ReStoreIndexMetadata").indicesTableName).put(d("ReStoreIndexMetadata").indexDataToValue(h))}}});return m.apply(this,arguments)}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){for(var c in b){var e=b[c];for(var f in e){var g,h=e[f].key;yield (g=a.table(d("ReStoreIndexMetadata").indicesTableName))["delete"].apply(g,h)}}});return o.apply(this,arguments)}function a(a,b,c,d){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){var g=new WeakMap();d("LSPlatformLsInitLog").addPoint("index_migration_start");var h=function(a,b){d("LSPlatformLsInitLog").addPoint("index_migration_end_failure",{string:{index_migration_failure_point:b,index_migration_failure_reason:String(a)}})};return j(g,a,c).then(function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var g=b.toRemove;b=b.toUpdate;var h=Array.from(new Set([].concat(Object.keys(b),Object.keys(g))));d("LSPlatformLsInitLog").addAnnotations({"int":{index_migration_rebuild_tables_count:h.length}});if(e===!1)for(h of h)if(c.tableNames[h]!=null){var i;i=Array.from(new Set([].concat(Object.keys((i=b[h])!=null?i:{}),Object.keys((i=g[h])!=null?i:{}))));yield f(h,i)}yield l(a,b);yield n(a,g);d("LSPlatformLsInitLog").addPoint("index_migration_end")});return function(a){return g.apply(this,arguments)}}(),function(a){return h(a,"findIndicesToUpdateOrRemove")})["catch"](function(a){return h(a,"rebuildIndices")})});return p.apply(this,arguments)}g.runMigrationForIndicesIfNeeded=a}),98);
__d("ReStorePersistenceIds",[],(function(a,b,c,d,e,f){"use strict";a="nextId";b="seed";c="schema_version";d="default_value_version";e="custom_migration_value_version";f.idForNextId=a;f.idForSeed=b;f.idForSchema=c;f.idForDefaultValue=d;f.idForCustomMigrationValue=e}),66);
__d("ReStorePersistence",["FBLogger","LSTransactionLogger","ReStoreKeyComparer","ReStorePersistenceIds","ReStoreUtils","isPromise","nullthrows","qpl","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j={},k={gt:[!1,0],gte:[!0,0],lt:[!0,1],lte:[!1,1]},l=new Set(["encrypted_backups_virtual_devices","secure_encrypted_backups_recovery_code_status","device_metadata","secure_encrypted_backups_epochs","secure_encrypted_backups_client_state","encrypted_backups","experiences_shared_state","occamadillo_most_recent_message_per_thread"]),m=16,n=64,o=64,p=Math.floor(m/2),q=Math.floor(n/2),r=Math.floor(o/2);function s(b){if(b==null)return b;var c=Object.getOwnPropertyNames(b),a={},d,e;for(d=0;d<c.length;d++)e=b[c[d]],a[c[d]]=e;return a}function t(a,b){b===void 0&&(b=j);return a===b}function u(a,b,c){var e=0,f=a.length-1;while(e<=f){var g=e+f>>1;(c[0]?(i||(i=d("ReStoreKeyComparer"))).compareKey(a[g],b)<0:(i||(i=d("ReStoreKeyComparer"))).compareKey(a[g],b)<=0)?e=g+1:f=g-1}g=[e,f][c[1]];return g===a.length?-1:g}var v=function(){function a(a,b,c,d,e){this.$2=b,this.$3=c,this.$1=a,this.$4=d,this.$5=e}var b=a.prototype;b.$6=function(a){return a==null?"root":"index("+a+")"};b.$7=function(a,b){return d("ReStoreUtils").getOrCreate(this.$1,b,function(){return{children:[].concat(a.children),isLeaf:!0,keys:[].concat(a.keys),nextId:a.nextId,prevId:a.prevId}})};b.$8=function(a,b){return d("ReStoreUtils").getOrCreate(this.$1,b,function(){return{children:[].concat(a.children),isLeaf:!1,keys:[].concat(a.keys)}})};b.$9=function(a,b){return d("ReStoreUtils").getOrCreate(this.$1,b,function(){return{headId:a.headId,rootId:a.rootId,tailId:a.tailId}})};b.$10=function(a,b){if(!a.length)return[0,0];var c=u(a,b,k.gte);if(c===-1)return[a.length,0];else if((i||(i=d("ReStoreKeyComparer"))).compareKey(a[c],b)===0)return[c,1];return[c,0]};b.$11=function*(a,b,c,d){var e=(yield* this.$12(a,b));e=e;b=b;var f=-1;while(!e.isLeaf)d==null?void 0:d.push([e,b,f]),f=u(e.keys,c,k.gt),f===-1&&(f=e.keys.length),b=e.children[f],e=(yield* this.$12(a,b));return[e,b,f]};b.$13=function*(a,b){this.$3();var d=this.$1.get(b);if(t(d))return void 0;if(d!==void 0)return d;d=this.$4.get(a,this.$2,b,this.$5);return(h||(h=c("isPromise")))(d)?yield d:d};b.$12=function*(a,b){a=(yield* this.$13(a,b));if(a===void 0){var d=this.$1.get(b);this.$4.logError==null?void 0:this.$4.logError(this.$2,this.$5,"dbCorruption",{deletedInThisTxn:t(d)?"true":"false",id:JSON.stringify(b)||""});throw c("unrecoverableViolation")("value not found","messenger_web_product")}return a};b.$14=function*(a,b){a=(a=(yield* this.$13(a,d("ReStorePersistenceIds").idForNextId)))!=null?a:0;this.$1.set("nextId",a+1);this.$1.set(a,b);return a};b.$15=function(a,b){this.$3(),this.$1.set(a,b)};b.incrementSeed=function*(a,b){a=(a=(yield* this.$13(a,"seed")))!=null?a:0;if(b===void 0){this.$1.set("seed",a+1);return a}b>=a&&this.$1.set("seed",b+1);return b};b.readData=function*(a,b){return yield* this.$13(a,b)};b.$16=function*(a,b,c){b=(yield* this.$13(a,this.$6(b)));if(b==null)return;a=(yield* this.$11(a,b.rootId,c));b=a[0];a=u(b.keys,c,k.gte);if(a===-1||(i||(i=d("ReStoreKeyComparer"))).compareKey(b.keys[a],c)!==0)return;return b.children[a]};b.tableGet=function*(a,b){b=(yield* this.$16(a,void 0,b));if(b===void 0)return;return yield* this.$17(a,b)};b.$17=function*(a,b){return Array.isArray(b)?b[0]:yield* this.$12(a,b)};b.$18=function*(a,b){if(Array.isArray(b)){var d=c("nullthrows")(yield* this.$16(a,void 0,b));return yield* this.$17(a,d)}return yield* this.$12(a,b)};b.indexGet=function*(a,b,c){b=(yield* this.$16(a,b,c));if(b==null)return;return yield* this.$18(a,b)};b.getId=function*(a,b){a=(yield* this.$16(a,void 0,b));return Array.isArray(a)?b:a};b.tableSet=function*(a,b,c){var d,e=this.$4.shouldInline(this.$2,c),f=this.$6(),g=(yield* this.$13(a,f));if(g==null){var h;e||(d=(yield* this.$14(a,c)));h={children:[(h=d)!=null?h:[c]],isLeaf:!0,keys:[b]};h=(yield* this.$14(a,h));this.$15(f,{headId:h,rootId:h,tailId:h});return[(h=d)!=null?h:b,!1]}h=[];var i=(yield* this.$11(a,g.rootId,b,h)),k=i[0];i=i[1];var l=this.$10(k.keys,b),m=l[0];l=l[1];var n=!1;if(l===1){var o=k.children[m];if(!Array.isArray(o)){n=!0;if(!e){this.$15(o,c);return[o,!1]}else this.$1.set(o,j)}}o=this.$7(k,i);e||(d=(yield* this.$14(a,c)));l===0&&o.keys.splice(m,0,b);o.children.splice(m,l,(k=d)!=null?k:[c]);yield* this.$19(a,o,i,h,g,f,!0);return[(m=d)!=null?m:b,l===1&&!(e&&!n)]};b.indexSet=function*(a,b,c,d){b=this.$6(b);var e=(yield* this.$13(a,b));if(e==null){var f={children:[d],isLeaf:!0,keys:[c]};f=(yield* this.$14(a,f));this.$15(b,{headId:f,rootId:f,tailId:f});return}f=[];var g=(yield* this.$11(a,e.rootId,c,f)),h=g[0];g=g[1];var i=this.$10(h.keys,c),j=i[0];i=i[1];if(i===1&&h.children[j]===d)return;h=this.$7(h,g);h.keys.splice(j,i,c);h.children.splice(j,i,d);yield* this.$19(a,h,g,f,e,b,!1)};b.$19=function*(a,b,c,d,e,f,g){b=b;var h;c=c;for(;b.keys.length>=(b.isLeaf?g?m:n:o);b=h,c=i){var i;i=(i=d.pop())!=null?i:[];h=i[0];i=i[1];i!=null?h=this.$8(h,i):(h={children:[c],isLeaf:!1,keys:[]},this.$9(e,f).rootId=(yield* this.$14(a,h)));var j=Math.floor(b.keys.length/2),k=void 0;if(b.isLeaf){var l={children:b.children.slice(j),isLeaf:!0,keys:b.keys.slice(j),nextId:b.nextId,prevId:c},p=k=b.nextId=(yield* this.$14(a,l));l=l.nextId;l?this.$7(yield* this.$12(a,l),l).prevId=p:this.$9(e,f).tailId=k}else k=(yield* this.$14(a,{children:b.children.slice(j+1),isLeaf:!1,keys:b.keys.slice(j+1)}));l=this.$10(h.keys,b.keys[j]);p=l[0];l=l[1];h.keys.splice(p,l,b.keys[j]);h.children.splice(p+1,0,k);b.keys.length=j;b.children.length=j+(b.isLeaf?0:1)}};b.tableDelete=function*(a,b){a=(yield* this.$20(a,void 0,b));if(a==null)return!1;Array.isArray(a)||(this.$3(),this.$1.set(a,j));return!0};b.indexDelete=function*(a,b,c){return(yield* this.$20(a,b,c))!=null};b.$20=function*(a,b,e){var f=this.$6(b),g=(yield* this.$13(a,f));if(g==null)return;var h=[],m=(yield* this.$11(a,g.rootId,e,h)),n=m[0],o=m[1];m=m[2];var s=this.$7(n,o),t=u(n.keys,e,k.gte);if(t===-1||(i||(i=d("ReStoreKeyComparer"))).compareKey(n.keys[t],e)!==0)return;n=s.children[t];s.keys.splice(t,1);s.children.splice(t,1);e=s;t=o;s=m;var v;for(;e.keys.length<(e.isLeaf?b==null?p:q:r)&&h.length;x=[m,v,o],e=x[0],t=x[1],s=x[2],x){o=h.pop();m=o[0];v=o[1];o=o[2];m=this.$8(m,v);var w=[[{nodeId:m.children[s-1]},{node:e,nodeId:t},s-1],[{node:e,nodeId:t},{nodeId:m.children[s+1]},s]].filter(function(b){var a=b[0];b=b[1];return a.nodeId!==void 0&&b.nodeId!==void 0});for(var x of w){var y=x[0],z=x[1],A=x[2],B=y.node=y.node||(yield* this.$12(a,y.nodeId)),C=z.node=z.node||(yield* this.$12(a,z.nodeId)),D=e.isLeaf?b==null?p:q:r;if(B.keys.length+z.node.keys.length>=D*2){if(e.isLeaf){var E=this.$7(B,y.nodeId),F=this.$7(C,z.nodeId),G=[].concat(E.children,F.children),H=[].concat(B.keys,C.keys);E.children=(F.children=G).splice(0,D);E.keys=(F.keys=H).splice(0,D);m.keys[A]=H[0]}else{G=this.$8(B,y.nodeId);E=this.$8(C,z.nodeId);F=[].concat(G.children,E.children);H=[].concat(G.keys,[m.keys[A]],E.keys);G.children=(E.children=F).splice(0,D+1);m.keys[A]=H.splice(D,1)[0];G.keys=(E.keys=H).splice(0,D)}return n}}for(B of w){y=B[0];C=B[1];z=B[2];if(e.isLeaf){F=this.$7(y.node,y.nodeId);A=this.$7(C.node,C.nodeId);F.children=[].concat(F.children,A.children);F.keys=[].concat(F.keys,A.keys);A.keys.length=0;G=A.nextId;if(G){E=this.$7(yield* this.$12(a,G),G);E.prevId=y.nodeId}else this.$9(g,f).tailId=y.nodeId;F.nextId=A.nextId}else{H=this.$8(y.node,y.nodeId);D=this.$8(C.node,C.nodeId);H.children=[].concat(H.children,D.children);H.keys=[].concat(H.keys,[m.keys[z]],D.keys)}m.keys.splice(z,1);m.children.splice(z+1,1);this.$1.set(C.nodeId,j);break}}w=(yield* this.$12(a,g.rootId));if(!w.keys.length&&w.children.length){if(w.isLeaf){l.has(this.$2)&&(this.$4.logError==null?void 0:this.$4.logError(this.$2,this.$5,"dbCorruption",{}));throw c("unrecoverableViolation")("cannot be leaf","messenger_web_product")}this.$1.set(g.rootId,j);this.$9(g,f).rootId=w.children[0]}return n};b.btreeIterator=function(a,b,e){e=e===void 0?{}:e;var f=e.dir,g=f===void 0?"asc":f,h=babelHelpers.objectWithoutPropertiesLoose(e,["dir"]);function j(){if(g==="asc"){if(Object.prototype.hasOwnProperty.call(h,"gt"))return h.gt;else if(Object.prototype.hasOwnProperty.call(h,"gte"))return h.gte}else if(Object.prototype.hasOwnProperty.call(h,"lt"))return h.lt;else if(Object.prototype.hasOwnProperty.call(h,"lte"))return h.lte}function l(a){if(g==="asc")return Object.prototype.hasOwnProperty.call(h,"gt")?u(a.keys,h.gt,k.gt):Object.prototype.hasOwnProperty.call(h,"gte")?u(a.keys,h.gte,k.gte):0;else return Object.prototype.hasOwnProperty.call(h,"lt")?u(a.keys,h.lt,k.lt):Object.prototype.hasOwnProperty.call(h,"lte")?u(a.keys,h.lte,k.lte):a.keys.length-1}if(Object.prototype.hasOwnProperty.call(h,"gt")&&Object.prototype.hasOwnProperty.call(h,"gte"))throw c("unrecoverableViolation")("cannot specify both greater than and greater than or equal","messenger_web_product");if(Object.prototype.hasOwnProperty.call(h,"lt")&&Object.prototype.hasOwnProperty.call(h,"lte"))throw c("unrecoverableViolation")("cannot specify both less than and less than or equal","messenger_web_product");var m,n=this;return{next:function*(e){var f,o;if(m==null){var p=(yield* n.$13(a,n.$6(b)));if(p==null)return{done:!0};var q=j();if(q!==void 0){q=(yield* n.$11(a,p.rootId,q));f=q[0];q=q[1]}else if(g==="asc"){var r=[yield* n.$12(a,p.headId),p.headId];f=r[0];q=r[1]}else{r=[yield* n.$12(a,p.tailId),p.tailId];f=r[0];q=r[1]}p=l(f)}else{r=m;p=r.i;o=r.key;q=r.nodeId;f=(yield* n.$13(a,q));if(e!=null){if((i||(i=d("ReStoreKeyComparer"))).compareKey(e,o)===(g==="asc"?-1:1))throw c("unrecoverableViolation")("key must be ahead of current key","messenger_web_product");if(f==null||(i||(i=d("ReStoreKeyComparer"))).compareKey(e,f.keys[0])<0||(i||(i=d("ReStoreKeyComparer"))).compareKey(e,f.keys[f.keys.length-1])>0){r=(yield* n.$13(a,n.$6(b)));if(r==null)return{done:!0};r=(yield* n.$11(a,r.rootId,e));f=r[0];q=r[1]}p=u(f.keys,e,k[g==="asc"?"gte":"lte"])}else{if(f==null||p<0||p>=f.keys.length||(i||(i=d("ReStoreKeyComparer"))).compareKey(f.keys[p],o)!==0){if(f==null||!f.keys.length||(i||(i=d("ReStoreKeyComparer"))).compareKey(o,f.keys[0])<0||(i||(i=d("ReStoreKeyComparer"))).compareKey(o,f.keys[f.keys.length-1])>0){r=(yield* n.$13(a,n.$6(b)));if(r==null)return{done:!0};e=(yield* n.$11(a,r.rootId,o));f=e[0];q=e[1]}p=u(f.keys,o,k[g==="asc"?"lte":"gte"])}p+=g==="asc"?1:-1}}if(p<0||p>=f.keys.length)if(g==="asc"){if(f.nextId===void 0)return{done:!0};q=f.nextId;f=(yield* n.$12(a,q));p=0}else{if(f.prevId===void 0)return{done:!0};q=f.prevId;f=(yield* n.$12(a,q));p=f.keys.length-1}o=f.keys[p];m={i:p,key:o,node:f,nodeId:q};if(p<0||p>=f.keys.length)return{done:!0};r=g==="asc"?Object.prototype.hasOwnProperty.call(h,"lt")&&(i||(i=d("ReStoreKeyComparer"))).compareKey(o,h.lt)>=0||Object.prototype.hasOwnProperty.call(h,"lte")&&(i||(i=d("ReStoreKeyComparer"))).compareKey(o,h.lte)>0:Object.prototype.hasOwnProperty.call(h,"gt")&&(i||(i=d("ReStoreKeyComparer"))).compareKey(o,h.gt)<=0||Object.prototype.hasOwnProperty.call(h,"gte")&&(i||(i=d("ReStoreKeyComparer"))).compareKey(o,h.gte)<0;return r?{done:!0}:{done:!1,value:[f.keys[p],f.children[p]]}}}};b.tableEntries=function(a,b){b===void 0&&(b={});var c=this.btreeIterator(a,void 0,b),d=this;return{next:function*(b){b=(yield* c.next(b));if(b.done)return b;b=b.value;var e=b[0];b=b[1];b=(yield* d.$17(a,b));return{done:!1,value:[e,b]}}}};b.indexEntries=function(a,b,c){c===void 0&&(c={});var d=this.btreeIterator(a,b,c),e=this;return{next:function*(b){b=(yield* d.next(b));if(b.done)return b;b=b.value;var c=b[0];b=b[1];b=(yield* e.$18(a,b));return{done:!1,value:[c,b]}}}};b.keys=function(a,b,c){c===void 0&&(c={});var d=this.btreeIterator(a,b,c);return{next:function*(a){a=(yield* d.next(a));if(a.done)return a;a=a.value;a=a[0];return{done:!1,value:a}}}};b.clearIds=function*(a,b){this.$3();b=this.$6(b);var c=(yield* this.$13(a,b));this.$3();if(c==null)return;var d=(yield* this.$12(a,c.rootId));c=[{id:c.rootId,node:d}];while(c.length>0){d=c.shift();var e=d.id;d=d.node;if(!d.isLeaf)for(d of d.children){var f=(yield* this.$13(a,d));f!=null&&c.push({id:d,node:f})}this.$1.set(e,j)}this.$1.set(b,j)};b.readSeed=function*(a){return(a=(yield* this.$13(a,d("ReStorePersistenceIds").idForSeed)))!=null?a:0};b.remove=function(a,b){this.$3(),this.$1.set(b,j)};b.writeData=function(a,b,c){this.$15(b,s(c))};b.writeNewData=function*(a,b){return yield* this.$14(a,s(b))};return a}(),w=function(){function a(a,b,e,f){var g=this;this.$2=new Map();this.$6=!1;this.$3=function(){if(g.$6){c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").mark(c("qpl")._(25306500,"1488"),f,"transaction_closed");throw c("FBLogger")("messenger_web_product").mustfixThrow("Transaction has closed")}e()};this.$4=b;this.$1=a;this.$5={get:function(a,c,e){var f=d("ReStoreUtils").getOrCreate(g.$1,c,function(){return new Map()});f=f.get(e);if(t(f))return void 0;return f!==void 0?f:b.get(a,c,e,"readwrite")},logError:b.logError,shouldInline:b.shouldInline}}var b=a.prototype;b.flush=function(){for(var a of this.$2){var b=a[0],c=a[1];b=d("ReStoreUtils").getOrCreate(this.$1,b,function(){return new Map()});for(c of c){var e=c[0],f=c[1];b.set(e,f)}}this.$6=!0};b.table=function(a){return new v(d("ReStoreUtils").getOrCreate(this.$2,a,function(){return new Map()}),a,this.$3,this.$5,"readwrite")};return a}(),x=function(){function a(a,b){var d=this;this.$1=new Map();this.$2=!1;this.$5=function(){if(d.$2)throw c("FBLogger")("messenger_web_product").mustfixThrow("Transaction has closed")};this.$3=a;this.$4=b;this.types=a.types}var b=a.prototype;b.close=function(){this.$2=!0};b.flush=async function(a){a===void 0&&(a={upgrade:!1}),await this.$3.flush(this.$1,a),this.$2=!0};b.table=function(a){return new v(d("ReStoreUtils").getOrCreate(this.$1,a,function(){return new Map()}),a,this.$5,this.$3,this.$4)};b.createNested=function(a){return new w(this.$1,this.$3,this.$5,a)};return a}();function a(a){var b;return{clearCache:a.clearCache,close:a.close,createTransaction:function(b){return new x(a,b)},isClosed:a.isClosed||function(){return!1},isPersistenceSupported:a.isPersistenceSupported,logError:a.logError,queueCommitWork:(b=a.queueCommitWork)!=null?b:function(a){return a()},runExclusively:a.runExclusively}}g.sentinelDeleted=j;g.isDeletedValue=t;g.createDbStore=a}),98);
__d("ReStoreTransactionLock",["isPromise","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;b=function(){function a(a){var b=this;this.waitFor=null;a!=null&&(this.waitFor=a.then(function(a){return b.waitFor=null}))}var b=a.prototype;b.chainPromiseOrValue=function(a){if(this.waitFor!=null)return this.waitFor.then(function(){return a("\ud83d\udd12")});else return a("\ud83d\udd12")};return a}();d=function(){function a(){this.lock=null}var b=a.prototype;b.chainPromiseOrValue=function(a){var b=this,d=this.lock;if(d==null){var e=a("\ud83d\udd12");if((h||(h=c("isPromise")))(e))d=e;else return e}else d=d.then(function(){return a("\ud83d\udd12")});var f=d.finally(function(a){b.lock===f&&(b.lock=null);return a});this.lock=f;return f};return a}();function i(a,b){function d(b){if(b.done)return b.value;if(!(h||(h=c("isPromise")))(b.value))throw c("unrecoverableViolation")("expected promise","messenger_web_product");return b.value.then(function(b){return d(a.next(b))})}return d(a.next(b))}function a(a,b){return{next:function(c){return b.chainPromiseOrValue(function(b){return i(a.next(b,c))})}}}g.WaitForPromiseLock=b;g.ReStoreTransactionLock=d;g.lockIterator=a}),98);
__d("ReStoreIndex",["ReQLBounds","ReStoreTransactionLock","ReStoreUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a,b,c,e,f){var g=this;this.entries=function(a,b,c){b===void 0&&(b="asc");return d("ReStoreTransactionLock").lockIterator(d("ReStoreUtils").entries(g.$5,a,g.$1,g.$3,b,c,g.$2),g.$4)};this.get=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return g.$4.chainPromiseOrValue(function(a){return d("ReStoreUtils").getLocked(g.$5,new WeakMap(),g.$1.name,g.$3,b,a,g.$2)})};this.getKey=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return g.$4.chainPromiseOrValue(function(a){return g.$6(g.$5,new WeakMap(),b,a)})};this.keys=function(a,b,c){b===void 0&&(b="asc");return d("ReStoreTransactionLock").lockIterator(d("ReStoreUtils").keys(g.$5,a,g.$1,g.$3,b,c),g.$4)};this.$3=a;this.keyFields=b.indexes[a];this.$1=b;this.$2=c;this.$4=e;this.$5=f}var b=a.prototype;b.$6=async function(a,b,c,e){a=await d("ReStoreUtils").getLocked(a,b,this.$1.name,this.$3,c,e,this.$2);return a===void 0?void 0:d("ReStoreUtils").searchKey(this.$1,a)};return a}();b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a);c=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e,f,g,i){var j;j=a.call(this,b,c,e,f,g)||this;j.subscribe=function(a,b,c){return j.$ReStoreIndex$p_3.subscribeIndex(j.$ReStoreIndex$p_1.name,j.$ReStoreIndex$p_2,a,(h||(h=d("ReQLBounds"))).extendBounds(b,j.$ReStoreIndex$p_1.indexes[j.$ReStoreIndex$p_2].length),c)};j.$ReStoreIndex$p_2=b;j.$ReStoreIndex$p_1=c;j.$ReStoreIndex$p_3=i;return j}return b}(a);g.ReStoreTransactionIndex=b;g.ReStoreIndex=c}),98);
__d("ReStoreTable",["I64","LSTransactionLogger","PromiseOrValue","ReQLBounds","ReStoreIndex","ReStoreTransactionLock","ReStoreUtils","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a){a=(h||(h=d("I64"))).cast(a);if(a===void 0)throw c("unrecoverableViolation")("Expected int64","messenger_web_product");return h.to_float(a)}function l(a,b,c,d,e){b=JSON.stringify([b,c]);c=a.get(b);a.set(b,[c==null?d:c[0],e])}a=function(a,b,e,f){var g=this;this.$1=new Map();this.entries=function(a,b,c){b===void 0&&(b="asc");return d("ReStoreTransactionLock").lockIterator(d("ReStoreUtils").entries(g.$5,a,g.$2,void 0,b,c,g.$3),g.$4)};this.get=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return g.$4.chainPromiseOrValue(function(a){return d("ReStoreUtils").getLocked(g.$5,new WeakMap(),g.$2.name,void 0,b,a,g.$3)})};this.keys=function(a,b,c){b===void 0&&(b="asc");return d("ReStoreTransactionLock").lockIterator(d("ReStoreUtils").keys(g.$5,a,g.$2,void 0,b,c),g.$4)};this.peekNextAutoIncrementId=function(){return Promise.resolve(g.$4.chainPromiseOrValue(async function(a){a=g.$2.autoIncrement;if(!a)throw c("unrecoverableViolation")("only supported for auto-incrementing tables","messenger_web_product");a=await d("ReStoreUtils").gen(g.$5.table(g.$2.name).readSeed(new WeakMap()));if(a===void 0)throw c("unrecoverableViolation")("unexpected undefined autoIncrementSeed","messenger_web_product");return(h||(h=d("I64"))).of_float(a)}))};this.keyFields=a.primaryKeyIds;this.$2=a;this.$3=b;this.$4=e;this.$5=f};b=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e,f,g,h,j,k,l,m){var n;b=e.tableNames[b];n=a.call(this,b,f,g,h)||this;n.$ReStoreTransactionTable$p_1=new Map();n.$ReStoreTransactionTable$p_10=new Map();n.add=function(a){return Promise.resolve((i||(i=d("PromiseOrValue"))).map(n.$ReStoreTransactionTable$p_4.beforeAdd({tableName:n.$ReStoreTransactionTable$p_3.name,transaction:n.$ReStoreTransactionTable$p_8,value:a}),function(a){return n.$ReStoreTransactionTable$p_11(function(b,e){c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").recordLogicalWrite(n.$ReStoreTransactionTable$p_9);return d("ReStoreUtils").gen(n.$ReStoreTransactionTable$p_13(n.$ReStoreTransactionTable$p_10,e,new WeakMap(),n.$ReStoreTransactionTable$p_3.name,a,b))})}))};n.delete=function(){for(var a=arguments.length,b=new Array(a),e=0;e<a;e++)b[e]=arguments[e];return Promise.resolve(n.$ReStoreTransactionTable$p_11(function(a,e){var f=babelHelpers.assertThisInitialized(n);return d("ReStoreUtils").gen(function*(){c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").recordLogicalWrite(f.$ReStoreTransactionTable$p_9),yield* d("ReStoreUtils").deleteItemLocked(f.$ReStoreTransactionTable$p_2,f.$ReStoreTransactionTable$p_10,e,new WeakMap(),f.$ReStoreTransactionTable$p_3.name,b,a),yield* d("ReStoreUtils").cascadeKeyUpdatesLocked(f.$ReStoreTransactionTable$p_2,f.$ReStoreTransactionTable$p_10,e,new WeakMap(),f.$ReStoreTransactionTable$p_3.name,b,void 0,f.$ReStoreTransactionTable$p_4,a)}())}))};n.put=function(a){return Promise.resolve((i||(i=d("PromiseOrValue"))).map(n.$ReStoreTransactionTable$p_4.beforePut({tableName:n.$ReStoreTransactionTable$p_3.name,transaction:n.$ReStoreTransactionTable$p_8,value:a}),function(a){return n.$ReStoreTransactionTable$p_11(function(b,e){c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").recordLogicalWrite(n.$ReStoreTransactionTable$p_9);return d("ReStoreUtils").gen(d("ReStoreUtils").putLocked(n.$ReStoreTransactionTable$p_2,n.$ReStoreTransactionTable$p_10,e,new WeakMap(),n.$ReStoreTransactionTable$p_3.name,a,n.$ReStoreTransactionTable$p_4,b))})}))};n.upsert=function(a,b){return Promise.resolve((i||(i=d("PromiseOrValue"))).map(n.$ReStoreTransactionTable$p_4.beforeUpsert({tableName:n.$ReStoreTransactionTable$p_3.name,transaction:n.$ReStoreTransactionTable$p_8,value:b}),function(e){return n.$ReStoreTransactionTable$p_11(function(f,g){var h=babelHelpers.assertThisInitialized(n);return d("ReStoreUtils").gen(function*(){c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").recordLogicalWrite(h.$ReStoreTransactionTable$p_9),yield* d("ReStoreUtils").upsertLocked(h.$ReStoreTransactionTable$p_2,h.$ReStoreTransactionTable$p_10,g,new WeakMap(),h.$ReStoreTransactionTable$p_3.name,a,e,h.$ReStoreTransactionTable$p_4,f),yield* d("ReStoreUtils").cascadeKeyUpdatesLocked(h.$ReStoreTransactionTable$p_2,h.$ReStoreTransactionTable$p_10,g,new WeakMap(),h.$ReStoreTransactionTable$p_3.name,a,d("ReStoreUtils").searchKey(h.$ReStoreTransactionTable$p_3,b),h.$ReStoreTransactionTable$p_4,f)}())})}))};n.index=function(a){return d("ReStoreUtils").getOrCreate(n.$ReStoreTransactionTable$p_1,a,function(){return new(d("ReStoreIndex").ReStoreTransactionIndex)(a,n.$ReStoreTransactionTable$p_3,n.$ReStoreTransactionTable$p_4,n.$ReStoreTransactionTable$p_5,n.$ReStoreTransactionTable$p_6)})};n.$ReStoreTransactionTable$p_3=b;n.$ReStoreTransactionTable$p_2=e;n.$ReStoreTransactionTable$p_4=f;n.$ReStoreTransactionTable$p_5=g;n.$ReStoreTransactionTable$p_6=h;n.$ReStoreTransactionTable$p_7=j;n.$ReStoreTransactionTable$p_8=k;n.$ReStoreTransactionTable$p_9=l;n.$ReStoreTransactionTable$p_10=m;return n}var e=b.prototype;e.$ReStoreTransactionTable$p_11=function(a){var b=this;return this.$ReStoreTransactionTable$p_5.chainPromiseOrValue(function(c){var e=b.$ReStoreTransactionTable$p_6.createNested(b.$ReStoreTransactionTable$p_9);return(i||(i=d("PromiseOrValue"))).map(a(c,e),function(a){e.flush();return a})})};e.$ReStoreTransactionTable$p_12=function(a,b,c,d,e){b=JSON.stringify([b,c]);c=a.get(b);a.set(b,[c==null?d:c[0],e])};e.$ReStoreTransactionTable$p_13=function*(a,b,c,e,f,g){var i=b.table(e),j=this.$ReStoreTransactionTable$p_2.tableNames[e];if(j.autoIncrement){var m=f[j.primaryKeyIds[0]];m=(h||(h=d("I64"))).of_float(yield* i.incrementSeed(c,m===void 0?m:k(m)));f[j.primaryKeyIds[0]]=m}m=d("ReStoreUtils").appendDefaultValues(f,j.name);f=d("ReStoreUtils").searchKey(j,m);if(f==null)throw new Error("Evaluating the object store's key path did not yield a value");if((yield* i.tableGet(c,f))==null){j=d("ReStoreUtils").indicesWithKeyForValue(this.$ReStoreTransactionTable$p_3,Object.keys(j.indexes),m);yield* d("ReStoreUtils").deconflictIndicesLocked(this.$ReStoreTransactionTable$p_2,a,b,c,e,j,this.$ReStoreTransactionTable$p_4,g);g=(yield* i.tableSet(c,f,m));i=g[0];yield* d("ReStoreUtils").addIdToIndices(b,c,e,i,j);l(a,e,f,void 0,m)}return f};return b}(a);e=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e,f,g){var h;h=a.call(this,b,c,e,f)||this;h.$ReStoreTable$p_1=new Map();h.index=function(a){return d("ReStoreUtils").getOrCreate(h.$ReStoreTable$p_1,a,function(){return new(d("ReStoreIndex").ReStoreIndex)(a,h.$ReStoreTable$p_2,h.$ReStoreTable$p_3,h.$ReStoreTable$p_4,h.$ReStoreTable$p_5,h.$ReStoreTable$p_6)})};h.subscribe=function(a,b,c){return h.$ReStoreTable$p_6.subscribeTable(h.$ReStoreTable$p_2.name,a,(j||(j=d("ReQLBounds"))).extendBounds(b,h.$ReStoreTable$p_2.primaryKeyIds.length),c)};h.$ReStoreTable$p_2=b;h.$ReStoreTable$p_3=c;h.$ReStoreTable$p_4=e;h.$ReStoreTable$p_5=f;h.$ReStoreTable$p_6=g;return h}return b}(a);g.ReStoreTransactionTable=b;g.ReStoreTable=e}),98);
__d("ReStoreTransactionDelay",["setTimeout"],(function(a,b,c,d,e,f,g){"use strict";async function a(a){a=a==="background"?new Promise(function(a){return c("setTimeout")(a,0)}):Promise.resolve();await a}g.default=a}),98);
__d("IntervalList",["FBLogger","ReQLBounds","ReStoreKeyComparer"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){if(a==null)throw c("FBLogger")("messenger_web_product").mustfixThrow("must not be null");return a}function a(a,b){var c=new Map(),e=new Map(),f=new Map();function g(b,c){return c==null?!0:(c.gt!==void 0?a(b,c.gt)>0:c.gte!==void 0?a(b,c.gte)>=0:!0)&&(c.lt!==void 0?a(b,c.lt)<0:c.lte!==void 0?a(b,c.lte)<=0:!0)}function* k(a){var f=0;while(f<a.length&&e.size){f++;var i=a.slice(0,f);f<b&&i.push((h||(h=d("ReStoreKeyComparer"))).MAX_KEY);i=e.get(JSON.stringify(i));if(i!=null)for(i of i)yield i}for(i of c.entries()){f=i[0];var j=i[1];c.has(f)&&g(a,j)&&(yield f)}}function l(a){var b=f.get(a);if(b!=null){f["delete"](a);var d=j(e.get(b));d["delete"](a);d.size===0&&e["delete"](b)}else c["delete"](a)}function m(a,g){var h;if(a&&a.gte!=null&&a.lte!=null&&(h=JSON.stringify((i||(i=d("ReQLBounds"))).nextKey(a.gte,b)))===JSON.stringify(a.lte)){var j=e.get(h);j==null&&(j=new Set(),e.set(h,j));j.add(g);f.set(g,h)}else c.set(g,a)}return{"delete":l,findIntersecting:k,set:m}}g["default"]=a}),98);
__d("createReStoreSubscriptionManager",["ExecutionEnvironment","FBLogger","IntervalList","Promise","PromiseOrValue","ReStoreKeyComparer","ReStoreUtils","asyncToGeneratorRuntime","isPromise","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l;function a(a,e,f){var g=new Map(),m=new Map();function n(a,b){return(l||(l=d("ReStoreKeyComparer"))).compareValue(a,b)===0}function o(a,b,c,d){a=(a=z.get(a))!=null?a:[];var e=[];for(var f=0;f<b.length;f++){var g=b[f];for(var h=0;h<32&&g!==0;h++){if(g&1){var i=a[(f<<5)+h];if(!n(c[i],d[i])){e[f]=((i=e[f])!=null?i:0)|1<<h%32}}g=g>>>1}}return e}function p(a,b){for(var c=0;c<Math.max(a.length,b.length);c++)if((a[c]&b[c])!==0)return!0;return!1}function q(a,b,d,e){try{a=a(b,d,e);if((j||(j=c("isPromise")))(a))return a["catch"](function(a){c("FBLogger")("messenger_web_product").catching(a).mustfix("error in ReStore subscription async handler")});else return a}catch(a){c("FBLogger")("messenger_web_product").catching(a).mustfix("error in ReStore subscription handlers")}}function r(a,c,e,f,g){var i=Array.from(c(f));if(g.operation==="put"&&g.prevValue!=null){c=function(){var b=g.prevValue,c=[];for(var h of i){h[0];var j=h[1];j!=null&&j.forEach(function(a,b){c[b]=((b=c[b])!=null?b:0)|a})}var l=o(a,c,b,g.value);return{v:(k||(k=d("PromiseOrValue"))).all(i.map(function(a){var b=a[0];a=a[1];if(a==null||p(l,a))return q(b,f,g,e)}))}}();if(typeof c==="object")return c.v}return(h||(h=b("Promise"))).all(i.map(function(a){var b=a[0];a[1];return q(b,f,g,e)}))}function s(b){return c("nullthrows")((g.has(b)?g:g.set(b,[c("IntervalList")((l||(l=d("ReStoreKeyComparer"))).compareKey,a.tableNames[b].primaryKeyIds.length),new Map()])).get(b))}function t(b,e){var f=s(b);f[0];f=f[1];return c("nullthrows")((f.has(e)?f:f.set(e,c("IntervalList")((l||(l=d("ReStoreKeyComparer"))).compareKey,a.tableNames[b].indexes[e].length))).get(e))}function u(b,e,f,g,h,i){var j=function(a,c){return r(e,b.findIntersecting,i,a,c)},m=f==null?void 0:d("ReStoreUtils").searchKey(a.tableNames[e],f,h),n=g==null?void 0:d("ReStoreUtils").searchKey(a.tableNames[e],g,h);if(n==null&&m!=null)return j(m,{operation:"delete",prevValue:c("nullthrows")(f)});if(m==null&&n!=null)return j(n,{operation:"add",value:c("nullthrows")(g)});if(m!=null&&n!=null)return(l||(l=d("ReStoreKeyComparer"))).compareKey(m,n)===0?j(m,{operation:"put",prevValue:c("nullthrows")(f),value:c("nullthrows")(g)}):(k||(k=d("PromiseOrValue"))).map(j(m,{operation:"delete",prevValue:c("nullthrows")(f)}),function(){return j(n,{operation:"add",value:c("nullthrows")(g)})})}function v(a,b,c,e){var f=s(a),g=f[0],h=f[1];return(k||(k=d("PromiseOrValue"))).map(u(g,a,b,c,null,e),function(){return(k||(k=d("PromiseOrValue"))).all(Array.from(h.entries()).map(function(d){var f=d[0];d=d[1];return u(d,a,b,c,f,e)}).filter(function(a){return a!=null}))})}function w(){m.forEach(function(a){return a()})}function x(a,b){function d(){var d=new Map();try{for(var f of a){var g=f[0],h=f[1];e(b,g)&&d.set(g,h)}}catch(a){c("FBLogger")("messenger_web_product").catching(a).mustfix("Couldnot format changes to broadcast")}return Array.from(d)}if((i||(i=c("ExecutionEnvironment"))).isInBrowser&&f!=null){d=d();if(d.length===0)return;f.postMessage(b,d)}}(i||(i=c("ExecutionEnvironment"))).isInBrowser&&(f!=null&&f.onEventReceive("notifyTableV2",function(a){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=new WeakMap(),c=a.values();yield (k||(k=d("PromiseOrValue"))).loop(function(a){if(a.done)return{action:"break",value:void 0};a=a.value;var e=a[0];a=a[1];var f=a.values();return(k||(k=d("PromiseOrValue"))).map(k.loop(function(a){if(a.done)return{action:"break",value:void 0};a=a.value;var c=a[0];a=a[1];return(k||(k=d("PromiseOrValue"))).map(v(e,c,a,b),function(){return{action:"continue",value:f.next()}})},f.next()),function(){return{action:"continue",value:c.next()}})},c.next());w()})())}));var y=new Map(),z=new Map();function A(a,b){if(b==null)return null;var c=y.get(a);c==null&&(c=new Map(),y.set(a,c));var d=[];for(b of b){var e=c.get(b);if(e==null){e=c.size;c.set(b,e);var f=z.get(a);f==null&&(f=[],z.set(a,f));f.push(b)}f=e>>5;e=e&31;d[f]=((f=d[f])!=null?f:0)|1<<e}return d}return{dispose:function(){g.clear(),m.clear()},notifyCommit:w,notifyTableAndIndexSubscribers:v,notifyTableV2:x,subscribeIndex:function(a,c,d,e,f){var g=t(a,c),i=!1;c=function(a,c,e){return i?(h||(h=b("Promise"))).resolve():q(d,a,c,e)};var j=[c,A(a,f)];g.set(e,j);return function(){i=!0,g["delete"](j)}},subscribeTable:function(a,c,d,e){var f=s(a),g=f[0],i=!1;f=function(a,d,e){return i?(h||(h=b("Promise"))).resolve():q(c,a,d,e)};var j=[f,A(a,e)];g.set(d,j);return function(){i=!0,g["delete"](j)}},subscribeToCommit:function(a){m.set(a,a);return function(){m["delete"](a)}}}}g["default"]=a}),98);
__d("ReStore",["ExecutionEnvironment","FBLogger","LSTableDefaults","LSTransactionLogger","MessengerLogHistory","MetaConfig","PromiseOrValue","ReStoreDefaultValueMigration","ReStoreDefaultValuesMetadata","ReStoreHooks","ReStoreIndexeddbPersistenceInitFailure","ReStoreIndicesMigration","ReStorePersistence","ReStorePersistenceIds","ReStoreTable","ReStoreTransactionDelay","ReStoreTransactionLock","ReStoreUtils","clearTimeout","cr:1088","createReStoreSubscriptionManager","gkx","hashString","isPromise","nullthrows","promiseDone","qpl","setImmediate","setTimeout","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=d("MessengerLogHistory").getInstance("db_init"),l=c("qpl")._(25306500,"1488"),m=500;function n(a){a=Object.values(a.tableIds).map(function(a){return babelHelpers.extends({},a,{indexPredicates:Object.entries((a=a.indexPredicates)!=null?a:{}).map(function(a){var b=a[0];a=a[1];return[b,a.toString()]})})});return JSON.stringify(a)}e=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,"Transaction has finished")||this}return b}(babelHelpers.wrapNativeSuper(Error));function o(a,b){function d(b){if(b.done)return b.value;if(!(j||(j=c("isPromise")))(b.value))throw c("unrecoverableViolation")("expected promise","messenger_web_product");return b.value.then(function(b){return d(a.next(b))})}return d(a.next(b))}function a(a,e,f,g,j){f===void 0&&(f=[]);var q=d("ReStorePersistence").createDbStore(a),r=a.tabTablesNotifier==null?void 0:a.tabTablesNotifier(),s=c("createReStoreSubscriptionManager")(e,a.shouldSync,r),t=d("ReStoreHooks").createHookManager(f),u=q.createTransaction("readonly"),v=a.types.includes("indexeddb"),w={background:{first:null,last:null},sync_script:{first:null,last:null},ui:{first:null,last:null}},x=c("hashString")(n(e)),y=c("hashString")(JSON.stringify(c("LSTableDefaults")));j==null?void 0:j.addAnnotations({int:{defaultValuesVersion:y,schemaVersion:x}});j==null?void 0:j.addPoint("migration_start");k.debug("restore migration start");var z=new(d("ReStoreTransactionLock").WaitForPromiseLock)(q.runExclusively(async function(){var a,b;j==null?void 0:j.addPoint("migration_execute_start");var c=new Map(),f=q.createTransaction("readwrite"),h=D(f,c);a=(a=await o(f.table(d("ReStoreDefaultValuesMetadata").schemaVersionTableName).readData(new WeakMap(),d("ReStorePersistenceIds").idForSchema)))==null?void 0:a.schemaVersion;b=(b=await o(f.table(d("ReStoreDefaultValuesMetadata").schemaVersionTableName).readData(new WeakMap(),d("ReStorePersistenceIds").idForDefaultValue)))==null?void 0:b.defaultValuesVersion;a!=null&&(j==null?void 0:j.addAnnotations({int:{storeDefaultValuesVersion:b,storeSchemaVersion:a}}));var i;if(g!=null){var l;i=(l=await o(f.table(d("ReStoreDefaultValuesMetadata").schemaVersionTableName).readData(new WeakMap(),d("ReStorePersistenceIds").idForCustomMigrationValue)))==null?void 0:l.customMigrationVersion}if(a===x&&b===y&&i===(g==null?void 0:g.targetVersion)){f.close();k.debug("restore migration skipped");j==null?void 0:j.addPoint("migration_skipped");return}l=a==null;try{await d("ReStoreDefaultValueMigration").runMigrationForTableDefaultValuesIfNeeded(h,e,l);await d("ReStoreIndicesMigration").runMigrationForIndicesIfNeeded(h,e,l,function(a,b){return new(d("ReStoreTransactionLock").ReStoreTransactionLock)().chainPromiseOrValue(function(d){return o(C(c,f,new WeakMap(),a,b,d))})});if(g!=null&&g.targetVersion!==i){await g.migration((b=i)!=null?b:0,h);f.table(d("ReStoreDefaultValuesMetadata").schemaVersionTableName).writeData(new WeakMap(),d("ReStorePersistenceIds").idForCustomMigrationValue,{customMigrationVersion:g.targetVersion})}j==null?void 0:j.addPoint("migration_execute_end");k.debug("restore migration complete");a=!0;(c.size===0||l===!0)&&(a=!1);f.table(d("ReStoreDefaultValuesMetadata").schemaVersionTableName).writeData(new WeakMap(),d("ReStorePersistenceIds").idForSchema,{schemaVersion:x});f.table(d("ReStoreDefaultValuesMetadata").schemaVersionTableName).writeData(new WeakMap(),d("ReStorePersistenceIds").idForDefaultValue,{defaultValuesVersion:y});await f.flush({upgrade:a})}catch(a){f.close();throw a}j==null?void 0:j.addPoint("migration_end");k.debug("restore migration end")},"readwrite",v).catch(function(a){j==null?void 0:j.addAnnotations({string:{migration_error:a.message}});a instanceof d("ReStoreIndexeddbPersistenceInitFailure").ReStoreIndexeddbPersistenceInitFailure||(j==null?void 0:j.endFail("migration_error"));k.debug("restore migration error");throw a}));async function A(a,b){var c=new WeakMap();await q.runExclusively(async function(){var f=new Map(),g=q.createTransaction("readwrite"),i=D(g,f),j=b.values();await (h||(h=d("PromiseOrValue"))).loop(function(b){if(b.done)return{action:"break",value:void 0};b=b.value;var f=b[0],g=b[1];return(h||(h=d("PromiseOrValue"))).map(h.map(g==null?i.table(a).delete(d("ReStoreUtils").searchKey(e.tableNames[a],f)):i.table(a).put(g),function(){return s.notifyTableAndIndexSubscribers(a,f,g,c)}),function(){return{action:"continue",value:j.next()}})},j.next());try{await g.flush({upgrade:!0})}catch(a){g.close();throw a}},"readwrite",v)}function B(){var a=q;a instanceof Object&&a.clearCache!==void 0&&a.clearCache instanceof Function&&a.clearCache()}function* C(a,b,f,g,h,i){var j=b.table(g),k=e.tableNames[g];for(var l of h)yield* j.clearIds(f,l);l=h.filter(function(a){return(k==null?void 0:k.indexes[a])!=null});if(l.length===0)return;h=d("ReStoreUtils").entries(b,f,k,void 0,"asc",void 0,t);var n=[],o=(yield* h.next(i));while(!o.done){while(!o.done&&n.length<=m)n.push(o.value),o=(yield* h.next(i));for(var p of n){var q=p[0],r=p[1];r=d("ReStoreUtils").indicesWithKeyForValue(e.tableNames[g],l,r);yield* d("ReStoreUtils").deconflictIndicesLocked(e,a,b,f,g,r,t,i);q=c("nullthrows")(yield* j.getId(f,q));yield* d("ReStoreUtils").addIdToIndices(b,f,g,q,r)}n.length=0;B()}}function D(a,b,c){var f=new(d("ReStoreTransactionLock").ReStoreTransactionLock)(),g=c==null?void 0:c.instanceKey,h=new Map(),i=new Proxy({table:function(c){return new(d("ReStoreTable").ReStoreTransactionTable)(c,e,t,f,a,s,i,g,b)}},{get:function(c,j){return!Object.prototype.hasOwnProperty.call(e.tableNames,j)?Reflect.get.apply(Reflect,arguments):d("ReStoreUtils").getOrCreate(h,j,function(){return new(d("ReStoreTable").ReStoreTransactionTable)(j,e,t,f,a,s,i,g,b)})}});return i}var E;function F(a,b,d){return new Promise(function(e,f){c("gkx")("23661")&&(E=f),w[b].last==null?w[b].first=w[b].last={value:{code:function(b){function a(){return b.apply(this,arguments)}a.toString=function(){return b.toString()};return a}(function(){return a().then(e,f)}),writemode:d}}:w[b].last=w[b].last.next={value:{code:function(b){function a(){return b.apply(this,arguments)}a.toString=function(){return b.toString()};return a}(function(){return a().then(e,f)}),writemode:d}}})}function G(){if(c("gkx")("116")){var a=w.ui.first!=null?w.ui:w.sync_script.first!=null?w.sync_script:w.background;if(a.first==null){c("FBLogger")("messenger_web_product").mustfix("Expected work is missing");return Promise.resolve()}var b=a.first;a.first===a.last&&(a.last=null);a.first=a.first.next;return q.runExclusively(async function(){await b.value.code()},b.value.writemode,v)}else return q.runExclusively(async function(){var a=w.ui.first!=null?w.ui:w.sync_script.first!=null?w.sync_script:w.background;if(a.first==null){c("FBLogger")("messenger_web_product").mustfix("Expected work is missing");return}var b=a.first;a.first===a.last&&(a.last=null);a.first=a.first.next;await b.value.code()},"readwrite",v)}async function H(a,b,d,e){d===void 0&&(d="background");e===void 0&&(e={source:"unknown",type:"user_initiated"});a=await I(a,b,d,e);if(a==="TIMEOUT")throw c("FBLogger")("messenger_web_product").blameToPreviousFrame().mustfixThrow("ReStore transaction took too long to execute");return a}async function I(a,e,f,g){f===void 0&&(f="background");var i,j,k,m,n,o=c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").startTracking(v,l,f);b("cr:1088")&&(i=Date.now());async function r(){c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").mark(l,o,"execute_start");b("cr:1088")&&(j=Date.now());var e={ref:void 0},f=new Map(),r=q.createTransaction("readwrite"),u;b("cr:1088")==null?void 0:b("cr:1088").trackingStoredProceduresForNewTransaction(g);try{var v=D(r,f,{instanceKey:o});u=await Promise.race([a(v),p(e,o)]);if(u==="TIMEOUT")return"TIMEOUT";e.ref!=null&&c("clearTimeout")(e.ref);b("cr:1088")&&(k=Date.now());c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").mark(l,o,"execute_end");c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").mark(l,o,"flush_start");await r.flush({instanceKey:o});c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").mark(l,o,"flush_end")}catch(a){e.ref!=null&&c("clearTimeout")(e.ref);r.close();c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").fail(l,o,a);c("FBLogger")("messenger_web_product").catching(a).mustfix("Transaction failed");throw a}finally{b("cr:1088")==null?void 0:b("cr:1088").stopTrackingStoredProcedures()}b("cr:1088")&&(n=Date.now());c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").mark(l,o,"broadcast_start");var w=new WeakMap(),x=new Map();for(v of f){e=v[0];r=v[1];e=JSON.parse(e);var y=e[0];e[1];e=x.get(y);e==null&&(e=[],x.set(y,e));var z=r[0];r=r[1];r=t.beforeNotify({newValue:r,prevValue:z,tableName:y});z=r.newValue;y=r.prevValue;e.push([y,z])}var A=x.entries();await (h||(h=d("PromiseOrValue"))).loop(function(b){if(b.done)return{action:"break",value:void 0};b=b.value;var a=b[0];b=b[1];var c=b.values();return(h||(h=d("PromiseOrValue"))).map(h.loop(function(b){if(b.done)return{action:"break",value:void 0};b=b.value;var e=b[0];b=b[1];return(h||(h=d("PromiseOrValue"))).map(s.notifyTableAndIndexSubscribers(a,e,b,w),function(){return{action:"continue",value:c.next()}})},c.next()),function(){return{action:"continue",value:A.next()}})},A.next());await q.queueCommitWork(function(){s.notifyTableV2(x,"notifyTableV2");s.notifyTableV2(x,"notifyInMemoryTable");return Promise.resolve()});s.notifyCommit();if(b("cr:1088")){m=Date.now();r={broadcast:m,complete:k,flush:n,queue:i,start:j};b("cr:1088").recordRestoreTransaction(r,{changedKeys:f})}c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").mark(l,o,"broadcast_end");c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").mark(l,o,"post_commit_start");c("setImmediate")(function(){c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").mark(l,o,"post_commit_end"),c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").end(l,o)});return u}await c("ReStoreTransactionDelay")(f);r=F(r,f,e);c("promiseDone")(G(),function(){},function(a){E==null?void 0:E(a)});return r}(i||(i=c("ExecutionEnvironment"))).isInBrowser&&(r!=null&&r.onEventReceive("notifyInMemoryTable",function(b){c("promiseDone")(async function(){for(var c of b){var d=c[0],e=c[1];a.shouldApplySync("notifyInMemoryTable",d)&&await A(d,e)}s.notifyCommit()}())}));var J=Object.keys(e.tableNames).reduce(function(a,b){return babelHelpers.extends({},a,(a={},a[b]=new(d("ReStoreTable").ReStoreTable)(e.tableNames[b],t,z,u,s),a))},{});return{clearCacheIfSupported:B,closeDb:function(){var a=q;a instanceof Object&&a.close!==void 0&&a.close()},getCustomMigrationVersion:async function(){var a=await o(q.createTransaction("readonly").table(d("ReStoreDefaultValuesMetadata").schemaVersionTableName).readData(new WeakMap(),d("ReStorePersistenceIds").idForCustomMigrationValue));return a==null?void 0:a.customMigrationVersion},getTableData:function(){return e},isClosed:function(){return q.isClosed()},isPersistenceSupported:function(){var a=q;return a instanceof Object&&a.isPersistenceSupported!==void 0&&a.isPersistenceSupported instanceof Function?a.isPersistenceSupported():Promise.resolve(!0)},persistenceTypes:a.types,runInTransaction:H,subscribeToCommit:function(a){return s.subscribeToCommit(a)},subscriptionManager:s,table:function(a){return J[a]},tables:J}}function p(a,b){return!c("MetaConfig")._("27")?new Promise(function(){}):new Promise(function(d){var e=5e3;a.ref=c("setTimeout")(function(){c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").mark(l,b,"slow_transaction"),d("TIMEOUT")},e)})}a.TransactionClosedError=e;g.default=a}),98);
__d("createReStoreEphemeralPersistence",["BrowserLockManager","CurrentMessengerUser","FBLogger","LSTransactionLogger","Promise","ReStorePersistence","asyncToGeneratorRuntime","gkx","promiseDone","qpl","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("CurrentMessengerUser").getIDorEIMU();function j(a,b,c){return(a.has(b)?a:a.set(b,c())).get(b)}var k=c("qpl")._(25303045,"817");function a(){var a=(h||(h=b("Promise"))).resolve(),e=new Map();function f(a){return j(e,a,function(){return new Map()})}return{flush:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){c("gkx")("26396")&&(yield new(h||(h=b("Promise")))(function(a,b){c("setTimeout")(function(){a()},50)})),a.forEach(function(a,b){var c=f(b);a.forEach(function(a,b){d("ReStorePersistence").isDeletedValue(a)?c["delete"](b):c.set(b,a)})})});function e(b){return a.apply(this,arguments)}return e}(),get:function(a,b,c){a=f(b);return a.get(c)},logError:function(a,b,d,e){if(d==="dbCorruption"){throw c("FBLogger")("messenger_web_product").mustfixThrow("Got unexpected undefined in edb, mode: %s, table: %s, id: %s, deletedInThisTxn: %s",b,a,(d=e==null?void 0:e.id)!=null?d:"",(b=e==null?void 0:e.deletedInThisTxn)!=null?b:"")}},queueCommitWork:void 0,runExclusively:function(d,e,f){f===void 0&&(f=!1);if(c("BrowserLockManager")!=null&&c("gkx")("26397"))return new(h||(h=b("Promise")))(function(e,g){var h="edbLock_"+i,a=c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").startTracking(f,k,void 0,h);c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").addAnnotations(k,a,{string:{source:"createReStoreEphemeralPersistence",type:"runExclusivelyLock"}});c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").mark(k,a,"lock_requested");c("promiseDone")(c("BrowserLockManager").request(h,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").mark(k,a,"lock_granted");try{e(yield d()),c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").end(k,a)}catch(b){g(b),c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").fail(k,a)}})),function(b){c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").end(k,a)},function(b){c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").fail(k,a)})});else{var g=c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").startTracking(f,k);c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").addAnnotations(k,g,{string:{source:"createReStoreEphemeralPersistence",type:"runExclusivelyPromiseChain"}});return new(h||(h=b("Promise")))(function(e,f){a=a.then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{e(yield d()),c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").end(k,g)}catch(a){f(a),c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").fail(k,g)}}))})}},shouldApplySync:function(){return!1},shouldInline:function(a,b){return!0},shouldSync:function(){return!1},types:["ephemeral"],uniqueId:""}}g["default"]=a}),98);
__d("LSJSInMemoryStorage",["LSPlatformLsInitLog","MAWLSVaultingHooks","ReStore","createReStoreEphemeralPersistence"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("ReStore")(c("createReStoreEphemeralPersistence")(),a,[c("MAWLSVaultingHooks")],void 0,d("LSPlatformLsInitLog").lsInitLogger)}g["default"]=a}),98);
__d("LSDbForeignKeys",[],(function(a,b,c,d,e,f){"use strict";a={attachments:[{indexName:"fk_attachments",tableName:"attachment_items"},{indexName:"fk_attachments",tableName:"attachment_ctas"}],community_chat_poll_options:[{tableName:"community_chat_poll_votes"}],community_chat_polls:[{tableName:"community_chat_poll_options"},{tableName:"community_chat_poll_votes"}],data_trace_meta:[{indexName:"traceIdAddonId",tableName:"data_trace_addon"}],messages:[{indexName:"fk_messages",tableName:"attachments"},{indexName:"fk_messages",tableName:"reactions"}],pending_tasks:[{tableName:"encrypted_backup_restore_task_payload_context"},{indexName:"fk_pending_tasks",tableName:"pending_backups_context_v2"},{indexName:"fk_pending_tasks",tableName:"secure_recovery_code_data"},{indexName:"fk_pending_tasks",tableName:"secure_encrypted_backups_message_thread_id_context"},{tableName:"messages_optimistic_context"}],rooms:[{tableName:"room_participants"}],secure_encrypted_backups_client_state:[{indexName:"fk_secure_encrypted_backups_client_state",tableName:"secure_encrypted_backups_epochs"}],secure_encrypted_backups_devices:[{indexName:"fk_secure_encrypted_backups_device_supported_versions_device_id",tableName:"secure_encrypted_backups_device_supported_versions"}],threads:[{indexName:"threadKeyCtaId",tableName:"thread_nullstate_ctas"},{tableName:"messages"},{tableName:"attachments"},{tableName:"thread_nullstate"},{tableName:"messages_ranges_v2__generated"},{tableName:"participants"},{indexName:"fk_threads",tableName:"mi_act_mapping_table"}]};b=a;f["default"]=b}),66);
__d("ReStoreMetadata",["ReStoreDefaultValuesMetadata","ReStoreIndexMetadata"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return function(b){var c={},e={},f=-1;for(var g=0;g<b.length;g++){var h=b[g];for(var h=h,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k,l;if(i){if(j>=h.length)break;l=h[j++]}else{j=h.next();if(j.done)break;l=j.value}l=l;k={autoIncrement:(k=l.auto_increment)!=null?k:!1,cascadeUpdates:(k=a[l.name])!=null?k:[],id:parseInt(l.id,10),indexes:(k=Object.fromEntries(Object.entries((k=l.indexes)!=null?k:{}).map(function(a){var b=a[0];a=a[1].columns;return[b,a]})))!=null?k:{},indexPredicates:Object.fromEntries(Object.entries((k=l.indexes)!=null?k:{}).filter(function(a){a[0];a=a[1];return a.predicate}).map(function(a){var b=a[0];a=a[1];return[b,a.predicate]})),name:l.name,primaryKeyIds:l.primary_key};c[k.id]=k;e[k.name]=k;k.id>f&&(f=k.id)}}l={autoIncrement:!1,cascadeUpdates:[],id:++f,indexes:{},name:d("ReStoreIndexMetadata").indicesTableName,primaryKeyIds:["tableName","indexName"]};c[l.id]=l;e[l.name]=l;k={autoIncrement:!1,cascadeUpdates:[],id:++f,indexes:{},name:d("ReStoreDefaultValuesMetadata").defaultValuesTableName,primaryKeyIds:["t"]};c[k.id]=k;e[k.name]=k;j={autoIncrement:!1,cascadeUpdates:[],id:++f,indexes:{},name:d("ReStoreDefaultValuesMetadata").schemaVersionTableName,primaryKeyIds:[]};c[j.id]=j;e[j.name]=j;return{tableIds:c,tableNames:e}}}g.getBuildTableData=a}),98);
__d("LSMetadata",["LSDbForeignKeys","LSDbSchema","LSTableSchemas","ReStoreMetadata","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=d("ReStoreMetadata").getBuildTableData(c("LSDbForeignKeys"));function a(a){var b=a.flat().reduce(function(a,b){return Math.max(a,parseInt(b.id,10))},-1);a=h([].concat(a,[d("LSDbSchema").clientSchema.map(function(a,c){return babelHelpers["extends"]({},a,{id:(b+c+1).toString()})})]));var c=a.tableIds;a=a.tableNames;return{tableIds:c,tableNames:a}}function i(a){return!0}function j(a){var b=a.reduce(function(a,b){return function(c){return c[b]!=null&&a(c)}},i);b.toString=function(){return"dynamic predicate on ["+a.join(",")+"]"};return b}b=a(c("LSTableSchemas").map(function(a){return a.map(function(a){var b;return babelHelpers["extends"]({},a,{indexes:Object.fromEntries(Object.keys((b=a.indexes)!=null?b:{}).map(function(b){var d=c("nullthrows")(a.indexes)[b],e=d.ignore_nulls;d=babelHelpers.objectWithoutPropertiesLoose(d,["ignore_nulls"]);return[b,babelHelpers["extends"]({},d,{predicate:e?j(e):void 0})]}))})})}));g.buildTableData=h;g.buildMetadata=a;g.metadata=b}),98);
__d("MWConditionallySetupEBStateDB",["asyncToGeneratorRuntime","cr:6693"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=!1);if(b("cr:6693")!=null){a=(yield b("cr:6693").makeEBStateDB(a));return a}});return h.apply(this,arguments)}g.conditionallyMakeEBStateDB=a}),98);
__d("MWLSSchemaEphemeral",["FBLogger","LSJSInMemoryStorage","LSMetadata","LSPlatformLsInitLog","MAWLSVaultingHooks","MWConditionallySetupEBStateDB","MessengerLogHistory","ReStore","asyncToGeneratorRuntime","cr:8624"],(function(a,b,c,d,e,f,g){"use strict";var h=d("MessengerLogHistory").getInstance("db_init");function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("LSPlatformLsInitLog").addPoint("init_start");var a;try{var e=(yield d("MWConditionallySetupEBStateDB").conditionallyMakeEBStateDB());e!=null&&(h.debug("Creating EB State DB"),a=c("ReStore")(e,d("LSMetadata").metadata,[c("MAWLSVaultingHooks")],void 0,d("LSPlatformLsInitLog").lsInitLogger),yield b("cr:8624")==null?void 0:b("cr:8624")(a),h.debug("EB State DB inited"))}catch(a){c("FBLogger")("messenger_web_clients").catching(a).mustfix("EBSM failed")}a==null&&(h.debug("Creating EDB"),a=c("LSJSInMemoryStorage")(d("LSMetadata").metadata),h.debug("EDB inited"));d("LSPlatformLsInitLog").addPoint("init_end");return a});return i.apply(this,arguments)}g.createDB=a}),98);
__d("LSE2EEMetadataSyncGroupUtils",["gkx","isArmadillo","isInstamadillo","isOccamadilloResumeSyncEnabled","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=c("isArmadillo")()||c("gkx")("23910")===!0&&!c("isInstamadillo")(),i=c("qex")._("923")===!0&&!c("isInstamadillo")();function a(){return h&&!c("isOccamadilloResumeSyncEnabled")()}function b(){return h?{groupId:95}:null}function d(){return i?{groupId:95}:null}g.shouldAlwaysResetE2EEMetadata=a;g.getE2EEMetadataSyncGroup=b;g.getE2EEMetadataSyncGroupForIGDSyncGroup=d}),98);
__d("XPlatReactCrypto",["err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h=self.crypto)==null?void 0:h.subtle;function a(a){var b;if(typeof ((b=self.crypto)==null?void 0:b.getRandomValues)!=="function")throw c("err")("crypto.getRandomValues: Not implemented");self.crypto.getRandomValues(a);return a}function b(){var a;if(typeof ((a=self.crypto)==null?void 0:a.randomUUID)!=="function")return null;a=self.crypto.randomUUID();return typeof a==="string"?a:null}function d(a,b,d,e,f){if(i==null)throw c("err")("crypto.subtle.importKey: Not implemented");return i.importKey(a,b,d,e,f)}function e(a,b){if(i==null)throw c("err")("crypto.subtle.exportKey: Not implemented");return i.exportKey(a,b)}function f(a,b,d){if(i==null)throw c("err")("crypto.subtle.generateKey: Not implemented");return i.generateKey(a,b,d)}function j(a,b,d){if(i==null)throw c("err")("crypto.subtle.encrypt: Not implemented");return i.encrypt(a,b,d)}function k(a,b,d){if(i==null)throw c("err")("crypto.subtle.decrypt: Not implemented");return i.decrypt(a,b,d)}function l(a,b,d){if(i==null)throw c("err")("crypto.subtle.sign: Not implemented");return i.sign(a,b,d)}function m(a,b){if(i==null)throw c("err")("crypto.subtle.digest: Not implemented");return i.digest(a,b)}function n(a,b,d){if(i==null)throw c("err")("crypto.subtle.deriveBits: Not implemented");return i.deriveBits(a,b,d)}function o(a,b,d,e,f){if(i==null)throw c("err")("crypto.subtle.deriveKey: Not implemented");return i.deriveKey(a,b,d,e,f)}g.getRandomValues=a;g.randomUUID=b;g.subtleImportKey=d;g.subtleExportKey=e;g.subtleGenerateKey=f;g.subtleEncrypt=j;g.subtleDecrypt=k;g.subtleSign=l;g.subtleDigest=m;g.subtleDeriveBits=n;g.subtleDeriveKey=o}),98);/*FB_PKG_DELIM*/
__d("CometVirtualCursorStatus",["UserAgent","cr:1345969","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=null;function j(){i||(i=window.addEventListener("blur",function(){h=null,k()}))}function k(){i&&(i.remove(),i=null)}function a(a){h=a.keyCode,j()}function d(a){h=null,k()}if(typeof window!=="undefined"&&window.document&&window.document.createElement){f=document.documentElement;if(f)if(f.addEventListener)f.addEventListener("keydown",a,!0),f.addEventListener("keyup",d,!0);else if(f.attachEvent){f=f.attachEvent;f("onkeydown",a);f("onkeyup",d)}}var l={getKeyDownCode:function(){return h},isKeyDown:function(){return!!h}},m=!1,n=!1,o=null,p=!1;function q(a){var b=new Set(),d=l.isKeyDown(),e=a.WEBKIT_FORCE_AT_MOUSE_DOWN,f=a.clientX,g=a.clientY,h=a.isTrusted,i=a.mozInputSource,j=a.offsetX,k=a.offsetY,o=a.webkitForce;f===0&&g===0&&j>=0&&k>=0&&n&&h&&i==null&&b.add("Chrome");m&&n&&!d&&o!=null&&o<e&&j===0&&k===0&&i==null&&b.add("Safari-edge");f===0&&g===0&&j<0&&k<0&&n&&i==null&&b.add("Safari-old");if(!m&&!n&&!d&&h&&c("UserAgent").isBrowser("IE >= 10")&&i==null){o=a.target;e=o.clientHeight;d=o.clientWidth;f<0&&g<0?b.add("IE"):(j<0||j>d)&&(k<0||k>e)&&b.add("MSIE")}i===0&&h&&b.add("Firefox");return b}function r(){m=!0,c("setTimeout")(function(){m=!1},0)}function s(){n=!0,c("setTimeout")(function(){n=!1},0)}function t(a){p&&b("cr:1345969").log({extra_data:{source_app:"comet"},indicated_browsers:o,is_virtual_cursor_action:a})}function u(a){o===null&&(o=Array.from(q(a)));p=o!=null&&o.length>0;a=a.target!=null&&a.target.getAttribute!=null&&a.target.getAttribute("data-accessibilityid")==="virtual_cursor_trigger";t(a);c("setTimeout")(function(){p=!1,o=null},0)}function e(){document.addEventListener("click",u,!0),document.addEventListener("mousedown",r,!0),document.addEventListener("mouseup",s,!0)}g.initLogging=e}),98);
__d("CometIconWirelessSlashFilled.react",["CometSVGIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsx(c("CometSVGIcon.react"),babelHelpers["extends"]({viewBox:"0 0 24 24"},a,{children:i.jsx("path",{d:"M23.7805.2195c.2925.293.2925.768 0 1.061l-22.5 22.5C1.134 23.927.942 24 .75 24c-.192 0-.384-.073-.5305-.2195-.2925-.293-.2925-.768 0-1.061l12.1967947-12.1971509c-2.3773758-.1150468-4.79162015.7286756-6.6038447 2.5401009-.3905.3905-1.0235.3905-1.414 0-.3905-.3905-.3905-1.024 0-1.414 2.65728981-2.65728981 6.3696459-3.62280965 9.8005664-2.90852144l2.430738-2.43186193C11.7816792 4.58111626 6.15198938 5.65271062 2.27735 9.52735c-.3905.3905-1.0235.3905-1.414 0-.3905-.3905-.3905-1.0235 0-1.414 4.6714534-4.67191574 11.571522-5.78608437 17.3096457-3.34843552L22.7195.2195c.293-.2925.768-.2925 1.061 0zM12 18.5c.6905 0 1.25.5595 1.25 1.25S12.6905 21 12 21s-1.25-.5595-1.25-1.25.5595-1.25 1.25-1.25zm1.4175-4.81495c.9705.2455 1.8905.741 2.6485 1.499.3905.3905.3905 1.0235 0 1.414-.1955.1955-.451.293-.707.293-.256 0-.512-.0975-.707-.293-.7835333-.7835333-1.8301422-1.1445778-2.8581093-1.0880116L11.574 15.52855l1.8435-1.8435zm3.8154-3.8154c.848.4725 1.649 1.059 2.3685 1.779.391.39.391 1.023 0 1.414-.195.195-.451.293-.707.293-.2555 0-.5115-.098-.707-.293-.7285-.728-1.5575-1.291-2.439-1.7085zm2.1908-2.1908l1.4425-1.4425c.8.545 1.5615 1.168 2.2705 1.877.3905.3905.3905 1.0235 0 1.414-.1955.1955-.451.293-.707.293-.256 0-.5115-.0975-.707-.293-.5933333-.59333333-1.2283333-1.11861111-1.895162-1.57959491L19.4237 7.67885l1.4425-1.4425z"})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometFBUncaughtError.react",["fbt","CometContentArea.react","NullStateGeneral","TetraNullState.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx("div",{className:"x6s0dn4 x78zum5 x1dr59a3 xl56j7k xixxii4 xh8yej3",children:j.jsx(c("CometContentArea.react"),{verticalAlign:"middle",children:j.jsx(c("TetraNullState.react"),{headline:h._("__JHASH__GbFoxuI3sCw__JHASH__"),icon:c("NullStateGeneral")})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("BootloaderEventsPerf",["invariant","Bootloader","BootloaderEvents","ResourceTimingStore","objectEntries","objectValues"],(function(a,b,c,d,e,f,g,h){var i={total_count:0,total_bytes:0,downloaded_count:0,downloaded_bytes:0,cached_count:0,cached_bytes:0,inlined_count:0,inlined_bytes:0,duration:0,missing_count:0};function j(a,b,c){return Math.max(0,((c=c)!=null?c:0)-Math.max(a,(c=b)!=null?c:0))}function k(){return{blocking:babelHelpers["extends"]({},i),nonblocking:babelHelpers["extends"]({},i),"default":babelHelpers["extends"]({},i)}}function l(a,b,c){var e,f;if(c==null)e=0,f="downloaded";else if(c[1])e=c[0].length,f="inlined";else{c=d("ResourceTimingStore").getEntryForURL(c[0]);c?(e=c.encodedBodySize,f=c.transferSize===0?"cached":"downloaded"):(e=0,f="downloaded",a.missing_count++)}a.total_count++;a.total_bytes+=e;if(!b)return;a.duration=Math.max(a.duration,b);switch(f){case"downloaded":a.downloaded_count++;a.downloaded_bytes+=e;break;case"inlined":a.inlined_count++;a.inlined_bytes+=e;break;case"cached":a.cached_count++;a.cached_bytes+=e;break}}function m(a,b,d,e,f){var g=c("Bootloader").getResourceState(b);l(a,j(d,g.loadStart,g.loadEnd),e);g.loadError!=null&&f.add(b)}function n(a,b,d,e){var f=k();for(var a=c("objectEntries")(a),g=Array.isArray(a),i=0,a=g?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(g){if(i>=a.length)break;j=a[i++]}else{i=a.next();if(i.done)break;j=i.value}j=j;var l=j[0];j=j[1];for(var j=j,n=Array.isArray(j),o=0,j=n?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=j.length)break;p=j[o++]}else{o=j.next();if(o.done)break;p=o.value}p=p;var q=p[0];p=p[1];var r=void 0,s=void 0;switch(p.type){case"async":s=null;r=d;break;case"js":case"css":s=[p.src,p.d===1];r=f;break;default:p,h(0,3721)}m(r[l],q,b,s,e)}}return f}function o(a,b){var e={unpredicted:d("BootloaderEvents").newResourceMapSet(),ef:d("BootloaderEvents").newResourceMapSet(),overpredicted:d("BootloaderEvents").newResourceMapSet()};for(var f=c("objectEntries")(b),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;var j=i[0];i=i[1];for(var i=i.entries(),k=Array.isArray(i),l=0,i=k?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(k){if(l>=i.length)break;m=i[l++]}else{l=i.next();if(l.done)break;m=l.value}m=m;var n=m[0];m=m[1];a[j].has(n)?e.ef[j].set(n,m):e.overpredicted[j].set(n,m)}}for(n=c("objectEntries")(a),m=Array.isArray(n),l=0,n=m?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(m){if(l>=n.length)break;k=n[l++]}else{l=n.next();if(l.done)break;k=l.value}i=k;j=i[0];h=i[1];for(g=h.entries(),f=Array.isArray(g),a=0,g=f?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(a>=g.length)break;k=g[a++]}else{a=g.next();if(a.done)break;k=a.value}i=k;h=i[0];k=i[1];b[j].has(h)||e.unpredicted[j].set(h,k)}}return e}function a(a){var b=a.efData,c=a.rsrcs,d=a.startTime,e=new Set(),f;if(b){var g=o(c,b.tierOne);f=g.unpredicted;g={ef:n(g.ef,b.fetchRsrcsStart,k(),e),overpredicted:n(g.overpredicted,b.fetchRsrcsStart,k(),e)};b={ef_fetch_predictions:b.fetchPredictionsEnd-b.fetchPredictionsStart,ef_fetch_start_wait:b.fetchPredictionsEnd-b.fetchRsrcsStart,ef_head_start:d-b.fetchRsrcsStart}}else f=c,g={},b={};c=babelHelpers["extends"]({unpredicted:n(f,d,k(),e)},g);return{source:a.source,source_detail:a.sourceDetail,is_first_identical:a.isFirstIdentical,timeslice_context:(f=a.timesliceContext)==null?void 0:f.name,start_time:d,err_count:e.size,resources:c,durations:babelHelpers["extends"]({jsmods_wait:a.jsmodsStart-d,jsmods:a.jsmodsEnd-a.jsmodsStart,jsmods_done_wait:a.jsmodsEnd-d,download_done_wait:a.logTime-d},b),payloadStats:a.payloadStats}}function b(a){var b=a.startTime,e=0,f=0,g=0,h=0;for(var i=a.components,m=Array.isArray(i),o=0,i=m?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(m){if(o>=i.length)break;p=i[o++]}else{o=i.next();if(o.done)break;p=o.value}p=p;p=c("Bootloader").getComponentTiming(p);var q=p.tierTwoStart,r=p.tierTwoEnd,s=p.tierThreeStart;p=p.tierThreeEnd;e=Math.max(e,j(b,q,r));f=Math.max(f,j(b,b,r));g=Math.max(g,j(b,s,p));h=Math.max(h,j(b,b,p))}q=new Set();r=k();s=n(a.tierOne,b,r,q);p=n(a.tierTwo,b,r,q);o=n(a.tierThree,b,r,q);m=r.blocking.downloaded_count!=0;i=k();var t=d("BootloaderEvents").newResourceMapSet(),u=new Set(),v=[a.tierOne,a.tierTwo,a.tierThree];for(var w=0;w<v.length;w++){var x=v[w];for(var x=c("objectValues")(x),y=Array.isArray(x),z=0,x=y?x:x[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var A;if(y){if(z>=x.length)break;A=x[z++]}else{z=x.next();if(z.done)break;A=z.value}A=A;for(var A=A.keys(),B=Array.isArray(A),C=0,A=B?A:A[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var D;if(B){if(C>=A.length)break;D=A[C++]}else{C=A.next();if(C.done)break;D=C.value}D=D;u.add(D)}}}D=0;C=0;B=0;for(A=a.beRequests.values(),z=Array.isArray(A),y=0,A=z?A:A[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(z){if(y>=A.length)break;x=A[y++]}else{y=A.next();if(y.done)break;x=y.value}v=x;D+=j(b,b,v.requestStart);C+=v.serverGenTime;B+=v.jsmodsEnd-v.jsmodsStart;l(i[m?"blocking":"nonblocking"],v.responseStart-v.requestStart,[v.uri,!1]);for(w=c("objectEntries")(v.rsrcs),x=Array.isArray(w),v=0,w=x?w:w[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var E;if(x){if(v>=w.length)break;E=w[v++]}else{v=w.next();if(v.done)break;E=v.value}E=E;var F=E[0];E=E[1];for(var E=E,G=Array.isArray(E),H=0,E=G?E:E[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var I;if(G){if(H>=E.length)break;I=E[H++]}else{H=E.next();if(H.done)break;I=H.value}I=I;var J=I[0];I=I[1];u.has(J)||t[F].set(J,I)}}}J=n(t,b,r,q);return{ref:a.ref,components:a.components,timeslice_context:(I=a.timesliceContext)==null?void 0:I.name,start_time:b,err_count:q.size,resources:{t1:s,t2:p,t3:o,be:i,unpredicted:J,async:r},durations:{fetch_start_wait:a.fetchStartTime-b,be_start_wait:D,be_server_gen:C,be_jsmods:B,callback_wait:a.callbackStart-b,callback:a.callbackEnd-a.callbackStart,bootload_done_wait:a.callbackEnd-b,rdfd_requirelazy:e,rdfd_done_wait:f,rd_requirelazy:g,rd_done_wait:h}}}function e(a){a.start_time;var b=a.resources,d=a.durations;a=babelHelpers.objectWithoutPropertiesLoose(a,["start_time","resources","durations"]);for(var b=c("objectEntries")(b),e=Array.isArray(b),f=0,b=e?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=b.length)break;g=b[f++]}else{f=b.next();if(f.done)break;g=f.value}g=g;var h=g[0];g=g[1];for(var g=c("objectEntries")(g),i=Array.isArray(g),j=0,g=i?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(i){if(j>=g.length)break;k=g[j++]}else{j=g.next();if(j.done)break;k=j.value}k=k;var l=k[0];k=k[1];for(var k=c("objectEntries")(k),m=Array.isArray(k),n=0,k=m?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=k.length)break;o=k[n++]}else{n=k.next();if(n.done)break;o=n.value}o=o;var p=o[0];o=o[1];a[h+"_"+l+"_resources_"+p]=Math.round(Number(o))}}}for(p=c("objectEntries")(d),o=Array.isArray(p),n=0,p=o?p:p[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(o){if(n>=p.length)break;m=p[n++]}else{n=p.next();if(n.done)break;m=n.value}k=m;l=k[0];j=k[1];a[l+"_duration"]=Math.round(Number(j))}if(a.payloadStats){for(i=c("objectEntries")(a.payloadStats),g=Array.isArray(i),h=0,i=g?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(h>=i.length)break;f=i[h++]}else{h=i.next();if(h.done)break;f=h.value}e=f;b=e[0];d=e[1];for(m=c("objectEntries")(d),k=Array.isArray(m),l=0,m=k?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(k){if(l>=m.length)break;j=m[l++]}else{l=m.next();if(l.done)break;j=l.value}n=j;o=n[0];p=n[1];a[b+"_"+o+"_count"]=Math.round(Number(p))}}delete a.payloadStats}return a}g.computeHRData=a;g.computeBLData=b;g.flattenData=e}),98);
__d("BootloaderLoggingStatusEnum",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["SUCCESS","TIMEOUT"]);c=a;f["default"]=c}),66);
__d("CometBootloaderEventsTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:CometBootloaderEventsLoggerConfig")}),null);
__d("HasteResponseFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1823926");b=d("FalcoLoggerInternal").create("haste_response",a);e=b;g["default"]=e}),98);
__d("CometBootloaderLoggerUtil",["BootloaderEvents","BootloaderEventsPerf","CometBootloaderEventsTypedLoggerLite","CometTimeSpentNavigation","HasteResponseFalcoEvent","ResourceTimingStore","SiteData","performanceNavigationStart"],(function(a,b,c,d,e,f,g){"use strict";var h=!1;function a(a){var b=a.bl_sample_rate,e=a.hr_sample_rate,f=a.parent_lid;if(h||!(b||e))return;h=!0;d("ResourceTimingStore").init();var g=function(a){return{ms_since_navstart:Math.round(a-c("performanceNavigationStart")()),parent_lid:f,pkg_cohort:c("SiteData").pkg_cohort,request_path:(a=c("CometTimeSpentNavigation").getPathInfo())==null?void 0:a.name,svn_rev:c("SiteData").client_revision}};e&&d("BootloaderEvents").onHasteResponse(function(a){return c("HasteResponseFalcoEvent").log(function(){var b=d("BootloaderEventsPerf").computeHRData(a),c=d("BootloaderEventsPerf").flattenData(b);return babelHelpers["extends"]({},c,g(b.start_time))})});var i=function(a,b,e){a=d("BootloaderEventsPerf").computeBLData(a);var f=d("BootloaderEventsPerf").flattenData(a);c("CometBootloaderEventsTypedLoggerLite").log(babelHelpers["extends"]({},f,g(a.start_time),{status:b}),{weight:e})};b&&d("BootloaderEvents").onBootload(function(a){return i(a,"SUCCESS",b)});var j=1;d("BootloaderEvents").onBootloaderCallbackTimeout(function(a){return i(a,"TIMEOUT",j)})}g.initLogging=a}),98);
__d("CometPixelRatioUpdater",["Cookie","Run","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";var h="dpr";function i(a){c("Cookie").set(h,String(a))}function j(){window.devicePixelRatio!==d("WebPixelRatio").get()&&i(window.devicePixelRatio)}function a(){j(),d("Run").onBeforeUnload(j,!1),"onpagehide"in window&&window.addEventListener("pageHide",j)}g.startDetecting=a}),98);
__d("CometChromeDome",["JSScheduler","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("Chromedome").__setRef("CometChromeDome");function a(){i.onReady(function(a){(h||(h=d("JSScheduler"))).scheduleLoggingPriCallback(function(){a.start({})})})}g.init=a}),98);
__d("CSTXCookieRecordConsentControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/cookie/consent/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("MaybeSymbol",[],(function(a,b,c,d,e,f){"use strict";b=a.Symbol?a.Symbol:null;c=b;f["default"]=c}),66);
__d("URLSearchParams",["MaybeSymbol"],(function(a,b,c,d,e,f,g){var h=/\+/g,i=/[!\'()*]/g,j=/%20/g,k=c("MaybeSymbol")?c("MaybeSymbol").iterator:null;function l(a){return encodeURIComponent(a).replace(j,"+").replace(i,function(a){return"%"+a.charCodeAt(0).toString(16)})}function m(a){return decodeURIComponent((a=a)!=null?a:"").replace(h," ")}function n(a){var b=a.slice(0),c={next:function(){var a=b.length,c=b.shift();return{done:c===void 0&&a<=0,value:c}}};k&&(c[k]=function(){return c});return c}a=function(){function a(a){a===void 0&&(a="");a=a;a[0]==="?"&&(a=a.substr(1));this.$1=a.length?a.split("&").map(function(a){a=a.split("=");var b=a[0];a=a[1];return[m(b),m(a)]}):[]}var b=a.prototype;b.append=function(a,b){this.$1.push([a,String(b)])};b["delete"]=function(a){for(var b=0;b<this.$1.length;b++)this.$1[b][0]===a&&(this.$1.splice(b,1),b--)};b.entries=function(){if(k)return this.$1[k]();var a=this.$1.slice(0);return n(a)};b.get=function(a){for(var b=0,c=this.$1.length;b<c;b++)if(this.$1[b][0]===a)return this.$1[b][1];return null};b.getAll=function(a){var b=[];for(var c=0,d=this.$1.length;c<d;c++)this.$1[c][0]===a&&b.push(this.$1[c][1]);return b};b.has=function(a){for(var b=0,c=this.$1.length;b<c;b++)if(this.$1[b][0]===a)return!0;return!1};b.keys=function(){var a=this.$1.map(function(a){var b=a[0];a[1];return b});return k?a[k]():n(a)};b.set=function(a,b){var c=!1;for(var d=0;d<this.$1.length;d++)this.$1[d][0]===a&&(c?(this.$1.splice(d,1),d--):(this.$1[d][1]=String(b),c=!0));c||this.$1.push([a,String(b)])};b.toString=function(){return this.$1.map(function(a){var b=a[0];a=a[1];return l(b)+"="+l(a)}).join("&")};b.values=function(){var a=this.$1.map(function(a){a[0];a=a[1];return a});return k?a[k]():n(a)};b[k]=function(){return this.entries()};return a}();g["default"]=a}),98);
__d("DeferredCookie",["CSTXCookieRecordConsentControllerRouteBuilder","Cookie","CookieConsent","SubscriptionList","URLSearchParams","cr:1083116","cr:1083117","cr:3376","flattenPHPQueryData","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map(),j=!1,k=new Map(),l={addToQueue:function(a,b,d,e,f,g,j,k){if((h||(h=c("CookieConsent"))).hasConsent(1)){f?c("Cookie").setWithoutChecksIfFirstPartyContext(a,b,d,e,j,k):c("Cookie").setWithoutChecks(a,b,d,e,j,k);return}if(i.has(a))return;i.set(a,{name:a,value:b,nMilliSecs:d,path:e,firstPartyOnly:f,secure:j,domain:k})},getIsDeferredCookieInQueue:function(a){return i.has(a)},flushAllCookiesWithoutRecordingConsentDONOTCALLBEFORECONSENT:function(){i.forEach(function(a,b){a.firstPartyOnly?c("Cookie").setWithoutChecksIfFirstPartyContext(a.name,a.value,a.nMilliSecs,a.path,a.secure,a.domain):c("Cookie").setWithoutChecks(a.name,a.value,a.nMilliSecs,a.path,a.secure,a.domain)});i.clear();(h||(h=c("CookieConsent"))).setConsented();for(var a=k,b=Array.isArray(a),d=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(b){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e[1].fireCallbacks()}},flushAllCookiesINTERNALONLY:function(a,d,e,f,g){a===void 0&&(a=!1);e===void 0&&(e=!1);f===void 0&&(f=!1);l.flushAllCookiesWithoutRecordingConsentDONOTCALLBEFORECONSENT();var h={accept_only_essential:f};d!=null&&(d=Object.fromEntries(d),h={optouts:d,accept_only_essential:f});d=c("flattenPHPQueryData")(h);if(!j){f=c("CSTXCookieRecordConsentControllerRouteBuilder").buildUri({});h=new(c("URLSearchParams"))(location.search).get("ig_3p_controls");if(h==="on"){h=f.addQueryParam("ig_3p_controls","on");f=(h=h)!=null?h:f}j=!0;var i=function(){g&&g();a&&location.reload();if(e){var b=document.getElementsByTagName("iframe");b.length>0&&location.reload()}};b("cr:3376")!=null?c("promiseDone")(b("cr:3376")(f.toString(),{data:d,method:"POST"}),function(){return i()},function(a){b("cr:1083117")&&b("cr:1083117")("Cookie consent has not been set successfully: "+a.errorMsg,"comet_infra")}):b("cr:1083116")!=null&&new(b("cr:1083116"))(f.toString()).setData(d).setHandler(function(){return i()}).send()}},registerCallbackOnCookieFlush:function(a,b){(h||(h=c("CookieConsent"))).hasConsent(a)?b():(k.has(a)||k.set(a,new(c("SubscriptionList"))()),c("nullthrows")(k.get(a)).add(b))}};a=l;g["default"]=a}),98);
__d("SimplePageLoadLogger",["ODS","performance"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){(i||(i=d("ODS"))).bumpEntityKey(1678,"www_client_navigations",j())}function j(){if((h||(h=c("performance"))).navigation==null||(h||(h=c("performance"))).navigation.type==null)return"UNSUPPORTED";switch((h||(h=c("performance"))).navigation.type){case(h||(h=c("performance"))).navigation.TYPE_NAVIGATE:return"NAVIGATE";case(h||(h=c("performance"))).navigation.TYPE_RELOAD:return"RELOAD";case(h||(h=c("performance"))).navigation.TYPE_BACK_FORWARD:return"BACK_FORWARD";case(h||(h=c("performance"))).navigation.TYPE_RESERVED:return"RESERVED";default:return"UNKNOWN"}}g.logPageNavigationType=a}),98);
__d("StringTransformations",[],(function(a,b,c,d,e,f){"use strict";a={unicodeEscape:function(a){return a.replace(/[^A-Za-z0-9\-\.\:\_\$\/\+\=]/g,function(a){a=a.charCodeAt(0).toString(16);return"\\u"+("0000"+a.toUpperCase()).slice(-4)})},unicodeUnescape:function(a){return a.replace(/(\\u[0-9A-Fa-f]{4})/g,function(a){return String.fromCharCode(parseInt(a.slice(2),16))})}};f["default"]=a}),66);
__d("WebStorageMonster",["AsyncRequest","CacheStorage","Event","ExecutionEnvironment","NetworkStatus","StringTransformations","UserActivity","WebStorage","WebStorageCleanupReason","WebStorageMonsterLoggingURI","ifRequired","isEmpty","killswitch","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=1e4,l=5,m=!1;function n(a){var b={};for(var d in a){var e=a.getItem(d),f=c("StringTransformations").unicodeEscape(d);typeof e==="string"&&(b[f]=e.length)}return b}function o(a){var b=(h||(h=c("WebStorage"))).getLocalStorage();if(!b||a==null||!a.keys)return;r._getLocalStorageKeys().forEach(function(c){a.keys.includes(c)&&b.removeItem(c)})}function p(a){var b=(h||(h=c("WebStorage"))).getLocalStorage();b&&r._getLocalStorageKeys().forEach(function(c){a.some(function(a){return new RegExp(a).test(c)})||b.removeItem(c)})}function q(a,b){a===void 0&&(a=!1);b===void 0&&(b=k);if(c("UserActivity").isActive(b)){var d=Math.max(k,Math.floor(b/l));c("setTimeoutAcrossTransitions")(function(){q(a,d)},d)}else{r.cleanNow(a);var e=!c("killswitch")("WEB_STORAGE_MONSTER_DONT_RESCHEDULE_ON_RUN");if(e){var f=b*l;c("setTimeoutAcrossTransitions")(function(){q(a,f)},f)}}}var r={registerLogoutForm:function(a,b){c("Event").listen(a,"submit",function(a){r.cleanOnLogout(b,"WebStorageMonster.registerLogoutForm")})},schedule:function(a){a===void 0&&(a=!1);if(m||!(i||(i=c("ExecutionEnvironment"))).isInBrowser)return;m=!0;q(a)},cleanNow:function(a){a===void 0&&(a=!1);var b=Date.now(),d={},e=(h||(h=c("WebStorage"))).getLocalStorage();e&&(d.local_storage=n(e));e=h.getSessionStorage();e&&(d.session_storage=n(e));e=!(j||(j=c("isEmpty")))(d);var f=Date.now();d.logtime=f-b;if(e){var g,i=c("WebStorageMonsterLoggingURI").uri;if(i===null)return null;var k=function(){new(c("AsyncRequest"))(i).setData(d).setHandler(function(b){b=b.getPayload();b&&b.keys&&(b.keys=b.keys.map(c("StringTransformations").unicodeUnescape));a||o(b);c("NetworkStatus").reportSuccess()}).setErrorHandler(function(){c("NetworkStatus").reportError()}).setOption("retries",2).send()};if(c("NetworkStatus").isOnline())k();else{f=function(a){a=a.online;a&&(k(),g.remove())};g=c("NetworkStatus").onChange(f)}}},cleanOnLogout:function(a,b){d("WebStorageCleanupReason").setLastCleanupReason(b);c("CacheStorage").disablePersistentWrites();c("ifRequired")("WebAsyncStorage",function(a){a.disablePersistentWrites()});a?p(a):p([]);b=(h||(h=c("WebStorage"))).getSessionStorage();b&&b.clear();c("ifRequired")("WebAsyncStorage",function(a){a.clear(function(){})})},_getLocalStorageKeys:function(){var a=(h||(h=c("WebStorage"))).getLocalStorage();return a?Object.keys(a):[]}};a=r;g["default"]=a}),98);
__d("CometRootDeferredShared",["CometBootloaderLoggerUtil","CometOfflineTracing","CometVirtualCursorStatus","DeferredCookie","ErrorGuard","JSScheduler","SimplePageLoadLogger","WebStorageMonster","cr:10026","cr:1201738","cr:1332233","cr:1402","cr:1516609","cr:1813330","cr:2718","cr:653","currentCometRouterInstance","vc-tracker"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var e=a.blLoggingCavalryFields,f=a.deferredCookies;(i||(i=c("ErrorGuard"))).applyWithGuard(function(){return d("CometBootloaderLoggerUtil").initLogging(e)},null,[]);i.applyWithGuard(function(){return d("CometVirtualCursorStatus").initLogging()},null,[]);b("cr:1402")!=null&&(i||(i=c("ErrorGuard"))).applyWithGuard(function(){return b("cr:1402").subscribe()},null,[]);i.applyWithGuard(function(){return d("CometOfflineTracing").initialize()},null,[]);b("cr:10026")!=null&&(i||(i=c("ErrorGuard"))).applyWithGuard(function(){return b("cr:10026")(function(){var a;return(a=d("currentCometRouterInstance").get())==null?void 0:(a=a.getCurrentRouterState())==null?void 0:(a=a.main)==null?void 0:a.route})},null,[]);i.applyWithGuard(function(){return d("SimplePageLoadLogger").logPageNavigationType()},null,[]);(h||(h=d("JSScheduler"))).scheduleSpeculativeCallback(function(){c("WebStorageMonster").schedule()});b("cr:1201738")&&c("vc-tracker").VisualCompletionTraceObserver.subscribe(function(a){a.interactionType==="INITIAL_LOAD"&&b("cr:1201738").init("comet.idle")});b("cr:653")&&c("vc-tracker").VisualCompletionTraceObserver.subscribe(function(a){a.interactionType==="INITIAL_LOAD"&&b("cr:653").init()});Object.keys(f).forEach(function(a){var b=f[a],d=b.expiration_for_js,e=b.first_party_only,g=b.path,h=b.secure;b=b.value;c("DeferredCookie").addToQueue(a,b,d,g,e,!1,h)});b("cr:1332233")&&(i||(i=c("ErrorGuard"))).applyWithGuard(function(){return b("cr:1332233")()},null,[]);b("cr:1516609")!=null&&(i||(i=c("ErrorGuard"))).applyWithGuard(function(){return b("cr:1516609").initSignalCollection()},null,[]);b("cr:1813330")&&(i||(i=c("ErrorGuard"))).applyWithGuard(function(){return b("cr:1813330").init()},null,[]);b("cr:2718")&&(i||(i=c("ErrorGuard"))).applyWithGuard(function(){return b("cr:2718").init()},null,[])}g.initDeferred=a}),98);
__d("WebBrowserDimensionsTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:WebBrowserDimensionsLoggerConfig")}),null);
__d("CometBrowserDimensionsLogger",["CometDebounce","Cookie","ExecutionEnvironment","SiteData","WebBrowserDimensionsTypedLoggerLite","getViewportDimensions","isInIframe"],(function(a,b,c,d,e,f,g){"use strict";var h,i=null,j=!1,k={height:0,width:0};function l(){i===null&&(i=c("getViewportDimensions")());return i}function m(){var a=c("getViewportDimensions")(),b=a.height;a=a.width;(k.width!==a||k.height!==b)&&(k={height:b,width:a},c("Cookie").set("wd",a+"x"+b))}function n(){if(!(h||(h=c("ExecutionEnvironment"))).canUseDOM||c("isInIframe")()||j)return;j=!0;m();window.addEventListener("resize",c("CometDebounce")(m,{wait:250}),{passive:!0});window.addEventListener("focus",m,{passive:!0})}function a(a){var b,d=l();n();b={client_hint_width:a==null?void 0:a.clientHintWidth,pixel_ratio:(b=window.devicePixelRatio)!=null?b:1,screen_x:window.screen.width,screen_y:window.screen.height,server_pixel_ratio:c("SiteData").pr,server_viewport_x:a==null?void 0:a.viewportWidth,server_viewport_y:a==null?void 0:a.viewportHeight,viewport_x:d.width,viewport_y:d.height};window.navigator&&window.navigator.hardwareConcurrency&&(b.cpu_cores_count=window.navigator.hardwareConcurrency);if(window.innerWidth>0&&window.outerWidth>0){a=Math.round(window.outerWidth/window.innerWidth*100)/100;b.zoom_ratio=a}if(window.getComputedStyle&&document.documentElement!=null){d=window.getComputedStyle(document.documentElement);d!=null&&(b.document_font_size=d.fontSize)}c("WebBrowserDimensionsTypedLoggerLite").log(b)}g.init=a}),98);
__d("CometNetworkStatusToast",["fbt","ix","BaseToasterStateManager","CometIconWirelessSlashFilled.react","CometRelayEnvironmentFactory","NetworkStatus","SVGIcon","TetraIcon.react","cometPushToast","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l=null;function m(a){a=a.online;var b=c("BaseToasterStateManager").getInstance();l!=null&&(b.expire(l),l=null);l=a?d("cometPushToast").cometPushToast({icon:k.jsx(c("TetraIcon.react"),{color:"positive",icon:d("fbicon")._(i("485124"),24)}),message:h._("__JHASH__Twor-U8sZs8__JHASH__")},4e3,b):d("cometPushToast").cometPushToast({action:{label:h._("__JHASH__mzjg0e604Yh__JHASH__"),onPress:function(){d("CometRelayEnvironmentFactory").commitLocalUpdateForEachEnvironment(function(a,b,c){c.invalidateStore()})}},icon:k.jsx(c("TetraIcon.react"),{color:"disabled",icon:d("SVGIcon").legacySVGIcon(c("CometIconWirelessSlashFilled.react")),size:24}),message:h._("__JHASH__px_Aor7szAo__JHASH__")},Infinity,b)}function a(){c("NetworkStatus").onChange(m)}g.subscribe=a}),226);
__d("BDSignalBufferData",[],(function(a,b,c,d,e,f){"use strict";a={};b=a;f["default"]=b}),66);
__d("BDSignalWrapper",["BDSignalBufferData","SignalCollectorMap"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.signalFlags=a,this.signalType=b}var b=a.prototype;b.getSignalCollector=function(){return c("SignalCollectorMap").get(this.signalType)};b.getBufferConfig=function(){return c("BDSignalBufferData")[this.signalType]};return a}();g["default"]=a}),98);
__d("SignalValueContext",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.cn=a}var b=a.prototype;b.getSignalValueContextName=function(){return this.cn};return a}();f["default"]=a}),66);
__d("BDSignalCollectorBase",["BDSignalBufferData","SignalValueContext","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.signalType=a}var d=a.prototype;d.executeSignalCollection=function(){throw new Error("Child class responsibility to implement executeSignalCollection")};d.executeAsyncSignalCollection=function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(this.executeSignalCollection());case 2:a=c.sent;return c.abrupt("return",a);case 4:case"end":return c.stop()}},null,this)};a.getSanitizedURI=function(){var a=window.location.href,b=a.indexOf("?");return b<0?a:a.substring(0,b)};d.getContext=function(){return new(c("SignalValueContext"))(a.getSanitizedURI())};d.throwIfNotInitialized=function(){if(!(this.signalType in c("BDSignalBufferData")))throw new Error("Signal is not intialized")};return a}();g["default"]=a}),98);
__d("BDLoggingConstants",[],(function(a,b,c,d,e,f){"use strict";a={ERROR:"error",WARNING:"warning",INFO:"info"};b={KEY_NOT_FOUND:"key_not_found",APPEND_SIGNAL:"bd_append_signal",APPEND_SIGNAL_FAIL:"bd_append_signal_fail",HB_COLLECTED:"append_hb",HB_COLLECTION_FAILED:"hb_collection_failed",BD_EXCEPTION:"bd_exception",SIGNAL_NOT_IMPLEMENTED:"signal_not_implemented",SIGNAL_VALUE_NULL:"signal_value_null",EMPTY_SIGNAL_CONFIG:"empty_signal_config",INVALID_BUFFER_SIZE:"invalid_buffer_size",INVALID_DURATION:"invalid_duration",SIGNAL_FLAGS_MISSING:"signal_flags_missing",DYNAMIC_SIGNAL_COLLECTION_STARTED:"dynamic_signal_collection_started",BIOMETRIC_SIGNAL_COLLECTION_STARTED:"biometric_signal_collection_started",INVALID_GUID:"invalid_guid",INVALID_LENGTH:"invalid_length",GET_LOCAL_STORAGE_ERROR:"get_local_storage_error",WEB_STORAGE:"web_storage",PARSE_CONFIG_ERROR:"parse_config_error",HB_START_FAILURE:"hb_start_failure",HB_ALREADY_RUNNING:"hb_already_running",TRY_RESTARTING_HB:"try_restarting_hb",BANZAI_LOG_ERROR:"banzai_log_error"};c="JS";f.LEVELS=a;f.OPERATIONS=b;f.COMPONENT_NAME=c}),66);
__d("BDOperationTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:BDOperationLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setBdSessionID=function(a){this.$1.bd_session_id=a;return this};c.setComponent=function(a){this.$1.component=a;return this};c.setDurationUs=function(a){this.$1.duration_us=a;return this};c.setExceptionMessage=function(a){this.$1.exception_message=a;return this};c.setExceptionStackTrace=function(a){this.$1.exception_stack_trace=a;return this};c.setExceptionType=function(a){this.$1.exception_type=a;return this};c.setIntValue=function(a){this.$1.int_value=a;return this};c.setLevel=function(a){this.$1.level=a;return this};c.setOperation=function(a){this.$1.operation=a;return this};c.setOperationInfo=function(a){this.$1.operation_info=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setSessionlets=function(a){this.$1.sessionlets=b("GeneratedLoggerUtils").serializeVector(a);return this};return a}();c={bd_session_id:!0,component:!0,duration_us:!0,exception_message:!0,exception_stack_trace:!0,exception_type:!0,int_value:!0,level:!0,operation:!0,operation_info:!0,sessionlets:!0};f["default"]=a}),66);
__d("BDOperationLogHelper",["BDLoggingConstants","BDOperationTypedLogger","Random"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){h(a,d("BDLoggingConstants").LEVELS.INFO,b,c,e)}function b(a,b,c,e){h(a,d("BDLoggingConstants").LEVELS.WARNING,b,c,e)}function e(a,b,c,e){h(a,d("BDLoggingConstants").LEVELS.ERROR,b,c,e)}function h(a,b,e,f,g){f===void 0&&(f={});if(d("Random").coinflip(i(e))){if(f===null)throw new Error("opeartion info null");f.source=a;new(c("BDOperationTypedLogger"))().setLevel(b).setDurationUs(g).setOperation(e).setComponent(d("BDLoggingConstants").COMPONENT_NAME).setOperationInfo(f).log()}}function i(a){var b=d("BDLoggingConstants").OPERATIONS;switch(a){case b.APPEND_SIGNAL:case b.HB_COLLECTED:case b.GET_LOCAL_STORAGE_ERROR:case b.WEB_STORAGE:case b.SIGNAL_NOT_IMPLEMENTED:case b.BIOMETRIC_SIGNAL_COLLECTION_STARTED:return 1e3;default:return 1}}g.logInfo=a;g.logWarning=b;g.logError=e;g.log=h;g.getFlipSamplingByOperation=i}),98);
__d("SignalErrorValueTypeDef",[],(function(a,b,c,d,e,f){"use strict";var g="ec",h="en",i="es",j=500;a=function(){function a(a,b,c){this.$1=a,this.$2=b,c!=null&&(this.$3=c.substr(0,j))}var b=a.prototype;b.getErrorCode=function(){return this.$1};b.getErrorName=function(){return this.$2};b.getErrorDetails=function(){return this.$3};b.isEqual=function(a){return this.$1===a.getErrorCode()&&this.$3===a.getErrorDetails()&&this.$2===a.getErrorName()};b.toJSON=function(){var a={};a[g]=this.$1;switch(this.$1){case 0:a[h]=this.$2;a[i]=this.$3;break}return a};return a}();f.SignalErrorValueTypeDef=a}),66);
__d("SignalValueTypeDef",["BDLoggingConstants","BDOperationLogHelper","SignalErrorValueTypeDef"],(function(a,b,c,d,e,f,g){"use strict";var h="SignalValueTypeDef",i="t",j="ctx",k="v",l="e",m={NUMBER:"NUMBER",STRING:"STRING",BOOLEAN:"BOOLEAN",CUSTOM_OBJECT:"CUSTOM_OBJECT",INT_ARRAY:"INT_ARRAY",TOUCH:"TOUCH",MAP:"MAP",LIST:"LIST",SENSOR:"SENSOR",ERROR:"ERROR"};a=function(){function a(a,b,c,d,e){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e!=null?e:0}var b=a.prototype;b.getTimeStampMS=function(){return this.$1};b.getSignalContext=function(){return this.$2};b.getSignalValue=function(){return this.$3};b.getSignalValueType=function(){return this.$4};b.isEqual=function(a,b){if(a==null){d("BDOperationLogHelper").logWarning(h,d("BDLoggingConstants").OPERATIONS.SIGNAL_VALUE_NULL);return!1}if(this.getSignalValueType()!==a.getSignalValueType())return!1;if(this.getSignalValueType()===m.ERROR&&a.getSignalValueType()===m.ERROR)return this.equalValue(a);var c=!1;b.has(128)&&(c=this.equalValue(a));b.has(256)&&(c=c&&this.getSignalContext()!=null&&a.getSignalContext()!=null&&this.getSignalContext().getSignalValueContextName()===a.getSignalContext().getSignalValueContextName());b.has(512)&&(c=c&&Math.abs(this.getTimeStampMS()-a.getTimeStampMS())<=this.$5);return c};b.equalValue=function(a){if(this.isPrimitiveType())return this.getSignalValue()===a.getSignalValue();throw new Error("Must implement in the subclasses")};b.toJSON=function(a){var b={};a&&(b[i]=this.$1/1e3,this.$2!=null&&(b[j]=this.$2));this.$3==null?b[l]=new(d("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(2):this.addValueOrErrorToJSON(b);return b};b.addValueOrErrorToJSON=function(a){if(this.isPrimitiveType())a[k]=this.$3;else throw new Error("Must implement in the subclasses")};b.isPrimitiveType=function(){switch(typeof this.$3){case"number":case"boolean":case"string":return!0;default:return!1}};return a}();g.BD_VALUE=k;g.BD_ERROR=l;g.VALUE_TYPES=m;g.SignalValueTypeDef=a}),98);
__d("ErrorSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e){return a.call(this,b,c,e,d("SignalValueTypeDef").VALUE_TYPES.ERROR)||this}var c=b.prototype;c.equalValue=function(a){return this.getSignalValue().isEqual(a.getSignalValue())};c.addValueOrErrorToJSON=function(a){a[d("SignalValueTypeDef").BD_ERROR]=this.getSignalValue().toJSON()};return b}(d("SignalValueTypeDef").SignalValueTypeDef);g["default"]=a}),98);
__d("NumberSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e){return a.call(this,b,c,e,d("SignalValueTypeDef").VALUE_TYPES.NUMBER)||this}return b}(d("SignalValueTypeDef").SignalValueTypeDef);g["default"]=a}),98);
__d("BDConnectionRTTSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","NumberSignalValueType","SignalErrorValueTypeDef"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var e=a.prototype;e.executeSignalCollection=function(){if(navigator.connection!=null&&navigator.connection.rtt!=null){var a=navigator.connection.rtt;a=new(c("NumberSignalValueType"))(Date.now(),this.getContext(),a)}else a=new(c("ErrorSignalValueType"))(Date.now(),this.getContext(),new(d("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"navigator.connection.rtt not supported"));return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30004,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("CustomObjectSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e){return a.call(this,b,c,e,d("SignalValueTypeDef").VALUE_TYPES.CUSTOM_OBJECT)||this}var c=b.prototype;c.equalValue=function(a){return this.getSignalValue().isEqual(a.getSignalValue())};c.addValueOrErrorToJSON=function(a){a[d("SignalValueTypeDef").BD_VALUE]=this.getSignalValue().toJSON()};return b}(d("SignalValueTypeDef").SignalValueTypeDef);g["default"]=a}),98);
__d("HeartbeatObject",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.isAppForeground=!0}var b=a.prototype;b.toJSON=function(){return{f:this.isAppForeground}};b.isEqual=function(a){return!1};return a}();f["default"]=a}),66);
__d("BDHeartbeatSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","HeartbeatObject"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(c("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(c("HeartbeatObject"))());return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:38e3,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDBiometricSignalCollectorBase",["BDSignalCollectorBase","err"],(function(a,b,c,d,e,f,g){"use strict";a="biometric_signal_collected";b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.listenForSignals=function(){throw c("err")("Child class responsibility to implement listenForSignals")};d.executeSignalCollection=function(){throw c("err")("executeAsyncSignalCollection and executeSignalCollection should not be called on biometric signals")};return b}(c("BDSignalCollectorBase"));g.BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME=a;g.BDBiometricSignalCollectorBase=b}),98);
__d("KeyDownUpObject",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.action=null,this.key_code=null,this.action=a,this.key_code=b}var b=a.prototype;b.toJSON=function(){return{action:this.action,key_code:this.key_code}};b.isEqual=function(b){return b instanceof a?this.action===b.action&&this.key_code===b.key_code:!1};return a}();f["default"]=a}),66);
__d("BDKeyDownUpSignalCollector",["BDBiometricSignalCollectorBase","CustomObjectSignalValueType","KeyDownUpObject","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var e=a.prototype;e.listenForSignals=function(){var a=this;c("gkx")("21049")&&(document.addEventListener("keydown",function(b){return a.collectSignals(2)}),document.addEventListener("keyup",function(b){return a.collectSignals(1)}))};e.collectSignals=function(a){a=new(c("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(c("KeyDownUpObject"))(a,0));a={signalId:this.signalType,data:{valueOrError:a}};window.dispatchEvent(new CustomEvent(d("BDBiometricSignalCollectorBase").BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME,{detail:a}))};return a}(d("BDBiometricSignalCollectorBase").BDBiometricSignalCollectorBase),i=null,j={signalType:30100,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("StringArrayObject",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.strings=[],this.strings=a}var b=a.prototype;b.toJSON=function(){return this.strings};b.isEqual=function(b){if(!(b instanceof a))return!1;if(b.strings===this.strings)return!0;if(b.strings.length!==this.strings.length)return!1;for(var c=0;c<this.strings.length;c++)if(this.strings[c]!==b.strings[c])return!1;return!0};return a}();f["default"]=a}),66);
__d("BDLanguagesSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","StringArrayObject"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=[].concat(navigator.languages);a=new(c("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(c("StringArrayObject"))(a));return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30003,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDMimeTypeCountSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=navigator.mimeTypes?navigator.mimeTypes.length:-1;a=new(c("NumberSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30002,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BooleanSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e){return a.call(this,b,c,e,d("SignalValueTypeDef").VALUE_TYPES.BOOLEAN)||this}return b}(d("SignalValueTypeDef").SignalValueTypeDef);g["default"]=a}),98);
__d("BDTouchOrMouseSignalCollectorBase",["BDBiometricSignalCollectorBase","BDLoggingConstants","BDOperationLogHelper","BooleanSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h="BDTouchOrMouseSignalCollectorBase";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){var e;e=a.call(this,b)||this;e.eventsToSubscribe=[];e.pauseTimeout=60*60*1e3;e.eventsToSubscribe=c;e.pauseTimeout=d;e.handler=function(a){return e.collectSignals(a)};return e}var e=b.prototype;e.listenForSignals=function(){this.collectSignals(),this.addListeners()};e.addListeners=function(){var a=this;this.eventsToSubscribe.forEach(function(b){try{document.addEventListener(b,a.handler)}catch(a){d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.BD_EXCEPTION,{e:a})}})};e.pauseListeners=function(){var a=this;this.eventsToSubscribe.forEach(function(b){document.removeEventListener(b,a.handler)});window.setTimeout(function(){return a.addListeners()},this.pauseTimeout)};e.collectSignals=function(a){a=a!=null;a&&this.pauseListeners();a=new(c("BooleanSignalValueType"))(Date.now(),this.getContext(),a);a={signalId:this.signalType,data:{valueOrError:a}};window.dispatchEvent(new CustomEvent(d("BDBiometricSignalCollectorBase").BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME,{detail:a}))};return b}(d("BDBiometricSignalCollectorBase").BDBiometricSignalCollectorBase);g["default"]=a}),98);
__d("BDMousePresenceSignalCollector",["BDTouchOrMouseSignalCollectorBase"],(function(a,b,c,d,e,f,g){"use strict";var h=60*60*1e3,i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,k.signalType,["mousedown","mousemove"],h)||this}return a}(c("BDTouchOrMouseSignalCollectorBase")),j=null,k={signalType:30106,get:function(){j==null&&(j=new i());return j}};a=k;g["default"]=a}),98);
__d("StringSignalValueType",["SignalValueTypeDef"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e){return a.call(this,b,c,e,d("SignalValueTypeDef").VALUE_TYPES.STRING)||this}return b}(d("SignalValueTypeDef").SignalValueTypeDef);g["default"]=a}),98);
__d("BDNavigatorAppVersionSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=navigator.appVersion;a=new(c("StringSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30013,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDNavigatorHardwareConcurrencySignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a;a=new(c("NumberSignalValueType"))(Date.now(),this.getContext(),(a=navigator.hardwareConcurrency)!=null?a:0);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30018,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDNavigatorMaxTouchPointSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(c("NumberSignalValueType"))(Date.now(),this.getContext(),navigator.maxTouchPoints);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30093,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDNavigatorNotificationPermissionSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringSignalValueType","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=function(e){babelHelpers.inheritsLoose(a,e);function a(){return e.call(this,j.signalType)||this}var f=a.prototype;f.executeAsyncSignalCollection=function(){var a,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.prev=0;if(!navigator.permissions){f.next=8;break}f.next=4;return b("regeneratorRuntime").awrap(navigator.permissions.query({name:"notifications"}));case 4:e=f.sent;a=new(c("StringSignalValueType"))(Date.now(),this.getContext(),e.state);f.next=9;break;case 8:a=new(c("ErrorSignalValueType"))(Date.now(),this.getContext(),new(d("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"navigator.permissions not supported"));case 9:f.next=14;break;case 11:f.prev=11,f.t0=f["catch"](0),a=new(c("ErrorSignalValueType"))(Date.now(),this.getContext(),new(d("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"notifications cannot be queried from navigator.permissions"));case 14:return f.abrupt("return",{valueOrError:a});case 15:case"end":return f.stop()}},null,this,[[0,11]])};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30008,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDNavigatorPlatformSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(c("StringSignalValueType"))(Date.now(),this.getContext(),navigator.platform);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30015,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDNavigatorPluginsFileExtensionsSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringArrayObject"],(function(a,b,c,d,e,f,g){"use strict";var h=10,i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,k.signalType)||this}var e=a.prototype;e.executeSignalCollection=function(){var a=null;try{var b=navigator.plugins?navigator.plugins.length:0,e=new Set();for(var f=0;f<b;f++){var g=navigator.plugins[f].filename;if(!g)continue;var i=g.indexOf(".");if(i==-1||i==g.length-1)continue;e.add(g.substr(i+1));if(e.size>=h)break}e.size&&(a=new(c("StringArrayObject"))(Array.from(e)))}catch(b){a=new(c("ErrorSignalValueType"))(Date.now(),this.getContext(),new(d("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"navigator.plugins is not defined"))}return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),j=null,k={signalType:30019,get:function(){j==null&&(j=new i());return j}};a=k;g["default"]=a}),98);
__d("BDNavigatorUserAgentSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(c("StringSignalValueType"))(Date.now(),this.getContext(),navigator.userAgent);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30094,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDNavigatorVendorSignalCollector",["BDSignalCollectorBase","StringSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=navigator.vendor;a=new(c("StringSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30012,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDNotificationPermissionSignalCollector",["BDSignalCollectorBase","ErrorSignalValueType","SignalErrorValueTypeDef","StringSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var e=a.prototype;e.executeSignalCollection=function(){var a;window.Notification?a=new(c("StringSignalValueType"))(Date.now(),this.getContext(),Notification.permission):a=new(c("ErrorSignalValueType"))(Date.now(),this.getContext(),new(d("SignalErrorValueTypeDef").SignalErrorValueTypeDef)(3,"Notification not supported"));return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30007,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDPluginCountSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=navigator.plugins?navigator.plugins.length:-1;a=new(c("NumberSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30001,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDTimezoneOffsetSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a;a=new(c("NumberSignalValueType"))(Date.now(),this.getContext(),(a=new Date().getTimezoneOffset())!=null?a:999);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30040,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDTouchPresenceSignalCollector",["BDTouchOrMouseSignalCollectorBase"],(function(a,b,c,d,e,f,g){"use strict";var h=60*60*1e3,i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,k.signalType,["touchstart","touchcancel"],h)||this}return a}(c("BDTouchOrMouseSignalCollectorBase")),j=null,k={signalType:30107,get:function(){j==null&&(j=new i());return j}};a=k;g["default"]=a}),98);
__d("BDWebdriverSignalCollector",["BDSignalCollectorBase","BooleanSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=!!navigator.webdriver;a=new(c("BooleanSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:3e4,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDWebglSupportSignalCollector",["BDSignalCollectorBase","BooleanSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=document.createElement("canvas"),b=null;try{b=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(a){}a=Boolean(b);b=new(c("BooleanSignalValueType"))(Date.now(),this.getContext(),a);return{valueOrError:b}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30022,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDWindowHistoryLengthSignalCollector",["BDSignalCollectorBase","NumberSignalValueType"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(c("NumberSignalValueType"))(Date.now(),this.getContext(),window.history?window.history.length:0);return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30095,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("DimensionObject",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.width=null,this.height=null,this.width=a,this.height=b}var b=a.prototype;b.toJSON=function(){return{w:this.width,h:this.height}};b.isEqual=function(b){if(b instanceof a)return this.width===b.width&&this.height===b.height;else return!1};return a}();f["default"]=a}),66);
__d("BDWindowOuterDimensionSignalCollector",["BDSignalCollectorBase","CustomObjectSignalValueType","DimensionObject"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=window.innerHeight,b=window.innerWidth;b=new(c("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(c("DimensionObject"))(b,a));return{valueOrError:b}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:30005,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("SignalCollectorMap",["BDConnectionRTTSignalCollector","BDHeartbeatSignalCollector","BDHeartbeatV2SignalCollector","BDKeyDownUpSignalCollector","BDLanguagesSignalCollector","BDMimeTypeCountSignalCollector","BDMousePresenceSignalCollector","BDNavigatorAppVersionSignalCollector","BDNavigatorHardwareConcurrencySignalCollector","BDNavigatorMaxTouchPointSignalCollector","BDNavigatorNotificationPermissionSignalCollector","BDNavigatorPlatformSignalCollector","BDNavigatorPluginsFileExtensionsSignalCollector","BDNavigatorUserAgentSignalCollector","BDNavigatorVendorSignalCollector","BDNotificationPermissionSignalCollector","BDPluginCountSignalCollector","BDTimezoneOffsetSignalCollector","BDTouchPresenceSignalCollector","BDWebdriverSignalCollector","BDWebglSupportSignalCollector","BDWindowHistoryLengthSignalCollector","BDWindowOuterDimensionSignalCollector"],(function(a,b,c,d,e,f,g){"use strict";a={get:function(a){switch(a){case 3e4:return c("BDWebdriverSignalCollector").get();case 30001:return c("BDPluginCountSignalCollector").get();case 30002:return c("BDMimeTypeCountSignalCollector").get();case 30003:return c("BDLanguagesSignalCollector").get();case 30004:return c("BDConnectionRTTSignalCollector").get();case 30005:return c("BDWindowOuterDimensionSignalCollector").get();case 30007:return c("BDNotificationPermissionSignalCollector").get();case 30008:return c("BDNavigatorNotificationPermissionSignalCollector").get();case 30012:return c("BDNavigatorVendorSignalCollector").get();case 30013:return c("BDNavigatorAppVersionSignalCollector").get();case 30015:return c("BDNavigatorPlatformSignalCollector").get();case 30018:return c("BDNavigatorHardwareConcurrencySignalCollector").get();case 30019:return c("BDNavigatorPluginsFileExtensionsSignalCollector").get();case 30022:return c("BDWebglSupportSignalCollector").get();case 30040:return c("BDTimezoneOffsetSignalCollector").get();case 30093:return c("BDNavigatorMaxTouchPointSignalCollector").get();case 30094:return c("BDNavigatorUserAgentSignalCollector").get();case 30095:return c("BDWindowHistoryLengthSignalCollector").get();case 30100:return c("BDKeyDownUpSignalCollector").get();case 30106:return c("BDMousePresenceSignalCollector").get();case 30107:return c("BDTouchPresenceSignalCollector").get();case 38e3:return c("BDHeartbeatSignalCollector").get();case 38001:return c("BDHeartbeatV2SignalCollector").get()}}};b=a;g["default"]=b}),98);
__d("HeartbeatV2Object",["HeartbeatObject"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.id="";c.id=b;return c}var c=b.prototype;c.toJSON=function(){return{f:this.isAppForeground,id:this.id}};return b}(c("HeartbeatObject"));g["default"]=a}),98);
__d("BDHeartbeatV2SignalCollector",["BDClientConfig","BDSignalCollectorBase","CustomObjectSignalValueType","HeartbeatV2Object"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,j.signalType)||this}var d=a.prototype;d.executeSignalCollection=function(){var a=new(c("CustomObjectSignalValueType"))(Date.now(),this.getContext(),new(c("HeartbeatV2Object"))(c("BDClientConfig").get().getHeartbeatVersion()));return{valueOrError:a}};return a}(c("BDSignalCollectorBase")),i=null,j={signalType:38001,get:function(){i==null&&(i=new h());return i}};a=j;g["default"]=a}),98);
__d("BDClientConfig",["BDLoggingConstants","BDOperationLogHelper","BDSignalWrapper"],(function(a,b,c,d,e,f,g){"use strict";var h="BDClientConfig",i=function(){function a(){this.staticSignalBufferSize=1,this.dynamicSignalBufferSize=1,this.biometricSignalBufferSize=1,this.staticSignals=[],this.dynamicSignals=[],this.biometricSignals=[],this.biometricSignalsMap=new Map(),this.heartbeatSignal=new(c("BDSignalWrapper"))([],38001),this.bufferSizeBySignalIdMap={},this.periodicCollectionIntervalMs=Number.MAX_SAFE_INTEGER,this.signalConfigGenerationTimeStampMs=0,this.suspiciousTiersFlushDurationMs=Number.MAX_SAFE_INTEGER,this.allTiersFlushDurationMs=Number.MAX_SAFE_INTEGER,this.heartbeatIntervalMs=-1,this.parsingDone=!1,this.sid=-1,this.hbVersion="",this.bufferSizeBySignalIdMap[38001]=1}var b=a.prototype;b.setStaticSignalBufferSize=function(a){a>0?this.staticSignalBufferSize=a:d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.INVALID_BUFFER_SIZE,{size:a.toString(),type:"s"});return this};b.getStaticSignalBufferSize=function(){return this.staticSignalBufferSize};b.setDynamicSignalBufferSize=function(a){a>1?this.dynamicSignalBufferSize=a:d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.INVALID_BUFFER_SIZE,{size:a.toString(),type:"d"});return this};b.getDynamicSignalBufferSize=function(){return this.dynamicSignalBufferSize};b.setBiometricSignalBufferSize=function(a){a>1?this.biometricSignalBufferSize=a:d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.INVALID_BUFFER_SIZE,{size:a.toString(),type:"b"});return this};b.setSID=function(a){this.sid=a;return this};b.setHeartbeatVersion=function(a){this.hbVersion=a;return this};b.getHeartbeatVersion=function(){return this.hbVersion};b.getBiometricSignalBufferSize=function(){return this.biometricSignalBufferSize};b.setConfigGenerationTimeStamp=function(a){this.signalConfigGenerationTimeStampMs=a;return this};b.getConfigGenerationTimeStamp=function(){return this.signalConfigGenerationTimeStampMs};b.setHeartbeatIntervalMinutes=function(a){this.heartbeatIntervalMs=a*60*1e3;return this};b.getHeartbeatIntervalMs=function(){return this.heartbeatIntervalMs};b.setSuspiciousTiersFlushDurationMinutes=function(a){a>0?this.suspiciousTiersFlushDurationMs=a*60*1e3:d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.INVALID_DURATION,{size:a.toString(),type:"fds"});return this};b.getSuspiciousTiersFlushDurationMs=function(){return this.suspiciousTiersFlushDurationMs};b.setAllTiersFlushDurationMinutes=function(a){a>0?this.allTiersFlushDurationMs=a*60*1e3:d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.INVALID_DURATION,{size:a.toString(),type:"fda"});return this};b.getAllTiersFlushDurationMs=function(){return this.allTiersFlushDurationMs};b.addMultipleSignalsToClientConfig=function(a){var b=this;a.forEach(function(a){return b.addSignalToClientConfig(a)});return this};b.addSignalToClientConfig=function(a){var b=a.getSignalFlags(),d=a.getSignalId();if(d===38e3)return this;var e=new(c("BDSignalWrapper"))(b,d);if(d===38001){this.heartbeatSignal=e;return this}!b.includes(2)?this.staticSignals.push(e):b.includes(4)?this.biometricSignals.push(e):this.dynamicSignals.push(e);a.getBufferSize()>0&&(this.bufferSizeBySignalIdMap[a.getSignalId()]=a.getBufferSize());return this};b.setPeriodicCollectionIntervalSeconds=function(a){a>0?this.periodicCollectionIntervalMs=a*1e3:d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.INVALID_DURATION,{size:a.toString(),type:"pi"});return this};b.getPeriodicCollectionIntervalMs=function(){return this.periodicCollectionIntervalMs};b.getDynamicSignals=function(){return this.dynamicSignals};b.getStaticSignals=function(){return this.staticSignals};b.getBiometricSignals=function(){return this.biometricSignals};b.getBiometricSignalsMap=function(){this.biometricSignalsMap.size===0&&this.biometricSignals.length>0&&(this.biometricSignalsMap=this.biometricSignals.reduce(function(a,b){return a.set(b.signalType,b)},new Map()));return this.biometricSignalsMap};b.getHeartbeatSignal=function(){return this.heartbeatSignal};b.getBufferSizeBySignalId=function(a){return this.bufferSizeBySignalIdMap[a]};b.setParsingDone=function(a){this.parsingDone=a};b.isParsingDone=function(){return this.parsingDone};return a}(),j=null;a={get:function(){j==null&&(j=new i());return j}};b=a;g["default"]=b}),98);
__d("BDCollectionTypeEnum",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({STATIC:0,DYNAMIC:1,BIOMETRIC:2});f["default"]=a}),66);
__d("BotDetection_SignalFlags",[],(function(a,b,c,d,e,f){a=Object.freeze({ACTIVE:1,DYNAMIC:2,BIOMETRIC:4,DEPRECATED:8,WEB:16,IOS_NATIVE:32,ANDROID_NATIVE:64,EQUAL_BY_VALUE:128,EQUAL_BY_CONTEXT:256,EQUAL_BY_TIMESTAMP:512,SUSPICIOUS_TIER:1024,PARANOID_TIER:2048,RANDOM_SAMPLE_TIER_DEPRECATED:4096,BENIGN_TIER:262144,EMPLOYEES_TIER:524288,BUNDLE:8192,ONSITE:16384,OFFSITE:32768,OFFSITE_SENSITIVE:65536,SENSITIVE:131072});f["default"]=a}),66);
__d("BDServerSignalConfig",["BDLoggingConstants","BDOperationLogHelper","BotDetection_SignalFlags"],(function(a,b,c,d,e,f,g){"use strict";var h="BDServerSignalConfig";a=function(){function a(a,b,c){this.parsedSignalFlags=[],this.signalId=a,this.signalFlags=b,this.bufferSize=c}var b=a.prototype;b.getSignalId=function(){return this.signalId};b.getSignalFlags=function(){var a=this;if(this.parsedSignalFlags.length===0){var b=Object.keys(c("BotDetection_SignalFlags"));b.forEach(function(b){(c("BotDetection_SignalFlags")[b]&a.signalFlags)===c("BotDetection_SignalFlags")[b]&&a.parsedSignalFlags.push(c("BotDetection_SignalFlags")[b])})}this.parsedSignalFlags.length===0&&d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.SIGNAL_FLAGS_MISSING,{id:this.signalId.toString(),flags:this.signalFlags.toString()});return this.parsedSignalFlags};b.getBufferSize=function(){return this.bufferSize!=null?this.bufferSize:0};return a}();g["default"]=a}),98);
__d("BDServerConfig",["BDClientConfig","BDLoggingConstants","BDOperationLogHelper","BDServerSignalConfig"],(function(a,b,c,d,e,f,g){"use strict";var h="BDServerConfig";function a(a){var b=[];try{var e=JSON.parse(a.sc),f=new Map(e.c);f.forEach(function(a,d){return b.push(new(c("BDServerSignalConfig"))(d,a))});if(f.size===0){d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.EMPTY_SIGNAL_CONFIG);return}f=c("BDClientConfig").get();f.setPeriodicCollectionIntervalSeconds(a.i).addMultipleSignalsToClientConfig(b).setConfigGenerationTimeStamp(e.t).setAllTiersFlushDurationMinutes(a.fda).setSuspiciousTiersFlushDurationMinutes(a.fds).setHeartbeatIntervalMinutes(a.hbi).setStaticSignalBufferSize(a.sbs).setDynamicSignalBufferSize(a.dbs).setBiometricSignalBufferSize(a.bbs).setSID(a.sid).setHeartbeatVersion(a.hbv).setParsingDone(!0)}catch(a){d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.PARSE_CONFIG_ERROR,{e:a})}}g.parseConfig=a}),98);
__d("BDSignalBuffer",["BDClientConfig","BDCollectionTypeEnum","BDLoggingConstants","BDOperationLogHelper","BDSignalBufferData"],(function(a,b,c,d,e,f,g){"use strict";var h="BDSignalBuffer";function a(a,b,d){if(a in c("BDSignalBufferData"))return;var e=1;b!==void 0&&(e=b);c("BDSignalBufferData")[a]={values:[],max_buffer_size:e,signal_flags:(b=d)!=null?b:[]}}function i(a){if(a in c("BDSignalBufferData"))c("BDSignalBufferData")[a].values=[];else throw new Error("Tried to clear signal buffer that was not intialized:")}function b(a,b){if(a in c("BDSignalBufferData")){var e=c("BDSignalBufferData")[a],f=e.max_buffer_size;e.values.length>=f&&e.values.shift();e.values.push(b);d("BDOperationLogHelper").logInfo(h,d("BDLoggingConstants").OPERATIONS.APPEND_SIGNAL,{id:a.toString()})}else{d("BDOperationLogHelper").logError(h,d("BDLoggingConstants").OPERATIONS.APPEND_SIGNAL_FAIL,{id:a.toString()});throw new Error("Tried to append signal that was not intialized:")}}function e(){var a=c("BDClientConfig").get();a=a.getBiometricSignals();a.forEach(function(a){a.signalType in c("BDSignalBufferData")&&i(a.signalType)})}function f(a){var b;a=c("BDSignalBufferData")[a];b=a==null?void 0:(b=a.values)==null?void 0:b.length;return b!=null&&b>0?a.values[b-1]:{valueOrError:void 0}}function j(a){return c("BDSignalBufferData")[a].values}function k(a){var b={};for(var d=0;d<a.length;d++){var e=a[d];e in c("BDSignalBufferData")&&(b[e]=j(e).map(function(a){return a.valueOrError}))}return b}function l(a){a=m(a);return JSON.stringify(k(a))}function m(a){var b=c("BDClientConfig").get(),d=[];a.forEach(function(a){switch(a){case c("BDCollectionTypeEnum").STATIC:d=[].concat(d,b.getStaticSignals());break;case c("BDCollectionTypeEnum").DYNAMIC:d=[].concat(d,b.getDynamicSignals());break;case c("BDCollectionTypeEnum").BIOMETRIC:d=[].concat(d,b.getBiometricSignals());break}});return d.map(function(a){return a.signalType})}g.initialize=a;g.clearBuffer=i;g.appendSignal=b;g.clearBiometricSignals=e;g.getLastSignalFormatBySignalId=f;g.retrieveSignal=j;g.retrieveSignals=k;g.getSignalsAsJSONString=l;g._getSignalIdsByCollectionType=m}),98);
__d("BDUtils",[],(function(a,b,c,d,e,f){"use strict";function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0;a=a=="x"?b:b&3|8;return a.toString(16)})}f.uuid=a}),66);
__d("BdPdcSignalsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743095");b=d("FalcoLoggerInternal").create("bd_pdc_signals",a);e=b;g["default"]=e}),98);
__d("SignalCollectionManager",["BDBiometricSignalCollectorBase","BDClientConfig","BDLoggingConstants","BDOperationLogHelper","BDSignalBuffer","Promise","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i="SignalCollectionManager",j=function(){function a(){var a=this;this.$1=!1;this.$6=function(b){if(b instanceof CustomEvent&&b.detail!=null&&b.detail.data!=null){var d=c("BDClientConfig").get().getBiometricSignalsMap().get(b.detail.signalId);d!=null&&a.$4(b.detail.data,d)}}}var e=a.prototype;e.collectSignals=function(a){var c=this,d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:d=[];a.forEach(function(a){a.signalFlags.includes(4)?c.$2(a):d.push(c.$3(a))});e.next=4;return b("regeneratorRuntime").awrap((h||(h=b("Promise"))).all(d));case 4:case"end":return e.stop()}},null,this)};e.isEqualToLastCollectedSignal=function(a,b){var c=d("BDSignalBuffer").getLastSignalFormatBySignalId(b.signalType);return c.valueOrError==void 0?!1:a.isEqual(c.valueOrError,new Set(b.signalFlags))};e.getCircularBufferSize=function(a){var b=c("BDClientConfig").get(),d=b.getBufferSizeBySignalId(a.signalType);if(d!=null&&b.getBufferSizeBySignalId(a.signalType)>0)return d;if(!a.signalFlags.includes(2))return b.getStaticSignalBufferSize();else if(a.signalFlags.includes(4))return b.getBiometricSignalBufferSize();else return b.getDynamicSignalBufferSize()};e.$3=function(a){var c,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:c=a.getSignalCollector();if(!(c!=null)){f.next=12;break}f.prev=2;f.next=5;return b("regeneratorRuntime").awrap(c.executeAsyncSignalCollection());case 5:e=f.sent;this.$4(e,a);f.next=12;break;case 9:f.prev=9,f.t0=f["catch"](2),d("BDOperationLogHelper").logError(i,d("BDLoggingConstants").OPERATIONS.BD_EXCEPTION,{error:f.t0});case 12:case"end":return f.stop()}},null,this,[[2,9]])};e.$2=function(a){this.$5();a=a.getSignalCollector();a!=null&&a instanceof d("BDBiometricSignalCollectorBase").BDBiometricSignalCollectorBase&&a.listenForSignals()};e.$5=function(){if(this.$1)return;window.addEventListener(d("BDBiometricSignalCollectorBase").BIOMETRIC_SIGNAL_COLLECTED_EVENT_NAME,this.$6);this.$1=!0};e.$4=function(a,b){b.getBufferConfig()==null&&d("BDSignalBuffer").initialize(b.signalType,this.getCircularBufferSize(b),b.signalFlags),a.valueOrError&&!this.isEqualToLastCollectedSignal(a.valueOrError,b)&&d("BDSignalBuffer").appendSignal(b.signalType,a)};return a}(),k=null;a={get:function(){k==null&&(k=new j());return k}};e=a;g["default"]=e}),98);
__d("BDClientSignalCollectionTrigger",["BDClientConfig","BDCollectionTypeEnum","BDLoggingConstants","BDOperationLogHelper","BDServerConfig","BDSignalBuffer","BDUtils","BdPdcSignalsFalcoEvent","Promise","SignalCollectionManager","WebStorage","javascript-blowfish","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j="BDClientSignalCollectionTrigger",k="signal_flush_timestamp",l=!1,m=!1,n=!1,o=!1,p=0,q=0,r=0,s=30,t=5,u,v,w=d("BDUtils").uuid(),x=c("BDClientConfig").get(),y=Object.freeze({NONE:0,VITAL:1,CRITICAL:2}),z={startSignalCollection:function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:x.setSID(a.sid);if(l){c.next=15;break}l=!0;d("BDServerConfig").parseConfig(a);if(x.isParsingDone()){c.next=8;break}d("BDOperationLogHelper").logError(j,d("BDLoggingConstants").OPERATIONS.PARSE_CONFIG_ERROR,{config:JSON.stringify(a)});l=!1;return c.abrupt("return");case 8:a!=null&&(q=a.hbcbc&&a.hbcbc>0?a.hbcbc:q,r=a.hbvbc&&a.hbvbc>0?a.hbvbc:r,s=a.hbbi&&a.hbbi>0?a.hbbi:s);z.startHeartbeatDelayed();v=new(i||(i=b("Promise")))(function(a,b){try{x.getDynamicSignals().length>0&&(z.collectDynamicSignals(),d("BDOperationLogHelper").logInfo(j,d("BDLoggingConstants").OPERATIONS.DYNAMIC_SIGNAL_COLLECTION_STARTED,{ts:Date.now().toString()})),x.getBiometricSignals().length>0&&(z.collectBiometricSignals(),d("BDOperationLogHelper").logInfo(j,d("BDLoggingConstants").OPERATIONS.BIOMETRIC_SIGNAL_COLLECTION_STARTED,{ts:Date.now().toString()})),a()}catch(a){b(a)}});c.next=13;return b("regeneratorRuntime").awrap(v);case 13:c.next=15;return b("regeneratorRuntime").awrap(z.startSignalPosting());case 15:l&&!n&&!o&&t>0&&(t-=1,d("BDOperationLogHelper").logWarning(j,d("BDLoggingConstants").OPERATIONS.TRY_RESTARTING_HB),z.startHeartbeatDelayed());case 16:case"end":return c.stop()}},null,this)},retrieveSignals:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(v);case 2:a.next=4;return b("regeneratorRuntime").awrap(z.postSignals([c("BDCollectionTypeEnum").DYNAMIC,c("BDCollectionTypeEnum").BIOMETRIC,c("BDCollectionTypeEnum").STATIC]));case 4:case"end":return a.stop()}},null,this)},postSignals:function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(z.collectStaticSignals());case 2:z._postSignalsHelper(d("BDSignalBuffer").getSignalsAsJSONString(a),y.NONE)&&z.setTimestampInStorage(Date.now(),k);case 3:case"end":return c.stop()}},null,this)},_postSignalsHelper:function(a,b){if(a.length<=2)return!1;var e=x.getConfigGenerationTimeStamp(),f=z.encryptDataUsingAsid(w,a);a=function(){return{asid:w,ct:e,sjd:f,sid:x.sid}};var g=!1;try{b===y.CRITICAL?c("BdPdcSignalsFalcoEvent").logCritical(a):b===y.VITAL?c("BdPdcSignalsFalcoEvent").logImmediately(a):c("BdPdcSignalsFalcoEvent").log(a),g=!0}catch(a){d("BDOperationLogHelper").logError(j,d("BDLoggingConstants").OPERATIONS.BANZAI_LOG_ERROR,a),g=!1}finally{return g}},getInitialVector:function(a){if(a.length!==16){d("BDOperationLogHelper").logError(j,d("BDLoggingConstants").OPERATIONS.INVALID_LENGTH);return""}var b="";for(var c=0;c<8;c++)b+=String.fromCharCode(a.charCodeAt(c)^a.charCodeAt(8+c));return b},encryptDataUsingAsid:function(a,b){if(a.length!==36){d("BDOperationLogHelper").logError(j,d("BDLoggingConstants").OPERATIONS.INVALID_GUID);return b}a=a.slice(19,23)+a.slice(24,36);var e=z.getInitialVector(a);a=new(c("javascript-blowfish"))(a,"cbc");return a.base64Encode(a.encrypt(b,e))},startSignalPosting:function(){var a,c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:a=z.getTimestampInStorage(k);c=Date.now()-a;if(!(c>=x.getAllTiersFlushDurationMs())){d.next=7;break}d.next=5;return b("regeneratorRuntime").awrap(z.postSignalsIntermittently());case 5:d.next=8;break;case 7:window.setTimeout(function(){z.postSignalsIntermittently()},x.getAllTiersFlushDurationMs()-c);case 8:case"end":return d.stop()}},null,this)},postSignalsIntermittently:function(){z.postSignals([c("BDCollectionTypeEnum").STATIC]),window.setInterval(function(){z.postSignals([c("BDCollectionTypeEnum").STATIC,c("BDCollectionTypeEnum").DYNAMIC,c("BDCollectionTypeEnum").BIOMETRIC])},x.getAllTiersFlushDurationMs())},setTimestampInStorage:function(a,b){var e=(h||(h=c("WebStorage"))).getLocalStorage();if(!e){d("BDOperationLogHelper").logWarning(j,d("BDLoggingConstants").OPERATIONS.GET_LOCAL_STORAGE_ERROR);return}e=h.setItemGuarded(e,b,a.toString());e!=null&&d("BDOperationLogHelper").logWarning(j,d("BDLoggingConstants").OPERATIONS.WEB_STORAGE,{error:e.message})},getTimestampInStorage:function(a){var b=(h||(h=c("WebStorage"))).getLocalStorage();if(!b){d("BDOperationLogHelper").logWarning(j,d("BDLoggingConstants").OPERATIONS.GET_LOCAL_STORAGE_ERROR);return 0}b=b.getItem(a);if(b==null)return 0;a=Number.parseInt(b,10);return Number.isFinite(a)?a:0},resetHeartbeatStartedForTest:function(){n=!1,o=!1},startHeartbeatDelayed:function(){if(n||o)return;var a=z.getTimestampInStorage(z.HEARTBEAT_TIMESTAMP_STORAGE_KEY);a=Date.now()-a;try{a>=x.getHeartbeatIntervalMs()?z.startHeartbeat():(window.setTimeout(function(){return z.startHeartbeat()},x.getHeartbeatIntervalMs()-a),o=!0)}catch(b){d("BDOperationLogHelper").logError(j,d("BDLoggingConstants").OPERATIONS.HB_START_FAILURE,{lastBeatSince:a.toString(),hbi:x.getHeartbeatIntervalMs().toString(),e:b})}},HEARTBEAT_TIMESTAMP_STORAGE_KEY:"hb_timestamp",startHeartbeat:function(){!n&&x.getHeartbeatIntervalMs()>0&&(z.collectHeartbeatTimes(q,r),p!==0&&(window.clearInterval(p),d("BDOperationLogHelper").logWarning(j,d("BDLoggingConstants").OPERATIONS.HB_ALREADY_RUNNING)),p=window.setInterval(function(){return z.collectHeartbeatTimes(q,r)},x.getHeartbeatIntervalMs()),n=!0)},collectHeartbeatTimes:function(a,b){if(a<=0&&b<=0)return;a>0&&z.collectHeartbeat(y.CRITICAL);b>0&&z.collectHeartbeat(y.VITAL);(a>1||b>1)&&window.setTimeout(function(){return z.collectHeartbeatTimes(a-1,b-1)},s*1e3)},collectHeartbeat:function(a){var b;b=x==null?void 0:(b=x.getHeartbeatSignal())==null?void 0:(b=b.getSignalCollector())==null?void 0:b.executeSignalCollection();if(b==null){d("BDOperationLogHelper").logError(j,d("BDLoggingConstants").OPERATIONS.HB_COLLECTION_FAILED,{urgency:a.toString()});return}else d("BDOperationLogHelper").logInfo(j,d("BDLoggingConstants").OPERATIONS.HB_COLLECTED,{urgency:a.toString()});z.postHeartbeat(a,b)&&z.setTimestampInStorage(Date.now(),z.HEARTBEAT_TIMESTAMP_STORAGE_KEY)},postHeartbeat:function(a,b){var c={};c[38001]=[b==null?void 0:b.valueOrError];b=JSON.stringify(c);return z._postSignalsHelper(b,a)},collectStaticSignals:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(z.collectSignalsOneTime(x.getStaticSignals()));case 2:case"end":return a.stop()}},null,this)},collectDynamicSignals:function(){z.stopDynamicSignalCollection(),u=window.setInterval(function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(z.collectSignalsOneTime(x.getDynamicSignals()));case 2:case"end":return a.stop()}},null,this)},x.getPeriodicCollectionIntervalMs())},collectBiometricSignals:function(){z.collectSignalsOneTime(x.getBiometricSignals())},stopDynamicSignalCollection:function(){u!=null&&(window.clearInterval(u),u=null)},collectSignalsOneTime:function(a){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(c("SignalCollectionManager").get().collectSignals(a));case 2:case"end":return d.stop()}},null,this)},startLoginTimeSignalCollection:function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:if(m){c.next=9;break}m=!0;d("BDServerConfig").parseConfig(a);c.next=5;return b("regeneratorRuntime").awrap(z.collectSignalsOneTime(x.getDynamicSignals()));case 5:c.next=7;return b("regeneratorRuntime").awrap(z.collectSignalsOneTime(x.getBiometricSignals()));case 7:c.next=9;return b("regeneratorRuntime").awrap(z.collectSignalsOneTime(x.getStaticSignals()));case 9:case"end":return c.stop()}},null,this)},getSignalsAsJSONString:function(){return d("BDSignalBuffer").getSignalsAsJSONString([c("BDCollectionTypeEnum").DYNAMIC,c("BDCollectionTypeEnum").STATIC,c("BDCollectionTypeEnum").BIOMETRIC])}};a=z;g["default"]=a}),98);
__d("BDCometSignalCollectionTrigger",["BDClientSignalCollectionTrigger","BDSignalCollectionData"],(function(a,b,c,d,e,f,g){"use strict";function a(){c("BDClientSignalCollectionTrigger").startSignalCollection(c("BDSignalCollectionData"))}g.initSignalCollection=a}),98);
__d("IGDSPrivateToast.react",["BaseTheme.react","IGDSBox.react","IGDSText.react","IGDSThemeConfig","react","stylex","useCurrentDisplayMode","useFadeEffect"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;e=b.forwardRef;var k=b.unstable_useMemoCache,l="x1xuf6tn-B",m={actionableToast:{"@media (max-width: 767px)_width":"xeroabh","@media (min-width: 768px)_minWidth":"x1ww3oar",$$css:!0},actionBox:{flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",$$css:!0},fadeIn:{animationDuration:"xs4xyr0",animationName:"x1wpepyw",animationTimingFunction:"x4hg4is",opacity:"x1iy03kw",$$css:!0},fadeOut:{animationDuration:"xs4xyr0",animationName:"xqf3suz",animationTimingFunction:"x4hg4is",opacity:"xg01cxk",$$css:!0},messageBox:{flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",height:"x5yr21d",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},rootBox:{flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",$$css:!0},toast:{alignItems:"x6s0dn4",backgroundColor:"x1jx94hy",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxShadow:"xdy0x9s",display:"x78zum5",flexShrink:"x2lah0s",justifyContent:"x1qughib",opacity:"xg01cxk",paddingTop:"xyamay9",paddingEnd:"xc73u3c",paddingBottom:"x1l90r2v",paddingStart:"x5ib6vp",textAlign:"x2b8uid",$$css:!0}};function a(a,b){var d=k(27),e=a.actionComponent,f=a["data-testid"],g=a.icon,i=a.isVisible,n=a.message,o=a.messageSecondary,p=a.onClose;a=a.target;a=a===void 0?"center":a;var q=c("useFadeEffect")(i);q[0];var r=q[1];q=q[2];var s=c("useCurrentDisplayMode")();s=s==="dark"?"light":"dark";a=(h||(h=c("stylex")))(m.toast,a==="center"&&e==null?null:m.actionableToast,r&&m.fadeIn,!i&&m.fadeOut);d[0]!==p?(r=function(a){a.animationName===l&&p!=null&&p()},d[0]=p,d[1]=r):r=d[1];d[2]!==g?(i=g!=null&&j.jsx(c("IGDSBox.react"),{marginEnd:3,children:g}),d[2]=g,d[3]=i):i=d[3];d[4]!==n?(g=j.jsx(c("IGDSText.react").Body,{maxLines:1,textAlign:"start",zeroMargin:!0,children:n}),d[4]=n,d[5]=g):g=d[5];d[6]!==o?(n=o!=null&&j.jsx(c("IGDSBox.react"),{marginTop:1,children:j.jsx(c("IGDSText.react").Body,{color:"secondaryText",maxLines:1,textAlign:"start",zeroMargin:!0,children:o})}),d[6]=o,d[7]=n):n=d[7];d[8]!==g||d[9]!==n?(o=j.jsxs(c("IGDSBox.react"),{direction:"column",justifyContent:"center",xstyle:m.messageBox,children:[g,n]}),d[8]=g,d[9]=n,d[10]=o):o=d[10];d[11]!==b||d[12]!==i||d[13]!==o?(g=j.jsxs(c("IGDSBox.react"),{alignItems:"center",containerRef:b,direction:"row",overflow:"hidden",xstyle:m.rootBox,children:[i,o]}),d[11]=b,d[12]=i,d[13]=o,d[14]=g):g=d[14];d[15]!==e?(n=e!=null&&j.jsx("div",{className:"x1c4vz4f x2lah0s",children:e}),d[15]=e,d[16]=n):n=d[16];d[17]!==a||d[18]!==r||d[19]!==g||d[20]!==n?(b=j.jsxs("div",{className:a,onAnimationEnd:r,children:[g,n]}),d[17]=a,d[18]=r,d[19]=g,d[20]=n,d[21]=b):b=d[21];d[22]!==s||d[23]!==q||d[24]!==f||d[25]!==b?(i=j.jsx(c("BaseTheme.react"),{"aria-atomic":!0,config:c("IGDSThemeConfig"),displayMode:s,ref:q,role:"alert",testid:void 0,children:b}),d[22]=s,d[23]=q,d[24]=f,d[25]=b,d[26]=i):i=d[26];return i}f=e(a);g["default"]=f}),98);
__d("IGDSPrivateToastContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({onHideFactory:null});g["default"]=b}),98);
__d("IGDSPrivateToaster.react",["BaseContextualLayer.react","DateConsts","IGDSPrivateToast.react","IGDSPrivateToastContext","PolarisUA","clearTimeout","react","setTimeout","stylex","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useEffect,l=b.useLayoutEffect;b.useMemo;var m=b.useRef,n=b.useState,o=b.unstable_useMemoCache,p={bottomContainer:{alignItems:"x6s0dn4",bottom:"x3h4tne",display:"x78zum5",flexDirection:"xdt5ytf",left:"x1nrll8i",start:null,end:null,position:"xixxii4",transform:"x1nc5ocm",$$css:!0},bottomLeftContainer:{alignItems:"x6s0dn4",bottom:"x3h4tne",display:"x78zum5",flexDirection:"xdt5ytf",position:"xixxii4",start:"x3f4u1h",left:null,right:null,$$css:!0},centerContainer:{left:"x1nrll8i",start:null,end:null,position:"xixxii4",top:"xwa60dl",transform:"x11lhmoz",$$css:!0},toastItem:{paddingBottom:"xjkvuk6",$$css:!0}},q=3*d("DateConsts").MS_PER_SEC;function r(a){var b=o(29),d=a.config;a=a.toast;var e=n("transition"),f=e[0],g=e[1];e=n(null);var h=e[0],i=e[1],p=d.isVisible===!1;e=n(p);var r=e[0],s=e[1],t=m(null),v=d.isSticky!=null&&d.isSticky,w=d.duration!=null?d.duration:q,x;b[0]!==p?(e=function(){return s(!p)},x=[p],b[0]=p,b[1]=e,b[2]=x):(e=b[1],x=b[2]);l(e,x);b[3]!==r||b[4]!==v||b[5]!==w?(e=function(){r&&!v?t.current=c("setTimeout")(function(){s(!1)},w):c("clearTimeout")(t.current);return function(){return c("clearTimeout")(t.current)}},b[3]=r,b[4]=v,b[5]=w,b[6]=e):e=b[6];b[7]!==r||b[8]!==d||b[9]!==w||b[10]!==v?(x=[r,d,w,v],b[7]=r,b[8]=d,b[9]=w,b[10]=v,b[11]=x):x=b[11];k(e,x);b[12]!==h||b[13]!==f||b[14]!==d.onAfterHide?(e=function(){h==null?void 0:h(f),d.onAfterHide==null?void 0:d.onAfterHide()},b[12]=h,b[13]=f,b[14]=d.onAfterHide,b[15]=e):e=b[15];var y=e;b[16]===Symbol["for"]("react.memo_cache_sentinel")?(x=function(a){i(function(b){return a});return function(a){s(!1),g(a)}},b[16]=x):x=b[16];e=x;b[17]===Symbol["for"]("react.memo_cache_sentinel")?(x={onHideFactory:e},b[17]=x):x=b[17];e=x;x=e;b[18]===Symbol["for"]("react.memo_cache_sentinel")?(e="xjkvuk6",b[18]=e):e=b[18];var z;b[19]!==r||b[20]!==y?(z=function(){r||y()},b[19]=r,b[20]=y,b[21]=z):z=b[21];b[22]!==d||b[23]!==r||b[24]!==a?(x=j.jsx(c("IGDSPrivateToastContext").Provider,{value:x,children:j.jsx(u,{config:d,isVisible:r,toast:a})}),b[22]=d,b[23]=r,b[24]=a,b[25]=x):x=b[25];b[26]!==z||b[27]!==x?(a=j.jsx("div",{className:e,onAnimationEnd:z,children:x}),b[26]=z,b[27]=x,b[28]=a):a=b[28];return a}function a(a){var b=o(19),e=a["data-testid"];a=a.items;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=d("PolarisUA").isMobile(),b[0]=f):f=b[0];var g=f;f=m(null);if(a.length===0)return null;var h,i,k;b[1]!==a?(h=[],i=[],k=[],a.map(function(a){bb5:switch(a.toast.target){case"center":h.push(a);break bb5;case"bottom":i.push(a);break bb5;case"bottom-left":g?i.push(a):k.push(a);break bb5;default:v(a.toast)?i.push(a):h.push(a)}}),b[1]=a,b[2]=h,b[3]=i,b[4]=k):(h=b[2],i=b[3],k=b[4]);b[5]!==e||b[6]!==h?(a=j.jsx(t,{"data-testid":void 0,items:h,target:"center"}),b[5]=e,b[6]=h,b[7]=a):a=b[7];var l;b[8]!==e||b[9]!==i?(l=j.jsx(t,{"data-testid":void 0,items:i,target:"bottom"}),b[8]=e,b[9]=i,b[10]=l):l=b[10];var n;b[11]!==e||b[12]!==k?(n=j.jsx(t,{"data-testid":void 0,items:k,target:"bottom-left"}),b[11]=e,b[12]=k,b[13]=n):n=b[13];b[14]!==f||b[15]!==a||b[16]!==l||b[17]!==n?(e=j.jsxs(c("BaseContextualLayer.react"),{contextRef:f,children:[a,l,n]}),b[14]=f,b[15]=a,b[16]=l,b[17]=n,b[18]=e):e=b[18];return e}function s(a){switch(a){case"center":return p.centerContainer;case"bottom-left":return p.bottomLeftContainer;case"bottom":default:return p.bottomContainer}}function t(a){var b=o(9),d=a["data-testid"],e=a.items;a=a.target;if(e.length>0){var f;b[0]!==a?(f=(h||(h=c("stylex")))(s(a)),b[0]=a,b[1]=f):f=b[1];if(b[2]!==e){b[4]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a){var b=a.config;a=a.toast;return j.jsx(r,{config:b,toast:a},b.key)},b[4]=a):a=b[4];a=e.map(a);b[2]=e;b[3]=a}else a=b[3];b[5]!==f||b[6]!==d||b[7]!==a?(e=j.jsx("div",{className:f,"data-testid":void 0,children:a}),b[5]=f,b[6]=d,b[7]=a,b[8]=e):e=b[8];return e}return null}function u(a){var b=o(10),d=a.config,e=a.isVisible;a=a.toast;var f=c("useSinglePartialViewImpression")({onImpressionStart:d==null?void 0:d.onImpressionCallback}),g;b[0]!==a.actionComponent||b[1]!==a.icon||b[2]!==a.message||b[3]!==a.messageSecondary||b[4]!==a.target||b[5]!==d.key||b[6]!==d.onAfterHide||b[7]!==e||b[8]!==f?(g=j.jsx(c("IGDSPrivateToast.react"),{actionComponent:a.actionComponent,"data-testid":void 0,icon:a.icon,isVisible:e,message:a.message,messageSecondary:a.messageSecondary,onClose:d.onAfterHide,ref:f,target:a.target}),b[0]=a.actionComponent,b[1]=a.icon,b[2]=a.message,b[3]=a.messageSecondary,b[4]=a.target,b[5]=d.key,b[6]=d.onAfterHide,b[7]=e,b[8]=f,b[9]=g):g=b[9];return g}function v(a){return a.actionComponent!=null}g["default"]=a}),98);
__d("PolarisFeedActionFetchFeedDataFromNative",["invariant","InteractionTracing","PolarisAPIFetchFeedTimeline","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.cursor,e=a.feedViewInfo,f=a.getFeedQuery;a=a.paginationSource;if(f!=null){var g=f();g.status==="LOADING"&&(yield g.promise);g=f();g.status!=="LOADING"||h(0,61393);if(g.status==="ERROR")throw g.error;var i=g.response;c("InteractionTracing").getPendingInteractions().forEach(function(a){a.addAnnotationInt("feed_preload_num_items",i.num_results)});return i}else return d("PolarisAPIFetchFeedTimeline").fetchFeedTimeline({cursor:b,feedViewInfo:e,paginationSource:a})});return i.apply(this,arguments)}g.fetchFeedDataFromNative=a}),98);
__d("getPolarisClientViewStateMediaList",["PolarisFeedState","PolarisLoggerUtils","filterNulls"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){if(a.type===d("PolarisFeedState").END_OF_FEED_DEMARCATOR_TYPE)return{id:a.id,type:0};if(a.type===d("PolarisFeedState").GRAPH_SUGGESTED_USER_FEED_UNIT_TYPE){var c;return{id:a.id,type:Number((c=(c=a.trackingInfo)==null?void 0:c.type)!=null?c:0)}}b=b.get((c=a.postId)!=null?c:"");c=a.postId;a=b==null?void 0:(a=b.owner)==null?void 0:a.id;if(c!=null&&a!=null){return{id:d("PolarisLoggerUtils").getFormattedMediaID(c,a),type:(c=b==null?void 0:b.viewStateItemType)!=null?c:0}}return null}function a(a,b){if(a==null)return null;a=a.map(function(a){return h(a,b)});return JSON.stringify(c("filterNulls")(a.toArray()))}g["default"]=a}),98);
__d("getPolarisFeedRecsPagingToken",["PolarisFeedState","PolarisLoggerUtils","PolarisMediaConstants"],(function(a,b,c,d,e,f,g){"use strict";var h=-1;function i(a,b,c){for(var d=a.length-1;d>=0;d--){var e=a[d].postId;e=b.get((e=e)!=null?e:"");if(c){if(e!=null&&e.isSponsored===!1)return d}else if(e!=null&&e.isSponsored===!0)return d}return h}function j(a,b,c){var e=i(a,b,c);if(e===h)return null;a=a[e];a=a.postId;b=(b=b.get((b=a)!=null?b:""))==null?void 0:(b=b.owner)==null?void 0:b.id;if(a!=null&&b!=null){a={id:d("PolarisLoggerUtils").getFormattedMediaID(a,b),index:e};c||(a.type=d("PolarisMediaConstants").UnitItemType.AD);return a}return null}function k(a){return a.findIndex(function(a){return a.type===d("PolarisFeedState").END_OF_FEED_DEMARCATOR_TYPE})}function a(a,b){if(a==null)return null;var c=k(a),d=a.length-1;if(c===h||c===d)return null;var e={total_num_items:d-c};a=a.slice(c+1,d+1);c=j(a,b,!1);c!=null&&(e.last_non_organic_item=c);d=j(a,b,!0);d!=null&&(e.last_organic_item=d);return JSON.stringify(e)}g.getPolarisFeedRecsPagingToken=a}),98);
__d("PolarisFeedActionLoadNextPage",["invariant","PolarisAPIFetchFeedTimeline","PolarisFeedActionBuildPastPostsAction","PolarisFeedLogger","PolarisFeedTypes","PolarisInstajax","PolarisLogger","PolarisMonitorErrors","PolarisPrioritizedTask","Promise","getPolarisClientViewStateMediaList","getPolarisFeedRecsPagingToken","isStringNullOrEmpty","nullthrows","polarisFeedReducer","processPolarisFeedItems"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function a(a,e){a===void 0&&(a={priority:d("PolarisPrioritizedTask").HIGH_PRIORITY});return function(f,g){g=g();var j=g.feed,k=j.currentFeed;j=j.nextPageTask;var l=d("polarisFeedReducer").getFeedContent(g.feed),m=l.isLoadingNextPage,n=l.items,o=l.paginationInfo;if(j){j.setOptions(a);return(i||(i=b("Promise"))).resolve()}if(m)return(i||(i=b("Promise"))).resolve();var p=null,q=c("getPolarisClientViewStateMediaList")(n,g.posts.byId);o||h(0,51375);l=o.moreAvailable;p=o.cursor;l===!0&&!c("isStringNullOrEmpty")(p)||h(0,51379);d("PolarisLogger").logAction("feedNextPageAttempt");var r=d("getPolarisFeedRecsPagingToken").getPolarisFeedRecsPagingToken(n==null?void 0:n.toArray(),g.posts.byId),s=null,t=!1;j=new(d("PolarisPrioritizedTask").PrioritizedTask)(a,function(){return t?(i||(i=b("Promise"))).resolve():d("PolarisAPIFetchFeedTimeline").fetchFeedTimeline({before:function(a){s=a},clientViewStateMediaList:q,cursor:p,feedRecsPagingToken:r,feedViewInfo:e,paginationSource:o==null?void 0:o.paginationSource}).then(function(a){var b=c("nullthrows")(a.feed_items);b=c("processPolarisFeedItems")({items:b,previousItems:n});d("PolarisLogger").logAction("feedNextPageSuccess");var e=d("PolarisFeedActionBuildPastPostsAction").buildPastPostsAction(b);e&&f(e);return{ads:b.ads,comments:b.comments,feedItems:b.feedItems,feedToUpdate:k,groups:b.groups,paginationInfo:{cursor:a.next_max_id,moreAvailable:a.more_available,paginationSource:d("PolarisFeedTypes").PaginationSource.cast(a.pagination_source)},posts:b.posts,type:"FEED_NEXT_PAGE_LOADED_V2",users:b.users}}).then(f)["catch"](function(a){d("PolarisLogger").logAction("feedNextPageFailure"),d("PolarisFeedLogger").logFeedNextPageLoadFailure(a),f({type:"FEED_NEXT_PAGE_FAILED"}),a instanceof d("PolarisInstajax").AjaxError||d("PolarisMonitorErrors").logError(a)})});f({abort:function(){t=!0,s&&s.abort()},task:j,type:"FEED_NEXT_PAGE_REQUESTED"});return j.run()}}g.loadNextPage=a}),98);
__d("PolarisFeedActionLoadFeedPageFromNative",["InteractionTracing","PolarisFeedActionBuildFeedPageLoadedActionV2","PolarisFeedActionConstants","PolarisFeedActionFetchFeedDataFromNative","PolarisFeedActionLoadFeedPageExtras","PolarisFeedActionLoadNextPage","PolarisFeedTypes","PolarisLogger","PolarisMediaPrefetchActions","PolarisPrioritizedTask","QuickPerformanceLogger","asyncToGeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var e=a.backgroundFetch,f=a.feedViewInfo,g=a.getFeedQuery,i=a.preloadedFeedQueryId;return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){(h||(h=c("QuickPerformanceLogger"))).markerStart(c("qpl")._(27459585,"2172"));a(d("PolarisFeedActionLoadFeedPageExtras").loadFeedPageExtras());i!=null?(h||(h=c("QuickPerformanceLogger"))).markerPoint(c("qpl")._(27459585,"2172"),"feed_early_flush_wait"):(h||(h=c("QuickPerformanceLogger"))).markerPoint(c("qpl")._(27459585,"2172"),"network_request");try{d("PolarisLogger").logAction("feedFirstPageAttempt");e?d("PolarisLogger").logAction("feedBackgroundFetchAttempt"):d("PolarisLogger").logAction("feedForegroundFetchAttempt");var j=d("PolarisFeedActionFetchFeedDataFromNative").fetchFeedDataFromNative({feedViewInfo:f,getFeedQuery:g}).then(function(b){c("InteractionTracing").getPendingInteractions().forEach(function(a){a.addAnnotationInt("num_feed_items_from_feed_action",b.num_results)});var f=d("PolarisFeedActionBuildFeedPageLoadedActionV2").buildFeedPageLoadedActionV2(a,b,"home");d("PolarisLogger").logAction("feedFirstPageSuccess");e?d("PolarisLogger").logAction("feedBackgroundFetchSuccess"):d("PolarisLogger").logAction("feedForegroundFetchSuccess");return f});j["catch"](function(a){d("PolarisLogger").logAction("feedFirstPageFailure"),e?d("PolarisLogger").logAction("feedBackgroundFetchFailure",{error_message:a==null?void 0:a.message}):d("PolarisLogger").logAction("feedForegroundFetchFailure",{error_message:a==null?void 0:a.message})});a(yield j);j=b().feed.content.home.paginationInfo;(j==null?void 0:j.paginationSource)===d("PolarisFeedTypes").PaginationSource.FEED_RECS&&a(d("PolarisFeedActionLoadNextPage").loadNextPage({priority:d("PolarisPrioritizedTask").HIGH_PRIORITY}));(h||(h=c("QuickPerformanceLogger"))).markerPoint(c("qpl")._(27459585,"2172"),"network_response");a(d("PolarisMediaPrefetchActions").startMediaPrefetch(d("PolarisFeedActionConstants").FEED_VIEW))}catch(a){(h||(h=c("QuickPerformanceLogger"))).markerPoint(c("qpl")._(27459585,"2172"),"network_response_failure"),h.markerEnd(c("qpl")._(27459585,"2172"),3),d("PolarisLogger").logAction("feedFirstPageFailure"),e?d("PolarisLogger").logAction("feedBackgroundFetchFailure",{error_message:a==null?void 0:a.message}):d("PolarisLogger").logAction("feedForegroundFetchFailure",{error_message:a==null?void 0:a.message})}});return function(b,c){return a.apply(this,arguments)}}()}g.loadFeedPageFromNative=a}),98);
__d("PolarisFeedActionInitFeed",["PolarisFeedActionLoadFeedPageFromNative","asyncToGeneratorRuntime","polarisFeedReducer"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=a.backgroundFetch,e=c===void 0?!1:c,f=a.feedViewInfo,g=a.preloadedFeedQuery,h=a.preloadedFeedQueryId,i=a.queryStore;return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=b();b=d("polarisFeedReducer").getFeedContent(b.feed,"home");var c=b.isLoadingPosts;b=b.items;b=!b&&!c;if(b){a({type:"FEED_LOADING"});c=null;if(i!=null&&(g!=null&&(g.preloadEnabledOnInit||g.preloadEnabledOnNav))){var j=i.loadPostQuery([g.request.url,g.request.params],void 0,h);c=function(){return i.getPostResponse(j)}}a(d("PolarisFeedActionLoadFeedPageFromNative").loadFeedPageFromNative({backgroundFetch:e,feedViewInfo:f,getFeedQuery:c,preloadedFeedQueryId:h}))}});return function(b,c){return a.apply(this,arguments)}}()}g.initFeed=a}),98);
__d("PolarisBackgroundFeedDataFetchEager",["CometRelay","CurrentUser","PolarisFeedActionInitFeed","PolarisFeedActionLoadFeedPageExtras","PolarisFeedQueryConstants","PolarisFeedSeenStateManagerSingleton","PolarisFeedTimelineRootV2Query.graphql","PolarisPanavisionQEHelpers","PolarisRelayEnvironmentFactory"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=c("PolarisFeedSeenStateManagerSingleton").get(),e=c("PolarisRelayEnvironmentFactory").getForActorID(c("CurrentUser").getPossiblyNonFacebookUserID());if(d("PolarisPanavisionQEHelpers").hasPolarisFeedRevamp()){var f=d("PolarisFeedQueryConstants").FEED_TIMELINE_REQUEST_BODY;d("CometRelay").fetchQuery(e,c("PolarisFeedTimelineRootV2Query.graphql"),{data:f,variant:String("home")}).subscribe({});a.dispatch(d("PolarisFeedActionLoadFeedPageExtras").loadFeedPageExtras());return}if(b.count()>0){e=b.getViewInfo();b.clear();a.dispatch(d("PolarisFeedActionInitFeed").initFeed({backgroundFetch:!0,feedViewInfo:e}))}else a.dispatch(d("PolarisFeedActionInitFeed").initFeed({backgroundFetch:!0}))}g.runBackgroundFeedDataFetch=a}),98);
__d("InstagramWebNotificationFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5614");b=d("FalcoLoggerInternal").create("instagram_web_notification",a);e=b;g["default"]=e}),98);
__d("PolarisLogPushNotification",["InstagramODS","InstagramWebNotificationFalcoEvent","PolarisConfig","PolarisQueryParams","URI","polarisReferrerFormatter"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){d("PolarisQueryParams").isPushNotificationParam()&&(c("InstagramWebNotificationFalcoEvent").log(function(){var a;return{landing_page_url:(a=d("polarisReferrerFormatter").sanitizeReferrer(window.location.pathname))!=null?a:"",ndid:(a=d("PolarisQueryParams").getNdidParam())!=null?a:"",target_user_id:(a=d("PolarisConfig").getViewerId())!=null?a:"",web_push_event_name:"web_push_clicked"}}),i())}function i(){try{var a=new(h||(h=c("URI")))(window.location.href);a.removeQueryData("utm_source");a.removeQueryData("ndid");window.history.replaceState({},null,a)}catch(a){c("InstagramODS").incr("web.notifications.remove_utm.failure")}}g["default"]=a}),98);
__d("PolarisInitWindowsPWAKeyCommand",["ExecutionEnvironment","PolarisUA"],(function(a,b,c,d,e,f,g){"use strict";var h,i=!1;function a(){if(i)return;(h||(h=c("ExecutionEnvironment"))).canUseDOM&&d("PolarisUA").isDesktopPWA()&&(window.addEventListener("keydown",function(a){a.ctrlKey&&a.key==="r"&&window.location.reload()}),i=!0)}g["default"]=a}),98);
__d("polarisDebugLogODS",["cr:4890"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){b("cr:4890")==null?void 0:b("cr:4890")(a,c)}g["default"]=a}),98);
__d("AsyncTypedRequest",["AsyncRequest"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){b=a.call(this,b)||this;b.setReplaceTransportMarkers();return b}var c=b.prototype;c.promisePayload=function(b){return a.prototype.promisePayload.call(this,b)};c.setPayloadHandler=function(b){a.prototype.setPayloadHandler.call(this,b);return this};return b}(c("AsyncRequest"));g["default"]=a}),98);
__d("Chromedome",["fbt"],(function(a,b,c,d,e,f,g,h){function i(){if(document.domain==null)return null;var a=document.domain,b=/^intern\./.test(a);if(b)return null;b=/(^|\.)facebook\.(com|sg)$/.test(a);if(b)return"facebook";b=/(^|\.)instagram\.com$/.test(a);if(b)return"instagram";b=/(^|\.)threads\.net$/.test(a);if(b)return"threads";b=/(^|\.)messenger\.com$/.test(a);return b?"messenger":null}function j(a){if(a==="instagram")return h._("__JHASH__1V4qdh25Bnb__JHASH__");return a==="threads"?h._("__JHASH__JSeBwAKhGJH__JHASH__"):h._("__JHASH__S8hqZ4zKptW__JHASH__")}function a(a){if(top!==window)return;a=i();if(a==null)return;var b=h._("__JHASH__4REdQ6uuqzn__JHASH__");a=j(a);var c=h._("__JHASH__1jNE2MHDhX-__JHASH__",[h._param("url","https://www.facebook.com/selfxss")]);if(window.chrome||window.safari){var d="font-family:helvetica; font-size:20px; ";[[b,d+"font-size:50px; font-weight:bold; color:red; -webkit-text-stroke:1px black;"],[a,d],[c,d],["",""]].map(function(a){window.setTimeout(console.log.bind(console,"\n%c"+a[0].toString(),a[1]))})}else{b=[""," .d8888b.  888                       888","d88P  Y88b 888                       888","Y88b.      888                       888",' "Y888b.   888888  .d88b.  88888b.   888','    "Y88b. 888    d88""88b 888 "88b  888','      "888 888    888  888 888  888  Y8P',"Y88b  d88P Y88b.  Y88..88P 888 d88P",' "Y8888P"   "Y888  "Y88P"  88888P"   888',"                           888","                           888","                           888"];d=(""+a.toString()).match(/.{35}.+?\s+|.+$/g);if(d!=null){a=Math.floor(Math.max(0,(b.length-d.length)/2));for(var e=0;e<b.length||e<d.length;e++){var f=b[e];b[e]=f+new Array(45-f.length).join(" ")+(d[e-a]||"")}}console.log("\n\n\n"+b.join("\n")+"\n\n"+c.toString()+"\n");return}}g.start=a}),226);
__d("WebPerfDeviceInfoLogFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1871697");b=d("FalcoLoggerInternal").create("web_perf_device_info_log",a);e=b;g["default"]=e}),98);
__d("XDeviceClassRealtimeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/web_perf/get_perf_level/",{})}),null);
__d("WebDevicePerfInfoLogging",["AsyncTypedRequest","JSScheduler","Promise","WebDevicePerfInfoData","WebPerfDeviceInfoLogFalcoEvent","XDeviceClassRealtimeController","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){var b=document.createElement("canvas");b=b.getContext("webgl")||b.getContext("experimental-webgl");if(!b)return;var c=b.getExtension("WEBGL_debug_renderer_info");if(!c)return;var d=b.getParameter(c.UNMASKED_RENDERER_WEBGL);b=b.getParameter(c.UNMASKED_VENDOR_WEBGL);a.gpu_vendor=b;a.gpu_renderer=d}function k(){var a=window.navigator,b={};a&&a.hardwareConcurrency!==void 0&&(b.cpu_cores=a.hardwareConcurrency);a&&a.deviceMemory!==void 0&&(b.ram=a.deviceMemory);c("WebDevicePerfInfoData").needsFullUpdate&&j(b);return b}function l(){var a=k();c("WebPerfDeviceInfoLogFalcoEvent").log(function(){var b;return{cpu_cores:(b=a.cpu_cores)!=null?b:null,ram:(b=a.ram)!=null?b:null,gpu_renderer:(b=a.gpu_renderer)!=null?b:null,gpu_vendor:(b=a.gpu_vendor)!=null?b:null}})}function m(){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=k();a=(yield new(c("AsyncTypedRequest"))(c("XDeviceClassRealtimeController").getURIBuilder().getURI()).setData(a).promisePayload());return a.devicePerfClassLevel});return n.apply(this,arguments)}function a(){(c("WebDevicePerfInfoData").needsFullUpdate||c("WebDevicePerfInfoData").needsPartialUpdate)&&(i||(i=d("JSScheduler"))).scheduleSpeculativeCallback(l)}function e(){return new(h||(h=b("Promise")))(function(a,b){c("WebDevicePerfInfoData").needsFullUpdate||c("WebDevicePerfInfoData").needsPartialUpdate?(i||(i=d("JSScheduler"))).scheduleSpeculativeCallback(function(){m().then(a)["catch"](b)}):a()})}g.doLog=a;g.doLogPromise=e}),98);
__d("ClientConsistencyFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1764786");b=d("FalcoLoggerInternal").create("client_consistency",a);e=b;g["default"]=e}),98);
__d("LogWebMemoryUsageFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1765264");b=d("FalcoLoggerInternal").create("log_web_memory_usage",a);e=b;g["default"]=e}),98);
__d("AccessibilityWebAssistiveTechTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:AccessibilityWebAssistiveTechLoggerConfig")}),null);
__d("CometFocusTableContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({FocusCell:null,FocusRow:null,FocusTable:null});g["default"]=b}),98);
__d("TetraButtonGroup.react",["CometFocusTableContext","CometRow.react","CometRowItem.react","TetraButton.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k={hiddenButton:{height:"xqtp20y",overflowX:"x6ikm8r",overflowY:"x10wlt62",visibility:"xlshs6z",$$css:!0},resetFlexBasis:{flexBasis:"xdl72j9",$$css:!0}},l="secondary";function m(a){var b=j(c("CometFocusTableContext"));b=b.FocusCell;a=a.children;return b!=null?i.jsx(b,{children:a}):a}m.displayName=m.name+" [from "+f.id+"]";function a(a){var b=a.align,d=b===void 0?"justify":b;b=a.direction;b=b===void 0?"forward":b;var e=a.expanding;e=e===void 0?!1:e;var f=a.paddingHorizontal,g=a.paddingTop,h=a.paddingVertical,j=a.primary,n=a.secondary,o=a.size,p=a.verticalAlign,q=a.wrap;q=q===void 0?"none":q;var r=[],s=[],t=null;if(j!=null){var u=j.ref,v=j.testid;v=babelHelpers.objectWithoutPropertiesLoose(j,["ref","testid"]);t=i.jsx(m,{children:i.jsx(c("TetraButton.react"),babelHelpers["extends"]({},v,{ref:u,size:o,testid:void 0}))});r.push({hidden:i.jsx(c("TetraButton.react"),babelHelpers["extends"]({},v,{disabled:!0,padding:"normal",size:o})),visible:t})}if(n!=null){j=n.ref;u=n.testid;v=babelHelpers.objectWithoutPropertiesLoose(n,["ref","testid"]);r.push({hidden:i.jsx(c("TetraButton.react"),babelHelpers["extends"]({},v,{disabled:!0,padding:"normal",size:o,type:"secondary"})),visible:i.jsx(m,{children:i.jsx(c("TetraButton.react"),babelHelpers["extends"]({},v,{ref:j,size:o,testid:void 0,type:"secondary"}))})})}else if(a.secondaryIcon!=null){s.push(i.jsx(c("CometRowItem.react"),{children:i.jsx(m,{children:i.jsx(c("TetraButton.react"),babelHelpers["extends"]({},a.secondaryIcon,{labelIsHidden:!0,size:o,type:(u=a.secondaryIcon.type)!=null?u:l}))})},"secondary-icon"))}else if(a.secondaryIconGroup!=null){n=a.secondaryIconGroup;v=n.primaryIcon;j=n.secondaryIcon;s.push(i.jsx(c("CometRowItem.react"),{children:i.jsx(m,{children:i.jsx(c("TetraButton.react"),babelHelpers["extends"]({},v,{labelIsHidden:!0,size:o,type:(u=v.type)!=null?u:l}))})},"secondary-icon-1"),i.jsx(c("CometRowItem.react"),{children:i.jsx(m,{children:i.jsx(c("TetraButton.react"),babelHelpers["extends"]({},j,{labelIsHidden:!0,size:o,type:(a=j.type)!=null?a:l}))})},"secondary-icon-2"))}n=r.map(function(a,b){return i.jsx(c("CometRowItem.react"),{expanding:d==="justify",xstyle:k.resetFlexBasis,children:r.map(function(a,c){return i.jsx(i.Fragment,{children:b!==c?i.jsx("div",{"aria-hidden":!0,className:"xqtp20y x6ikm8r x10wlt62 xlshs6z",children:a.hidden}):a.visible},c)})},b)});v=t!=null?i.jsx(c("CometRowItem.react"),{expanding:d==="justify",xstyle:k.resetFlexBasis,children:t},"primary"):null;u=[v].concat(s);o=r.length===2;j=o||t==null?n:u;a=b==="forward"?j:j.reverse();return i.jsx(c("CometRow.react"),{align:d,expanding:e,paddingHorizontal:f,paddingTop:g,paddingVertical:h,spacing:8,verticalAlign:p,wrap:q,children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometOnBeforeUnloadDialog.react",["fbt","CometCardedDialogLegacy.react","CometTrackingNodeProvider.react","TetraButtonGroup.react","TetraText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a.disabled;b=b===void 0?!1:b;var d=a.onClose,e=a.onCloseButtonPress,f=a.primaryAction,g=a.secondaryAction,i=a.body,k=a.cancel,l=a.confirm;a=a.title;var m=function(){f(),d()},n=function(){g(),d()};return j.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:163,children:j.jsxs(c("CometCardedDialogLegacy.react"),{onClose:function(){e(),d()},testid:void 0,title:a,titleHorizontalAlignment:"start",withCloseButton:!0,children:[j.jsx("div",{className:"xz9dl7a x1pi30zi xsag5q8 x1swvt13 x1n2onr6",children:j.jsx(c("TetraText.react"),{type:"body3",children:i})}),j.jsx("div",{className:"x78zum5 x1q0g3np x13a6bvl xexx8yu x4uap5 x1l90r2v xkhd6sd",children:j.jsx(c("TetraButtonGroup.react"),{direction:"backward",paddingHorizontal:16,primary:{disabled:b,label:(a=l)!=null?a:h._("__JHASH__dV9Vz_8TRow__JHASH__"),onPress:m,testid:"CometOnBeforeUnloadDialogConfirmButton"},secondary:{disabled:b,label:(i=k)!=null?i:h._("__JHASH__vfZ0qXC5Zmr__JHASH__"),onPress:n,reduceEmphasis:!0,testid:"CometOnBeforeUnloadDialogCancelButton"}})})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);/*FB_PKG_DELIM*/
__d("PolarisPostModalContextImpl_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisPostModalContextImpl_media",selections:[{args:null,kind:"FragmentSpread",name:"PolarisPostModalEntrypointLazy_media"}],type:"XDTMediaDict",abstractKey:null};e.exports=a}),null);
__d("PolarisPostModalEntrypointLazyComponent_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisPostModalEntrypointLazyComponent_media",selections:[{args:null,kind:"FragmentSpread",name:"PolarisPostFastAboutThisAccountModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastAdDebugToolModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastAdRemovedModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastCopyModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastDeleteModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastEmbedModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastHideAdModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastOptionsModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastReportModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastReportAdModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastShareSheet_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastTaggedModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastTagOptionsModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastUnfollowModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastViewAccountModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastWAISTModal_media"}],type:"XDTMediaDict",abstractKey:null};e.exports=a}),null);
__d("PolarisPostModalEntrypointLazy_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisPostModalEntrypointLazy_media",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"pk",storageKey:null},action:"THROW",path:"pk"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastAboutThisAccountModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostModalEntrypointLazyComponent_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastCopyModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastDeleteModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastEmbedModal_media"},{args:null,kind:"FragmentSpread",name:"PolarisPostFastOptionsModal_media"}],type:"XDTMediaDict",abstractKey:null};e.exports=a}),null);
__d("IGDSAddPanoFilledIcon.react",["IGDSSVGIconBase.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var b=i(4),d,e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=j.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",x1:"12",x2:"12",y1:"3.5",y2:"20.502"}),e=j.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",x1:"20.5",x2:"3.5",y1:"12",y2:"12"}),b[0]=d,b[1]=e):(d=b[0],e=b[1]);b[2]!==a?(d=j.jsxs(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:[d,e]})),b[2]=a,b[3]=d):d=b[3];return d}b=j.memo(a);g["default"]=b}),98);
__d("IGDSVolumeOffFilledIcon.react",["IGDSSVGIconBase.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var b=i(3),d;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=j.jsx("path",{clipRule:"evenodd",d:"M1.5 13.3c-.8 0-1.5.7-1.5 1.5v18.4c0 .8.7 1.5 1.5 1.5h8.7l12.9 12.9c.9.9 2.5.3 2.5-1v-9.8c0-.4-.2-.8-.4-1.1l-22-22c-.3-.3-.7-.4-1.1-.4h-.6zm46.8 31.4-5.5-5.5C44.9 36.6 48 31.4 48 24c0-11.4-7.2-17.4-7.2-17.4-.6-.6-1.6-.6-2.2 0L37.2 8c-.6.6-.6 1.6 0 2.2 0 0 5.7 5 5.7 13.8 0 5.4-2.1 9.3-3.8 11.6L35.5 32c1.1-1.7 2.3-4.4 2.3-8 0-6.8-4.1-10.3-4.1-10.3-.6-.6-1.6-.6-2.2 0l-1.4 1.4c-.6.6-.6 1.6 0 2.2 0 0 2.6 2 2.6 6.7 0 1.8-.4 3.2-.9 4.3L25.5 22V1.4c0-1.3-1.6-1.9-2.5-1L13.5 10 3.3-.3c-.6-.6-1.5-.6-2.1 0L-.2 1.1c-.6.6-.6 1.5 0 2.1L4 7.6l26.8 26.8 13.9 13.9c.6.6 1.5.6 2.1 0l1.4-1.4c.7-.6.7-1.6.1-2.2z",fillRule:"evenodd"}),b[0]=d):d=b[0];b[1]!==a?(d=j.jsx(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 48 48",children:d})),b[1]=a,b[2]=d):d=b[2];return d}b=j.memo(a);g["default"]=b}),98);
__d("PolarisDirectActionSendPostToUsers",["InstagramODS","PolarisDirectAPI","PolarisDirectActionConstants","PolarisDirectActionSendText","PolarisDirectActionThreadLoaded","PolarisDirectActionsLogger","PolarisDirectConstants","PolarisDirectStrings","PolarisToastActions","Promise","isStringNullOrEmpty","nullthrows","polarisDirectSelectors","polarisGenerateOfflineThreadingId"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var e=a.comment,f=a.customToast,g=a.mediaId,j=a.mediaOverlayInfo,k=a.mqtt,l=a.onError,m=a.onSuccess,n=a.productType,o=a.recipients;return function(a,p){var q=function(b){f!=null?f({text:b}):a(d("PolarisToastActions").showToast({text:b}))};o.forEach(function(f,o){var r;f.type==="user"?r=d("polarisDirectSelectors").getThreadIdForUserId(p(),o):f.type==="thread"&&(r=o);d("PolarisDirectActionsLogger").directActionsLogger.logDirectEvent("http_message_attempt",{recipientType:f.type,type:d("PolarisDirectConstants").ThreadItemType.MEDIA_SHARE});r!=null?i(k,r,g,j,n).then(function(){m==null?void 0:m(o),d("PolarisDirectActionsLogger").directActionsLogger.logDirectEvent("http_message_success",{recipientType:f.type,type:d("PolarisDirectConstants").ThreadItemType.MEDIA_SHARE}),c("InstagramODS").incr("web.share_sheet.send_post"),q(d("PolarisDirectStrings").SENT_TOAST_TEXT)}).then(function(){var a=c("polarisGenerateOfflineThreadingId")();r!=null&&!c("isStringNullOrEmpty")(e)&&new(h||(h=b("Promise")))(function(a){window.setTimeout(a,d("PolarisDirectActionConstants").NUM_SEC_DELAY_FOR_SEND_TEXT*1e3)}).then(function(){return d("PolarisDirectActionSendText").sendText(k,c("nullthrows")(r),e,a)}).then(function(){d("PolarisDirectActionsLogger").directActionsLogger.logDirectEvent("http_message_success",{recipientType:f.type,type:d("PolarisDirectConstants").ThreadItemType.TEXT}),c("InstagramODS").incr("web.share_sheet.send_post_with_comment")})["catch"](function(a){d("PolarisDirectActionsLogger").directActionsLogger.logError("direct_send_message_to_users_failed",a),q(d("PolarisDirectStrings").GENERIC_ERROR_MESSAGE)})})["catch"](function(a){l==null?void 0:l(a,o),d("PolarisDirectActionsLogger").directActionsLogger.logError("direct_send_post_to_users_failed",a),q(d("PolarisDirectStrings").GENERIC_ERROR_MESSAGE)}):d("PolarisDirectAPI").createGroupThread([o]).then(function(p){var r=p.thread_id;a(d("PolarisDirectActionThreadLoaded").threadLoaded(p));i(k,r,g,j,n).then(function(){m==null?void 0:m(o),d("PolarisDirectActionsLogger").directActionsLogger.logDirectEvent("http_message_success",{type:d("PolarisDirectConstants").ThreadItemType.MEDIA_SHARE}),q(d("PolarisDirectStrings").SENT_TOAST_TEXT)}).then(function(){var a=c("polarisGenerateOfflineThreadingId")();r!=null&&!c("isStringNullOrEmpty")(e)&&new(h||(h=b("Promise")))(function(a){window.setTimeout(a,d("PolarisDirectActionConstants").NUM_SEC_DELAY_FOR_SEND_TEXT*1e3)}).then(function(){return d("PolarisDirectActionSendText").sendText(k,c("nullthrows")(r),e,a)}).then(function(){d("PolarisDirectActionsLogger").directActionsLogger.logDirectEvent("http_message_success",{recipientType:f.type,type:d("PolarisDirectConstants").ThreadItemType.TEXT}),q(d("PolarisDirectStrings").SENT_TOAST_TEXT)})["catch"](function(a){d("PolarisDirectActionsLogger").directActionsLogger.logError("direct_send_message_to_users_failed",a),q(d("PolarisDirectStrings").GENERIC_ERROR_MESSAGE)})})["catch"](function(a){l==null?void 0:l(a,o),d("PolarisDirectActionsLogger").directActionsLogger.logError("direct_send_post_to_users_failed",a)})},function(a){l==null?void 0:l(a,o),d("PolarisDirectActionsLogger").directActionsLogger.logError("direct_create_thread_send_post_to_users_failed",a),q(d("PolarisDirectStrings").GENERIC_ERROR_MESSAGE)})})}}function i(a,c,d,e,f){return a!=null?a.sendMediaShare(c,d,e,f):(h||(h=b("Promise"))).reject(new Error("MQTT is not instantiated"))}g.sendPostToUsers=a}),98);
__d("InstagramAdDirectReshareSendFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3447");b=d("FalcoLoggerInternal").create("instagram_ad_direct_reshare_send",a);e=b;g["default"]=e}),98);
__d("useMaybeLogInstagramAdDirectReshareSend",["InstagramAdDirectReshareSendFalcoEvent","InstagramODS","PolarisContainerModuleUtils","PolarisViewpointActionUtils","polarisAdsSelectors.react","polarisRelationshipSelectors.react","react","usePolarisAnalyticsContext"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.unstable_useMemoCache;function a(a){var b=i(8),e=a.id,f=a.mediaType,g=a.mpk,h=a.ownerId,j=c("usePolarisAnalyticsContext")();b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a){return a},b[0]=a):a=b[0];var k=d("polarisAdsSelectors.react").useFeedAdInfo(e,a),l=d("polarisRelationshipSelectors.react").useRelationship(h||"");b[1]!==k||b[2]!==l||b[3]!==j||b[4]!==h||b[5]!==g||b[6]!==f?(e=function(){if(k!=null&&k.ad_id!=null&&k.tracking_token!=null&&l!=null){var a=k.ad_id,b=k.tracking_token,e=d("PolarisContainerModuleUtils").getContainerModule(j);c("InstagramODS").incr("web.ads.feed.share");c("InstagramAdDirectReshareSendFalcoEvent").log(function(){var c;return{a_pk:(c=h)!=null?c:"",ad_id:a,follow_status:d("PolarisViewpointActionUtils").getFollowStatus(l),m_pk:g,m_t:f.toString(),pigeon_reserved_keyword_module:e,source_of_action:e,tracking_token:b}})}},b[1]=k,b[2]=l,b[3]=j,b[4]=h,b[5]=g,b[6]=f,b[7]=e):e=b[7];return e}g["default"]=a}),98);
__d("useIGDShareSheetSendPostToOpenRecipients",["PolarisDirectActionSendPostToUsers","PolarisInteractionsLogger","PolarisMediaTypes","PolarisReactRedux.react","PolarisViewpointActionUtils","useMaybeLogInstagramAdDirectReshareSend","usePolarisMQTT","useStableCallback"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,e=c("usePolarisMQTT")(),f=d("PolarisReactRedux.react").useDispatch();b=(b=d("PolarisViewpointActionUtils").getMPKForFeedMedia({id:a.id,owner:a.owner}))!=null?b:"";var g=d("PolarisInteractionsLogger").getMediaTypeFromPost(a),h=d("PolarisMediaTypes").MediaProductType.cast(a.productType),i=c("useMaybeLogInstagramAdDirectReshareSend")({id:a.id,mediaType:g,mpk:b,ownerId:(g=a.owner)==null?void 0:g.id});return c("useStableCallback")(function(b,c,g,j){f(d("PolarisDirectActionSendPostToUsers").sendPostToUsers({comment:(c=c)!=null?c:void 0,mediaId:a.id,mediaOverlayInfo:a.mediaOverlayInfo,mqtt:e,onError:j,onSuccess:g,productType:h,recipients:b}));i()})}g["default"]=a}),98);
__d("useIGDShareSheetOnSubmitPost",["IGDShareSheetOnSubmitFactory","PolarisInteractionsLogger","PolarisLinkBuilder","PolarisPostShareUtils.next.react","asyncToGeneratorRuntime","requireDeferred","useIGDShareSheetSendPostToOpenRecipients","useStableCallback"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("getSendPostToInstamadilloRecipient").__setRef("useIGDShareSheetOnSubmitPost");function a(a){var e=c("useIGDShareSheetSendPostToOpenRecipients")(a),f=d("PolarisInteractionsLogger").getMediaTypeFromPost(a),g=d("PolarisLinkBuilder").BASE_INSTAGRAM_URL+d("PolarisPostShareUtils.next.react").getShareURL(f,(f=a.code)!=null?f:"");return c("useStableCallback")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b,d;for(var f=arguments.length,i=new Array(f),j=0;j<f;j++)i[j]=arguments[j];var k=i,l=(yield h.load());return c("IGDShareSheetOnSubmitFactory")(e,l(a.id,(b=a.owner)==null?void 0:b.id,(d=a.owner)==null?void 0:d.username,g)).apply(void 0,k)}))}g["default"]=a}),98);
__d("PolarisCloseFriendsLabel.react",["IGDSBox.react","IGDSStarPanoFilledIcon.react","IGDSText.react","PolarisIGCoreButton.react","PolarisStoriesStrings","PolarisWebStorage","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useRef,l=b.useState,m="close_friends_expanded_count";function a(a){var b,e=a.onClick;a=a.textSize;a=a===void 0?"small":a;var f=c("PolarisWebStorage").getLocalStorage(),g=parseInt((b=f==null?void 0:f.getItem(m))!=null?b:0,10);b=l(!1);var h=b[0],n=b[1];b=l(function(){return g<3});var o=b[0],p=b[1],q=k(null);b=function(){n(!0),p(!0),window.clearTimeout(q.current)};var r=function(){n(!1)};j(function(){var a=g+1;f==null?void 0:f.setItem(m,String(a))},[g,f]);q.current=window.setTimeout(function(){h||p(!1)},1500);a=a==="small"?i.jsx(c("IGDSText.react").Body2Emphasized,{color:"webAlwaysWhite",maxLines:1,children:d("PolarisStoriesStrings").CLOSE_FRIENDS}):i.jsx(c("IGDSText.react").BodyEmphasized,{color:"webAlwaysWhite",maxLines:1,children:d("PolarisStoriesStrings").CLOSE_FRIENDS});return i.jsx("div",{onMouseEnter:b,onMouseLeave:r,children:i.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:e,children:i.jsx("div",{className:"x1wyv8x2 x1lcm9me x1yr5g0i xrt01vj x10y3i5r",children:i.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",height:"100%",paddingX:2,paddingY:2,position:"relative",width:"100%",children:[i.jsx(c("IGDSStarPanoFilledIcon.react"),{alt:"Close Friends Icon",color:"web-always-white",size:12}),o&&i.jsx("span",{className:"x12mruv9",children:a})]})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostActionRequestSavedCollectionsForPost",["PolarisGenericStrings","PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.postId;return function(a){a({postId:b,type:"COLLECTION_IDS_FOR_POST_REQUESTED"}),d("PolarisInstapi").apiGet("/api/v1/save/media/{media_id}/saved_collections_for_media/",{path:{media_id:b}}).then(function(c){c=c.data;c=c.collection_ids;a({collectionIds:(c=c==null?void 0:c.map(function(a){return a.toString()}))!=null?c:[],postId:b,type:"COLLECTION_IDS_FOR_POST_SUCCEEDED"})})["catch"](function(){a({postId:b,toast:{text:d("PolarisGenericStrings").GENERIC_ERROR_MESSAGE},type:"COLLECTION_IDS_FOR_POST_FAILED"})})}}g.requestSavedCollectionsForPost=a}),98);
__d("PolarisIsLoggedInDesktop",["PolarisConfig","PolarisUA"],(function(a,b,c,d,e,f,g){"use strict";function a(){return!d("PolarisUA").isMobile()&&d("PolarisConfig").isLoggedIn()}g.isLoggedInDesktop=a}),98);
__d("InstagramOrganicCarouselImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4535");b=d("FalcoLoggerInternal").create("instagram_organic_carousel_impression",a);e=b;g["default"]=e}),98);
__d("InstagramOrganicImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1115");b=d("FalcoLoggerInternal").create("instagram_organic_impression",a);e=b;g["default"]=e}),98);
__d("PolarisOrganicImpressionAction",["InstagramODS","InstagramOrganicCarouselImpressionFalcoEvent","InstagramOrganicImpressionFalcoEvent","PolarisContainerModuleUtils","PolarisMediaChainingPageConstants","PolarisNavChain","PolarisUA","PolarisViewpointActionUtils","memoizeWithArgs"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a===d("PolarisViewpointActionUtils").IMPRESSION_KIND.POST||a===d("PolarisViewpointActionUtils").IMPRESSION_KIND.CLIP?c("InstagramOrganicImpressionFalcoEvent"):c("InstagramOrganicCarouselImpressionFalcoEvent")}var i=c("memoizeWithArgs")(function(a,b){return new Map()},function(a,b){return a+"/"+b});function j(a,b,e,f){var g;e=d("PolarisContainerModuleUtils").getContainerModule(e);if(e==="unknown")return null;var h=b.id;g=(g=b.owner)==null?void 0:g.id;if(h==null||g==null)return null;var i=null,j=null;if(a===d("PolarisViewpointActionUtils").IMPRESSION_KIND.POST){var k;i=b==null?void 0:(k=b.sidecarChildren)==null?void 0:(k=k[0])==null?void 0:k.id;j=i}else a===d("PolarisViewpointActionUtils").IMPRESSION_KIND.CAROUSEL&&(i=h,j=null);return{carousel_media_id:i!=null?i+"_"+g:null,carousel_starting_media_id:j,chaining_position:null,chaining_session_id:null,inventory_source:b.inventorySource,m_ix:f==null?void 0:f.toString(),m_pk:h+"_"+g,module_name:e,nav_chain:(k=c("PolarisNavChain").getInstance())==null?void 0:k.getNavChainForSend(),pigeon_reserved_keyword_module:e,ranking_session_id:null,reel_id:a===d("PolarisViewpointActionUtils").IMPRESSION_KIND.CLIP?h:null,tray_session_id:null,viewer_session_id:null}}function k(a,b,d,e,f){return function(g){var k=d||"",n=j(a,b,d,f);if(i(a,k).get(b.id)===!0)return;if(g.state==="entered"){if(!n){c("InstagramODS").incr("web.impression.dropped");return}h(a).log(function(){return n});m(d,e);l(d,f);i(a,k).set(b.id,!0)}}}function l(a,b){if(a!==d("PolarisMediaChainingPageConstants").MEDIA_CHAINING_ANALYTICS_CONTEXT)return;b===0?c("InstagramODS").incr("web.msite.explore.chaining.seed"):c("InstagramODS").incr("web.msite.explore.chaining.recommended")}function m(a,b){if(a!=="postPage"||!d("PolarisUA").isMobile())return;c("InstagramODS").incr("web.msite.single_post.impression");switch(b){case void 0:c("InstagramODS").incr("web.msite.single_post.impression.direct_visit");break;case"polaris.profilePage":c("InstagramODS").incr("web.msite.single_post.impression.profile")}}function a(a,b,c,e){return k(d("PolarisViewpointActionUtils").IMPRESSION_KIND.POST,a,b,c,e)}function b(a,b){return k(d("PolarisViewpointActionUtils").IMPRESSION_KIND.CAROUSEL,a,b)}function e(a,b){return k(d("PolarisViewpointActionUtils").IMPRESSION_KIND.CLIP,a,b)}g.makePostImpressionAction=a;g.makeCarouselImpressionAction=b;g.makeClipImpressionAction=e}),98);
__d("PolarisSavedCollectionPickerListHeader.react",["fbt","IGDSAddPanoFilledIcon.react","IGDSBox.react","IGDSIconButton.react","IGDSText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).unstable_useMemoCache,k=i,l=h._("__JHASH__k_raO8ltliS__JHASH__"),m=h._("__JHASH__OvXLGVUZiSy__JHASH__");function a(a){var b=j(10),d=a.headerMinHeight,e=a.setHidePopover,f=a.setShowCreateCollectionModal;b[0]!==f||b[1]!==e?(a=function(){f(!0),e(!0)},b[0]=f,b[1]=e,b[2]=a):a=b[2];a=a;var g;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(g=k.jsx(c("IGDSBox.react"),{flex:"grow",position:"relative",children:k.jsx(c("IGDSBox.react"),{alignItems:"start",marginTop:1,position:"relative",children:k.jsx(c("IGDSText.react").Section,{children:l})})}),b[3]=g):g=b[3];var h;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(h=k.jsx(c("IGDSAddPanoFilledIcon.react"),{alt:m,size:12}),b[4]=h):h=b[4];b[5]!==a?(g=k.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",height:46,position:"relative",children:[g,k.jsx(c("IGDSBox.react"),{marginTop:1,position:"relative",children:k.jsx(c("IGDSIconButton.react"),{onClick:a,children:h})})]}),b[5]=a,b[6]=g):g=b[6];b[7]!==d||b[8]!==g?(h=k.jsx(c("IGDSBox.react"),{marginEnd:2,marginStart:4,minHeight:d,position:"relative",children:g}),b[7]=d,b[8]=g,b[9]=h):h=b[9];return h}g["default"]=a}),226);
__d("PolarisSavedCollectionPickerListItem.react",["cx","fbt","CometPressable.react","IGDSBox.react","IGDSText.react","PolarisLinkBuilder","PolarisPostToastProvider.react","PolarisThumbnail.react","PolarisUrlHelpers","emptyFunction","nullthrows","react","usePolarisViewer"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react"));b=j;b.useCallback;var l=b.unstable_useMemoCache,m=32,n=152,o=50;function p(a){return i._("__JHASH__-q2h7eNrQCh__JHASH__",[i._param("collection name",a)])}function q(a){var b=l(6),d=a.collectionName;a=a.coverMedia;a=a.image_versions2;a=a.candidates;var e=a.length>0,f;b[0]!==e||b[1]!==d||b[2]!==a?(f=e?k.jsx(c("PolarisThumbnail.react"),{alt:i._("__JHASH___bvLxc-DOQb__JHASH__",[i._param("collectionName",d)]),src:a[0].url}):null,b[0]=e,b[1]=d,b[2]=a,b[3]=f):f=b[3];b[4]!==f?(e=k.jsx(k.Fragment,{children:f}),b[4]=f,b[5]=e):e=b[5];return e}function a(a){var b=l(34),e=a.collection,f=a.onSaveMedia,g=a.onSaveMediaToCollection,h=a.postIsSaved,j=a.postIsSavedToCollection,r=a.setHidePopover,s=f===void 0?c("emptyFunction"):f;a=e.cover_media;f=e.cover_media_list;var t;a!=null&&(t=a);f!=null&&(t=f[0]);a=t!=null;var u=d("PolarisPostToastProvider.react").usePostToastContext(),v=c("nullthrows")(c("usePolarisViewer")());b[0]!==e.name?(f=d("PolarisUrlHelpers").slugify(e.name),b[0]=e.name,b[1]=f):f=b[1];var w=f;b[2]!==u||b[3]!==e.name||b[4]!==e.id||b[5]!==v.username||b[6]!==w?(f=function(){d("PolarisPostToastProvider.react").showPostToast(babelHelpers["extends"]({},u,{ActionText:i._("__JHASH__O7TnneKxudi__JHASH__"),BodyText:p(e.name),actionHref:d("PolarisLinkBuilder").buildUserSavedCollectionLink(c("nullthrows")(v.username),w===""?"_":w,e.id)}))},b[2]=u,b[3]=e.name,b[4]=e.id,b[5]=v.username,b[6]=w,b[7]=f):f=b[7];var x=f;b[8]!==g||b[9]!==j||b[10]!==e.id||b[11]!==x||b[12]!==h||b[13]!==s||b[14]!==r?(f=function(){g(j,e.id),j||x(),h===!1&&s(!0),r(!0)},b[8]=g,b[9]=j,b[10]=e.id,b[11]=x,b[12]=h,b[13]=s,b[14]=r,b[15]=f):f=b[15];f=f;var y;b[16]===Symbol["for"]("react.memo_cache_sentinel")?(y="_aauc",b[16]=y):y=b[16];var z;b[17]!==a||b[18]!==t||b[19]!==e?(z=a?k.jsx(q,{collectionName:e.name,coverMedia:c("nullthrows")(t)}):null,b[17]=a,b[18]=t,b[19]=e,b[20]=z):z=b[20];b[21]!==z?(a=k.jsx("div",{className:y,children:k.jsx(c("IGDSBox.react"),{color:"secondaryBackground",height:m,position:"relative",shape:"square",width:m,children:z})}),b[21]=z,b[22]=a):a=b[22];b[23]!==j||b[24]!==e.name?(y=j?k.jsx(c("IGDSText.react").Section,{maxLines:1,zeroMargin:!0,children:e.name}):k.jsx(c("IGDSText.react").Label,{maxLines:1,zeroMargin:!0,children:e.name}),b[23]=j,b[24]=e.name,b[25]=y):y=b[25];b[26]!==y?(z=k.jsx(c("IGDSBox.react"),{marginStart:2,maxWidth:n,position:"relative",children:y}),b[26]=y,b[27]=z):z=b[27];b[28]!==a||b[29]!==z?(y=k.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",height:o,paddingX:4,position:"relative",children:[a,z]}),b[28]=a,b[29]=z,b[30]=y):y=b[30];b[31]!==f||b[32]!==y?(a=k.jsx(c("CometPressable.react"),{onPress:f,children:y}),b[31]=f,b[32]=y,b[33]=a):a=b[33];return a}g.LIST_ITEM_HEIGHT=o;g.savedToCollectionText=p;g.SavedCollectionPickerListItem=a}),226);
__d("PolarisSavedCollectionPicker.react",["FBLogger","IGDSBox.react","IGDSDivider.react","IGDSSpinner.react","PolarisIGCoreAnchoredPopoverContentContainer.react","PolarisIGVirtualList.react","PolarisPostActionRequestSavedCollectionsForPost","PolarisReactRedux.react","PolarisSavedCollectionPickerListHeader.react","PolarisSavedCollectionPickerListItem.react","PolarisSavedPostsActionRequestNextSavedCollections","PolarisSavedPostsTypes","PolarisScrollWatchedComponent.react","PolarisScrollableContainer.react","polarisCollectionsLoading","polarisSavedPostsSelectors","react","usePolarisHoverCardDelay","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useEffect,k=b.unstable_useMemoCache,l={x:1,y:2},m=280,n=264,o=4,p=47;function q(a){return a.moreAvailable&&!a.isFetching}function r(a,b){q(a)&&b()}function a(a){var b=k(31),e=a.collectionsPostSavedTo,f=a.hidePopover,g=a.onSaveMedia,h=a.onSaveMediaToCollection,s=a.postId,t=a.postIsSaved,u=a.setHidePopover;a=a.setShowCreateCollectionModal;var v=d("PolarisReactRedux.react").useDispatch(),w=c("usePolarisViewer")();if(w==null)throw c("FBLogger")("ig_web").mustfixThrow("PolarisSavedCollectionPicker: viewer must exist");var x=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisSavedPostsSelectors").getSavedCollectionsPaginationForUser(a,w.id)}),y=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisSavedPostsSelectors").getAllSavedCollectionsForUser(a,w.id)}),z;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(z=function(a){return a.id!==d("PolarisSavedPostsTypes").SAVED_COLLECTION_TYPE.AUDIO_AUTO_COLLECTION&&a.id!==d("PolarisSavedPostsTypes").SAVED_COLLECTION_TYPE.ALL_MEDIA_AUTO_COLLECTION},b[0]=z):z=b[0];var A=y.filter(z);z=c("usePolarisHoverCardDelay")();var B=z.handleMouseLeave;z=z.hoverDelayShow;y=d("polarisCollectionsLoading").collectionsLoading(y,x)||e==null;var C;b[1]!==s?(C=function(){return d("PolarisPostActionRequestSavedCollectionsForPost").requestSavedCollectionsForPost({postId:s})},b[1]=s,b[2]=C):C=b[2];var D=C;C=Math.min((A.length+1)*d("PolarisSavedCollectionPickerListItem.react").LIST_ITEM_HEIGHT,m);var E=function(a){a=a.index;if(a===A.length)return i.jsx(c("IGDSBox.react"),{alignItems:"center",height:d("PolarisSavedCollectionPickerListItem.react").LIST_ITEM_HEIGHT,justifyContent:"center",paddingY:2,position:"relative",children:x.isFetching&&x.moreAvailable&&i.jsx(c("IGDSSpinner.react"),{size:"medium"})},"spinner");a=A[a];var b=t&&a.id===d("PolarisSavedPostsTypes").SAVED_COLLECTION_TYPE.ALL_MEDIA_AUTO_COLLECTION;b=b||((b=e==null?void 0:e.includes(a.id))!=null?b:!1);return i.jsx(d("PolarisSavedCollectionPickerListItem.react").SavedCollectionPickerListItem,{collection:a,onSaveMedia:g,onSaveMediaToCollection:h,postId:s,postIsSaved:t,postIsSavedToCollection:b,setHidePopover:u},a.id)},F=function(){return A.length+(x.moreAvailable?1:0)},G,H;b[3]!==e||b[4]!==v||b[5]!==D?(G=function(){e==null&&v(D())},H=[e,v,D],b[3]=e,b[4]=v,b[5]=D,b[6]=G,b[7]=H):(G=b[6],H=b[7]);j(G,H);b[8]!==f||b[9]!==B?(G=function(){f&&B()},H=[B,f],b[8]=f,b[9]=B,b[10]=G,b[11]=H):(G=b[10],H=b[11]);j(G,H);if(z===!1||f)return null;b[12]===Symbol["for"]("react.memo_cache_sentinel")?(G=function(a){return a.stopPropagation()},b[12]=G):G=b[12];b[13]!==u||b[14]!==a?(H=i.jsx(c("PolarisSavedCollectionPickerListHeader.react"),{headerMinHeight:p,setHidePopover:u,setShowCreateCollectionModal:a}),b[13]=u,b[14]=a,b[15]=H):H=b[15];b[16]!==y||b[17]!==C||b[18]!==F||b[19]!==E||b[20]!==x||b[21]!==v||b[22]!==w?(z=y?i.jsx(c("IGDSBox.react"),{alignItems:"center",height:C-p,justifyContent:"center",position:"relative",width:n,children:i.jsx(c("IGDSSpinner.react"),{size:"medium"})}):i.jsxs(c("IGDSBox.react"),{position:"relative",children:[i.jsx(c("IGDSDivider.react"),{}),i.jsxs(d("PolarisScrollableContainer.react").ScrollableContainer,{children:[i.jsx(c("PolarisIGVirtualList.react"),{containerSize:C-d("PolarisSavedCollectionPickerListItem.react").LIST_ITEM_HEIGHT,estimatedItemSize:d("PolarisSavedCollectionPickerListItem.react").LIST_ITEM_HEIGHT,itemCount:F(),overscanCount:o,renderer:function(a){return E(a)}}),q(x)&&i.jsx(c("PolarisScrollWatchedComponent.react"),{boundScaleFactor:l,onScrollEnter:function(){return r(x,function(){return v(d("PolarisSavedPostsActionRequestNextSavedCollections").requestNextSavedCollections(w.id))})}})]})]}),b[16]=y,b[17]=C,b[18]=F,b[19]=E,b[20]=x,b[21]=v,b[22]=w,b[23]=z):z=b[23];b[24]!==C||b[25]!==H||b[26]!==z?(a=i.jsxs(c("IGDSBox.react"),{height:C,overflow:"hidden",position:"relative",width:n,children:[H,z]}),b[24]=C,b[25]=H,b[26]=z,b[27]=a):a=b[27];b[28]!==C||b[29]!==a?(y=i.jsx("div",{onWheel:G,children:i.jsx(c("PolarisIGCoreAnchoredPopoverContentContainer.react"),{height:C,isVisible:!0,width:n,children:a})}),b[28]=C,b[29]=a,b[30]=y):y=b[30];return y}g["default"]=a}),98);
__d("PolarisLoadingSheet.react",["IGDSBox.react","IGDSSpinner.react","PolarisIGCoreSheetOrModal","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(){var a=i(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsx(d("PolarisIGCoreSheetOrModal").IGCoreSheetOrModal,{children:j.jsx(c("IGDSBox.react"),{alignItems:"center",paddingY:8,position:"relative",children:j.jsx(c("IGDSSpinner.react"),{})})}),a[0]=b):b=a[0];return b}g["default"]=a}),98);
__d("PolarisPostModalEntrypointLazy.react",["CometPlaceholder.react","CometRelay","FBLogger","IGRouter.react","JSResourceForInteraction","PolarisErrorBoundary.react","PolarisPostModalEntrypointLazyComponent_media.graphql","PolarisPostModalEntrypointLazy_media.graphql","hero-tracing","lazyLoadComponent","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||(j=d("react"))).unstable_useMemoCache,l=j;e=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastAboutThisAccountModal.react").__setRef("PolarisPostModalEntrypointLazy.react"));f=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastAboutThisAccountModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react"));var m=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastAdRemovalErrorModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),n=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastAdRemovedModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),o=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastAdRemovedModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),p=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastCopyModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),q=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastCopyModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),r=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastDeleteModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),s=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastDeleteModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),t=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastEmbedModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),u=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastEmbedModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),v=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFavoritesModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),w=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastHideAdModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),x=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastHideAdModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),y=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastLoadingModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),z=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastOptionsModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),A=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastOptionsModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),B=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastReportModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),C=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastReportModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),D=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastReportAdModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),E=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastReportAdModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),F=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastShareSheet.react").__setRef("PolarisPostModalEntrypointLazy.react")),G=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastShareSheet.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),H=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastTaggedModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),I=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastTaggedModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),J=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastTagOptionsModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),K=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastTagOptionsModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),L=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastUnfollowModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),M=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastUnfollowModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),N=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastViewAccountModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),O=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastViewAccountModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),P=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastAdDebugToolModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),Q=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastAdDebugToolModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),R=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastWAISTModal.react").__setRef("PolarisPostModalEntrypointLazy.react")),S=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisPostFastWAISTModal.next.react").__setRef("PolarisPostModalEntrypointLazy.react")),T=new Map([["aboutThisAccount",e],["copy",p],["delete",r],["embed",t],["hideAd",w],["options",z],["removeAd",n],["report",B],["reportAd",D],["share",F],["tagged",H],["tagOptions",J],["unfollow",L],["viewAccount",N],["viewAdDebugTool",P],["whyAmISeeingThisAd",R]]),U=new Map([["aboutThisAccount",f],["copy",q],["delete",s],["embed",u],["hideAd",x],["optionsV2",A],["removeAd",o],["report",C],["reportAd",E],["share",G],["tagged",I],["tagOptions",K],["unfollow",M],["viewAccount",O],["viewAdDebugTool",Q],["whyAmISeeingThisAd",S]]),V=new Map([["favorites",v],["loading",y],["removeAdError",m]]);function a(a){var e,f=k(13),g=a.interactionUUID,i=a.media,j=a.location,m=a.onClose,n=a.openModal;a=a.post;i=d("CometRelay").useFragment(h!==void 0?h:h=b("PolarisPostModalEntrypointLazy_media.graphql"),i);e=(e=i==null?void 0:i.pk)!=null?e:a==null?void 0:a.id;if(e==null)throw c("FBLogger")("instagram_web").mustfixThrow("Both media fragment and post cannot be null");var o="PostModalEntrypoint: Open "+n+" Modal";e=n+"-"+e;var p;f[0]!==j||f[1]!==i||f[2]!==m||f[3]!==n||f[4]!==a?(p=l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(W,{location:j,media:i,onClose:m,openModal:n,post:a})}),f[0]=j,f[1]=i,f[2]=m,f[3]=n,f[4]=a,f[5]=p):p=f[5];f[6]!==e||f[7]!==p?(j=l.jsx(c("PolarisErrorBoundary.react"),{children:p},e),f[6]=e,f[7]=p,f[8]=j):j=f[8];f[9]!==o||f[10]!==g||f[11]!==j?(i=l.jsx(d("hero-tracing").HeroInteraction,{interactionDesc:o,interactionUUID:g,children:j}),f[9]=o,f[10]=g,f[11]=j,f[12]=i):i=f[12];return i}function W(a){var e=k(18),f=a.media,g=a.location,h=a.onClose,j=a.openModal;a=a.post;f=d("CometRelay").useFragment(i!==void 0?i:i=b("PolarisPostModalEntrypointLazyComponent_media.graphql"),f);var m;e[0]!==j?(m=V.get(j),e[0]=j,e[1]=m):m=e[1];m=m;if(m){var n;e[2]!==m||e[3]!==h?(n=l.jsx(m,{onClose:h}),e[2]=m,e[3]=h,e[4]=n):n=e[4];return n}e[5]!==j?(m=U.get(j),e[5]=j,e[6]=m):m=e[6];n=m;if(n&&f){e[7]!==n||e[8]!==f||e[9]!==h?(m=l.jsx(n,{media:f,onClose:h}),e[7]=n,e[8]=f,e[9]=h,e[10]=m):m=e[10];return m}e[11]!==j?(n=T.get(j),e[11]=j,e[12]=n):n=e[12];f=n;if(!f||a==null)throw c("FBLogger")("instagram_web").mustfixThrow('Failed to find a modal for "%s"',j);e[13]!==f||e[14]!==g||e[15]!==h||e[16]!==a?(m=l.jsx(f,{location:g,onClose:h,post:a}),e[13]=f,e[14]=g,e[15]=h,e[16]=a,e[17]=m):m=e[17];return m}e=d("IGRouter.react").withIGRouter(a);g["default"]=e}),98);
__d("PolarisPostModalContext.react",["CometPlaceholder.react","CometRelay","InteractionTracing","PolarisLoadingModal.react","PolarisLoadingSheet.react","PolarisPostModalContextImpl_media.graphql","PolarisPostModalEntrypointLazy.react","PolarisUA","emptyFunction","qpl","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i,l=k.createContext,m=k.useContext;k.useMemo;var n=k.useState,o=k.unstable_useMemoCache;function p(a){if(d("PolarisUA").isMobile())return null;switch(a){case"share":return j.jsx(c("PolarisLoadingSheet.react"),{});default:return j.jsx(c("PolarisLoadingModal.react"),{})}}var q=l({openModal:null,setOpenModal:null});function a(a){var e=o(12),f=a.children,g=a.media$key;a=a.post;g=d("CometRelay").useFragment(h!==void 0?h:h=b("PolarisPostModalContextImpl_media.graphql"),g);var i=n(null),k=i[0],l=i[1];i=n(null);var r=i[0],s=i[1];e[0]===Symbol["for"]("react.memo_cache_sentinel")?(i=function(a){a!=null&&l(c("InteractionTracing").startInteraction({interactionClass:"fluid",qplEvent:c("qpl")._(27465367,"758"),tracePolicy:"polaris.post_fast."+a.toLowerCase(),traceType:"INTERACTION"})),s(a)},e[0]=i):i=e[0];var t=i;e[1]!==r?(i={openModal:r,setOpenModal:t},e[1]=r,e[2]=i):i=e[2];i=i;i=i;var u=!!m(q).setOpenModal;if(u)return f;e[3]!==r||e[4]!==k||e[5]!==g||e[6]!==a?(u=r&&j.jsx(c("CometPlaceholder.react"),{fallback:p(r),children:j.jsx(c("PolarisPostModalEntrypointLazy.react"),{interactionUUID:k,media:g,onClose:function(){return t(null)},openModal:r,post:a})}),e[3]=r,e[4]=k,e[5]=g,e[6]=a,e[7]=u):u=e[7];e[8]!==i||e[9]!==f||e[10]!==u?(r=j.jsxs(q.Provider,{value:i,children:[f,u]}),e[8]=i,e[9]=f,e[10]=u,e[11]=r):r=e[11];return r}function e(){return m(q).setOpenModal||c("emptyFunction")}function f(){return m(q).openModal}g.PostModalContext=a;g.useSetPostModal=e;g.useCurrentlyOpenModal=f}),98);
__d("usePolarisPost",["PolarisReactRedux.react","nullthrows","polarisPostSelectors","polarisUserSelectors","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).unstable_useMemoCache;function a(a,b){var c=i(3),e;c[0]!==a||c[1]!==b?(e=function(c){c=d("polarisPostSelectors").getPostById(c,a);return b(c)},c[0]=a,c[1]=b,c[2]=e):e=c[2];return d("PolarisReactRedux.react").useSelector(e)}function b(a,b){var e=i(3),f;e[0]!==a||e[1]!==b?(f=function(e){var f=d("polarisPostSelectors").getPostById(e,a);e=d("polarisUserSelectors").getUserByIdOrThrows(e,c("nullthrows")((e=f.owner)==null?void 0:e.id));return b(f,e)},e[0]=a,e[1]=b,e[2]=f):f=e[2];return d("PolarisReactRedux.react").useSelector(f)}g.usePost=a;g.usePostAndOwner=b}),98);
__d("usePolarisTrackingDataURLParams",["PolarisTrackingCodeContext","PolarisTrackingConstants","PolarisTrackingNodesContext","encodeTrackingNode","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.unstable_useMemoCache;function a(){var a=j(10),b=i(c("PolarisTrackingCodeContext")),e=i(c("PolarisTrackingNodesContext"));if(b.length===0||e.length===0){var f;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(f={},a[0]=f):f=a[0];return f}if(a[1]!==e){a[3]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(a){return c("encodeTrackingNode")(a.type)},a[3]=f):f=a[3];f=e.map(f).join("");a[1]=e;a[2]=f}else f=a[2];e=f;if(a[4]!==b){a[6]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(a){return(a=a==null?void 0:a.trackingToken)!=null?a:""},a[6]=f):f=a[6];f=b.map(f);a[4]=b;a[5]=f}else f=a[5];b=f;if(a[7]!==b||a[8]!==e){f=(f={},f[d("PolarisTrackingConstants").TRACKING_CODE_PARAM]=b,f[d("PolarisTrackingConstants").TRACKING_NODE_PARAM]=e,f);a[7]=b;a[8]=e;a[9]=f}else f=a[9];return f}g["default"]=a}),98);
__d("usePolarisOffsiteTrackingDataURLParams",["isPolarisAdLink","react","usePolarisTrackingDataURLParams"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).unstable_useMemoCache;function a(a){var b=i(1),d=c("usePolarisTrackingDataURLParams")();if(a==null||!c("isPolarisAdLink")(a)){b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a={},b[0]=a):a=b[0];return a}return d}g["default"]=a}),98);
__d("PolarisPostFooterCTA.react",["cx","IGDSBox.react","IGDSChevronIcon.react","PolarisAdsGatingHelpers","PolarisExternalLink.react","PolarisGenericStrings","PolarisIGCoreButton.react","PolarisIGCoreText","PolarisIGTheme.react","PolarisPostUtils","PolarisUA","isStringNullOrEmpty","react","usePolarisOffsiteTrackingDataURLParams"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).unstable_useMemoCache,k=i;b=k.forwardRef(a);function a(a,b){var e=j(74),f=a.ctaAdditionalAnimation,g=a.ctaDominantColor,h=a["data-testid"],i=a.disableAnimation,l=a.externalURL,m=a.forceBottomBorder,n=a.fullWidth,o=a.height,p=a.icon,q=a.isActive,r=a.isForAd,s=a.isForPersistentCta,t=a.isForSidecar,u=a.onClick,v=a.secondaryText,w=a.showChevron,x=a.showRoundedBorder,y=a.text,z=a.textAlign;a=a.textThemedColor;f=f===void 0?d("PolarisPostUtils").PostFooterCTAAnimationStyle.NONE:f;w=w===void 0?!1:w;x=x===void 0?!1:x;z=z===void 0?"center":z;var A=d("PolarisIGTheme.react").useTheme(),B=g!=null&&d("PolarisAdsGatingHelpers").allowWebAds(),C;e[0]!==p?(C=p!=null?k.jsxs(k.Fragment,{children:[k.jsx(c("IGDSBox.react"),{"data-testid":void 0,flex:"none",position:"relative",children:p}),k.jsx(c("IGDSBox.react"),{marginEnd:3,position:"relative"})]}):null,e[0]=p,e[1]=C):C=e[1];p=C;C=B?k.jsx("span",{className:"x9bdzbf",children:y}):k.jsx(k.Fragment,{children:y});y=B?"web-always-white":(y=a)!=null?y:"ig-primary-text";var D;e[2]!==w||e[3]!==y?(D=w?k.jsxs(k.Fragment,{children:[k.jsx(c("IGDSBox.react"),{flex:"grow",height:"100%",marginEnd:7,position:"relative",right:!0}),k.jsx(c("IGDSChevronIcon.react"),{alt:d("PolarisGenericStrings").RIGHT_CHEVRON,color:y,"data-testid":void 0,direction:"next",size:16})]}):null,e[2]=w,e[3]=y,e[4]=D):D=e[4];w=D;y=A.getTheme()===d("PolarisIGTheme.react").IGTheme.Dark?a==null?void 0:a.dark:a==null?void 0:a.light;if(y!=null){e[5]!==y?(D={color:y},e[5]=y,e[6]=D):D=e[6];e[7]!==D||e[8]!==C?(A=k.jsx("span",{style:D,children:C}),e[7]=D,e[8]=C,e[9]=A):A=e[9];C=A}a=null;if(!c("isStringNullOrEmpty")(v)){e[10]!==z||e[11]!==v?(y=k.jsx(c("IGDSBox.react"),{marginTop:2,position:"relative",children:k.jsx(c("PolarisIGCoreText").Body2,{color:"ig-secondary-text",textAlign:z,children:v})}),e[10]=z,e[11]=v,e[12]=y):y=e[12];a=y}D="_aarz"+(q&&!s?" _aar-":"")+(s?" _alv8":"")+(i?"":" _aar_")+(B?" _aceq":"");e[13]!==B||e[14]!==g?(A=B?{background:g}:null,e[13]=B,e[14]=g,e[15]=A):A=e[15];e[16]!==z||e[17]!==C?(v=k.jsx(c("PolarisIGCoreText"),{size:"body",textAlign:z,weight:"semibold",children:C}),e[16]=z,e[17]=C,e[18]=v):v=e[18];e[19]!==v||e[20]!==a?(y=k.jsxs(c("IGDSBox.react"),{flex:"shrink",position:"relative",children:[v,a]}),e[19]=v,e[20]=a,e[21]=y):y=e[21];e[22]!==p||e[23]!==y||e[24]!==w?(i=k.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",justifyContent:"start",position:"relative",width:"100%",children:[p,y,w]}),e[22]=p,e[23]=y,e[24]=w,e[25]=i):i=e[25];e[26]!==D||e[27]!==A||e[28]!==i?(g=k.jsx("div",{className:D,"data-testid":void 0,style:A,children:i}),e[26]=D,e[27]=A,e[28]=i,e[29]=g):g=e[29];z=g;C=c("usePolarisOffsiteTrackingDataURLParams")(l);if(l!=null){e[30]===Symbol["for"]("react.memo_cache_sentinel")?(v="_ad63",e[30]=v):v=e[30];e[31]!==l||e[32]!==u||e[33]!==C||e[34]!==z?(a=k.jsx(c("PolarisExternalLink.react"),{className:v,"data-testid":void 0,href:l,onClick:u,queryParams:C,children:z}),e[31]=l,e[32]=u,e[33]=C,e[34]=z,e[35]=a):a=e[35];z=a}else if(u!=null){e[36]===Symbol["for"]("react.memo_cache_sentinel")?(p={__className:"_ad63"},e[36]=p):p=e[36];e[37]!==u?(y=function(){return u()},e[37]=u,e[38]=y):y=e[38];e[39]!==y||e[40]!==z?(w=k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,dangerouslySetClassName:p,onClick:y,children:z}),e[39]=y,e[40]=z,e[41]=w):w=e[41];z=w}D=t!==!0&&r!==!0;if(e[42]!==m||e[43]!==t||e[44]!==n||e[45]!==B||e[46]!==x||e[47]!==s||e[48]!==f||e[49]!==q){A=d("PolarisUA").isDesktop();e[52]!==m||e[53]!==A?(i=(m===!0||d("PolarisUA").isMobile())&&!A,e[52]=m,e[53]=A,e[54]=i):i=e[54];g=i;v="_aart"+(q?" _aaru":"")+(s?" _alv9":"")+(t===!0?" _aarv":"")+(n===!0?" _aarw":"")+(n===!0&&m===!0?" _aarx":"")+(A&&!B?" _ai7q":"")+(x?" _alva":"")+(x&&!s?" _aikk":"")+(f===d("PolarisPostUtils").PostFooterCTAAnimationStyle.POP_IN?" _alwd":"")+(f===d("PolarisPostUtils").PostFooterCTAAnimationStyle.SLIDE_UP?" _al_y":"");e[42]=m;e[43]=t;e[44]=n;e[45]=B;e[46]=x;e[47]=s;e[48]=f;e[49]=q;e[50]=g;e[51]=v}else g=e[50],v=e[51];e[55]!==o?(l=o!=null?{height:o+"px"}:{},e[55]=o,e[56]=l):l=e[56];C=q&&D;e[57]!==C?(a=C?"_aary":"",e[57]=C,e[58]=a):a=e[58];e[59]!==a?(p=k.jsx("div",{className:a}),e[59]=a,e[60]=p):p=e[60];e[61]!==g||e[62]!==m||e[63]!==n||e[64]!==q?(y=g&&k.jsx("div",{className:"_aas0"+(m===!0&&n===!0?" _aas1":""),children:k.jsx("div",{className:q?"_aary":""})}),e[61]=g,e[62]=m,e[63]=n,e[64]=q,e[65]=y):y=e[65];e[66]!==v||e[67]!==h||e[68]!==b||e[69]!==l||e[70]!==p||e[71]!==z||e[72]!==y?(w=k.jsxs("div",{className:v,"data-testid":void 0,ref:b,style:l,children:[p,z,y]}),e[66]=v,e[67]=h,e[68]=b,e[69]=l,e[70]=p,e[71]=z,e[72]=y,e[73]=w):w=e[73];return w}e=b;g["default"]=e}),98);
__d("PolarisPostMediaOverlayInfoFooterCTA.react",["fbt","CometPlaceholder.react","IGDSInfoPanoOutlineIcon.react","JSResourceForInteraction","PolarisAssetManagerGlyphMapping","PolarisIGCoreIcon.react","PolarisInstagramMediaOverlayFalcoEvent","PolarisMediaOverlayInfoTypes","PolarisMisinformationConstants","PolarisPostFooterCTA.react","lazyLoadComponent","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useMemo,m=b.useRef,n=b.useState,o=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGWebBloksApp").__setRef("PolarisPostMediaOverlayInfoFooterCTA.react"));function p(a,b){var c=a.analyticsContext,e=a.bannerInfo,f=a.entityID,g=e.bannerButton,h=e.overlayLayout,i=e.overlayType;d("PolarisInstagramMediaOverlayFalcoEvent").PolarisInstagramMediaOverlayFalcoEvent.log(function(){return d("PolarisInstagramMediaOverlayFalcoEvent").PolarisInstagramMediaOverlayFalcoEvent.buildPayloadForLog({button:g,containerModule:d("PolarisInstagramMediaOverlayFalcoEvent").PolarisInstagramMediaOverlayFalcoEvent.getLoggableContainerModuleFromAnalyticsContext(c),entityID:f,event:b,overlayLayout:h,overlayType:i})})}function q(a){var b=a.entityID,c=a.onLoggedImpression;p(a,d("PolarisInstagramMediaOverlayFalcoEvent").IG_MEDIA_OVERLAY_FALCO_CLIENT_EVENTS.IMPRESSION);c!=null&&c(b)}function r(a){p(a,d("PolarisInstagramMediaOverlayFalcoEvent").IG_MEDIA_OVERLAY_FALCO_CLIENT_EVENTS.ACTION)}function s(a,b){r(a),b()}function t(a){a=a.bannerInfo;var b=a.bannerButton,e=a.iconAltText;a=a.iconGlyph;b=b.text_color;e=e!=null?h._("__JHASH__tZoHuCBQNgF__JHASH__",[h._param("text",e)]):d("PolarisMisinformationConstants").POST_FOOTER_CTA_ALT_TEXT;if(a===d("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_ICON_GLYPHS.INFO)return j.jsx(c("IGDSInfoPanoOutlineIcon.react"),{alt:e,color:b!=null?b:"ig-primary-icon",size:16});else if(a===d("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_ICON_GLYPHS.WARNING)return j.jsx(c("PolarisIGCoreIcon.react"),{alt:e,icon:d("PolarisAssetManagerGlyphMapping").ICONS.WARNING_OUTLINE_16_RED5});return null}function a(a,b){var e=n(!1),f=e[0],g=e[1];e=n(0);var h=e[0],i=e[1];e=a.bannerInfo;var m=a["data-testid"],p=a.disableImpressionLogging,r=a.entityID;m=a.forceBottomBorder;var v=a.fullWidth,w=a.isForSidecar,x=e.animationInfo,y=e.bannerButton;e=e.text;var z=x.canAnimateSlideIn,A=x.isHidden;x=y.action;var B=y.action_url,C=y.has_chevron,D=y.is_text_centered,E=y.secondary_text;y=y.text_color;var F=x===d("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_BUTTON_ACTIONS.OPEN_EXTERNAL_URL?B:void 0,G=u(a),H=G!==r;k(function(){(H||f===!1)&&p!==!0&&A!==!0?(q(a),g(!0)):H&&g(!1)},[p,A,H,f,a,g]);G=x!==d("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_BUTTON_ACTIONS.NO_OP?function(){return s(a,function(){return i(h+1)})}:void 0;var I=function(){i(0)},J=l(function(){return{media_id:r,module:a.analyticsContext||""}},[r,a.analyticsContext]);return j.jsxs(j.Fragment,{children:[j.jsx(c("PolarisPostFooterCTA.react"),{"data-testid":void 0,disableAnimation:!z,externalURL:F,forceBottomBorder:m,fullWidth:v,icon:t(a),isActive:!A,isForSidecar:w,onClick:G,ref:b,secondaryText:E,showChevron:(z=C)!=null?z:!1,text:e,textAlign:D===!0?"center":"left",textThemedColor:y}),x===d("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_BUTTON_ACTIONS.OPEN_BLOKS_APP&&h>0&&B!=null&&j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(o,{appId:B,bridgeOverrides_DEPRECATED:{onResumeStoryPlayback:I},params:J},h)})]})}a.displayName=a.name+" [from "+f.id+"]";function u(a){var b=a.entityID,c=m();k(function(){c.current=b});return c.current}e=j.forwardRef(a);g["default"]=e}),226);
__d("usePolarisShowFooterCTA",["PolarisPostUtils","polarisGetPostFromGraphMediaInterface","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo;function a(a,b,c,e){return i(function(){if(e===!0)return null;if(a==null)return null;var f=a.isSidecar,g=null,h=null;if(f===!0){var i=d("PolarisPostUtils").getCurrentSidecarItemFromPost(a,b);i!=null&&(h=d("polarisGetPostFromGraphMediaInterface").getMediaOverlayBottomBannerInfoFromSidecarChild(i,c[i.id]===!0),h!=null&&(g=i))}g==null&&(h=d("polarisGetPostFromGraphMediaInterface").getMediaOverlayBottomBannerInfoFromRootPost(a,c[a.id]===!0),h!=null&&(g=a));return g==null||h==null?null:{bottomBannerInfo:h,isParentPostSidecar:f,itemWithBanner:g}},[b,c,e,a])}g["default"]=a}),98);
__d("PolarisPostOverlayInfoFooterCTA.react",["PolarisPostMediaOverlayInfoFooterCTA.react","react","usePolarisShowFooterCTA"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function k(a){var b=i(8),d=a.analyticsContext,e=a.bottomBannerInfo,f=a.dynamicFooterRef,g=a.idsWithDisabledMediaOverlayInfoImpressionLogging,h=a.isParentPostSidecar,k=a.itemWithBannerID;a=a.onLogOverlayImpression;var l=e.hasMediaCover;l=l||g[k]===!0;b[0]!==d||b[1]!==e||b[2]!==l||b[3]!==k||b[4]!==h||b[5]!==a||b[6]!==f?(g=j.jsx(c("PolarisPostMediaOverlayInfoFooterCTA.react"),{analyticsContext:d,bannerInfo:e,"data-testid":void 0,disableImpressionLogging:l,entityID:k,isForSidecar:h,onLoggedImpression:a,ref:f}),b[0]=d,b[1]=e,b[2]=l,b[3]=k,b[4]=h,b[5]=a,b[6]=f,b[7]=g):g=b[7];return g}function a(a){var b=i(8),d,e,f,g;b[0]!==a?(e=a.currentSidecarIndex,f=a.idsWithClearedBlurOverlays,d=a.rootPost,g=babelHelpers.objectWithoutPropertiesLoose(a,["currentSidecarIndex","idsWithClearedBlurOverlays","rootPost"]),b[0]=a,b[1]=d,b[2]=e,b[3]=f,b[4]=g):(d=b[1],e=b[2],f=b[3],g=b[4]);a=c("usePolarisShowFooterCTA")(d,e,f);b[5]!==a||b[6]!==g?(d=a!=null?j.jsx(k,babelHelpers["extends"]({bottomBannerInfo:a.bottomBannerInfo,isParentPostSidecar:a.isParentPostSidecar,itemWithBannerID:a.itemWithBanner.id},g)):null,b[5]=a,b[6]=g,b[7]=d):d=b[7];return d}g.PolarisPostOverlayInfoFooterCTARenderer=k;g.PolarisPostOverlayInfoFooterCTA=a}),98);
__d("InstagramVideoViewabilityChangedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4670");b=d("FalcoLoggerInternal").create("instagram_video_viewability_changed",a);e=b;g["default"]=e}),98);
__d("VideoAudioDisabledFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4847");b=d("FalcoLoggerInternal").create("video_audio_disabled",a);e=b;g["default"]=e}),98);
__d("VideoAudioEnabledFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4848");b=d("FalcoLoggerInternal").create("video_audio_enabled",a);e=b;g["default"]=e}),98);
__d("VideoBufferingFinishedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4849");b=d("FalcoLoggerInternal").create("video_buffering_finished",a);e=b;g["default"]=e}),98);
__d("VideoBufferingStartedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4850");b=d("FalcoLoggerInternal").create("video_buffering_started",a);e=b;g["default"]=e}),98);
__d("VideoExitedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4672");b=d("FalcoLoggerInternal").create("video_exited",a);e=b;g["default"]=e}),98);
__d("VideoFullViewedTimeFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4887");b=d("FalcoLoggerInternal").create("video_full_viewed_time",a);e=b;g["default"]=e}),98);
__d("VideoPausedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1206");b=d("FalcoLoggerInternal").create("video_paused",a);e=b;g["default"]=e}),98);
__d("VideoShouldStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1207");b=d("FalcoLoggerInternal").create("video_should_start",a);e=b;g["default"]=e}),98);
__d("VideoStartedPlayingFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1208");b=d("FalcoLoggerInternal").create("video_started_playing",a);e=b;g["default"]=e}),98);
__d("VideoViewedTimeFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4678");b=d("FalcoLoggerInternal").create("video_viewed_time",a);e=b;g["default"]=e}),98);
__d("PolarisVideoFalcoLogger",["InstagramVideoViewabilityChangedFalcoEvent","PolarisNavChain","PolarisVideoLogger","VideoAudioDisabledFalcoEvent","VideoAudioEnabledFalcoEvent","VideoBufferingFinishedFalcoEvent","VideoBufferingStartedFalcoEvent","VideoExitedFalcoEvent","VideoFullViewedTimeFalcoEvent","VideoPausedFalcoEvent","VideoShouldStartFalcoEvent","VideoStartedPlayingFalcoEvent","VideoViewedTimeFalcoEvent","polarisUnexpected"],(function(a,b,c,d,e,f,g){"use strict";e=[(b=d("PolarisVideoLogger")).VIDEO_EVENTS.shouldStart,b.VIDEO_EVENTS.paused,b.VIDEO_EVENTS.exited,b.VIDEO_EVENTS.audioEnabled,b.VIDEO_EVENTS.audioDisabled,b.VIDEO_EVENTS.bufferingStarted,b.VIDEO_EVENTS.bufferingFinished,b.VIDEO_EVENTS.startedPlaying,b.VIDEO_EVENTS.fullViewedTime,b.VIDEO_EVENTS.viewedTime,b.VIDEO_EVENTS.viewabilityChanged];function a(b,e,a){switch(b){case d("PolarisVideoLogger").VIDEO_EVENTS.shouldStart:h(e,a);break;case d("PolarisVideoLogger").VIDEO_EVENTS.paused:i(e,a);break;case d("PolarisVideoLogger").VIDEO_EVENTS.exited:j(e,a);break;case d("PolarisVideoLogger").VIDEO_EVENTS.audioEnabled:k(e,a);break;case d("PolarisVideoLogger").VIDEO_EVENTS.audioDisabled:l(e,a);break;case d("PolarisVideoLogger").VIDEO_EVENTS.bufferingStarted:m(e,a);break;case d("PolarisVideoLogger").VIDEO_EVENTS.bufferingFinished:n(e,a);break;case d("PolarisVideoLogger").VIDEO_EVENTS.startedPlaying:o(e,a);break;case d("PolarisVideoLogger").VIDEO_EVENTS.fullViewedTime:p(e,a);break;case d("PolarisVideoLogger").VIDEO_EVENTS.viewedTime:q(e,a);break;case d("PolarisVideoLogger").VIDEO_EVENTS.viewabilityChanged:r(e,a);break;default:c("polarisUnexpected")("Video: logging an unsupported video falco event using WWW Falco")}}function h(b,a){var d=b.a_i,e=b.a_pk,g=b.carousel_media_id,h=b.m_pk,i=b.pk,j=b.playback_format,k=b.reason,l=b.seq_num,m=b.time,n=b.time_spent_id;b=b.tracking_token;var o=babelHelpers["extends"]({reason:k,seq_num:l.toString(),time:m==null?null:Number(m)},s(g,h),{pk:i,a_i:d,a_pk:e,nav_chain:(k=c("PolarisNavChain").getInstance())==null?void 0:k.getNavChainForSend(),tracking_token:b,playback_format:j,time_spent_id:n,pigeon_reserved_keyword_module:a});c("VideoShouldStartFalcoEvent").log(function(){return o})}function i(b,a){var d=b.a_i,e=b.a_pk,g=b.carousel_media_id,h=b.duration,i=b.is_dash_eligible,j=b.loop_count,k=b.lsp,l=b.m_pk,m=b.pk,n=b.playback_format,o=b.playing_audio,p=b.seq_num,q=b.time,r=b.time_spent_id,t=b.tracking_token;b=b.video_width;var u=babelHelpers["extends"]({seq_num:p.toString(),time:Number(q)},s(g,l),{pk:m,a_i:d,a_pk:e,nav_chain:(p=c("PolarisNavChain").getInstance())==null?void 0:p.getNavChainForSend(),tracking_token:t,playback_format:n,time_spent_id:r,pigeon_reserved_keyword_module:a,is_dash_eligible:Boolean(i),video_width:String(b),playing_audio:Boolean(o),loop_count:Number(j),lsp:Number(k),duration:Number(h)});c("VideoPausedFalcoEvent").log(function(){return u})}function j(b,a){var d=b.a_i,e=b.a_pk,g=b.carousel_media_id,h=b.duration,i=b.is_dash_eligible,j=b.loop_count,k=b.lsp,l=b.m_pk,m=b.pk,n=b.playback_format,o=b.playing_audio,p=b.seq_num,q=b.time,r=b.time_spent_id,t=b.tracking_token;b=b.video_width;var u=babelHelpers["extends"]({seq_num:p.toString(),time:Number(q)},s(g,l),{pk:m,a_i:d,a_pk:e,nav_chain:(p=c("PolarisNavChain").getInstance())==null?void 0:p.getNavChainForSend(),tracking_token:t,playback_format:n,time_spent_id:r,pigeon_reserved_keyword_module:a,is_dash_eligible:String(i),video_width:String(b),playing_audio:String(o),loop_count:String(j),lsp:Number(k),duration:Number(h)});c("VideoExitedFalcoEvent").log(function(){return u})}function k(b,a){var d=b.a_i,e=b.a_pk,g=b.carousel_media_id,h=b.duration,i=b.is_dash_eligible,j=b.loop_count,k=b.m_pk,l=b.pk,m=b.playback_format,n=b.seq_num,o=b.time,p=b.time_spent_id,q=b.tracking_token;b=b.video_width;var r=babelHelpers["extends"]({seq_num:n.toString(),time:Number(o)},s(g,k),{pk:l,a_i:d,a_pk:e,nav_chain:(n=c("PolarisNavChain").getInstance())==null?void 0:n.getNavChainForSend(),tracking_token:q,playback_format:m,time_spent_id:p,pigeon_reserved_keyword_module:a,is_dash_eligible:Boolean(i),video_width:String(b),loop_count:(o=j)!=null?o:0,duration:Number(h)});c("VideoAudioEnabledFalcoEvent").log(function(){return r})}function l(b,a){var d=b.a_i,e=b.a_pk,g=b.carousel_media_id,h=b.duration,i=b.is_dash_eligible,j=b.loop_count,k=b.m_pk,l=b.pk,m=b.playback_format,n=b.seq_num,o=b.time,p=b.time_spent_id,q=b.tracking_token;b=b.video_width;var r=babelHelpers["extends"]({seq_num:n.toString(),time:Number(o)},s(g,k),{pk:l,a_i:d,a_pk:e,nav_chain:(n=c("PolarisNavChain").getInstance())==null?void 0:n.getNavChainForSend(),tracking_token:q,playback_format:m,time_spent_id:p,pigeon_reserved_keyword_module:a,is_dash_eligible:String(i),video_width:String(b),loop_count:(o=j)!=null?o:0,duration:Number(h)});c("VideoAudioDisabledFalcoEvent").log(function(){return r})}function m(b,a){var d=b.a_i,e=b.a_pk,g=b.carousel_media_id,h=b.follow_status,i=b.is_dash_eligible,j=b.loop_count,k=b.m_pk,l=b.m_ts,m=b.pk,n=b.playback_format,o=b.playing_audio,p=b.radio_type,q=b.seq_num,r=b.time_spent_id,t=b.timeAsPercent,u=b.tracking_token;b=b.video_width;if(o==null)return;var v=babelHelpers["extends"]({seq_num:q.toString()},s(g,k),{pk:m,a_i:d,a_pk:e,nav_chain:(q=c("PolarisNavChain").getInstance())==null?void 0:q.getNavChainForSend(),tracking_token:u,playback_format:n,time_spent_id:r,pigeon_reserved_keyword_module:a,is_dash_eligible:String(i),video_width:b==null?void 0:b.toString(),loop_count:(g=j)!=null?g:0,follow_status:(k=h)!=null?k:"not_following",m_ts:l==null?void 0:l.toString(),playing_audio:o.toString(),radio_type:p,timeAsPercent:(m=t)!=null?m:0});c("VideoBufferingStartedFalcoEvent").log(function(){return v})}function n(b,a){var d=b.a_i,e=b.a_pk,g=b.carousel_media_id,h=b.follow_status,i=b.is_dash_eligible,j=b.loop_count,k=b.lsp,l=b.m_pk,m=b.m_ts,n=b.pk,o=b.playback_format,p=b.playing_audio,q=b.radio_type,r=b.seq_num,t=b.time_spent_id,u=b.timeAsPercent,v=b.tracking_token;b=b.video_width;var w=babelHelpers["extends"]({seq_num:r.toString()},s(g,l),{pk:n,a_i:d,a_pk:e,nav_chain:(r=c("PolarisNavChain").getInstance())==null?void 0:r.getNavChainForSend(),tracking_token:v,playback_format:o,time_spent_id:t,pigeon_reserved_keyword_module:a,is_dash_eligible:String(i),video_width:String(b),lsp:Number((g=k)!=null?g:0),loop_count:(l=j)!=null?l:0,follow_status:(n=h)!=null?n:"not_following",m_ts:String(m),playing_audio:String(p),radio_type:q,timeAsPercent:(d=u)!=null?d:0});c("VideoBufferingFinishedFalcoEvent").log(function(){return w})}function o(b,a){var d=b.a_i,e=b.a_pk,g=b.carousel_media_id,h=b.dropped_frame_count,i=b.is_dash_eligible,j=b.m_pk,k=b.pk,l=b.playback_format,m=b.reason,n=b.seq_num,o=b.start_delay,p=b.time,q=b.time_spent_id,r=b.total_frame_count,t=b.tracking_token;b=b.video_width;if(m==null)return;h=r!=null&&h!=null?babelHelpers["extends"]({dropped_frame_count:h==null?void 0:h.toString(),total_frame_count:r==null?void 0:r.toString(),video_width:b==null?void 0:b.toString()},s(g,j)):babelHelpers["extends"]({video_width:b==null?void 0:b.toString()},s(g,j));var u=babelHelpers["extends"]({reason:m,start_delay:o==null?null:Number(o),seq_num:n.toString(),time:p==null?null:Number(p)},h,{pk:k,a_i:d,a_pk:e,nav_chain:(r=c("PolarisNavChain").getInstance())==null?void 0:r.getNavChainForSend(),tracking_token:t,is_dash_eligible:i===1,playback_format:l,time_spent_id:q,pigeon_reserved_keyword_module:a});c("VideoStartedPlayingFalcoEvent").log(function(){return u})}function p(b,a){var d=b.a_i,e=b.a_pk,g=b.carousel_media_id,h=b.duration,i=b.is_dash_eligible,j=b.loop_count,k=b.lsp,l=b.m_pk,m=b.pk,n=b.playback_format,o=b.seq_num,p=b.time,q=b.time_spent_id,r=b.tracking_token;b=b.video_width;if(r==null||p==null)return;var t=babelHelpers["extends"]({duration:h==null?null:Number(h),lsp:Number((h=k)!=null?h:0),time:Number(p),loop_count:(k=j)!=null?k:0,seq_num:o.toString(),video_width:String(b)},s(g,l),{a_i:d,a_pk:e,nav_chain:(h=c("PolarisNavChain").getInstance())==null?void 0:h.getNavChainForSend(),pk:m,tracking_token:r,is_dash_eligible:String(i),playback_format:n,time_spent_id:q,pigeon_reserved_keyword_module:a});c("VideoFullViewedTimeFalcoEvent").log(function(){return t})}function q(b,a){var d=b.a_i,e=b.a_pk,g=b.carousel_media_id,h=b.duration,i=b.is_dash_eligible,j=b.loop_count,k=b.lsp,l=b.m_pk,m=b.pk,n=b.playback_format,o=b.seq_num,p=b.time,q=b.time_spent_id,r=b.tracking_token;b=b.video_width;if(r==null||p==null)return;var t=babelHelpers["extends"]({duration:h==null?null:Number(h),lsp:Number((h=k)!=null?h:0),time:Number(p),loop_count:(k=j)!=null?k:0,seq_num:o.toString(),video_width:String(b)},s(g,l),{a_i:d,a_pk:e,nav_chain:(h=c("PolarisNavChain").getInstance())==null?void 0:h.getNavChainForSend(),pk:m,tracking_token:r,is_dash_eligible:String(i),playback_format:n,time_spent_id:q,pigeon_reserved_keyword_module:a});c("VideoViewedTimeFalcoEvent").log(function(){return t})}function r(b,a){var d=b.a_i,e=b.a_pk,g=b.carousel_media_id,h=b.current_viewability_percentage,i=b.is_dash_eligible,j=b.m_pk,k=b.pk,l=b.playback_format,m=b.seq_num,n=b.time,o=b.time_spent_id,p=b.tracking_token,q=b.video_time_position;b=b.video_width;if(h==null)return;var r=babelHelpers["extends"]({current_viewability_percentage:h.toString(),seq_num:m.toString(),time:n==null?null:Number(n),video_time_position:q},s(g,j),{pk:k,a_i:d,a_pk:e,nav_chain:(h=c("PolarisNavChain").getInstance())==null?void 0:h.getNavChainForSend(),tracking_token:p,playback_format:l,time_spent_id:o,pigeon_reserved_keyword_module:a,is_dash_eligible:i.toString(),video_width:b==null?void 0:b.toString()});c("InstagramVideoViewabilityChangedFalcoEvent").log(function(){return r})}function s(a,b){return a==null?{m_pk:b}:{carousel_media_id:a,m_pk:b}}g.SUPPORTED_FALCO_EVENT_TYPES=e;g.logVideoFalcoEvent=a}),98);
__d("PolarisVideoLogger",["InstagramODS","PolarisAdsGatingHelpers","PolarisConfig","PolarisLogger","PolarisNavChain","PolarisPigeonLogger","PolarisVideoFalcoLogger","pageID","polarisUnexpected","qex"],(function(a,b,c,d,e,f,g){"use strict";e={audioDisabled:"video_audio_disabled",audioEnabled:"video_audio_enabled",bufferingFinished:"video_buffering_finished",bufferingStarted:"video_buffering_started",exited:"video_exited",failedPlaying:"video_failed_playing",formatChanged:"video_format_changed",fullViewedTime:"video_full_viewed_time",paused:"video_paused",playingUpdate:"video_playing_update",seek:"video_seek",shouldStart:"video_should_start",startedPlaying:"video_started_playing",viewabilityChanged:"instagram_video_viewability_changed",viewed:"video_viewed",viewedTime:"video_viewed_time"};function h(a){var b=a.carouselParentId,e=a.id,f=a.isAd,g=a.isDashEligible,h=a.ownerId,i=a.playbackFormat,j=a.trackingToken,k=babelHelpers.objectWithoutPropertiesLoose(a,["carouselParentId","id","isAd","isDashEligible","ownerId","playbackFormat","trackingToken"]);a=d("PolarisLogger").getExtra(a);a=a.ig_userid;h=h||"";e=e||"";b=b!=null?{carousel_media_id:e+"_"+h,m_pk:b+"_"+h}:{m_pk:e+"_"+h};return babelHelpers["extends"]({},k,b,{a_i:f===!0?"ad":"organic",a_pk:h,is_dash_eligible:g,nav_chain:(e=c("PolarisNavChain").getInstance())==null?void 0:e.getNavChainForSend(),pk:a,playback_format:i,time_spent_id:c("pageID"),tracking_token:j})}function a(a){return a!=null?Number(a.toFixed(2)):null}function b(b,e,a){if(!d("PolarisConfig").isLoggedIn())return;var g=h(e);if(g.tracking_token==null){c("polarisUnexpected")("Video: can't log event without a tracking token!");return}e.isAd===!0&&c("InstagramODS").incr_CAREFUL_WHEN_USE_DYNAMIC_KEY("web.ads."+a+"."+b);e=e.isAd===!0;e=(!e||d("PolarisAdsGatingHelpers").isWWWFalcoEnabledForVideoAds())&&d("PolarisVideoFalcoLogger").SUPPORTED_FALCO_EVENT_TYPES.includes(b)&&c("qex")._("645")===!0;e?d("PolarisVideoFalcoLogger").logVideoFalcoEvent(b,g,a):d("PolarisLogger").logPigeonEvent(d("PolarisPigeonLogger").createEvent(b,g,{module:a}))}g.VIDEO_EVENTS=e;g.normalizeVideoEvent=a;g.logVideoEvent=b}),98);
__d("PolarisOzConfigMobileDefault",[],(function(a,b,c,d,e,f){"use strict";a={abr_use_download_time:!1,allow_queueing_end_of_stream_when_update:!1,back_off_pdash_504_retry:!1,bandwidth_ignore_on_stream_write_samples:!1,bandwidth_use_response_time_adjustment:!1,buffer_when_waiting:!1,call_end_of_stream_in_quick_starter:!1,check_buffer_range_once_for_playhead_update:!1,cleanup_video_node_on_destroy:!1,clear_buffer_when_switch_representation_initiator_is_user:!1,clear_prepended_segments_count_on_append:!1,copy_new_manifest:!1,detach_media_source_manager:!1,disable_audio_scheduler:!1,enable_abr_for_first_request:!1,enable_adaptation:!0,enable_appends_on_wait_update_end_failure:!1,enable_network_manager_error:!1,enable_quickdashv2:!1,estimate_video_bandwidth_only:!1,exclude_prefetch_bandwidth_samples:!0,fallback_on_append_error:!1,fix_abr_default_representation:!1,fix_quick_starter_overhead:!0,fix_seek_performance:!1,fix_template_duration_artifact_in_manifest:!1,generate_mos_segment_appended_secs:!1,ignore_time_to_response_start:!1,lazy_parse_sidx:!1,live_audio_ibr:!0,live_catch_up_only_when_paused:!1,live_disable_mpd_updates_when_paused:!1,live_gracefully_handle_mpd_errors:!1,live_gracefully_handle_no_network:!1,live_no_segment_when_playhead_is_before_first_segment:!1,live_playhead_catch_up:!1,live_query_time_in_range:!1,log_appended_secs:!1,maybe_end_stream_if_prepended_segments:!1,no_new_loop_body_promise_when_stream_ongoing:!1,pausable_stream_throws_error_when_aborted:!1,pdash_continue_interrupt_from_error:!1,queue_data_with_error_handling:!1,reach_end_only_when_video_ended:!1,remove_src_attr_on_unload:!1,retry_fetch_on_prefetch_error:!1,sbm_recursively_waits_for_update_end:!1,sbm_waits_for_update_end:!0,seek_ahead_use_native_current_time:!1,seek_to_start_quick_starter:!1,set_source_buffer_append_window_end:!1,skip_videobuffer_gaps:!0,stop_manifest_update_when_static:!1,suppress_playing_event_while_buffering:!1,throw_network_error_during_stream:!1,throw_on_non_zero_r_d_mismatch:!1,touch_cb_key:!1,update_bandwidth_cache_on_sample:!1,update_duration_when_init_appended:!1,update_media_source_duration:!0,use_abr_for_missing_default_representation:!1,use_deferred_streaming_task:!1,use_loose_manifest_updates:!1,use_performance_entry_on_stream_close:!1,use_sc_timebased_segments:!1,use_scf_timebased_segments:!1,use_scheduler:!0,use_segment_request_cache:!1,use_stream_end_time_in_segment_locator:!1};b={abr_confidence_threshold:.9,abr_eval_buffer_threshold:0,abr_min_bandwidth_samples:0,abr_prevent_down_switch_buffer_threshold:11,abr_restrict_from_index:0,abr_restrict_to_index:0,append_byte_target_without_range:0,appends_per_segment:3,auto_seek_playhead_slack:0,bandwidth_boundary_standard_deviation_factor:1,bandwidth_estimator_half_life:6,bandwidth_estimator_outlier_exclusion_factor:50,bandwidth_estimator_std_dev_penalty_factor:0,bandwidth_estimator_variance_penalty_down_factor:0,bandwidth_estimator_variance_penalty_half_life:0,bandwidth_estimator_variance_penalty_up_factor:0,bandwidth_penalty_additional_video_start:0,bandwidth_penalty_per_additional_video:0,bandwidth_response_time_handicap:0,buffer_ahead_target:19,byte_count_per_sample:6e4,default_bandwidth_estimate:5e5,download_time_buffer_delta_penalty_factor:0,in_play_buffer_overflow_target:1,in_play_buffer_underflow_target:.1,initial_switch_interval:0,live_audio_ibr_bandwidth_percentage:.05,live_catch_up_fall_behind_threshold:20,live_catch_up_live_head_delta:6,live_max_try_attempts_on_404:1,live_numerical_error_epsilon:0,low_buffer_bandwidth_target_increase_factor:0,low_buffer_bandwidth_target_threshold:10,low_segment_stream_playhead_threshold:0,max_bandwidth_sample_count:30,maximum_bandwidth_sample_bandwidth:2e6,min_eval_interval:1e3,min_switch_interval:5e3,minimum_bandwidth_sample_duration:30,minimum_bytes_to_sample_on_close:25e3,minimum_download_additional_buffer_ms:0,network_seg_timeout_ms:0,paused_stream_segments_count:2,per_stream_duration_target:0,playhead_nudge_slack:0,pre_start_buffer_ahead_target:10,resolution_constraint_factor:2,seconds_to_stream:0,seconds_to_stream_near_bandwidth_boundary:0,seek_ahead_epsilon:0,segments_to_stream:5,segments_to_stream_near_bandwidth_boundary:5,segments_to_stream_under_playhead_threshold:0,start_buffer_underflow_target:.1,stream_interrupt_check_mpd_stale_count_threshold:0,time_to_first_byte_estimate_half_life_ms:500,timeline_offset_threshold:0};c={bandwidth_cache_key:"bandwidthEstimate",network_end_broadcasts_json:"[]",network_reload_mpd_json:"[]",network_retry_intervals_json:'{"0": 1000, "404": 2000, "502": 1000, "503": 1000, "504": 1000}',network_skip_json:"[]"};f.defaultBools=a;f.defaultNumbers=b;f.defaultStrings=c}),66);
__d("oz-player-polaris/configs/PolarisDummyOzConfig",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){a===void 0&&(a={}),this.$1=a}var b=a.prototype;b.getBool=function(a,b){return typeof this.$1[a]===typeof b?this.$1[a]:b};b.getNumber=function(a,b){return typeof this.$1[a]===typeof b?this.$1[a]:b};b.getString=function(a,b){return typeof this.$1[a]===typeof b?this.$1[a]:b};return a}();f["default"]=a}),66);
__d("usePolarisOzPlayer",["InstagramODS","JSResourceForInteraction","PolarisMonitorErrors","PolarisOzConfigMobileDefault","PolarisUA","asyncToGeneratorRuntime","gkx","justknobx","once","oz-player-polaris/configs/PolarisDummyOzConfig","oz-player-polaris/utils/PolarisOzError","polarisManifestHasUnsupportedCodecs","react"],(function(a,b,c,d,e,f,g){"use strict";var h;f=h||d("react");var i=f.useEffect,j=f.useRef,k=f.useState;function a(a){if(!c("justknobx")._("90"))return!1;if(d("PolarisUA").isFirefox())return!1;a=a.dashInfo;if(a==null)return!1;var b=a.is_dash_eligible;a=a.video_dash_manifest;if(!b||a==null||!l())return!1;if(c("polarisManifestHasUnsupportedCodecs")(a)){c("InstagramODS").incr("web.video.unsupported.codec");return!1}return d("PolarisUA").isDesktop()}var l=c("once")(function(){var a=!0;c("InstagramODS").incr("web.video.oz_player_support_check");window.MediaSource||(a=!1,c("InstagramODS").incr("web.video.oz_player_media_source_failed"));(!window.fetch||!window.AbortController)&&(a=!1,c("InstagramODS").incr("web.video.oz_player_fetch_abort_failed"));var b=!!window.MediaKeys&&!!window.navigator&&!!window.navigator.requestMediaKeySystemAccess&&!!window.MediaKeySystemAccess&&!!window.MediaKeySystemAccess.prototype.getConfiguration;b||(a=!1,c("InstagramODS").incr("web.video.oz_player_drm_support_failed"));if(window.ReadableStream)try{new ReadableStream({})}catch(b){a=!1,c("InstagramODS").incr("web.video.oz_player_readable_stream_use_failed")}else a=!1,c("InstagramODS").incr("web.video.oz_player_readable_stream_failed");window.Headers||(a=!1,c("InstagramODS").incr("web.video.oz_player_headers_failed"));(!((b=window.URL)==null?void 0:b.createObjectURL)||!Blob)&&(a=!1,c("InstagramODS").incr("web.video.oz_player_blob_url_failed"));c("gkx")("25408")||(a=!1,c("InstagramODS").incr("web.video.oz_player_gk_failed"));a||c("InstagramODS").incr("web.video.oz_player_support_failed");return a}),m=c("once")(function(){var a=d("PolarisUA").isMobile()?Object.assign({},d("PolarisOzConfigMobileDefault").defaultBools,d("PolarisOzConfigMobileDefault").defaultNumbers,d("PolarisOzConfigMobileDefault").defaultStrings):{cleanup_video_node_on_destroy:!1};return new(c("oz-player-polaris/configs/PolarisDummyOzConfig"))(a)});function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d){a===void 0&&(a=null);var e=(yield c("JSResourceForInteraction")("oz-player-polaris").__setRef("usePolarisOzPlayer").load()),f=m(),g={height:b.offsetHeight,width:b.offsetWidth};return a!=null?new e({config:f,customRepresentationParsers:d,dimensions:g,rawMpdXml:a,videoNodeOrQuickStarter:b}):new e({config:f,customRepresentationParsers:d,dimensions:g,videoNodeOrQuickStarter:b})});return o.apply(this,arguments)}function p(a){var b=["oz_player_error -"];b.push("name: "+a.name);b.push("message: "+a.message);a.description!=null&&a.description.length>0&&b.push("description: "+a.description);if(a instanceof c("oz-player-polaris/utils/PolarisOzError")){a=a.getExtra();a.code!=null&&b.push("code: "+a.code)}return b.join(" ")}function q(a,b,c){b!=null&&a.src!==b&&(a.src=b),c&&c()}function e(a,b,e,f,g){a===void 0&&(a=null);b===void 0&&(b=null);var h=k(!1),l=h[0],m=h[1],o=j(null),r=j(null),s=j(f);i(function(){if(e!=null&&o.current==null&&r.current==null){var f=s.current,h=f.customRepresentationParsers,i=f.onPlayerReady,j=f.onSwitchVideoRepresentation;f=n(b,e,h).then(function(b){o.current=b,b.onError(function(a){d("PolarisMonitorErrors").logError(new Error(p(a)))}),b.addListener("enter_buffering",function(){e.playbackRate=0}),b.addListener("leave_buffering",function(){e.playbackRate=1}),b.addListener("mpd_ready",function(){c("InstagramODS").incr("web.video.load_manifest_successful"),m(!0),i&&i()}),b.addListener("switchVideoRepresentation",function(){if(j!=null){var a=e.currentTime;a=b.getVideoRepresentationIDAtTime(a);a!=null&&j(a)}}),c("InstagramODS").incr("web.video.load_manifest_request"),b.load(a)})["catch"](function(){d("PolarisMonitorErrors").logError(new Error("oz_player_error: failed to create the oz player")),c("InstagramODS").incr("web.video.load_manifest_failed"),o.current!=null?o.current.destroy().then(function(){q(e,g,i)}):q(e,g,i)});r.current=f}return function(){r.current!=null&&(r.current=null),o.current!=null&&(o.current.destroy(),o.current=null)}},[g,a,b,e]);return{manifestLoaded:l,ozPlayer:o.current}}g.shouldUseOzForPostVideo=a;g.useOzPlayer=e}),98);
__d("polarisVideoUtils",["PolarisConfig","PolarisContainerModuleUtils","PolarisIsLoggedInDesktop","PolarisPanavisionQEHelpers","PolarisRelationshipTypes","PolarisUA","PolarisVideoConstants","PolarisVideoLogger","usePolarisOzPlayer"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){if(!o())return!1;a=h(c);return a!=null&&a>d("PolarisVideoConstants").VIDEO_PREVIEW_DURATION_SECONDS}function h(a){return a&&a.getCurrentTime()}function b(a){return d("usePolarisOzPlayer").shouldUseOzForPostVideo(a)?a.dashInfo:void 0}function c(a){return a?"metadata":"none"}function e(a){return(a==null?void 0:(a=a.followedByViewer)==null?void 0:a.state)===d("PolarisRelationshipTypes").FOLLOW_STATUS_FOLLOWING?"following":"not_following"}function f(a,b){if(a===d("PolarisVideoConstants").AUDIO_STATES.none)return!0;return b!==!0?!1:a!==d("PolarisVideoConstants").AUDIO_STATES.on}function i(a,b){a=a==null?void 0:a.getVideo();if(a===null)return!0;a=(a==null?void 0:a.muted)===!0||(a==null?void 0:a.volume)===0;return a&&b}function j(a){return n(a)&&d("PolarisIsLoggedInDesktop").isLoggedInDesktop()?!1:!0}function k(a){return a===d("PolarisVideoConstants").PLAYER_STATES.playing||a===d("PolarisVideoConstants").PLAYER_STATES.requestedPlay}function l(a){var b=h(a)||0;a=a&&a.getDuration();return a!=null&&a!==0?b/a:0}function m(a){return a&&a.getPauseTime()}function n(a){return a==="feed"||a==="feedPage"||a==="followingFeedPage"||a==="favoritesFeedPage"||a==="pastPostsFeedPage"}function o(){return!1}function p(a,b,c){d("PolarisConfig").isLoggedIn()&&d("PolarisVideoLogger").logVideoEvent(b,c,d("PolarisContainerModuleUtils").getContainerModule(a))}function q(a,b){if(o())return!0;b=n(a)&&!d("PolarisPanavisionQEHelpers").hasNoLetterboxing();return d("PolarisUA").isMobile()||b}function r(a,b){return o()}g.didReachEndOfIGTVPreview=a;g.getCurrentVideoTime=h;g.getDashInfo=b;g.getDeclarativeVideoPreload=c;g.getFollowingStatus=e;g.getShouldMuteAudio=f;g.getShouldStopVideoInBackground=i;g.getShouldStopVideoWhenNotVisible=j;g.getShouldVideoLoop=k;g.getTimeAsPercentage=l;g.getTimeAtVideoPause=m;g.isFeed=n;g.isIGTVFeedPreview=o;g.logVideoEventWrapper=p;g.shouldCenterCropPosterHeight_LEGACY=q;g.shouldCenterCropVideoHeight=r}),98);
__d("polarisVideoEventLogger",["InstagramODS","PolarisVideoLogger","polarisVideoUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=a.adTrackingToken,c=a.carouselParentId,d=a.dashInfo,e=a.extras,f=a.id,g=a.isAd,h=a.ownerId,i=a.streamingFormat,j=a.trackingToken;a=a.videoWidth;var k=(d==null?void 0:d.is_dash_eligible)?1:0;(d==null?void 0:d.video_dash_manifest)!=null;d=i==="dash"?"dash":"progressive";e=babelHelpers["extends"]({},e,{carouselParentId:c,id:f||"",isAd:!1,isDashEligible:k,ownerId:(i=h)!=null?i:"",playbackFormat:d,trackingToken:g===!0&&b!=null?b:j});a!=null&&a!==0&&(e.video_width=a);g===!0&&(e.isAd=g);return e}function a(a){return a==null?null:{adTrackingToken:a==null?void 0:a.tracking_token,isAd:!!a}}function b(a){var b=a.adTrackingToken,c=a.analyticsContext,e=a.carouselParentId,f=a.currentVideoTime,g=a.dashInfo,i=a.duration,j=a.id,k=a.isAd,l=a.loopsCount,m=a.ownerId,n=a.sequenceNumber,o=a.streamingFormat,p=a.trackingToken;a=a.videoWidth;i={duration:d("PolarisVideoLogger").normalizeVideoEvent(i),loop_count:l,seq_num:n,time:d("PolarisVideoLogger").normalizeVideoEvent(f)};d("polarisVideoUtils").logVideoEventWrapper(c,d("PolarisVideoLogger").VIDEO_EVENTS.audioEnabled,h({adTrackingToken:b,carouselParentId:e,dashInfo:g,extras:i,id:j,isAd:k,ownerId:m,streamingFormat:o,trackingToken:p,videoWidth:a}))}function e(a){var b=a.adTrackingToken,c=a.analyticsContext,e=a.carouselParentId,f=a.currentVideoTime,g=a.dashInfo,i=a.duration,j=a.id,k=a.isAd,l=a.loopsCount,m=a.ownerId,n=a.sequenceNumber,o=a.streamingFormat,p=a.trackingToken;a=a.videoWidth;i={duration:d("PolarisVideoLogger").normalizeVideoEvent(i),loop_count:l,seq_num:n,time:d("PolarisVideoLogger").normalizeVideoEvent(f)};d("polarisVideoUtils").logVideoEventWrapper(c,d("PolarisVideoLogger").VIDEO_EVENTS.audioDisabled,h({adTrackingToken:b,carouselParentId:e,dashInfo:g,extras:i,id:j,isAd:k,ownerId:m,streamingFormat:o,trackingToken:p,videoWidth:a}))}function f(a){var b=a.adTrackingToken,c=a.analyticsContext,e=a.carouselParentId,f=a.dashInfo,g=a.followingStatus,i=a.id,j=a.isAd,k=a.lastStartPosition,l=a.loopsCount,m=a.ownerId,n=a.postedAt,o=a.sequenceNumber,p=a.streamingFormat,q=a.timeAsPercent,r=a.trackingToken;a=a.videoWidth;g={follow_status:(g=g)!=null?g:"not_following",loop_count:l,lsp:d("PolarisVideoLogger").normalizeVideoEvent(k),m_ts:n,playing_audio:1,radio_type:"none-none",seq_num:o,timeAsPercent:q};d("polarisVideoUtils").logVideoEventWrapper(c,d("PolarisVideoLogger").VIDEO_EVENTS.bufferingFinished,h({adTrackingToken:b,carouselParentId:e,dashInfo:f,extras:g,id:i,isAd:j,ownerId:m,streamingFormat:p,trackingToken:r,videoWidth:a}))}function i(a){var b=a.adTrackingToken,c=a.analyticsContext,e=a.carouselParentId,f=a.dashInfo,g=a.followingStatus,i=a.id,j=a.isAd,k=a.loopsCount,l=a.ownerId,m=a.postedAt,n=a.sequenceNumber,o=a.streamingFormat,p=a.timeAsPercent,q=a.trackingToken;a=a.videoWidth;g={follow_status:(g=g)!=null?g:"not_following",loop_count:k,m_ts:m,playing_audio:1,radio_type:"none-none",seq_num:n,timeAsPercent:p};d("polarisVideoUtils").logVideoEventWrapper(c,d("PolarisVideoLogger").VIDEO_EVENTS.bufferingStarted,h({adTrackingToken:b,carouselParentId:e,dashInfo:f,extras:g,id:i,isAd:j,ownerId:l,streamingFormat:o,trackingToken:q,videoWidth:a}))}function j(a){var b=a.adTrackingToken,e=a.analyticsContext,f=a.carouselParentId,g=a.dashInfo,i=a.duration,j=a.exitTime,k=a.hasPlayedVideo,l=a.id,m=a.isAd,n=a.lastStartPosition,o=a.loopsCount,p=a.ownerId,q=a.sequenceNumber,r=a.streamingFormat,s=a.trackingToken;a=a.videoWidth;if(k){i={duration:(k=d("PolarisVideoLogger")).normalizeVideoEvent(i),loop_count:o,lsp:k.normalizeVideoEvent(n),playing_audio:1,seq_num:q,time:k.normalizeVideoEvent(j)};c("InstagramODS").incr("web.video.old.log_video_exited");d("polarisVideoUtils").logVideoEventWrapper(e,k.VIDEO_EVENTS.exited,h({adTrackingToken:b,carouselParentId:f,dashInfo:g,extras:i,id:l,isAd:m,ownerId:p,streamingFormat:r,trackingToken:s,videoWidth:a}))}}function k(a){var b=a.adTrackingToken,c=a.analyticsContext,e=a.carouselParentId,f=a.currentVideoTime,g=a.dashInfo,i=a.droppedFrameCount,j=a.id,k=a.isAd,l=a.lastStartPosition,m=a.loopsCount,n=a.ownerId,o=a.representationId,p=a.sequenceNumber,q=a.streamingFormat,r=a.totalFrameCount,s=a.trackingToken;a=a.videoWidth;m={loop_count:m,lsp:d("PolarisVideoLogger").normalizeVideoEvent(l),playing_audio:1,representation_id:o,seq_num:p,time:d("PolarisVideoLogger").normalizeVideoEvent(f)};r!=null&&i!=null&&(m.total_frame_count=r,m.dropped_frame_count=i);d("polarisVideoUtils").logVideoEventWrapper(c,d("PolarisVideoLogger").VIDEO_EVENTS.formatChanged,h({adTrackingToken:b,carouselParentId:e,dashInfo:g,extras:m,id:j,isAd:k,ownerId:n,streamingFormat:q,trackingToken:s,videoWidth:a}))}function l(a){var b=a.adTrackingToken,e=a.analyticsContext,f=a.carouselParentId,g=a.currentVideoTime,i=a.dashInfo,j=a.droppedFrameCount,k=a.duration,l=a.id,m=a.isAd,n=a.lastStartPosition,o=a.loopsCount,p=a.ownerId,q=a.playingAudio;q=q===void 0?1:q;var r=a.representationID,s=a.sequenceNumber,t=a.streamingFormat,u=a.totalFrameCount,v=a.trackingToken;a=a.videoWidth;k={duration:d("PolarisVideoLogger").normalizeVideoEvent(k),loop_count:o,lsp:d("PolarisVideoLogger").normalizeVideoEvent(n),playing_audio:q,seq_num:s,time:d("PolarisVideoLogger").normalizeVideoEvent(g)};u!=null&&j!=null&&(k.total_frame_count=u,k.dropped_frame_count=j);r!=null&&(k.representation_id=r);c("InstagramODS").incr("web.video.old.log_video_paused");d("polarisVideoUtils").logVideoEventWrapper(e,d("PolarisVideoLogger").VIDEO_EVENTS.paused,h({adTrackingToken:b,carouselParentId:f,dashInfo:i,extras:k,id:l,isAd:m,ownerId:p,streamingFormat:t,trackingToken:v,videoWidth:a}))}function m(a){var b=a.adTrackingToken,c=a.analyticsContext,e=a.carouselParentId,f=a.dashInfo,g=a.fromTime,i=a.id,j=a.isAd,k=a.ownerId,l=a.sequenceNumber,m=a.streamingFormat,n=a.toTime,o=a.trackingToken;a=a.videoWidth;g={from_time:d("PolarisVideoLogger").normalizeVideoEvent(g),radio_type:"none-none",seq_num:l,to_time:d("PolarisVideoLogger").normalizeVideoEvent(n)};d("polarisVideoUtils").logVideoEventWrapper(c,d("PolarisVideoLogger").VIDEO_EVENTS.seek,h({adTrackingToken:b,carouselParentId:e,dashInfo:f,extras:g,id:i,isAd:j,ownerId:k,streamingFormat:m,trackingToken:o,videoWidth:a}))}function n(a){var b=a.adTrackingToken,e=a.analyticsContext,f=a.carouselParentId,g=a.currentVideoTime,i=a.dashInfo,j=a.id,k=a.isAd,l=a.ownerId,m=a.reason;m=m===void 0?"autoplay":m;var n=a.sequenceNumber,o=a.streamingFormat,p=a.trackingToken;a=a.videoWidth;m={reason:m,seq_num:n,time:d("PolarisVideoLogger").normalizeVideoEvent(g)};c("InstagramODS").incr("web.video.old.log_video_should_start");d("polarisVideoUtils").logVideoEventWrapper(e,d("PolarisVideoLogger").VIDEO_EVENTS.shouldStart,h({adTrackingToken:b,carouselParentId:f,dashInfo:i,extras:m,id:j,isAd:k,ownerId:l,streamingFormat:o,trackingToken:p,videoWidth:a}))}function o(a){var b=a.adTrackingToken,e=a.analyticsContext,f=a.carouselParentId,g=a.currentVideoTime,i=a.dashInfo,j=a.droppedFrameCount,k=a.id,l=a.isAd,m=a.lastShouldStartTime,n=a.ownerId,o=a.reason;o=o===void 0?"autoplay":o;var p=a.sequenceNumber,q=a.streamingFormat,r=a.totalFrameCount,s=a.trackingToken;a=a.videoWidth;m=m===0?0:d("PolarisVideoLogger").normalizeVideoEvent(Date.now()-m);o={reason:o,seq_num:p,start_delay:m,time:d("PolarisVideoLogger").normalizeVideoEvent(g)};r!=null&&j!=null&&(o.total_frame_count=r,o.dropped_frame_count=j);c("InstagramODS").incr("web.video.old.log_video_started_playing");d("polarisVideoUtils").logVideoEventWrapper(e,d("PolarisVideoLogger").VIDEO_EVENTS.startedPlaying,h({adTrackingToken:b,carouselParentId:f,dashInfo:i,extras:o,id:k,isAd:l,ownerId:n,streamingFormat:q,trackingToken:s,videoWidth:a}))}function p(a){var b,c=a.adTrackingToken,e=a.analyticsContext,f=a.carouselParentId,g=a.dashInfo,i=a.duration,j=a.id,k=a.isAd,l=a.lastStartPosition,m=a.loopCount,n=a.ownerId,o=a.sequenceNumber,p=a.streamingFormat,q=a.timeAtVideoPause,r=a.trackingToken;a=a.videoWidth;i={duration:(b=d("PolarisVideoLogger")).normalizeVideoEvent(i),loop_count:m,lsp:b.normalizeVideoEvent(l),seq_num:o,time:b.normalizeVideoEvent(q)};d("polarisVideoUtils").logVideoEventWrapper(e,b.VIDEO_EVENTS.fullViewedTime,h({adTrackingToken:c,carouselParentId:f,dashInfo:g,extras:i,id:j,isAd:k,ownerId:n,streamingFormat:p,trackingToken:r,videoWidth:a}))}function q(a){var b,c=a.adTrackingToken,e=a.analyticsContext,f=a.carouselParentId,g=a.dashInfo,i=a.duration,j=a.id,k=a.isAd,l=a.lastStartPosition,m=a.loopCount,n=a.ownerId,o=a.sequenceNumber,p=a.streamingFormat,q=a.timeAtVideoPause,r=a.trackingToken;a=a.videoWidth;i={duration:(b=d("PolarisVideoLogger")).normalizeVideoEvent(i),loop_count:m,lsp:b.normalizeVideoEvent(l),seq_num:o,time:b.normalizeVideoEvent(q)};d("polarisVideoUtils").logVideoEventWrapper(e,b.VIDEO_EVENTS.viewedTime,h({adTrackingToken:c,carouselParentId:f,dashInfo:g,extras:i,id:j,isAd:k,ownerId:n,streamingFormat:p,trackingToken:r,videoWidth:a}))}function r(a){var b=a.adTrackingToken,c=a.analyticsContext,e=a.carouselParentId,f=a.currentVideoTime,g=a.currentViewabilityPercentage,i=a.dashInfo,j=a.id,k=a.isAd,l=a.ownerId,m=a.sequenceNumber,n=a.streamingFormat;a=a.trackingToken;g={current_viewability_percentage:g,seq_num:m,video_time_position:d("PolarisVideoLogger").normalizeVideoEvent(f)};d("polarisVideoUtils").logVideoEventWrapper(c,d("PolarisVideoLogger").VIDEO_EVENTS.viewabilityChanged,h({adTrackingToken:b,carouselParentId:e,dashInfo:i,extras:g,id:j,isAd:k,ownerId:l,streamingFormat:n,trackingToken:a}))}g.getAdLoggingParams=a;g.logAudioEnabled=b;g.logAudioDisabled=e;g.logVideoBufferingFinished=f;g.logVideoBufferingStarted=i;g.logVideoExitedEvent=j;g.logVideoFormatChanged=k;g.logVideoPausedEvent=l;g.logVideoSeekingEnded=m;g.logVideoShouldStart=n;g.logVideoStartedPlaying=o;g.logVideoFullViewedTime=p;g.logVideoViewedTime=q;g.logVideoViewabilityChanged=r}),98);
__d("usePolarisMediaSensitivityOverlay",["polarisGetPostFromGraphMediaInterface","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useMemo;var i=b.useState,j=b.unstable_useMemoCache;function a(a,b,c,e){var f=j(16),g=i(!0),h=g[0],k=g[1];f[0]!==c?(g=function(a){c&&c(a),k(!1)},f[0]=c,f[1]=g):g=f[1];g=g;var l;f[2]!==a?(l=d("polarisGetPostFromGraphMediaInterface").getMediaOverlayMediaCoverInfoFromPostOrSidecarItem(a),f[2]=a,f[3]=l):l=f[3];l=l;var m=l;f[4]!==e||f[5]!==a||f[6]!==m||f[7]!==h||f[8]!==b?(l=function(){return e!=null&&e(a)?!1:m!=null&&h&&(b==="profilePage"||b==="profilePageModal"||b==="postPage"||b==="feed"||b==="feedPage"||b==="feedPageModal"||b==="DirectThreadPage"||b==="directThreadPageModal"||b==="reelsTab")},f[4]=e,f[5]=a,f[6]=m,f[7]=h,f[8]=b,f[9]=l):l=f[9];l=l;var n;f[10]!==l?(n=l(),f[10]=l,f[11]=n):n=f[11];l=n;n=l;f[12]!==g||f[13]!==m||f[14]!==n?(l={handleHideSensitivityOverlay:g,mediaOverlayCoverInfo:m,shouldShowSensitivityOverlay:n},f[12]=g,f[13]=m,f[14]=n,f[15]=l):l=f[15];return l}g["default"]=a}),98);
__d("DirectReshareButtonTapFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2065");b=d("FalcoLoggerInternal").create("direct_reshare_button_tap",a);e=b;g["default"]=e}),98);
__d("PolarisLikeButton.react",["invariant","IGDSHeartFilledIcon.react","IGDSHeartPanoOutlineIcon.react","IGDSIconButton.react","PolarisInteractionsStrings","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l={animation:{animationDuration:"x1ykxiw6",animationName:"x1ahuga",animationTimingFunction:"x4hg4is",transform:"x3oybdh",$$css:!0},small:{backgroundColor:"xjbqb8w",borderTopStyle:"x1ejq31n",borderEndStyle:"xd10rxx",borderBottomStyle:"x1sy0etr",borderStartStyle:"x17r0tee",borderTopWidth:"x972fbf",borderEndWidth:"xcfux6l",borderBottomWidth:"x1qhh985",borderStartWidth:"xm0m39n",cursor:"x1ypdohk",lineHeight:"x15bjb6t",outline:"x1a2a7pz",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",$$css:!0}};function m(a){var b=a.color;b=b===void 0?"ig-primary-icon":b;var e=a.handleClick,f=a.isHovered,g=a.isLiked,h=a.likeChangeCount,j=a.padding,m=a.setIsHovered,n=a.shadow;n=n===void 0?!1:n;a=a.size;return k.jsx(c("IGDSIconButton.react"),{hover:g?null:k.jsx(c("IGDSHeartPanoOutlineIcon.react"),{alt:d("PolarisInteractionsStrings").LIKE_TEXT,color:b==="ig-secondary-icon"?"ig-stroke":"ig-secondary-icon",shadow:n,size:a}),onClick:e,padding:j,children:k.jsx("span",{className:(i||(i=c("stylex")))(h>0&&l.animation),onMouseEnter:function(){m!=null&&m(!0)},onMouseLeave:function(){m!=null&&m(!1)},children:g?k.jsx(c("IGDSHeartFilledIcon.react"),{alt:d("PolarisInteractionsStrings").UNLIKE_TEXT,color:"ig-badge",shadow:n,size:a}):k.jsx(c("IGDSHeartPanoOutlineIcon.react"),{alt:d("PolarisInteractionsStrings").LIKE_TEXT,color:f===!0?"ig-secondary-icon":b,shadow:n,size:a})},h)})}m.displayName=m.name+" [from "+f.id+"]";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={likeChangeCount:-1,prevIsLiked:null},c.$2=function(a){a.preventDefault(),c.props.onChange(!c.props.isLiked)},b)||babelHelpers.assertThisInitialized(c)}b.getDerivedStateFromProps=function(a,b){return a.isLiked!==b.prevIsLiked?{likeChangeCount:b.likeChangeCount+1,prevIsLiked:a.isLiked}:null};var c=b.prototype;c.focus=function(){this.$1||h(0,51544),this.$1.focus()};c.render=function(){var a=this.props,b=a.className,c=a.color,d=a["data-testid"];d=a.isHovered;var e=a.isLiked,f=a.large,g=a.padding,h=a.setIsHovered;a=a.shadow;return k.jsx("span",{className:b,"data-testid":void 0,onMouseEnter:function(){h!=null&&h(!0)},onMouseLeave:function(){h!=null&&h(!1)},children:f?k.jsx(m,{color:c,handleClick:this.$2,isHovered:d,isLiked:e,likeChangeCount:this.state.likeChangeCount,padding:(b=g)!=null?b:8,shadow:a,size:24}):k.jsx("div",{className:"xjbqb8w x1ejq31n xd10rxx x1sy0etr x17r0tee x972fbf xcfux6l x1qhh985 xm0m39n x1ypdohk x15bjb6t x1a2a7pz xexx8yu x4uap5 x18d9i69 xkhd6sd",children:k.jsx(m,{color:c,handleClick:this.$2,isHovered:d,isLiked:e,likeChangeCount:this.state.likeChangeCount,padding:(f=g)!=null?f:0,shadow:a,size:12})})})};return b}(k.Component);a.defaultProps={large:!0};g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("URLMatcherConfig",[],(function(a,b,c,d,e,f){e.exports={tlds:"(?:\\.(com|\ud55c\uad6d|\uc0bc\uc131|\ub2f7\ucef4|\ub2f7\ub137|\u9999\u6e2f|\u9999\u683c\u91cc\u62c9|\u9910\u5385|\u98df\u54c1|\u98de\u5229\u6d66|\u96fb\u8a0a\u76c8\u79d1|\u96c6\u56e2|\u901a\u8ca9|\u8d2d\u7269|\u8c37\u6b4c|\u8bfa\u57fa\u4e9a|\u8054\u901a|\u7f51\u7edc|\u7f51\u7ad9|\u7f51\u5e97|\u7f51\u5740|\u7ec4\u7ec7\u673a\u6784|\u79fb\u52a8|\u73e0\u5b9d|\u70b9\u770b|\u6fb3\u9580|\u6e38\u620f|\u6de1\u9a6c\u9521|\u673a\u6784|\u66f8\u7c4d|\u65f6\u5c1a|\u65b0\u95fb|\u65b0\u52a0\u5761|\u653f\u5e9c|\u653f\u52a1|\u624b\u8868|\u624b\u673a|\u6211\u7231\u4f60|\u6148\u5584|\u5fae\u535a|\u5e7f\u4e1c|\u5de5\u884c|\u5bb6\u96fb|\u5a31\u4e50|\u5929\u4e3b\u6559|\u5927\u62ff|\u5927\u4f17\u6c7d\u8f66|\u5728\u7ebf|\u5609\u91cc\u5927\u9152\u5e97|\u5609\u91cc|\u5546\u6807|\u5546\u5e97|\u5546\u57ce|\u53f0\u7063|\u53f0\u6e7e|\u516c\u76ca|\u516c\u53f8|\u516b\u5366|\u5065\u5eb7|\u4fe1\u606f|\u4f5b\u5c71|\u4f01\u4e1a|\u4e2d\u6587\u7f51|\u4e2d\u570b|\u4e2d\u56fd|\u4e2d\u4fe1|\u4e16\u754c|\u30dd\u30a4\u30f3\u30c8|\u30d5\u30a1\u30c3\u30b7\u30e7\u30f3|\u30bb\u30fc\u30eb|\u30b9\u30c8\u30a2|\u30b3\u30e0|\u30b0\u30fc\u30b0\u30eb|\u30af\u30e9\u30a6\u30c9|\u307f\u3093\u306a|\u10d2\u10d4|\u0e44\u0e17\u0e22|\u0e04\u0e2d\u0e21|\u0dbd\u0d82\u0d9a\u0dcf|\u0d2d\u0d3e\u0d30\u0d24\u0d02|\u0cad\u0cbe\u0cb0\u0ca4|\u0c2d\u0c3e\u0c30\u0c24\u0c4d|\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe|\u0b2d\u0b3e\u0b30\u0b24|\u0aad\u0abe\u0ab0\u0aa4|\u0a2d\u0a3e\u0a30\u0a24|\u09ad\u09be\u09f0\u09a4|\u09ad\u09be\u09b0\u09a4|\u09ac\u09be\u0982\u09b2\u09be|\u0938\u0902\u0917\u0920\u0928|\u092d\u093e\u0930\u094b\u0924|\u092d\u093e\u0930\u0924\u092e\u094d|\u092d\u093e\u0930\u0924|\u0928\u0947\u091f|\u0915\u0949\u092e|\u0680\u0627\u0631\u062a|\u067e\u0627\u06a9\u0633\u062a\u0627\u0646|\u0647\u0645\u0631\u0627\u0647|\u0645\u0648\u0642\u0639|\u0645\u0648\u0628\u0627\u064a\u0644\u064a|\u0645\u0644\u064a\u0633\u064a\u0627|\u0645\u0635\u0631|\u0643\u0648\u0645|\u0643\u0627\u062b\u0648\u0644\u064a\u0643|\u0642\u0637\u0631|\u0641\u0644\u0633\u0637\u064a\u0646|\u0639\u0645\u0627\u0646|\u0639\u0631\u0628|\u0639\u0631\u0627\u0642|\u0634\u0628\u0643\u0629|\u0633\u0648\u0631\u064a\u0629|\u0633\u0648\u062f\u0627\u0646|\u062a\u0648\u0646\u0633|\u0628\u06be\u0627\u0631\u062a|\u0628\u064a\u062a\u0643|\u0628\u0627\u0632\u0627\u0631|\u0628\u0627\u0631\u062a|\u0627\u06cc\u0631\u0627\u0646|\u0627\u0645\u0627\u0631\u0627\u062a|\u0627\u0644\u0645\u063a\u0631\u0628|\u0627\u0644\u0639\u0644\u064a\u0627\u0646|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|\u0627\u0644\u062c\u0632\u0627\u0626\u0631|\u0627\u0644\u0627\u0631\u062f\u0646|\u0627\u0631\u0627\u0645\u0643\u0648|\u0627\u062a\u0635\u0627\u0644\u0627\u062a|\u0627\u0628\u0648\u0638\u0628\u064a|\u05e7\u05d5\u05dd|\u0570\u0561\u0575|\u049b\u0430\u0437|\u0443\u043a\u0440|\u0441\u0440\u0431|\u0441\u0430\u0439\u0442|\u0440\u0444|\u0440\u0443\u0441|\u043e\u0440\u0433|\u043e\u043d\u043b\u0430\u0439\u043d|\u043c\u043e\u0441\u043a\u0432\u0430|\u043c\u043e\u043d|\u043c\u043a\u0434|\u043a\u043e\u043c|\u043a\u0430\u0442\u043e\u043b\u0438\u043a|\u0435\u044e|\u0434\u0435\u0442\u0438|\u0431\u0435\u043b|\u0431\u0433|\u03b5\u03bb|zw|zuerich|zone|zm|zippo|zip|zero|zara|zappos|za|yun|yt|youtube|you|yokohama|yoga|yodobashi|ye|yandex|yamaxun|yahoo|yachts|xyz|xxx|xperia|xn--zfr164b|xn--ygbi2ammx|xn--yfro4i67o|xn--y9a3aq|xn--xkc2dl3a5ee0h|xn--xkc2al3hye2a|xn--xhq521b|xn--wgbl6a|xn--wgbh1c|xn--w4rs40l|xn--w4r85el8fhu5dnra|xn--vuq861b|xn--vhquv|xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--unup4y|xn--tiq49xqyj|xn--tckwe|xn--t60b56a|xn--ses554g|xn--s9brj9c|xn--rvc1e0am3e|xn--rovu88b|xn--rhqv96g|xn--qxam|xn--qcka1pmc|xn--q9jyb4c|xn--pssy2u|xn--pgbs0dh|xn--pbt977c|xn--p1ai|xn--p1acf|xn--ogbpf8fl|xn--o3cw4h|xn--nyqy26a|xn--nqv7fs00ema|xn--nqv7f|xn--node|xn--ngbrx|xn--ngbe9e0a|xn--ngbc5azd|xn--mxtq1m|xn--mk1bu44c|xn--mix891f|xn--mgbx4cd0ab|xn--mgbtx2b|xn--mgbt3dhd|xn--mgbpl2fh|xn--mgbi4ecexp|xn--mgbgu82a|xn--mgberp4a5d4ar|xn--mgbca7dzdo|xn--mgbc0a9azcg|xn--mgbbh1a71e|xn--mgbbh1a|xn--mgbb9fbpob|xn--mgbayh7gpa|xn--mgbai9azgqp6j|xn--mgbab2bd|xn--mgbaam7a8h|xn--mgbaakc7dvf|xn--mgba7c0bbn0a|xn--mgba3a4f16a|xn--mgba3a3ejt|xn--mgb9awbf|xn--lgbbat1ad8j|xn--l1acc|xn--kput3i|xn--kpu716f|xn--kpry57d|xn--kprw13d|xn--kcrx77d1x4a|xn--jvr189m|xn--jlq61u9w7b|xn--j6w193g|xn--j1amh|xn--j1aef|xn--io0a7i|xn--imr513n|xn--i1b6b1a6a2e|xn--hxt814e|xn--h2brj9c8c|xn--h2brj9c|xn--h2breg3eve|xn--gk3at1e|xn--gecrj9c|xn--gckr3f0f|xn--g2xx48c|xn--fzys8d69uvgm|xn--fzc2c9e2c|xn--fpcrj9c3d|xn--flw351e|xn--fjq720a|xn--fiqz9s|xn--fiqs8s|xn--fiq64b|xn--fiq228c5hs|xn--fhbei|xn--fct429k|xn--estv75g|xn--efvy88h|xn--eckvdtc9d|xn--e1a4c|xn--d1alf|xn--d1acj3b|xn--czru2d|xn--czrs0t|xn--czr694b|xn--clchc0ea0b2g2a9gcd|xn--cg4bki|xn--cck2b3b|xn--c2br7g|xn--c1avg|xn--bck1b9a5dre4c|xn--b4w605ferd|xn--9krt00a|xn--9et52u|xn--9dbq2a|xn--90ais|xn--90ae|xn--90a3ac|xn--8y0a063a|xn--80aswg|xn--80asehdb|xn--80aqecdr1a|xn--80ao21a|xn--80adxhks|xn--6qq986b3xl|xn--6frz82g|xn--5tzm5g|xn--5su34j936bgsg|xn--55qx5d|xn--55qw42g|xn--54b7fta0cc|xn--4gbrim|xn--45q11c|xn--45brj9c|xn--45br5cyl|xn--42c2d9a|xn--3pxu8k|xn--3oq18vl8pn36a|xn--3hcrj9c|xn--3e0b707e|xn--3ds443g|xn--3bst00m|xn--30rr7y|xn--2scrj9c|xn--1qqw23a|xn--1ck2e1b|xn--11b4c3d|xin|xihuan|xfinity|xerox|xbox|wtf|wtc|ws|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|wf|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|warman|wanggou|wang|walter|walmart|wales|vuelos|vu|voyage|voto|voting|vote|volvo|volkswagen|vodka|vn|vlaanderen|vivo|viva|vistaprint|vista|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vi|vg|vet|versicherung|verm\xf6gensberatung|verm\xf6gensberater|verisign|ventures|vegas|ve|vc|vanguard|vana|vacations|va|uz|uy|us|ups|uol|uno|university|unicom|uk|ug|uconnect|ubs|ubank|ua|tz|tw|tvs|tv|tushu|tunes|tui|tube|tt|trv|trust|travelersinsurance|travelers|travelchannel|travel|training|trading|trade|tr|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|to|tn|tmall|tm|tl|tkmaxx|tk|tjx|tjmaxx|tj|tirol|tires|tips|tiffany|tienda|tickets|tiaa|theatre|theater|thd|th|tg|tf|teva|tennis|temasek|telefonica|telecity|tel|technology|tech|team|tdk|td|tci|tc|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|sz|systems|symantec|sydney|sy|sx|swiss|swiftcover|swatch|sv|suzuki|surgery|surf|support|supply|supplies|sucks|su|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statoil|statefarm|statebank|starhub|star|staples|stada|st|srt|srl|sr|spreadbetting|spot|sport|spiegel|space|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|so|sncf|sn|smile|smart|sm|sling|sl|skype|sky|skin|ski|sk|sj|site|singles|sina|silk|si|shriram|showtime|show|shouji|shopping|shop|shoes|shiksha|shia|shell|shaw|sharp|shangrila|sh|sg|sfr|sexy|sex|sew|seven|ses|services|sener|select|seek|security|secure|seat|search|se|sd|scot|scor|scjohnson|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sca|sc|sbs|sbi|sb|saxo|save|sas|sarl|sapo|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|sa|ryukyu|rwe|rw|run|ruhr|rugby|ru|rsvp|rs|room|rogers|rodeo|rocks|rocher|ro|rmit|rip|rio|ril|rightathome|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|re|raid|radio|racing|qvc|quest|quebec|qpon|qa|py|pwc|pw|pub|pt|ps|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|pr|post|porn|politie|poker|pohl|pnc|pn|pm|plus|plumbing|playstation|play|place|pl|pk|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|piaget|physio|photos|photography|photo|phone|philips|phd|pharmacy|ph|pg|pfizer|pf|pet|pe|pccw|pay|passagens|party|parts|partners|pars|paris|panerai|panasonic|page|pa|ovh|ott|otsuka|osaka|origins|organic|org|orange|oracle|open|ooo|onyourside|online|onl|onion|ong|one|omega|om|ollo|oldnavy|olayangroup|olayan|okinawa|office|off|observer|obi|nz|nyc|nu|ntt|nrw|nra|nr|np|nowtv|nowruz|now|norton|northwesternmutual|nokia|no|nl|nissay|nissan|ninja|nikon|nike|nico|ni|nhk|ngo|ng|nfl|nf|nexus|nextdirect|next|news|newholland|new|neustar|network|netflix|netbank|net|nec|ne|nc|nba|navy|natura|nationwide|name|nagoya|nadex|nab|na|mz|my|mx|mw|mv|mutual|museum|mu|mtr|mtn|mt|msd|ms|mr|mq|mp|movistar|movie|mov|motorcycles|moto|moscow|mortgage|mormon|mopar|monster|money|monash|mom|moi|moe|moda|mobily|mobile|mobi|mo|mn|mma|mm|mls|mlb|ml|mk|mitsubishi|mit|mint|mini|mil|microsoft|miami|mh|mg|metlife|merckmsd|meo|menu|men|memorial|meme|melbourne|meet|media|med|me|md|mckinsey|mc|mba|mattel|maserati|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|macys|ma|ly|lv|luxury|luxe|lupin|lundbeck|lu|ltda|ltd|lt|ls|lr|lplfinancial|lpl|love|lotto|lotte|london|lol|loft|locus|locker|loans|loan|lk|llc|lixil|living|live|lipsy|link|linde|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|liaison|li|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lc|lb|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancome|lancia|lancaster|lamer|lamborghini|ladbrokes|lacaixa|la|kz|kyoto|ky|kw|kuokgroup|kred|krd|kr|kpn|kpmg|kp|kosher|komatsu|koeln|kn|km|kiwi|kitchen|kindle|kinder|kim|kia|ki|kh|kg|kfh|kerryproperties|kerrylogistics|kerryhotels|ke|kddi|kaufen|juniper|juegos|jprs|jpmorgan|jp|joy|jot|joburg|jobs|jo|jnj|jmp|jm|jll|jlc|jio|jewelry|jetzt|jeep|je|jcp|jcb|java|jaguar|iwc|iveco|itv|itau|it|istanbul|ist|ismaili|iselect|is|irish|ir|iq|ipiranga|io|investments|intuit|international|intel|int|insure|insurance|institute|ink|ing|info|infiniti|industries|inc|in|immobilien|immo|imdb|imamat|im|il|ikano|ifm|ieee|ie|id|icu|ice|icbc|ibm|hyundai|hyatt|hughes|hu|ht|hsbc|hr|how|house|hotmail|hotels|hoteles|hot|hosting|host|hospital|horse|honeywell|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hn|hm|hkt|hk|hiv|hitachi|hisamitsu|hiphop|hgtv|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|gy|gw|guru|guitars|guide|guge|gucci|guardian|gu|gt|gs|group|grocery|gripe|green|gratis|graphics|grainger|gr|gq|gp|gov|got|gop|google|goog|goodyear|goodhands|goo|golf|goldpoint|gold|godaddy|gn|gmx|gmo|gmbh|gmail|gm|globo|global|gle|glass|glade|gl|giving|gives|gifts|gift|gi|gh|ggee|gg|gf|george|genting|gent|gea|ge|gdn|gd|gbiz|gb|gay|garden|gap|games|game|gallup|gallo|gallery|gal|ga|fyi|futbol|furniture|fund|fun|fujixerox|fujitsu|ftr|frontier|frontdoor|frogans|frl|fresenius|free|fr|fox|foundation|forum|forsale|forex|ford|football|foodnetwork|food|foo|fo|fm|fly|flowers|florist|flir|flights|flickr|fk|fj|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fiat|fi|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|everbank|events|eus|eurovision|eu|etisalat|et|esurance|estate|esq|es|erni|ericsson|er|equipment|epson|epost|enterprises|engineering|engineer|energy|emerck|email|eg|ee|education|edu|edeka|eco|ec|eat|earth|dz|dvr|dvag|durban|dupont|duns|dunlop|duck|dubai|dtv|drive|download|dot|domains|doha|dog|dodge|doctor|docs|do|dnp|dm|dk|dj|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|de|dds|dclk|day|datsun|dating|date|data|dance|dad|dabur|cz|cyou|cymru|cy|cx|cw|cv|cuisinella|cu|csc|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cr|cpa|courses|coupons|coupon|country|corsica|coop|cool|cookingchannel|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|comcast|com|cologne|college|coffee|codes|coach|co|cn|cm|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cl|ck|cityeats|city|citic|citi|citadel|cisco|circle|cipriani|ci|church|chrysler|chrome|christmas|chintai|cheap|chat|chase|channel|chanel|ch|cg|cfd|cfa|cf|cern|ceo|center|ceb|cd|cc|cbs|cbre|cbn|cba|catholic|catering|cat|casino|cash|caseih|case|casa|cartier|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|cancerresearch|camp|camera|cam|calvinklein|call|cal|cafe|cab|ca|bzh|bz|by|bw|bv|buzz|buy|business|builders|build|bugatti|budapest|bt|bs|brussels|brother|broker|broadway|bridgestone|bradesco|br|box|boutique|bot|boston|bostik|bosch|boots|booking|book|boo|bond|bom|bofa|boehringer|boats|bo|bnpparibas|bnl|bn|bmw|bms|bm|blue|bloomberg|blog|blockbuster|blanco|blackfriday|black|bj|biz|bio|bingo|bing|bike|bid|bible|bi|bharti|bh|bg|bf|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|be|bd|bcn|bcg|bbva|bbt|bbc|bb|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|bananarepublic|banamex|baidu|baby|ba|azure|az|axa|ax|aws|aw|avianca|autos|auto|author|auspost|audio|audible|audi|auction|au|attorney|athleta|at|associates|asia|asda|as|arte|art|arpa|army|archi|aramco|arab|ar|aquarelle|aq|apple|app|apartments|aol|ao|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|am|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|alfaromeo|al|akdn|airtel|airforce|airbus|aigo|aig|ai|agency|agakhan|ag|africa|afl|afamilycompany|af|aetna|aero|aeg|ae|adult|ads|adac|ad|actor|active|aco|accountants|accountant|accenture|academy|ac|abudhabi|abogado|able|abc|abbvie|abbott|abb|abarth|aarp|aaa))"}}),null);
__d("CometTaskFramework",["BrowserLockManager","Promise","QuickPerformanceLogger","asyncToGeneratorRuntime","executeTask.xplat","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new Map();function k(a){return{issueTask:function(d,e,f){var g=c("qpl")._(164763515,"1216");(i||(i=c("QuickPerformanceLogger"))).markerStart(g);i.markerAnnotate(g,{string:{type:d}});var j=babelHelpers["extends"]({id:Math.random(),name:d,payload:e},f);return new(h||(h=b("Promise")))(function(d,e){var f=function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{(i||(i=c("QuickPerformanceLogger"))).markerPoint(g,"execute");var b=(yield c("executeTask.xplat")(j.payload,{actorID:a,event:g,taskID:j.id},j.name));i.markerEnd(g,2);d(b)}catch(a){(i||(i=c("QuickPerformanceLogger"))).markerEnd(g,3),e(a)}});return function(){return f.apply(this,arguments)}}();if(!c("BrowserLockManager")||j.queue_name==null)return f();c("promiseDone")(c("BrowserLockManager")==null?void 0:c("BrowserLockManager").request(j.queue_name,f))})}}}function a(a){var b=j.get(a);b==null&&(b=k(a),j.set(a,b));return b}g["default"]=a}),98);
__d("WABaseGlobals",["WAErr"],(function(a,b,c,d,e,f,g){"use strict";var h=null;function a(a){h=a}function i(){if(h==null)throw c("WAErr")("Trying to access WAGlobals before being set");return h}function b(a){var b=i();b.myJids=a}function d(){var a;a=(a=i().myJids)==null?void 0:a.deviceJid;if(a==null)throw c("WAErr")("Trying to access myDeviceJid, but it's not set");return a}function e(){var a;a=(a=i().myJids)==null?void 0:a.userJid;if(a==null)throw c("WAErr")("Trying to access myUserJid, but it's not set");return a}function f(){return i().db}function j(){return i().jidUtils}function k(){return i().config}function l(){return i().qpl}function m(a,b){return i().runInTransaction(a,b)}g.setGlobals=a;g.setMyJids=b;g.getMyDeviceJid=d;g.getMyUserJid=e;g.getDbImpls=f;g.getJidUtilsApi=j;g.getConfig=k;g.getQplConfig=l;g.runInTransaction=m}),98);
__d("WAAssertUnreachable",["WAErr"],(function(a,b,c,d,e,f,g){"use strict";function a(a){throw c("WAErr")("Impossible value, the default statement should never be reached for value: "+a)}g["default"]=a}),98);
__d("WAJids",["WAAssertUnreachable","WAErr"],(function(a,b,c,d,e,f,g){"use strict";var h=0,i="@me",j="@system",k="status@broadcast",aa="0@s.whatsapp.net",l="@g.us",m=/^([1-9][0-9]{0,19}|(?!10)[1-9][0-9]{4,19}-[1-9][0-9]{9})@g.us$/,n="@msgr",ba="msgr",o="@interop",ca="interop",da="@call",p=/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$/,q=/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$/,r=/^([1-9][0-9]{0,19}(:[1-9][0-9]{0,2})?)@msgr$/,s=/^([1-9][0-9]{0,19})@msgr$/,t=/^([1-9][0-9]{0,19})(:0)?@msgr$/,ea="@s.whatsapp.net",fa="s.whatsapp.net",u="@s.whatsapp.net",v="s.whatsapp.net",w="lid",ga="@call",x="@newsletter",y=/^([1-9][0-9]{0,19})@newsletter$/,z=/^(0|((?!10)[1-9][0-9]{4,19}(\.[0-9]{1,2})?(:[0-9]{1,2})))@s.whatsapp.net$/,A=/^(0|((?!10)[1-9][0-9]{4,19})(\.[0-9]{1,2})?)@s.whatsapp.net$/,B="@lid",ha="lid",C=/^([1-9][0-9]{0,14})@lid$/,D=/^([1-9][0-9]{0,14}(:[0-9]{1,2})?)@lid$/,ia="@broadcast",E=/^(status|location|[1-9][0-9]{0,19})@broadcast$/,F=/^([0-9a-fA-F]{18,32})@call$/,G="@hosted",H="hosted",I=/^(((?!10)[1-9][0-9]{4,19})):99@hosted$/,J="@hosted.lid",K="hosted.lid",L=/^([1-9][0-9]{0,14}):99@hosted.lid$/,ja="16505361212"+u,ka=/([0-9a-zA-Z-:]+)@(g\.us|call|s\.whatsapp\.net|broadcast|msgr|lid)/g;function a(a){return""+a+u}function b(a){return""+a+B}function M(a){return""+a+n}function d(a){return a.endsWith(l)?a:""+a+l}function e(a){return a.endsWith(x)?a:""+a+x}function f(a){return a.endsWith(G)?a:""+a+G}function la(a){return a.endsWith(J)?a:""+a+J}function ma(){return l}function N(a){if(a.endsWith(u))return a.slice(0,-u.length);else if(a.endsWith(n))return a.slice(0,-n.length);else if(a.endsWith(o))return a.slice(0,-o.length);else if(a.endsWith(B))return a.slice(0,-B.length);else throw c("WAErr")('userIdFromJid called with non-user jid "'+a+'"')}function na(a,b){return Y(N(a)+":"+b+u)}function oa(a,b){return Z(N(a)+":"+b+n)}function O(a,b){return vb(Q(a)+":"+b+B)}function pa(a,b){return X(N(a)+":"+b+qb(a))}function qa(a){return""+a+ia}function P(a){return a.split("@")[0]}function ra(a){a=a.split("@")[0];a=a.split(":");var b=a[0];a=a[1];a=parseInt(a,10);return{userId:b,deviceID:a}}function sa(a){a=ra(a);return a.deviceID}function ta(a,b){if(a===i||a===j)return b;else return P(a)}function ua(a){return a===i||a===j?null:a}function va(a){if(a===i||a===j)return null;return!a.endsWith(u)?null:a}function wa(a){if(!a.endsWith(u))throw c("WAErr")('phoneNumberFromJid called with non-user jid "'+a+'"');return a.slice(0,-u.length)}function xa(a){if(a.endsWith(u))return wa(a);else if(a.endsWith(B))return Q(a);throw c("WAErr")('lidOrPhoneFromUserJid called with non phone or lid jid "'+a+'"')}function ya(a){return a.endsWith(u)||a.endsWith(o)||a.endsWith(n)||a.endsWith(B)?a:null}function za(a){return a.endsWith(u)?a:null}function Aa(a){return a===k?null:$(a)}function Ba(a){return a===k?null:$(a)}function Ca(a){return a===k?k:null}function Q(a){if(!a.endsWith(B))throw c("WAErr")('lidFromLidUserJid called with non-LidUserJid "'+a+'"');return a.slice(0,-B.length)}function R(a){a=a.split("@");var b=a[0];a=a[1];b=b.split(":")[0];b=b.split(".")[0];a===H&&(a=v);a===K&&(a=w);return wb(b+"@"+a)}function Da(a){return R(a)}function Ea(a){return R(a)}function Fa(a){if(a.jidType==="phoneDevice")return a.deviceJid;else if(a.jidType==="interopDevice")return a.deviceJid;else if(a.jidType==="lidDevice")return a.deviceJid;else if(a.jidType==="msgrDevice")return a.deviceJid;else if(a.jidType==="lidUser")return a.userJid;else if(a.jidType==="interopUser")return a.userJid;else if(a.jidType==="msgrUser")return a.userJid;else if(a.jidType==="phoneUser")return a.userJid;else if(a.jidType==="group")return a.groupJid;else if(a.jidType==="status")return a.statusJid;else if(a.jidType==="call")return a.callJid;else if(a.jidType==="newsletter")return a.newsletterJid;else if(a.jidType==="hosted")return a.hostedDeviceJid;else if(a.jidType==="hostedLid")return a.hostedLidDeviceJid;else{a.jidType;return a.broadcastJid}}function Ga(a){return Y(N(a)+":"+h+u)}function Ha(a){return Z(N(a)+":"+h+n)}function Ia(a){return O(a,h)}function Ja(a){return sa(a)===h}function Ka(a){return Ab(a)}function La(a){return a}function S(a){a=a.split("@");var b=a[0];a=a[1];b=b.split(":");var c=b[0];b=b[1];c=c.split(".");var d=c[0];c=c[1];return{user:d,device:b,agent:c,server:a}}function Ma(a){a=S(a);var b=a.user,c=a.agent;c=c===void 0?"0":c;var d=a.device;d=d===void 0?"0":d;a=a.server;return b+"."+c+":"+d+"@"+a}function Na(a){switch(a.jidType){case"interopUser":return a.userJid;case"lidUser":return a.userJid;case"msgrUser":return a.userJid;case"phoneUser":return a.userJid;case"group":return a.groupJid;case"status":return a.statusJid;case"interopDevice":return a.deviceJid;case"lidDevice":return a.deviceJid;case"msgrDevice":return a.deviceJid;case"phoneDevice":return a.deviceJid;case"broadcast":return a.broadcastJid;case"call":return a.callJid;case"newsletter":return a.newsletterJid;case"hosted":return a.hostedDeviceJid;case"hostedLid":return a.hostedLidDeviceJid;default:return c("WAAssertUnreachable")(a.jidType)}}function Oa(a){if(a===k)return{jidType:"status",statusJid:k};else if(A.test(a))return{jidType:"phoneUser",userJid:xb(a)};else if(q.test(a))return{jidType:"interopUser",userJid:yb(a)};else if(s.test(a))return{jidType:"msgrUser",userJid:zb(a)};else if(t.test(a)){var b=a.substr(0,a.indexOf(":"));return{jidType:"msgrUser",userJid:M(b)}}else if(z.test(a))return{jidType:"phoneDevice",deviceJid:Y(a)};else if(p.test(a))return{jidType:"interopDevice",deviceJid:ub(a)};else if(r.test(a))return{jidType:"msgrDevice",deviceJid:Z(a)};else if(m.test(a))return{jidType:"group",groupJid:a.endsWith(l)?a:""+a+l};else if(E.test(a))return{jidType:"broadcast",broadcastJid:a};else if(F.test(a))return{jidType:"call",callJid:a};else if(C.test(a))return{jidType:"lidUser",userJid:a};else if(D.test(a))return{jidType:"lidDevice",deviceJid:a};else if(y.test(a))return{jidType:"newsletter",newsletterJid:a};else if(I.test(a))return{jidType:"hosted",hostedDeviceJid:a};else if(L.test(a))return{jidType:"hostedLid",hostedLidDeviceJid:a};else return{jidType:"unknown"}}function Pa(a){return a==="status@broadcast"?a:null}function Qa(a){if(A.test(a)||q.test(a)||s.test(a)||C.test(a))return a;else if(t.test(a)){a=a.substr(0,a.indexOf(":"));return M(a)}else return null}function Ra(a){return E.test(a)?a:null}function Sa(a){if(z.test(a)||r.test(a)||p.test(a)||D.test(a)||I.test(a)||L.test(a))return a;return A.test(a)?rb(a):null}function Ta(a){return p.test(a)?a:null}function T(a){return m.test(a)?a:null}function Ua(a){return Pa(a)||T(a)||Ra(a)?a:null}function Va(a){return F.test(a)?a:null}function Wa(a){return a==="s.whatsapp.net"||a==="g.us"?a:null}function Xa(a){return Qa(a)||T(a)}function Ya(a){return y.test(a)?a:null}function Za(a){return I.test(a)?a:null}function $a(a){return L.test(a)?a:null}function ab(a){return ya(a)==null?$(a):null}function bb(a){a=S(a);var b=a.user,c=a.device;c=c===void 0?"0":c;a=a.server;return Y(b+":"+c+"@"+a)}function cb(a){if(a.endsWith(l))return a.slice(0,-l.length);else throw c("WAErr")('groupId called with non-group jid "'+a+'"')}function db(a){var b=Oa(a);if(b.jidType==="unknown")return a;if(b.jidType==="status")return b.statusJid;b.jidType;return Na(b).replace(/^([^@]*)([^@][^@][^@][^@])@(.*)$/,"...$2@$3")}function eb(a){return!a.includes("@")?a:a.replace(ka,db)}function U(a){if(a.endsWith(l))return $(a);else return null}function V(a,b){if(a.endsWith(u))return b.phoneUser(a);else if(a.endsWith(n))return b.msgrUser(a);else if(a.endsWith(o))return b.interopUser(a);else if(a.endsWith(B))return b.lidUser(a);else if(U(a)!=null)return b.group($(a));throw c("WAErr")("Can not switch on chat jid "+a)}function fb(a,b){if(a.endsWith(n))return b.user(a);else if(U(a)!=null)return b.group(a);throw c("WAErr")("Can not switch on chat jid "+a)}function W(a,b){if(a.endsWith(u))return b.user(a);else if(U(a)!=null)return b.group(a);throw c("WAErr")("Can not switch on chat jid "+a)}function gb(a,b){return V(a,{lidUser:function(a){return b.user(a)},interopUser:function(a){return b.user(a)},msgrUser:function(a){return b.user(a)},phoneUser:function(a){return b.user(a)},group:function(a){return b.group(a)}})}function hb(a,b){return a===k?b.status():W(a,{user:b.user,group:b.group})}function ib(a,b){return a===k?b.status():V(a,{interopUser:b.interopUser,phoneUser:b.phoneUser,msgrUser:b.msgrUser,lidUser:b.lidUser,group:b.group})}function jb(a,b){return a===k?b.multicast(k):W(a,{user:b.user,group:b.multicast})}function kb(a){return a.endsWith(B)}function lb(a){return a==="@me"}function mb(a){return a==="@system"}function nb(){return n}function ob(){return u}function pb(){return ea}function qb(a){if(a.endsWith(u))return u;else if(a.endsWith(n))return n;else if(a.endsWith(B))return B;else throw c("WAErr")('userDomainFromJid called with non-user jid "'+a+'"')}function rb(a){return X(N(a)+":"+h+qb(a))}function sb(a){a=a.platform;var b=a==="msgr"?n:u,c=a==="msgr"?da:ga;function d(a){return""+a+b}function e(){return b}function f(){return c}return{toUserJid:d,getUserDomain:e,getGroupCallDomain:f}}function tb(a){return a}function X(a){return a}function Y(a){return a}function Z(a){return a}function ub(a){return a}function vb(a){return a}function wb(a){return a}function xb(a){return a}function yb(a){return a}function zb(a){return a}function $(a){return a}function Ab(a){return a}function Bb(a){return a}function Cb(a){return a}function Db(a){return a}function Eb(a){return V(a,{group:function(a){return cb(a)},lidUser:function(a){return N(a)},interopUser:function(a){return N(a)},phoneUser:function(a){return N(a)},msgrUser:function(a){return N(a)}})}g.DEFAULT_DEVICE_ID=h;g.AUTHOR_ME=i;g.AUTHOR_SYSTEM=j;g.STATUS_JID=k;g.PSA_JID=aa;g.MSGR_USER_DOMAIN=n;g.MSGR_USER_JID_SUFFIX=ba;g.INTEROP_DOMAIN=o;g.INTEROP_USER_JID_SUFFIX=ca;g.WA_SERVER_JID_SUFFIX=fa;g.WA_USER_DOMAIN=u;g.WA_USER_JID_SUFFIX=v;g.WA_LID_SUFFIX=w;g.WA_NEWSLETTER_JID_DOMAIN=x;g.LID_DOMAIN=B;g.LID_SUFFIX=ha;g.HOSTED_DOMAIN=G;g.HOSTED_SUFFIX=H;g.HOSTED_LID_DOMAIN=J;g.HOSTED_LID_SUFFIX=K;g.SURVEY_USER_JID=ja;g.toPhoneUserJid=a;g.toLidUserJid=b;g.toMsgrUserJid=M;g.toGroupJid=d;g.toNewsletterJid=e;g.toHostedDeviceJid=f;g.toHostedLidDeviceJid=la;g.getGroupDomain=ma;g.userIdFromJid=N;g.toPhoneDeviceJid=na;g.toMsgrDeviceJid=oa;g.toLidDeviceJid=O;g.toDeviceJid=pa;g.toBroadcastJid=qa;g.extractUserId=P;g.extractDeviceIDParts=ra;g.extractDeviceId=sa;g.authorToUserId=ta;g.authorAsUserJid=ua;g.authorAsPhoneUserJid=va;g.phoneNumberFromJid=wa;g.lidOrPhoneFromUserJid=xa;g.interpretAsUserJid=ya;g.interpretAsPhoneUserJid=za;g.asChatJid=Aa;g.asPhoneChatJid=Ba;g.asStatusJid=Ca;g.lidFromLidUserJid=Q;g.extractUserJid=R;g.extractPhoneUserJid=Da;g.extractLidUserJid=Ea;g.extractJidFromJidWithType=Fa;g.defaultPhoneDeviceJidForUser=Ga;g.defaultMsgrDeviceJidForUser=Ha;g.defaultLidDeviceJidForLidUserJid=Ia;g.isPrimaryDevice=Ja;g.interpretAsDeviceId=Ka;g.interpretAsNumber=La;g.parseJidParts=S;g.fullFormDeviceJidString=Ma;g.extractFromJid=Na;g.interpretAndValidateJid=Oa;g.validateStatusJid=Pa;g.validateUserJid=Qa;g.validateBroadcastJid=Ra;g.validateDeviceJid=Sa;g.validateInteropDeviceJid=Ta;g.validateGroupJid=T;g.validateMulticastJid=Ua;g.validateCallJid=Va;g.validateDomainJid=Wa;g.validateChatJid=Xa;g.validateNewsletterJid=Ya;g.validateHostedDeviceJid=Za;g.validateHostedLidDeviceJid=$a;g.asMulticastJid=ab;g.stripAgentIdFromPhoneDeviceJid=bb;g.groupIdFromJid=cb;g.sanitizeJidForLogging=db;g.maybeSanitizeLogLineText=eb;g.interpretAsGroupJid=U;g.switchOnChatJidType=V;g.switchOnMsgrChatJidType=fb;g.switchOnPhoneChatJidType=W;g.switchOnUserChatJidType=gb;g.switchOnPhoneJidType=hb;g.switchOnJidType=ib;g.switchOnMulticastJidType=jb;g.isLidUser=kb;g.isAuthorMe=lb;g.isAuthorSystem=mb;g.getMsgrUserDomain=nb;g.getWhatsappUserDomain=ob;g.getServerDomain=pb;g.defaultDeviceJidForUser=rb;g.createJidUtils=sb;g.unsafeCoerceToChatJid=tb;g.unsafeCoerceToDeviceJid=X;g.unsafeCoerceToPhoneDeviceJid=Y;g.unsafeCoerceToMsgrDeviceJid=Z;g.unsafeCoerceToInteropDeviceJid=ub;g.unsafeCoerceToLidDeviceJid=vb;g.unsafeCoerceToUserJid=wb;g.unsafeCoerceToPhoneUserJid=xb;g.unsafeCoerceToInteropUserJid=yb;g.unsafeCoerceToMsgrUserJid=zb;g.unsafeCoerceToGroupJid=$;g.unsafeCoerceToDeviceId=Ab;g.unsafeCoerceToNewsletterJid=Bb;g.unsafeCoerceToHostedDeviceJid=Cb;g.unsafeCoerceToHostedLidDeviceJid=Db;g.threadIdForChatJid=Eb}),98);
__d("WAGlobals",["WABaseGlobals","WAErr","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);h=function(){return a};return a}var i=null;function a(a){i=a,d("WABaseGlobals").setGlobals(a)}function j(){if(i==null)throw c("WAErr")("WaMsgr api called before set");return i}function b(a,b){var d=j();if(d.myJids!=null)throw c("WAErr")("Trying to set UserJid and DeviceJid but they are already set");d.myJids={userJid:a,deviceJid:b}}function k(){var a;a=(a=j().myJids)==null?void 0:a.deviceJid;if(a==null)throw c("WAErr")("Trying to access myDeviceJid, but it's not set");return a}function e(){var a;a=(a=j().myJids)==null?void 0:a.userJid;if(a==null)throw c("WAErr")("Trying to access myUserJid, but it's not set");return a}function f(){return j().db}function l(a){return d("WAJids").extractUserJid(a)===d("WAJids").extractUserJid(k())}function m(){return j().jidUtils}function n(){return j().crypto.manager}function o(){return j().config}function p(){return j().dependencies}function q(a,b,c){return j().runInTransaction(a,b,c)}var r="WAOneQueue is not defined";function s(){var a=j().waOneQueue;if(a==null){d("WALogger").ERROR(h(),r);throw c("WAErr")(r)}return a}g.setGlobals=a;g.setMyJids=b;g.getMyDeviceJid=k;g.getMyUserJid=e;g.getDbImpls=f;g.isPeerDevice=l;g.getJidUtilsApi=m;g.DEPRECATED_getCryptoManager=n;g.getConfig=o;g.getDependencies=p;g.runInTransaction=q;g.getWaOneQueue=s}),98);
__d("WAJobs",["WAErr"],(function(a,b,c,d,e,f,g){"use strict";var h=null;function i(){if(h==null)throw c("WAErr")("WAJobs api called before set");return h}function a(a){h=a}function b(){return i().jobResultConverter}function d(){return i().persistedJobs.api}function e(){return i().persistedJobs.manager}g.setJobsDependencies=a;g.getJobResultConvertersImpls=b;g.getPersistedJobsApi=d;g.getJobManager=e}),98);
__d("MAWGlobals",["WAGlobals","WAJobs","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=null;function j(){if(i==null)throw c("err")("MawMsgr api called before set");return i}function a(){return j().config}function b(a){i=a,d("WAGlobals").setGlobals(a),d("WAJobs").setJobsDependencies(a)}function e(a){if(i==null)throw c("err")("Cannot set CAT before all globals were set");i.fbCat=a}function f(){return j().fbCat}function k(){return j().db}function l(){return j().persistedJobs.api}function m(){return j().persistedJobs.manager}function n(){return j().hmacKey}function o(){return j().dependencies}function p(a){if(i==null)throw c("err")("Cannot set CAT before all globals were set");i.activeThreadKey=a}function q(){return j().activeThreadKey}function r(){return j().offlineResumeStats}g.setMyJids=(h=d("WAGlobals")).setMyJids;g.getMyDeviceJid=h.getMyDeviceJid;g.getMyUserJid=h.getMyUserJid;g.getJobResultConvertersImpls=d("WAJobs").getJobResultConvertersImpls;g.isPeerDevice=h.isPeerDevice;g.getJidUtilsApi=h.getJidUtilsApi;g.getConfig=a;g.setGlobals=b;g.setFbCat=e;g.getFbCat=f;g.getDbImpls=k;g.getPersistedJobsApi=l;g.getJobManager=m;g.getHMACKey=n;g.getDependencies=o;g.setMAWActiveChatThreadKey=p;g.getMAWActiveChatThreadKey=q;g.getOfflineResumeStats=r}),98);
__d("MAWAuthor",["MAWGlobals","WAJids"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return a==null||a===d("WAJids").AUTHOR_SYSTEM?null:d("WAJids").isAuthorMe(a)?d("MAWGlobals").getMyUserJid():d("WAJids").authorAsUserJid(a)};g.getAuthorUserJid=a}),98);
__d("WAStanzaUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}f.toStanzaId=a}),66);
__d("MAWExternalId",["I64","Random","WALogger","WAStanzaUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to parse stanza id ",": ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to parse stanza id "," for platform: ",""]);j=function(){return a};return a}var k=131071;function l(a){return Math.floor(c("Random").random()*a)}function a(){return d("WAStanzaUtils").toStanzaId((h||(h=d("I64"))).to_string(h.and_(h.or_(h.lsl_(h.of_float(Date.now()),22),h.and_(h.of_float(l(k)),h.of_float(k))),h.max_int)))}function b(a){try{var b=(h||(h=d("I64"))).of_float(4063232),c=h.of_float(0),e=h.of_float(131072);b=h.and_(h.of_string(a),b);if((h||(h=d("I64"))).equal(b,c))return"web";return(h||(h=d("I64"))).equal(b,e)?"mobile":"unknown"}catch(b){d("WALogger").ERROR(j(),a,b);return"error"}}function e(a){var b=6917529027641082e3,c=!1;try{c=(h||(h=d("I64"))).equal(h.and_(h.of_string(a),h.of_float(b)),h.of_float(b))}catch(b){d("WALogger").ERROR(i(),a,b)}return c}g.generateExternalId=a;g.getPlatform=b;g.isStnazaId=e}),98);
__d("MAWJids",["WAJids"],(function(a,b,c,d,e,f,g){"use strict";b=(a=d("WAJids")).createJidUtils({platform:"msgr"});c=b.toUserJid;g.jidUtils=b;g.AUTHOR_ME=a.AUTHOR_ME;g.toDeviceJid=a.toDeviceJid;g.toUserJid=c;g.toGroupJid=a.toGroupJid;g.userIdFromJid=a.userIdFromJid;g.interpretAsDeviceId=a.interpretAsDeviceId;g.groupIdFromJid=a.groupIdFromJid;g.defaultDeviceJidForUser=a.defaultDeviceJidForUser;g.extractUserId=a.extractUserId}),98);
__d("LSMessageThreadUnsendabilityStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({CAN_UNSEND:0,DENY_FOR_SPECIFIC_IDS:1,DENY_IF_THREAD_CONTAINS_PAU:2,DENY_IF_THREAD_CONTAINS_WORK_USER:3,DENY_IF_PAGE_THREAD:4,DENY_IF_MARKETPLACE_THREAD:5,DENY_IF_CANNOT_LOAD_THREAD:6,DENY_IF_THREAD_CONTAINS_WORK_USER_FAILING_KILLSWITCH:7,DENY_IF_CANONICAL_THREAD_CONTAINS_BLOCKED_USERS:8,DENY_IF_CANNOT_REPLY_TO_VIEWER_THREAD:9,DENY_IF_UNCONNECTED_THREAD:10});f["default"]=a}),66);
__d("MessagingThreadSubtype",[],(function(a,b,c,d,e,f){a=Object.freeze({ADMIN_MODEL_V2_THREAD:1,FB_GROUP_CHAT:2,MARKETPLACE_THREAD:3,SCHOOL_CHAT:4,DEPRECATED__WORK_SYNCED_CHAT:5,ADMIN_NOT_SUPPORTED_THREAD:6,BELL_SYNCED_CHAT:7,GAMES_APP_THREAD:8,VAULT_CHAT:9,VERSE_CHAT:10,GENERIC_COMMERCE_THREAD:11,USER_JOB_THREAD:12,COWORKER_GROUP_THREAD:13,APPROVAL_ENFORCED_CHATROOM_THREAD:14,PARENT_APPROVED_SHEPHERD_MANAGED_THREAD:15,CAMPUS_GROUP_THREAD:16,LOCAL_COMMUNITIES_THREAD:17,CHAT_FOR_ROOM_THREAD:18,GAMING_PLAY_SQUAD:19,CHAT_FOR_GROUP_ADMIN_TO_MEMBER_THREAD:20,EITM_BACKED_IG_1TO1_THREAD:21,LEARNING_SPACE:23,E2EE_GROUP_THREAD_METADATA:24,IGD_BC_PARTNERSHIP:25,E2EE_1TO1_THREAD_METADATA:26,JOBS_CAREER_GROUP_THREAD:27,IG_CREATOR_SUBSCRIBER_GROUP_THREAD:28,IG_CREATOR_SUBSCRIBER_BROADCAST_CHAT:29,BUSINESS_SUPPORT_THREAD:30,TAGGED_PII_DATA:31,IG_DISCOVERABLE_CHAT_THREAD:32,SUPPORT_MESSAGING_THREAD:33,DISCOVERABLE_PUBLIC_CHAT:34,DISCOVERABLE_PUBLIC_BROADCAST_CHAT:35,DISCOVERABLE_PUBLIC_CHAT_V2:36,IG_DISCOVERABLE_CHAT_THREAD_V2:37,OCULUS_MEDIA_MESSAGING:38,WORK_CHAT_THREAD_CENTRIC:39,COMMUNITY_MESSAGING_PUBLIC_THREAD:40,COMMUNITY_MESSAGING_PRIVATE_THREAD:41,COMMUNITY_MESSAGING_ADMOD_THREAD:42,COMMUNITY_MESSAGING_BROADCAST_THREAD:43,IG_E2EE_GROUP_THREAD_METADATA:44,IG_NFT_BROADCAST_CHAT:45,STANDALONE_COMMUNITY_STANDARD_THREAD:46,IGD_GROUP:47,WORKCHAT_GROUP_THREAD:48,WORKROOM_GROUP_THREAD:49,OCULUS_GROUP_THREAD:50,INTEROP_GROUP:51,IG_BTV_E2EE_1TO1_THREAD_METADATA:52,COMMUNITY_MESSAGING_HELPER_BOT_THREAD:53,COMMUNITY_MESSAGING_SUB_THREAD:54,IG_GROUP_PROFILES:55,IG_PRIVATE_EVENT:56,WA_GENAI_BOT_MAILBOX_THREAD:57,MESSENGER_GENAI_BOT_MAILBOX_THREAD:58,IG_GENAI_BOT_MAILBOX_THREAD:59,E2EE_COMMUNITY_CHAT_METADATA:60,IG_SUBSCRIBER_SOCIAL_CHANNEL:61,IG_SOCIAL_CHANNEL:62,GENERIC_GENAI_BOT_MAILBOX_THREAD:63,GENAI_IMAGINE:64,FB_GENAI_BOT_MAILBOX_THREAD:65,ABRA_GENAI_BOT_MAILBOX_THREAD:66,ONE_TO_ONE:1001,PARENT_APPROVED_ONE_TO_ONE:1002,IG_ONLY_ONE_TO_ONE:1003,INTEROP_ONE_TO_ONE:1004,WHATSAPP_ONE_TO_ONE:1005,WORKCHAT_ONE_TO_ONE:1006,OC_PROXY_ONE_TO_ONE:1007,MARKETPLACE_ASSISTANT_ONE_TO_ONE:1008,PAGE_TO_USER:1009,PAGE_TO_PAGE:1010,MESSENGER_AI_BOT_ONE_TO_ONE:1011,IG_AI_BOT_ONE_TO_ONE:1012,IG_CREATOR_AGENT_SANDBOX:1013,IG_USER_GENERATED_AI_BOT_ONE_TO_ONE:1014,OCULUS:2001});f["default"]=a}),66);
__d("LSMessagingThreadTypeUtil",["I64","LSIntEnum","LSMessageThreadUnsendabilityStatus","LSThreadBitOffset","MWCMIsAnyCMThread","MessagingThreadSubtype","MetaConfig"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(8))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(5))||c("MWCMIsAnyCMThread")(a)||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(3))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(150))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(151))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(154))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(155))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(152))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(153))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(26))}function j(a){return(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(7))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(10))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(13))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(201))}function b(a){return j(a)||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(15))}function k(a){return(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(15))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16))}function e(a){return(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(15))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(201))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2))}function f(a){return a==="e2ee_cutover"||a==="inbox"}function l(a,b){b===void 0&&(b=!0);return!b&&(h||(h=d("I64"))).equal(a.parentThreadKey,(i||(i=d("LSIntEnum"))).ofNumber(0))?!1:d("LSThreadBitOffset").has(21,a)}function m(a){return a!=null&&(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingThreadSubtype").IGD_BC_PARTNERSHIP))}function n(a){return l(a,!1)}function o(a){return(h||(h=d("I64"))).equal(a.parentThreadKey,(i||(i=d("LSIntEnum"))).ofNumber(-3))}function p(a){return a==null?!1:(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingThreadSubtype").BUSINESS_SUPPORT_THREAD))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingThreadSubtype").SUPPORT_MESSAGING_THREAD))}function q(a){var b=(h||(h=d("I64"))).equal(a.threadType,(i||(i=d("LSIntEnum"))).ofNumber(2)),c=(h||(h=d("I64"))).equal(a.threadType,(i||(i=d("LSIntEnum"))).ofNumber(1))&&!K(a);return!p(a.threadSubtype)&&(b||c)}function r(a){return a==null?!1:(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingThreadSubtype").PAGE_TO_USER))}function s(a){return(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(150))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(154))&&c("MetaConfig")._("36")}function t(a){return(v(a)||w(a))&&c("MetaConfig")._("32")}function u(a){return(v(a)||w(a))&&!c("MetaConfig")._("32")}function v(a){return(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(152))}function w(a){return(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(153))}function x(a){return((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(155))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(154)))&&c("MetaConfig")._("36")}function y(a){return(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(154))&&c("MetaConfig")._("36")}function z(a){return a==null?!1:(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(150))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(154))}function A(a){return z(a)||t(a)}function B(a){return(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(26))}function C(a){return(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(17))}function D(a){return(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(19))}function E(a){return a==null?!1:(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(151))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(155))}function F(a){return a==null?!1:E(a)||w(a)}function G(a){return(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(201))}function H(a){return d("LSThreadBitOffset").has(183,a)}function I(a){return k(a)||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(3))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(5))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(6))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(10))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(11))}function J(a){return A(a)||E(a)||w(a)||c("MWCMIsAnyCMThread")(a)||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(17))||B(a)}function K(a){return(h||(h=d("I64"))).equal(a.threadType,(i||(i=d("LSIntEnum"))).ofNumber(1))&&a.cannotUnsendReason!=null&&(h||(h=d("I64"))).equal(a.cannotUnsendReason,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").DENY_IF_PAGE_THREAD))}function L(a){return a!=null&&((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingThreadSubtype").WORKCHAT_GROUP_THREAD))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingThreadSubtype").WORKROOM_GROUP_THREAD))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingThreadSubtype").WORKCHAT_ONE_TO_ONE)))}g.isGroup=a;g.isOpenOneToOne=j;g.isOneToOne=b;g.isSecure=k;g.isRecentsSectionAllowedTypes=e;g.isMessengerOrE2EEInbox=f;g.isMessageRequest=l;g.isPartnership=m;g.isIGDMessageRequest=n;g.isHiddenRequest=o;g.isBusinessSupportThread=p;g.isOpenFnFThread=q;g.isPageToUserThread=r;g.isJoinedSocialChannel=s;g.isDiscoverablePublicBroadcastChannel=t;g.isDiscoverablePublicBroadcastChannelWithNoAccessibility=u;g.isJoinedDiscoverablePublicBroadcastChannel=v;g.isUnjoinedDiscoverablePublicBroadcastChannel=w;g.isSocialChannelV2=x;g.isJoinedSocialChannelV2=y;g.isSocialChannel=z;g.isDiscoverableChannel=A;g.isCMSubthread=B;g.isCMFolder=C;g.isCMGroupUnjoined=D;g.isSocialChannelUnjoined=E;g.isChannelPreview=F;g.isAiBot=G;g.isAiBotSummoning=H;g.isPrivateThread=I;g.isPublicCMThread=J;g.isThreadForPage=K;g.isWorkThread=L}),98);
__d("MAWBridgeDropAllSecureThreadsHandler",["I64","LSIntEnum","LSMessagingThreadTypeUtil","Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a){var c=d("ReQL").fromTableAscending(a.threads_ranges_v2__generated).filter(function(a){return(i||(i=d("I64"))).equal(a.parentThreadKey,(j||(j=d("LSIntEnum"))).ofNumber(-1))||(i||(i=d("I64"))).equal(a.parentThreadKey,(j||(j=d("LSIntEnum"))).ofNumber(-10))});return d("ReQL").toArrayAsync(c).then(function(c){return c.reduce(function(b,c){return b.then(function(){return a.threads_ranges_v2__generated["delete"](c.parentThreadKey,c.minThreadKey,c.minLastActivityTimestampMs)})},(h||(h=b("Promise"))).resolve())})}function l(a){var c=d("ReQL").fromTableAscending(a.threads).filter(function(a){return d("LSMessagingThreadTypeUtil").isSecure(a.threadType)});return d("ReQL").toArrayAsync(c).then(function(c){return c.reduce(function(b,c){return b.then(function(){return a.threads["delete"](c.threadKey)})},(h||(h=b("Promise"))).resolve())})}function a(a){return(h||(h=b("Promise"))).all([k(a),l(a)]).then(function(){return(h||(h=b("Promise"))).resolve()})}g.call=a}),98);
__d("IGDDataclassTypes.flow",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({Bold:"BOLD",Italic:"ITALIC",Strikethrough:"STRIKETHROUGH",Underline:"UNDERLINE",Invalid:"INVALID"});d=a({Once:"ONCE",Replayable:"REPLAYABLE",Permanent:"PERMANENT"});e=a({ShhMode:"SHH_MODE",DisappearingMessage:"DISAPPEARING_MESSAGE"});b=a({Share:"SHARE",Reply:"REPLY",React:"REACT",Mention:"MENTION"});var g=a({Note:"NOTE",Story:"STORY",Profile:"PROFILE",Clip:"CLIP",Feed:"FEED",Live:"LIVE",Comment:"COMMENT",ReelsAudio:"REELS_AUDIO",MediaNote:"MEDIA_NOTE",StoryHighlight:"STORY_HIGHLIGHT",SocialContext:"SOCIAL_CONTEXT"});a=a({Mention:"MENTION",Reply:"REPLY"});f.TextFormatStyle=c;f.ViewMode=d;f.EphemeralityProductType=e;f.XmsgIgXmaActionType=b;f.XmsgIgReceiverFetchContentType=g;f.XmsgIgReceiverFetchXmaMediaNoteFetchParamsMessageType=a}),66);
__d("InstamadilloMessageIdUtils",["FBLogger","I64","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b){var c;(h||(h=d("I64"))).isI64(a)?c=(h||(h=d("I64"))).to_string(a):c=a;return c+":"+b}function a(a){a=a.split(":");if(a.length!==2)throw c("FBLogger")("igd_web_on_msgr").mustfixThrow("Invalid instamadillo message id format. Format is <threadKey>:<stanzaId>.");return{stanzaId:a[1],threadKey:a[0]}}function b(a){a=a.message.decrypted.id;var b=a.externalId;a=d("WAJids").threadIdForChatJid(a.chat);return i(a,b)}g.toInstamadilloMessageId=i;g.fromInstamadilloMessageId=a;g.getInstsamadilloMessageIdFromStanza=b}),98);
__d("IGDXMAAttachmentUtil",["bx"],(function(a,b,c,d,e,f,g){"use strict";b=c("bx").getURL(c("bx")("13341"));var h=String.fromCodePoint(128293),i=String.fromCodePoint(128546),j=String.fromCodePoint(128079),k=String.fromCodePoint(128558),l=String.fromCodePoint(128514),m=String.fromCodePoint(128525);function a(a){return a!=null?a===h||a===i||a===j||a===k||a===l?!0:a===m:!1}g.DEFAULT_PROFILE_URL=b;g.isEmojiReaction=a}),98);
__d("LSDatabaseSingletonLazyWrapper",["LSDatabaseSingleton"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return(h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton}g["default"]=a}),98);
__d("MWLinkRegex",[],(function(a,b,c,d,e,f){"use strict";function a(){var a="(?:(?:[a-z]+:)?//)?",b="(?:\\S+(?::\\S*)?@)?",c="(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)",d="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",e="(?:\\.(?:((?:[a-z\\u00a1-\\uffff]{2,}))))\\.?",f="(?::\\d{2,5})?",g='(?:[/?#][^\\s"]*)?';a="(?:"+a+"|www\\.)"+b+"(?:localhost|"+c+d+e+")"+f+g;return new RegExp(a,"ig")}function b(){var a="(^|)[^@\\s]+@[^@]+[.][^@\\s]+(?!\\S)";return new RegExp(a,"ig")}f.getLinkRegex=a;f.getEmailRegex=b}),66);
__d("VideoPlayerWithLiveVideoInterruptedOverlay.react",["fbt","CometLoadingAnimation.react","TetraTextPairing.react","VideoPlayerHooks","VideoPlayerInteractionOverlay.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||d("react");function a(){var a=(j||(j=d("VideoPlayerHooks"))).useStreamInterrupted(),b=j.useIsLiveRewindActive();return!a||b?null:k.jsx(d("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{children:k.jsxs("div",{className:"x6s0dn4 x18l40ae x1ey2m1c x9f619 x78zum5 xds687c xdt5ytf xl56j7k x10l6tqk x17qophe x13vifvy",children:[k.jsx("div",{children:k.jsx(c("TetraTextPairing.react"),{body:h._("__JHASH__VF7_ry1JLc___JHASH__"),bodyColor:"white",headline:h._("__JHASH__BFvlG3IxPd7__JHASH__"),headlineColor:"white",level:2,textAlign:"center"})}),k.jsx("div",{className:"xc9qbxq x1sy10c2 x1n2onr6 x14qfxbe",children:k.jsx(c("CometLoadingAnimation.react"),{size:36})})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("URLMatcher",["URLMatcherConfig"],(function(a,b,c,d,e,f){d="!\"#%&'()*,-./:;<>?@[\\]^_`{|}";f="\u2000-\u206f\xab\xbb\uff08\uff09";var g="(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])",h="(?:https?)://";g="(?:(?:"+g+"[.]){3}"+g+")";var i="\\[(?:(?:[A-Fa-f0-9]{1,4}::?){1,7}[A-Fa-f0-9]{1,4})\\]",j="(?:\\b)www\\d{0,3}[.]";d="[^\\s"+d+f+"]";f="(?:(?:(?:[.:\\-_%@]|"+d+")*"+d+")|"+i+")";d="(?::\\d+){0,1}";var k="(?=[/?#])";b=b("URLMatcherConfig").tlds;var l="(?:(?:"+h+f+d+")|(?:"+g+d+")|(?:"+i+d+")|(?:"+j+f+b+d+")|(?:"+f+b+d+k+"))";k="(?:(?:"+h+f+d+")|(?:"+g+d+")|(?:"+i+d+")|(?:"+j+f+b+d+")|(?:"+f+b+d+"))";g="[/#?]";i="\\([^\\s()<>]+\\)";var m="[^\\s()<>?#]+",n=new RegExp(l,"im"),o="^\\[[0-9]{1,4}:[0-9]{1,4}:[A-Fa-f0-9]{1,4}\\]",p=new RegExp(o,"im"),q="(?:(?:"+g+")(?:(?:"+i+"|"+m+")*)*)*",r=new RegExp("((?:"+k+")(?:"+q+"))","im");function a(){r.compile()}var s=new RegExp("((?:"+h+f+d+")|(?:"+j+f+b+d+"))"),t=/[\s\'\";]/,u=new RegExp(g,"im"),v=new RegExp("[\\s!\"#%&'()*,./:;<>?@[\\]^`{|}\xab\xbb\u2000-\u206f\uff08\uff09]","im"),w=new RegExp("[\\s()<>?#]","im"),x=new RegExp("\\s()<>"),y=function(a){if(a!=null&&a.indexOf("@")!=-1)return s.exec(a)?a:null;else return a},z=function(a){return new RegExp("((?:"+l+")(?:"+q+"))",a)};function c(){return r.source}o=function(a){return A(a,z("im"))};i=function(a){return B(a,z("igm"))};m=function(a){return A(a,r)};var A=function(a,b){b=b.exec(a);return b==null||b.length===0?null:y(b[1]||null)},B=function(a,b){a=a.match(b);return a==null?[]:a.filter(Boolean)||[]};k=function(a){return n.exec(a)};h=function(a){return!t.test(a.charAt(a.length-1))};j=function(a){a=a;var b=!1;do{var c=n.exec(a);if(!c)return null;b=!1;if(c[0][0]==="["&&c.index>0&&a[c.index-1]==="@"){var d=p.exec(c[0]);d&&(b=!0,a=a.substr(c.index+d[0].length))}}while(b);if(!c)return null;d=a.substr(c.index+c[0].length);if(d.length===0||!u.test(d[0]))return y(c[0]);b=0;a=0;var e=1,f=["(","["],g=[")","]"],h=0,i=a;for(var j=1;j<d.length;j++){var k=d[j];if(i===a){if(f.includes(k))h+=1,i=e;else if(u.test(k)||!v.test(k))b=j;else if(w.test(k))break}else if(f.includes(k))h+=1;else if(g.includes(k))h-=1,h===0&&(i=a,b=j);else if(x.test(k))break}return y(c[0]+d.substring(0,b+1))};f={compilePermissiveHostPathMatcher:a,permissiveHostPathMatch:m,permissiveMatch:o,permissiveMultiMatch:i,matchToPattern:A,multiMatchToPattern:B,matchHost:k,trigger:h,match:j,getPermissiveHostPathMatcherSource:c};e.exports=f}),null);
__d("LSMessageRenderingType",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:0,NON_COLLAPSIBLE_ADMIN_MESSAGE:1,HIDDEN:2,RICH_TEXT_COMMON_MARK:3});f["default"]=a}),66);
__d("LSMessageReplySourceType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,LIGHTWEIGHT_STATUS:6,LIGHTWEIGHT_STATUS_REACTION:7,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16,AVATAR_DETAIL:17,NOTE_REPLY_ARMADILLO:18,HIGHLIGHTS_TAB_CARDS_FOR_MOM:19});f["default"]=a}),66);
__d("LSMessageSendStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,SENDING_TO_SERVER:1,SERVER_RECEIVED:2,NON_RETRIABLE_ERROR:4,RETRIABLE_ERROR:5});f["default"]=a}),66);
__d("LSQuickReplyType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,HORIZONTAL:1,VERTICAL:2});f["default"]=a}),66);
__d("LSReplyMessageAttachmentType",[],(function(a,b,c,d,e,f){a=Object.freeze({OTHER:0,PHOTO:1,VIDEO:2,GIF:3,STICKER:4,LINK:5,MULTIPHOTO:6,PERMANENT_RAVEN_PHOTO:7,PERMANENT_RAVEN_VIDEO:8,SOUND_BITE:9,AUDIO:10,ROLL_CALL_PHOTO_CONTRIBUTION:11,ROLL_CALL_VIDEO_CONTRIBUTION:12,FEED_POST:13,POWER_UP:14,XMA:15,ROLL_CALL_TEXT_CONTRIBUTION:16});f["default"]=a}),66);
__d("LSReplyMessageStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,VALID:1,DELETED:2,TEMPORARY_UNAVAILABLE:3,EXPIRED:4});f["default"]=a}),66);
__d("LSXmaContentType",[],(function(a,b,c,d,e,f){a=Object.freeze({TEST:-1,NONE:0,IG_MEDIA_SHARE:1e3,IG_MULTIPOST_SHARE:1001,IG_STORY_REPLY:1002,IG_STORY_PHOTO_SHARE:1003,IG_STORY_PHOTO_MENTION:1004,IG_CLIPS_SHARE:1005,IG_SINGLE_VIDEO_POST_SHARE:1006,IG_STORY_VIDEO_SHARE:1007,IG_STORY_REACTION:1008,IG_IGTV_SHARE:1009,IG_SHOP_SHARE:1010,IG_PROFILE_SHARE:1011,IG_STORY_PHOTO_HIGHLIGHT_SHARE:1012,IG_STORY_VIDEO_HIGHLIGHT_SHARE:1013,IG_STORY_VIDEO_MENTION:1014,IG_STORY_HIGHLIGHT_REPLY:1015,IG_STORY_HIGHLIGHT_REACTION:1016,IG_EXTERNAL_LINK:1017,IG_RECEIVER_FETCH:1018,IG_TEXT_POST_APP_SHARE:1019,FB_FEED_SHARE:2e3,FB_STORY_REPLY:2001,FB_STORY_SHARE:2002,FB_STORY_MENTION:2003,FB_FEED_VIDEO_SHARE:2004,FB_GAMING_CUSTOM_UPDATE:2005,FB_PRODUCER_STORY_REPLY:2006,FB_EVENT:2007,FB_FEED_POST_PRIVATE_REPLY:2008,FB_SHORT:2009,MSG_EXTERNAL_LINK_SHARE:3e3,MSG_P2P_PAYMENT:3001,MSG_LOCATION_SHARING_DEPRECATED:3002,MSG_LOCATION_SHARING_V2:3003,MSG_RECEIVER_FETCH:3006,MSG_IG_MEDIA_SHARE:3007,MSG_GEN_AI_SEARCH_PLUGIN_RESPONSE:3008,MSG_REELS_LIST:3009,MSG_CONTACT:3010,MSG_FILE:3012,MSG_AI_CONTACT:3014,MSG_MEMORIES_SHARE:3015,MSG_EARLY_ACCESS_FB_SHARE:3016,RTC_AUDIO_CALL:4e3,RTC_VIDEO_CALL:4001,RTC_MISSED_AUDIO_CALL:4002,RTC_MISSED_VIDEO_CALL:4003,RTC_GROUP_AUDIO_CALL:4004,RTC_GROUP_VIDEO_CALL:4005,RTC_MISSED_GROUP_AUDIO_CALL:4006,RTC_MISSED_GROUP_VIDEO_CALL:4007,LIVE_LOCATION:5e3,OC_AVATAR_STATIC_STICKER:6e3});f["default"]=a}),66);
__d("MNLSXMALayoutType",[],(function(a,b,c,d,e,f){a=Object.freeze({SINGLE:0,HSCROLL:1,XCENTER:2,PORTRAIT:4,LAYERED:5,PLACEHOLDER:6,EXPIRED_PLACEHOLDER:7,PILE_PROMPT:8,STACK:9,SHARED_STACK:10,STACK_CARD:11,STANDARD_DXMA:12,DXMA_PLACEHOLDER:13,THREAD_SHORTCUT:14,LIST_DXMA:15,GRID:16,BLOKS_XMA:17});f["default"]=a}),66);
__d("MNXMAPreviewImageDecorationType",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:0,COLLAGE:1,VIDEO:2,MESSENGER_ICON:3,INSTAGRAM_ICON:4,SHOPPING:5,UPCOMING_EVENT:6,LIVE:7,REEL:8,IGTV:9,YOUTUBE_VIDEO:10,YOUTUBE_SHORTS:11,COMMENT:12,BLUR:13,PILL:14,MESSENGER_CHANNEL_IMAGE:15});f["default"]=a}),66);
__d("MessagingAttachmentType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,STICKER:1,IMAGE:2,ANIMATED_IMAGE:3,VIDEO:4,AUDIO:5,FILE:6,XMA:7,EPHEMERAL_IMAGE:8,EPHEMERAL_VIDEO:9,SELFIE_STICKER:10,SOUND_BITE:12,CATALOG_ITEM:13,POWER_UP:14,THIRD_PARTY_STICKER:15});f["default"]=a}),66);
__d("LSGetIfViewerIsWorkplaceUser",["gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,b=a[a.length-1],d=[];return d[0]=c("gkx")("26374"),b.resolve(d)}b=a;g["default"]=b}),98);
__d("LSBumpThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.i64.eq(a[1],b.i64.cast([0,1]))?b.forEach(b.db.table(9).fetch([[[a[2]]]]),function(b){var c=b.update;b.item;return c({lastReadWatermarkTimestampMs:a[0],lastActivityTimestampMs:a[0]})}):b.i64.eq(a[1],b.i64.cast([0,2]))?b.forEach(b.db.table(9).fetch([[[a[2]]]]),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:a[0]})}):b.i64.eq(a[1],b.i64.cast([0,3]))?b.db.table(9).fetch([[[a[2]]]]).next().then(function(c,d){var e=c.done;c=c.value;return e?0:(d=c.item,b.i64.le(d.lastActivityTimestampMs,d.lastReadWatermarkTimestampMs)?b.forEach(b.db.table(9).fetch([[[a[2]]]]),function(b){var c=b.update;b.item;return c({lastReadWatermarkTimestampMs:a[0],lastActivityTimestampMs:a[0]})}):b.forEach(b.db.table(9).fetch([[[a[2]]]]),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:a[0]})}))}):b.resolve(0)},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSGetThreadParticipantDisplayName",["LSGetIfViewerIsWorkplaceUser"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return c.storedProcedure(b("LSGetIfViewerIsWorkplaceUser")).then(function(a){return a=a,d[0]=a[0],a})},function(b){return d[0]?c.sequence([function(b){return c.filter(c.db.table(7).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.id,a[1])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(a,b){var e=a.done;a=a.value;return e?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2352696798]),void 0).then(function(a){return d[4]=a})},function(a){return d[2]=d[4]}]):(b=a.item,d[2]=b.name)})},function(a){return d[1]=d[2]}]):c.sequence([function(b){return c.filter(c.db.table(14).fetch([[[a[0],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[1])}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[2]=void 0:(b=a.item,d[2]=b.nickname)})},function(b){return c.filter(c.db.table(7).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.id,a[1])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(a,b){var e=a.done;a=a.value;return e?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[6]=a})},function(a){return d[4]=d[6]}]):(b=a.item,d[4]=b.firstName==null?b.name:b.firstName)})},function(a){return d[1]=d[2]==null?d[4]:d[2]}])},function(a){return e[0]=d[1]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSVerifyThreadExistsV2",["LSGetViewerFBID","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return[c.i64.cast([0,7]),c.i64.cast([0,8]),c.i64.cast([0,13]),c.i64.cast([0,10]),c.i64.cast([0,11]),c.i64.cast([0,16])].some(function(b){return c.i64.eq(a[1],b)})?c.resolve((b=[!1,!1,!1],d[0]=b[0],d[1]=b[1],d[2]=b[2],b)):c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?(f=[!0,!0,!1],d[3]=f[0],d[4]=f[1],d[5]=f[2],f):(e=b.item,d[12]=e.threadName,d[11]=e.authorityLevel,d[10]=e.threadType,e.folderName==="other"?(f=[!0,!1,!1],d[7]=f[0],d[8]=f[1],d[9]=f[2],f):(c.i64.eq(d[10],c.i64.cast([0,0]))&&c.i64.eq(d[11],c.i64.cast([0,40]))||[c.i64.cast([0,23]),c.i64.cast([0,21]),c.i64.cast([0,18]),c.i64.cast([0,26])].some(function(a){return c.i64.eq(d[10],a)})&&c.i64.neq(d[11],c.i64.cast([0,20]))&&((d[12]===""?void 0:d[12])===void 0||c.i64.lt(d[11],c.i64.cast([0,80])))||[c.i64.cast([0,151]),c.i64.cast([0,155]),c.i64.cast([0,153])].some(function(a){return c.i64.eq(d[10],a)})||[c.i64.cast([0,24]),c.i64.cast([0,22]),c.i64.cast([0,19]),c.i64.cast([0,25])].some(function(a){return c.i64.eq(d[10],a)})||[c.i64.cast([0,150]),c.i64.cast([0,154]),c.i64.cast([0,152])].some(function(b){return c.i64.eq(a[1],b)})&&c.i64.lt(d[11],c.i64.cast([0,80]))||[c.i64.cast([0,150]),c.i64.cast([0,154]),c.i64.cast([0,152])].some(function(b){return c.i64.eq(a[1],b)})&&c.i64.eq(a[6],c.i64.cast([0,205]))&&(c.i64.eq(e.syncGroup,void 0)||!1)?(b=[!0,!0,!1],d[13]=b[0],d[14]=b[1],d[15]=b[2],b):(c.i64.ge(d[11],a[4])||c.i64.eq(d[11],c.i64.cast([0,20]))&&(c.i64.eq(a[1],c.i64.cast([0,2]))||[c.i64.cast([0,23]),c.i64.cast([0,21]),c.i64.cast([0,18]),c.i64.cast([0,26])].some(function(b){return c.i64.eq(a[1],b)}))?(f=[!1,!1,!1],d[16]=f[0],d[17]=f[1],d[18]=f[2],f):(e=[!0,!1,!0],d[16]=e[0],d[17]=e[1],d[18]=e[2],e),b=[d[16],d[17],d[18]],d[13]=b[0],d[14]=b[1],d[15]=b[2],b),f=[d[13],d[14],d[15]],d[7]=f[0],d[8]=f[1],d[9]=f[2],f),e=[d[7],d[8],d[9]],d[3]=e[0],d[4]=e[1],d[5]=e[2],e)})},function(a){return a=[d[3],d[4],d[5]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(e){return d[0]?(d[3]=new c.Map(),d[3].set("thread_fbid",a[0]),d[3].set("force_upsert",a[5]),d[3].set("use_open_messenger_transport",!1),d[3].set("sync_group",a[6]),d[3].set("metadata_only",a[7]),d[3].set("preview_only",!1),d[4]=d[3].get("thread_fbid"),d[3],d[5]=c.toJSON(d[3]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[4]),c.i64.cast([0,209]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.resolve()},function(e){return d[1]?c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?c.sequence([function(b){return c.filter(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(b,e){var a=b.done;b=b.value;return a?d[13]=!1:(e=b.item,d[13]=c.i64.eq(e.contactTypeExact,c.i64.cast([0,16]))?!0:!1)})},function(a){return d[3]=d[13]}]):(e=b.item,d[3]=c.i64.eq(e.threadType,c.i64.cast([0,201]))?!0:!1)})},function(b){return d[5]=c.i64.cast([0,1083495711]),d[6]=c.i64.cast([0,0]),d[7]=c.i64.cast([0,0]),d[8]=c.i64.cast([0,0]),d[9]=c.i64.cast([0,8650752]),d[10]=c.i64.cast([0,0]),d[11]=c.i64.cast([0,0]),d[12]=c.i64.cast([0,0]),c.forEach(c.filter(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.lt(b.authorityLevel,a[4])}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:a[0],mailboxType:c.i64.cast([0,0]),threadType:a[1],syncGroup:a[6],folderName:a[2],lastReadWatermarkTimestampMs:c.i64.cast([0,0]),removeWatermarkTimestampMs:c.i64.cast([-1,4294967295]),ongoingCallState:c.i64.cast([0,0]),parentThreadKey:a[3],authorityLevel:a[4],capabilities:d[3]?d[9]:d[5],capabilities2:d[3]?d[10]:d[6],capabilities3:d[3]?d[11]:d[7],capabilities4:d[3]?d[12]:d[8],unsendLimitMs:c.i64.cast([-1,4294967295])})},function(e){return[c.i64.cast([0,1]),c.i64.cast([0,201])].some(function(b){return c.i64.eq(a[1],b)})?c.sequence([function(b){return c.forEach(c.filter(c.db.table(14).fetch([[[a[0],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[0])&&c.i64.lt(b.authorityLevel,a[4])}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[0],contactId:a[0],readWatermarkTimestampMs:c.i64.cast([0,0]),deliveredWatermarkTimestampMs:c.i64.cast([0,0]),authorityLevel:a[4],isModerator:!1})},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[13]=a[0],a})},function(b){return c.forEach(c.filter(c.db.table(14).fetch([[[a[0],d[13]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,d[13])&&c.i64.lt(b.authorityLevel,a[4])}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[0],contactId:d[13],readWatermarkTimestampMs:c.i64.cast([0,0]),deliveredWatermarkTimestampMs:c.i64.cast([0,0]),authorityLevel:a[4],isModerator:!1})}]):c.resolve()}]):c.resolve()},function(b){return d[2]?c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({authorityLevel:a[4]})}):c.resolve()}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSVerifyThreadRowExistsV2",["LSVerifyThreadExistsV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.i64.eq(a[1],c.i64.cast([0,5]))?d[0]=c.i64.cast([-1,4294967284]):d[0]=c.i64.cast([0,0]),c.storedProcedure(b("LSVerifyThreadExistsV2"),a[0],a[1],"inbox",d[0],a[3],!1,a[2],!1,!1)},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSVerifyThreadRowExistsV2StoredProcedure",["LSVerifyThreadRowExistsV2","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;d[1]=b.threadType;d[2]=b.syncGroup;d[3]=b.authorityLevel;return c("LSVerifyThreadRowExistsV2").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("OfflineThreadingId",["I64","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("I64"))).of_string("4194303");function a(){return(h||(h=d("I64"))).to_string(j())}function j(){var a=d("XPlatReactCrypto").getRandomValues(new Uint8Array(8));a=new DataView(a.buffer);a=(h||(h=d("I64"))).add(h.lsl_(h.of_int32(a.getUint32(0)),32),h.of_int32(a.getUint32(4)));return k(Date.now(),a)}function k(a,b){return(h||(h=d("I64"))).and_(h.or_(h.lsl_(h.of_float(a),22),h.and_(b,i)),h.max_int)}function b(a){var b=j(),c=[];for(var e=0;e<a.length;e++)c.push([a[e],(h||(h=d("I64"))).to_string(b)]),b=l(b);return c}function l(a,b){b===void 0&&(b=(h||(h=d("I64"))).one);var c=m(a);a=n(a);return k(c,(h||(h=d("I64"))).add(a,b))}function m(a){return(h||(h=d("I64"))).to_float(h.lsr_(a,22))}function n(a){return(h||(h=d("I64"))).and_(a,i)}g.createOfflineThreadingID=a;g.createForItemsInOrder=b;g.extractTimestamp=m}),98);
__d("WALongInt",["WAHex","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is over 64 bits']);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid decimal string']);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([""," is not a safe integer"]);j=function(){return a};return a}function k(a){if(typeof a!=="number"){d("WALogger").LOG(j(),a).color("red");throw new Error("numberOrThrowIfTooLarge is given a non-safe integer")}return a}e=function(a){return a==null?a:k(a)};function a(a,b){if(typeof a==="number"&&typeof b==="number")return a>b;a=typeof a==="number"?d("WAHex").hexLongFromNumber(a):a;b=typeof b==="number"?d("WAHex").hexLongFromNumber(b):b;return d("WAHex").isBiggerHexLong(a,b)}function b(a){if(typeof a==="number")return a.toString(10);var b=d("WAHex").hexLongToHex(a),c=[0],e=0;for(var f=0;f<b.length;f++){e=d("WAHex").hexAt(b,f);for(var g=0;g<c.length;g++)c[g]=c[g]*16+e,e=c[g]/10|0,c[g]%=10;while(e>0)c.push(e%10),e=e/10|0}g=c.reverse().join("");return d("WAHex").hexLongIsNegative(a)?"-"+g:g}function c(a){if(!/^-?\d+$/.test(a)){d("WALogger").LOG(i(),a).color("red");throw new Error("decimalStringToLongInt is given an invalid decimal string")}var b=a[0]==="-",c=a.replace(/^-?0*/,""),e=c.length;if(e<16||e===16&&c<="9007199254740991")return b?-Number(c):Number(c);if(e>20||e===20&&c>"18446744073709551615"||b&&(e>19||e===19&&c>"9223372036854775807")){d("WALogger").LOG(h(),a).color("red");throw new Error("decimalStringToHexLong is given value over 64 bits")}a=0;var f=0;for(var g=0;g<e;g++)a=a*10+Number(c[g]),f=f*10+Math.floor(a/4294967296),a=a%4294967296;return d("WAHex").createHexLongFrom32Bits(f,a,b)}g.numberOrThrowIfTooLarge=k;g.maybeNumberOrThrowIfTooLarge=e;g.isBiggerLongInt=a;g.longIntToDecimalString=b;g.decimalStringToLongInt=c}),98);
__d("WATimeUtils",["Promise","WAHex"],(function(a,b,c,d,e,f,g){"use strict";var h,i=60,j=5*i,k=60*i,l=24*k,m=7*l,n=365*l,o=60*1e3,p=k*1e3,q=24*p,r=7*q,s=1<<31,t=~s,u=s+1,v={time:0,day:-4},w=0;function a(){return w}function c(a){w=a}function e(a){return Z(a).toUTCString()}function x(a){a=a|0;return Math.max(u,Math.min(a,t))}function y(a){return x(a/1e3)}function f(a){if(typeof a!=="number")if(d("WAHex").hexLongIsNegative(a))return u;else return t;else return x(a)}function z(a){return a==null?a:a>t?y(a):x(a)}function A(){return B($()-w*1e3)}function B(a){return a}function C(a){return a}function D(a){return B(a*1e3)}function E(a){return a<u||a>t}function F(a,b){var c=K();a=Math.max(a+b-c,0);return Math.min(1e3*a,~(1<<31))}function G(a,b){b=b!=null?b:K();return x(Math.ceil(b+Math.max(a,0)))}function H(a,b){b=b!=null?b:K();return x(Math.ceil(b-Math.max(a,0)))}function I(a){a=Math.max(a-K(),0);return Math.min(1e3*a,~(1<<31))}function J(a){var c=I(a);return new(h||(h=b("Promise")))(function(a){return void setTimeout(a,c)})}function K(){return x(Date.now()/1e3-w)}function L(){return x(Date.now()/1e3)}function M(){return x(new Date().setHours(0,0,0,0)/1e3-w)}function N(a){return x(Z(a).setHours(0,0,0,0)/1e3-w)}function O(){return Date.now()-w*1e3}function P(a){return Math.max(a-K(),0)}function Q(a){return P(a)>0}function R(){return performance.now()}function S(a){return Math.floor(performance.now()-a)}function T(a,b){return a<b?a:b}var U=function(){function a(){var a=R();this.$1=a;this.$2=a}var b=a.prototype;b.reset=function(){this.$2=R()};b.elapsed=function(){return S(this.$2)};b.cumulative=function(){return S(this.$1)};return a}();function V(a){return Math.max(K()-a,0)}function W(){return new Date()}function X(a,b,c){return Math.abs(a-b)<=c}function Y(a,b){return X(K(),a,b)}function Z(a){return new Date(a*1e3)}function aa(a,b){if(Math.abs(a-b)>l)return!1;a=v.time===a?v.day:Z(a+w).getDay();var c=v.time===b?v.day:Z(b+w).getDay();v.time=b;v.day=c;return a===c}function ba(a){a=a-K();return a<=l}function ca(a){a=Number.parseInt(a,16);return Number.isFinite(a)?new Date(x(a)*1e3):null}function $(){return Date.now()}function da(a,b){a=Math.abs(a-b);return Math.ceil(a/q)}g.MINUTE_SECONDS=i;g.FIVE_MINUTES=j;g.HOUR_SECONDS=k;g.DAY_SECONDS=l;g.WEEK_SECONDS=m;g.YEAR_SECONDS=n;g.MINUTE_MILLISECONDS=o;g.HOUR_MILLISECONDS=p;g.DAY_MILLISECONDS=q;g.WEEK_MILLISECONDS=r;g.DEFAULT_UNIXTIME=s;g.MAX_INT=t;g.getClockSkew=a;g.setClockSkew=c;g.toHttpHeaderDate=e;g.castToUnixTime=x;g.castMilliSecondsToUnixTime=y;g.castLongIntToUnixTime=f;g.castMillisTimeToUnixTime=z;g.millisTime=A;g.castToMillisTime=B;g.fromMillisTime=C;g.castUnixTimeToMillisTime=D;g.isOverflowTime=E;g.timeoutFor=F;g.futureUnixTime=G;g.pastUnixTime=H;g.cappedMillisecondsUntil=I;g.delayUntil=J;g.unixTime=K;g.unixTimeWithoutClockSkewCorrection=L;g.midnight=M;g.midnightOn=N;g.unixTimeMs=O;g.secondsUntil=P;g.isInFuture=Q;g.monotonicTime=R;g.monotonicTimeSince=S;g.oldest=T;g.MonotonicTimer=U;g.timeSince_USE_ONLY_IF_APPROVED=V;g.unskewedDate_USE_ONLY_IF_APPROVED=W;g.happenedWithinAt=X;g.happenedWithin=Y;g.toDate=Z;g.sameDay=aa;g.isWithinNext24h=ba;g.convertHexToDate=ca;g.performanceAbsoluteNow=$;g.daysDiff=da}),98);/*FB_PKG_DELIM*/
__d("OCCastingZenonUtils",["UserAgent","gkx"],(function(a,b,c,d,e,f,g){"use strict";b=function(a){return a==="Connected"||a==="Connecting"};function a(){return c("gkx")("25763")&&(c("UserAgent").isBrowser("Chrome for iOS")||c("UserAgent").isBrowser("Mobile Safari"))}g.hasCallStarted=b;g.isBrowserSupportedForMobileWebCasting=a}),98);
__d("ZenonRTWebBrowserFeatureSupport",[],(function(a,b,c,d,e,f){"use strict";function a(){return typeof window.HTMLCanvasElement==="function"&&typeof window.HTMLCanvasElement.prototype.captureStream==="function"}function b(){return g("getSenders")}function c(){return typeof window.RTCRtpSender==="function"&&typeof window.RTCRtpSender.prototype.replaceTrack==="function"}function d(){return typeof window.RTCRtpSender==="function"&&typeof window.RTCRtpSender.prototype.createEncodedStreams==="function"}function e(){return window.RTCRtpSender&&"transform"in RTCRtpSender.prototype}function g(a){return typeof RTCPeerConnection.prototype[a]==="function"}f.isCanvasStreamSupported=a;f.isGetSendersSupported=b;f.isReplaceTrackSupported=c;f.isInsertableStreamsSupported=d;f.isInsertableStreamsSupportedInSafari=e}),66);
__d("RTWebIncomingRingConfiguration",["OCCastingZenonUtils","UserAgent","ZenonRTWebBrowserFeatureSupport","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("UserAgent").isBrowser("Chrome >= 77")||c("UserAgent").isBrowser("Edge (Chromium Based) >= 79")||c("UserAgent").isBrowser("Opera >= 67")||c("UserAgent").isBrowser("Firefox >= 70")||c("UserAgent").isBrowser("Safari >= 16")&&c("gkx")("24226")||c("UserAgent").isBrowser("Safari >= 15.4")&&c("gkx")("24227")||c("UserAgent").isBrowser("Oculus Browser >= 6")&&c("gkx")("24228")||d("OCCastingZenonUtils").isBrowserSupportedForMobileWebCasting()}function b(){return c("gkx")("23430")&&d("ZenonRTWebBrowserFeatureSupport").isInsertableStreamsSupported()}g.isSupportedClient=a;g.isE2EESupportedClient=b}),98);
__d("EventListenerImplForCacheStorage",["CometEventListener"],(function(a,b,c,d,e,f){"use strict";f["default"]=b("CometEventListener")}),66);
__d("IGDSVideoChatFilled24Icon.react",["IGDSSVGIconBase.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var b=i(3),d;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=j.jsx("path",{d:"M21.259 5.935q-.401.404-.877.88a2.998 2.998 0 0 0-.88 2.121v6.18a3 3 0 0 0 .878 2.121l.879.881A1.653 1.653 0 0 0 24 16.953V7.101a1.653 1.653 0 0 0-2.742-1.166Zm-7.075-3.408H3.818A3.823 3.823 0 0 0-.001 6.345v11.364a3.823 3.823 0 0 0 3.819 3.818h10.366a3.823 3.823 0 0 0 3.818-3.818V6.345a3.823 3.823 0 0 0-3.818-3.818Z",fillRule:"evenodd"}),b[0]=d):d=b[0];b[1]!==a?(d=j.jsx(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:d})),b[1]=a,b[2]=d):d=b[2];return d}b=j.memo(a);g["default"]=b}),98);
__d("PolarisCallGatingHelpers",["PolarisUA","RTWebIncomingRingConfiguration","gkx","justknobx","qex"],(function(a,b,c,d,e,f,g){"use strict";function h(){return i()||j()?!1:!0}function a(){return c("gkx")("24007")&&c("gkx")("24008")===!0}function i(){return c("gkx")("24007")&&!c("gkx")("24008")===!0}function j(){return!d("PolarisUA").isDesktop()||!d("RTWebIncomingRingConfiguration").isSupportedClient()}function b(){return!h()?!1:c("gkx")("25357")===!0}function e(){return!h()?!1:c("gkx")("24013")===!0}function f(){return!h()?!1:!c("justknobx")._("471")}function k(){return c("qex")._("83")===!0}g.isWebCallingEnabled=h;g.isVerifiedUserAndCallingEnabled=a;g.isWebCallingRingtoneEnabled=b;g.isZenonIncomingRingEnabled=e;g.isIncomingCallEnabled=f;g.isCallsPathMigrationEnabled=k}),98);
__d("XPolarisCallControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/call/",Object.freeze({has_video:!0,is_e2ee_mandated:!1,users_to_ring:[]}),void 0);b=a;g["default"]=b}),98);
__d("PolarisCallNavigator",["PolarisAPIHelpers","PolarisCallGatingHelpers","PolarisNavigationUtils","XPolarisCallControllerRouteBuilder"],(function(a,b,c,d,e,f,g){"use strict";var h="https://call.instagram.com";function a(a,b,e){e===void 0&&(e=null);e=e===""?null:e;var f;d("PolarisCallGatingHelpers").isCallsPathMigrationEnabled()?e!=null?f=c("XPolarisCallControllerRouteBuilder").buildURL({has_video:b,ig_thread_id:a,server_info_data:e}):f=c("XPolarisCallControllerRouteBuilder").buildURL({has_video:b,ig_thread_id:a}):f=d("PolarisAPIHelpers").appendQueryParameters(h,{has_video:b,ig_thread_id:a,server_info_data:e});d("PolarisNavigationUtils").openURLWithFullPageReload(f,{openInNewTab:!0})}g.launchCall=a}),98);
__d("PolarisSwitchAccountsModalLazy.react",["CometPlaceholder.react","IGCoreModal.react","IGDSBox.react","IGDSSpinner.react","JSResourceForInteraction","lazyLoadComponent","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h,k=c("lazyLoadComponent")(c("JSResourceForInteraction")("PolarisSwitchAccountsModal.react").__setRef("PolarisSwitchAccountsModalLazy.react"));function a(){var a=i(2),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsx(c("IGCoreModal.react"),{children:j.jsx(c("IGDSBox.react"),{alignItems:"center",height:112,justifyContent:"center",position:"relative",width:"100%",children:j.jsx(c("IGDSSpinner.react"),{size:"medium"})})}),a[0]=b):b=a[0];a[1]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsx(c("CometPlaceholder.react"),{fallback:b,children:j.jsx(k,{})}),a[1]=b):b=a[1];return b}g["default"]=a}),98);
__d("InstagramODSObserver",["BaseEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";a=new(c("BaseEventEmitter"))();b=a;g["default"]=b}),98);
__d("InstagramODSImpl",["InstagramODSObserver","ODS"],(function(a,b,c,d,e,f,g){"use strict";var h,i="instagram",j={addListener:function(a){c("InstagramODSObserver").addListener("event",a)},incr:function(a,b){b===void 0&&(b=1),(h||(h=d("ODS"))).bumpEntityKey(5588,i,a,b),c("InstagramODSObserver").emit("event",{count:b,key:a})},incr_CAREFUL_WHEN_USE_DYNAMIC_KEY:function(a,b){j.incr(a,b)}};a=j;g["default"]=a}),98);
__d("FbtLogging",["QE2Logger","cr:1094907","cr:1290"],(function(a,b,c,d,e,f,g){"use strict";d("QE2Logger").logExposureForUser("fbt_js_performance_testing");a=b("cr:1290")==null?void 0:b("cr:1290").JHashToSampleRate;c=b("cr:1094907")==null?void 0:b("cr:1094907").logImpression;g.m=a;g.logImpression=c}),98);
__d("CometSuspenseFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1828945");b=d("FalcoLoggerInternal").create("comet_suspense",a);e=b;g["default"]=e}),98);
__d("IntlQtEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1848815");b=d("FalcoLoggerInternal").create("intl_qt_event",a);e=b;g["default"]=e}),98);
__d("LogJsspStatsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6181");b=d("FalcoLoggerInternal").create("log_jssp_stats",a);e=b;g["default"]=e}),98);
__d("MqttWsClientTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:MqttWsClientLoggerConfig")}),null);
__d("CacheStorage",["ErrorGuard","ExecutionEnvironment","WebStorage","cr:6943","cr:8958","emptyFunction","err","killswitch"],(function(a,b,c,d,e,f,g){var h,i,j,k="_@_",l="3b",m="CacheStorageVersion",n={length:0,getItem:a=c("emptyFunction"),setItem:a,clear:a,removeItem:a,key:a};d=function(){function a(a){this._store=a}var b=a.prototype;b.getStore=function(){return this._store};b.keys=function(){var a=[];for(var b=0;b<this._store.length;b++){var c=this._store.key(b);c!=null&&a.push(c)}return a};b.get=function(a){return this._store.getItem(a)};b.set=function(a,b){this._store.setItem(a,b)};b.remove=function(a){this._store.removeItem(a)};b.clear=function(){this._store.clear()};b.clearWithPrefix=function(a){a=a||"";var b=this.keys();for(var c=0;c<b.length;c++){var d=b[c];d!=null&&d.startsWith(a)&&this.remove(d)}};return a}();e=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;return a.call(this,(b=(h||(h=c("WebStorage"))).getLocalStorage())!=null?b:n)||this}b.available=function(){return!!(h||(h=c("WebStorage"))).getLocalStorage()};return b}(d);g=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;return a.call(this,(b=(h||(h=c("WebStorage"))).getSessionStorage())!=null?b:n)||this}b.available=function(){return!!(h||(h=c("WebStorage"))).getSessionStorage()};return b}(d);var o=function(){function a(){this._store={}}var b=a.prototype;b.getStore=function(){return this._store};b.keys=function(){return Object.keys(this._store)};b.get=function(a){return this._store[a]===void 0?null:this._store[a]};b.set=function(a,b){this._store[a]=b};b.remove=function(a){a in this._store&&delete this._store[a]};b.clear=function(){this._store={}};b.clearWithPrefix=function(a){a=a||"";var b=this.keys();for(var c=0;c<b.length;c++){var d=b[c];d.startsWith(a)&&this.remove(d)}};a.available=function(){return!0};return a}(),p={memory:o,localstorage:e,sessionstorage:g};a=function(){function a(a,d){this._changeCallbacks=[];this._key_prefix="_cs_";this._exception=null;d&&(this._key_prefix=d);a==="AUTO"||!a?d="memory":d=a;d&&(!p[d]||!p[d].available()?((i||(i=c("ExecutionEnvironment"))).canUseDOM,this._backend=new o()):this._backend=new p[d]());a=this.useBrowserStorage();a&&b("cr:6943").listen(window,"storage",this._onBrowserValueChanged.bind(this));d=a?this._backend.getStore().getItem(m):this._backend.getStore()[m];d!==l&&(c("killswitch")("CACHE_STORAGE_MODULE_CLEAR_OWN_KEYS")?this.clear():this.clearOwnKeys())}var d=a.prototype;d.useBrowserStorage=function(){return this._backend.getStore()===(h||(h=c("WebStorage"))).getLocalStorage()||this._backend.getStore()===(h||(h=c("WebStorage"))).getSessionStorage()};d.addValueChangeCallback=function(a){var b=this;this._changeCallbacks.push(a);return{remove:function(){b._changeCallbacks.slice(b._changeCallbacks.indexOf(a),1)}}};d._onBrowserValueChanged=function(a){this._changeCallbacks&&String(a.key).startsWith(this._key_prefix)&&this._changeCallbacks.forEach(function(b){b(a.key,a.oldValue,a.newValue)})};d.keys=function(){var a=this,b=[];(j||(j=c("ErrorGuard"))).guard(function(){if(a._backend){var c=a._backend.keys(),d=a._key_prefix.length;for(var e=0;e<c.length;e++)c[e].substr(0,d)==a._key_prefix&&b.push(c[e].substr(d))}},{name:"CacheStorage"})();return b};d.set=function(d,e,f){if(this._backend){if(this.useBrowserStorage()&&a._persistentWritesDisabled){this._exception=c("err")("writes disabled");return!1}var g;typeof e==="string"?g=k+e:!f?(g={__t:Date.now(),__v:e},g=b("cr:8958").stringify(g)):g=b("cr:8958").stringify(e);f=this._backend;e=this._key_prefix+d;d=!0;var h=null;while(d)try{h=null,f.set(e,g),d=!1}catch(a){h=a;var i=f.keys().length;this._evictCacheEntries();d=f.keys().length<i}if(h!==null){this._exception=h;return!1}else{this._exception=null;return!0}}this._exception=c("err")("no back end");return!1};d.getLastSetExceptionMessage=function(){return this._exception?this._exception.message:null};d.getLastSetException=function(){return this._exception};d.getStorageKeyCount=function(){var a=this._backend;return a?a.keys().length:0};d._evictCacheEntries=function(){var c=[],d=this._backend;d.keys().forEach(function(e){if(e===m)return;var g=d.get(e);if(g===void 0){d.remove(e);return}if(a._hasMagicPrefix(g))return;try{g=b("cr:8958").parse(g,f.id)}catch(a){d.remove(e);return}g&&g.__t!==void 0&&g.__v!==void 0&&c.push([e,g.__t])});c.sort(function(a,b){return a[1]-b[1]});for(var e=0;e<Math.ceil(c.length/2);e++)d.remove(c[e][0])};d.get=function(d,e){var g;if(this._backend){(j||(j=c("ErrorGuard"))).applyWithGuard(function(){g=this._backend.get(this._key_prefix+d)},this,[],{onError:function(){g=null},name:"CacheStorage:get"});if(g!=null)if(a._hasMagicPrefix(g))g=g.substr(k.length);else try{g=b("cr:8958").parse(g,f.id),g&&g.__t!==void 0&&g.__v!==void 0&&(g=g.__v)}catch(a){g=void 0}else g=void 0}g===void 0&&e!==void 0&&(g=e,this.set(d,g));return g};d.remove=function(a){this._backend&&(j||(j=c("ErrorGuard"))).applyWithGuard(this._backend.remove,this._backend,[this._key_prefix+a],{name:"CacheStorage:remove"})};d._setVersion=function(){var a=this;(j||(j=c("ErrorGuard"))).applyWithGuard(function(){a.useBrowserStorage()?a._backend.getStore().setItem(m,l):a._backend.getStore()[m]=l},this,[],{name:"CacheStorage:setVersion"})};d.clear=function(){this._backend&&((j||(j=c("ErrorGuard"))).applyWithGuard(this._backend.clear,this._backend,[],{name:"CacheStorage:clear"}),this._setVersion())};d.clearOwnKeys=function(){this._backend&&((j||(j=c("ErrorGuard"))).applyWithGuard(this._backend.clearWithPrefix,this._backend,[this._key_prefix],{name:"CacheStorage:clearOwnKeys"}),this._setVersion())};a.getAllStorageTypes=function(){return Object.keys(p)};a._hasMagicPrefix=function(a){return a.substr(0,k.length)===k};a.disablePersistentWrites=function(){a._persistentWritesDisabled=!0};return a}();a._persistentWritesDisabled=!1;f.exports=a}),34);
__d("WebStorageCleanupReason",[],(function(a,b,c,d,e,f){"use strict";var g=null;function a(){return g}function b(a){g=a}f.getLastCleanupReason=a;f.setLastCleanupReason=b}),66);
__d("MqttUnifiedClientConnectFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744057");b=d("FalcoLoggerInternal").create("mqtt_unified_client_connect",a);e=b;g["default"]=e}),98);
__d("MqttUnifiedClientDisconnectFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744058");b=d("FalcoLoggerInternal").create("mqtt_unified_client_disconnect",a);e=b;g["default"]=e}),98);
__d("MqttUnifiedClientIncomingPublishFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744059");b=d("FalcoLoggerInternal").create("mqtt_unified_client_incoming_publish",a);e=b;g["default"]=e}),98);
__d("MqttUnifiedClientOutgoingPublishFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744060");b=d("FalcoLoggerInternal").create("mqtt_unified_client_outgoing_publish",a);e=b;g["default"]=e}),98);
__d("Base64",[],(function(a,b,c,d,e,f){var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function h(a){a=a.charCodeAt(0)<<16|a.charCodeAt(1)<<8|a.charCodeAt(2);return String.fromCharCode(g.charCodeAt(a>>>18),g.charCodeAt(a>>>12&63),g.charCodeAt(a>>>6&63),g.charCodeAt(a&63))}var i=">___?456789:;<=_______\0\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19______\x1a\x1b\x1c\x1d\x1e\x1f !\"#$%&'()*+,-./0123";function j(a){a=i.charCodeAt(a.charCodeAt(0)-43)<<18|i.charCodeAt(a.charCodeAt(1)-43)<<12|i.charCodeAt(a.charCodeAt(2)-43)<<6|i.charCodeAt(a.charCodeAt(3)-43);return String.fromCharCode(a>>>16,a>>>8&255,a&255)}var k={encode:function(a){a=unescape(encodeURI(a));var b=(a.length+2)%3;a=(a+"\0\0".slice(b)).replace(/[\s\S]{3}/g,h);return a.slice(0,a.length+b-2)+"==".slice(b)},decode:function(a){a=a.replace(/[^A-Za-z0-9+\/]/g,"");var b=a.length+3&3;a=(a+"AAA".slice(b)).replace(/..../g,j);a=a.slice(0,a.length+b-3);try{return decodeURIComponent(escape(a))}catch(a){throw new Error("Not valid UTF-8")}},encodeObject:function(a){return k.encode(JSON.stringify(a))},decodeObject:function(a){return JSON.parse(k.decode(a))},encodeNums:function(a){return String.fromCharCode.apply(String,a.map(function(a){return g.charCodeAt((a|-(a>63?1:0))&-(a>0?1:0)&63)}))}};a=k;f["default"]=a}),66);
__d("CrossWindowEventEmitter",["CacheStorage","EventEmitter","cr:8958"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(d,a);function d(d){var e;e=a.call(this)||this;e.$CrossWindowEventEmitter2=d;e.$CrossWindowEventEmitter1=new(c("CacheStorage"))("localstorage",d+":");e.$CrossWindowEventEmitter1.addValueChangeCallback(function(c,d,f){d=c.split(":")[1];try{c=b("cr:8958").parse(f)}catch(a){c=void 0}if(c&&c.__v){(f=a.prototype.emit).call.apply(f,[babelHelpers.assertThisInitialized(e),d].concat(c.__v))}});return e}var e=d.prototype;e.emit=function(b){var c;for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];this.emitRemote.apply(this,[b].concat(e));(c=a.prototype.emit).call.apply(c,[this,b].concat(e))};e.emitRemote=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.$CrossWindowEventEmitter1.set(a,c)};return d}(c("EventEmitter"));g["default"]=a}),98);
__d("isFastRefreshEnabledForCurrentDomain",[],(function(a,b,c,d,e,f){"use strict";function a(){return!1}f["default"]=a}),66);
__d("IrisSubscribeCheckerUtils",[],(function(a,b,c,d,e,f){"use strict";function a(){if(typeof window!=="undefined"){var a;a=(a=window.location)==null?void 0:a.hostname;if(a==="m.facebook.com"||a==="mobile.facebook.com"||a==="mtouch.facebook.com")return!1}return!0}f.getIrisSubscribeCheckerInitialRunningState=a}),66);
__d("MqttEnvWebSocket",[],(function(a,b,c,d,e,f){"use strict";function a(a){return new WebSocket(a)}f.createWebSocket=a}),66);
__d("MqttEnv",["MqttEnvWebSocket","clearTimeout","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";b=Object.freeze({mqtt_waterfall_log_client_sampling:1,mqtt_ws_polling_enabled:3,mqtt_lp_use_fetch:9,mqtt_fast_lp:11,mqtt_lp_no_delay:12,mqtt_enable_publish_over_polling:13,mqttweb_global_connection_counter:15});e=function(){var a=b.prototype;a.random=function(){return this.$1!=null?this.$1():Math.random()};a.isUserLoggedInNow=function(){return this.$2!=null?this.$2():!0};a.setIsUserLoggedInNow=function(a){this.$2=a};a.clearTimeout=function(a){if(this.$3!=null){this.$3(a);return}c("clearTimeout")(a)};a.setTimeout=function(a,b){for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];return this.$4!=null?this.$4.apply(null,arguments):c("setTimeout").apply(null,arguments)};a.getLoggerInstance=function(){return this.$5!=null?this.$5():h.getInstance()};a.genGk=function(a){return this.$6!=null?this.$6(a):!1};a.createSocket=function(a,b){return this.$7!=null?this.$7(a,b):d("MqttEnvWebSocket").createWebSocket(a)};a.scheduleCallback=function(a){return this.$8!=null?this.$8(a):a()};a.scheduleLoggingCallback=function(a){return this.$9!=null?this.$9(a):a()};a.configRead=function(a,b){return this.$10!=null?this.$10(a,b):b};a.configWrite=function(a,b){this.$11!=null&&this.$11(a,b)};function b(){this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=null,this.$10=null,this.$11=null}a.initialize=function(a,b,c,d,e,f,g,h,i,j,k){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e,this.$6=f,this.$7=g,this.$8=h,this.$9=i,this.$10=j,this.$11=k};return b}();var h=function(){function a(){}a.getInstance=function(){return new a()};var b=a.prototype;b.setAppId=function(a){};b.eventLogConnect=function(a){};b.eventLogPull=function(a){};b.eventLogPullFinish=function(a){};b.eventLogDisconnect=function(a){};b.eventLogOutgoingPublish=function(a){};b.eventLogIncomingPublish=function(a){};b.eventLogPublishTimeout=function(a){};b.eventLogMiscellaneousError=function(a){};b.logIfLoggedOut=function(){};b.logError=function(a){};b.logErrorWarn=function(a){};b.logWarn=function(a){};b.debugTrace=function(a){};b.bumpCounter=function(a){};b.getBrowserConnectivity=function(){return!0};return a}(),i=new e();function a(a){i.setIsUserLoggedInNow(a)}g.MqttGkNames=b;g.Env=i;g.setIsUserLoggedInNow=a}),98);
__d("IrisSubscribeChecker",["IrisSubscribeCheckerUtils","MqttEnv"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=d("MqttEnv").Env.getLoggerInstance(),this.$2=null,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=d("IrisSubscribeCheckerUtils").getIrisSubscribeCheckerInitialRunningState(),this.$7=0,this.$8=a}var b=a.prototype;b.start=function(){this.$6=!0};b.stop=function(){this.$6=!1,this.$9()};b.onConnectAttempt=function(){};b.onConnectFailure=function(){this.$9()};b.onConnected=function(){var a=this;this.$7++;this.$9();this.$3=!1;this.$4=!1;this.$5=!1;this.$6&&(this.$2=d("MqttEnv").Env.setTimeout(function(){a.$10()},8e3))};b.onConnectSuccess=function(){};b.onConnectionLost=function(){this.$9()};b.onConnectionDisconnect=function(){};b.onSubscribe=function(a){a==="/t_ms"&&(this.$3=!0)};b.onUnsubscribe=function(a){};b.onPublish=function(a){(a==="/messenger_sync_get_diffs"||a==="/messenger_sync_create_queue")&&(this.$4=!0,this.$3&&(this.$5=!0,this.$9()))};b.onMessage=function(a){};b.onWSFatal=function(){};b.$9=function(){this.$2&&(d("MqttEnv").Env.clearTimeout(this.$2),this.$2=null)};b.$10=function(){if(this.$4===!1){var a=this.$7==1?"no_iris_session_initialConnect":"no_iris_session";this.$1.bumpCounter(a);this.$8()?this.$1.bumpCounter(a+".withProvider"):this.$1.bumpCounter(a+".withoutProvider");this.$3===!0?this.$1.bumpCounter(a+".withTopicSubscribe"):this.$1.bumpCounter(a+".withoutTopicSubscribe")}this.$3===!1&&this.$1.bumpCounter("no_iris_topic_subscribe");this.$3===!0&&this.$4===!0&&this.$5===!1&&this.$1.bumpCounter("session_before_topic_subscribe")};return a}();g["default"]=a}),98);
__d("MqttConnectionHookCollection",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Set()}var b=a.prototype;b.addHook=function(a){this.$1.add(a)};b.removeHook=function(a){this.$1["delete"](a)};b.onConnectAttempt=function(){this.$1.forEach(function(a){a.onConnectAttempt()})};b.onConnectFailure=function(){this.$1.forEach(function(a){a.onConnectFailure()})};b.onConnected=function(){this.$1.forEach(function(a){a.onConnected()})};b.onConnectSuccess=function(){this.$1.forEach(function(a){a.onConnectSuccess()})};b.onConnectionLost=function(){this.$1.forEach(function(a){a.onConnectionLost()})};b.onConnectionDisconnect=function(){this.$1.forEach(function(a){a.onConnectionDisconnect()})};b.onSubscribe=function(a){this.$1.forEach(function(b){b.onSubscribe(a)})};b.onUnsubscribe=function(a){this.$1.forEach(function(b){b.onUnsubscribe(a)})};b.onPublish=function(a){this.$1.forEach(function(b){b.onPublish(a)})};b.onMessage=function(a){this.$1.forEach(function(b){b.onMessage(a)})};b.onWSFatal=function(){this.$1.forEach(function(a){a.onWSFatal()})};return a}();f["default"]=a}),66);
__d("MqttGlobalStreamCounter",["CrossWindowEventEmitter","MqttEnv","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){var a=this;this.isTabClosed=!1;this.otherTabs=new Map();this.thisTab={totalConnectionStreams:0};this.broadcastChannel=new(c("CrossWindowEventEmitter"))("MqttGlobalStreamCounter");this.broadcastChannel.addListener("count-updated",function(b){b=JSON.parse(String(b));var c=!1;a.otherTabs.has(b.key)||(c=!0);b.event==="DELETE"?a.otherTabs["delete"](b.key):b.event==="UPDATE"&&b.value!=null&&(a.otherTabs.set(b.key,b.value),c&&a.$1())});this.tabID=c("uuidv4")()}var b=a.prototype;b.streamRequested=function(){this.thisTab.totalConnectionStreams++,this.$1()};b.streamClosed=function(){this.thisTab.totalConnectionStreams>0&&(this.thisTab.totalConnectionStreams--,this.$1())};b.tabClosed=function(){if(this.isTabClosed)return;this.isTabClosed=!0;var a={key:this.tabID,event:"DELETE"};this.broadcastChannel.emitRemote("count-updated",JSON.stringify(a))};b.getGlobalState=function(){var a={totalConnectionStreams:this.thisTab.totalConnectionStreams};this.otherTabs.forEach(function(b){a.totalConnectionStreams+=b.totalConnectionStreams});return a};b.$1=function(){var a={key:this.tabID,event:"UPDATE",value:this.thisTab};this.broadcastChannel.emitRemote("count-updated",JSON.stringify(a))};b.isEnabled=function(){return!0};return a}();var h=d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqttweb_global_connection_counter)?new a():{streamRequested:function(){},streamClosed:function(){},tabClosed:function(){},getGlobalState:function(){return{totalConnectionStreams:-1}},isEnabled:function(){return!1}};b=function(){return h};g.getInstance=b}),98);
__d("MqttAnalyticsHook",["MqttEnv","MqttGlobalStreamCounter"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=d("MqttEnv").Env.getLoggerInstance(),this.$2=d("MqttGlobalStreamCounter").getInstance(),this.$3=0,this.$4=0,this.$5=0,this.$6=0,this.$1.bumpCounter("session_start"),d("MqttEnv").Env.isUserLoggedInNow()||this.$1.bumpCounter("session_start.logout")}var b=a.prototype;b.onConnectAttempt=function(){this.$1.bumpCounter("ws_connect_attempt"),this.$2.streamRequested()};b.onConnectFailure=function(){this.$4++,this.$1.bumpCounter("ws_connect_failure"),this.$1.debugTrace("connect","Connect failed existing streams count "+this.$2.getGlobalState().totalConnectionStreams),this.$2.streamClosed()};b.onConnected=function(){this.$1.bumpCounter("ws_connect_connected")};b.onConnectSuccess=function(){this.$3===0&&this.$1.bumpCounter("ws_connect_first_success"),this.$3++,this.$1.bumpCounter("ws_connect_success")};b.onConnectionLost=function(){this.$1.bumpCounter("ws_disconnect")};b.onConnectionDisconnect=function(){this.$2.streamClosed()};b.onSubscribe=function(a){};b.onUnsubscribe=function(a){};b.onPublish=function(a){this.$1.bumpCounter("ws_publish."+a)};b.onMessage=function(a){this.$1.bumpCounter("message_arrived."+a)};b.onWSFatal=function(){this.$1.bumpCounter("ws_fatal")};b.onPollRequestSent=function(){this.$1.bumpCounter("polling_request_send"),this.$2.streamRequested()};b.onPollRequestSuccess=function(){this.$1.bumpCounter("polling_request_succeed"),this.$5===0&&this.$1.bumpCounter("polling_first_success"),this.$5++};b.onPollResponse=function(a){this.$1.bumpCounter("lp.message_arrived."+a)};b.onPollFinish=function(){this.$1.bumpCounter("polling_request_finish"),this.$2.streamRequested()};b.onPollRequestFailed=function(a){this.$1.bumpCounter("polling_request_failed"),this.$1.bumpCounter("polling_request_failed_"+a),this.$6++,this.$1.debugTrace("PollRequest","Request failed existing streams count "+this.$2.getGlobalState().totalConnectionStreams),this.$2.streamClosed()};b.onPollShutdownAbort=function(){this.$2.streamClosed()};b.onTabClose=function(){this.$2.tabClosed()};return a}();g["default"]=a}),98);
__d("MqttProtocolUtils",["MqttEnv"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(a==null)return b;var c=new Uint8Array(a.length+b.length);c.set(a);c.set(b,a.length);return c}function b(a,b){b=b;var c=0,d=1,e;do{if(b===a.length)return null;e=a[b++];c+=(e&127)*d;d*=128}while((e&128)!==0);return{offset:b,value:c}}function c(a){a=a;var b=new Array(1);for(var c=0;c<4;c++){var d=a%128;a>>=7;if(a>0)b[c]=d|128;else{b[c]=d;break}}return b}function h(a,b,c){c=c;b[c++]=a>>8;b[c++]=a%256;return c}function e(a,b){return 256*a[b]+a[b+1]}function f(a){var b=0;for(var c=0,d=a.length;c<d;c++){var e=a.charCodeAt(c);e<128?b+=1:e<2048?b+=2:e>=55296&&e<=56319?(b+=4,c++):b+=3}return b}function i(a,b,c,d){d=h(b,c,d);j(a,c,d);return d+b}function j(a,b,c){c=c;for(var d=0,e=a.length;d<e;d++){var f=a.charCodeAt(d);f<128?b[c++]=f:f<2048?(b[c++]=192|f>>6,b[c++]=128|f&63):f<55296||f>=57344?(b[c++]=224|f>>12,b[c++]=128|f>>6&63,b[c++]=128|f&63):(f=65536+((f&1023)<<10|a.charCodeAt(++d)&1023),b[c++]=240|f>>18,b[c++]=128|f>>12&63,b[c++]=128|f>>6&63,b[c++]=128|f&63)}}function k(a,b,c){var d=[],e=b,f=0;while(e<b+c){var g=a[e++];if(g<128)d[f++]=String.fromCharCode(g);else if(g>191&&g<224){var h=a[e++];d[f++]=String.fromCharCode((g&31)<<6|h&63)}else if(g>239&&g<365){h=a[e++];var i=a[e++],j=a[e++];h=((g&7)<<18|(h&63)<<12|(i&63)<<6|j&63)-65536;d[f++]=String.fromCharCode(55296+(h>>10));d[f++]=String.fromCharCode(56320+(h&1023))}else{i=a[e++];j=a[e++];d[f++]=String.fromCharCode((g&15)<<12|(i&63)<<6|j&63)}}return d.join("")}var l=function(){function a(a,b,c,d){this.$1=a,this.$2=b,this.$5=c,this.$6=d,this.$4=!1}var b=a.prototype;b.$7=function(){var a=this;this.$4?(this.$4=!1,this.$5(),this.$3=d("MqttEnv").Env.setTimeout(function(){a.$7()},this.$2()*1e3)):this.$6()};b.reset=function(){var a=this;this.$4=!0;this.$3&&(d("MqttEnv").Env.clearTimeout(this.$3),this.$3=null);var b=this.$1()*1e3;b>0&&(this.$3=d("MqttEnv").Env.setTimeout(function(){a.$7()},b))};b.cancel=function(){this.$3&&(d("MqttEnv").Env.clearTimeout(this.$3),this.$3=null)};return a}();g.UTF8Length=f;g.convertStringToUTF8=j;g.concatBuffers=a;g.decodeMultiByteInt=b;g.convertUTF8ToString=k;g.encodeMultiByteInt=c;g.writeUInt16BE=h;g.readUInt16BE=e;g.writeString=i;g.Pinger=l}),98);
__d("MqttUtils",["MqttEnv"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h(a,"sid",b.toString())}function b(a,b){var c=a;b.forEach(function(a,b){c=h(c,b,a)});return c}function h(a,b,c){if(a.indexOf("?")>0)return a+"&"+b+"="+c;else return a+"?"+b+"="+c}function c(){return Math.floor(d("MqttEnv").Env.random()*Number.MAX_SAFE_INTEGER)}function i(a,b,c){var e=arguments.length>1?a.then(b,c):a;e.then(null,function(a){d("MqttEnv").Env.setTimeout(function(){if(a instanceof Error)throw a;else throw new Error("promiseDone")},0)})}function e(a,b,c,e){var f=!1;d("MqttEnv").Env.setTimeout(function(){f||(f=!0,c(new Error("promise timeout")))},e);i(a,function(a){f||(f=!0,b(a))},function(a){f||(f=!0,c(a))})}function f(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=0;return a.replace(/%s/g,function(){return String(c[e++])})}g.endpointWithSessionId=a;g.endpointWithExtraParameters=b;g.endpointWithExtraParameter=h;g.generateSessionId=c;g.promiseDone=i;g.promiseDoneWithTimeout=e;g.sprintf=f}),98);
__d("MqttProtocolCodec",["MqttProtocolUtils","MqttUtils","err"],(function(a,b,c,d,e,f,g){"use strict";var h=Object.freeze({CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14}),i=[0,6,77,81,73,115,100,112,3];function j(a,b){b=b;var e=b,f=a[b],g=f>>4;b+=1;var i=d("MqttProtocolUtils").decodeMultiByteInt(a,b);if(i==null)return{position:e,wireMessage:null};b=i.offset;i=b+i.value;if(i>a.length)return{position:e,wireMessage:null};var j;switch(g){case h.CONNACK:e=a[b++];e=!!(e&1);var o=a[b++];j=new m(e,o);break;case h.PUBLISH:e=f&15;o=e>>1&3;f=d("MqttProtocolUtils").readUInt16BE(a,b);b+=2;var r=d("MqttProtocolUtils").convertUTF8ToString(a,b,f);b+=f;f=null;o===1&&(f=d("MqttProtocolUtils").readUInt16BE(a,b),b+=2);var s=p.createWithBytes(a.subarray(b,i)),t=(e&1)===1;e=(e&8)===8;j=new q(r,s,o,f,t,e);break;case h.PINGREQ:j=new k("PINGREQ");break;case h.PINGRESP:j=new k("PINGRESP");break;case h.PUBACK:case h.UNSUBACK:r=d("MqttProtocolUtils").readUInt16BE(a,b);j=new n(g===h.PUBACK?"PUBACK":"UNSUBACK",r);break;case h.SUBACK:s=d("MqttProtocolUtils").readUInt16BE(a,b);b+=2;o=a.subarray(b,i);j=new l(s,o);break;default:throw c("err")(d("MqttUtils").sprintf("Invalid MQTT message type %s.",g))}return{position:i,wireMessage:j}}function a(a){var b=[],c=0;while(c<a.length){var d=j(a,c),e=d.wireMessage;c=d.position;if(e)b.push(e);else break}d=null;c<a.length&&(d=a.subarray(c));return{messages:b,remaining:d}}b=function(){function a(a){this.messageType=h[a]}var b=a.prototype;b.encode=function(){throw new TypeError("Cannot abstract class WireMessage")};return a}();var k=function(b){babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,a)||this}var c=a.prototype;c.encode=function(){var a=new ArrayBuffer(2),b=new Uint8Array(a);b[0]=(this.messageType&15)<<4;return a};return a}(b);e=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,"DISCONNECT")||this}var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=new ArrayBuffer(2),c=new Uint8Array(b);c[0]=a;c.set(d("MqttProtocolUtils").encodeMultiByteInt(0),1);return b};return b}(b);var l=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"SUBACK")||this;d.messageIdentifier=a;d.returnCode=c;return d}return a}(b),m=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"CONNACK")||this;d.sessionPresent=a;d.returnCode=c;return d}return a}(b),n=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.messageIdentifier=c;return a}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=2,c=d("MqttProtocolUtils").encodeMultiByteInt(b),e=c.length+1;b=new ArrayBuffer(b+e);var f=new Uint8Array(b);f[0]=a;f.set(c,1);e=d("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,f,e);return b};return a}(b);f=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this,"CONNECT")||this;d.clientId=b;d.connectOptions=c;return d}var c=b.prototype;c.encode=function(){var a,b=(this.messageType&15)<<4,c=i.length+3;c+=(a=d("MqttProtocolUtils")).UTF8Length(this.clientId)+2;c+=a.UTF8Length(this.connectOptions.userName)+2;var e=a.encodeMultiByteInt(c);c=new ArrayBuffer(1+e.length+c);var f=new Uint8Array(c);f[0]=b;b=1;f.set(e,1);b+=e.length;f.set(i,b);b+=i.length;e=2|128;f[b++]=e;b=a.writeUInt16BE(this.connectOptions.getKeepAliveIntervalSeconds(),f,b);b=a.writeString(this.clientId,a.UTF8Length(this.clientId),f,b);b=a.writeString(this.connectOptions.userName,a.UTF8Length(this.connectOptions.userName),f,b);return c};return b}(b);var o=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,e,f){var g;g=b.call(this,a)||this;g.topic=c;if(e<0&&e>1||e===1&&f==null)throw new TypeError(d("MqttUtils").sprintf("Argument Invalid. qos: %s messageType: %s.",e,a));g.qos=e;g.messageIdentifier=f;return g}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4;a|=2;var b=d("MqttProtocolUtils").UTF8Length(this.topic),c=2+b+2;this.messageType===h.SUBSCRIBE&&(c+=1);var e=d("MqttProtocolUtils").encodeMultiByteInt(c);c=new ArrayBuffer(1+e.length+c);var f=new Uint8Array(c);f[0]=a;a=1;f.set(e,1);a+=e.length;this.messageIdentifier!=null&&(a=d("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,f,a));a=d("MqttProtocolUtils").writeString(this.topic,b,f,a);this.messageType===h.SUBSCRIBE&&this.qos!=null&&(f[a++]=this.qos);return c};return a}(b),p=function(){function a(a,b){this.payloadString=a,this.payloadBytes=b}a.createWithString=function(b){var c=new Uint8Array(new ArrayBuffer(d("MqttProtocolUtils").UTF8Length(b)));d("MqttProtocolUtils").convertStringToUTF8(b,c,0);return new a(b,c)};a.createWithBytes=function(b){var c=d("MqttProtocolUtils").convertUTF8ToString(b,0,b.length);return new a(c,b)};var b=a.prototype;b.string=function(){return this.payloadString};b.bytes=function(){return this.payloadBytes};return a}(),q=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d,e,f,g){var h;h=b.call(this,"PUBLISH")||this;h.topic=a;h.payloadMessage=c;h.qos=d;h.messageIdentifier=e;h.retained=f!=null?f:!1;h.duplicate=g!=null?g:!1;if(h.qos===1&&h.messageIdentifier==null)throw new TypeError("Argument Invalid. messageIdentifier: null and qos: 1");return h}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4;this.duplicate&&(a|=8);a=a|=this.qos<<1;this.retained&&a!=1;var b=d("MqttProtocolUtils").UTF8Length(this.topic),c=b+2,e=this.qos===0?0:2;c+=e;e=this.payloadMessage.bytes();c+=e.byteLength;var f=d("MqttProtocolUtils").encodeMultiByteInt(c);c=new ArrayBuffer(1+f.length+c);var g=new Uint8Array(c);g[0]=a;g.set(f,1);a=1+f.length;a=d("MqttProtocolUtils").writeString(this.topic,b,g,a);this.qos!==0&&this.messageIdentifier!=null&&(a=d("MqttProtocolUtils").writeUInt16BE(this.messageIdentifier,g,a));g.set(e,a);return c};return a}(b),r=p.createWithString,s=p.createWithBytes;b={Base:b,ConnAck:m,Connect:f,Disconnect:e,Ping:k,PubAckUnsubAck:n,Publish:q,Subscription:o};g.MESSAGE_TYPE=h;g.decodeMessage=j;g.decodeByteMessages=a;g.Message=p;g.createMessageWithString=r;g.createMessageWithBytes=s;g.WireMessage=b}),98);
__d("MqttTypes",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b,c){this.errorCode=a,this.errorName=b,this.errorMessage=c};b=Object.freeze({APP_DISCONNECT:new a(7,"APP_DISCONNECT","Disconnect initiated by app"),BROWSER_CLOSE:new a(11,"BROWSER_CLOSE","Browser closed"),CONNACK_FAILURE:new a(5,"CONNACK_FAILURE","Connection failure due to connack"),CONNECT_TIMEOUT:new a(4,"CONNECT_TIMEOUT","Connect timed out"),INVALID_DATA_TYPE:new a(3,"INVALID_DATA_TYPE","Received non-arraybuffer from socket."),PING_TIMEOUT:new a(6,"PING_TIMEOUT","Ping timeout"),RECONNECT:new a(10,"RECONNECT","Reconnecting"),SERVER_DISCONNECT:new a(8,"SERVER_DISCONNECT","Disconnect message sent my server"),SOCKET_CLOSE:new a(9,"SOCKET_CLOSE","Socket connection closed"),SOCKET_ERROR:new a(1,"SOCKET_ERROR","Socket error"),SOCKET_MESSAGE:new a(2,"SOCKET_MESSAGE","Unable to parse invalid socket message")});c=function(a,b){this.mqttError=a,this.connAck=b};d=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){d===void 0&&(d=null);c=a.call(this,c)||this;c.isRecoverable=b;c.originalError=d;return c}return b}(babelHelpers.wrapNativeSuper(Error));f.MqttError=a;f.MqttErrors=b;f.ConnectFailure=c;f.MqttChannelError=d}),66);
__d("MqttProtocolClient",["MqttEnv","MqttProtocolCodec","MqttProtocolUtils","MqttTypes","err"],(function(a,b,c,d,e,f,g){"use strict";var h=20,i=6e4;a=function(){function a(a){var b=this;this.$12=function(a,c,e){c===void 0&&(c=null);b.$9.bumpCounter("protocol.debug.disconnect.internal."+a.errorName);b.$9.bumpCounter("protocol.debug.disconnect.internal");var f=b.$5,g=b.$2,h=g.onConnectFailure,i=g.onConnectionLost;b.setConnected(!1);b.$14();f?d("MqttEnv").Env.scheduleCallback(function(){i(a,c)}):d("MqttEnv").Env.scheduleCallback(function(){h(b.$11,new(d("MqttTypes").ConnectFailure)(a,e!=null?e:-1),c)})};this.$13=function(a){var c=b.$6;if(c==null){b.$9.bumpCounter("protocol.socket_send.failed.socket_null.<message type>");return 0}if(c.readyState!==c.OPEN){b.$9.bumpCounter("protocol.socket_send.failed.socket_not_open.<message type>");return 0}a=a.encode();var d=a.byteLength;c.send(a);return d};this.$3=a;this.$2={getKeepAliveIntervalSeconds:function(){return 10},getKeepAliveTimeoutSeconds:function(){return 10},ignoreSubProtocol:!1,mqttVersion:3,onConnectFailure:function(a,b,c){},onConnection:function(){},onConnectionLost:function(a,b){},onConnectSuccess:function(a){},onMessageArrived:function(a,b,c){},onMessageDelivered:function(a){},userName:""};this.$1="mqttwsclient";this.$4=0;this.$5=!1;this.$9=d("MqttEnv").Env.getLoggerInstance();this.$11=0}var b=a.prototype;b.connect=function(a){var b=this;if(this.$5)throw c("err")("Invalid state: connect - already connected");this.$2=a;this.setConnected(!1);this.$7!=null&&(d("MqttEnv").Env.clearTimeout(this.$7),this.$7=null);this.$7=d("MqttEnv").Env.setTimeout(function(){b.$9.bumpCounter("protocol.error.connect.timeout"),b.$12(d("MqttTypes").MqttErrors.CONNECT_TIMEOUT)},h*1e3);this.$6=d("MqttEnv").Env.createSocket(this.$3);this.$6.binaryType="arraybuffer";this.$6.onopen=function(){b.setConnected(!0),b.$9.debugTrace("Socket-Open","MQTTProtocolClient Socket Open"),b.$11=b.$13(new(d("MqttProtocolCodec").WireMessage.Connect)(b.$1,a)),a.onConnection()};this.$6.onmessage=function(a){a=a.data;if(!(a instanceof ArrayBuffer)){b.$9.bumpCounter("protocol.error.onmessage.type");b.$12(d("MqttTypes").MqttErrors.INVALID_DATA_TYPE);return}try{a=new Uint8Array(a);b.$10!=null&&(a=d("MqttProtocolUtils").concatBuffers(b.$10,a),b.$9.bumpCounter("protocol.debug.usingMessagesBuffer"),delete b.$10,b.$10=null);a=d("MqttProtocolCodec").decodeByteMessages(a);var c=a.messages;b.$10=a.remaining;for(a=0;a<c.length;a++)b.handleMessage(c[a])}catch(a){b.$10=null,b.$9.logError(a,d("MqttTypes").MqttErrors.SOCKET_MESSAGE.errorMessage),b.$9.bumpCounter("protocol.error.onmessage.parse"),b.$12(d("MqttTypes").MqttErrors.SOCKET_MESSAGE,a.message)}};this.$6.onerror=function(a){b.$9.bumpCounter("protocol.error.socket"),b.$9.debugTrace("Socket-Error","MQTTProtocolClient Socket Error"),b.$12(d("MqttTypes").MqttErrors.SOCKET_ERROR)};this.$6.onclose=function(a){b.$9.bumpCounter("protocol.socket.close"),a.wasClean||b.$9.debugTrace("Socket-Unclean-Close","MQTTProtocolClient error code: "+a.code+" reason: "+a.reason),b.$12(d("MqttTypes").MqttErrors.SOCKET_CLOSE,a.code+" : "+a.reason)};this.$8!=null&&this.$8.cancel();this.$8=new(d("MqttProtocolUtils").Pinger)(a.getKeepAliveIntervalSeconds,a.getKeepAliveTimeoutSeconds,this.$13.bind(this,new(d("MqttProtocolCodec").WireMessage.Ping)("PINGREQ")),function(a,c){return b.$12(d("MqttTypes").MqttErrors.PING_TIMEOUT,a,c)})};b.$14=function(){var a=this;this.setConnected(!1);this.$8!=null&&this.$8.cancel();this.$7!=null&&(d("MqttEnv").Env.clearTimeout(this.$7),this.$7=null);this.$6!=null&&(this.$6.onopen=function(b){a.$9.debugTrace("Socket Open After Teardown","Socket opening after teardown")},this.$6.onmessage=function(a){},this.$6.onerror=function(a){},this.$6.onclose=function(b){a.$9.debugTrace("Socket Close After Teardown","code: "+b.code+", reason: "+b.reason)},this.$6.close(),this.$6=null);this.$2.onConnectSuccess=function(a){};this.$2.onConnectFailure=function(a,b){};this.$2.onConnection=function(){};this.$2.onConnectionLost=function(a){};this.$2.onMessageArrived=function(a,b,c){};this.$2.onMessageDelivered=function(a){}};b.disconnect=function(a){if(this.$6==null||this.$6.readyState!==this.$6.OPEN||!this.$5){this.$14();return}this.$13(new(d("MqttProtocolCodec").WireMessage.Disconnect)());this.$9.bumpCounter("protocol.debug.disconnect");this.$12(a)};b.isConnected=function(){return this.$5};b.setConnected=function(a){this.$5=a};b.subscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.subscribe.notconnected");throw c("err")("Invalid state: subscribe - not connected")}this.$9.bumpCounter("protocol.subscribe."+a);a=new(d("MqttProtocolCodec").WireMessage.Subscription)("SUBSCRIBE",a,0,this.$15());this.$13(a)};b.unsubscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.unsubscribe.notconnected");throw c("err")("Invalid state: unsubscribe - not connected")}this.$9.bumpCounter("protocol.unsubscribe."+a);a=new(d("MqttProtocolCodec").WireMessage.Subscription)("UNSUBSCRIBE",a,0,this.$15());this.$13(a)};b.publish=function(a,b,c){return this.$16(a,d("MqttProtocolCodec").createMessageWithString(b),c)};b.publishBinary=function(a,b,c){return this.$16(a,d("MqttProtocolCodec").createMessageWithBytes(b),c)};b.$16=function(a,b,c){this.$5||this.$9.bumpCounter("protocol.error.publish.notconnected");this.$9.bumpCounter("protocol.publish."+a);var e=this.$15();a=new(d("MqttProtocolCodec").WireMessage.Publish)(a,b,c,e);this.$13(a);return e};b.$15=function(){++this.$4===i&&(this.$4=1);return this.$4};b.handleMessage=function(a){var b=this;switch(a.messageType){case d("MqttProtocolCodec").MESSAGE_TYPE.CONNACK:this.$7!=null&&(d("MqttEnv").Env.clearTimeout(this.$7),this.$7=null);if(a instanceof d("MqttProtocolCodec").WireMessage.ConnAck){var e=a;if(e.returnCode!==0){this.$9.bumpCounter("protocol.error.connack.invalidreturncode");this.setConnected(!1);this.$12(d("MqttTypes").MqttErrors.CONNACK_FAILURE,"connack code="+e.returnCode,e.returnCode);return}d("MqttEnv").Env.scheduleCallback(function(){b.$2.onConnectSuccess(b.$11)});this.$8!=null&&this.$8.reset()}break;case d("MqttProtocolCodec").MESSAGE_TYPE.PUBLISH:if(a instanceof d("MqttProtocolCodec").WireMessage.Publish){var f=a;d("MqttEnv").Env.scheduleCallback(function(){b.$2.onMessageArrived(f.topic,f.payloadMessage,f.qos)});e=f.messageIdentifier;this.$9.bumpCounter("protocol.publish.received");if(f.qos===1&&e!=null){e=new(d("MqttProtocolCodec").WireMessage.PubAckUnsubAck)("PUBACK",e);this.$13(e)}}break;case d("MqttProtocolCodec").MESSAGE_TYPE.PUBACK:if(a instanceof d("MqttProtocolCodec").WireMessage.PubAckUnsubAck){e=a;var g=e.messageIdentifier;this.$9.bumpCounter("protocol.puback.received");d("MqttEnv").Env.scheduleCallback(function(){b.$2.onMessageDelivered(g)})}break;case d("MqttProtocolCodec").MESSAGE_TYPE.PINGRESP:this.$8!=null&&this.$8.reset();break;case d("MqttProtocolCodec").MESSAGE_TYPE.DISCONNECT:this.$12(d("MqttTypes").MqttErrors.SERVER_DISCONNECT);break;case d("MqttProtocolCodec").MESSAGE_TYPE.SUBACK:this.$9.bumpCounter("protocol.suback.received");break;case d("MqttProtocolCodec").MESSAGE_TYPE.UNSUBACK:this.$9.bumpCounter("protocol.unsuback.received");break;default:this.$9.logError(c("err")("MqttProtocolClient: Received unhandled message type: "+a.messageType),"Received unhandled message type");this.$9.bumpCounter("protocol.error.handlemessage.unsupportedtype");break}};return a}();g["default"]=a}),98);
__d("MqttPublishListener",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({NOT_CONNECTED:"NOT_CONNECTED",PUBLISH_ERROR:"PUBLISH_ERROR",QUEUED:"QUEUED",SENT:"SENT",ACKED:"ACKED",NOT_ACKED:"NOT_ACKED"});f.MqttPublishEvent=a}),66);
__d("MqttUserNameUtils",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(c("gkx")("21096"))return!1;return a!=null?a:typeof document==="object"&&document&&document.hasFocus&&document.hasFocus()}function b(){return navigator.userAgent}g.getMqttForegroundStatus=a;g.getUserAgent=b}),98);
__d("MqttUserName",["MqttUserNameUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,e,f,g,h,i,j,k,l){h===void 0&&(h=null),i===void 0&&(i=""),j===void 0&&(j="websocket"),k===void 0&&(k=null),l===void 0&&(l=null),this.$1=a,this.$2=b,this.$3=c,this.$4=e,this.$5=f,this.$6=g,this.$7=d("MqttUserNameUtils").getMqttForegroundStatus(),this.$8=h,this.$9=i,this.$10=j,this.$11=k,this.$12=l}var b=a.prototype;b.gen=function(a,b,c,e){e===void 0&&(e=[]);var f=d("MqttUserNameUtils").getMqttForegroundStatus(this.$7);c=c.map(function(a){a={isBase64Publish:!1,messageId:a.messageId,payload:a.payload,qos:a.qos,topic:a.topic};typeof a.payload!=="string"&&(a.payload=btoa(String.fromCharCode.apply(null,a.payload)),a.isBase64Publish=!0);return a});f={a:d("MqttUserNameUtils").getUserAgent(),aid:this.$5,aids:this.$12!=null?Object.fromEntries(this.$12):null,chat_on:this.$6,cp:this.$3,ct:this.$10,d:this.$4,dc:"",ecp:this.$2,fg:f,gas:this.$8,mqtt_sid:"",no_auto_fg:!0,p:this.$11,pack:e,php_override:this.$9,pm:c,s:a,st:b,u:this.$1};return JSON.stringify(f)};b.setForegroundState=function(a){this.$7=a};b.setChatVisibility=function(a){this.$6=a};b.getEndpointCapabilities=function(){return this.$2};b.getDeviceId=function(){return this.$4};b.setEndpointCapabilities=function(a){this.$2=a};b.getIsGuestAuthStringPresent=function(){return this.$8!==null};return a}();g["default"]=a}),98);
__d("MqttConnection",["MqttConnectionHookCollection","MqttEnv","MqttProtocolClient","MqttPublishListener","MqttTypes","MqttUserName","MqttUtils","Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=15,j=15,k=1,l=1,m=64,n="publish",o="subscribe",p="unsubscribe",q=function(a){},r=18e4,s=5*1e3,t=15,u=21;a=function(){function a(){var a=this;this.$38=function(){return a.$20};this.$39=function(){return a.$21};this.$8=!1;this.$10=d("MqttEnv").Env.getLoggerInstance();this.$11="Disconnected";this.$17=new Set();this.$24=new Map();this.$12=0;this.$13=0;this.$14=0;this.$15=0;this.$16=0;this.$8=!1;this.$5="";this.$6=new(c("MqttUserName"))("",0,1,"",0,!0);this.$9=0;this.$18=0;this.$19=!1;this.$7=null;var b=function(){};this.$1=b;this.$2=b;this.$3=b;this.$25=!1;this.$26=!1;this.$27=new(c("MqttConnectionHookCollection"))();this.$4=function(){return[]};this.$20=i;this.$21=j;this.$22=null;this.$23=0}var e=a.prototype;e.run=function(a){var b=this,c=a.endpoint,d=a.extraConnectMessageProvider,e=a.mqttUserName,f=a.onJSError,g=a.onMessageReceived,h=a.onStateChange;a=a.subscribedTopics;if(this.$8){this.$10.debugTrace("run","Run called while in running state.");return}this.$1=h;this.$3=g;this.$5=c;this.$6=e;this.$8=!0;this.$18=Date.now();this.$12=0;this.$13=0;this.$2=f||q;a&&a.forEach(function(a){return b.$17.add(a)});this.$4=d;this.$20=i;this.$21=j;this.$28()};e.shutdown=function(a){this.$29(a),this.$30("shutdown"),this.$8=!1,this.$10.debugTrace("shutdown","Shutdown")};e.subscribe=function(a){this.$17.add(a);this.ensureConnected(o)&&this.$31(a);return!0};e.publish=function(a,b,c,d){return this.$32(a,b,c,d)};e.publishBinary=function(a,b,c,d){return this.$32(a,b,c,d)};e.$32=function(a,e,f,g){var i={reject:function(a){},resolve:function(){}};g!=null&&(i.listener=g);var j=new(h||(h=b("Promise")))(function(a,b){i.resolve=a,i.reject=b}),k=this.ensureConnected(n);!k?(g==null?void 0:g.onEvent(d("MqttPublishListener").MqttPublishEvent.NOT_CONNECTED),i.reject(c("err")("Client disconnected"))):this.$33(a,e,f,i);return j};e.unsubscribe=function(a){this.$17["delete"](a);this.ensureConnected(p)&&this.$34(a);return!0};e.addHook=function(a){this.$27.addHook(a)};e.removeHook=function(a){this.$27.removeHook(a)};e.isRunning=function(){return this.$8};e.getSessionId=function(){return this.$9};e.hasFatal=function(){return this.$25};e.hasConnectSuccess=function(){return this.$26};e.canPublish=function(){return this.ensureConnected("canPublish")};e.ensureConnected=function(a){return!this.$8||this.$7==null||!this.$7.isConnected()?!1:!0};e.connectionState=function(){return this.$11};e.mqttStateFromConnectionState=function(a){switch(a){case"Connecting":case"TransportConnected":return"Connecting";case"Connected":return"Connected";case"Disconnected":return"Disconnected"}throw c("err")("Unknown state "+a)};e.testOnlyGetSubscribedTopics=function(){return this.$17};e.getDisconnectCount=function(){return this.$23};e.$29=function(a){this.$8&&this.$7!=null&&(this.$35("Disconnected"),this.$7!=null&&(this.$7.disconnect(a),this.$27.onConnectionDisconnect()),this.$7=null)};e.$36=function(a){if(this.$11==="Connected"&&a==="Disconnected"&&this.$18===0){this.$18=Date.now();return}if(a==="Connecting"&&this.$18!==0&&!this.$19){this.$10.bumpCounter("protocol.reconnectstarted");this.$19=!0;return}if(a==="Connected"&&this.$18!==0){a=Date.now()-this.$18;switch(Math.floor(a/3e4)){case 0:this.$10.bumpCounter("protocol.reconnectedwithin30s");break;case 1:this.$10.bumpCounter("protocol.reconnectedwithin60s");break;case 2:this.$10.bumpCounter("protocol.reconnectedwithin90s");break;case 3:this.$10.bumpCounter("protocol.reconnectedwithin120s");break;default:this.$10.bumpCounter("protocol.reconnectedmorethan120s");break}this.$18=0;this.$19=!1;return}};e.$35=function(a){a!==this.$11&&(this.$10.debugTrace("MQTTConnection-updateState","State changed to: "+a),this.$36(a),this.$11=a,this.$1(a))};e.$28=function(){var a=this;if(!this.$8)return;this.$11!=="Disconnected"&&this.$10.debugTrace("Reconnect","Current State not disconnected: "+this.$11);this.$35("Connecting");var b=Date.now(),e=this.$10.getBrowserConnectivity();this.$9=d("MqttUtils").generateSessionId();var f=Array.from(this.$17),g=d("MqttUtils").endpointWithSessionId(this.$5,this.$9);g=d("MqttUtils").endpointWithExtraParameter(g,"cid",this.$6.getDeviceId());try{this.$7=new(c("MqttProtocolClient"))(g);var h=this.$37(),i=h.map(function(a){return a.topic});g=this.$6.gen(this.$9,f,h);this.$7!=null&&(this.$13+=1,this.$7.connect({getKeepAliveIntervalSeconds:this.$38,getKeepAliveTimeoutSeconds:this.$39,ignoreSubProtocol:!0,mqttVersion:3,onConnectFailure:function(c,d,g){return a.$40(d,b,a.$18,f,i,e,c,g)},onConnection:function(){return a.$41(h,f)},onConnectionLost:function(b,c){return a.$42(b,c)},onConnectSuccess:function(c){return a.$43(b,a.$18,f,i,e,c)},onMessageArrived:function(b,c,d){return a.$44(b,c,d)},onMessageDelivered:function(b){return a.$45(b)},userName:g}),this.$10.bumpCounter("protocol.connectattempt"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.connectattempt"),this.$27.onConnectAttempt())}catch(a){this.$10.bumpCounter("js_error_in_init_exception"),this.$35("Disconnected"),this.$46(!1,!1,b,this.$18,f,[],e,null,14,"init error - "+a.message),a&&this.$10.logErrorWarn(a,"ws_js_error"),this.$27.onWSFatal(),this.$47(new(d("MqttTypes").MqttChannelError)(!1,"ws_js_error",a),"client_init")}};e.$37=function(){var a=this.$4(),b=65536;return a.map(function(a){a.messageId=b--;return a})};e.$31=function(a){try{if(this.$7!=null){this.$7.subscribe(a);this.$10.debugTrace("#doSubscribe","Subscribing to "+a);this.$27.onSubscribe(a);this.$10.bumpCounter("protocol.subscribe");return!0}}catch(b){this.$10.logError(b,"Exception subscribing"),this.$10.bumpCounter("subscribe_exception."+a),this.$10.bumpCounter("protocol.subscribe.error")}return!1};e.$34=function(a){try{if(this.$7!=null){this.$7.unsubscribe(a);this.$10.debugTrace("#doUnsubscribe","Unsubscribing to "+a);this.$27.onUnsubscribe(a);this.$10.bumpCounter("protocol.unsubscribe");return!0}}catch(b){this.$10.logError(b,"Exception unsubscribing"),this.$10.bumpCounter("unsubscribe_exception."+a),this.$10.bumpCounter("protocol.unsubscribe.error")}return!1};e.$33=function(a,b,c,e){if(this.$7!=null)try{var f;typeof b==="string"?f=this.$7.publish(a,b,c):f=this.$7.publishBinary(a,b,c);this.$10.bumpCounter("protocol.publish");b=f!=null?f:"null";this.$10.debugTrace("#doPublish","publish "+a+" with messageId:"+b+" qos:"+c);this.$27.onPublish(a);(b=e.listener)==null?void 0:b.onEvent(d("MqttPublishListener").MqttPublishEvent.SENT);f!=null?(this.$10.bumpCounter("publish.ack_expected"),this.$24.set(f,e)):e.resolve();return!0}catch(b){this.$10.logError(b,"Exception publishing");this.$10.bumpCounter("publish_exception."+a);e.reject(b);this.$10.bumpCounter("protocol.publish.error");return!1}else return!1};e.$48=function(a){var b=this;a===void 0&&(a=null);if(!this.$8)return;this.$29(d("MqttTypes").MqttErrors.RECONNECT);this.$30("reconnect");this.$49();this.$9=-1;this.$16=0;a=a;a==null&&(a=k*Math.pow(2,this.$12));a=Math.max(a,l);a=Math.min(a,m);a=a*(1e3+d("MqttEnv").Env.random()*200);this.$10.debugTrace("#scheduleReconnect","Reconnect in "+a+" ms");this.$22=d("MqttEnv").Env.setTimeout(function(){b.$28()},a);this.$12+=1};e.$49=function(){var a=Date.now()-this.$16,b=this.$16!==0&&a>s,c=this.$12>t;(b||c)&&(this.$12=0);this.$16!==0&&a<=s&&this.$10.bumpCounter("short_lived_session");c&&this.$10.bumpCounter("connection_attempt_limit")};e.$46=function(a,b,c,d,e,f,g,h,i,j){a?this.$14++:this.$15++;var k=Date.now();this.$10.eventLogConnect({ackReceived:b,attemptNumber:this.$13,connectionState:this.mqttStateFromConnectionState(this.$11),connectionStatus:a,disconnectCount:this.$23,duration:k-c,errorCode:i,errorMessage:j,failTotal:this.$15,hostname:this.$5,messageSizeBytes:h,osConnectivity:g,publishes:f,sessionID:this.$9,subscribedTopics:e,successTotal:this.$14,total_duration:k-d});a&&(this.$13=0)};e.$40=function(a,b,c,d,e,f,g,h){var i=a.mqttError;h=h!=null?i.errorMessage+" - "+h:i.errorMessage;this.$10.debugTrace("connect","Connect failed "+h);this.$10.bumpCounter("protocol.onconnectfailure");this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectfailure");this.$27.onConnectFailure();this.$46(!1,a.connAck!==-1,b,c,d,e,f,g,i.errorCode,h);if(a.connAck!=null){this.$10.bumpCounter("protocol.connect_failure."+a.connAck);if(a.connAck===u){this.$48(r);return}}this.$48()};e.$41=function(a,b){var c=this;this.$10.bumpCounter("protocol.onconnection");this.$10.debugTrace("Connect","Socket established");this.$27.onConnected();this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnection");b.forEach(function(a){c.$27.onSubscribe(a)});a.forEach(function(a){c.$27.onPublish(a.topic)});this.$35("TransportConnected")};e.$43=function(a,b,c,d,e,f){this.$10.bumpCounter("protocol.onconnectsuccess"),this.$10.debugTrace("connect","Connect success"),this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectsucess"),this.$27.onConnectSuccess(),this.$26=!0,this.$35("Connected"),this.$46(!0,!0,a,b,c,d,e,f),this.$50(c),this.$16=Date.now()};e.$42=function(a,b){this.$10.bumpCounter("protocol.onconnectionlost");this.$23++;if(a.errorCode){b=b!=null?a.errorMessage+" - "+b:a.errorMessage;this.$10.eventLogDisconnect({disconnectCount:this.$23,duration:Date.now()-this.$16,errorCode:a.errorCode,errorMessage:b,sessionID:this.$9})}this.$10.debugTrace("connect","connection lost");this.$27.onConnectionLost();this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onconnectionlost");this.$48()};e.$44=function(a,b,c){this.$10.bumpCounter("protocol.onmessagearrived");this.$6.getIsGuestAuthStringPresent()&&this.$10.bumpCounter("guestAuthentication.onmessagearrived");this.$10.debugTrace("onMessageArrived","Message received on "+a);this.$27.onMessage(a);try{this.$3(a,b,c)}catch(b){this.$10.logError(b,"Listener threw error"),this.$10.bumpCounter("listener_error."+a)}};e.$45=function(a){this.$10.bumpCounter("protocol.onmessagedelivered");var b=a!=null?a:"null";this.$10.debugTrace("onMessageDelivered","Delivered Message {ID: "+b+"}");if(a==null)return;b=this.$24.get(a);if(b==null){this.$10.bumpCounter("protocol.message_with_unknown_id");return}this.$24["delete"](a);(a=b.listener)==null?void 0:a.onEvent(d("MqttPublishListener").MqttPublishEvent.ACKED);b.resolve();this.$10.bumpCounter("publish.ack_received")};e.$30=function(a){this.$10.bumpCounter("protocol.fail_all_unacked_publishes."+a),this.$24.forEach(function(b,e,f){(e=b.listener)==null?void 0:e.onEvent(d("MqttPublishListener").MqttPublishEvent.NOT_ACKED);b.reject(c("err")(a))}),this.$24.clear()};e.$50=function(a){var b=this,c=new Set(a);c.forEach(function(a){b.$17.has(a)||b.unsubscribe(a)});a=new Set(this.$17);a.forEach(function(a){c.has(a)||b.subscribe(a)})};e.$47=function(a,b){try{this.$10.bumpCounter("js_error_in_init");this.$10.bumpCounter(b+".error");this.$25=!0;var c=a?a.message:"error";this.$10.debugTrace("onError",b+": "+c);this.$2(a)}catch(a){this.$10.bumpCounter("js_error_in_error_logging"),this.$10.logError(a,"JS error while trying to log previous error")}};e.setRunning_OnlyForTests=function(a){this.$8=a};return a}();g["default"]=a}),98);
__d("MqttWebSocketUtils",[],(function(a,b,c,d,e,f){"use strict";function b(){return"WebSocket"in a&&a.WebSocket!=null&&"CLOSING"in a.WebSocket.prototype}f.hasWSSupport=b}),66);
__d("MqttChannel",["ChannelClientID","IrisSubscribeChecker","MetaConfig","MqttAnalyticsHook","MqttConnection","MqttEnv","MqttPublishListener","MqttTypes","MqttUserName","MqttUtils","MqttWebSocketUtils","Promise","Run","err","isFastRefreshEnabledForCurrentDomain","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=29125;a=function(){function a(a){var b=this,e=a.endpoint,f=a.pollingEndpoint,g=a.userFbid,h=a.appId,i=a.initialSubscribedTopics,j=a.capabilities,k=a.clientCapabilities,l=a.chatVisibility;l=l===void 0?!0:l;var m=a.guestAuthString;m=m===void 0?null:m;var n=a.phpOverride;n=n===void 0?"":n;var o=a.clientType;o=o===void 0?"websocket":o;var p=a.deviceId;p=p===void 0?c("ChannelClientID").getID():p;var q=a.pageId;q=q===void 0?null:q;a=a.assetIds;a=a===void 0?null:a;this.$11=d("MqttEnv").Env.getLoggerInstance();this.$11.setAppId(h);this.$12=new(c("MqttUserName"))(g,j,k,p,h,l,m,n,o,q,a);this.$1=e;this.$2=f;this.$5="Disconnected";this.$7="LPInactive";this.$6="Disconnected";this.$3=[];this.$4=new Set();this.$8=new Map();this.$9=new Map();this.$10=new(c("MqttConnection"))();this.$13=null;this.$16=new(c("MqttAnalyticsHook"))();this.$15=new Map();this.$14=[];if(!d("MqttEnv").Env.isUserLoggedInNow()&&!c("isFastRefreshEnabledForCurrentDomain")()&&(m==null||m=="")){this.$11.bumpCounter("logged_out_init");return}this.$10.addHook(this.$16);this.$10.addHook(new(c("IrisSubscribeChecker"))(function(){return b.$4.size>0}));this.$17(i);this.$18()}var e=a.prototype;e.$17=function(a){var b=this;if(this.$10.isRunning()){this.$19("run","Connection started calling run again");return}if(d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled))if(c("MetaConfig")._("15")){this.$19("MqttChannel","Websocket disabled, will do long polling only");return}else if(!d("MqttWebSocketUtils").hasWSSupport()){this.$19("MqttChannel","Websocket Unavailable, will do long polling only");this.$11.bumpCounter("ws_unavailable_polling");return}this.$10.run({endpoint:this.$1,extraConnectMessageProvider:function(){return b.$20()},mqttUserName:this.$12,onJSError:function(a){b.$21(a)},onMessageReceived:function(a,c,d){b.$22(a,c,d)},onStateChange:function(a){b.$23(a)},subscribedTopics:a});this.$24()};e.$24=function(){var a=this;d("Run").onUnload(function(){a.$25(d("MqttTypes").MqttErrors.BROWSER_CLOSE)})};e.shutdown=function(){this.$25(d("MqttTypes").MqttErrors.APP_DISCONNECT)};e.$25=function(a){this.$10&&this.$10.shutdown(a),this.$13&&this.$13.shutdown(),this.$16.onTabClose()};e.publish=function(a,b,c){c===void 0&&(c={qos:1,skipBuffer:!1});return this.$26(a,b,c)};e.publishBinary=function(a,b,c){c===void 0&&(c={qos:1,skipBuffer:!1});return this.$26(a,b,c)};e.$26=function(a,b,c){c===void 0&&(c={qos:1,skipBuffer:!1});var e;c.qos===0?e=this.$27(a,b,c.listener):e=this.$28(a,b,c);d("MqttUtils").promiseDone(e,function(){},function(a){(a=c.listener)==null?void 0:a.onEvent(d("MqttPublishListener").MqttPublishEvent.PUBLISH_ERROR)});return e};e.$27=function(a,b,c){return this.$29(a,b,0,c,1,null)};e.$28=function(a,c,e){var f={reject:function(a){},resolve:function(){}},g=new(h||(h=b("Promise")))(function(a,b){f.resolve=a,f.reject=b}),i=d("MqttEnv").Env.random();c={ack:f,attempt:0,options:e,payload:c,publishToken:i,startTime:Date.now(),timeoutId:null,topic:a};if(e.skipBuffer)if(this.$10.connectionState()==="Connecting"){this.$14.push(c);(a=e.listener)==null?void 0:a.onEvent(d("MqttPublishListener").MqttPublishEvent.QUEUED)}else this.$30(c);else{c.timeoutId=this.$31(i);this.$15.set(i,c);(a=e.listener)==null?void 0:a.onEvent(d("MqttPublishListener").MqttPublishEvent.QUEUED);this.$32(c)}return g};e.$30=function(a){a.attempt+=1,d("MqttUtils").promiseDone(this.$29(a.topic,a.payload,a.options.qos,a.options.listener,a.attempt,a.startTime),function(){a.ack.resolve()},function(b){a.ack.reject(b)})};e.$32=function(a){var b=this;a.attempt+=1;d("MqttUtils").promiseDone(this.$29(a.topic,a.payload,a.options.qos,a.options.listener,a.attempt,a.startTime),function(){return b.$33(a)},function(a){})};e.$29=function(a,b,e,f,g,h){var i=this,j,k,l=this.getConnectionState(),m=Date.now();!this.$10.canPublish()&&this.$13&&this.$13.canPublish()?(typeof b==="string"?j=this.$13.publish(a,b,e):j=this.$13.publishBinary(a,b,e),k="lp",f!=null&&(j=j.then(function(){return f.onEvent(d("MqttPublishListener").MqttPublishEvent.SENT)})),this.$11.bumpCounter("try_publish_lp")):(typeof b==="string"?j=this.$10.publish(a,b,e,f):j=this.$10.publishBinary(a,b,e,f),k="ws",this.$11.bumpCounter("try_publish_ws"));c("promiseDone")(j,function(){i.$11.eventLogOutgoingPublish({attempt:g,connectionState:l,disconnectCount:i.$10.getDisconnectCount(),errorMessage:null,firstAttemptStartTime:h,payloadSizeBytes:b.length*2,protocol:k,qos:e,sessionID:i.$10.getSessionId(),success:!0,thisAttemptStartTime:m,topic:a})},function(c){i.$11.eventLogOutgoingPublish({attempt:g,connectionState:l,disconnectCount:i.$10.getDisconnectCount(),errorMessage:c!=null?c.toString():null,firstAttemptStartTime:h,payloadSizeBytes:b.length*2,protocol:k,qos:e,sessionID:i.$10.getSessionId(),success:!1,thisAttemptStartTime:m,topic:a})});return j};e.subscribe=function(a,b){var c=this;this.$10.subscribe(a);var d=this.$8.get(a);!d?(d=[b],this.$8.set(a,d)):d.push(b);return function(){var d=c.$8.get(a)||[];d=d.filter(function(a){return a!==b});c.$8.set(a,d);d.length===0&&c.unsubscribeAll(a)}};e.subscribeBinary=function(a,b){var c=this;this.$10.subscribe(a);var d=this.$9.get(a);!d?(d=[b],this.$9.set(a,d)):d.push(b);return function(){var d=c.$9.get(a)||[];d=d.filter(function(a){return a!==b});c.$9.set(a,d);d.length===0&&c.unsubscribeAll(a)}};e.subscribeChannelEvents=function(a){this.$3.push(a)};e.unsubscribeChannelEvents=function(a){a=this.$3.indexOf(a);a>-1&&this.$3.splice(a,1)};e.registerExtraConnectPayloadProvider=function(a){var b=this;this.$19("MqttChannel","registerExtraConnectPayloadProvider called");this.$4.add(a);if(this.$10.isRunning()){a=a.getPublishMessages();a.forEach(function(a){typeof a.payload==="string"?b.publish(a.topic,a.payload,{qos:a.qos,skipBuffer:!0}):b.publishBinary(a.topic,a.payload,{qos:a.qos,skipBuffer:!0})})}};e.unregisterExtraConnectPayloadProvider=function(a){this.$4["delete"](a)};e.unsubscribeAll=function(a){this.$10.unsubscribe(a),this.$8["delete"](a),this.$9["delete"](a)};e.getConnectionState=function(){return this.$5};e.getLongPollingStatus=function(){return this.$7};e.getEndpoint=function(){return this.$1};e.addHook=function(a){this.$10.addHook(a)};e.removeHook=function(a){this.$10.removeHook(a)};e.testOnlyMessageReceived=function(a,b){this.$22(a,b,-1)};e.$34=function(a){var b=this.$15.get(a);b!=null&&b.timeoutId!=null&&d("MqttEnv").Env.clearTimeout(b.timeoutId);this.$15["delete"](a)};e.$31=function(a){var b=this;return d("MqttEnv").Env.setTimeout(function(a){var d=b.$15.get(a);if(!d)return;var e=d.topic;b.$11.bumpCounter("publish_timeout."+e);b.$11.debugTrace("publish_timeout","Timeout publishing topic: "+e+" publishToken: "+a);b.$34(a);d.ack.reject(c("err")("Publish Timed Out"))},i,a)};e.$33=function(a){var b=a.publishToken,c=this.$15.get(b);if(!c)return;this.$34(b);a.ack.resolve();this.$11.debugTrace("publish_success","Topic: "+a.topic+" publishToken: "+a.publishToken);this.$11.bumpCounter("publish_success."+a.topic)};e.$22=function(a,b,c){var d=this.$8.get(a);this.$11.eventLogIncomingPublish({connectionState:this.getConnectionState(),disconnectCount:this.$10.getDisconnectCount(),payloadSizeBytes:b.payloadString.length*2,qos:c,sessionID:this.$10.getSessionId(),topic:a});if(!d)this.$11.debugTrace("_onMessageReceived",a+" being dropped, no listeners");else for(var d=d,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;try{g(b.payloadString)}catch(a){this.$11.logError(a,"Listener exception"),this.$11.bumpCounter("listener_error")}}g=this.$9.get(a);this.$11.eventLogIncomingPublish({connectionState:this.getConnectionState(),disconnectCount:this.$10.getDisconnectCount(),payloadSizeBytes:b.payloadBytes.length,qos:c,sessionID:this.$10.getSessionId(),topic:a});if(!g)this.$11.debugTrace("_onMessageReceived",a+" being dropped, no binary listeners");else for(f=g,e=Array.isArray(f),d=0,f=e?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(d>=f.length)break;c=f[d++]}else{d=f.next();if(d.done)break;c=d.value}a=c;try{a(b.payloadBytes)}catch(a){this.$11.logError(a,"Binary Listener exception"),this.$11.bumpCounter("listener_error")}}};e.$21=function(a){if(d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)){a.isRecoverable?this.$11.bumpCounter("recoverable_error_skipped"):this.$11.bumpCounter("unrecoverable_error_skipped");return}a.isRecoverable?this.$11.bumpCounter("recoverable_error_not_skipped"):this.$11.bumpCounter("unrecoverable_error_not_skipped");this.$35(a)};e.$36=function(a){this.$35(a)};e.$35=function(a){for(var b=this.$3,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.onJSError&&e.onJSError(a)}};e.$37=function(){var a=this;this.$14.forEach(function(b){a.$30(b),a.$11.bumpCounter("publish_from_temp_buffer."+b.topic)});this.$14=[];this.$15.forEach(function(b,c,d){a.$32(b),a.$11.bumpCounter("publish_from_buffer."+b.topic)})};e.$23=function(a){a==="Connecting"?(this.$14.forEach(function(a){a.ack.reject(c("err")("Client Reconnecting - "+a.topic))}),this.$14=[]):a==="TransportConnected"&&this.$37(),this.$19("_changeState","Connection state = "+a),this.$38(a,this.$7)};e.$39=function(a,b){this.$13&&this.$13.canPublish()&&this.$37(),this.$19("_changeLPStatus","LP status = "+a+", LP Request status = "+b),this.$38(this.$6,a)};e.$38=function(a,b){var c=this.$10.mqttStateFromConnectionState(a);this.$13&&this.$13.canPublish()&&(c="Connected");this.$6=a;(c!==this.$5||b!=this.$7)&&(this.$5=c,this.$7=b,this.$40(c))};e.$40=function(a){for(var b=this.$3,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.onMQTTStateChanged(a)}};e.$20=function(){var a=this,b=[];this.$4.forEach(function(c){try{c=c.getPublishMessages();Array.prototype.push.apply(b,c)}catch(b){a.$11.logError(b,"ConnectPayload provider exception"),a.$11.bumpCounter("connectPayloadProvider_error")}});return b};e.$18=function(){var a=this;d("MqttEnv").Env.genGk(d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled)&&this.$2&&this.$2!=""&&c("requireDeferred")("MqttLongPollingRunner").__setRef("MqttChannel").onReady(function(b){b=new b(a.$2,a.$12,a.$10.hasFatal(),a.$10.hasConnectSuccess(),function(b,c,d){return a.$22(b,c,d)},function(){var b=Array.from(a.$8.keys()),c=Array.from(a.$9.keys());return Array.from(new Set(b.concat(c)))},function(){return a.$20()},function(b){a.$36(b)},function(b,c){a.$39(b,c)});b.start();a.$10.addHook(b);b.addHook(a.$16);a.$13=b;a.$11.debugTrace("MqttChannel","longPollingRunner loaded")})};e.$19=function(a,b){this.$11.debugTrace(a,"Mqtt channel: "+b)};e.setForegroundState=function(a){this.$12&&this.$12.setForegroundState(a)};e.setChatVisibility=function(a){this.$12&&this.$12.setChatVisibility(a)};e.getEndpointCapabilities=function(){return this.$12.getEndpointCapabilities()};e.setEndpointCapabilities=function(a){this.$12.setEndpointCapabilities(a)};e.getConnection_OnlyForTests=function(){return this.$10};return a}();g["default"]=a}),98);
__d("MqttConfig",["MqttWebConfig"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("MqttWebConfig")}),98);
__d("MqttEnvConfigStorage",["WebStorage"],(function(a,b,c,d,e,f,g){var h,i="mqtt:";function a(a,b){var d=(h||(h=c("WebStorage"))).getLocalStorage();if(d){d=d.getItem(i+a);if(d!=null)return d}return b}function b(a,b){var d=(h||(h=c("WebStorage"))).getLocalStorage();d&&(b==null?d.removeItem(i+a):(h||(h=c("WebStorage"))).setItemGuarded(d,i+a,b))}g.configRead=a;g.configWrite=b}),98);
__d("MqttLogger",["ChannelClientID","FBLogger","LogHistory","MetaConfig","MqttEnv","MqttGlobalStreamCounter","MqttUnifiedClientConnectFalcoEvent","MqttUnifiedClientDisconnectFalcoEvent","MqttUnifiedClientIncomingPublishFalcoEvent","MqttUnifiedClientOutgoingPublishFalcoEvent","MqttWsClientTypedLoggerLite","NetworkStatus","ODS","Random"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("MetaConfig")._("99"),j="mqtt_client",k=100,l="WEBSOCKET",m=typeof window!=="undefined"?window:self,n=null,o={CLIENT_ERROR:"mqtt_client_error",CONNECT:"mqtt_client_connect",DISCONNECT:"mqtt_client_disconnect",PUBLISH:"mqtt_client_publish",PUBLISH_TIMEOUT:"mqtt_qos1_publish_timeout",SOCKET_DISCONNECT:"mqtt_protocol_error"},p={CONNECT:"connect",DISCONNECT:"disconnect",INCOMING_PUBLISH:"incoming_publish",OUTGOING_PUBLISH:"outgoing_publish"};a=function(){a.getInstance=function(){n||(n=new a());return n};function a(){this.$1=d("LogHistory").getInstance(j),this.$2=0,this.$3=Date.now(),this.$4=c("ChannelClientID").getID(),this.$6(),this.$5=d("MqttGlobalStreamCounter").getInstance(),this.$5.isEnabled()||(this.$5=null)}var b=a.prototype;b.setAppId=function(a){this.$2===0&&(this.$2=a)};b.eventLogConnect=function(a){var b=a.ackReceived,d=a.attemptNumber,e=a.connectionState,f=a.connectionStatus,g=a.disconnectCount,h=a.duration,i=a.errorMessage,j=a.failTotal,k=a.hostname,m=a.messageSizeBytes,n=a.osConnectivity,q=a.sessionID,r=a.successTotal;a=a.total_duration;f=f?"success":"failed";this.bumpCounter(o.CONNECT+"."+f);f=r/(r+j);r=n&&this.getBrowserConnectivity();var s={acked:b,attempt_number:d.toString(),client_type:l,connection_state:e,disconnect_count:g.toString(),duration:h.toString(),error:i,event_type:p.CONNECT,extra_data:{connect_success_rate:f.toString(),device_id:this.$4,hostname:k},os_connectivity:r,payload_size:m==null?void 0:m.toString(),session_id:q.toString(),total_duration:a.toString(),ws_count:(j=this.$5)==null?void 0:j.getGlobalState().totalConnectionStreams.toString()};this.$7(function(){c("MqttUnifiedClientConnectFalcoEvent").log(function(){return s})})};b.eventLogPull=function(a){var b=a.duration,c=a.errorMessage,e=a.hostname,f=a.pullEventName,g=a.sessionID;a=a.status;a={connection_status:a,device_id:this.$4,duration:b,error_message:c,hostname:e,href:m.location.hostname,logged_in:d("MqttEnv").Env.isUserLoggedInNow(),session_id:g};this.$8(f,a)};b.eventLogPullFinish=function(a){var b=a.duration,c=a.errorMessage,e=a.publishReceived,f=a.publishSent,g=a.pullEventName;a=a.sessionID;b={device_id:this.$4,duration:b,error_message:c,href:m.location.hostname,logged_in:d("MqttEnv").Env.isUserLoggedInNow(),publish_received:e,publish_sent:f,session_id:a};this.$8(g,b)};b.eventLogDisconnect=function(a){var b=a.disconnectCount,d=a.duration,e=a.errorMessage;a=a.sessionID;this.bumpCounter(o.DISCONNECT);var f={client_type:l,connection_state:"Disconnected",disconnect_count:b.toString(),duration:d.toString(),error:e,event_type:p.DISCONNECT,extra_data:{device_id:this.$4},os_connectivity:this.getBrowserConnectivity(),session_id:a.toString(),ws_count:(b=this.$5)==null?void 0:b.getGlobalState().totalConnectionStreams.toString()};this.$7(function(){c("MqttUnifiedClientDisconnectFalcoEvent").log(function(){return f})})};b.eventLogOutgoingPublish=function(a){var b=a.attempt,d=a.connectionState,e=a.disconnectCount,f=a.errorMessage,g=a.firstAttemptStartTime,h=a.payloadSizeBytes,i=a.protocol,j=a.qos,k=a.sessionID,m=a.success,n=a.thisAttemptStartTime;a=a.topic;this.bumpCounter(o.PUBLISH+"."+a);var q=Date.now(),r={acked:j===1?m:null,attempt_number:b.toString(),client_type:l,connection_state:d,disconnect_count:e.toString(),duration:(q-n).toString(),error:f,event_type:p.OUTGOING_PUBLISH,extra_data:{device_id:this.$4,protocol:i},os_connectivity:this.getBrowserConnectivity(),payload_size:h.toString(),qos:j.toString(),session_id:k.toString(),topic:a,total_duration:g!=null?(q-g).toString():null};this.$7(function(){c("MqttUnifiedClientIncomingPublishFalcoEvent").log(function(){return r})})};b.eventLogIncomingPublish=function(a){var b=a.connectionState,d=a.disconnectCount,e=a.payloadSizeBytes,f=a.qos,g=a.sessionID;a=a.topic;var h={client_type:l,connection_state:b,disconnect_count:d.toString(),event_type:p.INCOMING_PUBLISH,extra_data:{device_id:this.$4},os_connectivity:this.getBrowserConnectivity(),payload_size:e.toString(),qos:f.toString(),session_id:g.toString(),topic:a};b=a=="/webrtc"||a=="/rtc_multi";this.$9(function(){c("MqttUnifiedClientOutgoingPublishFalcoEvent").log(function(){return h})},50,b)};b.logError=function(a,b){d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c("FBLogger")(j).catching(a).mustfix(b)}catch(a){}})};b.logErrorWarn=function(a,b){d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c("FBLogger")(j).catching(a).warn(b)}catch(a){}})};b.logWarn=function(a,b){var c=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c.$1.warn(a,b)}catch(a){}})};b.debugTrace=function(a,b){var c=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){try{c.$1.debug(a,b)}catch(a){}})};b.bumpCounter=function(a){var b=this;if(!d("Random").coinflip(k))return;d("MqttEnv").Env.scheduleLoggingCallback(function(){b.$2!==0&&(h||(h=d("ODS"))).bumpEntityKey(2966,"mqtt_ws_client",b.$2+"."+a,k),(h||(h=d("ODS"))).bumpEntityKey(2966,"mqtt_ws_client",a,k)})};b.$8=function(a,b,e){var f=this;d("MqttEnv").Env.scheduleLoggingCallback(function(){b.event_type=a;b.app_id=f.$2;b.online=f.$10();var d=JSON.stringify(b);f.$1.log(a,d,{weight:e});a!==o.DISCONNECT&&c("MqttWsClientTypedLoggerLite").log(b)})};b.$9=function(a,b,c){i&&b!==0?c=c||d("Random").coinflip(b):c=!0;c&&d("MqttEnv").Env.scheduleCallback(a)};b.$7=function(a){this.$9(a,0,!1)};b.$10=function(){return m.navigator&&m.navigator.onLine!==void 0?m.navigator.onLine:!1};b.getBrowserConnectivity=function(){return c("NetworkStatus").isOnline()};b.$6=function(){var a=this;if(m.navigator&&m.navigator.onLine!==void 0){var b=function(b){b=b.online;b||a.bumpCounter("browser_disconnect")};c("NetworkStatus").onChange(b)}};return a}();g["default"]=a}),98);
__d("MqttEnvGk",["MqttEnv","MqttLogger","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case d("MqttEnv").MqttGkNames.mqtt_waterfall_log_client_sampling:return c("gkx")("21119");case d("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled:return!0;case d("MqttEnv").MqttGkNames.mqtt_lp_use_fetch:return c("gkx")("21120");case d("MqttEnv").MqttGkNames.mqtt_fast_lp:return c("gkx")("21121");case d("MqttEnv").MqttGkNames.mqtt_lp_no_delay:return c("gkx")("21122");case d("MqttEnv").MqttGkNames.mqtt_enable_publish_over_polling:return c("gkx")("21123");case d("MqttEnv").MqttGkNames.mqttweb_global_connection_counter:return c("gkx")("21124");default:c("MqttLogger").getInstance().logError(new Error("unknown gk"),"Unknown GK value "+a);return!1}}g["default"]=a}),98);
__d("MqttEnvInitializer",["CurrentMessengerUser","MqttEnv","MqttEnvConfigStorage","MqttEnvGk","MqttLogger","Random","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";function a(){d("MqttEnv").Env.initialize(c("Random").random,d("CurrentMessengerUser").isLoggedInNow,c("clearTimeout"),c("setTimeoutAcrossTransitions"),function(){return c("MqttLogger").getInstance()},c("MqttEnvGk"),null,null,null,d("MqttEnvConfigStorage").configRead,d("MqttEnvConfigStorage").configWrite)}b={genGk:c("MqttEnvGk"),initialize:a};g["default"]=b}),98);
__d("FBMqttChannel",["MqttChannel","MqttConfig","MqttEnvInitializer"],(function(a,b,c,d,e,f,g){"use strict";c("MqttEnvInitializer").initialize();b=new(c("MqttChannel"))({appId:(a=c("MqttConfig")).appID,capabilities:a.capabilities,chatVisibility:!1,clientCapabilities:a.clientCapabilities,endpoint:a.endpoint,initialSubscribedTopics:a.subscribedTopics,phpOverride:a.hostNameOverride,pollingEndpoint:a.pollingEndpoint,userFbid:a.fbid});g["default"]=b}),98);/*FB_PKG_DELIM*/
__d("MAWRestoreRewriteUtils",["gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){return c("qex")._("656")===!0};a=function(){return h()||c("gkx")("23928")};g.isOneDBEnabled=h;g.shouldUseRestoreLLA=a}),98);
__d("WAFixedSizeMap",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){a=a.max;this.$1=new Map();this.$2=new Map();this.$3=0;this.$4=100;this.$4=a}var b=a.prototype;b.has=function(a){return this.$1.has(a)};b.get=function(a){return this.$1.get(a)};b.set=function(a,b){this.$1.set(a,b);this.$2.set(this.$3,a);this.$3+=1;b=this.$2.get(this.$3-this.$4-1);b!=null&&(this.$1["delete"](b),this.$2["delete"](this.$3-this.$4-1))};b.clear=function(){this.$1.clear(),this.$2.clear(),this.$3=0};b.size=function(){return this.$1.size};return a}();f.FixedSizeMap=a}),66);
__d("MAWJobActionsV2",["MAWTransactionMode","Promise","WAFixedSizeMap","WAHex","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return new(h||(h=b("Promise")))(function(b,c){a.onsuccess=b,a.onerror=c})}function j(a){return i(a).then(function(a){return a.target.result})}function k(a,c,e){return new(h||(h=b("Promise")))(function(b,f){var g=a(d("MAWTransactionMode").READONLY).index(c);g=g.openCursor(IDBKeyRange.only(e));var h=[];g.onsuccess=function(a){a=a.target.result;if(!a){b(h);return}h.push(a.value);a["continue"]()};g.onerror=function(a){return f(a)}})}var l=new(d("WAFixedSizeMap").FixedSizeMap)({max:100});function a(a,c){var e,f=c.args,g=c.scheduleConfig,i=c.type,l=c.uniqKey;c=c.version;c=c===void 0?1:c;e=JSON.stringify([i,(e=l)!=null?e:d("WAHex").randomHex(32)]);var n={backedOffCount:0,current:f,original:f,scheduleConfig:g,startTime:d("WATimeUtils").unixTime(),step:"$unstarted",stepFirstStartTime:null,stepHardStartCountAfterTimeout:0,stepUnexpectedErrorCount:0,type:i,uniqKey:e,version:c,waitUntil:null},o=function(){var b,c=a().add(n),d=j(c);if(n.uniqKey==null&&typeof ((b=c.transaction)==null?void 0:b.commit)==="function")try{c.transaction.commit()}catch(a){}return d.then(function(a){return{id:a,newlyCreated:!0}})};if(l!=null)return k(a,"uniqKey",e).then(function(c){if(c.length===0)return o();var d=[],e=null;c.forEach(function(b){b.step!=="$finished"?e=b:d.push(m(a,b.jobId))});return(h||(h=b("Promise"))).all(d).then(function(){return e!=null?{id:e.jobId,newlyCreated:!1}:o()})});else return o()}function m(a,b){return j(a()["delete"](b))}function c(a,b){return j(a().get(b))}function e(a,b){return j(a().put(b))}function f(a){return j(a().getAll())}function n(a){try{return i(a().clear()).then(function(){})}catch(a){if(a.name==="NotFoundError")return(h||(h=b("Promise"))).resolve();throw a}}g.recentFinishedJobsCache=l;g.maybeCreateJob=a;g.deletePersistedJob=m;g.readPersistedJob=c;g.updatePersistedJob=e;g.readAllPersistedJobs=f;g.clearJobs=n}),98);
__d("WAGetHashFromProtocolMsgId",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.externalId+"_"+a.author+"_"+a.chat}f.getHashFromProtocolMsgId=a}),66);
__d("MAWEBUploadTrackingUtils",["MAWAckLevel","MAWEBSwitch","MAWExternalId","MAWMsgType","MAWQplProxy","WAGetHashFromProtocolMsgId","WAGlobals","WAHashStringToNumber","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=!1;function a(){h=!0}function i(a,b,e,f,g){g===void 0&&(g=!1);if(!c("MAWEBSwitch").isEnabled())return;d("MAWQplProxy").startQplUserFlow(c("qpl")._(521480745,"830"),{bool:{eb_switch:c("MAWEBSwitch").isEnabled(),eb_upload_queue:d("WAGlobals").getConfig().useEbUploadQueue(),fromUploadQueue:g,middleware_init:h},string:{externalId:a,msgType:b,triggerType:e}},f);j(f,"upload_tracking_started")}function j(a,b,e){d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(521480745,"830"),b,{annotations:e,instanceKey:a})}function b(a,b,e){j(a,"upload_tracking_failed"),d("MAWQplProxy").sendQPLFailThroughBridge(c("qpl")._(521480745,"830"),b,e,a)}function e(a,b,e){j(a,b,e),d("MAWQplProxy").sendQPLSuccessThroughBridge(c("qpl")._(521480745,"830"),void 0,a)}var k=new Map();function l(){return d("WAHashStringToNumber").hashStringToNumber(d("MAWExternalId").generateExternalId())}function m(a,b){b===void 0&&(b=0);return d("WAHashStringToNumber").hashStringToNumber(d("WAGetHashFromProtocolMsgId").getHashFromProtocolMsgId(a)+"_"+d("WAGlobals").getMyDeviceJid()+"_"+b)}function f(a,b,c,e){c===void 0&&(c=0);if(!d("WAGlobals").getConfig().useEbUploadQueue())return;c=m(a,c);i(a.externalId,e,b,c,!0)}function n(a){return c("MAWEBSwitch").isEnabled()&&d("MAWMsgType").isEBSupportedMsgType(a.type)&&a.ack>=d("MAWAckLevel").ACK.sent&&a.serverTs!=null&&!(a.ephemeralSetting!=null&&a.ephemeralSetting.ephemeralExpirationInSec>0)}function o(a,b){if(!n(a))return;p(a.externalId,a.type,b)}function p(a,b,c){var d=q(a);d!=null&&i(a,b,c,d)}function q(a){if(k.get(a)!=null)return null;var b=l();k.set(a,b);return b}function r(){var a=new Map(k);k.clear();return a}function s(a){a=k.get(a);return a!=null?a:null}g.setMiddlewareInitRan=a;g.startUploadTracking=i;g.addPoint=j;g.endFail=b;g.endSuccess=e;g.genInstanceKeyOnly=l;g.genInstanceKeyForUploadQueue=m;g.maybeStartTrackingForUploadQueue=f;g.isUploadSupported=n;g.maybeStartTrackingForMiddleware=o;g.startTrackingForMiddleware=p;g.genInstanceKeyForMiddleware=q;g.cloneAndClearInstanceMap=r;g.removeInstanceKey=s}),98);
__d("MAWEncryptedBackupsStateManager",["MAWEBSwitch","MAWEBUploadTrackingUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case 1:return;case 3:c("MAWEBSwitch").set(!0);return;case 2:case 4:default:c("MAWEBSwitch").set(!1);h();return}}function h(){d("MAWEBUploadTrackingUtils").cloneAndClearInstanceMap().forEach(function(a,b){d("MAWEBUploadTrackingUtils").endSuccess(a,"upload_tracking_cancelled_eb_turned_off",{string:{externalId:b,from:"backup state turned off"}})})}function b(a){return a===4||a===3}g.setEncryptedBackupsState=a;g.eligibleForEBUX=b}),98);
__d("MAWXMAUtils",["MAWMsgType","WAArmadilloXMA.pb","WALogger","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Hit Unreachable XMAType "," - checking isXMAShare"]);h=function(){return a};return a}function a(a){return!a||a.type!==d("MAWMsgType").MSG_TYPE.XMA?null:a}function b(a){if(a==null)return!1;switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:return!0;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_IGTV_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SHOP_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:return!1;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH:return!0;default:d("WALogger").ERROR(h(),a);return!1}}function c(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE}function e(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE}function f(a){return a==null?!1:a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE}function i(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY}function j(a,b){return a!=null&&a||b!=null&&b<d("WATimeUtils").unixTime()}function k(a){a=a.ctas;a!=null&&(a=a.filter(function(a){return a.buttonType!==d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE}));return a}function l(a){return babelHelpers["extends"]({},a,{ctas:void 0,defaultCTA:void 0,headerTitle:void 0,isTombstoned:!0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,overlayDescription:void 0,overlayIconGlyph:void 0,overlayTitle:void 0,subtitleText:void 0,targetId:void 0,targetUsername:void 0,titleText:void 0})}function m(a){return babelHelpers["extends"]({},a,{ctas:void 0,defaultCTA:void 0,defaultPreviewMediaId:void 0,faviconMediaId:void 0,headerMediaId:void 0,headerTitle:void 0,isTombstoned:!0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,overlayDescription:void 0,overlayIconGlyph:void 0,overlayTitle:void 0,previewMediaIds:void 0,subtitleText:void 0,targetId:void 0,targetUsername:void 0,titleText:void 0})}function n(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY}function o(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION}function p(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION}function q(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE}function r(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE}function s(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_VIDEO_CALL:return!0;default:return!1}}g.maybeXMAMessage=a;g.isXMAShare=b;g.isXMAStoryShare=c;g.isXMAExternalLinkShare=e;g.isIGXMAStoryShare=f;g.isXMAPostPrivateReply=i;g.isXMAExpired=j;g.removeCTAsForStoryMentionXMA=k;g.buildUnstoredTombstonedXMA=l;g.buildTombstonedDbXMA=m;g.isXMAStoryReply=n;g.isXMAStoryReaction=o;g.isXMAStoryMention=p;g.isIGXMAPostShare=q;g.isXMAStoryHighlightShare=r;g.isRtcXMA=s}),98);
__d("MAWLocalizationType",[],(function(a,b,c,d,e,f){"use strict";a="emptySnippet";b="currentUserCreatedGroup";c="participantCreatedGroup";d="unknownUserCreatedGroup";e="currentUserNamedGroup";var g="unkonwnUserNamedGroup",h="participantNamedGroup",i="currentUserAddedDevice",j="participantAddedDevice",k="currentUserRemovedDevice",l="participantRemovedDevice",m="currentUserUpdatedDevice",n="participantUpdatedDevice",o="currentUserAddedOneParticipant",p="currentUserAddedTwoParticipant",q="currentUserAddedMoreThanTwoParticipant",r="participantAddedYou",s="participantAddedYouAndOneUser",t="participantAddedYouAndMoreThanOneUsers",u="unknowUserAddedYou",v="unknowUserAddedYouAndOneUser",w="unknowUserAddedYouAndMoreThanOneUser",x="unknownUserAddedOneUser",y="unknownUserAddedTwoUser",z="unknownUserAddedMoreThanTwoUser",A="participantAddedOneUser",B="participantAddedTwoUser",C="participantAddedMoreThanTwoUser",D="currentUserRemovedOneParticipant",E="currentUserRemovedTwoParticipant",F="currentUserRemovedMoreThanTwoParticipant",G="participantRemovedYou",H="participantRemovedYouAndOneUser",I="participantRemovedYouAndMoreThanOneUsers",J="unknowUserRemovedYou",K="unknowUserRemovedYouAndOneUser",L="unknowUserRemovedYouAndMoreThanOneUser",M="unknownUserRemovedOneUser",N="unknownUserRemovedTwoUser",aa="unknownUserRemovedMoreThanTwoUser",ba="participantRemovedOneUser",ca="participantRemovedTwoUser",da="participantRemovedMoreThanTwoUser",ea="participantLeftGroup",fa="currentUserLeftGroup",ga="currentUserGotPromoted",ha="currentUserGotDemoted",ia="participantGotPromoted",ja="participantGotDemoted",ka="participantPromotedYou",la="participantDemotedYou",ma="currentUserPromotedParticipant",na="currentUserDemotedParticipant",oa="participantDemotedParticipant",pa="participantPromotedParticipant",qa="participantSelfDemoted",ra="currentUserSelfDemoted",O="currentUserSendText",P="currentUserSendImage",Q="currentUserSendVideo",R="currentUserSendAudio",S="currentUserSendGif",sa="currentUserSendSticker",ta="participantSendText",ua="participantSendTextInGroup",va="participantSendImage",wa="participantSendVideo",xa="participantSendAudio",ya="participantSendGif",za="participantSendSticker",Aa="unavailableSnippet",Ba="twoUsersConnected",Ca="twoUsersConnectedOneMSplit",Da="reachabilityError",T="unknownUserEphemeralSettingTurnedOnSeconds",Ea="unknownUserEphemeralSettingTurnedOnMinutes",Fa="unknownUserEphemeralSettingTurnedOnHours",Ga="unknownUserEphemeralSettingTurnedOnDays",Ha="youEphemeralSettingTurnedOnSeconds",Ia="youEphemeralSettingTurnedOnMinutes",Ja="youEphemeralSettingTurnedOnHours",Ka="youEphemeralSettingTurnedOnDays",La="participantEphemeralSettingTurnedOnSeconds",Ma="participantEphemeralSettingTurnedOnMinutes",Na="participantEphemeralSettingTurnedOnHours",Oa="participantEphemeralSettingTurnedOnDays",Pa="unknownUserEphemeralSettingChangeSeconds",Qa="unknownUserEphemeralSettingChangeMinutes",Ra="unknownUserEphemeralSettingChangeHours",Sa="unknownUserEphemeralSettingChangeDays",Ta="youEphemeralSettingChangeSeconds",Ua="youEphemeralSettingChangeMinutes",Va="youEphemeralSettingChangeHours",Wa="youEphemeralSettingChangeDays",Xa="participantEphemeralSettingChangeSeconds",Ya="participantEphemeralSettingChangeMinutes",Za="participantEphemeralSettingChangeHours",$a="participantEphemeralSettingChangeDays",ab="sendBasedUnknownUserEphemeralSettingTurnedOnSeconds",bb="sendBasedUnknownUserEphemeralSettingTurnedOnMinutes",cb="sendBasedUnknownUserEphemeralSettingTurnedOnHours",db="sendBasedUnknownUserEphemeralSettingTurnedOnDays",eb="sendBasedYouEphemeralSettingTurnedOnSeconds",fb="sendBasedYouEphemeralSettingTurnedOnMinutes",gb="sendBasedYouEphemeralSettingTurnedOnHours",hb="sendBasedYouEphemeralSettingTurnedOnDays",ib="sendBasedParticipantEphemeralSettingTurnedOnSeconds",jb="sendBasedParticipantEphemeralSettingTurnedOnMinutes",kb="sendBasedParticipantEphemeralSettingTurnedOnHours",lb="sendBasedParticipantEphemeralSettingTurnedOnDays",mb="sendBasedUnknownUserEphemeralSettingChangeSeconds",nb="sendBasedUnknownUserEphemeralSettingChangeMinutes",ob="sendBasedUnknownUserEphemeralSettingChangeHours",pb="sendBasedUnknownUserEphemeralSettingChangeDays",qb="sendBasedYouEphemeralSettingChangeSeconds",rb="sendBasedYouEphemeralSettingChangeMinutes",sb="sendBasedYouEphemeralSettingChangeHours",tb="sendBasedYouEphemeralSettingChangeDays",ub="sendBasedParticipantEphemeralSettingChangeSeconds",vb="sendBasedParticipantEphemeralSettingChangeMinutes",wb="sendBasedParticipantEphemeralSettingChangeHours",xb="sendBasedParticipantEphemeralSettingChangeDays",yb="unknownUserEphemeralSettingTurnedOff",zb="youEphemeralSettingTurnedOff",Ab="participantEphemeralSettingTurnedOff",Bb="ephemeralSettingsAutoReset",Cb="currentUserUnsentMessage",Db="participantUnsentMessage",Eb="participantReactMessage",Fb="participantReactMessageInGroup",U="unknownUserEphemeralTakeScreenshot",Gb="unknownUserEphemeralRecordScreen",Hb="youEphemeralTakeScreenshot",Ib="youEphemeralRecordScreen",Jb="participantEphemeralTakeScreenshot",Kb="participantEphemeralRecordScreen",Lb="icdcAlertAdminMessage",Mb="yourDeviceICDCAlertAdminMessage",V="cutoverThreadAdminMessage",W="cutoverIGDThreadAdminMessage",X="cutoverRollbackAdminMessage",Y="currentUserSendAttachment",Nb="participantSendAttachment",Ob="currentUserSentPost",Pb="currentUserSentReel",Qb="currentUserSentStory",Rb="currentUserSentEvent",Sb="currentUserMentionedStoryIG",Tb="currentUserReceivedStoryMentionIG",Ub="participantSentPost",Vb="participantSentReel",Wb="participantSentStory",Xb="participantSentEvent",Yb="currentUserSentStoryHighlight",Zb="participantSentStoryHighlight",Z="dualThreadCutoverAdminMessage",$="e2eeThreadDescription",$b="debugMsg",ac="currentUserMissedAudioCall",bc="participantMissedAudioCall",cc="currentUserMissedVideoCall",dc="participantMissedVideoCall",ec="currentUserAudioCalled",fc="participantAudioCalled",gc="currentUserVideoCalled",hc="participantVideoCalled",ic="currentUserStartedGroupAudioCall",jc="participantStartedGroupAudioCall",kc="currentUserStartedGroupVideoCall",lc="participantStartedGroupVideoCall",mc="currentUserCustomizeHotlike",nc="participantCustomizeHotlike",oc="currentUserCustomizeNickname",pc="currentUserCustomizeTheme",qc="currentUserCustomizePhoto",rc="participantCustomizeParticipantNickname",sc="participantClearParticipantNickname",tc="participantCustomizeTheme",uc="participantCustomizePhoto",vc="participantCustomizeCurrentUserNickname",wc="currentUserSetOwnNickname",xc="currentUserClearOwnNickname",yc="currentUserClearParticipantNickname",zc="participantSetOwnNickname",Ac="participantClearOwnNickname",Bc="participantClearCurrentUserNickname",Cc="currentUserSetAddModeAdminOnly",Dc="currentUserSetAddModeAllMembers",Ec="participantSetAddModeAdminOnly",Fc="participantSetAddModeAllMembers",Gc="serverSetAddModeAdminOnly",Hc="serverSetAddModeAllMembers";q={CURRENT_USER_ADDED_DEVICE:i,CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:q,CURRENT_USER_ADDED_ONE_PARTICIPANT:o,CURRENT_USER_ADDED_TWO_PARTICIPANTS:p,CURRENT_USER_AUDIO_CALLED:ec,CURRENT_USER_CLEAR_OWN_NICKNAME:xc,CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:yc,CURRENT_USER_CREATED_GROUP:b,CURRENT_USER_CUSTOMIZE_HOTLIKE:mc,CURRENT_USER_CUSTOMIZE_NICKNAME:oc,CURRENT_USER_CUSTOMIZE_PHOTO:qc,CURRENT_USER_CUSTOMIZE_THEME:pc,CURRENT_USER_DEMOTED_PARTICIPANT:na,CURRENT_USER_GOT_DEMOTED:ha,CURRENT_USER_GOT_PROMOTED:ga,CURRENT_USER_LEFT_GROUP:fa,CURRENT_USER_MENTIONED_STORY_IG:Sb,CURRENT_USER_MISSED_AUDIO_CALL:ac,CURRENT_USER_MISSED_VIDEO_CALL:cc,CURRENT_USER_NAMED_GROUP:e,CURRENT_USER_PROMOTED_PARTICIPANT:ma,CURRENT_USER_RECEIVED_STORY_MENTION_IG:Tb,CURRENT_USER_REMOVED_DEVICE:k,CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:F,CURRENT_USER_REMOVED_ONE_PARTICIPANT:D,CURRENT_USER_REMOVED_TWO_PARTICIPANTS:E,CURRENT_USER_SELF_DEMOTED:ra,CURRENT_USER_SEND_ATTACHMENT:Y,CURRENT_USER_SEND_AUDIO:R,CURRENT_USER_SEND_GIF:S,CURRENT_USER_SEND_IMAGE:P,CURRENT_USER_SEND_STICKER:sa,CURRENT_USER_SEND_TEXT:O,CURRENT_USER_SEND_VIDEO:Q,CURRENT_USER_SENT_EVENT:Rb,CURRENT_USER_SENT_POST:Ob,CURRENT_USER_SENT_REEL:Pb,CURRENT_USER_SENT_STORY:Qb,CURRENT_USER_SENT_STORY_HIGHLIGHT:Yb,CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY:Cc,CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS:Dc,CURRENT_USER_SET_OWN_NICKNAME:wc,CURRENT_USER_STARTED_GROUP_AUDIO_CALL:ic,CURRENT_USER_STARTED_GROUP_VIDEO_CALL:kc,CURRENT_USER_UNSENT_MESSAGE:Cb,CURRENT_USER_UPDATED_DEVICE:m,CURRENT_USER_VIDEO_CALLED:gc,CUTOVER_IGD_THREAD_ADMIN_MESSAGE:W,CUTOVER_ROLLBACK_ADMIN_MESSAGE:X,CUTOVER_THREAD_ADMIN_MESSAGE:V,DEBUG_MSG:$b,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:Z,E2EE_THREAD_DESCRIPTION:$,EMPTY_SNIPPET:a,EPHEMERAL_SETTINGS_AUTO_RESET:Bb,ICDC_ALERT_ADMIN_MESSAGE:Lb,PARTICIPANT_ADDED_DEVICE:j,PARTICIPANT_ADDED_MORE_THAN_TWO_USER:C,PARTICIPANT_ADDED_ONE_USER:A,PARTICIPANT_ADDED_TWO_USER:B,PARTICIPANT_ADDED_YOU:r,PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:t,PARTICIPANT_ADDED_YOU_AND_ONE_USER:s,PARTICIPANT_AUDIO_CALLED:fc,PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:Bc,PARTICIPANT_CLEAR_OWN_NICKNAME:Ac,PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:sc,PARTICIPANT_CREATED_GROUP:c,PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:vc,PARTICIPANT_CUSTOMIZE_HOTLIKE:nc,PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:rc,PARTICIPANT_CUSTOMIZE_PHOTO:uc,PARTICIPANT_CUSTOMIZE_THEME:tc,PARTICIPANT_DEMOTED_PARTICIPANT:oa,PARTICIPANT_DEMOTED_YOU:la,PARTICIPANT_EPHEMERAL_RECORD_SCREEN:Kb,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:$a,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:Za,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:Ya,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:Xa,PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:Ab,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:Oa,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:Na,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:Ma,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:La,PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:Jb,PARTICIPANT_GOT_DEMOTED:ja,PARTICIPANT_GOT_PROMOTED:ia,PARTICIPANT_LEFT_GROUP:ea,PARTICIPANT_MISSED_AUDIO_CALL:bc,PARTICIPANT_MISSED_VIDEO_CALL:dc,PARTICIPANT_NAMED_GROUP:h,PARTICIPANT_PROMOTED_PARTICIPANT:pa,PARTICIPANT_PROMOTED_YOU:ka,PARTICIPANT_REACT_MESSAGE:Eb,PARTICIPANT_REACT_MESSAGE_IN_GROUP:Fb,PARTICIPANT_REMOVED_DEVICE:l,PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:da,PARTICIPANT_REMOVED_ONE_USER:ba,PARTICIPANT_REMOVED_TWO_USER:ca,PARTICIPANT_REMOVED_YOU:G,PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:I,PARTICIPANT_REMOVED_YOU_AND_ONE_USER:H,PARTICIPANT_SELF_DEMOTED:qa,PARTICIPANT_SEND_ATTACHMENT:Nb,PARTICIPANT_SEND_AUDIO:xa,PARTICIPANT_SEND_GIF:ya,PARTICIPANT_SEND_IMAGE:va,PARTICIPANT_SEND_STICKER:za,PARTICIPANT_SEND_TEXT:ta,PARTICIPANT_SEND_TEXT_IN_GROUP:ua,PARTICIPANT_SEND_VIDEO:wa,PARTICIPANT_SENT_EVENT:Xb,PARTICIPANT_SENT_POST:Ub,PARTICIPANT_SENT_REEL:Vb,PARTICIPANT_SENT_STORY:Wb,PARTICIPANT_SENT_STORY_HIGHLIGHT:Zb,PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:Ec,PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:Fc,PARTICIPANT_SET_OWN_NICKNAME:zc,PARTICIPANT_STARTED_GROUP_AUDIO_CALL:jc,PARTICIPANT_STARTED_GROUP_VIDEO_CALL:lc,PARTICIPANT_UNSENT_MESSAGE:Db,PARTICIPANT_UPDATED_DEVICE:n,PARTICIPANT_VIDEO_CALLED:hc,REACHABILITY_ERROR:Da,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:xb,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:wb,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:vb,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:ub,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:lb,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:kb,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:jb,SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:ib,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS:pb,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS:ob,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES:nb,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS:mb,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:db,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:cb,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:bb,SEND_BASED_UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:ab,SEND_BASED_YOU_EPHEMERAL_SETTING_CHANGE_DAYS:tb,SEND_BASED_YOU_EPHEMERAL_SETTING_CHANGE_HOURS:sb,SEND_BASED_YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:rb,SEND_BASED_YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:qb,SEND_BASED_YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:hb,SEND_BASED_YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:gb,SEND_BASED_YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:fb,SEND_BASED_YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:eb,SERVER_SET_ADD_MODE_ADMIN_ONLY:Gc,SERVER_SET_ADD_MODE_ALL_MEMBERS:Hc,TWO_USERS_CONNECTED:Ba,TWO_USERS_CONNECTED_ONE_MSPLIT:Ca,UNAVAILABLE_SNIPPET:Aa,UNKNOW_USER_ADDED_MORE_THAN_TWO_USER:z,UNKNOW_USER_ADDED_ONE_USER:x,UNKNOW_USER_ADDED_TWO_USER:y,UNKNOW_USER_ADDED_YOU:u,UNKNOW_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:w,UNKNOW_USER_ADDED_YOU_AND_ONE_USER:v,UNKNOW_USER_REMOVED_MORE_THAN_TWO_USER:aa,UNKNOW_USER_REMOVED_ONE_USER:M,UNKNOW_USER_REMOVED_TWO_USER:N,UNKNOW_USER_REMOVED_YOU:J,UNKNOW_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER:L,UNKNOW_USER_REMOVED_YOU_AND_ONE_USER:K,UNKNOWN_USER_CREATED_GROUP:d,UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN:Gb,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS:Sa,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS:Ra,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES:Qa,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS:Pa,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:yb,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:Ga,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:Fa,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:Ea,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:T,UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT:U,UNKNOWN_USER_NAMED_GROUP:g,YOU_EPHEMERAL_RECORD_SCREEN:Ib,YOU_EPHEMERAL_SETTING_CHANGE_DAYS:Wa,YOU_EPHEMERAL_SETTING_CHANGE_HOURS:Va,YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:Ua,YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:Ta,YOU_EPHEMERAL_SETTING_TURNED_OFF:zb,YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:Ka,YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:Ja,YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:Ia,YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:Ha,YOU_EPHEMERAL_TAKE_SCREENSHOT:Hb,YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:Mb};f.CURRENT_USER_CREATED_GROUP=b;f.CURRENT_USER_ADDED_DEVICE=i;f.CURRENT_USER_SEND_TEXT=O;f.CURRENT_USER_SEND_IMAGE=P;f.CURRENT_USER_SEND_VIDEO=Q;f.CURRENT_USER_SEND_AUDIO=R;f.CURRENT_USER_SEND_GIF=S;f.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS=T;f.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT=U;f.CUTOVER_THREAD_ADMIN_MESSAGE=V;f.CUTOVER_IGD_THREAD_ADMIN_MESSAGE=W;f.CUTOVER_ROLLBACK_ADMIN_MESSAGE=X;f.CURRENT_USER_SEND_ATTACHMENT=Y;f.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE=Z;f.E2EE_THREAD_DESCRIPTION=$;f.LOCALIZATION_TYPE=q}),66);
__d("MAWAdminMsgNormalized",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){switch(a){case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:return{contactIds:b,contents:[]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:case d("MAWLocalizationType").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case d("MAWLocalizationType").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case d("MAWLocalizationType").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case d("MAWLocalizationType").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case d("MAWLocalizationType").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case d("MAWLocalizationType").LOCALIZATION_TYPE.SEND_BASED_PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:a=b[0];var c=b[1];return{contactIds:[a],contents:[c]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:a=b[0];c=b[1];var e=b[2];return{contactIds:[a,c],contents:[e]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:a=b[0];c=b[1];e=b[2];return{contactIds:[a],contents:[c,e]};case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOW_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:default:return{contactIds:[],contents:b}}}g.deconstructContactIdsFromAdminContent=a}),98);
__d("MAWExtractMsFromExternalId",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return new Date(a).getTime()>0}var j=2199023255551;function a(a){a=Number((h||(h=d("I64"))).to_string(h.and_(h.lsr_(a,22),h.of_float(j))));if(i(a)){a=Math.floor(Number(a)%1e5/100);return a}}g.extractMsFromExternalId=a}),98);
__d("MAWCalculateBumpTimestampMs",["I64","MAWExtractMsFromExternalId","MAWTimeUtils","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){if(!c("gkx")("23996"))return d("MAWTimeUtils").millisTimeToTimestamp(a);b=b==null?null:d("MAWExtractMsFromExternalId").extractMsFromExternalId(b);return(h||(h=d("I64"))).add(d("MAWTimeUtils").millisTimeToTimestamp(a),h.of_int32((a=b)!=null?a:0))}g.calculateBumpTimestampMs=a}),98);
__d("MAWFolderTypes",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;e=10;var g={ARCHIVED:e,INBOX:a,OTHER:c,PENDING:b,SPAM:d};f.INBOX=a;f.PENDING=b;f.OTHER=c;f.SPAM=d;f.ARCHIVED=e;f.FOLDER_ID=g}),66);
__d("MAWImageUtils",["Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i="image/jpeg",j=100;function k(a,d){d===void 0&&(d=!0);var e;return new(h||(h=b("Promise")))(function(b,f){e=new Image();var g=/^(?:data|blob):/.test(a);d&&!g&&e.setAttribute("crossOrigin","anonymous");e.onload=b;e.onabort=function(){f(function(){throw c("err")("Error loading image from provided URL")})};e.onerror=function(){f(function(){throw c("err")("Wrong blob type")})};e.src=a}).then(function(){return e})}function l(a,c,d,e){d===void 0&&(d=!1);var f=40*1024;if(a.toBlob)return new(h||(h=b("Promise")))(function(b){var d=e==null?void 0:e/100;a.toBlob(b,c,d)}).then(function(e){return d&&e.size>=f?new(h||(h=b("Promise")))(function(b){a.toBlob(b,c,f/e.size)}):e});else return(h||(h=b("Promise"))).resolve(window.dataURLtoBlob(a.toDataURL(c))).then(function(e){return d&&e.size>=f?(h||(h=b("Promise"))).resolve(window.dataURLtoBlob(a.toDataURL(c,f/e.size))):e})}function a(a,d,e,f){return k(a).then(function(a){var b=document.createElement("canvas");b.width=a.naturalWidth;b.height=a.naturalHeight;var c=b.getContext("2d");f!==!0&&n(b);c.drawImage(a,0,0);return l(b,d,!1,e).then(function(b){return{blob:b,height:a.naturalHeight,width:a.naturalWidth}})})["catch"](function(a){return(h||(h=b("Promise"))).reject(function(){throw c("err")(a)})})}function d(a,b){return k(a).then(function(a){var c=document.createElement("canvas"),d=a.naturalWidth,e=a.naturalHeight,f=c.getContext("2d");e=o(e,d,b);c.width=e.width;c.height=e.height;var g=c.width,h=c.height;m(c);f.drawImage(a,0,0,g,h);return l(c,i,!0).then(function(a){return a.arrayBuffer().then(function(a){return{height:h,jpegThumbnail:a,width:g}})})})}function e(a,b){return k(a).then(function(a){a=o(a.naturalHeight,a.naturalWidth,b);return{height:a.height,width:a.width}})}function m(a){var b=a.getContext("2d");b.fillStyle="rgb(247,247,247)";b.fillRect(0,0,a.width,a.height)}function n(a){var b=a.getContext("2d");b.fillStyle="rgb(255,255,255)";b.fillRect(0,0,a.width,a.height)}function o(a,b,c){b=b!=null?b:c;a=a!=null?a:c;b>a?b>c&&(a*=c/b,b=c):a>c&&(b*=c/a,a=c);return{height:Math.round(Math.max(a,1)),width:Math.round(Math.max(b,1))}}function f(a){return k(a).then(function(a){return{height:a.naturalHeight,width:a.naturalWidth}})}g.TYPE_JPEG=i;g.IMG_THUMB_MAX_EDGE=j;g.canvasToBlob=l;g.urlToFile=a;g.urlToThumbnail=d;g.urlToThumbnailSpec=e;g.boundHeightWidth=o;g.urlToImageSpec=f}),98);
__d("getReplyContentForNoteReply",["WAGlobals","WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.author,c=a.msgId,e=d("WAJids").extractDeviceIDParts(d("WAGlobals").getMyDeviceJid()).userId;b=d("WAJids").authorToUserId(b,e);e=(e=a.quote)==null?void 0:(a=e.content.msgContent)==null?void 0:a.content;return{isNoteReply:!0,replyMessageText:e,replySourceId:c,replyToUserId:b}}g["default"]=a}),98);
__d("MAWBridgeMsg",["LSHotEmojiSize","LSIntEnum","MAWDbMsg","MAWGlobals","MAWImageUtils","MAWMsgType","MAWVault","MAWXMAUtils","WAAssertUnreachable","WAJids","WAMsgType","getReplyContentForNoteReply","gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b){var e,f,g;e=((e=a.quote)==null?void 0:e.content.type)===d("WAMsgType").NOTE_REPLY;if(e)return c("getReplyContentForNoteReply")(a);e=d("WAJids").extractDeviceIDParts(d("MAWGlobals").getMyDeviceJid()).userId;f=(f=a.quote)==null?void 0:f.content;if(d("MAWXMAUtils").isXMAStoryShare(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryReaction(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryMention(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryHighlightShare(a.xmaMessageType)){var h=a.author,i=a.mediaId,j=a.msgId,k=d("WAJids").authorToUserId(h,e);if(d("MAWXMAUtils").isXMAStoryMention(a.xmaMessageType)){var l=a.threadJid,m;l!=null&&(m=d("WAJids").interpretAsUserJid(l));m!=null&&(k=d("WAJids").userIdFromJid(m))}return{isIGXMAStoryShare:d("MAWXMAUtils").isIGXMAStoryShare(a.xmaMessageType),isStoryHighlightShare:d("MAWXMAUtils").isXMAStoryHighlightShare(a.xmaMessageType),isStoryMention:d("MAWXMAUtils").isXMAStoryMention(a.xmaMessageType),isStoryReaction:d("MAWXMAUtils").isXMAStoryReaction(a.xmaMessageType),isStoryReply:d("MAWXMAUtils").isXMAStoryReply(a.xmaMessageType),replyMediaId:i,replyMediaUrlMimeType:i!=null?"image/jpeg":void 0,replySenderIsMe:h===d("WAJids").AUTHOR_ME||k===e,replySourceId:j,replyStatusType:i!=null?"Image":void 0,replyToUserId:k,storyShareAuthor:b==null?void 0:b.storyShareAuthor}}if(f==null||(f==null?void 0:f.msgId)==null&&(f==null?void 0:f.sourceId)==null)return;l=f||{};a=l.author;h=l.mediaId;j=l.msgId;i=l.sourceId;k=l.specialTextSize;var n=l.type;l=l.xmaMessageType;g=f.type===d("MAWMsgType").MSG_TYPE.TEXT||d("MAWXMAUtils").isXMAExternalLinkShare(l)?(g=f.msgContent)==null?void 0:g.content:void 0;var o=d("WAJids").authorToUserId(a,e);f=f.type===d("MAWMsgType").MSG_TYPE.TEXT?f.msgContent.mentionedJids:void 0;a=a===d("WAJids").AUTHOR_ME||o===e;e=b||{};b=e.replyMediaId;var p=e.replyMediaPreviewHeight,q=e.replyMediaPreviewWidth,r=e.replyMediaUrlFallback,s=e.replyMediaUrlMimeType;e=e.replyXMAId;if(d("MAWXMAUtils").isXMAStoryReply(l))return{isStoryReaction:d("MAWXMAUtils").isXMAStoryReaction(l),isStoryReply:!0,replyMediaId:h,replyMediaUrlMimeType:h!=null?"image/jpeg":void 0,replySenderIsMe:a,replySourceId:i,replyStatusType:h!=null?"Image":void 0,replyToUserId:o};i=d("MAWImageUtils").boundHeightWidth(p,q,96*.8);h=i.height;i=i.width;return{isIGXMAPostShare:d("MAWXMAUtils").isIGXMAPostShare(l),isIGXMAStoryShare:d("MAWXMAUtils").isIGXMAStoryShare(l),isStoryReply:!1,replyMediaId:b,replyMediaPreviewHeight:n===d("MAWMsgType").MSG_TYPE.STICKER?h:p,replyMediaPreviewWidth:n===d("MAWMsgType").MSG_TYPE.STICKER?i:q,replyMediaUrlFallback:r,replyMediaUrlMimeType:s,replyMentionedJids:f,replyMessageText:g,replySenderIsMe:a,replySourceId:j,replyStatusType:k===1||k===2||k===3?d("MAWMsgType").MSG_TYPE.STICKER:n,replyToUserId:o,replyXMAId:e}}function a(a){a=a.specialTextSize;switch(a){case 1:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL);case 2:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").MEDIUM);case 3:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").LARGE);default:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").NONE)}}function b(a,b,e,f,g,h){var j,k,l=d("WAJids").extractDeviceIDParts(d("MAWGlobals").getMyDeviceJid()).userId;j=((j=a.isForwarded)!=null?j:!1)&&a.type!==d("MAWMsgType").MSG_TYPE.STICKER;k=(k=a.forwardingScore)!=null?k:0;var m=d("MAWDbMsg").getCanonicalTsFromMsg(a);e=i(a,e);var n=d("MAWXMAUtils").isXMAStoryShare(a.xmaMessageType),o=d("MAWXMAUtils").isXMAStoryReaction(a.xmaMessageType),p=d("MAWXMAUtils").isXMAExternalLinkShare(a.xmaMessageType),q=d("MAWXMAUtils").isXMAStoryMention(a.xmaMessageType),r=d("MAWXMAUtils").isXMAStoryHighlightShare(a.xmaMessageType),s=d("MAWXMAUtils").isXMAPostPrivateReply(a.xmaMessageType),t=d("MAWDbMsg").getSortOrderWithFallback(a),u=c("gkx")("23961")?a.externalId:void 0;switch(a.type){case d("MAWMsgType").MSG_TYPE.TEXT:var v=d("MAWVault").isVaulted(a.msgContent.content)?a.msgContent.content:d("MAWVault").vault(a.msgContent.content);return babelHelpers["extends"]({},e,{ack:a.ack,chatId:a.thread,chatJid:a.threadJid,content:v,editCount:a.editCount,ephemeralDurationInSec:(v=a.ephemeralSetting)==null?void 0:v.ephemeralExpirationInSec,externalId:u,forwardingScore:k,instanceKey:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isForwarded:j,mentionedJids:a.msgContent.mentionedJids,msgId:a.msgId,offlineMsg:b,qplEvent:f,sender:d("WAJids").authorToUserId(a.author,l),sortOrderMs:t,specialTextSize:a.specialTextSize,transportKey:h,ts:m,type_:a.type});case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return babelHelpers["extends"]({},e,{ack:a.ack,chatId:a.thread,chatJid:a.threadJid,ephemeralDurationInSec:(v=a.ephemeralSetting)==null?void 0:v.ephemeralExpirationInSec,externalId:u,forwardingScore:k,instanceKey:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isForwarded:j,msgId:a.msgId,offlineMsg:b,qplEvent:f,sender:d("WAJids").authorToUserId(a.author,l),sortOrderMs:t,transportKey:h,ts:m,type_:a.type});case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:return babelHelpers["extends"]({},e,{ack:a.ack,chatId:a.thread,chatJid:a.threadJid,externalId:u,forwardingScore:k,instanceKey:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isForwarded:j,msgId:a.msgId,offlineMsg:b,qplEvent:f,sender:d("WAJids").authorToUserId(a.author,l),sortOrderMs:t,transportKey:h,ts:m,type_:a.type});case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:return{ack:a.ack,chatId:a.thread,chatJid:a.threadJid,externalId:u,forwardingScore:k,instanceKey:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isForwarded:j,msgId:a.msgId,offlineMsg:b,qplEvent:f,sender:d("WAJids").authorToUserId(a.author,l),sortOrderMs:t,transportKey:h,ts:m,type_:a.type};case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return babelHelpers["extends"]({},e,{ack:a.ack,chatId:a.thread,chatJid:a.threadJid,externalId:u,forwardingScore:k,instanceKey:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isForwarded:j,msgId:a.msgId,offlineMsg:b,qplEvent:f,sender:d("WAJids").authorToUserId(a.author,l),sortOrderMs:t,transportKey:h,ts:m,type_:a.type});case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:return{ack:a.ack,adminContent:[a.msgContent.authorName],adminType:a.msgContent.adminType,chatId:a.thread,chatJid:a.threadJid,externalId:u,forwardingScore:k,instanceKey:g,isAdminMessage:!0,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isForwarded:j,msgId:a.msgId,offlineMsg:b,qplEvent:f,sender:d("WAJids").authorToUserId(a.author,l),sortOrderMs:t,transportKey:h,ts:m,type_:a.type};case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:return{ack:a.ack,adminContent:a.msgContent.adminMsgContent,adminType:a.msgContent.adminType,adminVersion:a.msgContent.version,chatId:a.thread,chatJid:a.threadJid,externalId:u,forwardingScore:k,instanceKey:g,isAdminMessage:!0,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isForwarded:j,msgId:a.msgId,offlineMsg:b,qplEvent:f,sender:d("WAJids").authorToUserId(a.author,l),sortOrderMs:t,transportKey:h,ts:m,type_:a.type};case d("MAWMsgType").MSG_TYPE.REVOKED:return{ack:a.ack,chatId:a.thread,chatJid:a.threadJid,externalId:u,forwardingScore:k,instanceKey:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isForwarded:j,msgId:a.msgId,offlineMsg:b,originalTs:a.originalTs,qplEvent:f,sender:d("WAJids").authorToUserId(a.author,l),sortOrderMs:t,transportKey:h,ts:m,type_:a.type};case d("MAWMsgType").MSG_TYPE.XMA:var w;v=(v=a.msgContent)==null?void 0:v.content;w=v!=null?d("MAWVault").isVaulted(v)?(w=a.msgContent)==null?void 0:w.content:d("MAWVault").vault(v):void 0;v=c("justknobx")._("1191")||o||p?w:void 0;return babelHelpers["extends"]({},e,{ack:a.ack,chatId:a.thread,chatJid:a.threadJid,content:v,ephemeralDurationInSec:(p=a.ephemeralSetting)==null?void 0:p.ephemeralExpirationInSec,externalId:u,forwardingScore:k,instanceKey:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredXmaMsg:a.isExpiredXmaMsg,isForwarded:j,isPostPrivateReply:s,isStoryHighlightShare:r,isStoryMention:q,isStoryReaction:o,isStoryShare:n,msgId:a.msgId,offlineMsg:b,qplEvent:f,sender:d("WAJids").authorToUserId(a.author,l),sortOrderMs:t,transportKey:h,ts:m,type_:a.type});default:return c("WAAssertUnreachable")(a.type)}}g.getSpecialTextSize=a;g.createBridgeMsg=b}),98);
__d("MAWFrontendMediaUtils",["MAWDbMedia"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){if(a==="image/gif")return{mediaType:d("MAWDbMedia").MEDIA_TYPE.GIF,serverMediaType:"gif"};if(a==="image/webp"&&b!==!0)return{mediaType:d("MAWDbMedia").MEDIA_TYPE.STICKER,serverMediaType:"sticker"};c=(c=c)!=null?c:a.split("/")[0];switch(c){case"image":if(b===!0)return{mediaType:d("MAWDbMedia").MEDIA_TYPE.IMAGE,serverMediaType:"xma-image"};else return{mediaType:d("MAWDbMedia").MEDIA_TYPE.IMAGE,serverMediaType:"image"};case"video":return{mediaType:d("MAWDbMedia").MEDIA_TYPE.VIDEO,serverMediaType:"video"};case"audio":return{mediaType:d("MAWDbMedia").MEDIA_TYPE.PTT,serverMediaType:"ptt"};case"application":default:return{mediaType:d("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE,serverMediaType:"document"}}}g.getMediaTypeAndServerMediaTypeFromBlob=a}),98);
__d("MAWRavenUtils",["EphemeralMediaViewMode","MAWMsg","RavenMessagingState"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){switch(a){case d("MAWMsg").MAWRavenMsgEphemeralMediaState.PERMANENT:return c("RavenMessagingState").PERMANENT;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN:return c("RavenMessagingState").UNSEEN;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN:return c("RavenMessagingState").SEEN;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.REPLAYED:return c("RavenMessagingState").REPLAYED;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.EXPIRED:return c("RavenMessagingState").EXPIRED}};b=function(a){switch(a){case d("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return c("EphemeralMediaViewMode").PERMANENT;case d("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:return c("EphemeralMediaViewMode").REPLAYABLE;case d("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return c("EphemeralMediaViewMode").READ_ONCE}};function a(a,b){switch(b){case d("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return a===d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN?c("RavenMessagingState").SEEN:h(a);case d("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:if(a===d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN)return c("RavenMessagingState").SEEN;else if(a===d("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN)return c("RavenMessagingState").REPLAYED;return h(a);case d("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return h(a)}}g.getEphemeralMediaState=h;g.getEphemeralMediaViewMode=b;g.getNextRavenMessageEphemeralState=a}),98);
__d("MAWUpdateClientRestoreStatusOperationType",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;f.upsertClientRestoreStatus=a;f.markCompleteClientRestoreStatus=b}),66);
__d("DoubleKeyMap",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Map()}var b=a.prototype;b.set=function(a,b,c){var d=this.$1.get(a);d||this.$1.set(a,d=new Map());d.set(b,c)};b.get=function(a,b){return(a=this.$1.get(a))==null?void 0:a.get(b)};b["delete"]=function(a,b){var c=this.$1.get(a);c&&(c["delete"](b),c.size===0&&this.$1["delete"](a))};b.getAll=function(a){return this.$1.get(a)};b.deleteAll=function(a){this.$1["delete"](a)};return a}();f.DoubleKeyMap=a}),66);
__d("NestedTimeRange",["SimpleHook","performance","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new(d("SimpleHook").SimpleHook)(),k=new(d("SimpleHook").SimpleHook)(),l="/";function m(a,b){return""+a+l+b}b=function(){function a(a,b){b===void 0&&(b=null),this.$3=0,this.$1=a,this.$2=b}var b=a.prototype;b.isRunning=function(){return this.$3>0};b.fullname=function(){return this.$2!==null?m(this.$2.fullname(),this.$1):this.$1};b.start=function(a){a===void 0&&(a=(h||(h=c("performanceAbsoluteNow")))());if(this.$3===0){var b;(b=this.$2)==null?void 0:b.start(a);this.__onStart(a)}++this.$3;return a};b.__onStart=function(a){j.call(this,a)};b.stop=function(a){a===void 0&&(a=(h||(h=c("performanceAbsoluteNow")))());--this.$3;if(this.$3===0){var b;this.__onStop(a);(b=this.$2)==null?void 0:b.stop(a)}return a};b.__onStop=function(a){k.call(this,a)};return a}();function a(){(i||(i=c("performance"))).mark&&(i||(i=c("performance"))).measure&&(j.add(function(a,b){(i||(i=c("performance"))).mark(a.fullname()+"_start")}),k.add(function(a,b){(i||(i=c("performance"))).measure(a.fullname(),a.fullname()+"_start")}))}g.OnRangeStart=j;g.OnRangeStop=k;g.TIME_RANGE_LEVEL_SEPARATOR=l;g.rangeFullName=m;g.NestedTimeRange=b;g.enableDevConsoleTimeline=a}),98);
__d("QLogEvent",["DoubleKeyMap","FBLogger","NestedTimeRange","QPLEvent","SimpleHook","performanceNavigationStart"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new(d("DoubleKeyMap").DoubleKeyMap)(),j=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d){a=b.call(this,a,d)||this;a.$QPLRange1=c;i.set(c,a.fullname(),babelHelpers.assertThisInitialized(a));return a}var e=a.prototype;e.__onStart=function(a){b.prototype.__onStart.call(this,a),this.$QPLRange1.point(this.fullname()+"_START",{timestamp:a})};e.__onStop=function(a){b.prototype.__onStop.call(this,a),this.$QPLRange1.point(this.fullname()+"_END",{timestamp:a}),i["delete"](this.$QPLRange1,this.fullname())};e.range=function(b){this.fullname().startsWith(d("NestedTimeRange").TIME_RANGE_LEVEL_SEPARATOR)||c("FBLogger")("qpl").warn("Range %s cannot have subrange since root name does not start with /",this.fullname());var e=d("NestedTimeRange").rangeFullName(this.fullname(),b);return(e=i.get(this.$QPLRange1,e))!=null?e:new a(b,this.$QPLRange1,this)};return a}(d("NestedTimeRange").NestedTimeRange),k=new(d("DoubleKeyMap").DoubleKeyMap)(),l=new((b=d("SimpleHook")).SimpleHook)(),m=new b.SimpleHook(),n=new b.SimpleHook(),o=new b.SimpleHook(),p=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,e,f){var g;c===void 0&&(c=0);e===void 0&&(e=2);f===void 0&&(f=!1);var i=(h||(h=d("QPLEvent"))).getMarkerId(a);g=b.call(this,"event_"+i)||this;g.event=a;g.instanceKey=c;g.$QPLEvent1=e;g.isUserFlow=f;k.set(i,c,babelHelpers.assertThisInitialized(g));return g}var e=a.prototype;e.action=function(a){this.$QPLEvent1=a;return this};e.getAction=function(){return this.$QPLEvent1};e.setIsUserFlow=function(a){this.isUserFlow=a;return this};e.startFromNavStart=function(){this.start(c("performanceNavigationStart")());return this};e.startFromTime=function(a){this.start(a);return this};e.__onStart=function(a){l.call(this,a)};e.__onStop=function(a){m.call(this,a),i.deleteAll(this),k["delete"]((h||(h=d("QPLEvent"))).getMarkerId(this.event),this.instanceKey)};e.range=function(a){var b;return(b=i.get(this,a))!=null?b:new j(a,this)};e.point=function(a,b){b===void 0&&(b={});n.call(this,a,b);return this};e.annotate=function(a){o.call(this,a);return this};return a}(d("NestedTimeRange").NestedTimeRange);function a(a,b){var c;b===void 0&&(b=0);return(c=k.get((h||(h=d("QPLEvent"))).getMarkerId(a),b))!=null?c:new p(a,b)}g.OnEventStart=l;g.OnEventStop=m;g.OnEventPoint=n;g.OnEventAnnotate=o;g.QPLEvent=p;g.event=a}),98);
__d("TimedOnceFunc",["ExecutionEnvironment"],(function(a,b,c,d,e,f,g){var h;a=function(){function a(a,b){this.$2=!1,this.$4=a,this.$3=b,(h||(h=c("ExecutionEnvironment"))).isInBrowser&&this.$5()}var b=a.prototype;b.$6=function(){this.$1!=null&&clearTimeout(this.$1),this.$1=null};b.$5=function(){var a=this;this.isDone()||(this.$6(),this.$1=setTimeout(function(){a.$2=!0,a.run()},this.$3))};b.isDone=function(){return this.$4===null};b.isCancelled=function(){return this.$1===null&&this.$4!==null};b.run=function(){this.$6();if(this.$4!=null){var a=this.$4;this.$4=null;a(this.$2)}};b.getDelay=function(){return this.$3};b.delay=function(a){this.$3=(a=a)!=null?a:this.$3;this.$5()};b.cancel=function(){this.$6()};return a}();g.TimedOnceFunc=a}),98);
__d("FuncChannel",["FBLogger","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){var d=this,e;this.$2=[];this.callMessageHandler=function(a){return new(h||(h=b("Promise")))(function(b,c){a.result={resolveFunc:b,rejectFunc:c},d.$2.push(a)})};this.messageToCall=function(a){var b,e,f=d.proxyMethods[a.method];if(typeof f!=="function"){c("FBLogger")("worker").mustfix("proxyMethods[%s] is not a functions",a.method);return}b=(b=a.result)==null?void 0:b.resolveFunc;e=(e=a.result)==null?void 0:e.rejectFunc;if(typeof b==="function"&&typeof e==="function")try{var g=f.apply(a.thisArg,a.argList);b(g)}catch(a){e(a)}else return f.apply(a.thisArg,a.argList)};var f=this,g={},i=(e=a==null?void 0:a(g))!=null?e:{},j=babelHelpers["extends"]({},g);function k(a){j[a]=function(){var b={type:"call",method:a,thisArg:null,argList:Array.from(arguments)};return f.callMessageHandler(b)},g[a]=function(){var b=f.$1[a];if(typeof b!=="function"){c("FBLogger")("worker").mustfix("_backend[%s] is not a functions",a);return}return b.apply(f.$1,arguments)},i[a]==null&&(i[a]=g[a])}this.$1=j;if(a!=null){e=Object.keys(i);e.forEach(k);this.proxyMethods=i}else this.proxyMethods=new Proxy(i,{get:function(a,b){a=b;i[a]==null&&k(a);return i[a]}})}var d=a.prototype;d.flushBuffer=function(){var a=this.$2;this.$2=[];a.forEach(this.messageToCall)};d.setBackend=function(a){this.$1!==a&&(this.$1=a,this.flushBuffer());return this};d.setCallMessageHandler=function(a){this.callMessageHandler=a,this.flushBuffer()};return a}();g["default"]=a}),98);
__d("MainPageUrl",["ExecutionEnvironment","FBLogger","SimpleHook"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new URL("http://undefined"),j=new(d("SimpleHook").SimpleHook)();function k(){var a;return(h||(h=c("ExecutionEnvironment"))).isInBrowser&&(i==null?void 0:(a=i.searchParams)==null?void 0:a.get("workerlog"))==="debug"}function a(a){try{k()&&c("FBLogger")("worker").debug("received url "+a);var b=new URL(a,i.href||"http://undefined");i.href!==b.href?(i.href=b.href,j.call(i)):k()&&c("FBLogger")("worker").debug("ignoring url: path didn't change in "+a)}catch(a){c("FBLogger")("worker").catching(a).warn("invalid url")}}typeof window==="object"&&typeof window.location==="object"&&typeof window.location.href==="string"&&a(window.location.href);g.mainPageUrl=i;g.onMainPageUrlChange=j;g.isWorkerLogEnabled=k;g.updateMainPageUrl=a}),98);
__d("VirtualMessageChannel",["invariant","Promise","SimpleHook","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=function(){function a(a){a===void 0&&(a=!1),this.$2=new(d("SimpleHook").SimpleHook)(),this.onmessage=null,this.onmessageerror=null,this.$3=a}var e=a.prototype;e.setRemotePort=function(a){this.$1=a};e.addEventListener=function(a,b,c){(a==="message"||a==="error")&&c==null||h(0,55320,a);if(a==="message")if(typeof b==="function")this.$2.add(b);else{c=b.handleEvent.bind(b);this.$2.add(c);b.__handler=c}};e.removeEventListener=function(a,b,c){if(typeof b==="function")this.$2.remove(b);else{a=b.__handler;this.$2.remove(a)}};e.postMessage=function(a,d){var e=this,f=function(){var b=c("nullthrows")(e.$1,"By now remote port must have value!");b.$2.call({data:a,ports:d})};this.$3?f():c("promiseDone")((i||(i=b("Promise"))).resolve(),f)};e.start=function(){};return a}();a=function(a,b){this.port1=new j(a),this.port2=new j(b),this.port1.setRemotePort(this.port2),this.port2.setRemotePort(this.port1)};g.VirtualMessagePort=j;g.VirtualMessageChannel=a}),98);
__d("WorkerMessagePortLogging",["MainPageUrl","QLogEvent","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=Math.random()<.1,i=20,j=100,k=50;function a(){return d("MainPageUrl").isWorkerLogEnabled()||d("MainPageUrl").mainPageUrl.searchParams.get("worker_log")===1}var l=0;function m(){return d("QLogEvent").event(c("qpl")._(41497718,"106"),l++)}function b(a,b,c){c===void 0&&(c=!1);if(b==null||!h)return;var d=b.sendDelayHighPrecision,e=b.sendTimestamp,f=b.sendDateTime,g=b.receiveTimestamp,l=b.receiveDateTime,n=m();n.startFromTime();var o=n.range("SEND_DELAY");o.start(e);o.stop(g);o=n.range("SEND_DELAY_LOW_PRECISION");o.start(f);o.stop(l);o=Math.abs(e-f);e=Math.abs(g-l);n.annotate({string:{port_name:a},"int":{send_delay:d,send_drift:o,receive_drift:e},bool:{send_delay_above_max:d!=null&&d>i,send_drift_above_max:o>j,receive_drift_above_max:e>j}});if(c){f=n.range("ROUND_TRIP");f.start(b.sendTimestamp);f.stop(b.receiveTimestamp);g=b.receiveTimestamp-b.sendTimestamp;n.annotate({"int":{round_trip:g},bool:{round_trip_above_max:g>k}})}n.stop()}g.isWorkerLogEnabled=a;g.logMessageTiming=b}),98);
__d("WorkerMessagePort",["Deferred","FBLogger","MainPageUrl","Promise","PromiseAnnotate","SimpleHook","VirtualMessageChannel","WorkerMessagePortLogging","performanceAbsoluteNow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a){return a}var l=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d("SimpleHook").SimpleHook);function m(a,b){a=k(a);a.__timing=b}function n(a){return a.__timing}a=function(){var a=e.prototype;a.onMessageHandler=function(a){try{this.onMessage.call(a);var b=this.$1[a.type];!b?this.onUnhandledMessage.call(a):b.call(a)}catch(a){this.onError.call(a)}};function e(a,b){var e=this;this.$1={};this.onUnhandledMessage=new l();this.onMessage=new l();this.onPostMessage=new l();this.onError=new l();this.$2=a;this.name=b;this.$2.addEventListener("message",function(a){return e.onMessageHandler(k(a.data))});this.$2.addEventListener("error",function(a){return e.onError.call(a)});this.onPostMessage.add(function(a){m(a,{receiveDateTime:-1,receiveTimestamp:-1,sendDateTime:Date.now(),sendDelayHighPrecision:0,sendDelayLowPrecision:0,sendTimestamp:(j||(j=c("performanceAbsoluteNow")))()})});this.onMessage.add(function(a){a=n(a);if(a!=null){var b=a.sendDateTime,f=a.sendTimestamp,g=(j||(j=c("performanceAbsoluteNow")))(),h=Date.now();a.receiveTimestamp=g;a.receiveDateTime=h;a.sendDelayHighPrecision=g-f;a.sendDelayLowPrecision=h-b;d("WorkerMessagePortLogging").logMessageTiming(e.name,a)}})}a.postMessage=function(a,b){this.onPostMessage.call(a),b?this.$2.postMessage(a,b):this.$2.postMessage(a)};a.addMessageListener=function(a,b){var c=this.$1[a];c||(c=new l(),this.$1[a]=c);return c.add(b)};a.removeMessageListener=function(a,b){a=this.$1[a];return!!a&&a.remove(b)};a.onMessageOnce=function(a,c){var d=this;return new(i||(i=b("Promise")))(function(b){var e=d.addMessageListener(a,function(f){c(f)&&(d.removeMessageListener(a,e),b(f))})})};a.close=function(){if(this.$2 instanceof MessagePort)this.$2.close();else if(this.$2 instanceof Worker)this.$2.terminate();else if(this.$2 instanceof DedicatedWorkerGlobalScope)this.$2.close();else{var a;(a=(a=this.$2.close)!=null?a:this.$2.terminate)==null?void 0:a.call(this.$2)}};a.isWrappingVirtualMessagePort=function(){return this.$2 instanceof d("VirtualMessageChannel").VirtualMessagePort};return e}();function o(a){return k(a)}e=function(a){babelHelpers.inheritsLoose(e,a);function e(e,f){var g;g=a.call(this,e,f)||this;var j=o(babelHelpers.assertThisInitialized(g)),k=new(c("Deferred"))();e=k.getPromise();j.addMessageListener("endpoint_started",function(a){k.resolve(a);var b=n(a);j.postMessage({endpoint:a.endpoint,startSendTimestamp:b==null?void 0:b.sendTimestamp,targetEndpoint:g.name,type:"endpoint_started_received"})});f=j.onMessageOnce("endpoint_started_received",function(){return!0});void (h||(h=d("PromiseAnnotate"))).setDisplayName(e,"endpoint_started");void h.setDisplayName(f,"endpoint_started_received");j.postMessage({endpoint:g.name,type:"endpoint_started"});c("promiseDone")(e,function(a){a=n(a);d("WorkerMessagePortLogging").logMessageTiming(g.name,a)});c("promiseDone")(f,function(a){a=n(a);a!=null&&d("WorkerMessagePortLogging").logMessageTiming(g.name,a,!0)});g.fullyConnected=(i||(i=b("Promise"))).race([e,f]).then(function(){return babelHelpers.assertThisInitialized(g)});return g}return e}(a);g.getMessageTiming=n;g.WorkerMessagePort=a;g.CastWorkerMessagePort=o;g.WorkerSyncedMessagePort=e}),98);
__d("WorkerFuncChannel",["invariant","DateConsts","ExecutionEnvironment","FBLogger","FuncChannel","MainPageUrl","Promise","TimedOnceFunc","VirtualMessageChannel","WorkerMessagePort","err","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k={serialize:function(a,b){b.push(a);return a},deserialize:function(a){return a}},l=1e4,m=0,n=5,o=n+1,p=function(){function a(a){var b=self.WeakRef;b&&(this.$1=new b(a))}var b=a.prototype;b.isDead=function(){return this.$1!=null&&this.$1.deref()==null};return a}(),q=function(e){babelHelpers.inheritsLoose(a,e);function a(a,b,f,g){var i;f===void 0&&(f=null);g===void 0&&(g={});i=e.call(this,a)||this;i.$WorkerFuncChannel1=new Map();i.$WorkerFuncChannel2=new Map();i.$WorkerFuncChannel5={"function":{serialize:function(a,b){b=o++;i.$WorkerFuncChannel1.set(b,a);a={type:"function",value:b};return a},deserialize:function(a){var b=babelHelpers.assertThisInitialized(i),c=a.value;a=function(){var a={type:"call",id:c,method:"__anonymous",thisArg:null,argList:Array.from(arguments)};return b.callMessageHandler(a)};i.$WorkerFuncChannel2.set(c,new p(a));return a}},custom:{serialize:function(a,b){var c=a.constructor.name,d=i.$WorkerFuncChannel4[c];d!=null||h(0,63779,c);d=d.serialize(a,b);return{type:"custom",custom:c,value:d}},deserialize:function(a){var b=a.custom,c=i.$WorkerFuncChannel4[b];c!=null||h(0,63779,b);return c.deserialize(a.value)}},error:{serialize:function(a,b){b={name:a.name,message:a.message,stack:a.stack};return{type:"error",value:b}},deserialize:function(a){var b=c("err")(a.value.message);b.name=a.value.name;b.stack=a.value.stack;return b}},object:{serialize:function(a,b){b=a.constructor;if(b!==Object)throw new Error("Cannot clone class object");return{type:"object",value:a}},deserialize:function(a){return a.value}},raw:{serialize:function(a,b){return{type:"raw",value:a}},deserialize:function(a){return a.value}}};i.name=b;i.$WorkerFuncChannel3=f;i.$WorkerFuncChannel4=g;a=function(a){d("MainPageUrl").isWorkerLogEnabled()&&c("FBLogger")("adsworker").debug("[Channel] removing callback ids: %s",a.join()),a.forEach(function(a){return i.$WorkerFuncChannel1["delete"](a)})};var k=i.__remoteInternalFunc(m,a);typeof jest===typeof void 0&&(j||(j=c("ExecutionEnvironment"))).isInBrowser&&setInterval(function(){var a=[];i.$WorkerFuncChannel2.forEach(function(b,c){b.isDead()&&(a.push(c),i.$WorkerFuncChannel2["delete"](c))});a.length>0?k(a):i.$WorkerFuncChannel2.size>5e3&&c("FBLogger")("adsworker").warn("[%s] has too many remaining refs %s",i.name,i.$WorkerFuncChannel2.size)},l);return i}var f=a.prototype;f.__remoteInternalFunc=function(a,b){(a>n||this.$WorkerFuncChannel1.get(a)!=null)&&c("FBLogger")("adsworker").mustfix("invalid internal func id %s",a);this.$WorkerFuncChannel1.set(a,b);b=this.$WorkerFuncChannel5["function"].deserialize({type:"function",value:a});return b};f.$WorkerFuncChannel6=function(a){return a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Uint8Array||a instanceof Uint8ClampedArray||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array};f.$WorkerFuncChannel7=function(a){if(typeof a==="function")return"function";if(a===null)return"raw";if(typeof a!=="object")return"raw";if(Array.isArray(a))return"raw";if(this.$WorkerFuncChannel6(a))return"raw";var b=a.constructor.name;if(this.$WorkerFuncChannel4[b])return"custom";return a instanceof Error?"error":"object"};f.$WorkerFuncChannel8=function(a,b){var c=this.$WorkerFuncChannel7(a);return this.$WorkerFuncChannel5[c].serialize(a,b)};f.$WorkerFuncChannel9=function(a){var b=a;if(a!==null&&typeof a==="object"&&typeof a.type==="string"){var c=this.$WorkerFuncChannel5[a.type];if(c)return c.deserialize(a)}return b};f.__onPostOutMessage=function(a){return a};f.__callCallback=function(a,b){a.apply(null,b.argList)};f.setOutMessagePort=function(a,d){var e=this,f=[];this.setCallMessageHandler(function(d){d.thisArg=e.name;var g=[];d.argList=d.argList.map(function(a){return e.$WorkerFuncChannel8(a,g)});var h=new(i||(i=b("Promise")))(function(a,b){d.result={resolveFunc:e.$WorkerFuncChannel8(a,g),rejectFunc:e.$WorkerFuncChannel8(b,g)}}),j=e.__onPostOutMessage(d);j!=null&&(f!=null?f.push({message:d,transferList:g}):a.postMessage(d,g));h["catch"](function(a){c("FBLogger")("worker").catching(a).mustfix("Error: channel %s, remote call of %s returned error %s",e.name,d.method,a.message)});return h});c("promiseDone")(d||x.waitForRemote(this.name),function(){var b=f;f=null;b==null?void 0:b.forEach(function(b){a.postMessage(b.message,b.transferList)});e.$WorkerFuncChannel3==null?void 0:e.$WorkerFuncChannel3()})};f.__messageToCall=function(a){var b=this;a.argList=a.argList.map(function(a){return b.$WorkerFuncChannel9(a)});if(a.result){var d=a.result,e=d.resolveFunc;d=d.rejectFunc;e=this.$WorkerFuncChannel9(e);d=this.$WorkerFuncChannel9(d);a.result={resolveFunc:e,rejectFunc:d}}e=a.id;if(e===void 0)this.messageToCall(a);else{d=this.$WorkerFuncChannel1.get(e);d?this.__callCallback(d,a):c("FBLogger")("adsworker").mustfix("Error: callback is called but no longer available")}};f.setInMessagePort=function(a){var b=this;a.addMessageListener("call",function(a){typeof a.thisArg==="string"&&a.thisArg===b.name&&b.__messageToCall(a)});x.notifyReady(this.name)};f.setMessagePort=function(a){this.setInMessagePort(a);this.setOutMessagePort(a);return this};return a}(c("FuncChannel")),r=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d("WorkerMessagePort").WorkerMessagePort);function s(a,b,d,e){x.exportChannel(a,function(e){var f=e.syncPort;e=e.remoteNativePort;var g=b();a===g.name||h(0,54247,a,g.name);var i;e?(i=new r(e,f.name+"("+g.name+")"),e.start(),i.onError.add(function(a){c("FBLogger")("worker").catching(a).mustfix("error caught in remotePort");throw a})):i=f;g.setMessagePort(i).setBackend(d);c("promiseDone")(f.fullyConnected,function(){f.postMessage({type:"channelReady",channelName:g.name}),x.logState("EXPORTED",a)})})}function a(a,b,c,d){d===void 0&&(d={});return s(c,function(){return new q(function(b){return a},c,null,d)},a,b)}var t=function(b){babelHelpers.inheritsLoose(a,b);function a(a,e){e===void 0&&(e="");var f=d("DateConsts").MS_PER_MIN*1;return b.call(this,function(){c("FBLogger")("worker").warn("Channel %s did not establish eventually. %s",a,e)},f)||this}return a}(d("TimedOnceFunc").TimedOnceFunc);function u(a,b){var e,f=null,g,h;b.isWrappingVirtualMessagePort()?(h=new(d("VirtualMessageChannel").VirtualMessageChannel)(!0,!0),e="on virtual dedicated channel"):(h=new MessageChannel(),e="on native dedicated channel",g=[h.port2]);var i=h.port1;f=h.port2;i.start();var j=new r(i,b.name+"("+a.name+")");c("promiseDone")(b.fullyConnected,function(){x.logState("IMPORTING "+e+" ",a.name);a.setInMessagePort(j);var d=new t(a.name,e);c("promiseDone")(b.onMessageOnce("channelReady",function(b){return b.channelName===a.name}),function(b){a.setOutMessagePort(j),d.cancel(),x.logState("ESTABLISHED",a.name)});b.postMessage({type:"channelImport",channelName:a.name,port:f},g)});return a.proxyMethods}function v(a,b,c,d){c===void 0&&(c=null);d===void 0&&(d={});b=new q(function(b){return a},b,c,d);return b}function e(a,b,c,d,e){d===void 0&&(d=null);e===void 0&&(e={});return u(v(a,c,d,e),b)}var w=function(){function a(){this.name=self.name+"_P"+Math.round(10*Math.random()),this.$1=new Map(),this.$2=new Set()}var e=a.prototype;e.logState=function(a,b){d("MainPageUrl").isWorkerLogEnabled()&&c("FBLogger")("worker").debug("%s-%s %s",this.name,a,b)};e.$3=function(a){var b=this.$1.get(a);b==null&&(b={pendingPorts:null,onImportRequest:null},this.$1.set(a,b));return b};e.exportChannel=function(a,b){var d=this,e=this.$3(a);e.onImportRequest!=null&&c("FBLogger")("worker").debug("Re-exporting channel %s",a);e.onImportRequest=b;this.logState("REGISTERED",a);a=e.pendingPorts;if(a!=null){var f=a.filter(function(a){return d.$2.has(a.syncPort)});f.forEach(b);f.length<a.length?e.pendingPorts=a.filter(function(a){return!d.$2.has(a.syncPort)}):e.pendingPorts=null}return e};e.activate=function(a,b,d){var e=this;if(this.$2.has(a)){c("FBLogger")("worker").debug("Port %sis already duplicated ",a.name);return}this.$2.add(a);a.addMessageListener("channelImport",function(b){var c=b.channelName,d=e.$3(c);b={syncPort:a,remoteNativePort:b.port};d.onImportRequest!=null?d.onImportRequest(b):d.pendingPorts!=null?d.pendingPorts.push(b):d.pendingPorts=[b];e.logState("IMPORT REQUEST",c)})};e.notifyReady=function(a){};e.waitForRemote=function(a){return(i||(i=b("Promise"))).resolve()};return a}(),x=new w();function f(a,b,c){x.activate(a,b,c)}g.TransferableTransformer=k;g.WorkerFuncChannel=q;g.exportChannelOnPort=s;g.exportChannel=a;g.importChannelOnPort=u;g.makeChannel=v;g.importChannel=e;g.activateChannels=f}),98);
__d("WorkerQPLChannel",["WorkerFuncChannel","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new(d("WorkerFuncChannel").WorkerFuncChannel)(function(a){return{markerStartFromNavStart:null,markerStart:function(b,d,e){e===void 0&&(e=(h||(h=c("performanceAbsoluteNow")))());return a.markerStart(b,d,e)},markerAnnotate:function(b,c,d){return a.markerAnnotate(b,c,d)},markerPoint:function(b,d,e){e=(e==null?void 0:e.timestamp)===void 0?babelHelpers["extends"]({},e,{timestamp:(h||(h=c("performanceAbsoluteNow")))()}):e;return a.markerPoint(b,d,e)},markerEnd:function(b,d,e,f){f===void 0&&(f=(h||(h=c("performanceAbsoluteNow")))());return a.markerEnd(b,d,e,f)}}},"qpl");function a(a){i.setMessagePort(a)}function b(a){i.setBackend(a)}g.setMessagePort=a;g.initQPL=b}),98);
__d("WAShiftTimer",["WAErr"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$2=0;this.$3=0;this.ts=0;this.$4=0;this.$5=0;this.$6=0;this.$7=void 0;this.$8=function(){var a=b.$7,c=b.$1;b.$3=0;b.$2=0;b.ts=0;b.$4=0;b.$5=0;b.$6=0;b.$7=void 0;c(a)};this.onOrBefore=function(a,c){h(a);var d=Date.now();d=d+a;var e=b.$5;if(e!==0&&e<d)return;e=b.$6;if(e!==0&&d<e)return;b.$5=d;!b.$3&&(!b.$2||d<b.ts)&&b.$9(d,a,c)};this.forceRunNow=function(a){b.$2&&clearTimeout(b.$2),b.$3&&cancelAnimationFrame(b.$3),b.$7=a,b.$8()};this.cancel=function(){b.$2&&clearTimeout(b.$2),b.$3&&cancelAnimationFrame(b.$3),b.$2=0,b.$3=0,b.ts=0,b.$4=0,b.$5=0,b.$6=0,b.$7=void 0};this.$1=a}var b=a.prototype;b.onOrBeforeRepaint=function(a){if(this.$3)return;var b=Date.now(),c=this.$6;if(c!==0&&b<c)return;c=this.$5;(c===0||b<c)&&(this.$5=b);this.$2&&(clearTimeout(this.$2),this.$2=0);(!this.ts||this.ts>b)&&(this.ts=b);this.$7=a;this.$3=requestAnimationFrame(this.$8)};b.onOrAfter=function(a,b){h(a);var c=Date.now();c=c+a;var d=this.$6;if(d!==0&&c<d)return;d=this.$5;if(d!==0&&d<c)return;this.$6=c;(!this.$2||this.ts<c)&&this.$9(c,a,b)};b.debounce=function(a,b){h(a),this.$10(Date.now(),a,b)};b.debounceAndCap=function(a,b,c){h(a);h(b);var d=Date.now();b=d+b;var e=this.$6,f=this.$5;(e===0||e<=b)&&(f===0||b<f)&&(this.$5=b);this.$10(d,a,c)};b.forceRunNowIfScheduled=function(){this.$2?(clearTimeout(this.$2),this.$8()):this.$3&&(cancelAnimationFrame(this.$3),this.$8())};b.isScheduled=function(){return this.$2!==0||this.$3!==0};b.$10=function(a,b,c){var d=a+b,e=this.$6;if(e!==0&&d<e)return;e=this.ts;var f=this.$5;f!==0&&f<d?e<f&&this.$9(f,f-a,c):e<d&&this.$9(d,b,c)};b.$9=function(a,b,c){this.$3&&(cancelAnimationFrame(this.$3),this.$3=0);this.$7=c;this.ts=a;if(this.$2){c=a-this.$4;if(-16<c&&c<16)return;clearTimeout(this.$2)}this.$2=setTimeout(this.$8,b);this.$4=a};return a}();function h(a){if(!(a>=0))throw c("WAErr")("ShiftTimer must be given delay >= 0")}g.ShiftTimer=a}),98);
__d("WABridgeBatcher",["WAShiftTimer"],(function(a,b,c,d,e,f,g){"use strict";var h=20,i=1e3;a=function(){function a(a,b){var c=this;this.$1=null;this.$4=h;this.$5=Date.now();this.$6=new(d("WAShiftTimer").ShiftTimer)(function(){var a=c.$1;if(a==null)return;c.$1=null;c.$2(a)});this.$2=b;this.$3=a}var b=a.prototype;b.addEvent=function(a){var b=this.$1;this.$1=b?this.$3(b,a):[a];if(this.$6.isScheduled())return;b=this.$4;if(b<1){a=Date.now();var c=Math.max(a-this.$5,0)/i;b=Math.min(b+c,h);this.$4=b;this.$5=a}b>=1?(c=0,this.$4=b-1):(c=Math.ceil(i*(1-b)),this.$4=0);this.$6.onOrBefore(c)};b.cancel=function(){this.$1=null,this.$6.cancel()};return a}();g.BridgeBatcher=a}),98);
__d("WAPromiseCallSync",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c){try{for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];return(g||(g=b("Promise"))).resolve(a.apply(c,e))}catch(a){return(g||(g=b("Promise"))).reject(a)}}f.promiseCallSync=a}),66);
__d("WAPromiseManagement",["WAPromiseCallSync"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=null,c=function(){b||(b=d("WAPromiseCallSync").promiseCallSync(a)["finally"](function(){b=null}));return b};c.isPending=function(){return!!b};return c}function b(a,b){var c=new Map();return function(d){var e=a(d),f=c.get(e);if(f)return f;try{f=Promise.resolve(b(d))}catch(a){f=Promise.reject(a)}d=f["finally"](function(){return void c["delete"](e)});c.set(e,d);return d}}var h=new Set();function c(a){h.add(a),a["finally"](function(){h["delete"](a)})}g.nullaryCacheWhilePending=a;g.cacheWhilePending=b;g.preventGarbageCollection=c}),98);
__d("WACrossWorkerPortal",["Promise","WABridgeBatcher","WAErr","WALogger","WAPromiseManagement"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["absorbPortal: transferring request #",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge unexpected non-result to call"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge unexpected result to cast: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge unrecognized result ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," response of ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," request for ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge queuing "," msgs"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge sending "," across (delayed)"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge received msg on old port"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge updating port"]);r=function(){return a};return a}var s=function(){function a(a,b,c,e){var f=this;this.port=null;this.$2=1;this.openRequests=new Map();this.listeners=new Set();this.processedRequests=new Set();this.$1=a;this.sendStream=new(d("WABridgeBatcher").BridgeBatcher)(b,function(a){f.$3(a)});c.forEach(function(b){a.setNamespaceHandler(b,f.$4(b))});this.clientId=e}var e=a.prototype;e.$5=function(){var a=this.clientId!=null?this.clientId+"_":"";return""+a+this.$2++};e.$6=function(a){a=a.split("_");return a.length!==2?null:a[0]};e.addListener=function(a){var b=this;this.listeners.add(a);return function(){return b.listeners["delete"](a)}};e.setPort=function(a){var b=this;d("WALogger").LOG(r());this.port=a;this.sendStream.cancel();a.onmessage=function(c){if(b.port!==a){d("WALogger").WARN(q()).devConsole(c.data);return}c=c.data;if(!c||!Array.isArray(c))return;c.forEach(function(c){b.$7(c,"incoming"),b.$8(a,c)})};this.openRequests.forEach(function(a){a=a.request;d("WALogger").LOG(p(),a.name);b.sendStream.addEvent({type:"request",content:a})})};e.getBridge=function(){return this.$1};e.$4=function(a){var b=this;return function(c,d,e,f){b.$9(a,c,d,e,f)}};e.$9=function(a,b,c,d,e){var f=this.$5();a={requestId:f,expectsResponse:!!d,namespace:a,name:b,arg:c,silentLog:e};this.openRequests.set(f,{request:a,resolver:d});this.sendStream.addEvent({type:"request",content:a})};e.$10=function(a,b){if(a!==this.port)return;this.sendStream.addEvent({type:"result",content:b})};e.$3=function(a){var b=this,c=this.port;if(!c){d("WALogger").LOG(o(),a.length);return}c.postMessage(a);a.forEach(function(a){return b.$7(a,"outgoing")})};e.$7=function(a,b){this.listeners.forEach(function(c){return c(a,b)})};e.$8=function(a,e){var f=this;if(e.type==="request"){var g=e.content,i=g.namespace,o=g.name,p=g.requestId,q=g.arg,r=g.expectsResponse,s=g.silentLog;s||d("WALogger").LOG(n(),p,o);g=this.$1;if(r){r=g.sendAndReceive(i,o,q,s).then(function(b){f.$10(a,{requestId:p,type:"success",result:b,silentLog:s})},function(b){f.$10(a,{requestId:p,type:"error",result:String(b),silentLog:s})});d("WAPromiseManagement").preventGarbageCollection(r)}else{g.fireAndForget(i,o,q,s);r={type:"result",content:{requestId:p,type:"handled",silentLog:s}};this.$7(r,"outgoing");a.postMessage([r])}}else{e.type;g=e.content;i=g.requestId;o=g.type;q=g.result;r=g.silentLog;r||d("WALogger").LOG(m(),i,o);e=this.$6(i);if(e!==this.clientId||this.processedRequests.has(i))return;g=this.openRequests.get(i);if(!g){d("WALogger").WARN(l(),i);return}switch(o){case"success":case"error":this.openRequests["delete"](i);this.processedRequests.add(i);r=g.resolver;r?r(o==="success"?q:(h||(h=b("Promise"))).reject(c("WAErr")(q))):d("WALogger").ERROR(k(),q);break;case"handled":g.resolver?d("WALogger").ERROR(j()):(this.openRequests["delete"](i),this.processedRequests.add(i));break}}};return a}();function a(a,b,c,d){return new s(a,c,b,d)}function e(a){var b;(b=a.port)==null?void 0:b.close();a.port=null;a.sendStream.cancel();b=a.openRequests;a.openRequests=new Map();var c=a.getBridge();b.forEach(function(a){var b=a.request;a=a.resolver;var e=b.namespace,f=b.name,g=b.arg,h=b.silentLog;d("WALogger").LOG(i(),b.requestId);a?a(c.sendAndReceive(e,f,g,h)):c.fireAndForget(e,f,g,h)})}g.CrossWorkerPortal=s;g.attachPortal=a;g.killPortalAndSendPendingToBridge=e}),98);
__d("WAOfflineUtils",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["INIT","OFFLINE_RESUME","ONLINE"]);c=b("$InternalEnum")({Initializing:"initializing",Failed:"failed",Processing:"processing",Complete:"complete"});f.ServerRPCMode=a;f.WAClientInfraOfflineProgress=c}),66);
__d("MAWLoggerUtils",[],(function(a,b,c,d,e,f){"use strict";a={CleanerPurge:"CleanerPurge",CleanerStart:"CleanerStart",CleanerTimestamp:"CleanerTimestamp",CleanerUpdate:"CleanerUpdate",Countdown:"Countdown",Ephemeral:"Ephemeral",Incoming:"Incoming",MsgCleaner:"MsgCleaner",OnLoad:"OnLoad",OnRead:"OnRead",Outgoing:"Outgoing",PeerReceipt:"PeerReceipt",SettingChange:"SettingChange",SettingSync:"SettingSync",CryptoManager:"CryptoManager",SignedPrekey:"SignedPrekey",OneTimePrekey:"OneTimePrekey",DeviceRegistration:"DeviceRegistration",SignedPrekeyRotation:"SignedPrekeyRotation",PrekeyGenerateAndUpload:"PrekeyGenerateAndUpload",MessageReceive:"MessageReceive",MediaDownload:"MediaDownload",MediaPreview:"MediaPreview",WorkerSetup:"WorkerSetup",MAWWorker:"MAWWorker",MAWInit:"MAWInit",LogoutHandler:"LogoutHandler"};f.Tag=a}),66);/*FB_PKG_DELIM*/
__d("InstamadilloReplyAttachmentId",["I64","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(b.threadKey,b.messageId)));if(a==null)return;return(h||(h=d("I64"))).of_string(a.attachmentFbid)});return i.apply(this,arguments)}g.getReplyAttachmentId=a}),98);
__d("InstamadilloReplyAttachmentType",["LSIntEnum","LSReplyMessageAttachmentType","MessagingAttachmentType","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(e={},e[(f=c("MessagingAttachmentType")).STICKER]=(c=c("LSReplyMessageAttachmentType")).STICKER,e[f.SELFIE_STICKER]=c.STICKER,e[f.IMAGE]=c.PHOTO,e[f.ANIMATED_IMAGE]=c.GIF,e[f.VIDEO]=c.VIDEO,e[f.AUDIO]=c.AUDIO,e[f.XMA]=c.XMA,e[f.EPHEMERAL_IMAGE]=c.PERMANENT_RAVEN_PHOTO,e[f.EPHEMERAL_VIDEO]=c.PERMANENT_RAVEN_VIDEO,e[f.SOUND_BITE]=c.SOUND_BITE,e[f.POWER_UP]=c.POWER_UP,e[f.FILE]=c.OTHER,e[f.CATALOG_ITEM]=c.OTHER,e);function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(b.threadKey,b.messageId)));if(a==null)return;b=(h||(h=d("LSIntEnum"))).unwrapIntEnum(a.attachmentType);a=i[b];if(a!=null)return(h||(h=d("LSIntEnum"))).ofNumber(a)});return j.apply(this,arguments)}g.getReplyAttachmentType=a}),98);
__d("InstamadilloReplySnippet",["CurrentMessengerUser","I64","LSMessagingThreadTypeUtil","PolarisDirectStrings"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b){var c;d("PolarisDirectStrings").REPLIED_TO;a&&b?c=d("PolarisDirectStrings").YOU_REPLIED_TO_YOURSELF:b?c=d("PolarisDirectStrings").REPLIED_TO_YOU:a?c=d("PolarisDirectStrings").YOU_REPLIED:c=d("PolarisDirectStrings").REPLIED_TO_THEMSELVES;return c.toString()}function j(a,b,c,e,f){var g=d("PolarisDirectStrings").userRepliedToUser(f,e);b&&c?g=d("PolarisDirectStrings").YOU_REPLIED_TO_YOURSELF:c?g=d("PolarisDirectStrings").userRepliedToYou(f):b?g=d("PolarisDirectStrings").youRepliedToUser(e):a&&(g=d("PolarisDirectStrings").userRepliedToThemselves(f));return g.toString()}function a(a,b,c){var e=b.name,f=c.name,g=(h||(h=d("I64"))).of_string(d("CurrentMessengerUser").getIDorEIMU()),k=h.equal(b.id,c.id);b=h.equal(b.id,g);c=h.equal(c.id,g);g=d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType);if(g)return i(b,c);else return j(k,b,c,f,e)}g.getReplySnippet=a}),98);
__d("InstamadilloReplySourceTypeV2",["LSIntEnum","LSMessageReplySourceTypeV2","LSXmaContentType","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){switch(a){case c("LSXmaContentType").IG_STORY_PHOTO_SHARE:case c("LSXmaContentType").IG_STORY_VIDEO_SHARE:case c("LSXmaContentType").IG_STORY_PHOTO_MENTION:case c("LSXmaContentType").IG_STORY_VIDEO_MENTION:case c("LSXmaContentType").IG_STORY_PHOTO_HIGHLIGHT_SHARE:case c("LSXmaContentType").IG_STORY_VIDEO_HIGHLIGHT_SHARE:return!0;default:return!1}}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=c("LSMessageReplySourceTypeV2").MESSAGE;a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(b.threadKey,b.messageId)));b=a;if((b==null?void 0:b.xmaContentType)!=null){a=(h||(h=d("LSIntEnum"))).unwrapIntEnum(b.xmaContentType);i(a)&&(e=c("LSMessageReplySourceTypeV2").STORY);e=c("LSMessageReplySourceTypeV2").XMA}return(h||(h=d("LSIntEnum"))).ofNumber(e)});return j.apply(this,arguments)}g.getReplySourceTypeV2=a}),98);
__d("InstamadilloReplyStatus",["I64","LSIntEnum","LSReplyMessageStatus","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=a.isUnsent?c("LSReplyMessageStatus").DELETED:c("LSReplyMessageStatus").VALID;if(a.ephemeralExpirationTs!=null){a=(h||(h=d("I64"))).to_int32(h.sub(a.ephemeralExpirationTs,h.of_float(d("WATimeUtils").unixTime())));a<=0&&(b=c("LSReplyMessageStatus").EXPIRED)}return(i||(i=d("LSIntEnum"))).ofNumber(b)}g.getReplyStatusType=a}),98);
__d("InstamadilloReplyMessageParams",["InstamadilloMessageIdUtils","InstamadilloReplyAttachmentId","InstamadilloReplyAttachmentType","InstamadilloReplySnippet","InstamadilloReplySourceTypeV2","InstamadilloReplyStatus","LSIntEnum","LSMessageReplySourceType","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){return{replyMessageText:void 0,replySnippet:void 0,replySourceId:void 0,replySourceType:void 0,replySourceTypeV2:void 0,replyStatus:void 0,replyToUserId:void 0}}function e(a,b,c,d){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){e=(yield (i||(i=b("Promise"))).all([g.threads.get(a),g.contacts.get(e),g.messages.index("messageId").get(d("InstamadilloMessageIdUtils").toInstamadilloMessageId(a,f))]));a=e[0];f=e[1];e=e[2];var j={};if(f==null||a==null||e==null)return j;j.replySourceId=e.messageId;j.replySourceTimestampMs=e.timestampMs;j.replyToUserId=e.senderId;j.replyMessageText=e.text;j.replyStatus=d("InstamadilloReplyStatus").getReplyStatusType(e);var k=(yield g.contacts.get(e.senderId));k!=null&&(j.replySnippet=d("InstamadilloReplySnippet").getReplySnippet(a,f,k));j.replySourceType=(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE);a=(yield i.all([d("InstamadilloReplySourceTypeV2").getReplySourceTypeV2(g,e),d("InstamadilloReplyAttachmentType").getReplyAttachmentType(g,e),d("InstamadilloReplyAttachmentId").getReplyAttachmentId(g,e)]));f=a[0];k=a[1];g=a[2];j.replySourceTypeV2=f;j.replyAttachmentType=k;j.replyAttachmentId=g;return j});return j.apply(this,arguments)}g.getEmptyReplyMessageParams=a;g.getReplyMessageParams=e}),98);
__d("InstamadilloMessageFactory",["FBLogger","I64","InstamadilloMessageIdUtils","InstamadilloReplyMessageParams","LSAuthorityLevel","LSBitFlag","LSIntEnum","LSMessageRenderingType","LSMessageSendStatus","LSMessageThreadUnsendabilityStatus","LSQuickReplyType","MAWAuthor","MessagingAttachmentType","WAJids","WALongInt","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){var b=a.externalId,c=d("WAJids").threadIdForChatJid(a.chat);a=(h||(h=d("I64"))).of_string(d("WAJids").threadIdForChatJid(a.chat));c=d("InstamadilloMessageIdUtils").toInstamadilloMessageId(c,b);return{messageId:c,threadKey:a}}function a(a,b){var e=j(a),f=e.messageId;e=e.threadKey;a={attachmentFbid:a.externalId,attachmentIndex:(h||(h=d("I64"))).zero,attachmentType:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").NONE),authorityLevel:h.of_int32(c("LSAuthorityLevel").AUTHORITATIVE),hasMedia:!0,hasXma:!1,isPreviewImage:!1,isSharable:!1,messageId:f,threadKey:e,timestampMs:b,xmaLayoutType:h.zero,xmasTemplateType:h.zero};return a}function e(a){var b=j(a),c=b.messageId;b=b.threadKey;a={attachmentFbid:a.externalId,attachmentIndex:(h||(h=d("I64"))).zero,ctaId:h.zero,messageId:c,threadKey:b,title:""};return a}function f(a){var b=j(a),c=b.messageId;b=b.threadKey;a={attachmentFbid:a.externalId,attachmentIndex:(h||(h=d("I64"))).zero,defaultActionEnableExtensions:!1,messageId:c,threadKey:b};return a}function k(a,b,c,d){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){var g,k=d("MAWAuthor").getAuthorUserJid(b.author);if(k==null)return c("FBLogger")("igd_web_on_msgr").warn("Skip createBaseInstamadilloMessage: a message cannot exist without an author");var l=b.externalId;k=(h||(h=d("I64"))).of_string(d("WAJids").userIdFromJid(k));b=j(b);var m=b.messageId;b=b.threadKey;var n=(yield a.threads.get(b));n=(n=n==null?void 0:n.cannotUnsendReason)!=null?n:(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").CAN_UNSEND);var o={};g=f==null?void 0:(g=f.repliedToMessage)==null?void 0:g.repliedToMessageOtid;g!=null&&(o=(yield d("InstamadilloReplyMessageParams").getReplyMessageParams(b,k,g,a)));a=f==null?void 0:(a=f.forwardingParams)==null?void 0:a.forwardedThreadId;var p,q;if(f==null?void 0:f.ephemeralityParams){p=(f=d("WALongInt").maybeNumberOrThrowIfTooLarge(f.ephemeralityParams.ephemeralDurationSec))!=null?f:0;q=d("WATimeUtils").futureUnixTime(p,d("WATimeUtils").castMilliSecondsToUnixTime((h||(h=d("I64"))).to_float(e)))}f=babelHelpers["extends"]({authorityLevel:h.of_int32(c("LSAuthorityLevel").AUTHORITATIVE),cannotUnsendReason:n,displayedContentTypes:d("LSBitFlag").empty,editCount:h.zero,ephemeralDurationInSec:p!=null?(h||(h=d("I64"))).of_float(p):void 0,ephemeralExpirationTs:q!=null?(h||(h=d("I64"))).of_float(q):void 0,hasQuickReplies:g!=null,isAdminMessage:!1,isCollapsed:!1,isForwarded:a!=null,isUnsent:!1,messageId:m,messageRenderingType:h.of_int32(c("LSMessageRenderingType").DEFAULT),offlineThreadingId:l,primarySortKey:e,quickReplyType:h.of_int32(c("LSQuickReplyType").NONE),replyAttachmentType:void 0,replyStatus:void 0,secondarySortKey:void 0,senderId:k,sendStatus:h.of_int32(c("LSMessageSendStatus").SERVER_RECEIVED),sendStatusV2:h.of_int32(2),threadKey:b,timestampMs:e,transportKey:"Instamadillo",unsentTimestampMs:void 0,viewFlags:h.zero},o);return f});return l.apply(this,arguments)}g.createBaseAttachment=a;g.createBaseAttachmentCta=e;g.createBaseAttachmentItem=f;g.createBaseMessage=k}),98);
__d("InstamadilloTextMessageUtils",["MWLinkRegex","URLMatcher","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("isStringNullOrEmpty")(a)?!1:c("URLMatcher").multiMatchToPattern(a,d("MWLinkRegex").getLinkRegex()).length>0&&c("URLMatcher").multiMatchToPattern(a,d("MWLinkRegex").getEmailRegex()).length===0}g.textHasLinks=a}),98);
__d("LSUpdateThreadSnippet",["LSGetThreadParticipantDisplayName"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.resolve((d[1]="",d[0]=d[1]===""?void 0:d[1]))},function(e){return d[0]!==void 0?c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({snippet:d[0],snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,isAdminSnippet:a[2],snippetSenderContactId:a[3],snippetHasEmoji:a[4],viewedPluginKey:a[5],viewedPluginContext:a[6]})}):a[7]?c.sequence([function(e){return c.i64.neq(a[3],void 0)?c.sequence([function(e){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),a[0],a[3]).then(function(a){return a=a,d[2]=a[0],a})},function(b){return a[1]!==void 0?(d[2]!==void 0?d[4]=[d[2],": ",a[1]].join(""):d[4]=a[1],d[3]=d[4]):d[3]=void 0,d[1]=d[3]}]):c.resolve(d[1]=a[1])},function(b){return c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({snippet:d[1],snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,isAdminSnippet:a[2],snippetSenderContactId:a[3],snippetHasEmoji:a[4],viewedPluginKey:a[5],viewedPluginContext:a[6]})})}]):c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({snippet:a[1],snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,isAdminSnippet:a[2],snippetSenderContactId:a[3],snippetHasEmoji:a[4],viewedPluginKey:a[5],viewedPluginContext:a[6]})})}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSUpdateThreadSnippetFromLastMessageV2",["LSGetThreadParticipantDisplayName","LSGetViewerFBID","LSUpdateThreadSnippet"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.db.table(12).fetchDesc([[[a[0]]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?0:(f=e.item,c.sequence([function(a){return d[5]=f.text,d[4]=f.threadKey,d[7]=c.i64.cast([0,0]),d[8]=f.messageId,d[3]=f.senderId,d[6]=f.stickerId,d[2]=f.isAdminMessage,d[0]=!0,d[2]||!d[0]?c.resolve(d[1]=d[5]==null?"":d[5]):c.sequence([function(a){return f.isUnsent?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[10]=a[0],a})},function(a){return c.i64.eq(d[10],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2375715979]),void 0).then(function(a){return d[15]=a})},function(a){return d[11]=d[15]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[15]=a[0],a})},function(a){return d[16]=c.createArray(),d[18]=(d[16].push(d[15]),d[16]),c.localizeV2Async(c.i64.cast([0,3810165735]),d[16]).then(function(a){return d[17]=a})},function(a){return d[11]=d[17]}])},function(a){return c.db.table(9).fetch([[[d[4]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[12]=!1:(e=b.item,d[12]=[c.i64.cast([0,23]),c.i64.cast([0,21]),c.i64.cast([0,18]),c.i64.cast([0,26])].some(function(a){return c.i64.eq(e.threadType,a)}))})},function(a){return d[12]?c.sequence([function(a){return c.filter(c.db.table(16).fetch([[[d[4],d[8]]]]),function(a){return c.i64.eq(a.threadKey,d[4])&&c.i64.eq(c.i64.cast([0,0]),d[7])&&a.messageId===d[8]}).next().then(function(b,e){var a=b.done;b=b.value;return a?(a=[c.i64.cast([0,0]),void 0,void 0,void 0,void 0],d[15]=a[0],d[16]=a[1],d[17]=a[2],d[18]=a[3],d[19]=a[4],a):(e=b.item,a=[e.attachmentType,e.attributionAppName,e.defaultCtaType,e.descriptionText,e.xmaContentType],d[15]=a[0],d[16]=a[1],d[17]=a[2],d[18]=a[3],d[19]=a[4],a)})},function(a){return d[18]!==void 0?d[21]=d[18]:d[21]=d[11],d[14]=d[21]}]):c.resolve(d[14]=d[11])},function(a){return d[9]=d[14]}]):c.sequence([function(a){return c.sequence([function(a){return c.i64.eq(f.replyType,c.i64.cast([0,1]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[12]=a[0],a})},function(a){return c.i64.eq(d[12],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,1899892426]),void 0).then(function(a){return d[14]=a})},function(a){return d[13]=d[14]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[14]=a[0],a})},function(a){return d[15]=c.createArray(),d[17]=(d[15].push(d[14]),d[15]),c.localizeV2Async(c.i64.cast([0,3287869262]),d[15]).then(function(a){return d[16]=a})},function(a){return d[13]=d[16]}])},function(a){return d[11]=d[13]}]):c.sequence([function(a){return d[5]!==void 0&&d[5]!==""?c.sequence([function(a){return d[15]=d[5]==null?"":d[5],c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return c.i64.eq(d[13],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,1890485478]),void 0).then(function(a){return d[16]=a})},function(a){return d[14]=[d[16],": ",d[15]].join("")}]):c.sequence([function(a){return c.db.table(9).fetch([[[d[4]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[16]=!1:(e=b.item,d[16]=c.i64.eq(e.threadType,c.i64.cast([0,2])))})},function(a){return d[16]||!1?c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return d[18]=[d[19],": ",d[15]].join("")}]):c.resolve(d[18]=d[15])},function(a){return d[14]=d[18]}])},function(a){return d[12]=d[14]}]):c.sequence([function(a){return c.i64.neq(d[6],void 0)&&[c.i64.cast([53057,267535043]),c.i64.cast([85970,924785702]),c.i64.cast([85970,1004785694]),c.i64.cast([85970,1044785690])].some(function(a){return c.i64.eq(d[6],a)})?c.sequence([function(a){return d[16]="\udb80\udc00",c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[14]=a[0],a})},function(a){return c.i64.eq(d[14],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,1890485478]),void 0).then(function(a){return d[17]=a})},function(a){return d[15]=[d[17],": ",d[16]].join("")}]):c.sequence([function(a){return c.db.table(9).fetch([[[d[4]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[17]=!1:(e=b.item,d[17]=c.i64.eq(e.threadType,c.i64.cast([0,2])))})},function(a){return d[17]||!1?c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[19]=[d[20],": ",d[16]].join("")}]):c.resolve(d[19]=d[16])},function(a){return d[15]=d[19]}])},function(a){return d[13]=d[15]}]):c.sequence([function(a){return c.i64.neq(d[6],void 0)?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[15]=a[0],a})},function(a){return c.i64.eq(d[15],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,1299547062]),void 0).then(function(a){return d[17]=a})},function(a){return d[16]=d[17]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[17]=a[0],a})},function(a){return d[18]=c.createArray(),d[20]=(d[18].push(d[17]),d[18]),c.localizeV2Async(c.i64.cast([0,3621454483]),d[18]).then(function(a){return d[19]=a})},function(a){return d[16]=d[19]}])},function(a){return d[14]=d[16]}]):c.sequence([function(a){return c.count(c.filter(c.db.table(16).fetch([[[d[4],d[8]]]]),function(a){return c.i64.eq(a.threadKey,d[4])&&c.i64.eq(c.i64.cast([0,0]),d[7])&&a.messageId===d[8]})).then(function(a){return d[15]=a})},function(a){return c.i64.eq(d[15],c.i64.cast([0,0]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[17]=a[0],a})},function(a){return c.i64.eq(d[17],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[19]=a})},function(a){return d[18]=d[19]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return d[20]=c.createArray(),d[22]=(d[20].push(d[19]),d[20]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[20]).then(function(a){return d[21]=a})},function(a){return d[18]=d[21]}])},function(a){return d[16]=d[18]}]):c.sequence([function(a){return c.i64.eq(d[15],c.i64.cast([0,1]))?c.sequence([function(a){return c.filter(c.db.table(16).fetch([[[d[4],d[8]]]]),function(a){return c.i64.eq(a.threadKey,d[4])&&c.i64.eq(c.i64.cast([0,0]),d[7])&&a.messageId===d[8]}).next().then(function(b,e){var a=b.done;b=b.value;return a?(a=[c.i64.cast([0,0]),void 0,void 0,void 0,void 0],d[18]=a[0],d[19]=a[1],d[20]=a[2],d[21]=a[3],d[22]=a[4],a):(e=b.item,a=[e.attachmentType,e.attributionAppName,e.defaultCtaType,e.descriptionText,e.xmaContentType],d[18]=a[0],d[19]=a[1],d[20]=a[2],d[21]=a[3],d[22]=a[4],a)})},function(a){return d[24]=void 0,d[24]===void 0&&(c.i64.eq(d[18],c.i64.cast([0,1]))||c.i64.eq(d[18],c.i64.cast([0,15])))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[29]=a[0],a})},function(a){return c.i64.eq(d[29],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,1299547062]),void 0).then(function(a){return d[31]=a})},function(a){return d[30]=d[31]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[31]=a[0],a})},function(a){return d[32]=c.createArray(),d[34]=(d[32].push(d[31]),d[32]),c.localizeV2Async(c.i64.cast([0,3621454483]),d[32]).then(function(a){return d[33]=a})},function(a){return d[30]=d[33]}])},function(a){return d[24]=d[30]}]):c.resolve()},function(a){return d[24]===void 0&&(c.i64.eq(d[18],c.i64.cast([0,2]))||c.i64.eq(d[18],c.i64.cast([0,8])))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[29]=a[0],a})},function(a){return c.i64.eq(d[29],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2106510577]),void 0).then(function(a){return d[31]=a})},function(a){return d[30]=d[31]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[31]=a[0],a})},function(a){return d[32]=c.createArray(),d[34]=(d[32].push(d[31]),d[32]),c.localizeV2Async(c.i64.cast([0,3960370133]),d[32]).then(function(a){return d[33]=a})},function(a){return d[30]=d[33]}])},function(a){return d[24]=d[30]}]):c.resolve()},function(a){return d[24]===void 0&&c.i64.eq(d[18],c.i64.cast([0,3]))?c.sequence([function(a){return d[19]!==void 0?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[3])?c.sequence([function(a){return d[32]=c.createArray(),d[34]=(d[32].push(d[19]),d[32]),c.localizeV2Async(c.i64.cast([0,3798396796]),d[32]).then(function(a){return d[33]=a})},function(a){return d[31]=d[33]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),d[35]=(d[33].push(d[19]),d[33]),c.localizeV2Async(c.i64.cast([0,3388601579]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[29]=d[31]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[30]=a[0],a})},function(a){return c.i64.eq(d[30],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,1556712457]),void 0).then(function(a){return d[32]=a})},function(a){return d[31]=d[32]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[32]),d[33]),c.localizeV2Async(c.i64.cast([0,3601791933]),d[33]).then(function(a){return d[34]=a})},function(a){return d[31]=d[34]}])},function(a){return d[29]=d[31]}])},function(a){return d[24]=d[29]}]):c.resolve()},function(a){return d[24]===void 0&&(c.i64.eq(d[18],c.i64.cast([0,4]))||c.i64.eq(d[18],c.i64.cast([0,9])))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[29]=a[0],a})},function(a){return c.i64.eq(d[29],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3759817031]),void 0).then(function(a){return d[31]=a})},function(a){return d[30]=d[31]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[31]=a[0],a})},function(a){return d[32]=c.createArray(),d[34]=(d[32].push(d[31]),d[32]),c.localizeV2Async(c.i64.cast([0,2934729541]),d[32]).then(function(a){return d[33]=a})},function(a){return d[30]=d[33]}])},function(a){return d[24]=d[30]}]):c.resolve()},function(a){return d[24]===void 0&&c.i64.eq(d[18],c.i64.cast([0,5]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[29]=a[0],a})},function(a){return c.i64.eq(d[29],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,392493418]),void 0).then(function(a){return d[31]=a})},function(a){return d[30]=d[31]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[31]=a[0],a})},function(a){return d[32]=c.createArray(),d[34]=(d[32].push(d[31]),d[32]),c.localizeV2Async(c.i64.cast([0,4085467454]),d[32]).then(function(a){return d[33]=a})},function(a){return d[30]=d[33]}])},function(a){return d[24]=d[30]}]):c.resolve()},function(a){return d[24]===void 0&&c.i64.eq(d[18],c.i64.cast([0,10]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[29]=a[0],a})},function(a){return c.i64.eq(d[29],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2738683656]),void 0).then(function(a){return d[31]=a})},function(a){return d[30]=d[31]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[31]=a[0],a})},function(a){return d[32]=c.createArray(),d[34]=(d[32].push(d[31]),d[32]),c.localizeV2Async(c.i64.cast([0,2996525642]),d[32]).then(function(a){return d[33]=a})},function(a){return d[30]=d[33]}])},function(a){return d[24]=d[30]}]):c.resolve()},function(a){return c.i64.neq(d[22],void 0)?d[25]=d[22]:(d[20]==="xma_live_location_sharing"?d[29]=c.i64.cast([0,5e3]):d[29]=void 0,d[25]=d[29]),c.i64.neq(d[25],void 0)?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[29]=a[0],a})},function(a){return c.i64.eq(d[25],c.i64.cast([-1,4294967295]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[31]=a[0],a})},function(a){return c.i64.eq(d[31],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[33]=a})},function(a){return d[32]=d[33]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[34]=c.createArray(),d[36]=(d[34].push(d[33]),d[34]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[34]).then(function(a){return d[35]=a})},function(a){return d[32]=d[35]}])},function(a){return d[30]=d[32]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,0]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[32]=a[0],a})},function(a){return c.i64.eq(d[32],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[34]=a})},function(a){return d[33]=d[34]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[34]=a[0],a})},function(a){return d[35]=c.createArray(),d[37]=(d[35].push(d[34]),d[35]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[35]).then(function(a){return d[36]=a})},function(a){return d[33]=d[36]}])},function(a){return d[31]=d[33]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,1e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[33]=a[0],a})},function(a){return c.i64.eq(d[33],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2326868239]),void 0).then(function(a){return d[35]=a})},function(a){return d[34]=d[35]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[36]=c.createArray(),d[38]=(d[36].push(d[35]),d[36]),c.localizeV2Async(c.i64.cast([0,1001986796]),d[36]).then(function(a){return d[37]=a})},function(a){return d[34]=d[37]}])},function(a){return d[32]=d[34]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,1001]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[34]=a[0],a})},function(a){return c.i64.eq(d[34],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2326868239]),void 0).then(function(a){return d[36]=a})},function(a){return d[35]=d[36]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[37]=c.createArray(),d[39]=(d[37].push(d[36]),d[37]),c.localizeV2Async(c.i64.cast([0,1001986796]),d[37]).then(function(a){return d[38]=a})},function(a){return d[35]=d[38]}])},function(a){return d[33]=d[35]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,1002]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[35]=a[0],a})},function(a){return c.i64.eq(d[35],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2285746939]),void 0).then(function(a){return d[37]=a})},function(a){return d[36]=d[37]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[37]=a[0],a})},function(a){return d[38]=c.createArray(),d[40]=(d[38].push(d[37]),d[38]),c.localizeV2Async(c.i64.cast([0,3759448420]),d[38]).then(function(a){return d[39]=a})},function(a){return d[36]=d[39]}])},function(a){return d[34]=d[36]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,1003]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[36]=a[0],a})},function(a){return c.i64.eq(d[36],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3719716921]),void 0).then(function(a){return d[38]=a})},function(a){return d[37]=d[38]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[38]=a[0],a})},function(a){return d[39]=c.createArray(),d[41]=(d[39].push(d[38]),d[39]),c.localizeV2Async(c.i64.cast([0,284944921]),d[39]).then(function(a){return d[40]=a})},function(a){return d[37]=d[40]}])},function(a){return d[35]=d[37]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,1004]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[37]=a[0],a})},function(a){return c.i64.eq(d[37],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[39]=a})},function(a){return d[40]=c.createArray(),d[42]=(d[40].push(d[39]),d[40]),c.localizeV2Async(c.i64.cast([0,3322002377]),d[40]).then(function(a){return d[41]=a})},function(a){return d[38]=d[41]}]):c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2486550278]),void 0).then(function(a){return d[39]=a})},function(a){return d[38]=d[39]}])},function(a){return d[36]=d[38]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,1005]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[38]=a[0],a})},function(a){return c.i64.eq(d[38],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3557790945]),void 0).then(function(a){return d[40]=a})},function(a){return d[39]=d[40]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[40]=a[0],a})},function(a){return d[41]=c.createArray(),d[43]=(d[41].push(d[40]),d[41]),c.localizeV2Async(c.i64.cast([0,3756846086]),d[41]).then(function(a){return d[42]=a})},function(a){return d[39]=d[42]}])},function(a){return d[37]=d[39]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,1006]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[39]=a[0],a})},function(a){return c.i64.eq(d[39],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2326868239]),void 0).then(function(a){return d[41]=a})},function(a){return d[40]=d[41]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[41]=a[0],a})},function(a){return d[42]=c.createArray(),d[44]=(d[42].push(d[41]),d[42]),c.localizeV2Async(c.i64.cast([0,1001986796]),d[42]).then(function(a){return d[43]=a})},function(a){return d[40]=d[43]}])},function(a){return d[38]=d[40]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,1007]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[40]=a[0],a})},function(a){return c.i64.eq(d[40],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3719716921]),void 0).then(function(a){return d[42]=a})},function(a){return d[41]=d[42]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[42]=a[0],a})},function(a){return d[43]=c.createArray(),d[45]=(d[43].push(d[42]),d[43]),c.localizeV2Async(c.i64.cast([0,284944921]),d[43]).then(function(a){return d[44]=a})},function(a){return d[41]=d[44]}])},function(a){return d[39]=d[41]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,1008]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[41]=a[0],a})},function(a){return c.i64.eq(d[41],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[43]=a})},function(a){return d[42]=d[43]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[44]=c.createArray(),d[46]=(d[44].push(d[43]),d[44]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[44]).then(function(a){return d[45]=a})},function(a){return d[42]=d[45]}])},function(a){return d[40]=d[42]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,1009]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[42]=a[0],a})},function(a){return c.i64.eq(d[42],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,780378803]),void 0).then(function(a){return d[44]=a})},function(a){return d[43]=d[44]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[45]=c.createArray(),d[47]=(d[45].push(d[44]),d[45]),c.localizeV2Async(c.i64.cast([0,3918212613]),d[45]).then(function(a){return d[46]=a})},function(a){return d[43]=d[46]}])},function(a){return d[41]=d[43]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,1010]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[43]=a[0],a})},function(a){return c.i64.eq(d[43],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3161890215]),void 0).then(function(a){return d[45]=a})},function(a){return d[44]=d[45]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[45]=a[0],a})},function(a){return d[46]=c.createArray(),d[48]=(d[46].push(d[45]),d[46]),c.localizeV2Async(c.i64.cast([0,863428456]),d[46]).then(function(a){return d[47]=a})},function(a){return d[44]=d[47]}])},function(a){return d[42]=d[44]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,1011]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[44]=a[0],a})},function(a){return c.i64.eq(d[44],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2716405471]),void 0).then(function(a){return d[46]=a})},function(a){return d[45]=d[46]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[46]=a[0],a})},function(a){return d[47]=c.createArray(),d[49]=(d[47].push(d[46]),d[47]),c.localizeV2Async(c.i64.cast([0,3909474073]),d[47]).then(function(a){return d[48]=a})},function(a){return d[45]=d[48]}])},function(a){return d[43]=d[45]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,1012]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[45]=a[0],a})},function(a){return c.i64.eq(d[45],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,1522141193]),void 0).then(function(a){return d[47]=a})},function(a){return d[46]=d[47]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[47]=a[0],a})},function(a){return d[48]=c.createArray(),d[50]=(d[48].push(d[47]),d[48]),c.localizeV2Async(c.i64.cast([0,2804766375]),d[48]).then(function(a){return d[49]=a})},function(a){return d[46]=d[49]}])},function(a){return d[44]=d[46]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,1013]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[46]=a[0],a})},function(a){return c.i64.eq(d[46],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,1522141193]),void 0).then(function(a){return d[48]=a})},function(a){return d[47]=d[48]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return d[49]=c.createArray(),d[51]=(d[49].push(d[48]),d[49]),c.localizeV2Async(c.i64.cast([0,2804766375]),d[49]).then(function(a){return d[50]=a})},function(a){return d[47]=d[50]}])},function(a){return d[45]=d[47]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,1014]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[47]=a[0],a})},function(a){return c.i64.eq(d[47],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[49]=a})},function(a){return d[50]=c.createArray(),d[52]=(d[50].push(d[49]),d[50]),c.localizeV2Async(c.i64.cast([0,3322002377]),d[50]).then(function(a){return d[51]=a})},function(a){return d[48]=d[51]}]):c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2486550278]),void 0).then(function(a){return d[49]=a})},function(a){return d[48]=d[49]}])},function(a){return d[46]=d[48]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,1015]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[48]=a[0],a})},function(a){return c.i64.eq(d[48],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[50]=a})},function(a){return d[49]=d[50]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[50]=a[0],a})},function(a){return d[51]=c.createArray(),d[53]=(d[51].push(d[50]),d[51]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[51]).then(function(a){return d[52]=a})},function(a){return d[49]=d[52]}])},function(a){return d[47]=d[49]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,1016]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[49]=a[0],a})},function(a){return c.i64.eq(d[49],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[51]=a})},function(a){return d[50]=d[51]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[51]=a[0],a})},function(a){return d[52]=c.createArray(),d[54]=(d[52].push(d[51]),d[52]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[52]).then(function(a){return d[53]=a})},function(a){return d[50]=d[53]}])},function(a){return d[48]=d[50]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,1017]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[50]=a[0],a})},function(a){return c.i64.eq(d[50],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[52]=a})},function(a){return d[51]=d[52]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[52]=a[0],a})},function(a){return d[53]=c.createArray(),d[55]=(d[53].push(d[52]),d[53]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[53]).then(function(a){return d[54]=a})},function(a){return d[51]=d[54]}])},function(a){return d[49]=d[51]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,1018]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[51]=a[0],a})},function(a){return c.i64.eq(d[51],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[53]=a})},function(a){return d[52]=d[53]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[53]=a[0],a})},function(a){return d[54]=c.createArray(),d[56]=(d[54].push(d[53]),d[54]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[54]).then(function(a){return d[55]=a})},function(a){return d[52]=d[55]}])},function(a){return d[50]=d[52]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,1019]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[52]=a[0],a})},function(a){return c.i64.eq(d[52],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[54]=a})},function(a){return d[53]=d[54]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[54]=a[0],a})},function(a){return d[55]=c.createArray(),d[57]=(d[55].push(d[54]),d[55]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[55]).then(function(a){return d[56]=a})},function(a){return d[53]=d[56]}])},function(a){return d[51]=d[53]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,2e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[53]=a[0],a})},function(a){return c.i64.eq(d[53],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[55]=a})},function(a){return d[54]=d[55]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[55]=a[0],a})},function(a){return d[56]=c.createArray(),d[58]=(d[56].push(d[55]),d[56]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[56]).then(function(a){return d[57]=a})},function(a){return d[54]=d[57]}])},function(a){return d[52]=d[54]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,2001]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[54]=a[0],a})},function(a){return c.i64.eq(d[54],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2285746939]),void 0).then(function(a){return d[56]=a})},function(a){return d[55]=d[56]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[56]=a[0],a})},function(a){return d[57]=c.createArray(),d[59]=(d[57].push(d[56]),d[57]),c.localizeV2Async(c.i64.cast([0,3759448420]),d[57]).then(function(a){return d[58]=a})},function(a){return d[55]=d[58]}])},function(a){return d[53]=d[55]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,2002]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[55]=a[0],a})},function(a){return c.i64.eq(d[55],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3719716921]),void 0).then(function(a){return d[57]=a})},function(a){return d[56]=d[57]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[57]=a[0],a})},function(a){return d[58]=c.createArray(),d[60]=(d[58].push(d[57]),d[58]),c.localizeV2Async(c.i64.cast([0,284944921]),d[58]).then(function(a){return d[59]=a})},function(a){return d[56]=d[59]}])},function(a){return d[54]=d[56]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,2003]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[56]=a[0],a})},function(a){return c.i64.eq(d[56],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[58]=a})},function(a){return d[57]=d[58]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[58]=a[0],a})},function(a){return d[59]=c.createArray(),d[61]=(d[59].push(d[58]),d[59]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[59]).then(function(a){return d[60]=a})},function(a){return d[57]=d[60]}])},function(a){return d[55]=d[57]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,2004]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[57]=a[0],a})},function(a){return c.i64.eq(d[57],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2326868239]),void 0).then(function(a){return d[59]=a})},function(a){return d[58]=d[59]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[59]=a[0],a})},function(a){return d[60]=c.createArray(),d[62]=(d[60].push(d[59]),d[60]),c.localizeV2Async(c.i64.cast([0,1001986796]),d[60]).then(function(a){return d[61]=a})},function(a){return d[58]=d[61]}])},function(a){return d[56]=d[58]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,2005]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[58]=a[0],a})},function(a){return c.i64.eq(d[58],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,772459202]),void 0).then(function(a){return d[60]=a})},function(a){return d[59]=d[60]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[60]=a[0],a})},function(a){return d[61]=c.createArray(),d[63]=(d[61].push(d[60]),d[61]),c.localizeV2Async(c.i64.cast([0,3546068912]),d[61]).then(function(a){return d[62]=a})},function(a){return d[59]=d[62]}])},function(a){return d[57]=d[59]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,2006]))?c.sequence([function(a){return c.i64.eq(d[29],d[3])?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[60]=a[0],a})},function(a){return c.i64.eq(d[60],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2459540079]),void 0).then(function(a){return d[62]=a})},function(a){return d[61]=d[62]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[62]=a[0],a})},function(a){return d[63]=c.createArray(),d[65]=(d[63].push(d[62]),d[63]),c.localizeV2Async(c.i64.cast([0,1596311291]),d[63]).then(function(a){return d[64]=a})},function(a){return d[61]=d[64]}])},function(a){return d[59]=d[61]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[60]=a[0],a})},function(a){return c.i64.eq(d[60],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2253698324]),void 0).then(function(a){return d[62]=a})},function(a){return d[61]=d[62]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[62]=a[0],a})},function(a){return d[63]=c.createArray(),d[65]=(d[63].push(d[62]),d[63]),c.localizeV2Async(c.i64.cast([0,4269602817]),d[63]).then(function(a){return d[64]=a})},function(a){return d[61]=d[64]}])},function(a){return d[59]=d[61]}])},function(a){return d[58]=d[59]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,2007]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[60]=a[0],a})},function(a){return c.i64.eq(d[60],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[62]=a})},function(a){return d[61]=d[62]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[62]=a[0],a})},function(a){return d[63]=c.createArray(),d[65]=(d[63].push(d[62]),d[63]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[63]).then(function(a){return d[64]=a})},function(a){return d[61]=d[64]}])},function(a){return d[59]=d[61]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,2008]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[61]=a[0],a})},function(a){return c.i64.eq(d[61],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[63]=a})},function(a){return d[62]=d[63]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[63]=a[0],a})},function(a){return d[64]=c.createArray(),d[66]=(d[64].push(d[63]),d[64]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[64]).then(function(a){return d[65]=a})},function(a){return d[62]=d[65]}])},function(a){return d[60]=d[62]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,2009]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[62]=a[0],a})},function(a){return c.i64.eq(d[62],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[64]=a})},function(a){return d[63]=d[64]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[64]=a[0],a})},function(a){return d[65]=c.createArray(),d[67]=(d[65].push(d[64]),d[65]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[65]).then(function(a){return d[66]=a})},function(a){return d[63]=d[66]}])},function(a){return d[61]=d[63]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,3e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[63]=a[0],a})},function(a){return c.i64.eq(d[63],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[65]=a})},function(a){return d[64]=d[65]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[65]=a[0],a})},function(a){return d[66]=c.createArray(),d[68]=(d[66].push(d[65]),d[66]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[66]).then(function(a){return d[67]=a})},function(a){return d[64]=d[67]}])},function(a){return d[62]=d[64]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,3001]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[64]=a[0],a})},function(a){return c.i64.eq(d[64],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[66]=a})},function(a){return d[65]=d[66]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[66]=a[0],a})},function(a){return d[67]=c.createArray(),d[69]=(d[67].push(d[66]),d[67]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[67]).then(function(a){return d[68]=a})},function(a){return d[65]=d[68]}])},function(a){return d[63]=d[65]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,3002]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[65]=a[0],a})},function(a){return c.i64.eq(d[65],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2973334239]),void 0).then(function(a){return d[67]=a})},function(a){return d[66]=d[67]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[67]=a[0],a})},function(a){return d[68]=c.createArray(),d[70]=(d[68].push(d[67]),d[68]),c.localizeV2Async(c.i64.cast([0,3616471048]),d[68]).then(function(a){return d[69]=a})},function(a){return d[66]=d[69]}])},function(a){return d[64]=d[66]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,3003]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[66]=a[0],a})},function(a){return c.i64.eq(d[66],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2973334239]),void 0).then(function(a){return d[68]=a})},function(a){return d[67]=d[68]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[68]=a[0],a})},function(a){return d[69]=c.createArray(),d[71]=(d[69].push(d[68]),d[69]),c.localizeV2Async(c.i64.cast([0,3616471048]),d[69]).then(function(a){return d[70]=a})},function(a){return d[67]=d[70]}])},function(a){return d[65]=d[67]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,3006]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[67]=a[0],a})},function(a){return c.i64.eq(d[67],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[69]=a})},function(a){return d[68]=d[69]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[69]=a[0],a})},function(a){return d[70]=c.createArray(),d[72]=(d[70].push(d[69]),d[70]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[70]).then(function(a){return d[71]=a})},function(a){return d[68]=d[71]}])},function(a){return d[66]=d[68]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,3007]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[68]=a[0],a})},function(a){return c.i64.eq(d[68],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[70]=a})},function(a){return d[69]=d[70]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[70]=a[0],a})},function(a){return d[71]=c.createArray(),d[73]=(d[71].push(d[70]),d[71]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[71]).then(function(a){return d[72]=a})},function(a){return d[69]=d[72]}])},function(a){return d[67]=d[69]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,3008]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[69]=a[0],a})},function(a){return c.i64.eq(d[69],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[71]=a})},function(a){return d[70]=d[71]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[71]=a[0],a})},function(a){return d[72]=c.createArray(),d[74]=(d[72].push(d[71]),d[72]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[72]).then(function(a){return d[73]=a})},function(a){return d[70]=d[73]}])},function(a){return d[68]=d[70]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,3009]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[70]=a[0],a})},function(a){return c.i64.eq(d[70],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[72]=a})},function(a){return d[71]=d[72]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[72]=a[0],a})},function(a){return d[73]=c.createArray(),d[75]=(d[73].push(d[72]),d[73]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[73]).then(function(a){return d[74]=a})},function(a){return d[71]=d[74]}])},function(a){return d[69]=d[71]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,3010]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[71]=a[0],a})},function(a){return c.i64.eq(d[71],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[73]=a})},function(a){return d[72]=d[73]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[73]=a[0],a})},function(a){return d[74]=c.createArray(),d[76]=(d[74].push(d[73]),d[74]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[74]).then(function(a){return d[75]=a})},function(a){return d[72]=d[75]}])},function(a){return d[70]=d[72]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,3012]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[72]=a[0],a})},function(a){return c.i64.eq(d[72],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[74]=a})},function(a){return d[73]=d[74]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[74]=a[0],a})},function(a){return d[75]=c.createArray(),d[77]=(d[75].push(d[74]),d[75]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[75]).then(function(a){return d[76]=a})},function(a){return d[73]=d[76]}])},function(a){return d[71]=d[73]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,3014]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[73]=a[0],a})},function(a){return c.i64.eq(d[73],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[75]=a})},function(a){return d[74]=d[75]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[75]=a[0],a})},function(a){return d[76]=c.createArray(),d[78]=(d[76].push(d[75]),d[76]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[76]).then(function(a){return d[77]=a})},function(a){return d[74]=d[77]}])},function(a){return d[72]=d[74]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,3015]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[74]=a[0],a})},function(a){return c.i64.eq(d[74],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3471188061]),void 0).then(function(a){return d[76]=a})},function(a){return d[75]=d[76]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[76]=a[0],a})},function(a){return d[77]=c.createArray(),d[79]=(d[77].push(d[76]),d[77]),c.localizeV2Async(c.i64.cast([0,2776822462]),d[77]).then(function(a){return d[78]=a})},function(a){return d[75]=d[78]}])},function(a){return d[73]=d[75]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,3016]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[75]=a[0],a})},function(a){return c.i64.eq(d[75],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[77]=a})},function(a){return d[76]=d[77]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[77]=a[0],a})},function(a){return d[78]=c.createArray(),d[80]=(d[78].push(d[77]),d[78]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[78]).then(function(a){return d[79]=a})},function(a){return d[76]=d[79]}])},function(a){return d[74]=d[76]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,4e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[76]=a[0],a})},function(a){return c.i64.eq(d[76],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[80]=a})},function(a){return d[77]=d[80]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[80]=a[0],a})},function(a){return d[77]=d[80]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[78]=a[0],a})},function(a){return c.localizeV2Async(c.i64.cast([0,1739999037]),void 0).then(function(a){return d[79]=a})},function(a){return d[75]=d[79]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,4001]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[77]=a[0],a})},function(a){return c.i64.eq(d[77],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[81]=a})},function(a){return d[78]=d[81]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[81]=a[0],a})},function(a){return d[78]=d[81]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[79]=a[0],a})},function(a){return c.localizeV2Async(c.i64.cast([0,3373597599]),void 0).then(function(a){return d[80]=a})},function(a){return d[76]=d[80]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,4002]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[78]=a[0],a})},function(a){return c.i64.eq(d[78],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[82]=a})},function(a){return d[79]=d[82]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[82]=a[0],a})},function(a){return d[79]=d[82]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[80]=a[0],a})},function(a){return c.i64.eq(d[80],d[3])?c.sequence([function(a){return d[82]=c.createArray(),d[84]=(d[82].push(d[79]),d[82]),c.localizeV2Async(c.i64.cast([0,259473449]),d[82]).then(function(a){return d[83]=a})},function(a){return d[81]=d[83]}]):c.sequence([function(a){return d[82]=c.createArray(),d[84]=(d[82].push(d[79]),d[82]),c.localizeV2Async(c.i64.cast([0,1338912959]),d[82]).then(function(a){return d[83]=a})},function(a){return d[81]=d[83]}])},function(a){return d[77]=d[81]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,4003]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[79]=a[0],a})},function(a){return c.i64.eq(d[79],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[83]=a})},function(a){return d[80]=d[83]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[83]=a[0],a})},function(a){return d[80]=d[83]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[81]=a[0],a})},function(a){return c.i64.eq(d[81],d[3])?c.sequence([function(a){return d[83]=c.createArray(),d[85]=(d[83].push(d[80]),d[83]),c.localizeV2Async(c.i64.cast([0,812940701]),d[83]).then(function(a){return d[84]=a})},function(a){return d[82]=d[84]}]):c.sequence([function(a){return d[83]=c.createArray(),d[85]=(d[83].push(d[80]),d[83]),c.localizeV2Async(c.i64.cast([0,1099878966]),d[83]).then(function(a){return d[84]=a})},function(a){return d[82]=d[84]}])},function(a){return d[78]=d[82]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,4004]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[80]=a[0],a})},function(a){return c.i64.eq(d[80],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[84]=a})},function(a){return d[81]=d[84]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[84]=a[0],a})},function(a){return d[81]=d[84]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[82]=a[0],a})},function(a){return c.localizeV2Async(c.i64.cast([0,3443782102]),void 0).then(function(a){return d[83]=a})},function(a){return d[79]=d[83]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,4005]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[81]=a[0],a})},function(a){return c.i64.eq(d[81],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[85]=a})},function(a){return d[82]=d[85]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[85]=a[0],a})},function(a){return d[82]=d[85]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[83]=a[0],a})},function(a){return c.localizeV2Async(c.i64.cast([0,618905030]),void 0).then(function(a){return d[84]=a})},function(a){return d[80]=d[84]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,4006]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[82]=a[0],a})},function(a){return c.i64.eq(d[82],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[86]=a})},function(a){return d[83]=d[86]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[86]=a[0],a})},function(a){return d[83]=d[86]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[84]=a[0],a})},function(a){return c.localizeV2Async(c.i64.cast([0,2470414797]),void 0).then(function(a){return d[85]=a})},function(a){return d[81]=d[85]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,4007]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[83]=a[0],a})},function(a){return c.i64.eq(d[83],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,14617150]),void 0).then(function(a){return d[87]=a})},function(a){return d[84]=d[87]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[87]=a[0],a})},function(a){return d[84]=d[87]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[85]=a[0],a})},function(a){return c.localizeV2Async(c.i64.cast([0,1306024833]),void 0).then(function(a){return d[86]=a})},function(a){return d[82]=d[86]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,5e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[84]=a[0],a})},function(a){return c.i64.eq(d[84],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2135145355]),void 0).then(function(a){return d[86]=a})},function(a){return d[85]=d[86]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[86]=a[0],a})},function(a){return d[87]=c.createArray(),d[89]=(d[87].push(d[86]),d[87]),c.localizeV2Async(c.i64.cast([0,3603511704]),d[87]).then(function(a){return d[88]=a})},function(a){return d[85]=d[88]}])},function(a){return d[83]=d[85]}]):c.sequence([function(a){return c.i64.eq(d[25],c.i64.cast([0,6e3]))?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[85]=a[0],a})},function(a){return c.i64.eq(d[85],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[87]=a})},function(a){return d[86]=d[87]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[87]=a[0],a})},function(a){return d[88]=c.createArray(),d[90]=(d[88].push(d[87]),d[88]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[88]).then(function(a){return d[89]=a})},function(a){return d[86]=d[89]}])},function(a){return d[84]=d[86]}]):c.resolve(d[84]=void 0)},function(a){return d[83]=d[84]}])},function(a){return d[82]=d[83]}])},function(a){return d[81]=d[82]}])},function(a){return d[80]=d[81]}])},function(a){return d[79]=d[80]}])},function(a){return d[78]=d[79]}])},function(a){return d[77]=d[78]}])},function(a){return d[76]=d[77]}])},function(a){return d[75]=d[76]}])},function(a){return d[74]=d[75]}])},function(a){return d[73]=d[74]}])},function(a){return d[72]=d[73]}])},function(a){return d[71]=d[72]}])},function(a){return d[70]=d[71]}])},function(a){return d[69]=d[70]}])},function(a){return d[68]=d[69]}])},function(a){return d[67]=d[68]}])},function(a){return d[66]=d[67]}])},function(a){return d[65]=d[66]}])},function(a){return d[64]=d[65]}])},function(a){return d[63]=d[64]}])},function(a){return d[62]=d[63]}])},function(a){return d[61]=d[62]}])},function(a){return d[60]=d[61]}])},function(a){return d[59]=d[60]}])},function(a){return d[58]=d[59]}])},function(a){return d[57]=d[58]}])},function(a){return d[56]=d[57]}])},function(a){return d[55]=d[56]}])},function(a){return d[54]=d[55]}])},function(a){return d[53]=d[54]}])},function(a){return d[52]=d[53]}])},function(a){return d[51]=d[52]}])},function(a){return d[50]=d[51]}])},function(a){return d[49]=d[50]}])},function(a){return d[48]=d[49]}])},function(a){return d[47]=d[48]}])},function(a){return d[46]=d[47]}])},function(a){return d[45]=d[46]}])},function(a){return d[44]=d[45]}])},function(a){return d[43]=d[44]}])},function(a){return d[42]=d[43]}])},function(a){return d[41]=d[42]}])},function(a){return d[40]=d[41]}])},function(a){return d[39]=d[40]}])},function(a){return d[38]=d[39]}])},function(a){return d[37]=d[38]}])},function(a){return d[36]=d[37]}])},function(a){return d[35]=d[36]}])},function(a){return d[34]=d[35]}])},function(a){return d[33]=d[34]}])},function(a){return d[32]=d[33]}])},function(a){return d[31]=d[32]}])},function(a){return d[30]=d[31]}])},function(a){return d[26]=d[30]}]):c.resolve(d[26]=void 0)},function(a){return d[24]===void 0&&c.i64.eq(d[18],c.i64.cast([0,7]))&&d[26]!==void 0?d[24]=d[26]:0,c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[27]=a[0],a})},function(a){return c.i64.eq(d[27],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3948960063]),void 0).then(function(a){return d[29]=a})},function(a){return d[28]=d[29]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[29]=a[0],a})},function(a){return d[30]=c.createArray(),d[32]=(d[30].push(d[29]),d[30]),c.localizeV2Async(c.i64.cast([0,1249692047]),d[30]).then(function(a){return d[31]=a})},function(a){return d[28]=d[31]}])},function(a){return d[17]=d[24]==null?d[28]:d[24]}]):c.sequence([function(a){return d[18]=!0,c.forEach(c.filter(c.db.table(16).fetch([[[d[4],d[8]]]]),function(a){return c.i64.eq(a.threadKey,d[4])&&c.i64.eq(c.i64.cast([0,0]),d[7])&&a.messageId===d[8]}),function(a){a=a.item;return c.i64.eq(a.attachmentType,c.i64.cast([0,2]))?0:d[18]=!1})},function(a){return d[18]?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[20]=a[0],a})},function(a){return c.i64.eq(d[20],d[3])?c.sequence([function(a){return d[22]=c.createArray(),d[24]=(d[22].push(d[15]),d[22]),c.localizeV2Async(c.i64.cast([0,705614308]),d[22]).then(function(a){return d[23]=a})},function(a){return d[21]=d[23]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[23]=c.createArray(),d[25]=(d[23].push(d[22]),d[23]),d[25]=(d[23].push(d[15]),d[23]),c.localizeV2Async(c.i64.cast([0,313217698]),d[23]).then(function(a){return d[24]=a})},function(a){return d[21]=d[24]}])},function(a){return d[19]=d[21]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[20]=a[0],a})},function(a){return c.i64.eq(d[20],d[3])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3558654267]),void 0).then(function(a){return d[22]=a})},function(a){return d[21]=d[22]}]):c.sequence([function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[4],d[3]).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[23]=c.createArray(),d[25]=(d[23].push(d[22]),d[23]),c.localizeV2Async(c.i64.cast([0,3422266740]),d[23]).then(function(a){return d[24]=a})},function(a){return d[21]=d[24]}])},function(a){return d[19]=d[21]}])},function(a){return d[17]=d[19]}])},function(a){return d[16]=d[17]}])},function(a){return d[14]=d[16]}])},function(a){return d[13]=d[14]}])},function(a){return d[12]=d[13]}])},function(a){return d[11]=d[12]}])},function(a){return d[10]=d[11]}])},function(a){return d[9]=d[10]}])},function(a){return d[1]=d[9]}])},function(e){return c.storedProcedure(b("LSUpdateThreadSnippet"),a[0],d[1],d[2],d[3],c.like(d[1],"%\udb80\udc00%"),void 0,void 0,!1)}]))})},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSUpdateThreadSnippetFromLastMessageV2StoredProcedure",["LSUpdateThreadSnippetFromLastMessageV2","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;return c("LSUpdateThreadSnippetFromLastMessageV2").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSBumpThreadStoredProcedure",["LSBumpThread","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.bumpTimestampMs;d[1]=b.readStateEffect;d[2]=b.threadKey;return c("LSBumpThread").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("MessageThreadReadState",[],(function(a,b,c,d,e,f){"use strict";a={MARK_READ:1,MARK_UNREAD:2,KEEP_AS_IS:3};b=a;f["default"]=b}),66);
__d("instamadilloBumpThread",["FBLogger","I64","LSBumpThreadStoredProcedure","LSFactory","LSIntEnum","MAWAuthor","MAWCurrentUser","MAWJids","MessageThreadReadState","WAJids","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=d("MAWAuthor").getAuthorUserJid(b.author);if(f==null)return c("FBLogger")("igd_web_on_msgr").warn("Skip instamadilloBumpThread: a message cannot exist without an author");f=(h||(h=d("I64"))).of_string(d("MAWJids").userIdFromJid(f));b=h.of_string(d("WAJids").threadIdForChatJid(b.chat));var g=(yield a.threads.get(b));f=h.equal(f,h.of_string(d("MAWCurrentUser").getID()));f=(i||(i=d("LSIntEnum"))).ofNumber(f?c("MessageThreadReadState").KEEP_AS_IS:c("MessageThreadReadState").MARK_UNREAD);g=g==null?void 0:g.lastActivityTimestampMs;g!=null&&(h||(h=d("I64"))).ge(e,g)&&(yield c("LSBumpThreadStoredProcedure")(c("LSFactory")(a),{bumpTimestampMs:e,readStateEffect:f,threadKey:b}))});return j.apply(this,arguments)}g["default"]=a}),98);
__d("handleInstamadilloReceiverFetchContent",["I64","IGDXMAAttachmentUtil","InstamadilloMessageFactory","InstamadilloTextMessageUtils","LSAuthorityLevel","LSFactory","LSIntEnum","LSUpdateThreadSnippetFromLastMessageV2StoredProcedure","LSVerifyThreadRowExistsV2StoredProcedure","MAWExternalId","MNLSXMALayoutType","MessagingAttachmentType","WAResultOrError","asyncToGeneratorRuntime","instamadilloBumpThread","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e,f,g,j,k,l,m,n){return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("InstamadilloMessageFactory").createBaseMessage(a,e,f,k));if(b==null)return d("WAResultOrError").makeResult({reason:"cannot_create_base_message",result:"skip"});var o=b.threadKey,p=JSON.stringify(j);yield c("LSVerifyThreadRowExistsV2StoredProcedure")(c("LSFactory")(a),{authorityLevel:(h||(h=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),syncGroup:(i||(i=d("I64"))).of_int32(1),threadKey:o,threadType:i.of_int32(1)});var q=8;c("isStringNullOrEmpty")(g.text)||(q+=1);yield a.messages.put(babelHelpers["extends"]({},b,{displayedContentTypes:i.of_int32(q),text:g.text,textHasLinks:d("InstamadilloTextMessageUtils").textHasLinks(g.text),xmaReceiverFetchParams:p},n));var r;b=m==null?void 0:m.type_;if(b!=null){q=(i||(i=d("I64"))).of_string(d("MAWExternalId").generateExternalId());r=babelHelpers["extends"]({},d("InstamadilloMessageFactory").createBaseAttachmentCta(e),{ctaId:q,type_:b},m);yield a.attachment_ctas.put(r)}yield a.attachments.put(babelHelpers["extends"]({},d("InstamadilloMessageFactory").createBaseAttachment(e,f),{attachmentType:h.ofNumber(c("MessagingAttachmentType").XMA),defaultCtaId:(p=r)==null?void 0:p.ctaId,defaultCtaTitle:(q=r)==null?void 0:q.title,defaultCtaType:(b=r)==null?void 0:b.type_,faviconUrl:d("IGDXMAAttachmentUtil").DEFAULT_PROFILE_URL,hasXma:!0,isSharable:!0,xmaLayoutType:h.ofNumber(c("MNLSXMALayoutType").SINGLE)},l));yield c("instamadilloBumpThread")(a,e,f);yield c("LSUpdateThreadSnippetFromLastMessageV2StoredProcedure")(c("LSFactory")(a),{threadKey:o});return d("WAResultOrError").makeResult({result:"handled"})});return function(b){return a.apply(this,arguments)}}(),"readwrite")}g["default"]=a}),98);
__d("renderInstamadilloOptimisticXmaReceiverFetch",["I64","MAWCurrentUser","OfflineThreadingId","Promise","WAJids","WAStanzaUtils","asyncToGeneratorRuntime","handleInstamadilloReceiverFetchContent","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("renderInstamadilloOptimisticXmaReceiverFetch");function a(a,b,c,d,e,f){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,k,l){var m=d("OfflineThreadingId").createOfflineThreadingID(),n=d("WAJids").toMsgrUserJid(d("MAWCurrentUser").getID()),o=(i||(i=d("I64"))).of_float(Date.now());n={author:n,chat:d("WAJids").toMsgrUserJid(a),externalId:d("WAStanzaUtils").toStanzaId(m)};a=(yield j.load());a=(yield a());yield c("handleInstamadilloReceiverFetchContent")(a,n,o,e,f,{},g,k,l);return(h||(h=b("Promise"))).resolve(m)});return k.apply(this,arguments)}g["default"]=a}),98);
__d("issueSendXMAReceiverFetchCometTask",["CometTaskFramework","MAWCurrentUser"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("CometTaskFramework")(d("MAWCurrentUser").getID()).issueTask("igd_send_xma_receiver_fetch",a)}g["default"]=a}),98);
__d("getSendPostToInstamadilloRecipient",["fbt","I64","IGDDataclassTypes.flow","LSAuthorityLevel","LSMessageSendStatus","asyncToGeneratorRuntime","issueSendXMAReceiverFetchCometTask","renderInstamadilloOptimisticXmaReceiverFetch"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function a(a,e,f,g){var j={__typename:"XMSGIgReceiverFetchXmaFeedFetchParams",media_igid:a};e={__typename:"XMSGIgXmaContentRefDataclass",action_type:d("IGDDataclassTypes.flow").XmsgIgXmaActionType.Share,content_type:d("IGDDataclassTypes.flow").XmsgIgReceiverFetchContentType.Feed,fetch_params:j,owner_fbid:e,target_url:g,username:f};var k={contentRef:JSON.stringify(e)},l={authorityLevel:(i||(i=d("I64"))).of_int32(c("LSAuthorityLevel").OPTIMISTIC),sendStatus:i.of_int32(c("LSMessageSendStatus").SENDING_TO_SERVER),sendStatusV2:i.of_int32(1)},m={actionUrl:g,nativeUrl:g,targetId:i.of_string(a),type_:"igd_web_post_share"},n={authorityLevel:i.of_int32(c("LSAuthorityLevel").OPTIMISTIC),subtitleText:h._("__JHASH___C2jDMKyMih__JHASH__").toString(),titleText:f};return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d,e,f){try{var g=(yield c("renderInstamadilloOptimisticXmaReceiverFetch")(a,k,j,n,m,l));yield c("issueSendXMAReceiverFetchCometTask")({comment:d,isDisappearingModeSettingOn:b,offlineThreadingId:g,receiverFetchXma:JSON.stringify(k),threadKey:a});e==null?void 0:e(a)}catch(b){f==null?void 0:f(b,a)}});return function(b,c,d,e,f){return a.apply(this,arguments)}}()}g["default"]=a}),226);
__d("PolarisDesktopPostLoadingShimmer.react",["cx","PolarisIGTheme.react","PolarisReactRedux.react","PolarisSizing","polarisPostModalHelpers","polarisPostSelectors","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).unstable_useMemoCache,k=i;function l(a){var b,c=j(8),e=a.dimensions,f=a.postId,g=a.viewportHeight;a=a.viewportWidth;var h=a!=null&&a>d("PolarisSizing").MEDIUM_SCREEN_MIN;b=(b=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisPostSelectors").getPostOrNullById(a,(a=f)!=null?a:"")}))==null?void 0:b.isSponsored;b=d("polarisPostModalHelpers").getMediaContainerProps({dimensions:e,hasFooter:b,hasSidebarInRedesign:h,viewportHeight:(b=g)!=null?b:0,viewportWidth:(g=a)!=null?g:0});a=h&&e!=null&&e.width>=e.height;c[0]!==a?(g="_aas3"+(a?" _aas4":""),c[0]=a,c[1]=g):g=c[1];c[2]!==e?(h=k.jsx(m,{dimensions:e}),c[2]=e,c[3]=h):h=c[3];c[4]!==g||c[5]!==b||c[6]!==h?(a=k.jsx("div",babelHelpers["extends"]({className:g},b,{children:h})),c[4]=g,c[5]=b,c[6]=h,c[7]=a):a=c[7];return a}function m(a){var b=j(2);a=a.dimensions;var c={},e=d("PolarisIGTheme.react").useTheme();a&&(c.paddingBottom=d("PolarisSizing").getHeightPercent(a)+"%");a=e.getTheme()===d("PolarisIGTheme.react").IGTheme.Dark;b[0]!==a?(e="_aas5"+(a?" _aas6":""),b[0]=a,b[1]=e):e=b[1];return k.jsx("div",{className:e,style:c})}m.displayName=m.name+" [from "+f.id+"]";function n(a){var b=j(5),c=a.dimensions,d=a.postId,e=a.viewportHeight;a=a.viewportWidth;var f;b[0]!==c||b[1]!==d||b[2]!==e||b[3]!==a?(f=k.jsx(l,{dimensions:c,postId:d,viewportHeight:e,viewportWidth:a}),b[0]=c,b[1]=d,b[2]=e,b[3]=a,b[4]=f):f=b[4];return f}function a(a){var b=j(21),c=a.dimensions,d=a.postId,e=a.viewportHeight;a=a.viewportWidth;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f={},b[0]=f):f=b[0];f=f;if(c){var g;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(g={flexDirection:"row"},b[1]=g):g=b[1];f=g}b[2]===Symbol["for"]("react.memo_cache_sentinel")?(g="_aas7",b[2]=g):g=b[2];var h;b[3]!==c||b[4]!==d||b[5]!==e||b[6]!==a?(h=k.jsx(n,{dimensions:c,postId:d,viewportHeight:e,viewportWidth:a}),b[3]=c,b[4]=d,b[5]=e,b[6]=a,b[7]=h):h=b[7];b[8]===Symbol["for"]("react.memo_cache_sentinel")?(c="_aas8",b[8]=c):c=b[8];b[9]===Symbol["for"]("react.memo_cache_sentinel")?(d="_aas9",b[9]=d):d=b[9];b[10]===Symbol["for"]("react.memo_cache_sentinel")?(e=k.jsx("div",{className:"_aasa"}),b[10]=e):e=b[10];b[11]===Symbol["for"]("react.memo_cache_sentinel")?(a="_aasb",b[11]=a):a=b[11];var i;b[12]===Symbol["for"]("react.memo_cache_sentinel")?(i=k.jsx("div",{className:"_aasc"}),b[12]=i):i=b[12];b[13]===Symbol["for"]("react.memo_cache_sentinel")?(d=k.jsxs("div",{className:d,children:[e,k.jsxs("div",{className:a,children:[i,k.jsx("div",{className:"_aasd"})]})]}),b[13]=d):d=b[13];b[14]===Symbol["for"]("react.memo_cache_sentinel")?(e="_aase",b[14]=e):e=b[14];b[15]===Symbol["for"]("react.memo_cache_sentinel")?(a=k.jsx("div",{className:"_aasf"}),b[15]=a):a=b[15];b[16]===Symbol["for"]("react.memo_cache_sentinel")?(i=k.jsx("div",{className:"_aasg"}),b[16]=i):i=b[16];b[17]===Symbol["for"]("react.memo_cache_sentinel")?(c=k.jsxs("div",{className:c,children:[d,k.jsxs("div",{className:e,children:[a,i,k.jsx("div",{className:"_aash"})]})]}),b[17]=c):c=b[17];b[18]!==f||b[19]!==h?(d=k.jsxs("div",{className:g,style:f,children:[h,c]}),b[18]=f,b[19]=h,b[20]=d):d=b[20];return d}g.SIDEBAR_VARIANT_CUTOFF=d("PolarisSizing").MEDIUM_SCREEN_MIN;g.DesktopPostLoadingShimmer=a}),98);
__d("PolarisPostModalLoading.react",["IGDSBox.react","IGDSSpinner.react","PolarisDesktopPostLoadingShimmer.react","PolarisPostConstants","PolarisUA","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var b=i(6),e=a.dimensions,f=a.postId,g=a.viewportHeight;a=a.viewportWidth;if(d("PolarisUA").isDesktop()&&a>d("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF){var h;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==a?(h=j.jsx(d("PolarisDesktopPostLoadingShimmer.react").DesktopPostLoadingShimmer,{dimensions:e,postId:f,viewportHeight:g,viewportWidth:a}),b[0]=e,b[1]=f,b[2]=g,b[3]=a,b[4]=h):h=b[4];return h}b[5]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsx(c("IGDSBox.react"),{alignItems:"center",position:"relative",children:j.jsx(c("IGDSSpinner.react"),{color:"light",size:"medium"})}),b[5]=e):e=b[5];return e}g["default"]=a}),98);
__d("PolarisPostModalPaginationArrow.react",["cx","IGDSChevronIcon.react","Locale","PolarisGenericStrings","PolarisIGCoreSVGIconButton.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).unstable_useMemoCache,k=i;function a(a){var b=j(12),e=a.direction;a=a.onClick;var f;if(b[0]!==e){var g=c("Locale").isRTL();f=e==="back"&&!g||e==="next"&&g;g=e==="next"&&!g||e==="back"&&g;g=(f?"_aaqf":"")+(g?" _aaqg":"")+" _aaqh";b[0]=e;b[1]=f;b[2]=g}else f=b[1],g=b[2];f=f?d("PolarisGenericStrings").GO_BACK:d("PolarisGenericStrings").NEXT;var h;b[3]!==f||b[4]!==e?(h=k.jsx(c("IGDSChevronIcon.react"),{alt:f,color:"web-always-black",direction:e,size:16}),b[3]=f,b[4]=e,b[5]=h):h=b[5];b[6]!==a||b[7]!==h?(f=k.jsx(c("PolarisIGCoreSVGIconButton.react"),{onClick:a,children:h}),b[6]=a,b[7]=h,b[8]=f):f=b[8];b[9]!==g||b[10]!==f?(e=k.jsx("div",{className:g,children:f}),b[9]=g,b[10]=f,b[11]=e):e=b[11];return e}g["default"]=a}),98);
__d("PolarisPostModalInternal.react",["cx","IGCoreModal.react","IGCoreModalLocation.react","PolarisAutoplayViewpointManager.react","PolarisConfig","PolarisDOMListener.react","PolarisLogger","PolarisPostActionLoadPost","PolarisPostModalLoading.react","PolarisPostModalPaginationArrow.react","PolarisPostModalRenderingContext.react","PolarisReactRedux.react","PolarisRoutes","PolarisThreadedCommentActions","getPolarisKeyCommandConfig","nullthrows","polarisPostModalHelpers","polarisPostSelectors","react","useGlobalKeyCommands","usePolarisDisplayProperties"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useEffect,m=b.useMemo,n=b.useRef,o={isInModal:!0};function a(a){var b=a.analyticsContext,e=a.children,f=a.combinedPostIds,g=f===void 0?[]:f;f=a["data-testid"];f=a.dimensions;var h=a.mediaLinkBuilder,i=a.modalEntryPath;i=i===void 0?d("PolarisRoutes").FEED_PATH:i;var p=a.onClose,q=a.onlyReplaceModalHistory,r=a.onOpen,s=a.postCode,t=a.postId,u=a.showLoadingShimmer,v=a.skipMediaInfo,w=d("PolarisReactRedux.react").useDispatch(),x=n(null);a=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisPostSelectors").getAreCommentsFetched(a,t)});var y=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisPostSelectors").getIsPostDataFetched(a,s)}),z=d("PolarisConfig").isLoggedIn()===!0?y:y&&a;y=k(function(){z||(v===!0?w(d("PolarisThreadedCommentActions").requestInitialComments(t)):w(d("PolarisPostActionLoadPost").loadPost(s,t)))},[v,z,w,s,t]);l(y,[y]);var A=g.findIndex(function(a){return a===t}),B=k(function(a){return a>=0&&a<g.length},[g.length]),C=k(function(a){a=A+a;B(a)&&r&&r(c("nullthrows")(g[a]),a)},[g,A,B,r]),D=k(function(a){p(a),x.current!=null&&x.current.returnToEntry()},[p]);a=m(function(){return[d("getPolarisKeyCommandConfig").getPolarisKeyCommandConfig("postModal","navigateLeft",function(){C(d("polarisPostModalHelpers").LEFT_DELTA)}),d("getPolarisKeyCommandConfig").getPolarisKeyCommandConfig("postModal","navigateRight",function(){C(d("polarisPostModalHelpers").RIGHT_DELTA)}),d("getPolarisKeyCommandConfig").getPolarisKeyCommandConfig("postModal","exit",function(){D()})]},[C,D]);c("useGlobalKeyCommands")(a);y=function(a){return function(b){if(b.metaKey||b.ctrlKey)return;b.preventDefault();b.stopPropagation();C(a);d("PolarisLogger").logAction("postModalArrowClick")}};a=k(function(){var a=d("polarisPostModalHelpers").getModalPageIdFromAnalyticsContext(b);a.length>0&&d("PolarisLogger").logPageView(a,{page_id:a,post_id:t})},[b,t]);var E=B(A-1),F=B(A+1);E=j.jsx("div",{className:"_aeap _aeaq",children:j.jsxs("div",{className:"_aear",children:[E&&j.jsx(c("PolarisPostModalPaginationArrow.react"),{direction:"back",onClick:y(d("polarisPostModalHelpers").LEFT_DELTA)}),F&&j.jsx(c("PolarisPostModalPaginationArrow.react"),{direction:"next",onClick:y(d("polarisPostModalHelpers").RIGHT_DELTA)})]})});F=c("usePolarisDisplayProperties")();y=F.viewportHeight;F=F.viewportWidth;u=j.jsx(j.Fragment,{children:!z&&u?j.jsx(c("PolarisPostModalLoading.react"),{dimensions:f,postId:t,viewportHeight:y,viewportWidth:F}):e});f=j.jsx(c("IGCoreModal.react"),{aboveContent:E,backgroundColor:"DEPRECATED_transparent",closeButtonPosition:"background","data-testid":void 0,onClose:D,size:"fullscreenResponsive",children:u});return j.jsxs(j.Fragment,{children:[j.jsx(d("PolarisAutoplayViewpointManager.react").FullscreenAutoplayViewpointClipRegion,{id:"postModal"}),j.jsx(c("IGCoreModalLocation.react"),{entryPath:i,nativeReplace:!0,onlyReplaceModalHistory:q,onUpdateHistory:a,pageID:"postPage",parentModule:"PolarisPostModal",path:h(s),ref:x}),j.jsx(c("PolarisDOMListener.react"),{event:"popstate",handler:D,once:!0,target:window}),j.jsx(d("PolarisPostModalRenderingContext.react").PolarisPostModalRenderingContext.Provider,{value:o,children:f})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisProfileTabTaggedPhotosConstants",[],(function(a,b,c,d,e,f){"use strict";a="tagged";f.TAGGED_TAB_ID=a}),66);
__d("PolarisInstantPostModal.react",["PolarisPostModalInternal.react","PolarisProfileTabTaggedPhotosConstants","polarisPostModalHelpers","polarisPostSelectors","react","usePolarisSelector"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var b,e=i(6),f=!1,g=d("polarisPostModalHelpers").getModalPageIdFromAnalyticsContext(a.analyticsContext)==="profilePageModal";b=((b=a.modalEntryPath)==null?void 0:b.endsWith("/"+d("PolarisProfileTabTaggedPhotosConstants").TAGGED_TAB_ID+"/"))===!0;g=g&&!b;var h;e[0]!==a.postId?(h=function(b){return d("polarisPostSelectors").getPostOrNullById(b,a.postId)},e[0]=a.postId,e[1]=h):h=e[1];h=c("usePolarisSelector")(h);(h==null||b&&h.isVideo===!0)&&(f=!0);e[2]!==a||e[3]!==f||e[4]!==g?(b=j.jsx(c("PolarisPostModalInternal.react"),babelHelpers["extends"]({},a,{showLoadingShimmer:f,skipMediaInfo:g})),e[2]=a,e[3]=f,e[4]=g,e[5]=b):b=e[5];return b}g["default"]=a}),98);
__d("PolarisMediaBrowserPostModal.react",["invariant","PolarisInstantPostModal.react","PolarisIsLoggedInDesktop","PolarisPost.react","PolarisPostVariants","PolarisReactRedux.react","PolarisRoutes","isStringNullOrEmpty","nullthrows","polarisPostSelectors","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.unstable_useMemoCache;function a(a){var b=l(22),e=a.analyticsContext,f=a.combinedPosts,g=a.mediaLinkBuilder,i=a.modalEntryPath,m=a.onClose,n=a.onOpen,o=a.postId;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a){return d("polarisPostSelectors").getDeletedIds(a)},b[0]=a):a=b[0];var p=d("PolarisReactRedux.react").useSelector(a);if(b[1]!==f){b[3]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a){return a.id},b[3]=a):a=b[3];a=f.map(a);b[1]=f;b[2]=a}else a=b[2];f=a;b[4]!==o?(a=function(a){return d("polarisPostSelectors").getPostOrNullById(a,o)},b[4]=o,b[5]=a):a=b[5];var q=d("PolarisReactRedux.react").useSelector(a);k(function(){q==null&&(p.includes(o)||h(0,51476),m())},[p,m,q,o]);if(q==null)return null;a=c("isStringNullOrEmpty")(i)?d("PolarisRoutes").FEED_PATH:i;i=c("nullthrows")(q.code);var r=e+"Modal",s;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(s=d("PolarisIsLoggedInDesktop").isLoggedInDesktop(),b[6]=s):s=b[6];b[7]!==r||b[8]!==o||b[9]!==q.code?(s=j.jsx(c("PolarisPost.react"),{analyticsContext:r,autoplay:s,id:o,isVisible:!0,shortcode:q.code,testid:void 0,variant:d("PolarisPostVariants").VARIANTS.flexible,visiblePosition:0}),b[7]=r,b[8]=o,b[9]=q.code,b[10]=s):s=b[10];b[11]!==e||b[12]!==f||b[13]!==q.dimensions||b[14]!==g||b[15]!==a||b[16]!==m||b[17]!==n||b[18]!==i||b[19]!==o||b[20]!==s?(r=j.jsx(c("PolarisInstantPostModal.react"),{analyticsContext:e,combinedPostIds:f,dimensions:q.dimensions,mediaLinkBuilder:g,modalEntryPath:a,onClose:m,onOpen:n,postCode:i,postId:o,children:s}),b[11]=e,b[12]=f,b[13]=q.dimensions,b[14]=g,b[15]=a,b[16]=m,b[17]=n,b[18]=i,b[19]=o,b[20]=s,b[21]=r):r=b[21];return r}g["default"]=a}),98);
__d("PolarisPostModal.react",["PolarisPostModalInternal.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var b=i(2),d;b[0]!==a?(d=j.jsx(c("PolarisPostModalInternal.react"),babelHelpers["extends"]({},a,{showLoadingShimmer:!0})),b[0]=a,b[1]=d):d=b[1];return d}g["default"]=a}),98);
__d("PolarisClipsItemModal.react",["IGRouter.react","PolarisClipsHelpers","PolarisLinkBuilder","PolarisPost.react","PolarisPostModal.react","PolarisPostVariants","nullthrows","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useRef,k=b.unstable_useMemoCache;function a(a){var b=k(32),e=a.analyticsContext,f=a.clips,g=a.history,h=a.onClose,l=a.onOpen;a=a.postId;g=j(g.location.pathname);var m,n,o,p,q,r,s,t,u,v;if(b[0]!==f||b[1]!==a||b[2]!==e||b[3]!==h||b[4]!==l){v=Symbol["for"]("react.early_return_sentinel");bb18:{var w=d("PolarisClipsHelpers").getClipItemFromPostID(f,a);if(!w){v=null;break bb18}if(b[15]!==f){var x;b[17]===Symbol["for"]("react.memo_cache_sentinel")?(x=function(a){return c("nullthrows")((a=a.media)==null?void 0:a.pk)},b[17]=x):x=b[17];x=f.map(x);b[15]=f;b[16]=x}else x=b[16];x=x;m=c("PolarisPostModal.react");n=e;o=x;p=d("PolarisClipsHelpers").getClipDimensionsFromItemDict(w);q=d("PolarisLinkBuilder").buildClipsMediaLink;r=g.current;s=h;t=l;u=c("nullthrows")((x=w.media)==null?void 0:x.code)}b[0]=f;b[1]=a;b[2]=e;b[3]=h;b[4]=l;b[5]=m;b[6]=n;b[7]=o;b[8]=p;b[9]=q;b[10]=r;b[11]=s;b[12]=t;b[13]=u;b[14]=v}else m=b[5],n=b[6],o=b[7],p=b[8],q=b[9],r=b[10],s=b[11],t=b[12],u=b[13],v=b[14];if(v!==Symbol["for"]("react.early_return_sentinel"))return v;g=e+"Modal";b[18]!==g||b[19]!==a?(w=i.jsx(c("PolarisPost.react"),{analyticsContext:g,autoplay:!0,id:a,isVisible:!0,variant:d("PolarisPostVariants").VARIANTS.flexible,visiblePosition:0}),b[18]=g,b[19]=a,b[20]=w):w=b[20];b[21]!==m||b[22]!==n||b[23]!==o||b[24]!==p||b[25]!==q||b[26]!==s||b[27]!==t||b[28]!==u||b[29]!==a||b[30]!==w?(x=i.jsx(m,{analyticsContext:n,combinedPostIds:o,dimensions:p,mediaLinkBuilder:q,modalEntryPath:r,onClose:s,onOpen:t,postCode:u,postId:a,children:w}),b[21]=m,b[22]=n,b[23]=o,b[24]=p,b[25]=q,b[26]=s,b[27]=t,b[28]=u,b[29]=a,b[30]=w,b[31]=x):x=b[31];return x}e=d("IGRouter.react").withIGRouter(a);g["default"]=e}),98);
__d("usePolarisPostToastPosition",["PolarisPanavisionQEHelpers","PolarisPostConstants","PolarisPostToastProvider.react","PolarisUA","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useLayoutEffect,j=b.unstable_useMemoCache,k=2,l=-4,m=-1,n=-6,o=16,p=1;function q(a){var b=a.isFeed,c=a.isNarrow,e=a.isSidecar,f=a.postToastContainerElem;a=a.setPositionStyles;if(f!=null){f=f.getBoundingClientRect();var g=f.left-(c?o:0),h={left:g},i=f.right-f.left+(c?2*o:0);b?d("PolarisPanavisionQEHelpers").hasPolarisFeedRevamp()?a({absolutePositionStyles:{left:f.left+p,top:f.bottom+window.pageYOffset-d("PolarisPostConstants").POST_TOAST_HEIGHT-2},width:f.width-p}):d("PolarisUA").isDesktop()?a({absolutePositionStyles:{left:g,top:f.top+window.pageYOffset-d("PolarisPostConstants").POST_TOAST_HEIGHT+n-(e?k:0)},width:i}):a({absolutePositionStyles:{left:g-p,top:f.top+window.pageYOffset-d("PolarisPostConstants").POST_TOAST_HEIGHT+n-(e?k:0)},width:i+p}):a({absolutePositionStyles:babelHelpers["extends"]({},h,{top:f.top+window.pageYOffset-d("PolarisPostConstants").POST_TOAST_HEIGHT+m-(c?l:0)}),width:i})}}function a(a){var b=j(13),c=a.isFeed,e=a.isNarrow,f=a.isSidecar;a=d("PolarisPostToastProvider.react").usePostToastContext();var g=a.positionStyles,h=a.postToastContainerElem,k=a.setPositionStyles;a=a.showToast;var l;b[0]!==c||b[1]!==e||b[2]!==f||b[3]!==h||b[4]!==k?(l=function(){return q({isFeed:c,isNarrow:e,isSidecar:f,postToastContainerElem:h,setPositionStyles:k})},b[0]=c,b[1]=e,b[2]=f,b[3]=h,b[4]=k,b[5]=l):l=b[5];var m;b[6]!==c||b[7]!==e||b[8]!==f||b[9]!==h||b[10]!==k||b[11]!==a?(m=[c,e,f,h,k,a],b[6]=c,b[7]=e,b[8]=f,b[9]=h,b[10]=k,b[11]=a,b[12]=m):m=b[12];i(l,m);return g}g["default"]=a}),98);
__d("PolarisPostToastImpl.react",["BasePortal.react","ExecutionEnvironment","IGDSText.react","PolarisIGAnimate","PolarisIGCoreButton.react","PolarisPostConstants","PolarisPostStrings","PolarisPostToastProvider.react","PolarisSizing","PolarisUA","browserHistory","react","stylex","usePolarisDisplayProperties","usePolarisPostToastPosition"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));b=j;var l=b.useEffect,m=b.unstable_useMemoCache,n=3e3,o=350,p={container:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"x1q0g3np",justifyContent:"x1szn6h9",paddingTop:"xyamay9",paddingEnd:"x1pi30zi",paddingBottom:"x1l90r2v",paddingStart:"x1swvt13",width:"xh8yej3",$$css:!0},label:{flexGrow:"x1iyjqo2",$$css:!0},root:{position:"x10l6tqk",zIndex:"xhtitgo",$$css:!0},toast:{alignContent:"xc26acl",alignItems:"x6s0dn4",backgroundColor:"xvbhtw8",borderEndColor:"x1nk0tez",borderEndStyle:"xu3j5b3",borderEndWidth:"xm81vs4",borderStartColor:"x1hm1hlx",borderStartStyle:"x26u7qi",borderStartWidth:"xy80clv",display:"x78zum5",$$css:!0},toastFamiliar:{borderBottomColor:"xh05dso",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",borderBottomStyle:"x1q0q8m5",borderBottomWidth:"xso031l",borderTopColor:"x1xp8e9x",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",$$css:!0}};function a(a){var b=m(19),e=a.isFeedVariant,f=a.isModal;a=a.isSidecar;var g;b[0]!==e?(g=e&&d("PolarisUA").isDesktop(),b[0]=e,b[1]=g):g=b[1];var j=g;g=d("PolarisPostToastProvider.react").usePostToastContext();var q=g.ActionText,r=g.BodyText,s=g.actionHref,t=g.setShowToast;g=g.showToast;var u=c("usePolarisDisplayProperties")();u=u.viewportWidth;u=u<d("PolarisSizing").SMALL_SCREEN_MAX;e=c("usePolarisPostToastPosition")({isFeed:e,isNarrow:u,isSidecar:a});a=(u=e==null?void 0:e.width)!=null?u:0;b[2]!==e||b[3]!==a?(u=e!=null?babelHelpers["extends"]({},e.absolutePositionStyles,{width:a}):null,b[2]=e,b[3]=a,b[4]=u):u=b[4];var v=u,w=a>o;b[5]!==t?(e=function(){var a=window.setTimeout(function(){t(!1)},n);return function(){return window.clearTimeout(a)}},b[5]=t,b[6]=e):e=b[6];l(e);u=d("PolarisIGAnimate").useFadeTransition({show:g===!0});b[7]!==f?(a=(h||(h=c("ExecutionEnvironment"))).canUseDOM?f?document.body:document.querySelector('[role="main"]'):null,b[7]=f,b[8]=a):a=b[8];b[9]!==v||b[10]!==j||b[11]!==r||b[12]!==s||b[13]!==q||b[14]!==w?(e=function(a,b){return b?k.jsx(d("PolarisIGAnimate").Animated.div,{className:"x10l6tqk xhtitgo",style:babelHelpers["extends"]({},a,v),children:k.jsx("div",{className:(i||(i=c("stylex")))(p.toast,j&&p.toastFamiliar),style:{height:d("PolarisPostConstants").POST_TOAST_HEIGHT},children:k.jsxs("div",{className:"x6s0dn4 x78zum5 x1q0g3np x1szn6h9 xyamay9 x1pi30zi x1l90r2v x1swvt13 xh8yej3",children:[k.jsx("div",{className:"x1iyjqo2",children:k.jsx(c("IGDSText.react").Label,{maxLines:1,textAlign:"start",children:r})}),k.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,onClick:function(){var a;return d("browserHistory").redirect((a=s)!=null?a:"/")},children:q!=null&&w?q:d("PolarisPostStrings").POST_PAGE_ACTION_TEXT})]})})}):null},b[9]=v,b[10]=j,b[11]=r,b[12]=s,b[13]=q,b[14]=w,b[15]=e):e=b[15];g=u(e);b[16]!==a||b[17]!==g?(f=k.jsx(c("BasePortal.react"),{target:a,children:g}),b[16]=a,b[17]=g,b[18]=f):f=b[18];return f}g["default"]=a}),98);
__d("InstagramWebDiscoveryModuleFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2843");b=d("FalcoLoggerInternal").create("instagram_web_discovery_module",a);e=b;g["default"]=e}),98);
__d("PolarisLoggedOutExploreModuleLogger",["CometRouteURL","InstagramWebDiscoveryModuleFalcoEvent","PolarisLogger","PolarisLoggerUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.component,e=a.containermodule,f=a.eventName,g=a.key;c("InstagramWebDiscoveryModuleFalcoEvent").log(function(){var a;return babelHelpers["extends"]({},d("PolarisLogger").getExtra(babelHelpers["extends"]({component:b,containermodule:e,event_name:f},g!=null&&{category:g})),{objid:d("PolarisLoggerUtils").trimAndSanitizeUrl((a=d("CometRouteURL").getWindowURL())!=null?a:"")})})}g.logExploreModuleEvent=a}),98);/*FB_PKG_DELIM*/
__d("MAWAbPropsTypes",[],(function(a,b,c,d,e,f){"use strict";a={noyb_opt_out_flag:[3488,"bool",!1,!1],service_improvement_opt_out_flag:[3664,"bool",!1,!1],msgrw_test_bool:[704,"bool",!1,!1],msgrw_test_int:[705,"int",0,0],msgrw_test_string:[706,"string","test_string","test_string"],msgrw_test_float:[707,"float",1,1],msgrw_icdc_alert_trigger_failure_count:[1233,"int",8,8],msgrw_icdc_cooldown_interval_in_minutes:[1234,"int",35,35],msgrw_icdc_interval_in_minutes:[1236,"int",1500,1500],msgrw_logger_entries:[1298,"int",0,0],msgrw_max_keys:[2453,"int",812,812],msgrw_job_manager_conf:[2667,"string",'{"maxConcurrency": 5,"bestEffortWaitTimeoutSec": 300,"highPriorityQuota":5,"lowPriorityQuota":1}','{"maxConcurrency": 5,"bestEffortWaitTimeoutSec": 300,"highPriorityQuota":5,"lowPriorityQuota":1}'],client_group_participants_limit:[618,"int",257,257],client_group_name_length_limit:[1200,"int",25,25]};f.ABPropConfigs=a}),66);
__d("MAWAbPropsToUI",["MAWAbPropsTypes"],(function(a,b,c,d,e,f,g){"use strict";var h=["client_group_participants_limit","client_group_name_length_limit"];function a(a){var b=a!=null?a:{},c={};h.forEach(function(a){b[a]!=null?c[a]=b[a]:c[a]=d("MAWAbPropsTypes").ABPropConfigs[a][2]});return c}g.prepareAbPropsForUI=a}),98);
__d("MAWDbContact",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;f.NON_CONTACT=a;f.ONE_WAY_CONTACT=b;f.REVERSED_ONE_WAY_CONTACT=c;f.TWO_WAY_CONTACT=d}),66);
__d("MAWDbXMA",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}function b(a){return a}f.convertNumbersToXMAIds=a;f.convertNumberToXMAId=b}),66);
__d("WAProtoConst",[],(function(a,b,c,d,e,f){"use strict";a={REPEATED:1<<6,PACKED:1<<7,REQUIRED:1<<8};b=31;c={INT32:1,INT64:2,UINT32:3,UINT64:4,SINT32:5,SINT64:6,BOOL:7,ENUM:8,FIXED64:9,SFIXED64:10,DOUBLE:11,STRING:12,BYTES:13,MESSAGE:14,FIXED32:15,SFIXED32:16,FLOAT:17};d={VARINT:0,BIT64:1,BINARY:2,BIT32:5};e={ONEOF:"__oneofs__",RESERVED:"__reserved__",RESERVED_TAGS:"tags",RESERVED_FIELDS:"fields"};f.FLAGS=a;f.TYPE_MASK=b;f.TYPES=c;f.ENC=d;f.KEYS=e}),66);
__d("WAArmadilloXMA.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={INFO:0,EYE_OFF:1,NEWS_OFF:2,WARNING:3,PRIVATE:4,NONE:5,MEDIA_LABEL:6,POST_COVER:7,POST_LABEL:8,WARNING_SCREENS:9};b={OPEN_NATIVE:11};c={SINGLE:0,HSCROLL:1,PORTRAIT:3,STANDARD_DXMA:12,LIST_DXMA:15};e={IG_STORY_PHOTO_MENTION:4,IG_SINGLE_IMAGE_POST_SHARE:9,IG_MULTIPOST_SHARE:10,IG_SINGLE_VIDEO_POST_SHARE:11,IG_STORY_PHOTO_SHARE:12,IG_STORY_VIDEO_SHARE:13,IG_CLIPS_SHARE:14,IG_IGTV_SHARE:15,IG_SHOP_SHARE:16,IG_PROFILE_SHARE:19,IG_STORY_PHOTO_HIGHLIGHT_SHARE:20,IG_STORY_VIDEO_HIGHLIGHT_SHARE:21,IG_STORY_REPLY:22,IG_STORY_REACTION:23,IG_STORY_VIDEO_MENTION:24,IG_STORY_HIGHLIGHT_REPLY:25,IG_STORY_HIGHLIGHT_REACTION:26,IG_EXTERNAL_LINK:27,IG_RECEIVER_FETCH:28,FB_FEED_SHARE:1e3,FB_STORY_REPLY:1001,FB_STORY_SHARE:1002,FB_STORY_MENTION:1003,FB_FEED_VIDEO_SHARE:1004,FB_GAMING_CUSTOM_UPDATE:1005,FB_PRODUCER_STORY_REPLY:1006,FB_EVENT:1007,FB_FEED_POST_PRIVATE_REPLY:1008,FB_SHORT:1009,FB_COMMENT_MENTION_SHARE:1010,MSG_EXTERNAL_LINK_SHARE:2e3,MSG_P2P_PAYMENT:2001,MSG_LOCATION_SHARING:2002,MSG_LOCATION_SHARING_V2:2003,MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:2004,MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:2005,MSG_RECEIVER_FETCH:2006,MSG_IG_MEDIA_SHARE:2007,MSG_GEN_AI_SEARCH_PLUGIN_RESPONSE:2008,MSG_REELS_LIST:2009,MSG_CONTACT:2010,MSG_THREADS_POST_SHARE:2011,MSG_FILE:2012,MSG_AVATAR_DETAILS:2013,MSG_AI_CONTACT:2014,MSG_MEMORIES_SHARE:2015,RTC_AUDIO_CALL:3e3,RTC_VIDEO_CALL:3001,RTC_MISSED_AUDIO_CALL:3002,RTC_MISSED_VIDEO_CALL:3003,RTC_GROUP_AUDIO_CALL:3004,RTC_GROUP_VIDEO_CALL:3005,RTC_MISSED_GROUP_AUDIO_CALL:3006,RTC_MISSED_GROUP_VIDEO_CALL:3007,DATACLASS_SENDER_COPY:4e3};f={};var i={};f.internalSpec={associatedMessage:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,(d=d("WACommon.pb")).SubProtocolSpec],targetType:[2,h.TYPES.ENUM,e],targetUsername:[3,h.TYPES.STRING],targetId:[4,h.TYPES.STRING],targetExpiringAtSec:[5,h.TYPES.INT64],xmaLayoutType:[6,h.TYPES.ENUM,c],ctas:[7,h.FLAGS.REPEATED|h.TYPES.MESSAGE,i],previews:[8,h.FLAGS.REPEATED|h.TYPES.MESSAGE,d.SubProtocolSpec],titleText:[9,h.TYPES.STRING],subtitleText:[10,h.TYPES.STRING],maxTitleNumOfLines:[11,h.TYPES.UINT32],maxSubtitleNumOfLines:[12,h.TYPES.UINT32],favicon:[13,h.TYPES.MESSAGE,d.SubProtocolSpec],headerImage:[14,h.TYPES.MESSAGE,d.SubProtocolSpec],headerTitle:[15,h.TYPES.STRING],overlayIconGlyph:[16,h.TYPES.ENUM,a],overlayTitle:[17,h.TYPES.STRING],overlayDescription:[18,h.TYPES.STRING],sentWithMessageId:[19,h.TYPES.STRING],messageText:[20,h.TYPES.STRING],headerSubtitle:[21,h.TYPES.STRING],xmaDataclass:[22,h.TYPES.STRING],contentRef:[23,h.TYPES.STRING]};i.internalSpec={buttonType:[1,h.TYPES.ENUM,b],title:[2,h.TYPES.STRING],actionUrl:[3,h.TYPES.STRING],nativeUrl:[4,h.TYPES.STRING],ctaType:[5,h.TYPES.STRING],actionContentBlob:[6,h.TYPES.STRING]};g.EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH=a;g.EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE=b;g.EXTENDED_CONTENT_MESSAGE_XMA_LAYOUT_TYPE=c;g.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE=e;g.ExtendedContentMessageSpec=f;g.ExtendedContentMessage$CTASpec=i}),98);
__d("MAWParseXMAFBConfig",["WAArmadilloXMA.pb","gkx"],(function(a,b,c,d,e,f,g){"use strict";b=new Set([(a=d("WAArmadilloXMA.pb")).EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY,a.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT,c("gkx")("23929")?d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH:null].filter(Boolean));g.FB_SUPPORTED_TARGET_TYPES=b}),98);
__d("WAJobDefinitions",["WAGlobals"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a==null)return;return{priority:a.priority,maxTimeoutMs:a.maxTimeoutMs,jobId:a.jobId}}b=function(){return{queryGroups:function(a,b){var c;b=h(b);a==null?c={type:"all"}:c={type:"array",groups:a};return{type:"queryGroups",args:c,scheduleConfig:(a=b)!=null?a:void 0}},computeAndUploadICDCInfo:function(a,b,c,d){d=h(d);return{type:"computeAndUploadICDCInfo",args:{reason:a,sequence:c,caller:b},scheduleConfig:(a=d)!=null?a:void 0}},syncdSyncAllCollections:function(a){a=h(a);return{type:"syncdSyncAllCollections",args:{},scheduleConfig:(a=a)!=null?a:void 0}},requestAllSyncdMissingKeys:function(a){a=h(a);return{type:"requestAllSyncdMissingKeys",args:{},scheduleConfig:(a=a)!=null?a:void 0}}}};c=b();function i(a,b){var c=b.scheduleConfig,e=babelHelpers.objectWithoutPropertiesLoose(b,["scheduleConfig"]);c={type:a,args:{},scheduleConfig:c};b.externalIdJob&&(c.args.externalId=d("WAGlobals").getDependencies().generateExternalId());c.args=babelHelpers["extends"]({},c.args,e);b.uniqueJob&&(c.uniqKey=a);return c}function a(a,b){return i(a,b)}g.serializeJobScheduledConfig=h;g.createJobSerializers=b;g.jobSerializers=c;g.createStartJobInfoGeneric=i;g.createStartJobInfo=a}),98);
__d("MAWJobDefinitions",["MAWExternalId","WAJobDefinitions"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a}function b(a){return a}e=d("WAJobDefinitions").createJobSerializers();f=babelHelpers["extends"]({},e,{acceptGroupInvite:function(a,b,c,e,f,g){g=d("WAJobDefinitions").serializeJobScheduledConfig(g);return{args:{chatId:a,inviteCode:e,invitedParticipantUserId:c,inviteExpirationTs:f,inviterUserId:b},scheduleConfig:(a=g)!=null?a:void 0,type:"acceptGroupInvite"}},addGroupParticipants:function(a,b,c){c=d("WAJobDefinitions").serializeJobScheduledConfig(c);return{args:{group:a,users:b},scheduleConfig:(a=c)!=null?a:void 0,type:"addGroupParticipants"}},deleteGroups:function(a,b){b=d("WAJobDefinitions").serializeJobScheduledConfig(b);return{args:{groups:a},scheduleConfig:(a=b)!=null?a:void 0,type:"deleteGroups"}},deleteMsgsForMe:function(a,b){b=d("WAJobDefinitions").serializeJobScheduledConfig(b);return{args:{msgIds:a},scheduleConfig:(a=b)!=null?a:void 0,type:"deleteMsgsForMe"}},demoteGroupParticipants:function(a,b,c){c=d("WAJobDefinitions").serializeJobScheduledConfig(c);return{args:{group:a,users:b},scheduleConfig:(a=c)!=null?a:void 0,type:"demoteGroupParticipants"}},downloadAndHandleMedia:function(a,b,c,e,f,g,h){f=d("WAJobDefinitions").serializeJobScheduledConfig(h);return{args:{hash:b,metricInstanceKeys:g,msgType:e,protocolMsgId:a,qplEntryPoint:c},scheduleConfig:(h=f)!=null?h:void 0,type:"downloadAndHandleMedia"}},forwardMsg:function(a,b,c,e,f,g,h){g=d("WAJobDefinitions").serializeJobScheduledConfig(g);return{args:{args:h,chatJid:a,ephemeralSetting:c,externalId:(h=e)!=null?h:d("MAWExternalId").generateExternalId(),isFirstMsg:f,protocolMsgId:b},scheduleConfig:(a=g)!=null?a:void 0,type:"forwardMsg"}},getCurrentUserDeviceList:function(a){a=d("WAJobDefinitions").serializeJobScheduledConfig(a);return{args:void 0,scheduleConfig:(a=a)!=null?a:void 0,type:"getCurrentUserDeviceList"}},getSpams:function(a){a=d("WAJobDefinitions").serializeJobScheduledConfig(a);return{args:void 0,scheduleConfig:(a=a)!=null?a:void 0,type:"getSpams"}},handleFutureproofMsg:function(a){a=d("WAJobDefinitions").serializeJobScheduledConfig(a);return{args:{},scheduleConfig:(a=a)!=null?a:void 0,type:"handleFutureproofMsg"}},handleSpamMsg:function(a){a=d("WAJobDefinitions").serializeJobScheduledConfig(a);return{args:void 0,scheduleConfig:(a=a)!=null?a:void 0,type:"handleSpamMsg"}},igdReportUserSpam:function(a,b){var c=a.chatJid,e=a.context,f=a.frxParams,g=a.frxTags,h=a.msgs,i=a.spamFlow;a=a.userJid;b=d("WAJobDefinitions").serializeJobScheduledConfig(b);return{args:{chatJid:c,context:e,frxParams:f,frxTags:g,msgs:h,spamFlow:i,userJid:a},scheduleConfig:(c=b)!=null?c:void 0,type:"igdReportUserSpam"}},igdSendMsg:function(a,b){var c=a.actorID;a=a.taskID;b=d("WAJobDefinitions").serializeJobScheduledConfig(b);return{args:{actorID:c,taskID:a},scheduleConfig:(c=b)!=null?c:void 0,type:"igdSendMsg"}},leaveGroups:function(a,b){b=d("WAJobDefinitions").serializeJobScheduledConfig(b);return{args:{groups:a},scheduleConfig:(a=b)!=null?a:void 0,type:"leaveGroups"}},linkReactionsToMsgs:function(a,b){b=d("WAJobDefinitions").serializeJobScheduledConfig(b);return{args:{externalIds:a},scheduleConfig:(a=b)!=null?a:void 0,type:"linkReactionsToMsgs"}},markThreadAsRead:function(a,b,c,e,f,g,h){h=d("WAJobDefinitions").serializeJobScheduledConfig(h);return{args:{chatJid:a,isBlocked:c,isReadReceiptsDisabled:g,isRestricted:e,relationship:b,upTo:f},scheduleConfig:(a=h)!=null?a:void 0,type:"markThreadAsRead",uniqKey:f==null?void 0:f.externalId}},postBackupWriteCompletionHook:function(a){return{args:{traceIdArray:a},type:"postBackupWriteCompletionHook"}},promoteGroupParticipants:function(a,b,c){c=d("WAJobDefinitions").serializeJobScheduledConfig(c);return{args:{group:a,users:b},scheduleConfig:(a=c)!=null?a:void 0,type:"promoteGroupParticipants"}},removeGroupParticipants:function(a,b,c){c=d("WAJobDefinitions").serializeJobScheduledConfig(c);return{args:{group:a,users:b},scheduleConfig:(a=c)!=null?a:void 0,type:"removeGroupParticipants"}},reportUserSpam:function(a,b,c,e,f,g,h,i,j,k){j=d("WAJobDefinitions").serializeJobScheduledConfig(j);return{args:{chatJid:c,context:g,frxParams:h,frxTags:f,isIgd:e,openMsgs:k,reportedMessageId:i,spamFlow:b,userJid:a},scheduleConfig:(c=j)!=null?c:void 0,type:"reportUserSpam"}},resendWrittenAppData:function(a,b){b=d("WAJobDefinitions").serializeJobScheduledConfig(b);return{args:{appDataExternalId:a},scheduleConfig:(a=b)!=null?a:void 0,type:"resendWrittenAppData"}},restoreMessagesFromEncryptedBackups:function(a,b,c,e,f,g,h,i,j,k,l,m,n){n=d("WAJobDefinitions").serializeJobScheduledConfig(n);return{args:{hasMoreAfter:f,hasMoreBefore:e,instanceKey:k,isPointQuery:g,messages:c,minMsgId:h,optimisticMsgs:l,startSortKey:j,taskSource:m,threadId:b,traceId:i,transportKey:a},scheduleConfig:(f=n)!=null?f:void 0,type:"restoreMessagesFromEncryptedBackups"}},restoreProtobufsFromEncryptedBackups:function(a,b,c,e,f,g,h,i,j,k,l,m){m=d("WAJobDefinitions").serializeJobScheduledConfig(m);return{args:{echoMessages:a,hasMoreAfter:g,hasMoreBefore:f,instanceKey:l,isPointQuery:h,messages:e,minMsgId:i,referenceTimestamp:k,requestId:j,threadId:c,transportKey:b},scheduleConfig:(a=m)!=null?a:void 0,type:"restoreProtobufsFromEncryptedBackups"}},revokeMsgs:function(a,b){b=d("WAJobDefinitions").serializeJobScheduledConfig(b);return{args:{msgIds:a},scheduleConfig:(a=b)!=null?a:void 0,type:"revokeMsgs"}},sendAppData:function(a,b,c){c=d("WAJobDefinitions").serializeJobScheduledConfig(c);return{args:{args:a,externalId:(a=b)!=null?a:d("MAWExternalId").generateExternalId()},scheduleConfig:(b=c)!=null?b:void 0,type:"sendAppData"}},sendEditMsg:function(a,b,c){c=d("WAJobDefinitions").serializeJobScheduledConfig(c);return{args:{args:a,externalId:(a=b)!=null?a:d("MAWExternalId").generateExternalId()},scheduleConfig:(b=c)!=null?b:void 0,type:"sendEditMsg"}},sendEphemeralSettingMsg:function(a,b,c,e){e=d("WAJobDefinitions").serializeJobScheduledConfig(e);return{args:{args:b,chatJid:a,externalId:(b=c)!=null?b:d("MAWExternalId").generateExternalId()},scheduleConfig:(a=e)!=null?a:void 0,type:"sendEphemeralSettingMsg"}},sendGroupInviteMsg:function(a,b,c){c=d("WAJobDefinitions").serializeJobScheduledConfig(c);return{args:{args:a,externalId:(a=b)!=null?a:d("MAWExternalId").generateExternalId()},scheduleConfig:(b=c)!=null?b:void 0,type:"sendGroupInviteMsg"}},sendMediaMsg:function(a,b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){q=d("WAJobDefinitions").serializeJobScheduledConfig(q);return{args:{args:{duration:i,ephemeralSetting:k,filename:s,height:f,isFirstMsg:o,isForwarded:n,isPtt:j,jpegThumbnail:c,jpegThumbnailHeight:h,jpegThumbnailWidth:g,offlineAttachmentId:t,openMessageOtid:m,quote:l,s2sInstanceKey:u,source:r,width:e},attachmentType:v,chatJid:a,externalId:(i=p)!=null?i:d("MAWExternalId").generateExternalId(),file:b},scheduleConfig:(k=q)!=null?k:void 0,type:"sendMediaMsg"}},sendMsg:function(a,b,c,e){e=d("WAJobDefinitions").serializeJobScheduledConfig(e);return{args:{args:b,chatJid:a,externalId:(b=c)!=null?b:d("MAWExternalId").generateExternalId()},scheduleConfig:(a=e)!=null?a:void 0,type:"sendMsg"}},sendRavenActionMsg:function(a,b,c,e){e=d("WAJobDefinitions").serializeJobScheduledConfig(e);return{args:{args:b,chatJid:a,externalId:(b=c)!=null?b:d("MAWExternalId").generateExternalId()},scheduleConfig:(a=e)!=null?a:void 0,type:"sendRavenActionMsg"}},sendReactionMsg:function(a,b,c,e,f,g,h){g=d("WAJobDefinitions").serializeJobScheduledConfig(g);return{args:{args:{groupingKey:"",reaction:e,reactToAuthor:c,reactToProtocolMsgId:b,source:h},chatJid:a,externalId:(e=f)!=null?e:d("MAWExternalId").generateExternalId()},scheduleConfig:(c=g)!=null?c:void 0,type:"sendReactionMsg"}},sendWrittenAppData:function(a,b){b=d("WAJobDefinitions").serializeJobScheduledConfig(b);return{args:{appDataExternalId:a},scheduleConfig:(a=b)!=null?a:void 0,type:"sendWrittenAppData"}},sendWrittenMsg:function(a,b,c,e){c===void 0&&(c="message");e=d("WAJobDefinitions").serializeJobScheduledConfig(e);return{args:{protocolMsgId:a,s2sInstanceKey:b,type:c},scheduleConfig:(a=e)!=null?a:void 0,type:"sendWrittenMsg"}},sendXMAShareMsg:function(a,b,c,e,f,g,h,i,j,k){k=d("WAJobDefinitions").serializeJobScheduledConfig(k);return{args:{args:g,associatedMsgContent:f,associatedMsgContentExternalId:(g=i)!=null?g:d("MAWExternalId").generateExternalId(),chatJid:a,faviconFile:e,headerFile:c,previewFile:b,xmaArgs:j,xmaMsgExternalId:(f=h)!=null?f:d("MAWExternalId").generateExternalId()},scheduleConfig:(i=k)!=null?i:void 0,type:"sendXMAShareMsg"}},setGroupSubject:function(a,b,c){c=d("WAJobDefinitions").serializeJobScheduledConfig(c);return{args:{group:a,subject:b},scheduleConfig:(a=c)!=null?a:void 0,type:"setGroupSubject"}},startInstamadilloDYI:function(a,b){b=d("WAJobDefinitions").serializeJobScheduledConfig(b);return{args:{qplInstanceKey:a},scheduleConfig:(a=b)!=null?a:void 0,type:"startInstamadilloDYI"}},updateBackupEntFbidForMedia:function(a,b,c,e){e=d("WAJobDefinitions").serializeJobScheduledConfig(e);return{args:{backupEntFbid:b,deliveryObjectId:a,traceId:c},scheduleConfig:(b=e)!=null?b:void 0,type:"updateBackupEntFbidForMedia"}},uploadMessagesBackup:function(a,b,c,e,f,g,h,i,j){j=d("WAJobDefinitions").serializeJobScheduledConfig(j);return{args:{messageIds:a,oldTraceIdMap:g,pendingStanzaIds:c,reactionIds:e,threadIds:b,uploadTrackingInstanceMap:h,xmaIds:f},scheduleConfig:(a=j)!=null?a:void 0,type:"uploadMessagesBackup",uniqKey:i}},uploadRetroactiveMessageBatch:function(a,b,c,d){return{args:{chatId:d,dbMsgArray:a,includeOffset:b,msgOffset:c},type:"uploadRetroactiveMessageBatch"}},uploadRetroactiveThreadsAndMessages:function(a){a=d("WAJobDefinitions").serializeJobScheduledConfig(a);return{args:void 0,scheduleConfig:(a=a)!=null?a:void 0,type:"uploadRetroactiveThreadsAndMessages"}}});function c(a,b){return d("WAJobDefinitions").createStartJobInfoGeneric(a,b)}g.toThreadJidPrimaryId=a;g.toEncodedEchoMessage=b;g.jobSerializers=f;g.createStartJobInfo=c}),98);
__d("MAWODSProxy",["CurrentMessengerUser","MAWBridge","ODS","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i=!((b=c("gkx")("23949"))!=null?b:!1);function a(a,b){var c=a.amount,e=a.entity;a=a.key;b===void 0&&(b=!0);i?(h||(h=d("ODS"))).bumpEntityKey(3185,e,a+"."+(d("CurrentMessengerUser").getAppID()||"unknown"),c):d("MAWBridge").getBridge().fireAndForget("event","odsBumpEntityKey",{amount:c,entity:e,key:a},b)}g.odsBumpEntityKey=a}),98);
__d("WAOdsEnums",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({WA_CONNECTIVITY:"wa_connectivity",GET_DEVICES:"armadillo_get_devices",DECRYPTION:"armadillo_msg_decryption",DEVICE_REREG_CHECK:"armadillo_device_rereg_check",DEVICE_REGISTRATION:"armadillo_device_registration",DEVICE_REGISTRATION_NON_EMPLOYEE:"armadillo_device_registration_non_employee",PHASH_MISMATCH:"phash_mismatch",WEB_PLACEHOLDER:"armadillo_web_placeholder",PREKEY_UPLOAD:"armadillo_prekey_upload",PREKEY_DIGEST:"armadillo_prekey_digest",C2C_META_SYNC:"armadillo_c2c_meta_sync",ADMIN_MESSAGE:"armadillo_admin_message",PREVIEW_SNIPPET:"armadillo_snippet",TOTAL_INCOMING_MESSAGE:"armadillo_total_incoming_message",COMPARE_IDENTITY:"armadillo_compare_identity",GET_PREKEY:"armadillo_get_prekey",SECURITY_ALERT_FOR_CONTACT:"armadillo_security_alert_for_contact",SECURITY_ALERT_FOR_SELF:"armadillo_security_alert_for_self",MSG_SEND:"armadillo_message_send",RETRY_MISSING_MSG:"armadillo_retry_missing_msg",REGISTRATION_TYPE:"aramdillo_registration_type",CLOCK_SKEW_UPDATE:"clock_skew_update",STREAM_ERROR:"wajs_stream_error",ICDC:"wajs_icdc",LOAD_MORE_NO_ORIGINAL_MSG_IN_MAW:"load_more_no_original_msg_in_maw",WA_DISCONNECT:"armadillo_disconnect",GROUP_CREATE:"armadillo_group_create",GROUP_DELETE:"armadillo_group_delete",GROUP_ADD_PARTICIPANT:"armadillo_group_add_participant",GROUP_PROMOTE_PARTICIPANT:"armadillo_group_promote_participant",GROUP_DEMOTE_PARTICIPANT:"armadillo_group_demote_participant",GROUP_REMOVE_PARTICIPANT:"armadillo_group_remove_participant",GROUP_LEAVE_PARTICIPANT:"armadillo_group_leave_participant",SEND_READ_RECEIPTS:"armadillo_send_read_receipts",MESSAGE_MISSING_THREAD_JID:"MESSAGE_MISSING_THREAD_JID",MESSAGE_MISSING:"MESSAGE_MISSING",MAW_NON_TIMEOUT:"maw_non_timeout",MAW_TIMEOUT:"maw_timeout",MAW_WEBWORKER_LOG_TEST:"maw_webworker_log_test",PROTOCOL_QUEUE:"protocol_queue",WA_FAIL_STANZA_QUEUE_ITEM:"wa_fail_stanza_queue_item",WA_QUERY_GROUP:"wa_query_group",MAW_MISMATCH_PARTICIPANT:"maw_mismatch_participant",MAW_ONE_TO_ONE_THREAD_PARTICIPANT_CLEANUP:"maw_one_to_one_thread_participant_cleanup",MAW_THREADID_DEPRECATION:"maw_threadid_deprecation",MAW_THREADID_DEPRECATION_DETAILS:"maw_threadid_deprecation_details",MAW_DELETE_DANGLING_PARTICIPANTS:"maw_delete_dangling_participants",S2S_QPL_MISSING_INSTANCE_KEY:"s2s_qpl_missing_instance_key"});f.Entity=a}),66);
__d("WACustomError",[],(function(a,b,c,d,e,f){"use strict";var g=Object.create(Error.prototype,{constructor:{value:void 0,writable:!0,configurable:!0}});function a(a,b,c){b===void 0&&(b=!0);function d(c){var d=Error.call(this,c);this.message=c;d.name=a;this.name=a;b&&(this.stack=d.stack)}d.prototype=Object.create(c?c.prototype:g);d.prototype.constructor=d;return d}function h(a){if(a.length===0)return"No errors";return a.length===1?a[0].message:a.map(function(a){return"- "+a.message}).join("\n")}e=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=c!=null&&c.length>0?c:h(b);c=a.call(this,c)||this;c.errors=b;return c}return b}(a("AggregateError",!0));var i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a("TimeoutError",!1)),j=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.code=c;return a}return a}(a("HttpError",!1)),k=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a("UnimplementedMethod")),l=!1;function b(a){if(a==null||a.name!=="QuotaExceededError")throw a;l=!0}function c(){return l}function d(a){return JSON.stringify(a,Object.getOwnPropertyNames(a))}var m=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.inner=c;return a}return a}(babelHelpers.wrapNativeSuper(Error));f.customError=a;f.AggregateError=e;f.TimeoutError=i;f.HttpError=j;f.UnimplementedMethod=k;f.supressQuotaExceededError=b;f.hasSupressedQuotaExceededError=c;f.obtainErrorSummary=d;f.WrappedError=m}),66);
__d("WAAbortError",["WACustomError"],(function(a,b,c,d,e,f,g){"use strict";b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WACustomError").customError("AbortError"));var h="AbortError";function a(a){return function(b){if(b.name===h)return a(b);else throw b}}g.AbortError=b;g.ABORT_ERROR=h;g.catchAbort=a}),98);
__d("WAPromiseDelays",["Promise","WAAbortError"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,c){return new(h||(h=b("Promise")))(function(b,e){if(c==null?void 0:c.aborted)throw new(d("WAAbortError").AbortError)();var f=setTimeout(g,a);c==null?void 0:c.addEventListener("abort",h);function g(){c==null?void 0:c.removeEventListener("abort",h),b()}function h(){c==null?void 0:c.removeEventListener("abort",h),clearTimeout(f),e(new(d("WAAbortError").AbortError)())}})}function c(a,c,d){return new(h||(h=b("Promise")))(function(b,e){var f=setTimeout(function(){try{b(d())}catch(a){e(a)}},c);a.then(function(a){clearTimeout(f),b(a)},function(a){clearTimeout(f),e(a)})})}g.delayMs=a;g.withTimeout=c}),98);
__d("MAWMaybeWithTimeout",["MAWODSProxy","WAOdsEnums","WAPromiseDelays"],(function(a,b,c,d,e,f,g){"use strict";function h(){return!0}function a(a,b,c,e){return h()?d("WAPromiseDelays").withTimeout(a.then(function(a){var b;d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_NON_TIMEOUT,key:(b=e)!=null?b:"unknown"});return a}),b,function(){var a;d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_TIMEOUT,key:(a=e)!=null?a:"unknown"});return c()}):a}g.maybeWithTimeout=a}),98);
__d("WAJobOrchestratorTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({SKIP:"SKIP_PRIORITIZATION",UI_ACTION:"UI_ACTION",LOW:"LOW",HIGH:"HIGH",OFFLINE:"OFFLINE",HISTORY_SYNC:"HISTORY_SYNC",BEST_EFFORT:"BEST_EFFORT"});c=1;d=a.LOW;e=10*1e3;f.JOB_PRIORITY=a;f.DEFAULT_CONCURRENCY=c;f.DEFAULT_JOB_PRIORITY=d;f.DEFAULT_JOB_TIMEOUT_MS=e}),66);
__d("MAWUIJob",["MAWBridge","WAJobOrchestratorTypes"],(function(a,b,c,d,e,f,g){"use strict";var h={priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION};a={fireAndForget:function(a){d("MAWBridge").getBridge().fireAndForget("backend","runJobFireAndForget",babelHelpers["extends"]({},a,{scheduleConfig:(a=a.scheduleConfig)!=null?a:h}))},waitUntilCompleted:function(a){a=d("MAWBridge").getBridge().sendAndReceive("backend","runJobWaitUntilCompleted",babelHelpers["extends"]({},a,{scheduleConfig:(a=a.scheduleConfig)!=null?a:h}));return a},waitUntilPersisted:function(a){a=d("MAWBridge").getBridge().sendAndReceive("backend","runJobWaitUntilPersisted",babelHelpers["extends"]({},a,{scheduleConfig:(a=a.scheduleConfig)!=null?a:h}));return a}};g.UIJobStarters=a}),98);
__d("MAWTimedJob",["FBLogger","MAWMaybeWithTimeout","MAWUIJob","MAWWaitForBackendSetup"],(function(a,b,c,d,e,f,g){"use strict";var h=6e4;a={fireAndForget:function(a,b){b===void 0&&(b=h);return d("MAWMaybeWithTimeout").maybeWithTimeout(d("MAWWaitForBackendSetup").waitForBackendSetup(a.type).then(function(){return d("MAWUIJob").UIJobStarters.fireAndForget(a)}),b,function(){throw c("FBLogger")("mpf_web_foundations").mustfixThrow("Failed to complete execution of job %s in time",a.type)},a.type)},waitUntilCompleted:function(a,b){b===void 0&&(b=h);return d("MAWMaybeWithTimeout").maybeWithTimeout(d("MAWWaitForBackendSetup").waitForBackendSetup(a.type).then(function(){return d("MAWUIJob").UIJobStarters.waitUntilCompleted(a)}),b,function(){throw c("FBLogger")("mpf_web_foundations").mustfixThrow("Failed to complete execution of job %s in time",a.type)},a.type)},waitUntilPersisted:function(a,b){b===void 0&&(b=h);return d("MAWMaybeWithTimeout").maybeWithTimeout(d("MAWWaitForBackendSetup").waitForBackendSetup(a.type).then(function(){return d("MAWUIJob").UIJobStarters.waitUntilPersisted(a)}),b,function(){throw c("FBLogger")("mpf_web_foundations").mustfixThrow("Failed to complete execution of job %s in time",a.type)},a.type)}};g.DEFAULT_TIMEOUT_MS=h;g.TimedUIJobStarters=a}),98);
__d("WAArrayBufferUtils",["Promise","WAErr"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=new ArrayBuffer(a.length);b=new Uint8Array(b);var c,d;for(c=0,d=a.length;c<d;c++)b[c]=a.charCodeAt(c);return b.buffer}function d(a,c){c===void 0&&(c=5e5);return new(h||(h=b("Promise")))(function(b,d){var e=a.length,f=new ArrayBuffer(e),g=new Uint8Array(f),h=0;setTimeout(i,0);function i(){var d=Math.min(h+c,e);while(h<d)g[h]=a.charCodeAt(h),h++;if(h===e){b(f);return}setTimeout(i,16)}})}function e(a){return String.fromCharCode.apply(null,new Uint8Array(a))}var i=8388607;function f(a,b){a=new Uint8Array(a);if(b>i)throw c("WAErr")("Divisor is too big");var d=0;for(var e=0;e<a.length;++e)d=((d<<8)+a[e])%b;return d}function j(a){a=a.map(function(a){return new Uint8Array(a)});var b=a.reduce(function(a,b){return a+b.byteLength},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(b,a);return a+b.byteLength},0);return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}function k(a,b){a=new Uint8Array(a);b=new Uint8Array(b);return l(a,b)}function l(a,b){if(a.byteLength!==b.byteLength)return!1;for(var c=0;c!==a.byteLength;c++)if(a[c]!==b[c])return!1;return!0}g.stringToArrayBuffer=a;g.largeStringToArrayBuffer=d;g.arrayBufferToString=e;g.arrayBufferMod=f;g.concatBuffers=j;g.arrayBuffersEqualUNSAFE=k;g.uint8ArraysEqualUNSAFE=l}),98);
__d("MAWVaultMaterials",["FBLogger","WAArrayBufferUtils","randomInt","tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=null;function j(a){i=a}function k(){return h}function l(a){h=a}function a(){h=null,i=null}function m(){return o()!=null&&k()!=null}function n(){var a=1e9,b=9999999999;return c("randomInt")(a,b)+"##"+c("randomInt")(a,b)}function o(){return i}function p(){if(!m())throw c("FBLogger")("mpf_web_foundations").mustfixThrow("Vault materials are null");return{encryptionKey:h,prefixAndSuffix:i}}function b(a){var b=m();c("FBLogger")("mpf_web_foundations").debug("Setting vault materials -- vaultMaterials=%s, previouslySetup=%s",Boolean(a).toString(),b);if(!b){q((b=a)!=null?b:{encryptionKey:d("tweetnacl").randomBytes(32).buffer,prefixAndSuffix:n()})}return p()}function q(a){var b=a.encryptionKey;a=a.prefixAndSuffix;if(b==null||a==null)throw c("FBLogger")("mpf_web_foundations").mustfixThrow("Cannot set null values for encryption key and prefix");l(b);j(a)}function e(){return r(p())}function r(a){var b=a.encryptionKey;a=a.prefixAndSuffix;if(a!=null&&b!=null){b=d("WAArrayBufferUtils").arrayBufferToString(b);return JSON.stringify({encryptionKey:b,prefixAndSuffix:a})}else return""}function f(a){if(a==="")return null;else{a=JSON.parse(a);if(a.encryptionKey==null||a.prefixAndSuffix==null)throw c("FBLogger")("mpf_web_foundations").mustfixThrow("Vault materials were not in correct format");var b=d("WAArrayBufferUtils").stringToArrayBuffer(a.encryptionKey);a=a.prefixAndSuffix;return{encryptionKey:b,prefixAndSuffix:a}}}g.TEST_ONLY_clearVaultMaterials=a;g.hasVaultBeenSetup=m;g.getVaultPrefixAndSuffix=o;g.getVaultMaterials=p;g.initializeVaultMaterials=b;g.materialsToString=e;g.fromMaterialsToString=r;g.fromStringToMaterials=f}),98);
__d("MAWVault",["FBLogger","MAWKeychainNaClCrypto","MAWVaultMaterials","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=c("gkx")("23967")?new Map():null,i=c("gkx")("23967")?new Map():null;function j(a){if(!c("gkx")("23909"))return!1;var b=d("MAWVaultMaterials").getVaultPrefixAndSuffix();b=b==null?!1:new RegExp(b+".*"+b).test(a);return b}function k(a,b){b===void 0&&(b=!1);if(!c("gkx")("23909"))return a;if(j(a)){var e=d("MAWVaultMaterials").getVaultMaterials(),f=e.encryptionKey;e=e.prefixAndSuffix;if(e==null)throw c("FBLogger")("mpf_web_foundations").mustfixThrow("Vault prefix and suffix should not be null when unvaulting");var g=new RegExp(e+"(.*)"+e);g=a.match(g);if(g==null||g.length!=2)throw c("FBLogger")("mpf_web_foundations").mustfixThrow("Could not retrieve inner value to unvault");if(f==null)throw c("FBLogger")("mpf_web_foundations").mustfixThrow("Vault encryption key was null before unvault");g=g[1];e=""+e+g+e;var h=m(f,g);return a.replace(e,function(){return h})}if(b){f=new RegExp("^[0-9]{10}##[0-9]{10}.*[0-9]{10}##[0-9]{10}$").test(a);if(f)throw c("FBLogger")("mpf_web_foundations").mustfixThrow("Encountered vaulted value with incorrect key.")}return a}function a(a){if(a==="")return a;if(!c("gkx")("23909"))return a;if(!d("MAWVaultMaterials").hasVaultBeenSetup()){c("FBLogger")("mpf_web_foundations").mustfix("Attempted to vault value while materials were not setup");return a}if(j(a)){c("FBLogger")("mpf_web_foundations").warn("Attempted to vault value that's already been vaulted");return a}var b=d("MAWVaultMaterials").getVaultMaterials(),e=b.encryptionKey;b=b.prefixAndSuffix;if(b==null||e==null)throw c("FBLogger")("mpf_web_foundations").mustfixThrow("Cannot vault before vault materials are set");e=l(e,a);return""+b+e+b}function b(a){if(!c("gkx")("23909"))return a;if(!j(a))throw c("FBLogger")("mpf_web_foundations").mustfixThrow("Value should be vaulted");return k(a)}function l(a,b){var c=h==null?void 0:h.get(b);if(c!=null)return c;c=new TextEncoder().encode(b).buffer;a=d("MAWKeychainNaClCrypto").encryptTweetNaCl(a,new Uint8Array(c));h==null?void 0:h.set(b,a);i==null?void 0:i.set(a,b);return a}function m(a,b){var c=i==null?void 0:i.get(b);if(c!=null)return c;c=new TextDecoder().decode(d("MAWKeychainNaClCrypto").decryptTweetNaCl(a,b));h==null?void 0:h.set(c,b);i==null?void 0:i.set(b,c);return c}g.isVaulted=j;g.unvault=k;g.vault=a;g.unvaultOrThrow=b}),98);
__d("MAWAckLevel",["LSIntEnum","LSMessageSendStatus"],(function(a,b,c,d,e,f,g){"use strict";var h,i={clock:0,contentGone:-3,contentTooBig:-4,contentUnuploadable:-5,expired:-2,failed:-1,inactiveReceived:-6,played:4,read:3,received:2,senderBackFillSent:-7,sent:1};function a(a){switch(a){case i.clock:return(h||(h=d("LSIntEnum"))).ofNumber(1);case i.sent:case i.received:case i.read:case i.played:return(h||(h=d("LSIntEnum"))).ofNumber(2);default:return(h||(h=d("LSIntEnum"))).ofNumber(4)}}function b(a){switch(a){case i.clock:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").SENDING_TO_SERVER);case i.sent:case i.received:case i.read:case i.played:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").SERVER_RECEIVED);default:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").NON_RETRIABLE_ERROR)}}g.ACK=i;g.levelToMessagingSendStatusV2=a;g.levelToMessagingSendStatus=b}),98);
__d("MAWContactRelationshipType",["I64","LSContactBitOffset","MAWDbContact"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("LSContactBitOffset").hasWithDefault(64,a,!0);a=(h||(h=d("I64"))).ge(a.contactViewerRelationship,h.of_string("2"));if(a&&b)return d("MAWDbContact").ONE_WAY_CONTACT;else if(!a&&!b)return d("MAWDbContact").REVERSED_ONE_WAY_CONTACT;else if(a&&!b)return d("MAWDbContact").TWO_WAY_CONTACT;return d("MAWDbContact").NON_CONTACT}g.getContactRelationshipType=a}),98);
__d("MAWEphemeralConsts",["WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";a=300;b=600;c=900;e=1800;d=Math.imul((f=d("WATimeUtils")).HOUR_SECONDS,6);var h=Math.imul(f.HOUR_SECONDS,12),i=Math.imul(f.DAY_SECONDS,14),j=1e3,k=5,l=10,m=30,n=60,o=d;g.fiveMinutesInSeconds=a;g.tenMinutesInSeconds=b;g.fifteenMinutesInSeconds=c;g.thirtyMinutesInSeconds=e;g.oneHourInSeconds=f.HOUR_SECONDS;g.sixHoursInSeconds=d;g.twelveHoursInSeconds=h;g.oneDayInSeconds=f.DAY_SECONDS;g.ephemeralMaxDelectionWindowForUnseenMessage=i;g.msPerSec=j;g.fiveSeconds=k;g.tenSeconds=l;g.thirtySeconds=m;g.oneMinuteInSeconds=n;g.ephemeralReportingWindowInSeconds=o}),98);
__d("MAWTimeUtils",["FBLogger","I64","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return(h||(h=d("I64"))).of_float(a*1e3)}function j(a){a=Number(a);return a<=d("WATimeUtils").MAX_INT&&a!==-1e3&&a!==0}function a(a){if(j(a)){Number(a)!==-1&&c("FBLogger")("messenger_e2ee_web").mustfix("Invalid timestamp supplied to millisTimeToTimestamp: %s",Number(a));return i(a)}return(h||(h=d("I64"))).of_float(a)}function b(a,b){var c=Date.now();c=c-b*24*60*60*1e3;b=d("WATimeUtils").castMilliSecondsToUnixTime(c);return a>=b}function e(a){if(a==null)return;if(j(a)){Number(a)!==-1&&c("FBLogger")("messenger_e2ee_web").mustfix("Invalid timestamp supplied to ensureValidMillisTime: %s",Number(a));return d("WATimeUtils").castToMillisTime(a*1e3)}return a}f=(h||(h=d("I64"))).of_string("9999999999999");var k=Number.MAX_VALUE;g.toTimestamp=i;g.millisTimeToTimestamp=a;g.isTimestampNewerThanXDays=b;g.ensureValidMillisTime=e;g.MAX_TIMESTAMP_MS=f;g.MAX_TIMESTAMP=k;g.MIN_TIMESTAMP_MS=h.zero}),98);
__d("MAWBridgeUIEventDataValidation",["FBLogger","I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){try{return(h||(h=d("I64"))).of_string(a)}catch(b){c("FBLogger")("mpf_web_foundations").catching(b).mustfix("Cannot convert string to i64: %s",a)}}g.stringToI64Opt=a}),98);
__d("MAWWorkerEvent",["QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set();function a(a,b){if(h.has(b))return;h.add(b);c("QPLUserFlow").start(c("qpl")._(1056842055,"807"),{annotations:{string:{event:a}},instanceKey:b})}function b(a){if(!h.has(a))return;h["delete"](a);c("QPLUserFlow").endSuccess(c("qpl")._(1056842055,"807"),{instanceKey:a})}function d(a,b){if(!h.has(a))return;h["delete"](a);c("QPLUserFlow").endFailure(c("qpl")._(1056842055,"807"),"fail",{annotations:{string:{error:b}},instanceKey:a})}function e(a){if(!h.has(a))return;h["delete"](a);c("QPLUserFlow").addPoint(c("qpl")._(1056842055,"807"),"timeout_logged");c("QPLUserFlow").endFailure(c("qpl")._(1056842055,"807"),"timeout",{instanceKey:a})}g.logStart=a;g.logSuccess=b;g.logFailure=d;g.logTimeout=e}),98);
__d("MAWBridgeLoggingUtils",["MAWWorkerEvent","ODS"],(function(a,b,c,d,e,f,g){"use strict";var h,i=3185,j="armadillo_worker_runtime",k="getWorkerHeartbeat",l=10,m=new Array(l);function n(a,b,c){(h||(h=d("ODS"))).bumpEntityKey(i,j,a+"_"+b+"_"+c)}function a(a,b,c){n(a,b,"start");if(b===k)return;(h||(h=d("ODS"))).bumpEntityKey(i,j,"route_start");d("MAWWorkerEvent").logStart(b,c);m.length===l&&m.shift();m.push(a+"_"+b)}function o(a){m.filter(Boolean).forEach(function(b){(h||(h=d("ODS"))).bumpEntityKey(i,j,b+a)})}function b(a,b,c){n(a,b,"success");if(b===k)return;(h||(h=d("ODS"))).bumpEntityKey(i,j,"route_success");d("MAWWorkerEvent").logSuccess(c)}function c(a,b,c,e){n(a,b,"fail");if(b===k)return;(h||(h=d("ODS"))).bumpEntityKey(i,j,"route_fail");d("MAWWorkerEvent").logFailure(e,c)}function e(a,b,c){n(a,b,"timeout");if(b===k)return;(h||(h=d("ODS"))).bumpEntityKey(i,j,"route_timeout");d("MAWWorkerEvent").logTimeout(c)}function f(){o("_before_unresponsive"),m.fill(null)}g.CAT_ID=i;g.ENT=j;g.HEARTBEAT_ROUTE=k;g.RECENT_ROUTES_NUM=l;g.routeStart=a;g.logRecentRoutes=o;g.routeSuccess=b;g.routeFail=c;g.routeTimeout=e;g.logRecentBridgeEvents=f}),98);
__d("MAWTimedBridge",["FBLogger","MAWBridgeLoggingUtils","MAWMaybeWithTimeout","MAWWaitForBackendSetup"],(function(a,b,c,d,e,f,g){"use strict";var h=6e4;function a(a,b,e,f,g){g===void 0&&(g=h);return d("MAWMaybeWithTimeout").maybeWithTimeout(d("MAWWaitForBackendSetup").waitForBackendSetup(e).then(function(){return a()}),g,function(){d("MAWBridgeLoggingUtils").routeTimeout(b,e,f);throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("Failed to complete bridge route %s in time",e)},e)}g.bridgeTimeout=a}),98);
__d("MAWBridgeSendAndReceive",["MAWBridge","MAWBridgeLoggingUtils","MAWTimedBridge"],(function(a,b,c,d,e,f,g){"use strict";var h=0;function a(a,b,c,e){e=d("MAWTimedBridge").bridgeTimeout(function(){d("MAWBridgeLoggingUtils").routeStart(a,b,h);return d("MAWBridge").getBridge().sendAndReceive(a,b,c).then(function(c){d("MAWBridgeLoggingUtils").routeSuccess(a,b,h);return c})["catch"](function(c){d("MAWBridgeLoggingUtils").routeFail(a,b,c.message,h);throw c})},a,b,h,e);h++;return e}g.sendAndReceive=a}),98);
__d("MWEncryptedBackupsFirstRestoreUpsellTime",["FBLogger","WebStorage","getMWEncryptedBackupsIsLocalStorageSupported"],(function(a,b,c,d,e,f,g){"use strict";var h,i="mw_encrypted_backups_restore_upsell_first_impression_time_key";function a(){var a=Date.now().toString();if(!d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported())return a;try{var b;b=(b=(h||(h=c("WebStorage"))).getLocalStorage())==null?void 0:b.getItem(i);if(b==null){var e;(e=(h||(h=c("WebStorage"))).getLocalStorage())==null?void 0:e.setItem(i,a);return a}return b}catch(b){c("FBLogger")("labyrinth_web").mustfix("[labyrinth][web] Failed to set EB session identifier due to %s",b);return a}}g.getFirstRestoreUpsellTime=a}),98);
__d("cometIsMimeTypeForMedia",["FBLogger","UFICommentFileInputAcceptValues"],(function(a,b,c,d,e,f,g){"use strict";var h={file:null,photo:null,video:null},i={"image/gif":"video","image/webp":"video"};function j(a){return a.split(",").map(function(a){return a.trim()}).map(function(a){return a.replace(/\/\*$/,"/")})}function k(a,b,d){h[a]==null&&(h[a]=j(d));d=h[a];if(d==null)throw c("FBLogger")("ufi2").mustfixThrow("CometIsMimeTypeForMedia prefixes can't be null");var e=i[b];return e!=null?e===a:d.some(function(a){return b.startsWith(a)})}function a(a){return k("photo",a,d("UFICommentFileInputAcceptValues").photos)}function b(a){return k("video",a,d("UFICommentFileInputAcceptValues").videos)}function e(a){return k("file",a,d("UFICommentFileInputAcceptValues").files)}g.mimeTypeAcceptStringToArray=j;g.isMimeTypeForPhoto=a;g.isMimeTypeForVideo=b;g.isMimeTypeForFile=e}),98);
__d("LSGetAttachmentType",["LSIntEnum","MessagingAttachmentType","cometIsMimeTypeForMedia"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=a.type;if(d("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a))return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE);else if(a==="audio/wav")return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO);else if(a==="image/gif")return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE);else if(d("cometIsMimeTypeForMedia").isMimeTypeForVideo(a))return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO);else return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE)}g["default"]=a}),98);
__d("isGroupInvitesEnabled",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("125")===!0}g["default"]=a}),98);
__d("SharedWorkerStatusLock",[],(function(a,b,c,d,e,f){"use strict";var g="sw-lock";function h(a){return g+"-"+a}function a(){var a=null,b;function c(){var c=self,d=c.navigator.locks;c.LockManager!=null&&d instanceof c.LockManager&&(b==null&&(b=new c.Promise(function(b){a=b})),d.request(h(c.name),function(a){if(a!=null)return b}))}function d(){a==null?void 0:a(),b=null,a=null}return{init:c,release:d}}f.getStatusLockName=h;f.getStatusLock=a}),66);
__d("EphemeralMediaViewMode",[],(function(a,b,c,d,e,f){a=Object.freeze({READ_ONCE:0,REPLAYABLE:1,PERMANENT:2});f["default"]=a}),66);
__d("LSContactGender",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FEMALE:1,MALE:2,NEUTER:3});f["default"]=a}),66);
__d("LSContactType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,USER:1,PAGE:2,PAGE_PERSONA:3});f["default"]=a}),66);
__d("LSContactTypeExact",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FB_USER:1,MESSENGER_ONLY:2,DEACTIVATED_ALLOWED_ON_MESSENGER:3,MESSENGER_KID:4,FB_PAGE:5,FB_PAGE_PERSONA:6,IG_USER:7,MESSENGER_CALL_GUEST:8,WHATSAPP:9,GUEST_USER:10,IG_BUSINESS_USER:11,IG_CREATOR_USER:12,FB_SINGLE_OWNER_ADDITIONAL_PROFILE:13,PROXY_OCULUS_USER:14,WORK_VC_ENDPOINT:15,GENERATIVE_AI_BOT:16,COMMUNITY_CHAT:17,INTEROP_3P_USER:18,FB_ONLY_NOT_ALLOWED_ON_MESSENGER:19,MESSENGER_ONLY_NOT_ALLOWED_ON_FB:20,ADDITIONAL_PROFILE_PLUS:21,GROUP_ANONYMOUS_PROFILE:50,USER_FOR_SUPPORT:51});f["default"]=a}),66);
__d("LSContactViewerRelationship",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,NOT_CONTACT:1,CONTACT_OF_VIEWER:2,FACEBOOK_FRIEND:3,SOFT_CONTACT:4});f["default"]=a}),66);
__d("LSContactWorkForeignEntityType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,FOREIGN:1,NOT_FOREIGN:2,NOT_FOREIGN_LIMITED:3});f["default"]=a}),66);
__d("LSHotEmojiSize",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,SMALL:1,MEDIUM:2,LARGE:3});f["default"]=a}),66);
__d("LSInstagramE2EEEligibility",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:-1,INELIGIBLE:0,ELIGIBLE:1,REQUIRED:2,DUAL_SEND_ELIGIBLE:3,GROUPS_ELIGIBLE:4});f["default"]=a}),66);
__d("LSMessageUnsendabilityStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({CAN_UNSEND:0,DENY_LOG_MESSAGE:1,DENY_TOMBSTONE_MESSAGE:2,DENY_FOR_NON_SENDER:3,DENY_P2P_PAYMENT:4,DENY_STORY_REACTION:5,DENY_BLOB_ATTACHMENT:6,DENY_MESSAGE_NOT_FOUND:7,DENY_MESSAGE_INSTAGRAM_DIRECT_WRITE_RESTRICTION:8});f["default"]=a}),66);
__d("LSMessagingThreadAttributionType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,UNKNOWN_TEST:1,UNKNOWN_FAILURE_RETRY:2,MESSENGER_INBOX:65536,MESSENGER_INBOX_IN_THREAD:65537,MESSENGER_INBOX_THREAD_LIST:65538,MESSENGER_INBOX_NESTED_FOLDER:65539,MESSENGER_INBOX_RECENT_THREADS:65540,MESSENGER_INBOX_REMAINING_THREADS:65541,MESSENGER_INBOX_MESSAGE_SEARCH:65542,MESSENGER_INBOX_IMAGE_SENDING:65543,MESSENGER_INBOX_FORWARD:65544,MESSENGER_INBOX_ARCHIVED_THREADS:65545,MESSENGER_INBOX_PENDING_REQUESTS:65546,MESSENGER_INBOX_ACTIVE_CONTACTS:65547,MESSENGER_INBOX_THREAD_BANNER_BOTTOM_SHEET:65548,MESSENGER_INBOX_PEOPLE_YOU_MAY_KNOW:65549,MESSENGER_UNIVERSAL_SEARCH:131072,MESSENGER_UNIVERSAL_SEARCH_NULL_STATE:131073,MESSENGER_UNIVERSAL_SEARCH_KEY_PRESSED:131074,MESSENGER_UNIVERSAL_SEARCH_MESSAGE_SEARCH:131075,MESSENGER_UNIVERSAL_SEARCH_ADVANCED_CONTENT_SEARCH:131076,MESSENGER_UNIVERSAL_SEARCH_AI_PROMPT:131077,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD:131078,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_AIRPLANE_SEND:131079,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_KEYBOARD_SEND:131080,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_DONUT:131081,MONTAGE_AND_ACTIVE_NOW:196608,MONTAGE_AND_ACTIVE_NOW_MONTAGE_INBOX_UNIT:196609,MONTAGE_AND_ACTIVE_NOW_ACTIVE_NOW:196610,MONTAGE_AND_ACTIVE_NOW_INBOX_COMPOSER:196611,MONTAGE_AND_ACTIVE_NOW_ACTIVE_AND_HAS_STORY:196612,MONTAGE_AND_ACTIVE_NOW_CUSTOM_STATUS:196613,MONTAGE_AND_ACTIVE_NOW_NOTES:196614,MONTAGE_AND_ACTIVE_NOW_SEE_ALL_ACTIVE:196615,MONTAGE_AND_ACTIVE_NOW_AN_TRAY_STORY_REPLY:196616,MESSENGER_ACTIVE_NOW_FRIENDS_TAB:262144,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_FRIENDS_TAB:262145,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_PLACE_HOLDER:262146,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_RECENT_ACTIVE:262147,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_RECENT_ACTIVE_AND_STORY:262148,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_CONTENT_DISCOVERY:262149,MESSENGER_PENDING_REQUESTS:327680,MESSENGER_PENDING_REQUESTS_INBOX_THREAD_LIST:327681,MESSENGER_PENDING_REQUESTS_PENDING_REQUESTS_PAGE:327682,MESSENGER_BROADCAST_FLOW:393216,MESSENGER_BROADCAST_FLOW_FROM_MESSENGER:393217,MESSENGER_BROADCAST_FLOW_FROM_FB:393218,MESSENGER_BROADCAST_FLOW_FROM_EXTERNAL:393219,MESSENGER_BROADCAST_FLOW_FROM_FB__NEWSFEED_SHARESHEET:393220,MESSENGER_BROADCAST_FLOW_FROM_FB__NEWSFEED_GOODWILL_COMPOSER:393221,MESSENGER_BROADCAST_FLOW_FROM_FB__SHORTS_VIEWER:393222,MESSENGER_BROADCAST_FLOW_FORWARD_GUTTER:393223,MESSENGER_BROADCAST_FLOW_FORWARD_LONGCLICK:393224,MESSENGER_BROADCAST_FLOW_MESSENGER_PHOTO_VIEW:393225,MESSENGER_OMNIPICKER:458752,MESSENGER_OMNIPICKER_NULL_STATE:458753,MESSENGER_OMNIPICKER_KEY_PRESSED:458754,MESSENGER_NOTIFICATION:524288,MESSENGER_NOTIFICATION_IN_THREAD_REPLY:524289,MESSENGER_NOTIFICATION_LONGPRESS_REPLY:524290,MESSENGER_NOTIFICATION_LONGPRESS_REACTION:524291,CLICK_TO_MESSENGER_AD:589824,CLICK_TO_MESSENGER_AD_FROM_NEWSFEED:589825,CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA:589826,CLICK_TO_MESSENGER_AD_VIEW_AND_MESSAGE:589827,CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA__NEWSFEED_CTM_ADS_CTA:589828,PAYMENTS:655360,PAYMENTS_BUBBLE_CLICK:655361,RTC:720896,RTC_VOIP_INCALL:720897,RTC_DRAWER_PROMOTION:720898,FB_PAGE:786432,FB_PAGE_ABOUT_CARD:786433,FB_PAGE_PROFILE_HEADER_MESSAGE_BUTTON:786434,FB_PAGE_PROFILE_FOOTER_MESSAGE_BUTTON:786435,FB_PAGE_PROFILE_MORE_DRAWER:786436,FB_PAGE_RESPONSIVENESS_CONTEXT_CARD:786437,FB_PAGE_PYMM_RHC:786439,FB_PROFILE:851968,FB_PROFILE_TIMELINE_MESSAGE_BUTTON:851969,FB_PROFILE_FACEBOOK_PROFILE:851970,FB_PROFILE_MESSAGE_BUTTON:851971,FB_PROFILE_MESSAGE_BUTTON_BLOKS_URL:851972,FB_PROFILE_PROFILE_HEADER_COMPOSER:851973,FB_SEARCH:917504,FB_SEARCH_CONTEXTUAL_PROFILE_ACTION_BAR_FROM_SEARCH:917505,FB_SEARCH_SEARCH_MESSAGE_BUTTON:917506,FB_SEARCH_FB_MESSAGE_SEARCH_RESULTS:917507,FB_SEARCH_HIGH_CONFIDENCE_CARD:917508,FB_SEARCH_MENTIONS:917509,FB_SEARCH_NULLSTATE_CTA:917510,FB_SEARCH_NULL_STATE:917511,FB_SEARCH_TYPEAHEAD:917512,FB_SEARCH_TYPEAHEAD_AIRPLANE_SEND:917513,FB_SEARCH_TYPEAHEAD_KEYBOARD_SEND:917514,FB_SEARCH_TYPEAHEAD_DONUT:917515,FB_SEARCH_NULL_STATE_DONUT:917516,FB_SEARCH_NULL_STATE_AIRPLANE_SEND:917517,FB_SEARCH_NULL_STATE_KEYBOARD_SEND:917518,CRYPTO:983040,MESSENGER_MONTAGE_COMPOSER:1048576,MESSENGER_MONTAGE_COMPOSER_FRIENDS_TAB:1048577,MESSENGER_MONTAGE_COMPOSER_FRIENDS_TAB_STORY_AND_ACTIVE_NOW:1048578,MESSENGER_MONTAGE_REPLY:1114112,MESSENGER_MONTAGE_REPLY_INBOX_THREAD_LIST_PROFILE:1114113,MESSENGER_MONTAGE_REPLY_REPLY_CONTEXT:1114114,MESSENGER_MONTAGE_REPLY_THREAD_NAV_BAR:1114115,MESSENGER_MONTAGE_REPLY_INBOX_THREAD_LIST_PROFILE_AUTHOR_PROFILE:1114116,MESSENGER_MONTAGE_REPLY_REPLY_CONTEXT_AUTHOR_PROFILE:1114117,MESSENGER_MONTAGE_REPLY_THREAD_NAV_BAR_AUTHOR_PROFILE:1114118,MESSENGER_MONTAGE_REPLY_ONE_TO_ONE_CHAT_THREAD_STORY_BUBBLE:1114119,MESSENGER_THREAD_MEMBERS_LIST:1179648,MARKETPLACE:1245184,MARKETPLACE_ACTIVITY_BANNER:1245185,MARKETPLACE_SEND_MESSAGE:1245186,FB_STORY:1310720,FB_STORY_VIEWER_SHEET_MENU:1310721,FB_STORY_VIEWER_SHEET_ROW:1310722,FB_STORY_STORIES_JEWEL_NOTIFICATION:1310723,FB_STORY_STORIES_PUSH_NOTIFICATION:1310724,FB_STORY_STORIES_VIEWER_CONSUMER_REPLY:1310725,FB_STORY_STORIES_VIEWER_CONSUMER_ARTIFACT:1310726,FB_STORY_STORIES_PAGE_STORY_CONVERSATIONS:1310727,FB_STORY_SOCIAL_CONTEXT_CONVERSATIONS:1310728,FB_STORY_MENTIONS:1310729,FB_STORY_SELF_STORY_SEND:1310730,FB_STORY_SHARESHEET:1310731,WORKSPEED:1376256,WORKSPEED_COMPOSER_LIKE_BUTTON:1376257,WORKSPEED_COMPOSER_GIF_PICKER:1376258,MDOTME:1441792,MDOTME_ORGANIC_POST:1441793,MDOTME_MARKETING_EMAIL:1441794,MDOTME_MBS_OFFSITE_EMAIL:1441795,CUSTOMER_CHAT_PLUGIN:1507328,CUSTOMER_CHAT_PLUGIN_MOBILE_REDIRECT:1507329,CUSTOMER_CHAT_PLUGIN_UPGRADE_FLOW:1507330,CUSTOMER_CHAT_PLUGIN_RE_ENGAGEMENT:1507331,FB_FEED:1572864,FB_FEED_ORGANIC_POST:1572865,FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE:1572866,FB_FEED_QUESTION_TRIGGERED_CONVO:1572867,FB_FEED_DYNAMIC_HOVER_CARD:1572868,FB_FEED_ORGANIC_POST__NEWSFEED_PAGE_POST_CTA:1572869,FB_FEED_ORGANIC_POST__NEWSFEED_BUMPER_SMCTA:1572870,FB_FEED_BCF_OPEN_CHAT_BUTTON:1572871,FB_FEED_REACTORS_LIST_MESSAGE_BUTTON:1572872,FB_FEED_REPLY_TO_AUTHOR:1572873,FB_FEED_UFI_SEND_SUGGESTIONS:1572874,FB_FEED_BCF:1572875,FB_FEED_COMMUNITY_CHATS_FEED_POST:1572876,FB_FEED_SOCIAL_CONNECTIONS_QP:1572877,FB_FEED_META_AI_DEEP_DIVES:1572878,FB_FEED_META_AI_SHARE_SHEET:1572879,FB_FEED_META_AI_TRENDING_DISCOVER_UNIT:1572880,FB_FEED_META_AI_POST_DEEPDIVE_PILL:1572881,FB_FEED_META_AI_EDUCATIONAL_QP:1572882,FB_FEED_META_AI_ENTITY_SUMMARIZATION_DISCOVER_UNIT:1572883,FB_FEED_META_AI_COMMENTS_SUMMARY:1572884,FB_NOTIFICATION:1638400,FB_NOTIFICATION_JEWEL_NOTIF:1638401,FB_NOTIFICATION_PUSH_NOTIF:1638402,FB_EVENT:1703936,FB_EVENT_MESSAGE_HOST:1703937,FB_EVENT_SHARE_CLASS_MATERIALS:1703938,SUPPORT_RESOURCES:1769472,SUPPORT_RESOURCES_FRX_ACTION:1769473,LEAD_GEN_MESSAGING:1835008,LEAD_GEN_MESSAGING_PRE_SUBMISSION:1835009,LEAD_GEN_MESSAGING_POST_SUBMISSION:1835010,LEAD_GEN_MESSAGING_CROSS_CHANNEL_VERTICAL_PRESENT_ANDROID:1835011,LEAD_GEN_MESSAGING_CROSS_CHANNEL_HSCROLL_ANDROID:1835012,MESSENGER_GRAPH:1900544,MESSENGER_GRAPH_SELECT_CONTACT:1900545,MESSENGER_CHAT:1966080,MESSENGER_CHAT_FROM_JEWEL__THREAD_LIST:1966081,MESSENGER_CHAT_IN_THREAD:1966082,MESSENGER_CHAT_FORWARD:1966083,MESSENGER_ARCHIVED_THREADS:2031616,MESSENGER_ARCHIVED_THREADS_ARCHIVED_THREADS_FOLDER:2031617,JEWEL:2097152,JEWEL_THREAD_LIST:2097153,JEWEL_SEARCH:2097154,JEWEL_NEW_MESSAGE:2097155,JEWEL_NESTED_FOLDER:2097156,CHATHEADS:2162688,CHATHEADS_RECENT_THREADS:2162689,CHATHEADS_OVERFLOW:2162690,CHATHEADS_NEW_MESSAGE:2162691,SIDEBAR:2228224,SIDEBAR_CONTACTS_LIST:2228225,SIDEBAR_CONTACTS_SEARCH:2228226,SIDEBAR_CONTACTS_GROUPS:2228227,SIDEBAR_CONTACTS_COMMUNITY_CHATS:2228228,MESSENGER_COMMUNITY_MESSAGING:2293760,MESSENGER_COMMUNITY_MESSAGING_COMMUNITY_CHANNEL:2293761,MESSENGER_COMMUNITY_MESSAGING_FULLSCREEN_CHAT:2293762,FB_PLATFORM_LOGIN:2359296,FB_PLATFORM_LOGIN_LOGIN_CONNECT_WITH_MESSENGER:2359297,CONTACT_MANAGER:2424832,CONTACT_MANAGER_CONTACT_SHARE:2424833,CONTACT_MANAGER_PEOPLE_TAB_CONTACT_LIST:2424834,CONTACT_MANAGER_PEOPLE_TAB_CONTACT_SEARCH:2424835,CONTACT_MANAGER_ICON_CONTACT_LIST:2424836,CONTACT_MANAGER_ICON_CONTACT_SEARCH:2424837,MESSAGING_INBOX_IN_BLUE:2490368,MESSAGING_INBOX_IN_BLUE_THREAD_LIST:2490369,MESSAGING_INBOX_IN_BLUE_PEOPLE_PICKER:2490370,MESSAGING_INBOX_IN_BLUE_INBOX_ICON:2490371,MESSAGING_INBOX_IN_BLUE_SWIPE_FROM_RIGHT:2490372,MESSAGING_INBOX_IN_BLUE_MIB_NOTIFICATION:2490373,MESSAGING_INBOX_IN_BLUE_ACTIVE_NOW:2490374,MESSAGING_INBOX_IN_BLUE_SUGGESTED_CHATS:2490375,MESSAGING_INBOX_IN_BLUE_CHAT_PREVIEW_BANNER:2490376,MESSAGING_INBOX_IN_BLUE_THREAD_VIEW_CORE_NULL_STATE:2490377,MESSAGING_INBOX_IN_BLUE_MESSAGE_REQUESTS:2490378,MESSAGING_INBOX_IN_BLUE_SPAM:2490379,MESSAGING_INBOX_IN_BLUE_FB_GROUPS:2490380,MESSAGING_INBOX_IN_BLUE_MESSENGER_PEEK_STATE_BUTTON:2490381,MESSAGING_INBOX_IN_BLUE_MESSENGER_PEEK_STATE_TOOLTIP:2490382,MESSAGING_INBOX_IN_BLUE_BROADCAST_FLOW:2490383,MESSAGING_INBOX_IN_BLUE_THREAD_VIEW_HEADER:2490384,MESSAGING_INBOX_IN_BLUE_PRIVACY_SETTINGS:2490385,MESSAGING_INBOX_IN_BLUE_ARCHIVED_CHATS:2490386,MESSAGING_INBOX_IN_BLUE_UNIVERSAL_SEARCH:2490387,MESSAGING_INBOX_IN_BLUE_INBOX_SEARCH_BAR:2490388,MIB_NOTIFICATION:2555904,MIB_NOTIFICATION_PUSH_NOTIFICATION:2555905,MIB_NOTIFICATION_JEWEL_NOTIFICATION:2555906,MIB_NOTIFICATION_DIRECT_PUSH_NOTIF:2555907,MIB_NOTIFICATION_DIRECT_JEWEL_NOTIF:2555908,MESSENGER_RESTRICTED_ACCOUNTS:2621440,ARMADILLO_CUTOVER_THREAD_LINKING_MESSAGE:2686976,CALLS_TAB:2752512,MINI_SHOP_VIEW_MENU_BUTTON:2818048,SHARESHEET:2883584,SHARESHEET_GENERALIZED_BROADCAST_FLOW:2883585,SHARESHEET_OFF_PLATFORM_SHARING_H_SCROLL:2883586,UFI:2949120,UFI_GENERALIZED_BROADCAST_FLOW:2949121,CHATHEAD_CLICK_COLLAPSED:3014656,TIMELINE_MESSAGE_BUTTON:3080192,DIRECT_REPLY_INTENT:3145728,FB_GROUPS:3211264,FB_GROUPS_INBOX:3211265,FB_GROUPS_PICKER_EXISTING_CHAT:3211266,FB_GROUPS_PICKER_JOIN_CHAT:3211267,FB_GROUPS_MEMBER_LIST:3211268,FB_GROUPS_INLINE_COMPOSER:3211269,FB_GROUPS_SCOPED_SEARCH:3211270,FB_GROUPS_UNJOINED_MALL_HEADER:3211271,FB_GROUPS_DISCOVER_FEED_UNIT:3211272,FB_GROUPS_ANSWER_AGENT_CONTEXTUAL_PROFILE:3211273,FB_GROUPS_ANSWER_AGENT_FOLLOWUP_SECTION:3211274,DEVICES:3276800,DEVICES_STELLA:3276801,FB_WELLBEING:3342336,FB_WELLBEING_INCALL_UNBLOCKING_NOTIFICATION:3342337,MESSENGER_DEEP_LINKING:3407872,READ_ONLY_CUTOVER_THREAD:3473408,READ_ONLY_CUTOVER_THREAD_ARMADILLO_THREAD:3473409,ARMADILLO_THREAD:3538944,ARMADILLO_THREAD_READ_ONLY_CUTOVER_THREAD:3538945,ARMADILLO_THREAD_EXTERNAL_LINK:3538946,FB_SHORTS:3604480,FB_SHORTS_PROFILE:3604481,FB_SHORTS_REACTORS_LIST_MESSAGE_BUTTON:3604482,SEND_PLUGIN:3670016,SEND_AS_MESSAGE_FROM_NT:3735552,MESSENGER_PUBLIC_CHATS_MESSAGING:3801088,MESSENGER_GROWTH:3866624,MESSENGER_GROWTH_NOTIFICATIONS_ENTRYPOINT:3866625,FRIENDS_HOME:3932160,FRIENDS_HOME_ACTIVE_NOW:3932161,FRIENDS_HOME_MESSAGE_NEW_FRIENDS:3932162,FRIENDS_HOME_POST_ACCEPT_MESSAGING:3932163,FRIENDS_HOME_SENDER_POST_ACCEPT_WAVE:3932164,EXTERNAL_LINK_XMA:3997696,EXTERNAL_LINK_XMA_FROM_COMPOSER:3997697,EXTERNAL_LINK_XMA_FROM_DEEP_LINKING:3997698,EXTERNAL_LINK_XMA_FROM_SHARE_EXTENSION:3997699,FB_NOTIFICATIONS:4063232,QUICK_PROMOTION:4128768,QUICK_PROMOTION_CTA:4128769,QUICK_PROMOTION_INTERSTITIAL:4128770,QUICK_PROMOTION_TOP_BANNER:4128771,FBM_IN_APP_NOTIFS:4194304,CREATOR_SUPPORT:4259840,CREATOR_SUPPORT_MESSENGER_TOAST:4259841,FB_INSTANT_GAME:4325376,COMMUNITY_CHATS_IN_FEED:4390912,COMMUNITY_CHATS_IN_FEED_PERMALINK:4390913,UNIFIED_BUSINESS_INBOX:4456448,ROLLCALL:4521984,HIGHLIGHTS_TAB:4587520,HIGHLIGHTS_TAB_FEED_INLINE:4587521,HIGHLIGHTS_TAB_MEDIA_VIEWER:4587522,HIGHLIGHTS_TAB_THREAD_VIEW:4587523,HIGHLIGHTS_TAB_FEED_INLINE_CONNECTED_CHAT:4587524,HIGHLIGHTS_TAB_FEED_INLINE_LOCAL_EVENT:4587525,HIGHLIGHTS_TAB_FEED_INLINE_FRIENDS_UPDATE:4587526,HIGHLIGHTS_TAB_FEED_INLINE_BIRTHDAY:4587527,HIGHLIGHTS_TAB_MEDIA_VIEWER_CONNECTED_CHAT:4587528,HIGHLIGHTS_TAB_MEDIA_VIEWER_FRIENDS_UPDATE:4587529,HIGHLIGHTS_TAB_THREAD_VIEW_CONNECTED_CHAT:4587530,HIGHLIGHTS_TAB_THREAD_VIEW_LOCAL_EVENT:4587531,HIGHLIGHTS_TAB_THREAD_VIEW_FRIENDS_UPDATE:4587532,HIGHLIGHTS_TAB_THREAD_VIEW_BIRTHDAY:4587533,HIGHLIGHTS_TAB_THREAD_VIEW_NOTE:4587534,HIGHLIGHTS_TAB_FEED_INLINE_NOTE:4587535,HIGHLIGHTS_TAB_CONNECTED_BROADCAST_CHANNEL_SHARE_SHEET:4587536,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_BIRTHDAY:4587537,MARKETPLACE_INBOX:4653056,ONE_TAP_MESSAGE_QUICK_SHARE:4718592,HIGHLIGHTS_TAB_STORIES_TRAY:4784128,FB_BIRTHDAY_CENTER:4849664,MESSENGER_SIRIKIT:4915200,MESSENGER_SIRIKIT_CALLKIT_QUICK_REPLY:4915201,MESSENGER_SIRIKIT_VOICE_COMMAND:4915202,CLICK_TO_SUBSCRIBE_AD:4980736,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER:5046272,FB_UNIVERSAL_SEARCH:5111808,FB_UNIVERSAL_SEARCH_NULL_STATE_SUGGESTED:5111809,FB_UNIVERSAL_SEARCH_NULL_STATE_RECENT:5111810,FB_UNIVERSAL_SEARCH_QUERY_RESULTS:5111811,FBLITE_MESSAGING:5177344,FBLITE_MESSAGING_FROM_EXTERNAL:5177345,FBLITE_MESSAGING_FORWARD_FROM_BROADCAST_FLOW:5177346,FBLITE_MESSAGING_IN_THREAD:5177349,FBLITE_MESSAGING_ACTIVE_NOW:5177352,FBLITE_MESSAGING_ARCHIVED_CHATS:5177353,FBLITE_MESSAGING_SPAM:5177354,FBLITE_MESSAGING_MESSAGE_REQUESTS:5177355,FBLITE_MESSAGING_MARKETPLACE:5177356,FBLITE_MESSAGING_THREAD_MEMBERS_LIST:5177357,FBLITE_MESSAGING_READONLY_VERSION_OF_CUTOVER_THREAD:5177358,FBLITE_MESSAGING_NOTIFICATION:5242880,FBLITE_MESSAGING_NOTIFICATION_IN_THREAD_REPLY:5242881,FBLITE_MESSAGING_NOTIFICATION_DIRECT_REPLY:5242882,FBLITE_INBOX:5308416,FBLITE_INBOX_UNIVERSAL_SEARCH:5308417,FBLITE_INBOX_PEOPLE_PICKER:5308418,FBLITE_INBOX_RECENT_THREADS:5308419,FBLITE_INBOX_REMAINING_THREADS:5308420,SHARED_ALBUM:5373952,QUICK_REPLIES:5439488,QUICK_REPLIES_TRAY:5439489,MESSENGER_CTA_AFTER_CALL_ENDS:5505024,MESSENGER_CONVERSATION_SHORTCUT:5570560,CC_ADMIN_SEND_MESSAGE_HINT_CARD:5636096,CC_MEMBER_SEND_MESSAGE_HINT_CARD:5701632,MSGR_AVATAR_DETAILS:5767168,PRIVATE_SHARING_FORWARD_SUPER_SHARE_SHEET:5832704,MEMORIES:5898240,META_AI_TAB:5963776,MEMORIES_NOTIFICATION:6029312,MEMORIES_QUICK_PROMOTION:6094848,MEMORIES_HIGHLIGHTS_TAB:6160384,MEMORIES_LIST:6225920,MSGR_PYMK_LIST_SCREEN:6291456,INSTAGRAM_WEB_SENDS:6356992,AI_SUGGESTED_PROMPT_TRAY:6422528,AI_SUGGESTED_PROMPT_ICEBREAKER:6488064,COMMUNITY_INVITE:6553600,COMMUNITY_CHAT_INVITE:6619136,AI_DISCOVERY_BOTTOM_SHEET:6684672,IN_THREAD_INVITE_MODEL:6750208});f["default"]=a}),66);
__d("LSRtcCallState",[],(function(a,b,c,d,e,f){a=Object.freeze({NO_ONGOING_CALL:0,AUDIO_GROUP_CALL:1,VIDEO_GROUP_CALL:2,VIDEO_1TO1_CALL:3,AUDIO_1TO1_CALL:4});f["default"]=a}),66);
__d("RavenMessagingState",[],(function(a,b,c,d,e,f){a=Object.freeze({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4});f["default"]=a}),66);
__d("MWLSContactTypeExactUtils",["I64","LSContactTypeExact","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").IG_USER))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").IG_BUSINESS_USER)))return!0;else return(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").IG_CREATOR_USER))}g.isIgContact=a}),98);
__d("LSInitSyncCompleteSubscription",["I64","LSIntEnum","Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,c){return new(j||(j=b("Promise")))(function(b,e){var f=d("ReQL").fromTableAscending(a.table("sync_groups")).getKeyRange(c).subscribe(function(a,c){if(c.operation==="delete")return;if((h||(h=d("I64"))).equal(c.value.syncStatus,(i||(i=d("LSIntEnum"))).ofNumber(2))){f();return b()}})})}function a(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("sync_groups")).getKeyRange(b)).then(function(c){if(c!=null&&(h||(h=d("I64"))).equal(c.syncStatus,(i||(i=d("LSIntEnum"))).ofNumber(2)))return;return k(a,b)})}function c(a){return k(a,(i||(i=d("LSIntEnum"))).ofNumber(1))}g.maybeWaitForSyncGroup=a;g.use=c}),98);
__d("LSCancelTaskByQueueName",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(2).fetch([[[a[0]]],"queueNameTaskId"]),function(c){return c.queueName===a[0]&&c.context===b.i64.to_string(a[1])}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSCreateOfflineThreadingID",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return c[0]=b.i64.random(),d[0]=b.i64.and_(b.i64.or_(b.i64.lsl_(a[0],b.i64.to_int32(b.i64.cast([0,22]))),b.i64.and_(c[0],b.i64.cast([0,4194303]))),b.i64.cast([2147483647,4294967295])),b.resolve(d)}e.exports=a}),null);
__d("LSContactUtils",["I64","LSContactBitOffset","LSContactBlockedByViewerStatus","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return!(h||(h=d("I64"))).equal(a.blockedByViewerStatus,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))}function b(a){return(a=d("LSContactBitOffset").has(66,a))!=null?a:!1}g.isContactBlocked=a;g.isContactRestricted=b}),98);
__d("useAsyncReStore",["LSDatabaseSingleton","Promise","ReStoreProvider.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;c=i||d("react");var l=c.useContext,m=c.useMemo;function a(){var a=l((k||(k=d("ReStoreProvider.react"))).context);return m(function(){return a!=null?(h||(h=b("Promise"))).resolve(a):(j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton},[a])}g["default"]=a}),98);
__d("WAPromiseTimeout",["Promise","WACustomError"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,c,e){var f=null,g=new(h||(h=b("Promise")))(function(a,b){f=setTimeout(function(){b(new(d("WACustomError").TimeoutError)(e)),clearTimeout(f)},c)});return h.race([a,g])["finally"](function(){clearTimeout(f)})};g.promiseTimeout=a}),98);
__d("WAByteArray",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b=b;var c=new Uint8Array(a);for(a=a-1;a>=0;a--)c[a]=b&255,b>>>=8;return c}function b(a){return a.buffer.slice(a.byteOffset,a.byteLength+a.byteOffset)}function c(a,b){if(!a||!b)return!1;a=new Uint8Array(a);b=new Uint8Array(b);var c=a.length,d=b.length;if(c!==d)return!1;for(d=0;d<c;d++)if(a[d]!==b[d])return!1;return!0}f.intToBytes=a;f.uint8ArrayToBuffer=b;f.compareArrayBuffer=c}),66);
__d("WAHashStringToNumber",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=0;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);b=(b<<5)-b+d;b|=0}return Math.abs(b)}f.hashStringToNumber=a}),66);